var dy=Object.defineProperty;var O0=er=>{throw TypeError(er)};var hy=(er,_e,tr)=>_e in er?dy(er,_e,{enumerable:!0,configurable:!0,writable:!0,value:tr}):er[_e]=tr;var oo=(er,_e,tr)=>hy(er,typeof _e!="symbol"?_e+"":_e,tr),Pm=(er,_e,tr)=>_e.has(er)||O0("Cannot "+tr);var kr=(er,_e,tr)=>(Pm(er,_e,"read from private field"),tr?tr.call(er):_e.get(er)),Vn=(er,_e,tr)=>_e.has(er)?O0("Cannot add the same private member more than once"):_e instanceof WeakSet?_e.add(er):_e.set(er,tr),On=(er,_e,tr,rr)=>(Pm(er,_e,"write to private field"),rr?rr.call(er,tr):_e.set(er,tr),tr),Un=(er,_e,tr)=>(Pm(er,_e,"access private method"),tr);var $A=(er,_e,tr,rr)=>({set _(nr){On(er,_e,nr,tr)},get _(){return kr(er,_e,rr)}});function _mergeNamespaces(er,_e){for(var tr=0;tr<_e.length;tr++){const rr=_e[tr];if(typeof rr!="string"&&!Array.isArray(rr)){for(const nr in rr)if(nr!=="default"&&!(nr in er)){const sr=Object.getOwnPropertyDescriptor(rr,nr);sr&&Object.defineProperty(er,nr,sr.get?sr:{enumerable:!0,get:()=>rr[nr]})}}}return Object.freeze(Object.defineProperty(er,Symbol.toStringTag,{value:"Module"}))}(function(){const _e=document.createElement("link").relList;if(_e&&_e.supports&&_e.supports("modulepreload"))return;for(const nr of document.querySelectorAll('link[rel="modulepreload"]'))rr(nr);new MutationObserver(nr=>{for(const sr of nr)if(sr.type==="childList")for(const ir of sr.addedNodes)ir.tagName==="LINK"&&ir.rel==="modulepreload"&&rr(ir)}).observe(document,{childList:!0,subtree:!0});function tr(nr){const sr={};return nr.integrity&&(sr.integrity=nr.integrity),nr.referrerPolicy&&(sr.referrerPolicy=nr.referrerPolicy),nr.crossOrigin==="use-credentials"?sr.credentials="include":nr.crossOrigin==="anonymous"?sr.credentials="omit":sr.credentials="same-origin",sr}function rr(nr){if(nr.ep)return;nr.ep=!0;const sr=tr(nr);fetch(nr.href,sr)}})();var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(er){return er&&er.__esModule&&Object.prototype.hasOwnProperty.call(er,"default")?er.default:er}function getAugmentedNamespace(er){if(er.__esModule)return er;var _e=er.default;if(typeof _e=="function"){var tr=function rr(){return this instanceof rr?Reflect.construct(_e,arguments,this.constructor):_e.apply(this,arguments)};tr.prototype=_e.prototype}else tr={};return Object.defineProperty(tr,"__esModule",{value:!0}),Object.keys(er).forEach(function(rr){var nr=Object.getOwnPropertyDescriptor(er,rr);Object.defineProperty(tr,rr,nr.get?nr:{enumerable:!0,get:function(){return er[rr]}})}),tr}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$3=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$3=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$4=Symbol.iterator;function A$3(er){return er===null||typeof er!="object"?null:(er=z$4&&er[z$4]||er["@@iterator"],typeof er=="function"?er:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$3={};function E$4(er,_e,tr){this.props=er,this.context=_e,this.refs=D$3,this.updater=tr||B$3}E$4.prototype.isReactComponent={};E$4.prototype.setState=function(er,_e){if(typeof er!="object"&&typeof er!="function"&&er!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,er,_e,"setState")};E$4.prototype.forceUpdate=function(er){this.updater.enqueueForceUpdate(this,er,"forceUpdate")};function F$3(){}F$3.prototype=E$4.prototype;function G$3(er,_e,tr){this.props=er,this.context=_e,this.refs=D$3,this.updater=tr||B$3}var H$2=G$3.prototype=new F$3;H$2.constructor=G$3;C$2(H$2,E$4.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$5={key:!0,ref:!0,__self:!0,__source:!0};function M$3(er,_e,tr){var rr,nr={},sr=null,ir=null;if(_e!=null)for(rr in _e.ref!==void 0&&(ir=_e.ref),_e.key!==void 0&&(sr=""+_e.key),_e)J$1.call(_e,rr)&&!L$5.hasOwnProperty(rr)&&(nr[rr]=_e[rr]);var or=arguments.length-2;if(or===1)nr.children=tr;else if(1<or){for(var ar=Array(or),lr=0;lr<or;lr++)ar[lr]=arguments[lr+2];nr.children=ar}if(er&&er.defaultProps)for(rr in or=er.defaultProps,or)nr[rr]===void 0&&(nr[rr]=or[rr]);return{$$typeof:l$2,type:er,key:sr,ref:ir,props:nr,_owner:K$2.current}}function N$3(er,_e){return{$$typeof:l$2,type:er.type,key:_e,ref:er.ref,props:er.props,_owner:er._owner}}function O$3(er){return typeof er=="object"&&er!==null&&er.$$typeof===l$2}function escape$1(er){var _e={"=":"=0",":":"=2"};return"$"+er.replace(/[=:]/g,function(tr){return _e[tr]})}var P$3=/\/+/g;function Q$3(er,_e){return typeof er=="object"&&er!==null&&er.key!=null?escape$1(""+er.key):_e.toString(36)}function R$2(er,_e,tr,rr,nr){var sr=typeof er;(sr==="undefined"||sr==="boolean")&&(er=null);var ir=!1;if(er===null)ir=!0;else switch(sr){case"string":case"number":ir=!0;break;case"object":switch(er.$$typeof){case l$2:case n$2:ir=!0}}if(ir)return ir=er,nr=nr(ir),er=rr===""?"."+Q$3(ir,0):rr,I$2(nr)?(tr="",er!=null&&(tr=er.replace(P$3,"$&/")+"/"),R$2(nr,_e,tr,"",function(lr){return lr})):nr!=null&&(O$3(nr)&&(nr=N$3(nr,tr+(!nr.key||ir&&ir.key===nr.key?"":(""+nr.key).replace(P$3,"$&/")+"/")+er)),_e.push(nr)),1;if(ir=0,rr=rr===""?".":rr+":",I$2(er))for(var or=0;or<er.length;or++){sr=er[or];var ar=rr+Q$3(sr,or);ir+=R$2(sr,_e,tr,ar,nr)}else if(ar=A$3(er),typeof ar=="function")for(er=ar.call(er),or=0;!(sr=er.next()).done;)sr=sr.value,ar=rr+Q$3(sr,or++),ir+=R$2(sr,_e,tr,ar,nr);else if(sr==="object")throw _e=String(er),Error("Objects are not valid as a React child (found: "+(_e==="[object Object]"?"object with keys {"+Object.keys(er).join(", ")+"}":_e)+"). If you meant to render a collection of children, use an array instead.");return ir}function S$2(er,_e,tr){if(er==null)return er;var rr=[],nr=0;return R$2(er,rr,"","",function(sr){return _e.call(tr,sr,nr++)}),rr}function T$3(er){if(er._status===-1){var _e=er._result;_e=_e(),_e.then(function(tr){(er._status===0||er._status===-1)&&(er._status=1,er._result=tr)},function(tr){(er._status===0||er._status===-1)&&(er._status=2,er._result=tr)}),er._status===-1&&(er._status=0,er._result=_e)}if(er._status===1)return er._result.default;throw er._result}var U$4={current:null},V$3={transition:null},W$2={ReactCurrentDispatcher:U$4,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$2};function X$3(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(er,_e,tr){S$2(er,function(){_e.apply(this,arguments)},tr)},count:function(er){var _e=0;return S$2(er,function(){_e++}),_e},toArray:function(er){return S$2(er,function(_e){return _e})||[]},only:function(er){if(!O$3(er))throw Error("React.Children.only expected to receive a single React element child.");return er}};react_production_min.Component=E$4;react_production_min.Fragment=p$3;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$3;react_production_min.StrictMode=q$3;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$3;react_production_min.cloneElement=function(er,_e,tr){if(er==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+er+".");var rr=C$2({},er.props),nr=er.key,sr=er.ref,ir=er._owner;if(_e!=null){if(_e.ref!==void 0&&(sr=_e.ref,ir=K$2.current),_e.key!==void 0&&(nr=""+_e.key),er.type&&er.type.defaultProps)var or=er.type.defaultProps;for(ar in _e)J$1.call(_e,ar)&&!L$5.hasOwnProperty(ar)&&(rr[ar]=_e[ar]===void 0&&or!==void 0?or[ar]:_e[ar])}var ar=arguments.length-2;if(ar===1)rr.children=tr;else if(1<ar){or=Array(ar);for(var lr=0;lr<ar;lr++)or[lr]=arguments[lr+2];rr.children=or}return{$$typeof:l$2,type:er.type,key:nr,ref:sr,props:rr,_owner:ir}};react_production_min.createContext=function(er){return er={$$typeof:u$2,_currentValue:er,_currentValue2:er,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},er.Provider={$$typeof:t,_context:er},er.Consumer=er};react_production_min.createElement=M$3;react_production_min.createFactory=function(er){var _e=M$3.bind(null,er);return _e.type=er,_e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(er){return{$$typeof:v$3,render:er}};react_production_min.isValidElement=O$3;react_production_min.lazy=function(er){return{$$typeof:y$1,_payload:{_status:-1,_result:er},_init:T$3}};react_production_min.memo=function(er,_e){return{$$typeof:x$3,type:er,compare:_e===void 0?null:_e}};react_production_min.startTransition=function(er){var _e=V$3.transition;V$3.transition={};try{er()}finally{V$3.transition=_e}};react_production_min.unstable_act=X$3;react_production_min.useCallback=function(er,_e){return U$4.current.useCallback(er,_e)};react_production_min.useContext=function(er){return U$4.current.useContext(er)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(er){return U$4.current.useDeferredValue(er)};react_production_min.useEffect=function(er,_e){return U$4.current.useEffect(er,_e)};react_production_min.useId=function(){return U$4.current.useId()};react_production_min.useImperativeHandle=function(er,_e,tr){return U$4.current.useImperativeHandle(er,_e,tr)};react_production_min.useInsertionEffect=function(er,_e){return U$4.current.useInsertionEffect(er,_e)};react_production_min.useLayoutEffect=function(er,_e){return U$4.current.useLayoutEffect(er,_e)};react_production_min.useMemo=function(er,_e){return U$4.current.useMemo(er,_e)};react_production_min.useReducer=function(er,_e,tr){return U$4.current.useReducer(er,_e,tr)};react_production_min.useRef=function(er){return U$4.current.useRef(er)};react_production_min.useState=function(er){return U$4.current.useState(er)};react_production_min.useSyncExternalStore=function(er,_e,tr){return U$4.current.useSyncExternalStore(er,_e,tr)};react_production_min.useTransition=function(){return U$4.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$2=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$1=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$2(er,_e,tr){var rr,nr={},sr=null,ir=null;tr!==void 0&&(sr=""+tr),_e.key!==void 0&&(sr=""+_e.key),_e.ref!==void 0&&(ir=_e.ref);for(rr in _e)m$2.call(_e,rr)&&!p$2.hasOwnProperty(rr)&&(nr[rr]=_e[rr]);if(er&&er.defaultProps)for(rr in _e=er.defaultProps,_e)nr[rr]===void 0&&(nr[rr]=_e[rr]);return{$$typeof:k$2,type:er,key:sr,ref:ir,props:nr,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(er){function _e(Hr,$r){var Xr=Hr.length;Hr.push($r);e:for(;0<Xr;){var pn=Xr-1>>>1,jr=Hr[pn];if(0<nr(jr,$r))Hr[pn]=$r,Hr[Xr]=jr,Xr=pn;else break e}}function tr(Hr){return Hr.length===0?null:Hr[0]}function rr(Hr){if(Hr.length===0)return null;var $r=Hr[0],Xr=Hr.pop();if(Xr!==$r){Hr[0]=Xr;e:for(var pn=0,jr=Hr.length,Br=jr>>>1;pn<Br;){var Lr=2*(pn+1)-1,Or=Hr[Lr],zr=Lr+1,Gr=Hr[zr];if(0>nr(Or,Xr))zr<jr&&0>nr(Gr,Or)?(Hr[pn]=Gr,Hr[zr]=Xr,pn=zr):(Hr[pn]=Or,Hr[Lr]=Xr,pn=Lr);else if(zr<jr&&0>nr(Gr,Xr))Hr[pn]=Gr,Hr[zr]=Xr,pn=zr;else break e}}return $r}function nr(Hr,$r){var Xr=Hr.sortIndex-$r.sortIndex;return Xr!==0?Xr:Hr.id-$r.id}if(typeof performance=="object"&&typeof performance.now=="function"){var sr=performance;er.unstable_now=function(){return sr.now()}}else{var ir=Date,or=ir.now();er.unstable_now=function(){return ir.now()-or}}var ar=[],lr=[],cr=1,Ar=null,ur=3,dr=!1,mr=!1,pr=!1,yr=typeof setTimeout=="function"?setTimeout:null,hr=typeof clearTimeout=="function"?clearTimeout:null,gr=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Cr(Hr){for(var $r=tr(lr);$r!==null;){if($r.callback===null)rr(lr);else if($r.startTime<=Hr)rr(lr),$r.sortIndex=$r.expirationTime,_e(ar,$r);else break;$r=tr(lr)}}function Tr(Hr){if(pr=!1,Cr(Hr),!mr)if(tr(ar)!==null)mr=!0,Vr(Sr);else{var $r=tr(lr);$r!==null&&Wr(Tr,$r.startTime-Hr)}}function Sr(Hr,$r){mr=!1,pr&&(pr=!1,hr(vr),vr=-1),dr=!0;var Xr=ur;try{for(Cr($r),Ar=tr(ar);Ar!==null&&(!(Ar.expirationTime>$r)||Hr&&!Er());){var pn=Ar.callback;if(typeof pn=="function"){Ar.callback=null,ur=Ar.priorityLevel;var jr=pn(Ar.expirationTime<=$r);$r=er.unstable_now(),typeof jr=="function"?Ar.callback=jr:Ar===tr(ar)&&rr(ar),Cr($r)}else rr(ar);Ar=tr(ar)}if(Ar!==null)var Br=!0;else{var Lr=tr(lr);Lr!==null&&Wr(Tr,Lr.startTime-$r),Br=!1}return Br}finally{Ar=null,ur=Xr,dr=!1}}var Nr=!1,_r=null,vr=-1,br=5,Pr=-1;function Er(){return!(er.unstable_now()-Pr<br)}function Rr(){if(_r!==null){var Hr=er.unstable_now();Pr=Hr;var $r=!0;try{$r=_r(!0,Hr)}finally{$r?Ir():(Nr=!1,_r=null)}}else Nr=!1}var Ir;if(typeof gr=="function")Ir=function(){gr(Rr)};else if(typeof MessageChannel<"u"){var Qr=new MessageChannel,Ur=Qr.port2;Qr.port1.onmessage=Rr,Ir=function(){Ur.postMessage(null)}}else Ir=function(){yr(Rr,0)};function Vr(Hr){_r=Hr,Nr||(Nr=!0,Ir())}function Wr(Hr,$r){vr=yr(function(){Hr(er.unstable_now())},$r)}er.unstable_IdlePriority=5,er.unstable_ImmediatePriority=1,er.unstable_LowPriority=4,er.unstable_NormalPriority=3,er.unstable_Profiling=null,er.unstable_UserBlockingPriority=2,er.unstable_cancelCallback=function(Hr){Hr.callback=null},er.unstable_continueExecution=function(){mr||dr||(mr=!0,Vr(Sr))},er.unstable_forceFrameRate=function(Hr){0>Hr||125<Hr?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):br=0<Hr?Math.floor(1e3/Hr):5},er.unstable_getCurrentPriorityLevel=function(){return ur},er.unstable_getFirstCallbackNode=function(){return tr(ar)},er.unstable_next=function(Hr){switch(ur){case 1:case 2:case 3:var $r=3;break;default:$r=ur}var Xr=ur;ur=$r;try{return Hr()}finally{ur=Xr}},er.unstable_pauseExecution=function(){},er.unstable_requestPaint=function(){},er.unstable_runWithPriority=function(Hr,$r){switch(Hr){case 1:case 2:case 3:case 4:case 5:break;default:Hr=3}var Xr=ur;ur=Hr;try{return $r()}finally{ur=Xr}},er.unstable_scheduleCallback=function(Hr,$r,Xr){var pn=er.unstable_now();switch(typeof Xr=="object"&&Xr!==null?(Xr=Xr.delay,Xr=typeof Xr=="number"&&0<Xr?pn+Xr:pn):Xr=pn,Hr){case 1:var jr=-1;break;case 2:jr=250;break;case 5:jr=1073741823;break;case 4:jr=1e4;break;default:jr=5e3}return jr=Xr+jr,Hr={id:cr++,callback:$r,priorityLevel:Hr,startTime:Xr,expirationTime:jr,sortIndex:-1},Xr>pn?(Hr.sortIndex=Xr,_e(lr,Hr),tr(ar)===null&&Hr===tr(lr)&&(pr?(hr(vr),vr=-1):pr=!0,Wr(Tr,Xr-pn))):(Hr.sortIndex=jr,_e(ar,Hr),mr||dr||(mr=!0,Vr(Sr))),Hr},er.unstable_shouldYield=Er,er.unstable_wrapCallback=function(Hr){var $r=ur;return function(){var Xr=ur;ur=$r;try{return Hr.apply(this,arguments)}finally{ur=Xr}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(er){for(var _e="https://reactjs.org/docs/error-decoder.html?invariant="+er,tr=1;tr<arguments.length;tr++)_e+="&args[]="+encodeURIComponent(arguments[tr]);return"Minified React error #"+er+"; visit "+_e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(er,_e){ha(er,_e),ha(er+"Capture",_e)}function ha(er,_e){for(ea[er]=_e,er=0;er<_e.length;er++)da.add(_e[er])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(er){return ja.call(ma,er)?!0:ja.call(la,er)?!1:ka.test(er)?ma[er]=!0:(la[er]=!0,!1)}function pa(er,_e,tr,rr){if(tr!==null&&tr.type===0)return!1;switch(typeof _e){case"function":case"symbol":return!0;case"boolean":return rr?!1:tr!==null?!tr.acceptsBooleans:(er=er.toLowerCase().slice(0,5),er!=="data-"&&er!=="aria-");default:return!1}}function qa(er,_e,tr,rr){if(_e===null||typeof _e>"u"||pa(er,_e,tr,rr))return!0;if(rr)return!1;if(tr!==null)switch(tr.type){case 3:return!_e;case 4:return _e===!1;case 5:return isNaN(_e);case 6:return isNaN(_e)||1>_e}return!1}function v$2(er,_e,tr,rr,nr,sr,ir){this.acceptsBooleans=_e===2||_e===3||_e===4,this.attributeName=rr,this.attributeNamespace=nr,this.mustUseProperty=tr,this.propertyName=er,this.type=_e,this.sanitizeURL=sr,this.removeEmptyString=ir}var z$3={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(er){z$3[er]=new v$2(er,0,!1,er,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(er){var _e=er[0];z$3[_e]=new v$2(_e,1,!1,er[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(er){z$3[er]=new v$2(er,2,!1,er.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(er){z$3[er]=new v$2(er,2,!1,er,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(er){z$3[er]=new v$2(er,3,!1,er.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(er){z$3[er]=new v$2(er,3,!0,er,null,!1,!1)});["capture","download"].forEach(function(er){z$3[er]=new v$2(er,4,!1,er,null,!1,!1)});["cols","rows","size","span"].forEach(function(er){z$3[er]=new v$2(er,6,!1,er,null,!1,!1)});["rowSpan","start"].forEach(function(er){z$3[er]=new v$2(er,5,!1,er.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(er){return er[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(er){var _e=er.replace(ra,sa);z$3[_e]=new v$2(_e,1,!1,er,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(er){var _e=er.replace(ra,sa);z$3[_e]=new v$2(_e,1,!1,er,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(er){var _e=er.replace(ra,sa);z$3[_e]=new v$2(_e,1,!1,er,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(er){z$3[er]=new v$2(er,1,!1,er.toLowerCase(),null,!1,!1)});z$3.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(er){z$3[er]=new v$2(er,1,!1,er.toLowerCase(),null,!0,!0)});function ta(er,_e,tr,rr){var nr=z$3.hasOwnProperty(_e)?z$3[_e]:null;(nr!==null?nr.type!==0:rr||!(2<_e.length)||_e[0]!=="o"&&_e[0]!=="O"||_e[1]!=="n"&&_e[1]!=="N")&&(qa(_e,tr,nr,rr)&&(tr=null),rr||nr===null?oa(_e)&&(tr===null?er.removeAttribute(_e):er.setAttribute(_e,""+tr)):nr.mustUseProperty?er[nr.propertyName]=tr===null?nr.type===3?!1:"":tr:(_e=nr.attributeName,rr=nr.attributeNamespace,tr===null?er.removeAttribute(_e):(nr=nr.type,tr=nr===3||nr===4&&tr===!0?"":""+tr,rr?er.setAttributeNS(rr,_e,tr):er.setAttribute(_e,tr))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(er){return er===null||typeof er!="object"?null:(er=Ja&&er[Ja]||er["@@iterator"],typeof er=="function"?er:null)}var A$2=Object.assign,La;function Ma(er){if(La===void 0)try{throw Error()}catch(tr){var _e=tr.stack.trim().match(/\n( *(at )?)/);La=_e&&_e[1]||""}return`
`+La+er}var Na=!1;function Oa(er,_e){if(!er||Na)return"";Na=!0;var tr=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_e)if(_e=function(){throw Error()},Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(lr){var rr=lr}Reflect.construct(er,[],_e)}else{try{_e.call()}catch(lr){rr=lr}er.call(_e.prototype)}else{try{throw Error()}catch(lr){rr=lr}er()}}catch(lr){if(lr&&rr&&typeof lr.stack=="string"){for(var nr=lr.stack.split(`
`),sr=rr.stack.split(`
`),ir=nr.length-1,or=sr.length-1;1<=ir&&0<=or&&nr[ir]!==sr[or];)or--;for(;1<=ir&&0<=or;ir--,or--)if(nr[ir]!==sr[or]){if(ir!==1||or!==1)do if(ir--,or--,0>or||nr[ir]!==sr[or]){var ar=`
`+nr[ir].replace(" at new "," at ");return er.displayName&&ar.includes("<anonymous>")&&(ar=ar.replace("<anonymous>",er.displayName)),ar}while(1<=ir&&0<=or);break}}}finally{Na=!1,Error.prepareStackTrace=tr}return(er=er?er.displayName||er.name:"")?Ma(er):""}function Pa(er){switch(er.tag){case 5:return Ma(er.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return er=Oa(er.type,!1),er;case 11:return er=Oa(er.type.render,!1),er;case 1:return er=Oa(er.type,!0),er;default:return""}}function Qa(er){if(er==null)return null;if(typeof er=="function")return er.displayName||er.name||null;if(typeof er=="string")return er;switch(er){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof er=="object")switch(er.$$typeof){case Ca:return(er.displayName||"Context")+".Consumer";case Ba:return(er._context.displayName||"Context")+".Provider";case Da:var _e=er.render;return er=er.displayName,er||(er=_e.displayName||_e.name||"",er=er!==""?"ForwardRef("+er+")":"ForwardRef"),er;case Ga:return _e=er.displayName||null,_e!==null?_e:Qa(er.type)||"Memo";case Ha:_e=er._payload,er=er._init;try{return Qa(er(_e))}catch{}}return null}function Ra(er){var _e=er.type;switch(er.tag){case 24:return"Cache";case 9:return(_e.displayName||"Context")+".Consumer";case 10:return(_e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return er=_e.render,er=er.displayName||er.name||"",_e.displayName||(er!==""?"ForwardRef("+er+")":"ForwardRef");case 7:return"Fragment";case 5:return _e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(_e);case 8:return _e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e}return null}function Sa(er){switch(typeof er){case"boolean":case"number":case"string":case"undefined":return er;case"object":return er;default:return""}}function Ta(er){var _e=er.type;return(er=er.nodeName)&&er.toLowerCase()==="input"&&(_e==="checkbox"||_e==="radio")}function Ua(er){var _e=Ta(er)?"checked":"value",tr=Object.getOwnPropertyDescriptor(er.constructor.prototype,_e),rr=""+er[_e];if(!er.hasOwnProperty(_e)&&typeof tr<"u"&&typeof tr.get=="function"&&typeof tr.set=="function"){var nr=tr.get,sr=tr.set;return Object.defineProperty(er,_e,{configurable:!0,get:function(){return nr.call(this)},set:function(ir){rr=""+ir,sr.call(this,ir)}}),Object.defineProperty(er,_e,{enumerable:tr.enumerable}),{getValue:function(){return rr},setValue:function(ir){rr=""+ir},stopTracking:function(){er._valueTracker=null,delete er[_e]}}}}function Va(er){er._valueTracker||(er._valueTracker=Ua(er))}function Wa(er){if(!er)return!1;var _e=er._valueTracker;if(!_e)return!0;var tr=_e.getValue(),rr="";return er&&(rr=Ta(er)?er.checked?"true":"false":er.value),er=rr,er!==tr?(_e.setValue(er),!0):!1}function Xa(er){if(er=er||(typeof document<"u"?document:void 0),typeof er>"u")return null;try{return er.activeElement||er.body}catch{return er.body}}function Ya(er,_e){var tr=_e.checked;return A$2({},_e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:tr??er._wrapperState.initialChecked})}function Za(er,_e){var tr=_e.defaultValue==null?"":_e.defaultValue,rr=_e.checked!=null?_e.checked:_e.defaultChecked;tr=Sa(_e.value!=null?_e.value:tr),er._wrapperState={initialChecked:rr,initialValue:tr,controlled:_e.type==="checkbox"||_e.type==="radio"?_e.checked!=null:_e.value!=null}}function ab(er,_e){_e=_e.checked,_e!=null&&ta(er,"checked",_e,!1)}function bb(er,_e){ab(er,_e);var tr=Sa(_e.value),rr=_e.type;if(tr!=null)rr==="number"?(tr===0&&er.value===""||er.value!=tr)&&(er.value=""+tr):er.value!==""+tr&&(er.value=""+tr);else if(rr==="submit"||rr==="reset"){er.removeAttribute("value");return}_e.hasOwnProperty("value")?cb(er,_e.type,tr):_e.hasOwnProperty("defaultValue")&&cb(er,_e.type,Sa(_e.defaultValue)),_e.checked==null&&_e.defaultChecked!=null&&(er.defaultChecked=!!_e.defaultChecked)}function db$1(er,_e,tr){if(_e.hasOwnProperty("value")||_e.hasOwnProperty("defaultValue")){var rr=_e.type;if(!(rr!=="submit"&&rr!=="reset"||_e.value!==void 0&&_e.value!==null))return;_e=""+er._wrapperState.initialValue,tr||_e===er.value||(er.value=_e),er.defaultValue=_e}tr=er.name,tr!==""&&(er.name=""),er.defaultChecked=!!er._wrapperState.initialChecked,tr!==""&&(er.name=tr)}function cb(er,_e,tr){(_e!=="number"||Xa(er.ownerDocument)!==er)&&(tr==null?er.defaultValue=""+er._wrapperState.initialValue:er.defaultValue!==""+tr&&(er.defaultValue=""+tr))}var eb=Array.isArray;function fb(er,_e,tr,rr){if(er=er.options,_e){_e={};for(var nr=0;nr<tr.length;nr++)_e["$"+tr[nr]]=!0;for(tr=0;tr<er.length;tr++)nr=_e.hasOwnProperty("$"+er[tr].value),er[tr].selected!==nr&&(er[tr].selected=nr),nr&&rr&&(er[tr].defaultSelected=!0)}else{for(tr=""+Sa(tr),_e=null,nr=0;nr<er.length;nr++){if(er[nr].value===tr){er[nr].selected=!0,rr&&(er[nr].defaultSelected=!0);return}_e!==null||er[nr].disabled||(_e=er[nr])}_e!==null&&(_e.selected=!0)}}function gb(er,_e){if(_e.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$2({},_e,{value:void 0,defaultValue:void 0,children:""+er._wrapperState.initialValue})}function hb(er,_e){var tr=_e.value;if(tr==null){if(tr=_e.children,_e=_e.defaultValue,tr!=null){if(_e!=null)throw Error(p$1(92));if(eb(tr)){if(1<tr.length)throw Error(p$1(93));tr=tr[0]}_e=tr}_e==null&&(_e=""),tr=_e}er._wrapperState={initialValue:Sa(tr)}}function ib(er,_e){var tr=Sa(_e.value),rr=Sa(_e.defaultValue);tr!=null&&(tr=""+tr,tr!==er.value&&(er.value=tr),_e.defaultValue==null&&er.defaultValue!==tr&&(er.defaultValue=tr)),rr!=null&&(er.defaultValue=""+rr)}function jb(er){var _e=er.textContent;_e===er._wrapperState.initialValue&&_e!==""&&_e!==null&&(er.value=_e)}function kb(er){switch(er){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(er,_e){return er==null||er==="http://www.w3.org/1999/xhtml"?kb(_e):er==="http://www.w3.org/2000/svg"&&_e==="foreignObject"?"http://www.w3.org/1999/xhtml":er}var mb,nb=function(er){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_e,tr,rr,nr){MSApp.execUnsafeLocalFunction(function(){return er(_e,tr,rr,nr)})}:er}(function(er,_e){if(er.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in er)er.innerHTML=_e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+_e.valueOf().toString()+"</svg>",_e=mb.firstChild;er.firstChild;)er.removeChild(er.firstChild);for(;_e.firstChild;)er.appendChild(_e.firstChild)}});function ob(er,_e){if(_e){var tr=er.firstChild;if(tr&&tr===er.lastChild&&tr.nodeType===3){tr.nodeValue=_e;return}}er.textContent=_e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(er){qb.forEach(function(_e){_e=_e+er.charAt(0).toUpperCase()+er.substring(1),pb[_e]=pb[er]})});function rb(er,_e,tr){return _e==null||typeof _e=="boolean"||_e===""?"":tr||typeof _e!="number"||_e===0||pb.hasOwnProperty(er)&&pb[er]?(""+_e).trim():_e+"px"}function sb(er,_e){er=er.style;for(var tr in _e)if(_e.hasOwnProperty(tr)){var rr=tr.indexOf("--")===0,nr=rb(tr,_e[tr],rr);tr==="float"&&(tr="cssFloat"),rr?er.setProperty(tr,nr):er[tr]=nr}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(er,_e){if(_e){if(tb[er]&&(_e.children!=null||_e.dangerouslySetInnerHTML!=null))throw Error(p$1(137,er));if(_e.dangerouslySetInnerHTML!=null){if(_e.children!=null)throw Error(p$1(60));if(typeof _e.dangerouslySetInnerHTML!="object"||!("__html"in _e.dangerouslySetInnerHTML))throw Error(p$1(61))}if(_e.style!=null&&typeof _e.style!="object")throw Error(p$1(62))}}function vb(er,_e){if(er.indexOf("-")===-1)return typeof _e.is=="string";switch(er){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(er){return er=er.target||er.srcElement||window,er.correspondingUseElement&&(er=er.correspondingUseElement),er.nodeType===3?er.parentNode:er}var yb=null,zb=null,Ab=null;function Bb(er){if(er=Cb(er)){if(typeof yb!="function")throw Error(p$1(280));var _e=er.stateNode;_e&&(_e=Db(_e),yb(er.stateNode,er.type,_e))}}function Eb(er){zb?Ab?Ab.push(er):Ab=[er]:zb=er}function Fb(){if(zb){var er=zb,_e=Ab;if(Ab=zb=null,Bb(er),_e)for(er=0;er<_e.length;er++)Bb(_e[er])}}function Gb(er,_e){return er(_e)}function Hb(){}var Ib=!1;function Jb(er,_e,tr){if(Ib)return er(_e,tr);Ib=!0;try{return Gb(er,_e,tr)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(er,_e){var tr=er.stateNode;if(tr===null)return null;var rr=Db(tr);if(rr===null)return null;tr=rr[_e];e:switch(_e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(rr=!rr.disabled)||(er=er.type,rr=!(er==="button"||er==="input"||er==="select"||er==="textarea")),er=!rr;break e;default:er=!1}if(er)return null;if(tr&&typeof tr!="function")throw Error(p$1(231,_e,typeof tr));return tr}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(er,_e,tr,rr,nr,sr,ir,or,ar){var lr=Array.prototype.slice.call(arguments,3);try{_e.apply(tr,lr)}catch(cr){this.onError(cr)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(er){Ob=!0,Pb=er}};function Tb(er,_e,tr,rr,nr,sr,ir,or,ar){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(er,_e,tr,rr,nr,sr,ir,or,ar){if(Tb.apply(this,arguments),Ob){if(Ob){var lr=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=lr)}}function Vb(er){var _e=er,tr=er;if(er.alternate)for(;_e.return;)_e=_e.return;else{er=_e;do _e=er,_e.flags&4098&&(tr=_e.return),er=_e.return;while(er)}return _e.tag===3?tr:null}function Wb(er){if(er.tag===13){var _e=er.memoizedState;if(_e===null&&(er=er.alternate,er!==null&&(_e=er.memoizedState)),_e!==null)return _e.dehydrated}return null}function Xb(er){if(Vb(er)!==er)throw Error(p$1(188))}function Yb(er){var _e=er.alternate;if(!_e){if(_e=Vb(er),_e===null)throw Error(p$1(188));return _e!==er?null:er}for(var tr=er,rr=_e;;){var nr=tr.return;if(nr===null)break;var sr=nr.alternate;if(sr===null){if(rr=nr.return,rr!==null){tr=rr;continue}break}if(nr.child===sr.child){for(sr=nr.child;sr;){if(sr===tr)return Xb(nr),er;if(sr===rr)return Xb(nr),_e;sr=sr.sibling}throw Error(p$1(188))}if(tr.return!==rr.return)tr=nr,rr=sr;else{for(var ir=!1,or=nr.child;or;){if(or===tr){ir=!0,tr=nr,rr=sr;break}if(or===rr){ir=!0,rr=nr,tr=sr;break}or=or.sibling}if(!ir){for(or=sr.child;or;){if(or===tr){ir=!0,tr=sr,rr=nr;break}if(or===rr){ir=!0,rr=sr,tr=nr;break}or=or.sibling}if(!ir)throw Error(p$1(189))}}if(tr.alternate!==rr)throw Error(p$1(190))}if(tr.tag!==3)throw Error(p$1(188));return tr.stateNode.current===tr?er:_e}function Zb(er){return er=Yb(er),er!==null?$b(er):null}function $b(er){if(er.tag===5||er.tag===6)return er;for(er=er.child;er!==null;){var _e=$b(er);if(_e!==null)return _e;er=er.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$2=ca.unstable_now,ec$1=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc$1=null;function mc(er){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc,er,void 0,(er.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(er){return er>>>=0,er===0?32:31-(pc(er)/qc|0)|0}var rc=64,sc=4194304;function tc(er){switch(er&-er){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return er&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return er&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return er}}function uc(er,_e){var tr=er.pendingLanes;if(tr===0)return 0;var rr=0,nr=er.suspendedLanes,sr=er.pingedLanes,ir=tr&268435455;if(ir!==0){var or=ir&~nr;or!==0?rr=tc(or):(sr&=ir,sr!==0&&(rr=tc(sr)))}else ir=tr&~nr,ir!==0?rr=tc(ir):sr!==0&&(rr=tc(sr));if(rr===0)return 0;if(_e!==0&&_e!==rr&&!(_e&nr)&&(nr=rr&-rr,sr=_e&-_e,nr>=sr||nr===16&&(sr&4194240)!==0))return _e;if(rr&4&&(rr|=tr&16),_e=er.entangledLanes,_e!==0)for(er=er.entanglements,_e&=rr;0<_e;)tr=31-oc(_e),nr=1<<tr,rr|=er[tr],_e&=~nr;return rr}function vc(er,_e){switch(er){case 1:case 2:case 4:return _e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(er,_e){for(var tr=er.suspendedLanes,rr=er.pingedLanes,nr=er.expirationTimes,sr=er.pendingLanes;0<sr;){var ir=31-oc(sr),or=1<<ir,ar=nr[ir];ar===-1?(!(or&tr)||or&rr)&&(nr[ir]=vc(or,_e)):ar<=_e&&(er.expiredLanes|=or),sr&=~or}}function xc(er){return er=er.pendingLanes&-1073741825,er!==0?er:er&1073741824?1073741824:0}function yc(){var er=rc;return rc<<=1,!(rc&4194240)&&(rc=64),er}function zc(er){for(var _e=[],tr=0;31>tr;tr++)_e.push(er);return _e}function Ac(er,_e,tr){er.pendingLanes|=_e,_e!==536870912&&(er.suspendedLanes=0,er.pingedLanes=0),er=er.eventTimes,_e=31-oc(_e),er[_e]=tr}function Bc(er,_e){var tr=er.pendingLanes&~_e;er.pendingLanes=_e,er.suspendedLanes=0,er.pingedLanes=0,er.expiredLanes&=_e,er.mutableReadLanes&=_e,er.entangledLanes&=_e,_e=er.entanglements;var rr=er.eventTimes;for(er=er.expirationTimes;0<tr;){var nr=31-oc(tr),sr=1<<nr;_e[nr]=0,rr[nr]=-1,er[nr]=-1,tr&=~sr}}function Cc(er,_e){var tr=er.entangledLanes|=_e;for(er=er.entanglements;tr;){var rr=31-oc(tr),nr=1<<rr;nr&_e|er[rr]&_e&&(er[rr]|=_e),tr&=~nr}}var C$1=0;function Dc(er){return er&=-er,1<er?4<er?er&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(er,_e){switch(er){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(_e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(_e.pointerId)}}function Tc(er,_e,tr,rr,nr,sr){return er===null||er.nativeEvent!==sr?(er={blockedOn:_e,domEventName:tr,eventSystemFlags:rr,nativeEvent:sr,targetContainers:[nr]},_e!==null&&(_e=Cb(_e),_e!==null&&Fc(_e)),er):(er.eventSystemFlags|=rr,_e=er.targetContainers,nr!==null&&_e.indexOf(nr)===-1&&_e.push(nr),er)}function Uc(er,_e,tr,rr,nr){switch(_e){case"focusin":return Lc=Tc(Lc,er,_e,tr,rr,nr),!0;case"dragenter":return Mc=Tc(Mc,er,_e,tr,rr,nr),!0;case"mouseover":return Nc=Tc(Nc,er,_e,tr,rr,nr),!0;case"pointerover":var sr=nr.pointerId;return Oc.set(sr,Tc(Oc.get(sr)||null,er,_e,tr,rr,nr)),!0;case"gotpointercapture":return sr=nr.pointerId,Pc.set(sr,Tc(Pc.get(sr)||null,er,_e,tr,rr,nr)),!0}return!1}function Vc(er){var _e=Wc(er.target);if(_e!==null){var tr=Vb(_e);if(tr!==null){if(_e=tr.tag,_e===13){if(_e=Wb(tr),_e!==null){er.blockedOn=_e,Ic(er.priority,function(){Gc(tr)});return}}else if(_e===3&&tr.stateNode.current.memoizedState.isDehydrated){er.blockedOn=tr.tag===3?tr.stateNode.containerInfo:null;return}}}er.blockedOn=null}function Xc(er){if(er.blockedOn!==null)return!1;for(var _e=er.targetContainers;0<_e.length;){var tr=Yc(er.domEventName,er.eventSystemFlags,_e[0],er.nativeEvent);if(tr===null){tr=er.nativeEvent;var rr=new tr.constructor(tr.type,tr);wb=rr,tr.target.dispatchEvent(rr),wb=null}else return _e=Cb(tr),_e!==null&&Fc(_e),er.blockedOn=tr,!1;_e.shift()}return!0}function Zc(er,_e,tr){Xc(er)&&tr.delete(_e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(er,_e){er.blockedOn===_e&&(er.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(er){function _e(nr){return ad(nr,er)}if(0<Kc.length){ad(Kc[0],er);for(var tr=1;tr<Kc.length;tr++){var rr=Kc[tr];rr.blockedOn===er&&(rr.blockedOn=null)}}for(Lc!==null&&ad(Lc,er),Mc!==null&&ad(Mc,er),Nc!==null&&ad(Nc,er),Oc.forEach(_e),Pc.forEach(_e),tr=0;tr<Qc.length;tr++)rr=Qc[tr],rr.blockedOn===er&&(rr.blockedOn=null);for(;0<Qc.length&&(tr=Qc[0],tr.blockedOn===null);)Vc(tr),tr.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(er,_e,tr,rr){var nr=C$1,sr=cd.transition;cd.transition=null;try{C$1=1,fd$1(er,_e,tr,rr)}finally{C$1=nr,cd.transition=sr}}function gd(er,_e,tr,rr){var nr=C$1,sr=cd.transition;cd.transition=null;try{C$1=4,fd$1(er,_e,tr,rr)}finally{C$1=nr,cd.transition=sr}}function fd$1(er,_e,tr,rr){if(dd){var nr=Yc(er,_e,tr,rr);if(nr===null)hd(er,_e,rr,id,tr),Sc(er,rr);else if(Uc(nr,er,_e,tr,rr))rr.stopPropagation();else if(Sc(er,rr),_e&4&&-1<Rc.indexOf(er)){for(;nr!==null;){var sr=Cb(nr);if(sr!==null&&Ec(sr),sr=Yc(er,_e,tr,rr),sr===null&&hd(er,_e,rr,id,tr),sr===nr)break;nr=sr}nr!==null&&rr.stopPropagation()}else hd(er,_e,rr,null,tr)}}var id=null;function Yc(er,_e,tr,rr){if(id=null,er=xb(rr),er=Wc(er),er!==null)if(_e=Vb(er),_e===null)er=null;else if(tr=_e.tag,tr===13){if(er=Wb(_e),er!==null)return er;er=null}else if(tr===3){if(_e.stateNode.current.memoizedState.isDehydrated)return _e.tag===3?_e.stateNode.containerInfo:null;er=null}else _e!==er&&(er=null);return id=er,null}function jd(er){switch(er){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var er,_e=ld,tr=_e.length,rr,nr="value"in kd?kd.value:kd.textContent,sr=nr.length;for(er=0;er<tr&&_e[er]===nr[er];er++);var ir=tr-er;for(rr=1;rr<=ir&&_e[tr-rr]===nr[sr-rr];rr++);return md=nr.slice(er,1<rr?1-rr:void 0)}function od(er){var _e=er.keyCode;return"charCode"in er?(er=er.charCode,er===0&&_e===13&&(er=13)):er=_e,er===10&&(er=13),32<=er||er===13?er:0}function pd(){return!0}function qd(){return!1}function rd(er){function _e(tr,rr,nr,sr,ir){this._reactName=tr,this._targetInst=nr,this.type=rr,this.nativeEvent=sr,this.target=ir,this.currentTarget=null;for(var or in er)er.hasOwnProperty(or)&&(tr=er[or],this[or]=tr?tr(sr):sr[or]);return this.isDefaultPrevented=(sr.defaultPrevented!=null?sr.defaultPrevented:sr.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$2(_e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var tr=this.nativeEvent;tr&&(tr.preventDefault?tr.preventDefault():typeof tr.returnValue!="unknown"&&(tr.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var tr=this.nativeEvent;tr&&(tr.stopPropagation?tr.stopPropagation():typeof tr.cancelBubble!="unknown"&&(tr.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(er){return er.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd(sd),ud=A$2({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$2({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(er){return er.relatedTarget===void 0?er.fromElement===er.srcElement?er.toElement:er.fromElement:er.relatedTarget},movementX:function(er){return"movementX"in er?er.movementX:(er!==yd&&(yd&&er.type==="mousemove"?(wd=er.screenX-yd.screenX,xd=er.screenY-yd.screenY):xd=wd=0,yd=er),wd)},movementY:function(er){return"movementY"in er?er.movementY:xd}}),Bd=rd(Ad),Cd=A$2({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$2({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$2({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$2({},sd,{clipboardData:function(er){return"clipboardData"in er?er.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$2({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(er){var _e=this.nativeEvent;return _e.getModifierState?_e.getModifierState(er):(er=Od[er])?!!_e[er]:!1}function zd(){return Pd}var Qd=A$2({},ud,{key:function(er){if(er.key){var _e=Md[er.key]||er.key;if(_e!=="Unidentified")return _e}return er.type==="keypress"?(er=od(er),er===13?"Enter":String.fromCharCode(er)):er.type==="keydown"||er.type==="keyup"?Nd[er.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(er){return er.type==="keypress"?od(er):0},keyCode:function(er){return er.type==="keydown"||er.type==="keyup"?er.keyCode:0},which:function(er){return er.type==="keypress"?od(er):er.type==="keydown"||er.type==="keyup"?er.keyCode:0}}),Rd=rd(Qd),Sd=A$2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$2({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$2({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$2({},Ad,{deltaX:function(er){return"deltaX"in er?er.deltaX:"wheelDeltaX"in er?-er.wheelDeltaX:0},deltaY:function(er){return"deltaY"in er?er.deltaY:"wheelDeltaY"in er?-er.wheelDeltaY:"wheelDelta"in er?-er.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$2=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae$2||be$1&&8<be$1&&11>=be$1),ee$2=" ",fe$1=!1;function ge$1(er,_e){switch(er){case"keyup":return $d.indexOf(_e.keyCode)!==-1;case"keydown":return _e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(er){return er=er.detail,typeof er=="object"&&"data"in er?er.data:null}var ie$1=!1;function je(er,_e){switch(er){case"compositionend":return he$1(_e);case"keypress":return _e.which!==32?null:(fe$1=!0,ee$2);case"textInput":return er=_e.data,er===ee$2&&fe$1?null:er;default:return null}}function ke(er,_e){if(ie$1)return er==="compositionend"||!ae$2&&ge$1(er,_e)?(er=nd(),md=ld=kd=null,ie$1=!1,er):null;switch(er){case"paste":return null;case"keypress":if(!(_e.ctrlKey||_e.altKey||_e.metaKey)||_e.ctrlKey&&_e.altKey){if(_e.char&&1<_e.char.length)return _e.char;if(_e.which)return String.fromCharCode(_e.which)}return null;case"compositionend":return de$1&&_e.locale!=="ko"?null:_e.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(er){var _e=er&&er.nodeName&&er.nodeName.toLowerCase();return _e==="input"?!!le$1[er.type]:_e==="textarea"}function ne$2(er,_e,tr,rr){Eb(rr),_e=oe$2(_e,"onChange"),0<_e.length&&(tr=new td$1("onChange","change",null,tr,rr),er.push({event:tr,listeners:_e}))}var pe$1=null,qe=null;function re$1(er){se$2(er,0)}function te$2(er){var _e=ue$1(er);if(Wa(_e))return er}function ve$1(er,_e){if(er==="change")return _e}var we$1=!1;if(ia){var xe;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye$1=typeof ze.oninput=="function"}xe=ye$1}else xe=!1;we$1=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe=pe$1=null)}function Be(er){if(er.propertyName==="value"&&te$2(qe)){var _e=[];ne$2(_e,qe,er,xb(er)),Jb(re$1,_e)}}function Ce(er,_e,tr){er==="focusin"?(Ae(),pe$1=_e,qe=tr,pe$1.attachEvent("onpropertychange",Be)):er==="focusout"&&Ae()}function De(er){if(er==="selectionchange"||er==="keyup"||er==="keydown")return te$2(qe)}function Ee(er,_e){if(er==="click")return te$2(_e)}function Fe(er,_e){if(er==="input"||er==="change")return te$2(_e)}function Ge(er,_e){return er===_e&&(er!==0||1/er===1/_e)||er!==er&&_e!==_e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(er,_e){if(He(er,_e))return!0;if(typeof er!="object"||er===null||typeof _e!="object"||_e===null)return!1;var tr=Object.keys(er),rr=Object.keys(_e);if(tr.length!==rr.length)return!1;for(rr=0;rr<tr.length;rr++){var nr=tr[rr];if(!ja.call(_e,nr)||!He(er[nr],_e[nr]))return!1}return!0}function Je(er){for(;er&&er.firstChild;)er=er.firstChild;return er}function Ke(er,_e){var tr=Je(er);er=0;for(var rr;tr;){if(tr.nodeType===3){if(rr=er+tr.textContent.length,er<=_e&&rr>=_e)return{node:tr,offset:_e-er};er=rr}e:{for(;tr;){if(tr.nextSibling){tr=tr.nextSibling;break e}tr=tr.parentNode}tr=void 0}tr=Je(tr)}}function Le$1(er,_e){return er&&_e?er===_e?!0:er&&er.nodeType===3?!1:_e&&_e.nodeType===3?Le$1(er,_e.parentNode):"contains"in er?er.contains(_e):er.compareDocumentPosition?!!(er.compareDocumentPosition(_e)&16):!1:!1}function Me(){for(var er=window,_e=Xa();_e instanceof er.HTMLIFrameElement;){try{var tr=typeof _e.contentWindow.location.href=="string"}catch{tr=!1}if(tr)er=_e.contentWindow;else break;_e=Xa(er.document)}return _e}function Ne$1(er){var _e=er&&er.nodeName&&er.nodeName.toLowerCase();return _e&&(_e==="input"&&(er.type==="text"||er.type==="search"||er.type==="tel"||er.type==="url"||er.type==="password")||_e==="textarea"||er.contentEditable==="true")}function Oe(er){var _e=Me(),tr=er.focusedElem,rr=er.selectionRange;if(_e!==tr&&tr&&tr.ownerDocument&&Le$1(tr.ownerDocument.documentElement,tr)){if(rr!==null&&Ne$1(tr)){if(_e=rr.start,er=rr.end,er===void 0&&(er=_e),"selectionStart"in tr)tr.selectionStart=_e,tr.selectionEnd=Math.min(er,tr.value.length);else if(er=(_e=tr.ownerDocument||document)&&_e.defaultView||window,er.getSelection){er=er.getSelection();var nr=tr.textContent.length,sr=Math.min(rr.start,nr);rr=rr.end===void 0?sr:Math.min(rr.end,nr),!er.extend&&sr>rr&&(nr=rr,rr=sr,sr=nr),nr=Ke(tr,sr);var ir=Ke(tr,rr);nr&&ir&&(er.rangeCount!==1||er.anchorNode!==nr.node||er.anchorOffset!==nr.offset||er.focusNode!==ir.node||er.focusOffset!==ir.offset)&&(_e=_e.createRange(),_e.setStart(nr.node,nr.offset),er.removeAllRanges(),sr>rr?(er.addRange(_e),er.extend(ir.node,ir.offset)):(_e.setEnd(ir.node,ir.offset),er.addRange(_e)))}}for(_e=[],er=tr;er=er.parentNode;)er.nodeType===1&&_e.push({element:er,left:er.scrollLeft,top:er.scrollTop});for(typeof tr.focus=="function"&&tr.focus(),tr=0;tr<_e.length;tr++)er=_e[tr],er.element.scrollLeft=er.left,er.element.scrollTop=er.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te$1=!1;function Ue(er,_e,tr){var rr=tr.window===tr?tr.document:tr.nodeType===9?tr:tr.ownerDocument;Te$1||Qe==null||Qe!==Xa(rr)||(rr=Qe,"selectionStart"in rr&&Ne$1(rr)?rr={start:rr.selectionStart,end:rr.selectionEnd}:(rr=(rr.ownerDocument&&rr.ownerDocument.defaultView||window).getSelection(),rr={anchorNode:rr.anchorNode,anchorOffset:rr.anchorOffset,focusNode:rr.focusNode,focusOffset:rr.focusOffset}),Se&&Ie(Se,rr)||(Se=rr,rr=oe$2(Re,"onSelect"),0<rr.length&&(_e=new td$1("onSelect","select",null,_e,tr),er.push({event:_e,listeners:rr}),_e.target=Qe)))}function Ve(er,_e){var tr={};return tr[er.toLowerCase()]=_e.toLowerCase(),tr["Webkit"+er]="webkit"+_e,tr["Moz"+er]="moz"+_e,tr}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(er){if(Xe[er])return Xe[er];if(!We[er])return er;var _e=We[er],tr;for(tr in _e)if(_e.hasOwnProperty(tr)&&tr in Ye)return Xe[er]=_e[tr];return er}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(er,_e){df.set(er,_e),fa(_e,[er])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(er,_e,tr){var rr=er.type||"unknown-event";er.currentTarget=tr,Ub(rr,_e,void 0,er),er.currentTarget=null}function se$2(er,_e){_e=(_e&4)!==0;for(var tr=0;tr<er.length;tr++){var rr=er[tr],nr=rr.event;rr=rr.listeners;e:{var sr=void 0;if(_e)for(var ir=rr.length-1;0<=ir;ir--){var or=rr[ir],ar=or.instance,lr=or.currentTarget;if(or=or.listener,ar!==sr&&nr.isPropagationStopped())break e;nf(nr,or,lr),sr=ar}else for(ir=0;ir<rr.length;ir++){if(or=rr[ir],ar=or.instance,lr=or.currentTarget,or=or.listener,ar!==sr&&nr.isPropagationStopped())break e;nf(nr,or,lr),sr=ar}}}if(Qb)throw er=Rb,Qb=!1,Rb=null,er}function D$2(er,_e){var tr=_e[of];tr===void 0&&(tr=_e[of]=new Set);var rr=er+"__bubble";tr.has(rr)||(pf(_e,er,2,!1),tr.add(rr))}function qf(er,_e,tr){var rr=0;_e&&(rr|=4),pf(tr,er,rr,_e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(er){if(!er[rf]){er[rf]=!0,da.forEach(function(tr){tr!=="selectionchange"&&(mf.has(tr)||qf(tr,!1,er),qf(tr,!0,er))});var _e=er.nodeType===9?er:er.ownerDocument;_e===null||_e[rf]||(_e[rf]=!0,qf("selectionchange",!1,_e))}}function pf(er,_e,tr,rr){switch(jd(_e)){case 1:var nr=ed;break;case 4:nr=gd;break;default:nr=fd$1}tr=nr.bind(null,_e,tr,er),nr=void 0,!Lb||_e!=="touchstart"&&_e!=="touchmove"&&_e!=="wheel"||(nr=!0),rr?nr!==void 0?er.addEventListener(_e,tr,{capture:!0,passive:nr}):er.addEventListener(_e,tr,!0):nr!==void 0?er.addEventListener(_e,tr,{passive:nr}):er.addEventListener(_e,tr,!1)}function hd(er,_e,tr,rr,nr){var sr=rr;if(!(_e&1)&&!(_e&2)&&rr!==null)e:for(;;){if(rr===null)return;var ir=rr.tag;if(ir===3||ir===4){var or=rr.stateNode.containerInfo;if(or===nr||or.nodeType===8&&or.parentNode===nr)break;if(ir===4)for(ir=rr.return;ir!==null;){var ar=ir.tag;if((ar===3||ar===4)&&(ar=ir.stateNode.containerInfo,ar===nr||ar.nodeType===8&&ar.parentNode===nr))return;ir=ir.return}for(;or!==null;){if(ir=Wc(or),ir===null)return;if(ar=ir.tag,ar===5||ar===6){rr=sr=ir;continue e}or=or.parentNode}}rr=rr.return}Jb(function(){var lr=sr,cr=xb(tr),Ar=[];e:{var ur=df.get(er);if(ur!==void 0){var dr=td$1,mr=er;switch(er){case"keypress":if(od(tr)===0)break e;case"keydown":case"keyup":dr=Rd;break;case"focusin":mr="focus",dr=Fd;break;case"focusout":mr="blur",dr=Fd;break;case"beforeblur":case"afterblur":dr=Fd;break;case"click":if(tr.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dr=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dr=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dr=Vd;break;case $e:case af:case bf:dr=Hd;break;case cf:dr=Xd;break;case"scroll":dr=vd;break;case"wheel":dr=Zd;break;case"copy":case"cut":case"paste":dr=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dr=Td}var pr=(_e&4)!==0,yr=!pr&&er==="scroll",hr=pr?ur!==null?ur+"Capture":null:ur;pr=[];for(var gr=lr,Cr;gr!==null;){Cr=gr;var Tr=Cr.stateNode;if(Cr.tag===5&&Tr!==null&&(Cr=Tr,hr!==null&&(Tr=Kb(gr,hr),Tr!=null&&pr.push(tf(gr,Tr,Cr)))),yr)break;gr=gr.return}0<pr.length&&(ur=new dr(ur,mr,null,tr,cr),Ar.push({event:ur,listeners:pr}))}}if(!(_e&7)){e:{if(ur=er==="mouseover"||er==="pointerover",dr=er==="mouseout"||er==="pointerout",ur&&tr!==wb&&(mr=tr.relatedTarget||tr.fromElement)&&(Wc(mr)||mr[uf]))break e;if((dr||ur)&&(ur=cr.window===cr?cr:(ur=cr.ownerDocument)?ur.defaultView||ur.parentWindow:window,dr?(mr=tr.relatedTarget||tr.toElement,dr=lr,mr=mr?Wc(mr):null,mr!==null&&(yr=Vb(mr),mr!==yr||mr.tag!==5&&mr.tag!==6)&&(mr=null)):(dr=null,mr=lr),dr!==mr)){if(pr=Bd,Tr="onMouseLeave",hr="onMouseEnter",gr="mouse",(er==="pointerout"||er==="pointerover")&&(pr=Td,Tr="onPointerLeave",hr="onPointerEnter",gr="pointer"),yr=dr==null?ur:ue$1(dr),Cr=mr==null?ur:ue$1(mr),ur=new pr(Tr,gr+"leave",dr,tr,cr),ur.target=yr,ur.relatedTarget=Cr,Tr=null,Wc(cr)===lr&&(pr=new pr(hr,gr+"enter",mr,tr,cr),pr.target=Cr,pr.relatedTarget=yr,Tr=pr),yr=Tr,dr&&mr)t:{for(pr=dr,hr=mr,gr=0,Cr=pr;Cr;Cr=vf(Cr))gr++;for(Cr=0,Tr=hr;Tr;Tr=vf(Tr))Cr++;for(;0<gr-Cr;)pr=vf(pr),gr--;for(;0<Cr-gr;)hr=vf(hr),Cr--;for(;gr--;){if(pr===hr||hr!==null&&pr===hr.alternate)break t;pr=vf(pr),hr=vf(hr)}pr=null}else pr=null;dr!==null&&wf(Ar,ur,dr,pr,!1),mr!==null&&yr!==null&&wf(Ar,yr,mr,pr,!0)}}e:{if(ur=lr?ue$1(lr):window,dr=ur.nodeName&&ur.nodeName.toLowerCase(),dr==="select"||dr==="input"&&ur.type==="file")var Sr=ve$1;else if(me$1(ur))if(we$1)Sr=Fe;else{Sr=De;var Nr=Ce}else(dr=ur.nodeName)&&dr.toLowerCase()==="input"&&(ur.type==="checkbox"||ur.type==="radio")&&(Sr=Ee);if(Sr&&(Sr=Sr(er,lr))){ne$2(Ar,Sr,tr,cr);break e}Nr&&Nr(er,ur,lr),er==="focusout"&&(Nr=ur._wrapperState)&&Nr.controlled&&ur.type==="number"&&cb(ur,"number",ur.value)}switch(Nr=lr?ue$1(lr):window,er){case"focusin":(me$1(Nr)||Nr.contentEditable==="true")&&(Qe=Nr,Re=lr,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue(Ar,tr,cr);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(Ar,tr,cr)}var _r;if(ae$2)e:{switch(er){case"compositionstart":var vr="onCompositionStart";break e;case"compositionend":vr="onCompositionEnd";break e;case"compositionupdate":vr="onCompositionUpdate";break e}vr=void 0}else ie$1?ge$1(er,tr)&&(vr="onCompositionEnd"):er==="keydown"&&tr.keyCode===229&&(vr="onCompositionStart");vr&&(de$1&&tr.locale!=="ko"&&(ie$1||vr!=="onCompositionStart"?vr==="onCompositionEnd"&&ie$1&&(_r=nd()):(kd=cr,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),Nr=oe$2(lr,vr),0<Nr.length&&(vr=new Ld(vr,er,null,tr,cr),Ar.push({event:vr,listeners:Nr}),_r?vr.data=_r:(_r=he$1(tr),_r!==null&&(vr.data=_r)))),(_r=ce$1?je(er,tr):ke(er,tr))&&(lr=oe$2(lr,"onBeforeInput"),0<lr.length&&(cr=new Ld("onBeforeInput","beforeinput",null,tr,cr),Ar.push({event:cr,listeners:lr}),cr.data=_r))}se$2(Ar,_e)})}function tf(er,_e,tr){return{instance:er,listener:_e,currentTarget:tr}}function oe$2(er,_e){for(var tr=_e+"Capture",rr=[];er!==null;){var nr=er,sr=nr.stateNode;nr.tag===5&&sr!==null&&(nr=sr,sr=Kb(er,tr),sr!=null&&rr.unshift(tf(er,sr,nr)),sr=Kb(er,_e),sr!=null&&rr.push(tf(er,sr,nr))),er=er.return}return rr}function vf(er){if(er===null)return null;do er=er.return;while(er&&er.tag!==5);return er||null}function wf(er,_e,tr,rr,nr){for(var sr=_e._reactName,ir=[];tr!==null&&tr!==rr;){var or=tr,ar=or.alternate,lr=or.stateNode;if(ar!==null&&ar===rr)break;or.tag===5&&lr!==null&&(or=lr,nr?(ar=Kb(tr,sr),ar!=null&&ir.unshift(tf(tr,ar,or))):nr||(ar=Kb(tr,sr),ar!=null&&ir.push(tf(tr,ar,or)))),tr=tr.return}ir.length!==0&&er.push({event:_e,listeners:ir})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(er){return(typeof er=="string"?er:""+er).replace(xf,`
`).replace(yf,"")}function Af(er,_e,tr){if(_e=zf(_e),zf(er)!==_e&&tr)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(er,_e){return er==="textarea"||er==="noscript"||typeof _e.children=="string"||typeof _e.children=="number"||typeof _e.dangerouslySetInnerHTML=="object"&&_e.dangerouslySetInnerHTML!==null&&_e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(er){return Hf.resolve(null).then(er).catch(If)}:Ff;function If(er){setTimeout(function(){throw er})}function Kf(er,_e){var tr=_e,rr=0;do{var nr=tr.nextSibling;if(er.removeChild(tr),nr&&nr.nodeType===8)if(tr=nr.data,tr==="/$"){if(rr===0){er.removeChild(nr),bd(_e);return}rr--}else tr!=="$"&&tr!=="$?"&&tr!=="$!"||rr++;tr=nr}while(tr);bd(_e)}function Lf(er){for(;er!=null;er=er.nextSibling){var _e=er.nodeType;if(_e===1||_e===3)break;if(_e===8){if(_e=er.data,_e==="$"||_e==="$!"||_e==="$?")break;if(_e==="/$")return null}}return er}function Mf(er){er=er.previousSibling;for(var _e=0;er;){if(er.nodeType===8){var tr=er.data;if(tr==="$"||tr==="$!"||tr==="$?"){if(_e===0)return er;_e--}else tr==="/$"&&_e++}er=er.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(er){var _e=er[Of];if(_e)return _e;for(var tr=er.parentNode;tr;){if(_e=tr[uf]||tr[Of]){if(tr=_e.alternate,_e.child!==null||tr!==null&&tr.child!==null)for(er=Mf(er);er!==null;){if(tr=er[Of])return tr;er=Mf(er)}return _e}er=tr,tr=er.parentNode}return null}function Cb(er){return er=er[Of]||er[uf],!er||er.tag!==5&&er.tag!==6&&er.tag!==13&&er.tag!==3?null:er}function ue$1(er){if(er.tag===5||er.tag===6)return er.stateNode;throw Error(p$1(33))}function Db(er){return er[Pf]||null}var Sf=[],Tf=-1;function Uf(er){return{current:er}}function E$3(er){0>Tf||(er.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$2(er,_e){Tf++,Sf[Tf]=er.current,er.current=_e}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(er,_e){var tr=er.type.contextTypes;if(!tr)return Vf;var rr=er.stateNode;if(rr&&rr.__reactInternalMemoizedUnmaskedChildContext===_e)return rr.__reactInternalMemoizedMaskedChildContext;var nr={},sr;for(sr in tr)nr[sr]=_e[sr];return rr&&(er=er.stateNode,er.__reactInternalMemoizedUnmaskedChildContext=_e,er.__reactInternalMemoizedMaskedChildContext=nr),nr}function Zf(er){return er=er.childContextTypes,er!=null}function $f(){E$3(Wf),E$3(H$1)}function ag(er,_e,tr){if(H$1.current!==Vf)throw Error(p$1(168));G$2(H$1,_e),G$2(Wf,tr)}function bg(er,_e,tr){var rr=er.stateNode;if(_e=_e.childContextTypes,typeof rr.getChildContext!="function")return tr;rr=rr.getChildContext();for(var nr in rr)if(!(nr in _e))throw Error(p$1(108,Ra(er)||"Unknown",nr));return A$2({},tr,rr)}function cg(er){return er=(er=er.stateNode)&&er.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$2(H$1,er),G$2(Wf,Wf.current),!0}function dg(er,_e,tr){var rr=er.stateNode;if(!rr)throw Error(p$1(169));tr?(er=bg(er,_e,Xf),rr.__reactInternalMemoizedMergedChildContext=er,E$3(Wf),E$3(H$1),G$2(H$1,er)):E$3(Wf),G$2(Wf,tr)}var eg=null,fg=!1,gg=!1;function hg(er){eg===null?eg=[er]:eg.push(er)}function ig(er){fg=!0,hg(er)}function jg(){if(!gg&&eg!==null){gg=!0;var er=0,_e=C$1;try{var tr=eg;for(C$1=1;er<tr.length;er++){var rr=tr[er];do rr=rr(!0);while(rr!==null)}eg=null,fg=!1}catch(nr){throw eg!==null&&(eg=eg.slice(er+1)),ac(fc,jg),nr}finally{C$1=_e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(er,_e){kg[lg++]=ng,kg[lg++]=mg,mg=er,ng=_e}function ug(er,_e,tr){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=er;var rr=rg;er=sg;var nr=32-oc(rr)-1;rr&=~(1<<nr),tr+=1;var sr=32-oc(_e)+nr;if(30<sr){var ir=nr-nr%5;sr=(rr&(1<<ir)-1).toString(32),rr>>=ir,nr-=ir,rg=1<<32-oc(_e)+nr|tr<<nr|rr,sg=sr+er}else rg=1<<sr|tr<<nr|rr,sg=er}function vg(er){er.return!==null&&(tg(er,1),ug(er,1,0))}function wg(er){for(;er===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;er===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(er,_e){var tr=Bg(5,null,null,0);tr.elementType="DELETED",tr.stateNode=_e,tr.return=er,_e=er.deletions,_e===null?(er.deletions=[tr],er.flags|=16):_e.push(tr)}function Cg(er,_e){switch(er.tag){case 5:var tr=er.type;return _e=_e.nodeType!==1||tr.toLowerCase()!==_e.nodeName.toLowerCase()?null:_e,_e!==null?(er.stateNode=_e,xg=er,yg=Lf(_e.firstChild),!0):!1;case 6:return _e=er.pendingProps===""||_e.nodeType!==3?null:_e,_e!==null?(er.stateNode=_e,xg=er,yg=null,!0):!1;case 13:return _e=_e.nodeType!==8?null:_e,_e!==null?(tr=qg!==null?{id:rg,overflow:sg}:null,er.memoizedState={dehydrated:_e,treeContext:tr,retryLane:1073741824},tr=Bg(18,null,null,0),tr.stateNode=_e,tr.return=er,er.child=tr,xg=er,yg=null,!0):!1;default:return!1}}function Dg(er){return(er.mode&1)!==0&&(er.flags&128)===0}function Eg(er){if(I$1){var _e=yg;if(_e){var tr=_e;if(!Cg(er,_e)){if(Dg(er))throw Error(p$1(418));_e=Lf(tr.nextSibling);var rr=xg;_e&&Cg(er,_e)?Ag(rr,tr):(er.flags=er.flags&-4097|2,I$1=!1,xg=er)}}else{if(Dg(er))throw Error(p$1(418));er.flags=er.flags&-4097|2,I$1=!1,xg=er}}}function Fg(er){for(er=er.return;er!==null&&er.tag!==5&&er.tag!==3&&er.tag!==13;)er=er.return;xg=er}function Gg(er){if(er!==xg)return!1;if(!I$1)return Fg(er),I$1=!0,!1;var _e;if((_e=er.tag!==3)&&!(_e=er.tag!==5)&&(_e=er.type,_e=_e!=="head"&&_e!=="body"&&!Ef(er.type,er.memoizedProps)),_e&&(_e=yg)){if(Dg(er))throw Hg(),Error(p$1(418));for(;_e;)Ag(er,_e),_e=Lf(_e.nextSibling)}if(Fg(er),er.tag===13){if(er=er.memoizedState,er=er!==null?er.dehydrated:null,!er)throw Error(p$1(317));e:{for(er=er.nextSibling,_e=0;er;){if(er.nodeType===8){var tr=er.data;if(tr==="/$"){if(_e===0){yg=Lf(er.nextSibling);break e}_e--}else tr!=="$"&&tr!=="$!"&&tr!=="$?"||_e++}er=er.nextSibling}yg=null}}else yg=xg?Lf(er.stateNode.nextSibling):null;return!0}function Hg(){for(var er=yg;er;)er=Lf(er.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(er){zg===null?zg=[er]:zg.push(er)}var Kg=ua.ReactCurrentBatchConfig;function Lg(er,_e,tr){if(er=tr.ref,er!==null&&typeof er!="function"&&typeof er!="object"){if(tr._owner){if(tr=tr._owner,tr){if(tr.tag!==1)throw Error(p$1(309));var rr=tr.stateNode}if(!rr)throw Error(p$1(147,er));var nr=rr,sr=""+er;return _e!==null&&_e.ref!==null&&typeof _e.ref=="function"&&_e.ref._stringRef===sr?_e.ref:(_e=function(ir){var or=nr.refs;ir===null?delete or[sr]:or[sr]=ir},_e._stringRef=sr,_e)}if(typeof er!="string")throw Error(p$1(284));if(!tr._owner)throw Error(p$1(290,er))}return er}function Mg(er,_e){throw er=Object.prototype.toString.call(_e),Error(p$1(31,er==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":er))}function Ng(er){var _e=er._init;return _e(er._payload)}function Og(er){function _e(hr,gr){if(er){var Cr=hr.deletions;Cr===null?(hr.deletions=[gr],hr.flags|=16):Cr.push(gr)}}function tr(hr,gr){if(!er)return null;for(;gr!==null;)_e(hr,gr),gr=gr.sibling;return null}function rr(hr,gr){for(hr=new Map;gr!==null;)gr.key!==null?hr.set(gr.key,gr):hr.set(gr.index,gr),gr=gr.sibling;return hr}function nr(hr,gr){return hr=Pg(hr,gr),hr.index=0,hr.sibling=null,hr}function sr(hr,gr,Cr){return hr.index=Cr,er?(Cr=hr.alternate,Cr!==null?(Cr=Cr.index,Cr<gr?(hr.flags|=2,gr):Cr):(hr.flags|=2,gr)):(hr.flags|=1048576,gr)}function ir(hr){return er&&hr.alternate===null&&(hr.flags|=2),hr}function or(hr,gr,Cr,Tr){return gr===null||gr.tag!==6?(gr=Qg(Cr,hr.mode,Tr),gr.return=hr,gr):(gr=nr(gr,Cr),gr.return=hr,gr)}function ar(hr,gr,Cr,Tr){var Sr=Cr.type;return Sr===ya?cr(hr,gr,Cr.props.children,Tr,Cr.key):gr!==null&&(gr.elementType===Sr||typeof Sr=="object"&&Sr!==null&&Sr.$$typeof===Ha&&Ng(Sr)===gr.type)?(Tr=nr(gr,Cr.props),Tr.ref=Lg(hr,gr,Cr),Tr.return=hr,Tr):(Tr=Rg(Cr.type,Cr.key,Cr.props,null,hr.mode,Tr),Tr.ref=Lg(hr,gr,Cr),Tr.return=hr,Tr)}function lr(hr,gr,Cr,Tr){return gr===null||gr.tag!==4||gr.stateNode.containerInfo!==Cr.containerInfo||gr.stateNode.implementation!==Cr.implementation?(gr=Sg(Cr,hr.mode,Tr),gr.return=hr,gr):(gr=nr(gr,Cr.children||[]),gr.return=hr,gr)}function cr(hr,gr,Cr,Tr,Sr){return gr===null||gr.tag!==7?(gr=Tg(Cr,hr.mode,Tr,Sr),gr.return=hr,gr):(gr=nr(gr,Cr),gr.return=hr,gr)}function Ar(hr,gr,Cr){if(typeof gr=="string"&&gr!==""||typeof gr=="number")return gr=Qg(""+gr,hr.mode,Cr),gr.return=hr,gr;if(typeof gr=="object"&&gr!==null){switch(gr.$$typeof){case va:return Cr=Rg(gr.type,gr.key,gr.props,null,hr.mode,Cr),Cr.ref=Lg(hr,null,gr),Cr.return=hr,Cr;case wa:return gr=Sg(gr,hr.mode,Cr),gr.return=hr,gr;case Ha:var Tr=gr._init;return Ar(hr,Tr(gr._payload),Cr)}if(eb(gr)||Ka(gr))return gr=Tg(gr,hr.mode,Cr,null),gr.return=hr,gr;Mg(hr,gr)}return null}function ur(hr,gr,Cr,Tr){var Sr=gr!==null?gr.key:null;if(typeof Cr=="string"&&Cr!==""||typeof Cr=="number")return Sr!==null?null:or(hr,gr,""+Cr,Tr);if(typeof Cr=="object"&&Cr!==null){switch(Cr.$$typeof){case va:return Cr.key===Sr?ar(hr,gr,Cr,Tr):null;case wa:return Cr.key===Sr?lr(hr,gr,Cr,Tr):null;case Ha:return Sr=Cr._init,ur(hr,gr,Sr(Cr._payload),Tr)}if(eb(Cr)||Ka(Cr))return Sr!==null?null:cr(hr,gr,Cr,Tr,null);Mg(hr,Cr)}return null}function dr(hr,gr,Cr,Tr,Sr){if(typeof Tr=="string"&&Tr!==""||typeof Tr=="number")return hr=hr.get(Cr)||null,or(gr,hr,""+Tr,Sr);if(typeof Tr=="object"&&Tr!==null){switch(Tr.$$typeof){case va:return hr=hr.get(Tr.key===null?Cr:Tr.key)||null,ar(gr,hr,Tr,Sr);case wa:return hr=hr.get(Tr.key===null?Cr:Tr.key)||null,lr(gr,hr,Tr,Sr);case Ha:var Nr=Tr._init;return dr(hr,gr,Cr,Nr(Tr._payload),Sr)}if(eb(Tr)||Ka(Tr))return hr=hr.get(Cr)||null,cr(gr,hr,Tr,Sr,null);Mg(gr,Tr)}return null}function mr(hr,gr,Cr,Tr){for(var Sr=null,Nr=null,_r=gr,vr=gr=0,br=null;_r!==null&&vr<Cr.length;vr++){_r.index>vr?(br=_r,_r=null):br=_r.sibling;var Pr=ur(hr,_r,Cr[vr],Tr);if(Pr===null){_r===null&&(_r=br);break}er&&_r&&Pr.alternate===null&&_e(hr,_r),gr=sr(Pr,gr,vr),Nr===null?Sr=Pr:Nr.sibling=Pr,Nr=Pr,_r=br}if(vr===Cr.length)return tr(hr,_r),I$1&&tg(hr,vr),Sr;if(_r===null){for(;vr<Cr.length;vr++)_r=Ar(hr,Cr[vr],Tr),_r!==null&&(gr=sr(_r,gr,vr),Nr===null?Sr=_r:Nr.sibling=_r,Nr=_r);return I$1&&tg(hr,vr),Sr}for(_r=rr(hr,_r);vr<Cr.length;vr++)br=dr(_r,hr,vr,Cr[vr],Tr),br!==null&&(er&&br.alternate!==null&&_r.delete(br.key===null?vr:br.key),gr=sr(br,gr,vr),Nr===null?Sr=br:Nr.sibling=br,Nr=br);return er&&_r.forEach(function(Er){return _e(hr,Er)}),I$1&&tg(hr,vr),Sr}function pr(hr,gr,Cr,Tr){var Sr=Ka(Cr);if(typeof Sr!="function")throw Error(p$1(150));if(Cr=Sr.call(Cr),Cr==null)throw Error(p$1(151));for(var Nr=Sr=null,_r=gr,vr=gr=0,br=null,Pr=Cr.next();_r!==null&&!Pr.done;vr++,Pr=Cr.next()){_r.index>vr?(br=_r,_r=null):br=_r.sibling;var Er=ur(hr,_r,Pr.value,Tr);if(Er===null){_r===null&&(_r=br);break}er&&_r&&Er.alternate===null&&_e(hr,_r),gr=sr(Er,gr,vr),Nr===null?Sr=Er:Nr.sibling=Er,Nr=Er,_r=br}if(Pr.done)return tr(hr,_r),I$1&&tg(hr,vr),Sr;if(_r===null){for(;!Pr.done;vr++,Pr=Cr.next())Pr=Ar(hr,Pr.value,Tr),Pr!==null&&(gr=sr(Pr,gr,vr),Nr===null?Sr=Pr:Nr.sibling=Pr,Nr=Pr);return I$1&&tg(hr,vr),Sr}for(_r=rr(hr,_r);!Pr.done;vr++,Pr=Cr.next())Pr=dr(_r,hr,vr,Pr.value,Tr),Pr!==null&&(er&&Pr.alternate!==null&&_r.delete(Pr.key===null?vr:Pr.key),gr=sr(Pr,gr,vr),Nr===null?Sr=Pr:Nr.sibling=Pr,Nr=Pr);return er&&_r.forEach(function(Rr){return _e(hr,Rr)}),I$1&&tg(hr,vr),Sr}function yr(hr,gr,Cr,Tr){if(typeof Cr=="object"&&Cr!==null&&Cr.type===ya&&Cr.key===null&&(Cr=Cr.props.children),typeof Cr=="object"&&Cr!==null){switch(Cr.$$typeof){case va:e:{for(var Sr=Cr.key,Nr=gr;Nr!==null;){if(Nr.key===Sr){if(Sr=Cr.type,Sr===ya){if(Nr.tag===7){tr(hr,Nr.sibling),gr=nr(Nr,Cr.props.children),gr.return=hr,hr=gr;break e}}else if(Nr.elementType===Sr||typeof Sr=="object"&&Sr!==null&&Sr.$$typeof===Ha&&Ng(Sr)===Nr.type){tr(hr,Nr.sibling),gr=nr(Nr,Cr.props),gr.ref=Lg(hr,Nr,Cr),gr.return=hr,hr=gr;break e}tr(hr,Nr);break}else _e(hr,Nr);Nr=Nr.sibling}Cr.type===ya?(gr=Tg(Cr.props.children,hr.mode,Tr,Cr.key),gr.return=hr,hr=gr):(Tr=Rg(Cr.type,Cr.key,Cr.props,null,hr.mode,Tr),Tr.ref=Lg(hr,gr,Cr),Tr.return=hr,hr=Tr)}return ir(hr);case wa:e:{for(Nr=Cr.key;gr!==null;){if(gr.key===Nr)if(gr.tag===4&&gr.stateNode.containerInfo===Cr.containerInfo&&gr.stateNode.implementation===Cr.implementation){tr(hr,gr.sibling),gr=nr(gr,Cr.children||[]),gr.return=hr,hr=gr;break e}else{tr(hr,gr);break}else _e(hr,gr);gr=gr.sibling}gr=Sg(Cr,hr.mode,Tr),gr.return=hr,hr=gr}return ir(hr);case Ha:return Nr=Cr._init,yr(hr,gr,Nr(Cr._payload),Tr)}if(eb(Cr))return mr(hr,gr,Cr,Tr);if(Ka(Cr))return pr(hr,gr,Cr,Tr);Mg(hr,Cr)}return typeof Cr=="string"&&Cr!==""||typeof Cr=="number"?(Cr=""+Cr,gr!==null&&gr.tag===6?(tr(hr,gr.sibling),gr=nr(gr,Cr),gr.return=hr,hr=gr):(tr(hr,gr),gr=Qg(Cr,hr.mode,Tr),gr.return=hr,hr=gr),ir(hr)):tr(hr,gr)}return yr}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(er){var _e=Wg.current;E$3(Wg),er._currentValue=_e}function bh(er,_e,tr){for(;er!==null;){var rr=er.alternate;if((er.childLanes&_e)!==_e?(er.childLanes|=_e,rr!==null&&(rr.childLanes|=_e)):rr!==null&&(rr.childLanes&_e)!==_e&&(rr.childLanes|=_e),er===tr)break;er=er.return}}function ch(er,_e){Xg=er,Zg=Yg=null,er=er.dependencies,er!==null&&er.firstContext!==null&&(er.lanes&_e&&(dh=!0),er.firstContext=null)}function eh(er){var _e=er._currentValue;if(Zg!==er)if(er={context:er,memoizedValue:_e,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=er,Xg.dependencies={lanes:0,firstContext:er}}else Yg=Yg.next=er;return _e}var fh=null;function gh(er){fh===null?fh=[er]:fh.push(er)}function hh(er,_e,tr,rr){var nr=_e.interleaved;return nr===null?(tr.next=tr,gh(_e)):(tr.next=nr.next,nr.next=tr),_e.interleaved=tr,ih(er,rr)}function ih(er,_e){er.lanes|=_e;var tr=er.alternate;for(tr!==null&&(tr.lanes|=_e),tr=er,er=er.return;er!==null;)er.childLanes|=_e,tr=er.alternate,tr!==null&&(tr.childLanes|=_e),tr=er,er=er.return;return tr.tag===3?tr.stateNode:null}var jh=!1;function kh(er){er.updateQueue={baseState:er.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(er,_e){er=er.updateQueue,_e.updateQueue===er&&(_e.updateQueue={baseState:er.baseState,firstBaseUpdate:er.firstBaseUpdate,lastBaseUpdate:er.lastBaseUpdate,shared:er.shared,effects:er.effects})}function mh(er,_e){return{eventTime:er,lane:_e,tag:0,payload:null,callback:null,next:null}}function nh(er,_e,tr){var rr=er.updateQueue;if(rr===null)return null;if(rr=rr.shared,K$1&2){var nr=rr.pending;return nr===null?_e.next=_e:(_e.next=nr.next,nr.next=_e),rr.pending=_e,ih(er,tr)}return nr=rr.interleaved,nr===null?(_e.next=_e,gh(rr)):(_e.next=nr.next,nr.next=_e),rr.interleaved=_e,ih(er,tr)}function oh(er,_e,tr){if(_e=_e.updateQueue,_e!==null&&(_e=_e.shared,(tr&4194240)!==0)){var rr=_e.lanes;rr&=er.pendingLanes,tr|=rr,_e.lanes=tr,Cc(er,tr)}}function ph(er,_e){var tr=er.updateQueue,rr=er.alternate;if(rr!==null&&(rr=rr.updateQueue,tr===rr)){var nr=null,sr=null;if(tr=tr.firstBaseUpdate,tr!==null){do{var ir={eventTime:tr.eventTime,lane:tr.lane,tag:tr.tag,payload:tr.payload,callback:tr.callback,next:null};sr===null?nr=sr=ir:sr=sr.next=ir,tr=tr.next}while(tr!==null);sr===null?nr=sr=_e:sr=sr.next=_e}else nr=sr=_e;tr={baseState:rr.baseState,firstBaseUpdate:nr,lastBaseUpdate:sr,shared:rr.shared,effects:rr.effects},er.updateQueue=tr;return}er=tr.lastBaseUpdate,er===null?tr.firstBaseUpdate=_e:er.next=_e,tr.lastBaseUpdate=_e}function qh(er,_e,tr,rr){var nr=er.updateQueue;jh=!1;var sr=nr.firstBaseUpdate,ir=nr.lastBaseUpdate,or=nr.shared.pending;if(or!==null){nr.shared.pending=null;var ar=or,lr=ar.next;ar.next=null,ir===null?sr=lr:ir.next=lr,ir=ar;var cr=er.alternate;cr!==null&&(cr=cr.updateQueue,or=cr.lastBaseUpdate,or!==ir&&(or===null?cr.firstBaseUpdate=lr:or.next=lr,cr.lastBaseUpdate=ar))}if(sr!==null){var Ar=nr.baseState;ir=0,cr=lr=ar=null,or=sr;do{var ur=or.lane,dr=or.eventTime;if((rr&ur)===ur){cr!==null&&(cr=cr.next={eventTime:dr,lane:0,tag:or.tag,payload:or.payload,callback:or.callback,next:null});e:{var mr=er,pr=or;switch(ur=_e,dr=tr,pr.tag){case 1:if(mr=pr.payload,typeof mr=="function"){Ar=mr.call(dr,Ar,ur);break e}Ar=mr;break e;case 3:mr.flags=mr.flags&-65537|128;case 0:if(mr=pr.payload,ur=typeof mr=="function"?mr.call(dr,Ar,ur):mr,ur==null)break e;Ar=A$2({},Ar,ur);break e;case 2:jh=!0}}or.callback!==null&&or.lane!==0&&(er.flags|=64,ur=nr.effects,ur===null?nr.effects=[or]:ur.push(or))}else dr={eventTime:dr,lane:ur,tag:or.tag,payload:or.payload,callback:or.callback,next:null},cr===null?(lr=cr=dr,ar=Ar):cr=cr.next=dr,ir|=ur;if(or=or.next,or===null){if(or=nr.shared.pending,or===null)break;ur=or,or=ur.next,ur.next=null,nr.lastBaseUpdate=ur,nr.shared.pending=null}}while(!0);if(cr===null&&(ar=Ar),nr.baseState=ar,nr.firstBaseUpdate=lr,nr.lastBaseUpdate=cr,_e=nr.shared.interleaved,_e!==null){nr=_e;do ir|=nr.lane,nr=nr.next;while(nr!==_e)}else sr===null&&(nr.shared.lanes=0);rh|=ir,er.lanes=ir,er.memoizedState=Ar}}function sh(er,_e,tr){if(er=_e.effects,_e.effects=null,er!==null)for(_e=0;_e<er.length;_e++){var rr=er[_e],nr=rr.callback;if(nr!==null){if(rr.callback=null,rr=tr,typeof nr!="function")throw Error(p$1(191,nr));nr.call(rr)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(er){if(er===th)throw Error(p$1(174));return er}function yh(er,_e){switch(G$2(wh,_e),G$2(vh,er),G$2(uh,th),er=_e.nodeType,er){case 9:case 11:_e=(_e=_e.documentElement)?_e.namespaceURI:lb(null,"");break;default:er=er===8?_e.parentNode:_e,_e=er.namespaceURI||null,er=er.tagName,_e=lb(_e,er)}E$3(uh),G$2(uh,_e)}function zh(){E$3(uh),E$3(vh),E$3(wh)}function Ah(er){xh(wh.current);var _e=xh(uh.current),tr=lb(_e,er.type);_e!==tr&&(G$2(vh,er),G$2(uh,tr))}function Bh(er){vh.current===er&&(E$3(uh),E$3(vh))}var L$4=Uf(0);function Ch(er){for(var _e=er;_e!==null;){if(_e.tag===13){var tr=_e.memoizedState;if(tr!==null&&(tr=tr.dehydrated,tr===null||tr.data==="$?"||tr.data==="$!"))return _e}else if(_e.tag===19&&_e.memoizedProps.revealOrder!==void 0){if(_e.flags&128)return _e}else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===er)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===er)return null;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}return null}var Dh=[];function Eh(){for(var er=0;er<Dh.length;er++)Dh[er]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$2=null,N$2=null,O$2=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$2(){throw Error(p$1(321))}function Mh(er,_e){if(_e===null)return!1;for(var tr=0;tr<_e.length&&tr<er.length;tr++)if(!He(er[tr],_e[tr]))return!1;return!0}function Nh(er,_e,tr,rr,nr,sr){if(Hh=sr,M$2=_e,_e.memoizedState=null,_e.updateQueue=null,_e.lanes=0,Fh.current=er===null||er.memoizedState===null?Oh:Ph,er=tr(rr,nr),Jh){sr=0;do{if(Jh=!1,Kh=0,25<=sr)throw Error(p$1(301));sr+=1,O$2=N$2=null,_e.updateQueue=null,Fh.current=Qh,er=tr(rr,nr)}while(Jh)}if(Fh.current=Rh,_e=N$2!==null&&N$2.next!==null,Hh=0,O$2=N$2=M$2=null,Ih=!1,_e)throw Error(p$1(300));return er}function Sh(){var er=Kh!==0;return Kh=0,er}function Th(){var er={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$2===null?M$2.memoizedState=O$2=er:O$2=O$2.next=er,O$2}function Uh(){if(N$2===null){var er=M$2.alternate;er=er!==null?er.memoizedState:null}else er=N$2.next;var _e=O$2===null?M$2.memoizedState:O$2.next;if(_e!==null)O$2=_e,N$2=er;else{if(er===null)throw Error(p$1(310));N$2=er,er={memoizedState:N$2.memoizedState,baseState:N$2.baseState,baseQueue:N$2.baseQueue,queue:N$2.queue,next:null},O$2===null?M$2.memoizedState=O$2=er:O$2=O$2.next=er}return O$2}function Vh(er,_e){return typeof _e=="function"?_e(er):_e}function Wh(er){var _e=Uh(),tr=_e.queue;if(tr===null)throw Error(p$1(311));tr.lastRenderedReducer=er;var rr=N$2,nr=rr.baseQueue,sr=tr.pending;if(sr!==null){if(nr!==null){var ir=nr.next;nr.next=sr.next,sr.next=ir}rr.baseQueue=nr=sr,tr.pending=null}if(nr!==null){sr=nr.next,rr=rr.baseState;var or=ir=null,ar=null,lr=sr;do{var cr=lr.lane;if((Hh&cr)===cr)ar!==null&&(ar=ar.next={lane:0,action:lr.action,hasEagerState:lr.hasEagerState,eagerState:lr.eagerState,next:null}),rr=lr.hasEagerState?lr.eagerState:er(rr,lr.action);else{var Ar={lane:cr,action:lr.action,hasEagerState:lr.hasEagerState,eagerState:lr.eagerState,next:null};ar===null?(or=ar=Ar,ir=rr):ar=ar.next=Ar,M$2.lanes|=cr,rh|=cr}lr=lr.next}while(lr!==null&&lr!==sr);ar===null?ir=rr:ar.next=or,He(rr,_e.memoizedState)||(dh=!0),_e.memoizedState=rr,_e.baseState=ir,_e.baseQueue=ar,tr.lastRenderedState=rr}if(er=tr.interleaved,er!==null){nr=er;do sr=nr.lane,M$2.lanes|=sr,rh|=sr,nr=nr.next;while(nr!==er)}else nr===null&&(tr.lanes=0);return[_e.memoizedState,tr.dispatch]}function Xh(er){var _e=Uh(),tr=_e.queue;if(tr===null)throw Error(p$1(311));tr.lastRenderedReducer=er;var rr=tr.dispatch,nr=tr.pending,sr=_e.memoizedState;if(nr!==null){tr.pending=null;var ir=nr=nr.next;do sr=er(sr,ir.action),ir=ir.next;while(ir!==nr);He(sr,_e.memoizedState)||(dh=!0),_e.memoizedState=sr,_e.baseQueue===null&&(_e.baseState=sr),tr.lastRenderedState=sr}return[sr,rr]}function Yh(){}function Zh(er,_e){var tr=M$2,rr=Uh(),nr=_e(),sr=!He(rr.memoizedState,nr);if(sr&&(rr.memoizedState=nr,dh=!0),rr=rr.queue,$h(ai.bind(null,tr,rr,er),[er]),rr.getSnapshot!==_e||sr||O$2!==null&&O$2.memoizedState.tag&1){if(tr.flags|=2048,bi(9,ci.bind(null,tr,rr,nr,_e),void 0,null),Q$2===null)throw Error(p$1(349));Hh&30||di(tr,_e,nr)}return nr}function di(er,_e,tr){er.flags|=16384,er={getSnapshot:_e,value:tr},_e=M$2.updateQueue,_e===null?(_e={lastEffect:null,stores:null},M$2.updateQueue=_e,_e.stores=[er]):(tr=_e.stores,tr===null?_e.stores=[er]:tr.push(er))}function ci(er,_e,tr,rr){_e.value=tr,_e.getSnapshot=rr,ei(_e)&&fi(er)}function ai(er,_e,tr){return tr(function(){ei(_e)&&fi(er)})}function ei(er){var _e=er.getSnapshot;er=er.value;try{var tr=_e();return!He(er,tr)}catch{return!0}}function fi(er){var _e=ih(er,1);_e!==null&&gi(_e,er,1,-1)}function hi(er){var _e=Th();return typeof er=="function"&&(er=er()),_e.memoizedState=_e.baseState=er,er={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:er},_e.queue=er,er=er.dispatch=ii.bind(null,M$2,er),[_e.memoizedState,er]}function bi(er,_e,tr,rr){return er={tag:er,create:_e,destroy:tr,deps:rr,next:null},_e=M$2.updateQueue,_e===null?(_e={lastEffect:null,stores:null},M$2.updateQueue=_e,_e.lastEffect=er.next=er):(tr=_e.lastEffect,tr===null?_e.lastEffect=er.next=er:(rr=tr.next,tr.next=er,er.next=rr,_e.lastEffect=er)),er}function ji(){return Uh().memoizedState}function ki(er,_e,tr,rr){var nr=Th();M$2.flags|=er,nr.memoizedState=bi(1|_e,tr,void 0,rr===void 0?null:rr)}function li(er,_e,tr,rr){var nr=Uh();rr=rr===void 0?null:rr;var sr=void 0;if(N$2!==null){var ir=N$2.memoizedState;if(sr=ir.destroy,rr!==null&&Mh(rr,ir.deps)){nr.memoizedState=bi(_e,tr,sr,rr);return}}M$2.flags|=er,nr.memoizedState=bi(1|_e,tr,sr,rr)}function mi(er,_e){return ki(8390656,8,er,_e)}function $h(er,_e){return li(2048,8,er,_e)}function ni(er,_e){return li(4,2,er,_e)}function oi(er,_e){return li(4,4,er,_e)}function pi(er,_e){if(typeof _e=="function")return er=er(),_e(er),function(){_e(null)};if(_e!=null)return er=er(),_e.current=er,function(){_e.current=null}}function qi(er,_e,tr){return tr=tr!=null?tr.concat([er]):null,li(4,4,pi.bind(null,_e,er),tr)}function ri(){}function si(er,_e){var tr=Uh();_e=_e===void 0?null:_e;var rr=tr.memoizedState;return rr!==null&&_e!==null&&Mh(_e,rr[1])?rr[0]:(tr.memoizedState=[er,_e],er)}function ti(er,_e){var tr=Uh();_e=_e===void 0?null:_e;var rr=tr.memoizedState;return rr!==null&&_e!==null&&Mh(_e,rr[1])?rr[0]:(er=er(),tr.memoizedState=[er,_e],er)}function ui(er,_e,tr){return Hh&21?(He(tr,_e)||(tr=yc(),M$2.lanes|=tr,rh|=tr,er.baseState=!0),_e):(er.baseState&&(er.baseState=!1,dh=!0),er.memoizedState=tr)}function vi(er,_e){var tr=C$1;C$1=tr!==0&&4>tr?tr:4,er(!0);var rr=Gh.transition;Gh.transition={};try{er(!1),_e()}finally{C$1=tr,Gh.transition=rr}}function wi(){return Uh().memoizedState}function xi(er,_e,tr){var rr=yi(er);if(tr={lane:rr,action:tr,hasEagerState:!1,eagerState:null,next:null},zi(er))Ai(_e,tr);else if(tr=hh(er,_e,tr,rr),tr!==null){var nr=R$1();gi(tr,er,rr,nr),Bi(tr,_e,rr)}}function ii(er,_e,tr){var rr=yi(er),nr={lane:rr,action:tr,hasEagerState:!1,eagerState:null,next:null};if(zi(er))Ai(_e,nr);else{var sr=er.alternate;if(er.lanes===0&&(sr===null||sr.lanes===0)&&(sr=_e.lastRenderedReducer,sr!==null))try{var ir=_e.lastRenderedState,or=sr(ir,tr);if(nr.hasEagerState=!0,nr.eagerState=or,He(or,ir)){var ar=_e.interleaved;ar===null?(nr.next=nr,gh(_e)):(nr.next=ar.next,ar.next=nr),_e.interleaved=nr;return}}catch{}finally{}tr=hh(er,_e,nr,rr),tr!==null&&(nr=R$1(),gi(tr,er,rr,nr),Bi(tr,_e,rr))}}function zi(er){var _e=er.alternate;return er===M$2||_e!==null&&_e===M$2}function Ai(er,_e){Jh=Ih=!0;var tr=er.pending;tr===null?_e.next=_e:(_e.next=tr.next,tr.next=_e),er.pending=_e}function Bi(er,_e,tr){if(tr&4194240){var rr=_e.lanes;rr&=er.pendingLanes,tr|=rr,_e.lanes=tr,Cc(er,tr)}}var Rh={readContext:eh,useCallback:P$2,useContext:P$2,useEffect:P$2,useImperativeHandle:P$2,useInsertionEffect:P$2,useLayoutEffect:P$2,useMemo:P$2,useReducer:P$2,useRef:P$2,useState:P$2,useDebugValue:P$2,useDeferredValue:P$2,useTransition:P$2,useMutableSource:P$2,useSyncExternalStore:P$2,useId:P$2,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(er,_e){return Th().memoizedState=[er,_e===void 0?null:_e],er},useContext:eh,useEffect:mi,useImperativeHandle:function(er,_e,tr){return tr=tr!=null?tr.concat([er]):null,ki(4194308,4,pi.bind(null,_e,er),tr)},useLayoutEffect:function(er,_e){return ki(4194308,4,er,_e)},useInsertionEffect:function(er,_e){return ki(4,2,er,_e)},useMemo:function(er,_e){var tr=Th();return _e=_e===void 0?null:_e,er=er(),tr.memoizedState=[er,_e],er},useReducer:function(er,_e,tr){var rr=Th();return _e=tr!==void 0?tr(_e):_e,rr.memoizedState=rr.baseState=_e,er={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:_e},rr.queue=er,er=er.dispatch=xi.bind(null,M$2,er),[rr.memoizedState,er]},useRef:function(er){var _e=Th();return er={current:er},_e.memoizedState=er},useState:hi,useDebugValue:ri,useDeferredValue:function(er){return Th().memoizedState=er},useTransition:function(){var er=hi(!1),_e=er[0];return er=vi.bind(null,er[1]),Th().memoizedState=er,[_e,er]},useMutableSource:function(){},useSyncExternalStore:function(er,_e,tr){var rr=M$2,nr=Th();if(I$1){if(tr===void 0)throw Error(p$1(407));tr=tr()}else{if(tr=_e(),Q$2===null)throw Error(p$1(349));Hh&30||di(rr,_e,tr)}nr.memoizedState=tr;var sr={value:tr,getSnapshot:_e};return nr.queue=sr,mi(ai.bind(null,rr,sr,er),[er]),rr.flags|=2048,bi(9,ci.bind(null,rr,sr,tr,_e),void 0,null),tr},useId:function(){var er=Th(),_e=Q$2.identifierPrefix;if(I$1){var tr=sg,rr=rg;tr=(rr&~(1<<32-oc(rr)-1)).toString(32)+tr,_e=":"+_e+"R"+tr,tr=Kh++,0<tr&&(_e+="H"+tr.toString(32)),_e+=":"}else tr=Lh++,_e=":"+_e+"r"+tr.toString(32)+":";return er.memoizedState=_e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(er){var _e=Uh();return ui(_e,N$2.memoizedState,er)},useTransition:function(){var er=Wh(Vh)[0],_e=Uh().memoizedState;return[er,_e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(er){var _e=Uh();return N$2===null?_e.memoizedState=er:ui(_e,N$2.memoizedState,er)},useTransition:function(){var er=Xh(Vh)[0],_e=Uh().memoizedState;return[er,_e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(er,_e){if(er&&er.defaultProps){_e=A$2({},_e),er=er.defaultProps;for(var tr in er)_e[tr]===void 0&&(_e[tr]=er[tr]);return _e}return _e}function Di(er,_e,tr,rr){_e=er.memoizedState,tr=tr(rr,_e),tr=tr==null?_e:A$2({},_e,tr),er.memoizedState=tr,er.lanes===0&&(er.updateQueue.baseState=tr)}var Ei={isMounted:function(er){return(er=er._reactInternals)?Vb(er)===er:!1},enqueueSetState:function(er,_e,tr){er=er._reactInternals;var rr=R$1(),nr=yi(er),sr=mh(rr,nr);sr.payload=_e,tr!=null&&(sr.callback=tr),_e=nh(er,sr,nr),_e!==null&&(gi(_e,er,nr,rr),oh(_e,er,nr))},enqueueReplaceState:function(er,_e,tr){er=er._reactInternals;var rr=R$1(),nr=yi(er),sr=mh(rr,nr);sr.tag=1,sr.payload=_e,tr!=null&&(sr.callback=tr),_e=nh(er,sr,nr),_e!==null&&(gi(_e,er,nr,rr),oh(_e,er,nr))},enqueueForceUpdate:function(er,_e){er=er._reactInternals;var tr=R$1(),rr=yi(er),nr=mh(tr,rr);nr.tag=2,_e!=null&&(nr.callback=_e),_e=nh(er,nr,rr),_e!==null&&(gi(_e,er,rr,tr),oh(_e,er,rr))}};function Fi(er,_e,tr,rr,nr,sr,ir){return er=er.stateNode,typeof er.shouldComponentUpdate=="function"?er.shouldComponentUpdate(rr,sr,ir):_e.prototype&&_e.prototype.isPureReactComponent?!Ie(tr,rr)||!Ie(nr,sr):!0}function Gi(er,_e,tr){var rr=!1,nr=Vf,sr=_e.contextType;return typeof sr=="object"&&sr!==null?sr=eh(sr):(nr=Zf(_e)?Xf:H$1.current,rr=_e.contextTypes,sr=(rr=rr!=null)?Yf(er,nr):Vf),_e=new _e(tr,sr),er.memoizedState=_e.state!==null&&_e.state!==void 0?_e.state:null,_e.updater=Ei,er.stateNode=_e,_e._reactInternals=er,rr&&(er=er.stateNode,er.__reactInternalMemoizedUnmaskedChildContext=nr,er.__reactInternalMemoizedMaskedChildContext=sr),_e}function Hi(er,_e,tr,rr){er=_e.state,typeof _e.componentWillReceiveProps=="function"&&_e.componentWillReceiveProps(tr,rr),typeof _e.UNSAFE_componentWillReceiveProps=="function"&&_e.UNSAFE_componentWillReceiveProps(tr,rr),_e.state!==er&&Ei.enqueueReplaceState(_e,_e.state,null)}function Ii(er,_e,tr,rr){var nr=er.stateNode;nr.props=tr,nr.state=er.memoizedState,nr.refs={},kh(er);var sr=_e.contextType;typeof sr=="object"&&sr!==null?nr.context=eh(sr):(sr=Zf(_e)?Xf:H$1.current,nr.context=Yf(er,sr)),nr.state=er.memoizedState,sr=_e.getDerivedStateFromProps,typeof sr=="function"&&(Di(er,_e,sr,tr),nr.state=er.memoizedState),typeof _e.getDerivedStateFromProps=="function"||typeof nr.getSnapshotBeforeUpdate=="function"||typeof nr.UNSAFE_componentWillMount!="function"&&typeof nr.componentWillMount!="function"||(_e=nr.state,typeof nr.componentWillMount=="function"&&nr.componentWillMount(),typeof nr.UNSAFE_componentWillMount=="function"&&nr.UNSAFE_componentWillMount(),_e!==nr.state&&Ei.enqueueReplaceState(nr,nr.state,null),qh(er,tr,nr,rr),nr.state=er.memoizedState),typeof nr.componentDidMount=="function"&&(er.flags|=4194308)}function Ji(er,_e){try{var tr="",rr=_e;do tr+=Pa(rr),rr=rr.return;while(rr);var nr=tr}catch(sr){nr=`
Error generating stack: `+sr.message+`
`+sr.stack}return{value:er,source:_e,stack:nr,digest:null}}function Ki(er,_e,tr){return{value:er,source:null,stack:tr??null,digest:_e??null}}function Li(er,_e){try{console.error(_e.value)}catch(tr){setTimeout(function(){throw tr})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(er,_e,tr){tr=mh(-1,tr),tr.tag=3,tr.payload={element:null};var rr=_e.value;return tr.callback=function(){Oi||(Oi=!0,Pi=rr),Li(er,_e)},tr}function Qi(er,_e,tr){tr=mh(-1,tr),tr.tag=3;var rr=er.type.getDerivedStateFromError;if(typeof rr=="function"){var nr=_e.value;tr.payload=function(){return rr(nr)},tr.callback=function(){Li(er,_e)}}var sr=er.stateNode;return sr!==null&&typeof sr.componentDidCatch=="function"&&(tr.callback=function(){Li(er,_e),typeof rr!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var ir=_e.stack;this.componentDidCatch(_e.value,{componentStack:ir!==null?ir:""})}),tr}function Si(er,_e,tr){var rr=er.pingCache;if(rr===null){rr=er.pingCache=new Mi;var nr=new Set;rr.set(_e,nr)}else nr=rr.get(_e),nr===void 0&&(nr=new Set,rr.set(_e,nr));nr.has(tr)||(nr.add(tr),er=Ti.bind(null,er,_e,tr),_e.then(er,er))}function Ui(er){do{var _e;if((_e=er.tag===13)&&(_e=er.memoizedState,_e=_e!==null?_e.dehydrated!==null:!0),_e)return er;er=er.return}while(er!==null);return null}function Vi(er,_e,tr,rr,nr){return er.mode&1?(er.flags|=65536,er.lanes=nr,er):(er===_e?er.flags|=65536:(er.flags|=128,tr.flags|=131072,tr.flags&=-52805,tr.tag===1&&(tr.alternate===null?tr.tag=17:(_e=mh(-1,1),_e.tag=2,nh(tr,_e,1))),tr.lanes|=1),er)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(er,_e,tr,rr){_e.child=er===null?Vg(_e,null,tr,rr):Ug(_e,er.child,tr,rr)}function Yi(er,_e,tr,rr,nr){tr=tr.render;var sr=_e.ref;return ch(_e,nr),rr=Nh(er,_e,tr,rr,sr,nr),tr=Sh(),er!==null&&!dh?(_e.updateQueue=er.updateQueue,_e.flags&=-2053,er.lanes&=~nr,Zi(er,_e,nr)):(I$1&&tr&&vg(_e),_e.flags|=1,Xi(er,_e,rr,nr),_e.child)}function $i(er,_e,tr,rr,nr){if(er===null){var sr=tr.type;return typeof sr=="function"&&!aj(sr)&&sr.defaultProps===void 0&&tr.compare===null&&tr.defaultProps===void 0?(_e.tag=15,_e.type=sr,bj(er,_e,sr,rr,nr)):(er=Rg(tr.type,null,rr,_e,_e.mode,nr),er.ref=_e.ref,er.return=_e,_e.child=er)}if(sr=er.child,!(er.lanes&nr)){var ir=sr.memoizedProps;if(tr=tr.compare,tr=tr!==null?tr:Ie,tr(ir,rr)&&er.ref===_e.ref)return Zi(er,_e,nr)}return _e.flags|=1,er=Pg(sr,rr),er.ref=_e.ref,er.return=_e,_e.child=er}function bj(er,_e,tr,rr,nr){if(er!==null){var sr=er.memoizedProps;if(Ie(sr,rr)&&er.ref===_e.ref)if(dh=!1,_e.pendingProps=rr=sr,(er.lanes&nr)!==0)er.flags&131072&&(dh=!0);else return _e.lanes=er.lanes,Zi(er,_e,nr)}return cj(er,_e,tr,rr,nr)}function dj(er,_e,tr){var rr=_e.pendingProps,nr=rr.children,sr=er!==null?er.memoizedState:null;if(rr.mode==="hidden")if(!(_e.mode&1))_e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$2(ej,fj),fj|=tr;else{if(!(tr&1073741824))return er=sr!==null?sr.baseLanes|tr:tr,_e.lanes=_e.childLanes=1073741824,_e.memoizedState={baseLanes:er,cachePool:null,transitions:null},_e.updateQueue=null,G$2(ej,fj),fj|=er,null;_e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rr=sr!==null?sr.baseLanes:tr,G$2(ej,fj),fj|=rr}else sr!==null?(rr=sr.baseLanes|tr,_e.memoizedState=null):rr=tr,G$2(ej,fj),fj|=rr;return Xi(er,_e,nr,tr),_e.child}function gj(er,_e){var tr=_e.ref;(er===null&&tr!==null||er!==null&&er.ref!==tr)&&(_e.flags|=512,_e.flags|=2097152)}function cj(er,_e,tr,rr,nr){var sr=Zf(tr)?Xf:H$1.current;return sr=Yf(_e,sr),ch(_e,nr),tr=Nh(er,_e,tr,rr,sr,nr),rr=Sh(),er!==null&&!dh?(_e.updateQueue=er.updateQueue,_e.flags&=-2053,er.lanes&=~nr,Zi(er,_e,nr)):(I$1&&rr&&vg(_e),_e.flags|=1,Xi(er,_e,tr,nr),_e.child)}function hj(er,_e,tr,rr,nr){if(Zf(tr)){var sr=!0;cg(_e)}else sr=!1;if(ch(_e,nr),_e.stateNode===null)ij(er,_e),Gi(_e,tr,rr),Ii(_e,tr,rr,nr),rr=!0;else if(er===null){var ir=_e.stateNode,or=_e.memoizedProps;ir.props=or;var ar=ir.context,lr=tr.contextType;typeof lr=="object"&&lr!==null?lr=eh(lr):(lr=Zf(tr)?Xf:H$1.current,lr=Yf(_e,lr));var cr=tr.getDerivedStateFromProps,Ar=typeof cr=="function"||typeof ir.getSnapshotBeforeUpdate=="function";Ar||typeof ir.UNSAFE_componentWillReceiveProps!="function"&&typeof ir.componentWillReceiveProps!="function"||(or!==rr||ar!==lr)&&Hi(_e,ir,rr,lr),jh=!1;var ur=_e.memoizedState;ir.state=ur,qh(_e,rr,ir,nr),ar=_e.memoizedState,or!==rr||ur!==ar||Wf.current||jh?(typeof cr=="function"&&(Di(_e,tr,cr,rr),ar=_e.memoizedState),(or=jh||Fi(_e,tr,or,rr,ur,ar,lr))?(Ar||typeof ir.UNSAFE_componentWillMount!="function"&&typeof ir.componentWillMount!="function"||(typeof ir.componentWillMount=="function"&&ir.componentWillMount(),typeof ir.UNSAFE_componentWillMount=="function"&&ir.UNSAFE_componentWillMount()),typeof ir.componentDidMount=="function"&&(_e.flags|=4194308)):(typeof ir.componentDidMount=="function"&&(_e.flags|=4194308),_e.memoizedProps=rr,_e.memoizedState=ar),ir.props=rr,ir.state=ar,ir.context=lr,rr=or):(typeof ir.componentDidMount=="function"&&(_e.flags|=4194308),rr=!1)}else{ir=_e.stateNode,lh(er,_e),or=_e.memoizedProps,lr=_e.type===_e.elementType?or:Ci(_e.type,or),ir.props=lr,Ar=_e.pendingProps,ur=ir.context,ar=tr.contextType,typeof ar=="object"&&ar!==null?ar=eh(ar):(ar=Zf(tr)?Xf:H$1.current,ar=Yf(_e,ar));var dr=tr.getDerivedStateFromProps;(cr=typeof dr=="function"||typeof ir.getSnapshotBeforeUpdate=="function")||typeof ir.UNSAFE_componentWillReceiveProps!="function"&&typeof ir.componentWillReceiveProps!="function"||(or!==Ar||ur!==ar)&&Hi(_e,ir,rr,ar),jh=!1,ur=_e.memoizedState,ir.state=ur,qh(_e,rr,ir,nr);var mr=_e.memoizedState;or!==Ar||ur!==mr||Wf.current||jh?(typeof dr=="function"&&(Di(_e,tr,dr,rr),mr=_e.memoizedState),(lr=jh||Fi(_e,tr,lr,rr,ur,mr,ar)||!1)?(cr||typeof ir.UNSAFE_componentWillUpdate!="function"&&typeof ir.componentWillUpdate!="function"||(typeof ir.componentWillUpdate=="function"&&ir.componentWillUpdate(rr,mr,ar),typeof ir.UNSAFE_componentWillUpdate=="function"&&ir.UNSAFE_componentWillUpdate(rr,mr,ar)),typeof ir.componentDidUpdate=="function"&&(_e.flags|=4),typeof ir.getSnapshotBeforeUpdate=="function"&&(_e.flags|=1024)):(typeof ir.componentDidUpdate!="function"||or===er.memoizedProps&&ur===er.memoizedState||(_e.flags|=4),typeof ir.getSnapshotBeforeUpdate!="function"||or===er.memoizedProps&&ur===er.memoizedState||(_e.flags|=1024),_e.memoizedProps=rr,_e.memoizedState=mr),ir.props=rr,ir.state=mr,ir.context=ar,rr=lr):(typeof ir.componentDidUpdate!="function"||or===er.memoizedProps&&ur===er.memoizedState||(_e.flags|=4),typeof ir.getSnapshotBeforeUpdate!="function"||or===er.memoizedProps&&ur===er.memoizedState||(_e.flags|=1024),rr=!1)}return jj(er,_e,tr,rr,sr,nr)}function jj(er,_e,tr,rr,nr,sr){gj(er,_e);var ir=(_e.flags&128)!==0;if(!rr&&!ir)return nr&&dg(_e,tr,!1),Zi(er,_e,sr);rr=_e.stateNode,Wi.current=_e;var or=ir&&typeof tr.getDerivedStateFromError!="function"?null:rr.render();return _e.flags|=1,er!==null&&ir?(_e.child=Ug(_e,er.child,null,sr),_e.child=Ug(_e,null,or,sr)):Xi(er,_e,or,sr),_e.memoizedState=rr.state,nr&&dg(_e,tr,!0),_e.child}function kj(er){var _e=er.stateNode;_e.pendingContext?ag(er,_e.pendingContext,_e.pendingContext!==_e.context):_e.context&&ag(er,_e.context,!1),yh(er,_e.containerInfo)}function lj(er,_e,tr,rr,nr){return Ig(),Jg(nr),_e.flags|=256,Xi(er,_e,tr,rr),_e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(er){return{baseLanes:er,cachePool:null,transitions:null}}function oj(er,_e,tr){var rr=_e.pendingProps,nr=L$4.current,sr=!1,ir=(_e.flags&128)!==0,or;if((or=ir)||(or=er!==null&&er.memoizedState===null?!1:(nr&2)!==0),or?(sr=!0,_e.flags&=-129):(er===null||er.memoizedState!==null)&&(nr|=1),G$2(L$4,nr&1),er===null)return Eg(_e),er=_e.memoizedState,er!==null&&(er=er.dehydrated,er!==null)?(_e.mode&1?er.data==="$!"?_e.lanes=8:_e.lanes=1073741824:_e.lanes=1,null):(ir=rr.children,er=rr.fallback,sr?(rr=_e.mode,sr=_e.child,ir={mode:"hidden",children:ir},!(rr&1)&&sr!==null?(sr.childLanes=0,sr.pendingProps=ir):sr=pj(ir,rr,0,null),er=Tg(er,rr,tr,null),sr.return=_e,er.return=_e,sr.sibling=er,_e.child=sr,_e.child.memoizedState=nj(tr),_e.memoizedState=mj,er):qj(_e,ir));if(nr=er.memoizedState,nr!==null&&(or=nr.dehydrated,or!==null))return rj(er,_e,ir,rr,or,nr,tr);if(sr){sr=rr.fallback,ir=_e.mode,nr=er.child,or=nr.sibling;var ar={mode:"hidden",children:rr.children};return!(ir&1)&&_e.child!==nr?(rr=_e.child,rr.childLanes=0,rr.pendingProps=ar,_e.deletions=null):(rr=Pg(nr,ar),rr.subtreeFlags=nr.subtreeFlags&14680064),or!==null?sr=Pg(or,sr):(sr=Tg(sr,ir,tr,null),sr.flags|=2),sr.return=_e,rr.return=_e,rr.sibling=sr,_e.child=rr,rr=sr,sr=_e.child,ir=er.child.memoizedState,ir=ir===null?nj(tr):{baseLanes:ir.baseLanes|tr,cachePool:null,transitions:ir.transitions},sr.memoizedState=ir,sr.childLanes=er.childLanes&~tr,_e.memoizedState=mj,rr}return sr=er.child,er=sr.sibling,rr=Pg(sr,{mode:"visible",children:rr.children}),!(_e.mode&1)&&(rr.lanes=tr),rr.return=_e,rr.sibling=null,er!==null&&(tr=_e.deletions,tr===null?(_e.deletions=[er],_e.flags|=16):tr.push(er)),_e.child=rr,_e.memoizedState=null,rr}function qj(er,_e){return _e=pj({mode:"visible",children:_e},er.mode,0,null),_e.return=er,er.child=_e}function sj(er,_e,tr,rr){return rr!==null&&Jg(rr),Ug(_e,er.child,null,tr),er=qj(_e,_e.pendingProps.children),er.flags|=2,_e.memoizedState=null,er}function rj(er,_e,tr,rr,nr,sr,ir){if(tr)return _e.flags&256?(_e.flags&=-257,rr=Ki(Error(p$1(422))),sj(er,_e,ir,rr)):_e.memoizedState!==null?(_e.child=er.child,_e.flags|=128,null):(sr=rr.fallback,nr=_e.mode,rr=pj({mode:"visible",children:rr.children},nr,0,null),sr=Tg(sr,nr,ir,null),sr.flags|=2,rr.return=_e,sr.return=_e,rr.sibling=sr,_e.child=rr,_e.mode&1&&Ug(_e,er.child,null,ir),_e.child.memoizedState=nj(ir),_e.memoizedState=mj,sr);if(!(_e.mode&1))return sj(er,_e,ir,null);if(nr.data==="$!"){if(rr=nr.nextSibling&&nr.nextSibling.dataset,rr)var or=rr.dgst;return rr=or,sr=Error(p$1(419)),rr=Ki(sr,rr,void 0),sj(er,_e,ir,rr)}if(or=(ir&er.childLanes)!==0,dh||or){if(rr=Q$2,rr!==null){switch(ir&-ir){case 4:nr=2;break;case 16:nr=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:nr=32;break;case 536870912:nr=268435456;break;default:nr=0}nr=nr&(rr.suspendedLanes|ir)?0:nr,nr!==0&&nr!==sr.retryLane&&(sr.retryLane=nr,ih(er,nr),gi(rr,er,nr,-1))}return tj(),rr=Ki(Error(p$1(421))),sj(er,_e,ir,rr)}return nr.data==="$?"?(_e.flags|=128,_e.child=er.child,_e=uj.bind(null,er),nr._reactRetry=_e,null):(er=sr.treeContext,yg=Lf(nr.nextSibling),xg=_e,I$1=!0,zg=null,er!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=er.id,sg=er.overflow,qg=_e),_e=qj(_e,rr.children),_e.flags|=4096,_e)}function vj(er,_e,tr){er.lanes|=_e;var rr=er.alternate;rr!==null&&(rr.lanes|=_e),bh(er.return,_e,tr)}function wj(er,_e,tr,rr,nr){var sr=er.memoizedState;sr===null?er.memoizedState={isBackwards:_e,rendering:null,renderingStartTime:0,last:rr,tail:tr,tailMode:nr}:(sr.isBackwards=_e,sr.rendering=null,sr.renderingStartTime=0,sr.last=rr,sr.tail=tr,sr.tailMode=nr)}function xj(er,_e,tr){var rr=_e.pendingProps,nr=rr.revealOrder,sr=rr.tail;if(Xi(er,_e,rr.children,tr),rr=L$4.current,rr&2)rr=rr&1|2,_e.flags|=128;else{if(er!==null&&er.flags&128)e:for(er=_e.child;er!==null;){if(er.tag===13)er.memoizedState!==null&&vj(er,tr,_e);else if(er.tag===19)vj(er,tr,_e);else if(er.child!==null){er.child.return=er,er=er.child;continue}if(er===_e)break e;for(;er.sibling===null;){if(er.return===null||er.return===_e)break e;er=er.return}er.sibling.return=er.return,er=er.sibling}rr&=1}if(G$2(L$4,rr),!(_e.mode&1))_e.memoizedState=null;else switch(nr){case"forwards":for(tr=_e.child,nr=null;tr!==null;)er=tr.alternate,er!==null&&Ch(er)===null&&(nr=tr),tr=tr.sibling;tr=nr,tr===null?(nr=_e.child,_e.child=null):(nr=tr.sibling,tr.sibling=null),wj(_e,!1,nr,tr,sr);break;case"backwards":for(tr=null,nr=_e.child,_e.child=null;nr!==null;){if(er=nr.alternate,er!==null&&Ch(er)===null){_e.child=nr;break}er=nr.sibling,nr.sibling=tr,tr=nr,nr=er}wj(_e,!0,tr,null,sr);break;case"together":wj(_e,!1,null,null,void 0);break;default:_e.memoizedState=null}return _e.child}function ij(er,_e){!(_e.mode&1)&&er!==null&&(er.alternate=null,_e.alternate=null,_e.flags|=2)}function Zi(er,_e,tr){if(er!==null&&(_e.dependencies=er.dependencies),rh|=_e.lanes,!(tr&_e.childLanes))return null;if(er!==null&&_e.child!==er.child)throw Error(p$1(153));if(_e.child!==null){for(er=_e.child,tr=Pg(er,er.pendingProps),_e.child=tr,tr.return=_e;er.sibling!==null;)er=er.sibling,tr=tr.sibling=Pg(er,er.pendingProps),tr.return=_e;tr.sibling=null}return _e.child}function yj(er,_e,tr){switch(_e.tag){case 3:kj(_e),Ig();break;case 5:Ah(_e);break;case 1:Zf(_e.type)&&cg(_e);break;case 4:yh(_e,_e.stateNode.containerInfo);break;case 10:var rr=_e.type._context,nr=_e.memoizedProps.value;G$2(Wg,rr._currentValue),rr._currentValue=nr;break;case 13:if(rr=_e.memoizedState,rr!==null)return rr.dehydrated!==null?(G$2(L$4,L$4.current&1),_e.flags|=128,null):tr&_e.child.childLanes?oj(er,_e,tr):(G$2(L$4,L$4.current&1),er=Zi(er,_e,tr),er!==null?er.sibling:null);G$2(L$4,L$4.current&1);break;case 19:if(rr=(tr&_e.childLanes)!==0,er.flags&128){if(rr)return xj(er,_e,tr);_e.flags|=128}if(nr=_e.memoizedState,nr!==null&&(nr.rendering=null,nr.tail=null,nr.lastEffect=null),G$2(L$4,L$4.current),rr)break;return null;case 22:case 23:return _e.lanes=0,dj(er,_e,tr)}return Zi(er,_e,tr)}var zj,Aj,Bj,Cj;zj=function(er,_e){for(var tr=_e.child;tr!==null;){if(tr.tag===5||tr.tag===6)er.appendChild(tr.stateNode);else if(tr.tag!==4&&tr.child!==null){tr.child.return=tr,tr=tr.child;continue}if(tr===_e)break;for(;tr.sibling===null;){if(tr.return===null||tr.return===_e)return;tr=tr.return}tr.sibling.return=tr.return,tr=tr.sibling}};Aj=function(){};Bj=function(er,_e,tr,rr){var nr=er.memoizedProps;if(nr!==rr){er=_e.stateNode,xh(uh.current);var sr=null;switch(tr){case"input":nr=Ya(er,nr),rr=Ya(er,rr),sr=[];break;case"select":nr=A$2({},nr,{value:void 0}),rr=A$2({},rr,{value:void 0}),sr=[];break;case"textarea":nr=gb(er,nr),rr=gb(er,rr),sr=[];break;default:typeof nr.onClick!="function"&&typeof rr.onClick=="function"&&(er.onclick=Bf)}ub(tr,rr);var ir;tr=null;for(lr in nr)if(!rr.hasOwnProperty(lr)&&nr.hasOwnProperty(lr)&&nr[lr]!=null)if(lr==="style"){var or=nr[lr];for(ir in or)or.hasOwnProperty(ir)&&(tr||(tr={}),tr[ir]="")}else lr!=="dangerouslySetInnerHTML"&&lr!=="children"&&lr!=="suppressContentEditableWarning"&&lr!=="suppressHydrationWarning"&&lr!=="autoFocus"&&(ea.hasOwnProperty(lr)?sr||(sr=[]):(sr=sr||[]).push(lr,null));for(lr in rr){var ar=rr[lr];if(or=nr!=null?nr[lr]:void 0,rr.hasOwnProperty(lr)&&ar!==or&&(ar!=null||or!=null))if(lr==="style")if(or){for(ir in or)!or.hasOwnProperty(ir)||ar&&ar.hasOwnProperty(ir)||(tr||(tr={}),tr[ir]="");for(ir in ar)ar.hasOwnProperty(ir)&&or[ir]!==ar[ir]&&(tr||(tr={}),tr[ir]=ar[ir])}else tr||(sr||(sr=[]),sr.push(lr,tr)),tr=ar;else lr==="dangerouslySetInnerHTML"?(ar=ar?ar.__html:void 0,or=or?or.__html:void 0,ar!=null&&or!==ar&&(sr=sr||[]).push(lr,ar)):lr==="children"?typeof ar!="string"&&typeof ar!="number"||(sr=sr||[]).push(lr,""+ar):lr!=="suppressContentEditableWarning"&&lr!=="suppressHydrationWarning"&&(ea.hasOwnProperty(lr)?(ar!=null&&lr==="onScroll"&&D$2("scroll",er),sr||or===ar||(sr=[])):(sr=sr||[]).push(lr,ar))}tr&&(sr=sr||[]).push("style",tr);var lr=sr;(_e.updateQueue=lr)&&(_e.flags|=4)}};Cj=function(er,_e,tr,rr){tr!==rr&&(_e.flags|=4)};function Dj(er,_e){if(!I$1)switch(er.tailMode){case"hidden":_e=er.tail;for(var tr=null;_e!==null;)_e.alternate!==null&&(tr=_e),_e=_e.sibling;tr===null?er.tail=null:tr.sibling=null;break;case"collapsed":tr=er.tail;for(var rr=null;tr!==null;)tr.alternate!==null&&(rr=tr),tr=tr.sibling;rr===null?_e||er.tail===null?er.tail=null:er.tail.sibling=null:rr.sibling=null}}function S$1(er){var _e=er.alternate!==null&&er.alternate.child===er.child,tr=0,rr=0;if(_e)for(var nr=er.child;nr!==null;)tr|=nr.lanes|nr.childLanes,rr|=nr.subtreeFlags&14680064,rr|=nr.flags&14680064,nr.return=er,nr=nr.sibling;else for(nr=er.child;nr!==null;)tr|=nr.lanes|nr.childLanes,rr|=nr.subtreeFlags,rr|=nr.flags,nr.return=er,nr=nr.sibling;return er.subtreeFlags|=rr,er.childLanes=tr,_e}function Ej(er,_e,tr){var rr=_e.pendingProps;switch(wg(_e),_e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(_e),null;case 1:return Zf(_e.type)&&$f(),S$1(_e),null;case 3:return rr=_e.stateNode,zh(),E$3(Wf),E$3(H$1),Eh(),rr.pendingContext&&(rr.context=rr.pendingContext,rr.pendingContext=null),(er===null||er.child===null)&&(Gg(_e)?_e.flags|=4:er===null||er.memoizedState.isDehydrated&&!(_e.flags&256)||(_e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(er,_e),S$1(_e),null;case 5:Bh(_e);var nr=xh(wh.current);if(tr=_e.type,er!==null&&_e.stateNode!=null)Bj(er,_e,tr,rr,nr),er.ref!==_e.ref&&(_e.flags|=512,_e.flags|=2097152);else{if(!rr){if(_e.stateNode===null)throw Error(p$1(166));return S$1(_e),null}if(er=xh(uh.current),Gg(_e)){rr=_e.stateNode,tr=_e.type;var sr=_e.memoizedProps;switch(rr[Of]=_e,rr[Pf]=sr,er=(_e.mode&1)!==0,tr){case"dialog":D$2("cancel",rr),D$2("close",rr);break;case"iframe":case"object":case"embed":D$2("load",rr);break;case"video":case"audio":for(nr=0;nr<lf.length;nr++)D$2(lf[nr],rr);break;case"source":D$2("error",rr);break;case"img":case"image":case"link":D$2("error",rr),D$2("load",rr);break;case"details":D$2("toggle",rr);break;case"input":Za(rr,sr),D$2("invalid",rr);break;case"select":rr._wrapperState={wasMultiple:!!sr.multiple},D$2("invalid",rr);break;case"textarea":hb(rr,sr),D$2("invalid",rr)}ub(tr,sr),nr=null;for(var ir in sr)if(sr.hasOwnProperty(ir)){var or=sr[ir];ir==="children"?typeof or=="string"?rr.textContent!==or&&(sr.suppressHydrationWarning!==!0&&Af(rr.textContent,or,er),nr=["children",or]):typeof or=="number"&&rr.textContent!==""+or&&(sr.suppressHydrationWarning!==!0&&Af(rr.textContent,or,er),nr=["children",""+or]):ea.hasOwnProperty(ir)&&or!=null&&ir==="onScroll"&&D$2("scroll",rr)}switch(tr){case"input":Va(rr),db$1(rr,sr,!0);break;case"textarea":Va(rr),jb(rr);break;case"select":case"option":break;default:typeof sr.onClick=="function"&&(rr.onclick=Bf)}rr=nr,_e.updateQueue=rr,rr!==null&&(_e.flags|=4)}else{ir=nr.nodeType===9?nr:nr.ownerDocument,er==="http://www.w3.org/1999/xhtml"&&(er=kb(tr)),er==="http://www.w3.org/1999/xhtml"?tr==="script"?(er=ir.createElement("div"),er.innerHTML="<script><\/script>",er=er.removeChild(er.firstChild)):typeof rr.is=="string"?er=ir.createElement(tr,{is:rr.is}):(er=ir.createElement(tr),tr==="select"&&(ir=er,rr.multiple?ir.multiple=!0:rr.size&&(ir.size=rr.size))):er=ir.createElementNS(er,tr),er[Of]=_e,er[Pf]=rr,zj(er,_e,!1,!1),_e.stateNode=er;e:{switch(ir=vb(tr,rr),tr){case"dialog":D$2("cancel",er),D$2("close",er),nr=rr;break;case"iframe":case"object":case"embed":D$2("load",er),nr=rr;break;case"video":case"audio":for(nr=0;nr<lf.length;nr++)D$2(lf[nr],er);nr=rr;break;case"source":D$2("error",er),nr=rr;break;case"img":case"image":case"link":D$2("error",er),D$2("load",er),nr=rr;break;case"details":D$2("toggle",er),nr=rr;break;case"input":Za(er,rr),nr=Ya(er,rr),D$2("invalid",er);break;case"option":nr=rr;break;case"select":er._wrapperState={wasMultiple:!!rr.multiple},nr=A$2({},rr,{value:void 0}),D$2("invalid",er);break;case"textarea":hb(er,rr),nr=gb(er,rr),D$2("invalid",er);break;default:nr=rr}ub(tr,nr),or=nr;for(sr in or)if(or.hasOwnProperty(sr)){var ar=or[sr];sr==="style"?sb(er,ar):sr==="dangerouslySetInnerHTML"?(ar=ar?ar.__html:void 0,ar!=null&&nb(er,ar)):sr==="children"?typeof ar=="string"?(tr!=="textarea"||ar!=="")&&ob(er,ar):typeof ar=="number"&&ob(er,""+ar):sr!=="suppressContentEditableWarning"&&sr!=="suppressHydrationWarning"&&sr!=="autoFocus"&&(ea.hasOwnProperty(sr)?ar!=null&&sr==="onScroll"&&D$2("scroll",er):ar!=null&&ta(er,sr,ar,ir))}switch(tr){case"input":Va(er),db$1(er,rr,!1);break;case"textarea":Va(er),jb(er);break;case"option":rr.value!=null&&er.setAttribute("value",""+Sa(rr.value));break;case"select":er.multiple=!!rr.multiple,sr=rr.value,sr!=null?fb(er,!!rr.multiple,sr,!1):rr.defaultValue!=null&&fb(er,!!rr.multiple,rr.defaultValue,!0);break;default:typeof nr.onClick=="function"&&(er.onclick=Bf)}switch(tr){case"button":case"input":case"select":case"textarea":rr=!!rr.autoFocus;break e;case"img":rr=!0;break e;default:rr=!1}}rr&&(_e.flags|=4)}_e.ref!==null&&(_e.flags|=512,_e.flags|=2097152)}return S$1(_e),null;case 6:if(er&&_e.stateNode!=null)Cj(er,_e,er.memoizedProps,rr);else{if(typeof rr!="string"&&_e.stateNode===null)throw Error(p$1(166));if(tr=xh(wh.current),xh(uh.current),Gg(_e)){if(rr=_e.stateNode,tr=_e.memoizedProps,rr[Of]=_e,(sr=rr.nodeValue!==tr)&&(er=xg,er!==null))switch(er.tag){case 3:Af(rr.nodeValue,tr,(er.mode&1)!==0);break;case 5:er.memoizedProps.suppressHydrationWarning!==!0&&Af(rr.nodeValue,tr,(er.mode&1)!==0)}sr&&(_e.flags|=4)}else rr=(tr.nodeType===9?tr:tr.ownerDocument).createTextNode(rr),rr[Of]=_e,_e.stateNode=rr}return S$1(_e),null;case 13:if(E$3(L$4),rr=_e.memoizedState,er===null||er.memoizedState!==null&&er.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&_e.mode&1&&!(_e.flags&128))Hg(),Ig(),_e.flags|=98560,sr=!1;else if(sr=Gg(_e),rr!==null&&rr.dehydrated!==null){if(er===null){if(!sr)throw Error(p$1(318));if(sr=_e.memoizedState,sr=sr!==null?sr.dehydrated:null,!sr)throw Error(p$1(317));sr[Of]=_e}else Ig(),!(_e.flags&128)&&(_e.memoizedState=null),_e.flags|=4;S$1(_e),sr=!1}else zg!==null&&(Fj(zg),zg=null),sr=!0;if(!sr)return _e.flags&65536?_e:null}return _e.flags&128?(_e.lanes=tr,_e):(rr=rr!==null,rr!==(er!==null&&er.memoizedState!==null)&&rr&&(_e.child.flags|=8192,_e.mode&1&&(er===null||L$4.current&1?T$2===0&&(T$2=3):tj())),_e.updateQueue!==null&&(_e.flags|=4),S$1(_e),null);case 4:return zh(),Aj(er,_e),er===null&&sf(_e.stateNode.containerInfo),S$1(_e),null;case 10:return ah(_e.type._context),S$1(_e),null;case 17:return Zf(_e.type)&&$f(),S$1(_e),null;case 19:if(E$3(L$4),sr=_e.memoizedState,sr===null)return S$1(_e),null;if(rr=(_e.flags&128)!==0,ir=sr.rendering,ir===null)if(rr)Dj(sr,!1);else{if(T$2!==0||er!==null&&er.flags&128)for(er=_e.child;er!==null;){if(ir=Ch(er),ir!==null){for(_e.flags|=128,Dj(sr,!1),rr=ir.updateQueue,rr!==null&&(_e.updateQueue=rr,_e.flags|=4),_e.subtreeFlags=0,rr=tr,tr=_e.child;tr!==null;)sr=tr,er=rr,sr.flags&=14680066,ir=sr.alternate,ir===null?(sr.childLanes=0,sr.lanes=er,sr.child=null,sr.subtreeFlags=0,sr.memoizedProps=null,sr.memoizedState=null,sr.updateQueue=null,sr.dependencies=null,sr.stateNode=null):(sr.childLanes=ir.childLanes,sr.lanes=ir.lanes,sr.child=ir.child,sr.subtreeFlags=0,sr.deletions=null,sr.memoizedProps=ir.memoizedProps,sr.memoizedState=ir.memoizedState,sr.updateQueue=ir.updateQueue,sr.type=ir.type,er=ir.dependencies,sr.dependencies=er===null?null:{lanes:er.lanes,firstContext:er.firstContext}),tr=tr.sibling;return G$2(L$4,L$4.current&1|2),_e.child}er=er.sibling}sr.tail!==null&&B$2()>Gj&&(_e.flags|=128,rr=!0,Dj(sr,!1),_e.lanes=4194304)}else{if(!rr)if(er=Ch(ir),er!==null){if(_e.flags|=128,rr=!0,tr=er.updateQueue,tr!==null&&(_e.updateQueue=tr,_e.flags|=4),Dj(sr,!0),sr.tail===null&&sr.tailMode==="hidden"&&!ir.alternate&&!I$1)return S$1(_e),null}else 2*B$2()-sr.renderingStartTime>Gj&&tr!==1073741824&&(_e.flags|=128,rr=!0,Dj(sr,!1),_e.lanes=4194304);sr.isBackwards?(ir.sibling=_e.child,_e.child=ir):(tr=sr.last,tr!==null?tr.sibling=ir:_e.child=ir,sr.last=ir)}return sr.tail!==null?(_e=sr.tail,sr.rendering=_e,sr.tail=_e.sibling,sr.renderingStartTime=B$2(),_e.sibling=null,tr=L$4.current,G$2(L$4,rr?tr&1|2:tr&1),_e):(S$1(_e),null);case 22:case 23:return Hj(),rr=_e.memoizedState!==null,er!==null&&er.memoizedState!==null!==rr&&(_e.flags|=8192),rr&&_e.mode&1?fj&1073741824&&(S$1(_e),_e.subtreeFlags&6&&(_e.flags|=8192)):S$1(_e),null;case 24:return null;case 25:return null}throw Error(p$1(156,_e.tag))}function Ij(er,_e){switch(wg(_e),_e.tag){case 1:return Zf(_e.type)&&$f(),er=_e.flags,er&65536?(_e.flags=er&-65537|128,_e):null;case 3:return zh(),E$3(Wf),E$3(H$1),Eh(),er=_e.flags,er&65536&&!(er&128)?(_e.flags=er&-65537|128,_e):null;case 5:return Bh(_e),null;case 13:if(E$3(L$4),er=_e.memoizedState,er!==null&&er.dehydrated!==null){if(_e.alternate===null)throw Error(p$1(340));Ig()}return er=_e.flags,er&65536?(_e.flags=er&-65537|128,_e):null;case 19:return E$3(L$4),null;case 4:return zh(),null;case 10:return ah(_e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$3=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Lj(er,_e){var tr=er.ref;if(tr!==null)if(typeof tr=="function")try{tr(null)}catch(rr){W$1(er,_e,rr)}else tr.current=null}function Mj(er,_e,tr){try{tr()}catch(rr){W$1(er,_e,rr)}}var Nj=!1;function Oj(er,_e){if(Cf=dd,er=Me(),Ne$1(er)){if("selectionStart"in er)var tr={start:er.selectionStart,end:er.selectionEnd};else e:{tr=(tr=er.ownerDocument)&&tr.defaultView||window;var rr=tr.getSelection&&tr.getSelection();if(rr&&rr.rangeCount!==0){tr=rr.anchorNode;var nr=rr.anchorOffset,sr=rr.focusNode;rr=rr.focusOffset;try{tr.nodeType,sr.nodeType}catch{tr=null;break e}var ir=0,or=-1,ar=-1,lr=0,cr=0,Ar=er,ur=null;t:for(;;){for(var dr;Ar!==tr||nr!==0&&Ar.nodeType!==3||(or=ir+nr),Ar!==sr||rr!==0&&Ar.nodeType!==3||(ar=ir+rr),Ar.nodeType===3&&(ir+=Ar.nodeValue.length),(dr=Ar.firstChild)!==null;)ur=Ar,Ar=dr;for(;;){if(Ar===er)break t;if(ur===tr&&++lr===nr&&(or=ir),ur===sr&&++cr===rr&&(ar=ir),(dr=Ar.nextSibling)!==null)break;Ar=ur,ur=Ar.parentNode}Ar=dr}tr=or===-1||ar===-1?null:{start:or,end:ar}}else tr=null}tr=tr||{start:0,end:0}}else tr=null;for(Df={focusedElem:er,selectionRange:tr},dd=!1,V$2=_e;V$2!==null;)if(_e=V$2,er=_e.child,(_e.subtreeFlags&1028)!==0&&er!==null)er.return=_e,V$2=er;else for(;V$2!==null;){_e=V$2;try{var mr=_e.alternate;if(_e.flags&1024)switch(_e.tag){case 0:case 11:case 15:break;case 1:if(mr!==null){var pr=mr.memoizedProps,yr=mr.memoizedState,hr=_e.stateNode,gr=hr.getSnapshotBeforeUpdate(_e.elementType===_e.type?pr:Ci(_e.type,pr),yr);hr.__reactInternalSnapshotBeforeUpdate=gr}break;case 3:var Cr=_e.stateNode.containerInfo;Cr.nodeType===1?Cr.textContent="":Cr.nodeType===9&&Cr.documentElement&&Cr.removeChild(Cr.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(Tr){W$1(_e,_e.return,Tr)}if(er=_e.sibling,er!==null){er.return=_e.return,V$2=er;break}V$2=_e.return}return mr=Nj,Nj=!1,mr}function Pj(er,_e,tr){var rr=_e.updateQueue;if(rr=rr!==null?rr.lastEffect:null,rr!==null){var nr=rr=rr.next;do{if((nr.tag&er)===er){var sr=nr.destroy;nr.destroy=void 0,sr!==void 0&&Mj(_e,tr,sr)}nr=nr.next}while(nr!==rr)}}function Qj(er,_e){if(_e=_e.updateQueue,_e=_e!==null?_e.lastEffect:null,_e!==null){var tr=_e=_e.next;do{if((tr.tag&er)===er){var rr=tr.create;tr.destroy=rr()}tr=tr.next}while(tr!==_e)}}function Rj(er){var _e=er.ref;if(_e!==null){var tr=er.stateNode;switch(er.tag){case 5:er=tr;break;default:er=tr}typeof _e=="function"?_e(er):_e.current=er}}function Sj(er){var _e=er.alternate;_e!==null&&(er.alternate=null,Sj(_e)),er.child=null,er.deletions=null,er.sibling=null,er.tag===5&&(_e=er.stateNode,_e!==null&&(delete _e[Of],delete _e[Pf],delete _e[of],delete _e[Qf],delete _e[Rf])),er.stateNode=null,er.return=null,er.dependencies=null,er.memoizedProps=null,er.memoizedState=null,er.pendingProps=null,er.stateNode=null,er.updateQueue=null}function Tj(er){return er.tag===5||er.tag===3||er.tag===4}function Uj(er){e:for(;;){for(;er.sibling===null;){if(er.return===null||Tj(er.return))return null;er=er.return}for(er.sibling.return=er.return,er=er.sibling;er.tag!==5&&er.tag!==6&&er.tag!==18;){if(er.flags&2||er.child===null||er.tag===4)continue e;er.child.return=er,er=er.child}if(!(er.flags&2))return er.stateNode}}function Vj(er,_e,tr){var rr=er.tag;if(rr===5||rr===6)er=er.stateNode,_e?tr.nodeType===8?tr.parentNode.insertBefore(er,_e):tr.insertBefore(er,_e):(tr.nodeType===8?(_e=tr.parentNode,_e.insertBefore(er,tr)):(_e=tr,_e.appendChild(er)),tr=tr._reactRootContainer,tr!=null||_e.onclick!==null||(_e.onclick=Bf));else if(rr!==4&&(er=er.child,er!==null))for(Vj(er,_e,tr),er=er.sibling;er!==null;)Vj(er,_e,tr),er=er.sibling}function Wj(er,_e,tr){var rr=er.tag;if(rr===5||rr===6)er=er.stateNode,_e?tr.insertBefore(er,_e):tr.appendChild(er);else if(rr!==4&&(er=er.child,er!==null))for(Wj(er,_e,tr),er=er.sibling;er!==null;)Wj(er,_e,tr),er=er.sibling}var X$2=null,Xj=!1;function Yj(er,_e,tr){for(tr=tr.child;tr!==null;)Zj(er,_e,tr),tr=tr.sibling}function Zj(er,_e,tr){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc,tr)}catch{}switch(tr.tag){case 5:U$3||Lj(tr,_e);case 6:var rr=X$2,nr=Xj;X$2=null,Yj(er,_e,tr),X$2=rr,Xj=nr,X$2!==null&&(Xj?(er=X$2,tr=tr.stateNode,er.nodeType===8?er.parentNode.removeChild(tr):er.removeChild(tr)):X$2.removeChild(tr.stateNode));break;case 18:X$2!==null&&(Xj?(er=X$2,tr=tr.stateNode,er.nodeType===8?Kf(er.parentNode,tr):er.nodeType===1&&Kf(er,tr),bd(er)):Kf(X$2,tr.stateNode));break;case 4:rr=X$2,nr=Xj,X$2=tr.stateNode.containerInfo,Xj=!0,Yj(er,_e,tr),X$2=rr,Xj=nr;break;case 0:case 11:case 14:case 15:if(!U$3&&(rr=tr.updateQueue,rr!==null&&(rr=rr.lastEffect,rr!==null))){nr=rr=rr.next;do{var sr=nr,ir=sr.destroy;sr=sr.tag,ir!==void 0&&(sr&2||sr&4)&&Mj(tr,_e,ir),nr=nr.next}while(nr!==rr)}Yj(er,_e,tr);break;case 1:if(!U$3&&(Lj(tr,_e),rr=tr.stateNode,typeof rr.componentWillUnmount=="function"))try{rr.props=tr.memoizedProps,rr.state=tr.memoizedState,rr.componentWillUnmount()}catch(or){W$1(tr,_e,or)}Yj(er,_e,tr);break;case 21:Yj(er,_e,tr);break;case 22:tr.mode&1?(U$3=(rr=U$3)||tr.memoizedState!==null,Yj(er,_e,tr),U$3=rr):Yj(er,_e,tr);break;default:Yj(er,_e,tr)}}function ak(er){var _e=er.updateQueue;if(_e!==null){er.updateQueue=null;var tr=er.stateNode;tr===null&&(tr=er.stateNode=new Kj),_e.forEach(function(rr){var nr=bk.bind(null,er,rr);tr.has(rr)||(tr.add(rr),rr.then(nr,nr))})}}function ck(er,_e){var tr=_e.deletions;if(tr!==null)for(var rr=0;rr<tr.length;rr++){var nr=tr[rr];try{var sr=er,ir=_e,or=ir;e:for(;or!==null;){switch(or.tag){case 5:X$2=or.stateNode,Xj=!1;break e;case 3:X$2=or.stateNode.containerInfo,Xj=!0;break e;case 4:X$2=or.stateNode.containerInfo,Xj=!0;break e}or=or.return}if(X$2===null)throw Error(p$1(160));Zj(sr,ir,nr),X$2=null,Xj=!1;var ar=nr.alternate;ar!==null&&(ar.return=null),nr.return=null}catch(lr){W$1(nr,_e,lr)}}if(_e.subtreeFlags&12854)for(_e=_e.child;_e!==null;)dk(_e,er),_e=_e.sibling}function dk(er,_e){var tr=er.alternate,rr=er.flags;switch(er.tag){case 0:case 11:case 14:case 15:if(ck(_e,er),ek(er),rr&4){try{Pj(3,er,er.return),Qj(3,er)}catch(pr){W$1(er,er.return,pr)}try{Pj(5,er,er.return)}catch(pr){W$1(er,er.return,pr)}}break;case 1:ck(_e,er),ek(er),rr&512&&tr!==null&&Lj(tr,tr.return);break;case 5:if(ck(_e,er),ek(er),rr&512&&tr!==null&&Lj(tr,tr.return),er.flags&32){var nr=er.stateNode;try{ob(nr,"")}catch(pr){W$1(er,er.return,pr)}}if(rr&4&&(nr=er.stateNode,nr!=null)){var sr=er.memoizedProps,ir=tr!==null?tr.memoizedProps:sr,or=er.type,ar=er.updateQueue;if(er.updateQueue=null,ar!==null)try{or==="input"&&sr.type==="radio"&&sr.name!=null&&ab(nr,sr),vb(or,ir);var lr=vb(or,sr);for(ir=0;ir<ar.length;ir+=2){var cr=ar[ir],Ar=ar[ir+1];cr==="style"?sb(nr,Ar):cr==="dangerouslySetInnerHTML"?nb(nr,Ar):cr==="children"?ob(nr,Ar):ta(nr,cr,Ar,lr)}switch(or){case"input":bb(nr,sr);break;case"textarea":ib(nr,sr);break;case"select":var ur=nr._wrapperState.wasMultiple;nr._wrapperState.wasMultiple=!!sr.multiple;var dr=sr.value;dr!=null?fb(nr,!!sr.multiple,dr,!1):ur!==!!sr.multiple&&(sr.defaultValue!=null?fb(nr,!!sr.multiple,sr.defaultValue,!0):fb(nr,!!sr.multiple,sr.multiple?[]:"",!1))}nr[Pf]=sr}catch(pr){W$1(er,er.return,pr)}}break;case 6:if(ck(_e,er),ek(er),rr&4){if(er.stateNode===null)throw Error(p$1(162));nr=er.stateNode,sr=er.memoizedProps;try{nr.nodeValue=sr}catch(pr){W$1(er,er.return,pr)}}break;case 3:if(ck(_e,er),ek(er),rr&4&&tr!==null&&tr.memoizedState.isDehydrated)try{bd(_e.containerInfo)}catch(pr){W$1(er,er.return,pr)}break;case 4:ck(_e,er),ek(er);break;case 13:ck(_e,er),ek(er),nr=er.child,nr.flags&8192&&(sr=nr.memoizedState!==null,nr.stateNode.isHidden=sr,!sr||nr.alternate!==null&&nr.alternate.memoizedState!==null||(fk=B$2())),rr&4&&ak(er);break;case 22:if(cr=tr!==null&&tr.memoizedState!==null,er.mode&1?(U$3=(lr=U$3)||cr,ck(_e,er),U$3=lr):ck(_e,er),ek(er),rr&8192){if(lr=er.memoizedState!==null,(er.stateNode.isHidden=lr)&&!cr&&er.mode&1)for(V$2=er,cr=er.child;cr!==null;){for(Ar=V$2=cr;V$2!==null;){switch(ur=V$2,dr=ur.child,ur.tag){case 0:case 11:case 14:case 15:Pj(4,ur,ur.return);break;case 1:Lj(ur,ur.return);var mr=ur.stateNode;if(typeof mr.componentWillUnmount=="function"){rr=ur,tr=ur.return;try{_e=rr,mr.props=_e.memoizedProps,mr.state=_e.memoizedState,mr.componentWillUnmount()}catch(pr){W$1(rr,tr,pr)}}break;case 5:Lj(ur,ur.return);break;case 22:if(ur.memoizedState!==null){gk(Ar);continue}}dr!==null?(dr.return=ur,V$2=dr):gk(Ar)}cr=cr.sibling}e:for(cr=null,Ar=er;;){if(Ar.tag===5){if(cr===null){cr=Ar;try{nr=Ar.stateNode,lr?(sr=nr.style,typeof sr.setProperty=="function"?sr.setProperty("display","none","important"):sr.display="none"):(or=Ar.stateNode,ar=Ar.memoizedProps.style,ir=ar!=null&&ar.hasOwnProperty("display")?ar.display:null,or.style.display=rb("display",ir))}catch(pr){W$1(er,er.return,pr)}}}else if(Ar.tag===6){if(cr===null)try{Ar.stateNode.nodeValue=lr?"":Ar.memoizedProps}catch(pr){W$1(er,er.return,pr)}}else if((Ar.tag!==22&&Ar.tag!==23||Ar.memoizedState===null||Ar===er)&&Ar.child!==null){Ar.child.return=Ar,Ar=Ar.child;continue}if(Ar===er)break e;for(;Ar.sibling===null;){if(Ar.return===null||Ar.return===er)break e;cr===Ar&&(cr=null),Ar=Ar.return}cr===Ar&&(cr=null),Ar.sibling.return=Ar.return,Ar=Ar.sibling}}break;case 19:ck(_e,er),ek(er),rr&4&&ak(er);break;case 21:break;default:ck(_e,er),ek(er)}}function ek(er){var _e=er.flags;if(_e&2){try{e:{for(var tr=er.return;tr!==null;){if(Tj(tr)){var rr=tr;break e}tr=tr.return}throw Error(p$1(160))}switch(rr.tag){case 5:var nr=rr.stateNode;rr.flags&32&&(ob(nr,""),rr.flags&=-33);var sr=Uj(er);Wj(er,sr,nr);break;case 3:case 4:var ir=rr.stateNode.containerInfo,or=Uj(er);Vj(er,or,ir);break;default:throw Error(p$1(161))}}catch(ar){W$1(er,er.return,ar)}er.flags&=-3}_e&4096&&(er.flags&=-4097)}function hk(er,_e,tr){V$2=er,ik(er)}function ik(er,_e,tr){for(var rr=(er.mode&1)!==0;V$2!==null;){var nr=V$2,sr=nr.child;if(nr.tag===22&&rr){var ir=nr.memoizedState!==null||Jj;if(!ir){var or=nr.alternate,ar=or!==null&&or.memoizedState!==null||U$3;or=Jj;var lr=U$3;if(Jj=ir,(U$3=ar)&&!lr)for(V$2=nr;V$2!==null;)ir=V$2,ar=ir.child,ir.tag===22&&ir.memoizedState!==null?jk(nr):ar!==null?(ar.return=ir,V$2=ar):jk(nr);for(;sr!==null;)V$2=sr,ik(sr),sr=sr.sibling;V$2=nr,Jj=or,U$3=lr}kk(er)}else nr.subtreeFlags&8772&&sr!==null?(sr.return=nr,V$2=sr):kk(er)}}function kk(er){for(;V$2!==null;){var _e=V$2;if(_e.flags&8772){var tr=_e.alternate;try{if(_e.flags&8772)switch(_e.tag){case 0:case 11:case 15:U$3||Qj(5,_e);break;case 1:var rr=_e.stateNode;if(_e.flags&4&&!U$3)if(tr===null)rr.componentDidMount();else{var nr=_e.elementType===_e.type?tr.memoizedProps:Ci(_e.type,tr.memoizedProps);rr.componentDidUpdate(nr,tr.memoizedState,rr.__reactInternalSnapshotBeforeUpdate)}var sr=_e.updateQueue;sr!==null&&sh(_e,sr,rr);break;case 3:var ir=_e.updateQueue;if(ir!==null){if(tr=null,_e.child!==null)switch(_e.child.tag){case 5:tr=_e.child.stateNode;break;case 1:tr=_e.child.stateNode}sh(_e,ir,tr)}break;case 5:var or=_e.stateNode;if(tr===null&&_e.flags&4){tr=or;var ar=_e.memoizedProps;switch(_e.type){case"button":case"input":case"select":case"textarea":ar.autoFocus&&tr.focus();break;case"img":ar.src&&(tr.src=ar.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_e.memoizedState===null){var lr=_e.alternate;if(lr!==null){var cr=lr.memoizedState;if(cr!==null){var Ar=cr.dehydrated;Ar!==null&&bd(Ar)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$3||_e.flags&512&&Rj(_e)}catch(ur){W$1(_e,_e.return,ur)}}if(_e===er){V$2=null;break}if(tr=_e.sibling,tr!==null){tr.return=_e.return,V$2=tr;break}V$2=_e.return}}function gk(er){for(;V$2!==null;){var _e=V$2;if(_e===er){V$2=null;break}var tr=_e.sibling;if(tr!==null){tr.return=_e.return,V$2=tr;break}V$2=_e.return}}function jk(er){for(;V$2!==null;){var _e=V$2;try{switch(_e.tag){case 0:case 11:case 15:var tr=_e.return;try{Qj(4,_e)}catch(ar){W$1(_e,tr,ar)}break;case 1:var rr=_e.stateNode;if(typeof rr.componentDidMount=="function"){var nr=_e.return;try{rr.componentDidMount()}catch(ar){W$1(_e,nr,ar)}}var sr=_e.return;try{Rj(_e)}catch(ar){W$1(_e,sr,ar)}break;case 5:var ir=_e.return;try{Rj(_e)}catch(ar){W$1(_e,ir,ar)}}}catch(ar){W$1(_e,_e.return,ar)}if(_e===er){V$2=null;break}var or=_e.sibling;if(or!==null){or.return=_e.return,V$2=or;break}V$2=_e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$1=0,Q$2=null,Y$1=null,Z$2=0,fj=0,ej=Uf(0),T$2=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K$1&6?B$2():Ak!==-1?Ak:Ak=B$2()}function yi(er){return er.mode&1?K$1&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(er=C$1,er!==0||(er=window.event,er=er===void 0?16:jd(er.type)),er):1}function gi(er,_e,tr,rr){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(er,tr,rr),(!(K$1&2)||er!==Q$2)&&(er===Q$2&&(!(K$1&2)&&(qk|=tr),T$2===4&&Ck(er,Z$2)),Dk(er,rr),tr===1&&K$1===0&&!(_e.mode&1)&&(Gj=B$2()+500,fg&&jg()))}function Dk(er,_e){var tr=er.callbackNode;wc(er,_e);var rr=uc(er,er===Q$2?Z$2:0);if(rr===0)tr!==null&&bc(tr),er.callbackNode=null,er.callbackPriority=0;else if(_e=rr&-rr,er.callbackPriority!==_e){if(tr!=null&&bc(tr),_e===1)er.tag===0?ig(Ek.bind(null,er)):hg(Ek.bind(null,er)),Jf(function(){!(K$1&6)&&jg()}),tr=null;else{switch(Dc(rr)){case 1:tr=fc;break;case 4:tr=gc;break;case 16:tr=hc;break;case 536870912:tr=jc;break;default:tr=hc}tr=Fk(tr,Gk.bind(null,er))}er.callbackPriority=_e,er.callbackNode=tr}}function Gk(er,_e){if(Ak=-1,Bk=0,K$1&6)throw Error(p$1(327));var tr=er.callbackNode;if(Hk()&&er.callbackNode!==tr)return null;var rr=uc(er,er===Q$2?Z$2:0);if(rr===0)return null;if(rr&30||rr&er.expiredLanes||_e)_e=Ik(er,rr);else{_e=rr;var nr=K$1;K$1|=2;var sr=Jk();(Q$2!==er||Z$2!==_e)&&(uk=null,Gj=B$2()+500,Kk(er,_e));do try{Lk();break}catch(or){Mk(er,or)}while(!0);$g(),mk.current=sr,K$1=nr,Y$1!==null?_e=0:(Q$2=null,Z$2=0,_e=T$2)}if(_e!==0){if(_e===2&&(nr=xc(er),nr!==0&&(rr=nr,_e=Nk(er,nr))),_e===1)throw tr=pk,Kk(er,0),Ck(er,rr),Dk(er,B$2()),tr;if(_e===6)Ck(er,rr);else{if(nr=er.current.alternate,!(rr&30)&&!Ok(nr)&&(_e=Ik(er,rr),_e===2&&(sr=xc(er),sr!==0&&(rr=sr,_e=Nk(er,sr))),_e===1))throw tr=pk,Kk(er,0),Ck(er,rr),Dk(er,B$2()),tr;switch(er.finishedWork=nr,er.finishedLanes=rr,_e){case 0:case 1:throw Error(p$1(345));case 2:Pk(er,tk,uk);break;case 3:if(Ck(er,rr),(rr&130023424)===rr&&(_e=fk+500-B$2(),10<_e)){if(uc(er,0)!==0)break;if(nr=er.suspendedLanes,(nr&rr)!==rr){R$1(),er.pingedLanes|=er.suspendedLanes&nr;break}er.timeoutHandle=Ff(Pk.bind(null,er,tk,uk),_e);break}Pk(er,tk,uk);break;case 4:if(Ck(er,rr),(rr&4194240)===rr)break;for(_e=er.eventTimes,nr=-1;0<rr;){var ir=31-oc(rr);sr=1<<ir,ir=_e[ir],ir>nr&&(nr=ir),rr&=~sr}if(rr=nr,rr=B$2()-rr,rr=(120>rr?120:480>rr?480:1080>rr?1080:1920>rr?1920:3e3>rr?3e3:4320>rr?4320:1960*lk(rr/1960))-rr,10<rr){er.timeoutHandle=Ff(Pk.bind(null,er,tk,uk),rr);break}Pk(er,tk,uk);break;case 5:Pk(er,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(er,B$2()),er.callbackNode===tr?Gk.bind(null,er):null}function Nk(er,_e){var tr=sk;return er.current.memoizedState.isDehydrated&&(Kk(er,_e).flags|=256),er=Ik(er,_e),er!==2&&(_e=tk,tk=tr,_e!==null&&Fj(_e)),er}function Fj(er){tk===null?tk=er:tk.push.apply(tk,er)}function Ok(er){for(var _e=er;;){if(_e.flags&16384){var tr=_e.updateQueue;if(tr!==null&&(tr=tr.stores,tr!==null))for(var rr=0;rr<tr.length;rr++){var nr=tr[rr],sr=nr.getSnapshot;nr=nr.value;try{if(!He(sr(),nr))return!1}catch{return!1}}}if(tr=_e.child,_e.subtreeFlags&16384&&tr!==null)tr.return=_e,_e=tr;else{if(_e===er)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===er)return!0;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}}return!0}function Ck(er,_e){for(_e&=~rk,_e&=~qk,er.suspendedLanes|=_e,er.pingedLanes&=~_e,er=er.expirationTimes;0<_e;){var tr=31-oc(_e),rr=1<<tr;er[tr]=-1,_e&=~rr}}function Ek(er){if(K$1&6)throw Error(p$1(327));Hk();var _e=uc(er,0);if(!(_e&1))return Dk(er,B$2()),null;var tr=Ik(er,_e);if(er.tag!==0&&tr===2){var rr=xc(er);rr!==0&&(_e=rr,tr=Nk(er,rr))}if(tr===1)throw tr=pk,Kk(er,0),Ck(er,_e),Dk(er,B$2()),tr;if(tr===6)throw Error(p$1(345));return er.finishedWork=er.current.alternate,er.finishedLanes=_e,Pk(er,tk,uk),Dk(er,B$2()),null}function Qk(er,_e){var tr=K$1;K$1|=1;try{return er(_e)}finally{K$1=tr,K$1===0&&(Gj=B$2()+500,fg&&jg())}}function Rk(er){wk!==null&&wk.tag===0&&!(K$1&6)&&Hk();var _e=K$1;K$1|=1;var tr=ok.transition,rr=C$1;try{if(ok.transition=null,C$1=1,er)return er()}finally{C$1=rr,ok.transition=tr,K$1=_e,!(K$1&6)&&jg()}}function Hj(){fj=ej.current,E$3(ej)}function Kk(er,_e){er.finishedWork=null,er.finishedLanes=0;var tr=er.timeoutHandle;if(tr!==-1&&(er.timeoutHandle=-1,Gf(tr)),Y$1!==null)for(tr=Y$1.return;tr!==null;){var rr=tr;switch(wg(rr),rr.tag){case 1:rr=rr.type.childContextTypes,rr!=null&&$f();break;case 3:zh(),E$3(Wf),E$3(H$1),Eh();break;case 5:Bh(rr);break;case 4:zh();break;case 13:E$3(L$4);break;case 19:E$3(L$4);break;case 10:ah(rr.type._context);break;case 22:case 23:Hj()}tr=tr.return}if(Q$2=er,Y$1=er=Pg(er.current,null),Z$2=fj=_e,T$2=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(_e=0;_e<fh.length;_e++)if(tr=fh[_e],rr=tr.interleaved,rr!==null){tr.interleaved=null;var nr=rr.next,sr=tr.pending;if(sr!==null){var ir=sr.next;sr.next=nr,rr.next=ir}tr.pending=rr}fh=null}return er}function Mk(er,_e){do{var tr=Y$1;try{if($g(),Fh.current=Rh,Ih){for(var rr=M$2.memoizedState;rr!==null;){var nr=rr.queue;nr!==null&&(nr.pending=null),rr=rr.next}Ih=!1}if(Hh=0,O$2=N$2=M$2=null,Jh=!1,Kh=0,nk.current=null,tr===null||tr.return===null){T$2=1,pk=_e,Y$1=null;break}e:{var sr=er,ir=tr.return,or=tr,ar=_e;if(_e=Z$2,or.flags|=32768,ar!==null&&typeof ar=="object"&&typeof ar.then=="function"){var lr=ar,cr=or,Ar=cr.tag;if(!(cr.mode&1)&&(Ar===0||Ar===11||Ar===15)){var ur=cr.alternate;ur?(cr.updateQueue=ur.updateQueue,cr.memoizedState=ur.memoizedState,cr.lanes=ur.lanes):(cr.updateQueue=null,cr.memoizedState=null)}var dr=Ui(ir);if(dr!==null){dr.flags&=-257,Vi(dr,ir,or,sr,_e),dr.mode&1&&Si(sr,lr,_e),_e=dr,ar=lr;var mr=_e.updateQueue;if(mr===null){var pr=new Set;pr.add(ar),_e.updateQueue=pr}else mr.add(ar);break e}else{if(!(_e&1)){Si(sr,lr,_e),tj();break e}ar=Error(p$1(426))}}else if(I$1&&or.mode&1){var yr=Ui(ir);if(yr!==null){!(yr.flags&65536)&&(yr.flags|=256),Vi(yr,ir,or,sr,_e),Jg(Ji(ar,or));break e}}sr=ar=Ji(ar,or),T$2!==4&&(T$2=2),sk===null?sk=[sr]:sk.push(sr),sr=ir;do{switch(sr.tag){case 3:sr.flags|=65536,_e&=-_e,sr.lanes|=_e;var hr=Ni(sr,ar,_e);ph(sr,hr);break e;case 1:or=ar;var gr=sr.type,Cr=sr.stateNode;if(!(sr.flags&128)&&(typeof gr.getDerivedStateFromError=="function"||Cr!==null&&typeof Cr.componentDidCatch=="function"&&(Ri===null||!Ri.has(Cr)))){sr.flags|=65536,_e&=-_e,sr.lanes|=_e;var Tr=Qi(sr,or,_e);ph(sr,Tr);break e}}sr=sr.return}while(sr!==null)}Sk(tr)}catch(Sr){_e=Sr,Y$1===tr&&tr!==null&&(Y$1=tr=tr.return);continue}break}while(!0)}function Jk(){var er=mk.current;return mk.current=Rh,er===null?Rh:er}function tj(){(T$2===0||T$2===3||T$2===2)&&(T$2=4),Q$2===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$2,Z$2)}function Ik(er,_e){var tr=K$1;K$1|=2;var rr=Jk();(Q$2!==er||Z$2!==_e)&&(uk=null,Kk(er,_e));do try{Tk();break}catch(nr){Mk(er,nr)}while(!0);if($g(),K$1=tr,mk.current=rr,Y$1!==null)throw Error(p$1(261));return Q$2=null,Z$2=0,T$2}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc();)Uk(Y$1)}function Uk(er){var _e=Vk(er.alternate,er,fj);er.memoizedProps=er.pendingProps,_e===null?Sk(er):Y$1=_e,nk.current=null}function Sk(er){var _e=er;do{var tr=_e.alternate;if(er=_e.return,_e.flags&32768){if(tr=Ij(tr,_e),tr!==null){tr.flags&=32767,Y$1=tr;return}if(er!==null)er.flags|=32768,er.subtreeFlags=0,er.deletions=null;else{T$2=6,Y$1=null;return}}else if(tr=Ej(tr,_e,fj),tr!==null){Y$1=tr;return}if(_e=_e.sibling,_e!==null){Y$1=_e;return}Y$1=_e=er}while(_e!==null);T$2===0&&(T$2=5)}function Pk(er,_e,tr){var rr=C$1,nr=ok.transition;try{ok.transition=null,C$1=1,Wk(er,_e,tr,rr)}finally{ok.transition=nr,C$1=rr}return null}function Wk(er,_e,tr,rr){do Hk();while(wk!==null);if(K$1&6)throw Error(p$1(327));tr=er.finishedWork;var nr=er.finishedLanes;if(tr===null)return null;if(er.finishedWork=null,er.finishedLanes=0,tr===er.current)throw Error(p$1(177));er.callbackNode=null,er.callbackPriority=0;var sr=tr.lanes|tr.childLanes;if(Bc(er,sr),er===Q$2&&(Y$1=Q$2=null,Z$2=0),!(tr.subtreeFlags&2064)&&!(tr.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),sr=(tr.flags&15990)!==0,tr.subtreeFlags&15990||sr){sr=ok.transition,ok.transition=null;var ir=C$1;C$1=1;var or=K$1;K$1|=4,nk.current=null,Oj(er,tr),dk(tr,er),Oe(Df),dd=!!Cf,Df=Cf=null,er.current=tr,hk(tr),dc(),K$1=or,C$1=ir,ok.transition=sr}else er.current=tr;if(vk&&(vk=!1,wk=er,xk=nr),sr=er.pendingLanes,sr===0&&(Ri=null),mc(tr.stateNode),Dk(er,B$2()),_e!==null)for(rr=er.onRecoverableError,tr=0;tr<_e.length;tr++)nr=_e[tr],rr(nr.value,{componentStack:nr.stack,digest:nr.digest});if(Oi)throw Oi=!1,er=Pi,Pi=null,er;return xk&1&&er.tag!==0&&Hk(),sr=er.pendingLanes,sr&1?er===zk?yk++:(yk=0,zk=er):yk=0,jg(),null}function Hk(){if(wk!==null){var er=Dc(xk),_e=ok.transition,tr=C$1;try{if(ok.transition=null,C$1=16>er?16:er,wk===null)var rr=!1;else{if(er=wk,wk=null,xk=0,K$1&6)throw Error(p$1(331));var nr=K$1;for(K$1|=4,V$2=er.current;V$2!==null;){var sr=V$2,ir=sr.child;if(V$2.flags&16){var or=sr.deletions;if(or!==null){for(var ar=0;ar<or.length;ar++){var lr=or[ar];for(V$2=lr;V$2!==null;){var cr=V$2;switch(cr.tag){case 0:case 11:case 15:Pj(8,cr,sr)}var Ar=cr.child;if(Ar!==null)Ar.return=cr,V$2=Ar;else for(;V$2!==null;){cr=V$2;var ur=cr.sibling,dr=cr.return;if(Sj(cr),cr===lr){V$2=null;break}if(ur!==null){ur.return=dr,V$2=ur;break}V$2=dr}}}var mr=sr.alternate;if(mr!==null){var pr=mr.child;if(pr!==null){mr.child=null;do{var yr=pr.sibling;pr.sibling=null,pr=yr}while(pr!==null)}}V$2=sr}}if(sr.subtreeFlags&2064&&ir!==null)ir.return=sr,V$2=ir;else e:for(;V$2!==null;){if(sr=V$2,sr.flags&2048)switch(sr.tag){case 0:case 11:case 15:Pj(9,sr,sr.return)}var hr=sr.sibling;if(hr!==null){hr.return=sr.return,V$2=hr;break e}V$2=sr.return}}var gr=er.current;for(V$2=gr;V$2!==null;){ir=V$2;var Cr=ir.child;if(ir.subtreeFlags&2064&&Cr!==null)Cr.return=ir,V$2=Cr;else e:for(ir=gr;V$2!==null;){if(or=V$2,or.flags&2048)try{switch(or.tag){case 0:case 11:case 15:Qj(9,or)}}catch(Sr){W$1(or,or.return,Sr)}if(or===ir){V$2=null;break e}var Tr=or.sibling;if(Tr!==null){Tr.return=or.return,V$2=Tr;break e}V$2=or.return}}if(K$1=nr,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc,er)}catch{}rr=!0}return rr}finally{C$1=tr,ok.transition=_e}}return!1}function Xk(er,_e,tr){_e=Ji(tr,_e),_e=Ni(er,_e,1),er=nh(er,_e,1),_e=R$1(),er!==null&&(Ac(er,1,_e),Dk(er,_e))}function W$1(er,_e,tr){if(er.tag===3)Xk(er,er,tr);else for(;_e!==null;){if(_e.tag===3){Xk(_e,er,tr);break}else if(_e.tag===1){var rr=_e.stateNode;if(typeof _e.type.getDerivedStateFromError=="function"||typeof rr.componentDidCatch=="function"&&(Ri===null||!Ri.has(rr))){er=Ji(tr,er),er=Qi(_e,er,1),_e=nh(_e,er,1),er=R$1(),_e!==null&&(Ac(_e,1,er),Dk(_e,er));break}}_e=_e.return}}function Ti(er,_e,tr){var rr=er.pingCache;rr!==null&&rr.delete(_e),_e=R$1(),er.pingedLanes|=er.suspendedLanes&tr,Q$2===er&&(Z$2&tr)===tr&&(T$2===4||T$2===3&&(Z$2&130023424)===Z$2&&500>B$2()-fk?Kk(er,0):rk|=tr),Dk(er,_e)}function Yk(er,_e){_e===0&&(er.mode&1?(_e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):_e=1);var tr=R$1();er=ih(er,_e),er!==null&&(Ac(er,_e,tr),Dk(er,tr))}function uj(er){var _e=er.memoizedState,tr=0;_e!==null&&(tr=_e.retryLane),Yk(er,tr)}function bk(er,_e){var tr=0;switch(er.tag){case 13:var rr=er.stateNode,nr=er.memoizedState;nr!==null&&(tr=nr.retryLane);break;case 19:rr=er.stateNode;break;default:throw Error(p$1(314))}rr!==null&&rr.delete(_e),Yk(er,tr)}var Vk;Vk=function(er,_e,tr){if(er!==null)if(er.memoizedProps!==_e.pendingProps||Wf.current)dh=!0;else{if(!(er.lanes&tr)&&!(_e.flags&128))return dh=!1,yj(er,_e,tr);dh=!!(er.flags&131072)}else dh=!1,I$1&&_e.flags&1048576&&ug(_e,ng,_e.index);switch(_e.lanes=0,_e.tag){case 2:var rr=_e.type;ij(er,_e),er=_e.pendingProps;var nr=Yf(_e,H$1.current);ch(_e,tr),nr=Nh(null,_e,rr,er,nr,tr);var sr=Sh();return _e.flags|=1,typeof nr=="object"&&nr!==null&&typeof nr.render=="function"&&nr.$$typeof===void 0?(_e.tag=1,_e.memoizedState=null,_e.updateQueue=null,Zf(rr)?(sr=!0,cg(_e)):sr=!1,_e.memoizedState=nr.state!==null&&nr.state!==void 0?nr.state:null,kh(_e),nr.updater=Ei,_e.stateNode=nr,nr._reactInternals=_e,Ii(_e,rr,er,tr),_e=jj(null,_e,rr,!0,sr,tr)):(_e.tag=0,I$1&&sr&&vg(_e),Xi(null,_e,nr,tr),_e=_e.child),_e;case 16:rr=_e.elementType;e:{switch(ij(er,_e),er=_e.pendingProps,nr=rr._init,rr=nr(rr._payload),_e.type=rr,nr=_e.tag=Zk(rr),er=Ci(rr,er),nr){case 0:_e=cj(null,_e,rr,er,tr);break e;case 1:_e=hj(null,_e,rr,er,tr);break e;case 11:_e=Yi(null,_e,rr,er,tr);break e;case 14:_e=$i(null,_e,rr,Ci(rr.type,er),tr);break e}throw Error(p$1(306,rr,""))}return _e;case 0:return rr=_e.type,nr=_e.pendingProps,nr=_e.elementType===rr?nr:Ci(rr,nr),cj(er,_e,rr,nr,tr);case 1:return rr=_e.type,nr=_e.pendingProps,nr=_e.elementType===rr?nr:Ci(rr,nr),hj(er,_e,rr,nr,tr);case 3:e:{if(kj(_e),er===null)throw Error(p$1(387));rr=_e.pendingProps,sr=_e.memoizedState,nr=sr.element,lh(er,_e),qh(_e,rr,null,tr);var ir=_e.memoizedState;if(rr=ir.element,sr.isDehydrated)if(sr={element:rr,isDehydrated:!1,cache:ir.cache,pendingSuspenseBoundaries:ir.pendingSuspenseBoundaries,transitions:ir.transitions},_e.updateQueue.baseState=sr,_e.memoizedState=sr,_e.flags&256){nr=Ji(Error(p$1(423)),_e),_e=lj(er,_e,rr,tr,nr);break e}else if(rr!==nr){nr=Ji(Error(p$1(424)),_e),_e=lj(er,_e,rr,tr,nr);break e}else for(yg=Lf(_e.stateNode.containerInfo.firstChild),xg=_e,I$1=!0,zg=null,tr=Vg(_e,null,rr,tr),_e.child=tr;tr;)tr.flags=tr.flags&-3|4096,tr=tr.sibling;else{if(Ig(),rr===nr){_e=Zi(er,_e,tr);break e}Xi(er,_e,rr,tr)}_e=_e.child}return _e;case 5:return Ah(_e),er===null&&Eg(_e),rr=_e.type,nr=_e.pendingProps,sr=er!==null?er.memoizedProps:null,ir=nr.children,Ef(rr,nr)?ir=null:sr!==null&&Ef(rr,sr)&&(_e.flags|=32),gj(er,_e),Xi(er,_e,ir,tr),_e.child;case 6:return er===null&&Eg(_e),null;case 13:return oj(er,_e,tr);case 4:return yh(_e,_e.stateNode.containerInfo),rr=_e.pendingProps,er===null?_e.child=Ug(_e,null,rr,tr):Xi(er,_e,rr,tr),_e.child;case 11:return rr=_e.type,nr=_e.pendingProps,nr=_e.elementType===rr?nr:Ci(rr,nr),Yi(er,_e,rr,nr,tr);case 7:return Xi(er,_e,_e.pendingProps,tr),_e.child;case 8:return Xi(er,_e,_e.pendingProps.children,tr),_e.child;case 12:return Xi(er,_e,_e.pendingProps.children,tr),_e.child;case 10:e:{if(rr=_e.type._context,nr=_e.pendingProps,sr=_e.memoizedProps,ir=nr.value,G$2(Wg,rr._currentValue),rr._currentValue=ir,sr!==null)if(He(sr.value,ir)){if(sr.children===nr.children&&!Wf.current){_e=Zi(er,_e,tr);break e}}else for(sr=_e.child,sr!==null&&(sr.return=_e);sr!==null;){var or=sr.dependencies;if(or!==null){ir=sr.child;for(var ar=or.firstContext;ar!==null;){if(ar.context===rr){if(sr.tag===1){ar=mh(-1,tr&-tr),ar.tag=2;var lr=sr.updateQueue;if(lr!==null){lr=lr.shared;var cr=lr.pending;cr===null?ar.next=ar:(ar.next=cr.next,cr.next=ar),lr.pending=ar}}sr.lanes|=tr,ar=sr.alternate,ar!==null&&(ar.lanes|=tr),bh(sr.return,tr,_e),or.lanes|=tr;break}ar=ar.next}}else if(sr.tag===10)ir=sr.type===_e.type?null:sr.child;else if(sr.tag===18){if(ir=sr.return,ir===null)throw Error(p$1(341));ir.lanes|=tr,or=ir.alternate,or!==null&&(or.lanes|=tr),bh(ir,tr,_e),ir=sr.sibling}else ir=sr.child;if(ir!==null)ir.return=sr;else for(ir=sr;ir!==null;){if(ir===_e){ir=null;break}if(sr=ir.sibling,sr!==null){sr.return=ir.return,ir=sr;break}ir=ir.return}sr=ir}Xi(er,_e,nr.children,tr),_e=_e.child}return _e;case 9:return nr=_e.type,rr=_e.pendingProps.children,ch(_e,tr),nr=eh(nr),rr=rr(nr),_e.flags|=1,Xi(er,_e,rr,tr),_e.child;case 14:return rr=_e.type,nr=Ci(rr,_e.pendingProps),nr=Ci(rr.type,nr),$i(er,_e,rr,nr,tr);case 15:return bj(er,_e,_e.type,_e.pendingProps,tr);case 17:return rr=_e.type,nr=_e.pendingProps,nr=_e.elementType===rr?nr:Ci(rr,nr),ij(er,_e),_e.tag=1,Zf(rr)?(er=!0,cg(_e)):er=!1,ch(_e,tr),Gi(_e,rr,nr),Ii(_e,rr,nr,tr),jj(null,_e,rr,!0,er,tr);case 19:return xj(er,_e,tr);case 22:return dj(er,_e,tr)}throw Error(p$1(156,_e.tag))};function Fk(er,_e){return ac(er,_e)}function $k(er,_e,tr,rr){this.tag=er,this.key=tr,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=rr,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(er,_e,tr,rr){return new $k(er,_e,tr,rr)}function aj(er){return er=er.prototype,!(!er||!er.isReactComponent)}function Zk(er){if(typeof er=="function")return aj(er)?1:0;if(er!=null){if(er=er.$$typeof,er===Da)return 11;if(er===Ga)return 14}return 2}function Pg(er,_e){var tr=er.alternate;return tr===null?(tr=Bg(er.tag,_e,er.key,er.mode),tr.elementType=er.elementType,tr.type=er.type,tr.stateNode=er.stateNode,tr.alternate=er,er.alternate=tr):(tr.pendingProps=_e,tr.type=er.type,tr.flags=0,tr.subtreeFlags=0,tr.deletions=null),tr.flags=er.flags&14680064,tr.childLanes=er.childLanes,tr.lanes=er.lanes,tr.child=er.child,tr.memoizedProps=er.memoizedProps,tr.memoizedState=er.memoizedState,tr.updateQueue=er.updateQueue,_e=er.dependencies,tr.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext},tr.sibling=er.sibling,tr.index=er.index,tr.ref=er.ref,tr}function Rg(er,_e,tr,rr,nr,sr){var ir=2;if(rr=er,typeof er=="function")aj(er)&&(ir=1);else if(typeof er=="string")ir=5;else e:switch(er){case ya:return Tg(tr.children,nr,sr,_e);case za:ir=8,nr|=8;break;case Aa:return er=Bg(12,tr,_e,nr|2),er.elementType=Aa,er.lanes=sr,er;case Ea:return er=Bg(13,tr,_e,nr),er.elementType=Ea,er.lanes=sr,er;case Fa:return er=Bg(19,tr,_e,nr),er.elementType=Fa,er.lanes=sr,er;case Ia:return pj(tr,nr,sr,_e);default:if(typeof er=="object"&&er!==null)switch(er.$$typeof){case Ba:ir=10;break e;case Ca:ir=9;break e;case Da:ir=11;break e;case Ga:ir=14;break e;case Ha:ir=16,rr=null;break e}throw Error(p$1(130,er==null?er:typeof er,""))}return _e=Bg(ir,tr,_e,nr),_e.elementType=er,_e.type=rr,_e.lanes=sr,_e}function Tg(er,_e,tr,rr){return er=Bg(7,er,rr,_e),er.lanes=tr,er}function pj(er,_e,tr,rr){return er=Bg(22,er,rr,_e),er.elementType=Ia,er.lanes=tr,er.stateNode={isHidden:!1},er}function Qg(er,_e,tr){return er=Bg(6,er,null,_e),er.lanes=tr,er}function Sg(er,_e,tr){return _e=Bg(4,er.children!==null?er.children:[],er.key,_e),_e.lanes=tr,_e.stateNode={containerInfo:er.containerInfo,pendingChildren:null,implementation:er.implementation},_e}function al(er,_e,tr,rr,nr){this.tag=_e,this.containerInfo=er,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=rr,this.onRecoverableError=nr,this.mutableSourceEagerHydrationData=null}function bl(er,_e,tr,rr,nr,sr,ir,or,ar){return er=new al(er,_e,tr,or,ar),_e===1?(_e=1,sr===!0&&(_e|=8)):_e=0,sr=Bg(3,null,null,_e),er.current=sr,sr.stateNode=er,sr.memoizedState={element:rr,isDehydrated:tr,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(sr),er}function cl(er,_e,tr){var rr=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:rr==null?null:""+rr,children:er,containerInfo:_e,implementation:tr}}function dl(er){if(!er)return Vf;er=er._reactInternals;e:{if(Vb(er)!==er||er.tag!==1)throw Error(p$1(170));var _e=er;do{switch(_e.tag){case 3:_e=_e.stateNode.context;break e;case 1:if(Zf(_e.type)){_e=_e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_e=_e.return}while(_e!==null);throw Error(p$1(171))}if(er.tag===1){var tr=er.type;if(Zf(tr))return bg(er,tr,_e)}return _e}function el(er,_e,tr,rr,nr,sr,ir,or,ar){return er=bl(tr,rr,!0,er,nr,sr,ir,or,ar),er.context=dl(null),tr=er.current,rr=R$1(),nr=yi(tr),sr=mh(rr,nr),sr.callback=_e??null,nh(tr,sr,nr),er.current.lanes=nr,Ac(er,nr,rr),Dk(er,rr),er}function fl$1(er,_e,tr,rr){var nr=_e.current,sr=R$1(),ir=yi(nr);return tr=dl(tr),_e.context===null?_e.context=tr:_e.pendingContext=tr,_e=mh(sr,ir),_e.payload={element:er},rr=rr===void 0?null:rr,rr!==null&&(_e.callback=rr),er=nh(nr,_e,ir),er!==null&&(gi(er,nr,ir,sr),oh(er,nr,ir)),ir}function gl(er){if(er=er.current,!er.child)return null;switch(er.child.tag){case 5:return er.child.stateNode;default:return er.child.stateNode}}function hl(er,_e){if(er=er.memoizedState,er!==null&&er.dehydrated!==null){var tr=er.retryLane;er.retryLane=tr!==0&&tr<_e?tr:_e}}function il(er,_e){hl(er,_e),(er=er.alternate)&&hl(er,_e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(er){console.error(er)};function ll(er){this._internalRoot=er}ml.prototype.render=ll.prototype.render=function(er){var _e=this._internalRoot;if(_e===null)throw Error(p$1(409));fl$1(er,_e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var er=this._internalRoot;if(er!==null){this._internalRoot=null;var _e=er.containerInfo;Rk(function(){fl$1(null,er,null,null)}),_e[uf]=null}};function ml(er){this._internalRoot=er}ml.prototype.unstable_scheduleHydration=function(er){if(er){var _e=Hc();er={blockedOn:null,target:er,priority:_e};for(var tr=0;tr<Qc.length&&_e!==0&&_e<Qc[tr].priority;tr++);Qc.splice(tr,0,er),tr===0&&Vc(er)}};function nl(er){return!(!er||er.nodeType!==1&&er.nodeType!==9&&er.nodeType!==11)}function ol(er){return!(!er||er.nodeType!==1&&er.nodeType!==9&&er.nodeType!==11&&(er.nodeType!==8||er.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(er,_e,tr,rr,nr){if(nr){if(typeof rr=="function"){var sr=rr;rr=function(){var lr=gl(ir);sr.call(lr)}}var ir=el(_e,rr,er,0,null,!1,!1,"",pl);return er._reactRootContainer=ir,er[uf]=ir.current,sf(er.nodeType===8?er.parentNode:er),Rk(),ir}for(;nr=er.lastChild;)er.removeChild(nr);if(typeof rr=="function"){var or=rr;rr=function(){var lr=gl(ar);or.call(lr)}}var ar=bl(er,0,!1,null,null,!1,!1,"",pl);return er._reactRootContainer=ar,er[uf]=ar.current,sf(er.nodeType===8?er.parentNode:er),Rk(function(){fl$1(_e,ar,tr,rr)}),ar}function rl(er,_e,tr,rr,nr){var sr=tr._reactRootContainer;if(sr){var ir=sr;if(typeof nr=="function"){var or=nr;nr=function(){var ar=gl(ir);or.call(ar)}}fl$1(_e,ir,er,nr)}else ir=ql(tr,_e,er,nr,rr);return gl(ir)}Ec=function(er){switch(er.tag){case 3:var _e=er.stateNode;if(_e.current.memoizedState.isDehydrated){var tr=tc(_e.pendingLanes);tr!==0&&(Cc(_e,tr|1),Dk(_e,B$2()),!(K$1&6)&&(Gj=B$2()+500,jg()))}break;case 13:Rk(function(){var rr=ih(er,1);if(rr!==null){var nr=R$1();gi(rr,er,1,nr)}}),il(er,1)}};Fc=function(er){if(er.tag===13){var _e=ih(er,134217728);if(_e!==null){var tr=R$1();gi(_e,er,134217728,tr)}il(er,134217728)}};Gc=function(er){if(er.tag===13){var _e=yi(er),tr=ih(er,_e);if(tr!==null){var rr=R$1();gi(tr,er,_e,rr)}il(er,_e)}};Hc=function(){return C$1};Ic=function(er,_e){var tr=C$1;try{return C$1=er,_e()}finally{C$1=tr}};yb=function(er,_e,tr){switch(_e){case"input":if(bb(er,tr),_e=tr.name,tr.type==="radio"&&_e!=null){for(tr=er;tr.parentNode;)tr=tr.parentNode;for(tr=tr.querySelectorAll("input[name="+JSON.stringify(""+_e)+'][type="radio"]'),_e=0;_e<tr.length;_e++){var rr=tr[_e];if(rr!==er&&rr.form===er.form){var nr=Db(rr);if(!nr)throw Error(p$1(90));Wa(rr),bb(rr,nr)}}}break;case"textarea":ib(er,tr);break;case"select":_e=tr.value,_e!=null&&fb(er,!!tr.multiple,_e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(er){return er=Zb(er),er===null?null:er.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc$1=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(er,_e){var tr=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(_e))throw Error(p$1(200));return cl(er,_e,null,tr)};reactDom_production_min.createRoot=function(er,_e){if(!nl(er))throw Error(p$1(299));var tr=!1,rr="",nr=kl;return _e!=null&&(_e.unstable_strictMode===!0&&(tr=!0),_e.identifierPrefix!==void 0&&(rr=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(nr=_e.onRecoverableError)),_e=bl(er,1,!1,null,null,tr,!1,rr,nr),er[uf]=_e.current,sf(er.nodeType===8?er.parentNode:er),new ll(_e)};reactDom_production_min.findDOMNode=function(er){if(er==null)return null;if(er.nodeType===1)return er;var _e=er._reactInternals;if(_e===void 0)throw typeof er.render=="function"?Error(p$1(188)):(er=Object.keys(er).join(","),Error(p$1(268,er)));return er=Zb(_e),er=er===null?null:er.stateNode,er};reactDom_production_min.flushSync=function(er){return Rk(er)};reactDom_production_min.hydrate=function(er,_e,tr){if(!ol(_e))throw Error(p$1(200));return rl(null,er,_e,!0,tr)};reactDom_production_min.hydrateRoot=function(er,_e,tr){if(!nl(er))throw Error(p$1(405));var rr=tr!=null&&tr.hydratedSources||null,nr=!1,sr="",ir=kl;if(tr!=null&&(tr.unstable_strictMode===!0&&(nr=!0),tr.identifierPrefix!==void 0&&(sr=tr.identifierPrefix),tr.onRecoverableError!==void 0&&(ir=tr.onRecoverableError)),_e=el(_e,null,er,1,tr??null,nr,!1,sr,ir),er[uf]=_e.current,sf(er),rr)for(er=0;er<rr.length;er++)tr=rr[er],nr=tr._getVersion,nr=nr(tr._source),_e.mutableSourceEagerHydrationData==null?_e.mutableSourceEagerHydrationData=[tr,nr]:_e.mutableSourceEagerHydrationData.push(tr,nr);return new ml(_e)};reactDom_production_min.render=function(er,_e,tr){if(!ol(_e))throw Error(p$1(200));return rl(null,er,_e,!1,tr)};reactDom_production_min.unmountComponentAtNode=function(er){if(!ol(er))throw Error(p$1(40));return er._reactRootContainer?(Rk(function(){rl(null,null,er,!1,function(){er._reactRootContainer=null,er[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(er,_e,tr,rr){if(!ol(tr))throw Error(p$1(200));if(er==null||er._reactInternals===void 0)throw Error(p$1(38));return rl(er,_e,tr,!1,rr)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(er){console.error(er)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const Gt$1=getDefaultExportFromCjs(reactDomExports);var createRoot,m$1=reactDomExports;createRoot=m$1.createRoot,m$1.hydrateRoot;const TOAST_LIMIT=1,TOAST_REMOVE_DELAY=1e6;let count$2=0;function genId(){return count$2=(count$2+1)%Number.MAX_SAFE_INTEGER,count$2.toString()}const toastTimeouts=new Map,addToRemoveQueue=er=>{if(toastTimeouts.has(er))return;const _e=setTimeout(()=>{toastTimeouts.delete(er),dispatch({type:"REMOVE_TOAST",toastId:er})},TOAST_REMOVE_DELAY);toastTimeouts.set(er,_e)},reducer$1=(er,_e)=>{switch(_e.type){case"ADD_TOAST":return{...er,toasts:[_e.toast,...er.toasts].slice(0,TOAST_LIMIT)};case"UPDATE_TOAST":return{...er,toasts:er.toasts.map(tr=>tr.id===_e.toast.id?{...tr,..._e.toast}:tr)};case"DISMISS_TOAST":{const{toastId:tr}=_e;return tr?addToRemoveQueue(tr):er.toasts.forEach(rr=>{addToRemoveQueue(rr.id)}),{...er,toasts:er.toasts.map(rr=>rr.id===tr||tr===void 0?{...rr,open:!1}:rr)}}case"REMOVE_TOAST":return _e.toastId===void 0?{...er,toasts:[]}:{...er,toasts:er.toasts.filter(tr=>tr.id!==_e.toastId)}}},listeners=[];let memoryState={toasts:[]};function dispatch(er){memoryState=reducer$1(memoryState,er),listeners.forEach(_e=>{_e(memoryState)})}function toast({...er}){const _e=genId(),tr=nr=>dispatch({type:"UPDATE_TOAST",toast:{...nr,id:_e}}),rr=()=>dispatch({type:"DISMISS_TOAST",toastId:_e});return dispatch({type:"ADD_TOAST",toast:{...er,id:_e,open:!0,onOpenChange:nr=>{nr||rr()}}}),{id:_e,dismiss:rr,update:tr}}function useToast(){const[er,_e]=reactExports.useState(memoryState);return reactExports.useEffect(()=>(listeners.push(_e),()=>{const tr=listeners.indexOf(_e);tr>-1&&listeners.splice(tr,1)}),[er]),{...er,toast,dismiss:tr=>dispatch({type:"DISMISS_TOAST",toastId:tr})}}function composeEventHandlers$1(er,_e,{checkForDefaultPrevented:tr=!0}={}){return function(nr){if(er==null||er(nr),tr===!1||!nr.defaultPrevented)return _e==null?void 0:_e(nr)}}function setRef(er,_e){typeof er=="function"?er(_e):er!=null&&(er.current=_e)}function composeRefs(...er){return _e=>er.forEach(tr=>setRef(tr,_e))}function useComposedRefs(...er){return reactExports.useCallback(composeRefs(...er),er)}function createContextScope$4(er,_e=[]){let tr=[];function rr(sr,ir){const or=reactExports.createContext(ir),ar=tr.length;tr=[...tr,ir];function lr(Ar){const{scope:ur,children:dr,...mr}=Ar,pr=(ur==null?void 0:ur[er][ar])||or,yr=reactExports.useMemo(()=>mr,Object.values(mr));return jsxRuntimeExports.jsx(pr.Provider,{value:yr,children:dr})}function cr(Ar,ur){const dr=(ur==null?void 0:ur[er][ar])||or,mr=reactExports.useContext(dr);if(mr)return mr;if(ir!==void 0)return ir;throw new Error(`\`${Ar}\` must be used within \`${sr}\``)}return lr.displayName=sr+"Provider",[lr,cr]}const nr=()=>{const sr=tr.map(ir=>reactExports.createContext(ir));return function(or){const ar=(or==null?void 0:or[er])||sr;return reactExports.useMemo(()=>({[`__scope${er}`]:{...or,[er]:ar}}),[or,ar])}};return nr.scopeName=er,[rr,composeContextScopes$4(nr,..._e)]}function composeContextScopes$4(...er){const _e=er[0];if(er.length===1)return _e;const tr=()=>{const rr=er.map(nr=>({useScope:nr(),scopeName:nr.scopeName}));return function(sr){const ir=rr.reduce((or,{useScope:ar,scopeName:lr})=>{const Ar=ar(sr)[`__scope${lr}`];return{...or,...Ar}},{});return reactExports.useMemo(()=>({[`__scope${_e.scopeName}`]:ir}),[ir])}};return tr.scopeName=_e.scopeName,tr}var Slot=reactExports.forwardRef((er,_e)=>{const{children:tr,...rr}=er,nr=reactExports.Children.toArray(tr),sr=nr.find(isSlottable);if(sr){const ir=sr.props.children,or=nr.map(ar=>ar===sr?reactExports.Children.count(ir)>1?reactExports.Children.only(null):reactExports.isValidElement(ir)?ir.props.children:null:ar);return jsxRuntimeExports.jsx(SlotClone,{...rr,ref:_e,children:reactExports.isValidElement(ir)?reactExports.cloneElement(ir,void 0,or):null})}return jsxRuntimeExports.jsx(SlotClone,{...rr,ref:_e,children:tr})});Slot.displayName="Slot";var SlotClone=reactExports.forwardRef((er,_e)=>{const{children:tr,...rr}=er;if(reactExports.isValidElement(tr)){const nr=getElementRef$1(tr);return reactExports.cloneElement(tr,{...mergeProps(rr,tr.props),ref:_e?composeRefs(_e,nr):nr})}return reactExports.Children.count(tr)>1?reactExports.Children.only(null):null});SlotClone.displayName="SlotClone";var Slottable=({children:er})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:er});function isSlottable(er){return reactExports.isValidElement(er)&&er.type===Slottable}function mergeProps(er,_e){const tr={..._e};for(const rr in _e){const nr=er[rr],sr=_e[rr];/^on[A-Z]/.test(rr)?nr&&sr?tr[rr]=(...or)=>{sr(...or),nr(...or)}:nr&&(tr[rr]=nr):rr==="style"?tr[rr]={...nr,...sr}:rr==="className"&&(tr[rr]=[nr,sr].filter(Boolean).join(" "))}return{...er,...tr}}function getElementRef$1(er){var rr,nr;let _e=(rr=Object.getOwnPropertyDescriptor(er.props,"ref"))==null?void 0:rr.get,tr=_e&&"isReactWarning"in _e&&_e.isReactWarning;return tr?er.ref:(_e=(nr=Object.getOwnPropertyDescriptor(er,"ref"))==null?void 0:nr.get,tr=_e&&"isReactWarning"in _e&&_e.isReactWarning,tr?er.props.ref:er.props.ref||er.ref)}function createCollection(er){const _e=er+"CollectionProvider",[tr,rr]=createContextScope$4(_e),[nr,sr]=tr(_e,{collectionRef:{current:null},itemMap:new Map}),ir=dr=>{const{scope:mr,children:pr}=dr,yr=React.useRef(null),hr=React.useRef(new Map).current;return jsxRuntimeExports.jsx(nr,{scope:mr,itemMap:hr,collectionRef:yr,children:pr})};ir.displayName=_e;const or=er+"CollectionSlot",ar=React.forwardRef((dr,mr)=>{const{scope:pr,children:yr}=dr,hr=sr(or,pr),gr=useComposedRefs(mr,hr.collectionRef);return jsxRuntimeExports.jsx(Slot,{ref:gr,children:yr})});ar.displayName=or;const lr=er+"CollectionItemSlot",cr="data-radix-collection-item",Ar=React.forwardRef((dr,mr)=>{const{scope:pr,children:yr,...hr}=dr,gr=React.useRef(null),Cr=useComposedRefs(mr,gr),Tr=sr(lr,pr);return React.useEffect(()=>(Tr.itemMap.set(gr,{ref:gr,...hr}),()=>void Tr.itemMap.delete(gr))),jsxRuntimeExports.jsx(Slot,{[cr]:"",ref:Cr,children:yr})});Ar.displayName=lr;function ur(dr){const mr=sr(er+"CollectionConsumer",dr);return React.useCallback(()=>{const yr=mr.collectionRef.current;if(!yr)return[];const hr=Array.from(yr.querySelectorAll(`[${cr}]`));return Array.from(mr.itemMap.values()).sort((Tr,Sr)=>hr.indexOf(Tr.ref.current)-hr.indexOf(Sr.ref.current))},[mr.collectionRef,mr.itemMap])}return[{Provider:ir,Slot:ar,ItemSlot:Ar},ur,rr]}function createContext2(er,_e){const tr=reactExports.createContext(_e),rr=sr=>{const{children:ir,...or}=sr,ar=reactExports.useMemo(()=>or,Object.values(or));return jsxRuntimeExports.jsx(tr.Provider,{value:ar,children:ir})};rr.displayName=er+"Provider";function nr(sr){const ir=reactExports.useContext(tr);if(ir)return ir;if(_e!==void 0)return _e;throw new Error(`\`${sr}\` must be used within \`${er}\``)}return[rr,nr]}function createContextScope$3(er,_e=[]){let tr=[];function rr(sr,ir){const or=reactExports.createContext(ir),ar=tr.length;tr=[...tr,ir];const lr=Ar=>{var hr;const{scope:ur,children:dr,...mr}=Ar,pr=((hr=ur==null?void 0:ur[er])==null?void 0:hr[ar])||or,yr=reactExports.useMemo(()=>mr,Object.values(mr));return jsxRuntimeExports.jsx(pr.Provider,{value:yr,children:dr})};lr.displayName=sr+"Provider";function cr(Ar,ur){var pr;const dr=((pr=ur==null?void 0:ur[er])==null?void 0:pr[ar])||or,mr=reactExports.useContext(dr);if(mr)return mr;if(ir!==void 0)return ir;throw new Error(`\`${Ar}\` must be used within \`${sr}\``)}return[lr,cr]}const nr=()=>{const sr=tr.map(ir=>reactExports.createContext(ir));return function(or){const ar=(or==null?void 0:or[er])||sr;return reactExports.useMemo(()=>({[`__scope${er}`]:{...or,[er]:ar}}),[or,ar])}};return nr.scopeName=er,[rr,composeContextScopes$3(nr,..._e)]}function composeContextScopes$3(...er){const _e=er[0];if(er.length===1)return _e;const tr=()=>{const rr=er.map(nr=>({useScope:nr(),scopeName:nr.scopeName}));return function(sr){const ir=rr.reduce((or,{useScope:ar,scopeName:lr})=>{const Ar=ar(sr)[`__scope${lr}`];return{...or,...Ar}},{});return reactExports.useMemo(()=>({[`__scope${_e.scopeName}`]:ir}),[ir])}};return tr.scopeName=_e.scopeName,tr}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce((er,_e)=>{const tr=reactExports.forwardRef((rr,nr)=>{const{asChild:sr,...ir}=rr,or=sr?Slot:_e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(or,{...ir,ref:nr})});return tr.displayName=`Primitive.${_e}`,{...er,[_e]:tr}},{});function dispatchDiscreteCustomEvent(er,_e){er&&reactDomExports.flushSync(()=>er.dispatchEvent(_e))}function useCallbackRef$1(er){const _e=reactExports.useRef(er);return reactExports.useEffect(()=>{_e.current=er}),reactExports.useMemo(()=>(...tr)=>{var rr;return(rr=_e.current)==null?void 0:rr.call(_e,...tr)},[])}function useEscapeKeydown(er,_e=globalThis==null?void 0:globalThis.document){const tr=useCallbackRef$1(er);reactExports.useEffect(()=>{const rr=nr=>{nr.key==="Escape"&&tr(nr)};return _e.addEventListener("keydown",rr,{capture:!0}),()=>_e.removeEventListener("keydown",rr,{capture:!0})},[tr,_e])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((er,_e)=>{const{disableOutsidePointerEvents:tr=!1,onEscapeKeyDown:rr,onPointerDownOutside:nr,onFocusOutside:sr,onInteractOutside:ir,onDismiss:or,...ar}=er,lr=reactExports.useContext(DismissableLayerContext),[cr,Ar]=reactExports.useState(null),ur=(cr==null?void 0:cr.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,dr]=reactExports.useState({}),mr=useComposedRefs(_e,_r=>Ar(_r)),pr=Array.from(lr.layers),[yr]=[...lr.layersWithOutsidePointerEventsDisabled].slice(-1),hr=pr.indexOf(yr),gr=cr?pr.indexOf(cr):-1,Cr=lr.layersWithOutsidePointerEventsDisabled.size>0,Tr=gr>=hr,Sr=usePointerDownOutside(_r=>{const vr=_r.target,br=[...lr.branches].some(Pr=>Pr.contains(vr));!Tr||br||(nr==null||nr(_r),ir==null||ir(_r),_r.defaultPrevented||or==null||or())},ur),Nr=useFocusOutside(_r=>{const vr=_r.target;[...lr.branches].some(Pr=>Pr.contains(vr))||(sr==null||sr(_r),ir==null||ir(_r),_r.defaultPrevented||or==null||or())},ur);return useEscapeKeydown(_r=>{gr===lr.layers.size-1&&(rr==null||rr(_r),!_r.defaultPrevented&&or&&(_r.preventDefault(),or()))},ur),reactExports.useEffect(()=>{if(cr)return tr&&(lr.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=ur.body.style.pointerEvents,ur.body.style.pointerEvents="none"),lr.layersWithOutsidePointerEventsDisabled.add(cr)),lr.layers.add(cr),dispatchUpdate(),()=>{tr&&lr.layersWithOutsidePointerEventsDisabled.size===1&&(ur.body.style.pointerEvents=originalBodyPointerEvents)}},[cr,ur,tr,lr]),reactExports.useEffect(()=>()=>{cr&&(lr.layers.delete(cr),lr.layersWithOutsidePointerEventsDisabled.delete(cr),dispatchUpdate())},[cr,lr]),reactExports.useEffect(()=>{const _r=()=>dr({});return document.addEventListener(CONTEXT_UPDATE,_r),()=>document.removeEventListener(CONTEXT_UPDATE,_r)},[]),jsxRuntimeExports.jsx(Primitive.div,{...ar,ref:mr,style:{pointerEvents:Cr?Tr?"auto":"none":void 0,...er.style},onFocusCapture:composeEventHandlers$1(er.onFocusCapture,Nr.onFocusCapture),onBlurCapture:composeEventHandlers$1(er.onBlurCapture,Nr.onBlurCapture),onPointerDownCapture:composeEventHandlers$1(er.onPointerDownCapture,Sr.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((er,_e)=>{const tr=reactExports.useContext(DismissableLayerContext),rr=reactExports.useRef(null),nr=useComposedRefs(_e,rr);return reactExports.useEffect(()=>{const sr=rr.current;if(sr)return tr.branches.add(sr),()=>{tr.branches.delete(sr)}},[tr.branches]),jsxRuntimeExports.jsx(Primitive.div,{...er,ref:nr})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(er,_e=globalThis==null?void 0:globalThis.document){const tr=useCallbackRef$1(er),rr=reactExports.useRef(!1),nr=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const sr=or=>{if(or.target&&!rr.current){let ar=function(){handleAndDispatchCustomEvent$1(POINTER_DOWN_OUTSIDE,tr,lr,{discrete:!0})};const lr={originalEvent:or};or.pointerType==="touch"?(_e.removeEventListener("click",nr.current),nr.current=ar,_e.addEventListener("click",nr.current,{once:!0})):ar()}else _e.removeEventListener("click",nr.current);rr.current=!1},ir=window.setTimeout(()=>{_e.addEventListener("pointerdown",sr)},0);return()=>{window.clearTimeout(ir),_e.removeEventListener("pointerdown",sr),_e.removeEventListener("click",nr.current)}},[_e,tr]),{onPointerDownCapture:()=>rr.current=!0}}function useFocusOutside(er,_e=globalThis==null?void 0:globalThis.document){const tr=useCallbackRef$1(er),rr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const nr=sr=>{sr.target&&!rr.current&&handleAndDispatchCustomEvent$1(FOCUS_OUTSIDE,tr,{originalEvent:sr},{discrete:!1})};return _e.addEventListener("focusin",nr),()=>_e.removeEventListener("focusin",nr)},[_e,tr]),{onFocusCapture:()=>rr.current=!0,onBlurCapture:()=>rr.current=!1}}function dispatchUpdate(){const er=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(er)}function handleAndDispatchCustomEvent$1(er,_e,tr,{discrete:rr}){const nr=tr.originalEvent.target,sr=new CustomEvent(er,{bubbles:!1,cancelable:!0,detail:tr});_e&&nr.addEventListener(er,_e,{once:!0}),rr?dispatchDiscreteCustomEvent(nr,sr):nr.dispatchEvent(sr)}var Root$7=DismissableLayer,Branch=DismissableLayerBranch,useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},PORTAL_NAME$4="Portal",Portal$2=reactExports.forwardRef((er,_e)=>{var or;const{container:tr,...rr}=er,[nr,sr]=reactExports.useState(!1);useLayoutEffect2(()=>sr(!0),[]);const ir=tr||nr&&((or=globalThis==null?void 0:globalThis.document)==null?void 0:or.body);return ir?Gt$1.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...rr,ref:_e}),ir):null});Portal$2.displayName=PORTAL_NAME$4;function useStateMachine$1(er,_e){return reactExports.useReducer((tr,rr)=>_e[tr][rr]??tr,er)}var Presence=er=>{const{present:_e,children:tr}=er,rr=usePresence(_e),nr=typeof tr=="function"?tr({present:rr.isPresent}):reactExports.Children.only(tr),sr=useComposedRefs(rr.ref,getElementRef(nr));return typeof tr=="function"||rr.isPresent?reactExports.cloneElement(nr,{ref:sr}):null};Presence.displayName="Presence";function usePresence(er){const[_e,tr]=reactExports.useState(),rr=reactExports.useRef({}),nr=reactExports.useRef(er),sr=reactExports.useRef("none"),ir=er?"mounted":"unmounted",[or,ar]=useStateMachine$1(ir,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const lr=getAnimationName(rr.current);sr.current=or==="mounted"?lr:"none"},[or]),useLayoutEffect2(()=>{const lr=rr.current,cr=nr.current;if(cr!==er){const ur=sr.current,dr=getAnimationName(lr);er?ar("MOUNT"):dr==="none"||(lr==null?void 0:lr.display)==="none"?ar("UNMOUNT"):ar(cr&&ur!==dr?"ANIMATION_OUT":"UNMOUNT"),nr.current=er}},[er,ar]),useLayoutEffect2(()=>{if(_e){let lr;const cr=_e.ownerDocument.defaultView??window,Ar=dr=>{const pr=getAnimationName(rr.current).includes(dr.animationName);if(dr.target===_e&&pr&&(ar("ANIMATION_END"),!nr.current)){const yr=_e.style.animationFillMode;_e.style.animationFillMode="forwards",lr=cr.setTimeout(()=>{_e.style.animationFillMode==="forwards"&&(_e.style.animationFillMode=yr)})}},ur=dr=>{dr.target===_e&&(sr.current=getAnimationName(rr.current))};return _e.addEventListener("animationstart",ur),_e.addEventListener("animationcancel",Ar),_e.addEventListener("animationend",Ar),()=>{cr.clearTimeout(lr),_e.removeEventListener("animationstart",ur),_e.removeEventListener("animationcancel",Ar),_e.removeEventListener("animationend",Ar)}}else ar("ANIMATION_END")},[_e,ar]),{isPresent:["mounted","unmountSuspended"].includes(or),ref:reactExports.useCallback(lr=>{lr&&(rr.current=getComputedStyle(lr)),tr(lr)},[])}}function getAnimationName(er){return(er==null?void 0:er.animationName)||"none"}function getElementRef(er){var rr,nr;let _e=(rr=Object.getOwnPropertyDescriptor(er.props,"ref"))==null?void 0:rr.get,tr=_e&&"isReactWarning"in _e&&_e.isReactWarning;return tr?er.ref:(_e=(nr=Object.getOwnPropertyDescriptor(er,"ref"))==null?void 0:nr.get,tr=_e&&"isReactWarning"in _e&&_e.isReactWarning,tr?er.props.ref:er.props.ref||er.ref)}function useControllableState({prop:er,defaultProp:_e,onChange:tr=()=>{}}){const[rr,nr]=useUncontrolledState({defaultProp:_e,onChange:tr}),sr=er!==void 0,ir=sr?er:rr,or=useCallbackRef$1(tr),ar=reactExports.useCallback(lr=>{if(sr){const Ar=typeof lr=="function"?lr(er):lr;Ar!==er&&or(Ar)}else nr(lr)},[sr,er,nr,or]);return[ir,ar]}function useUncontrolledState({defaultProp:er,onChange:_e}){const tr=reactExports.useState(er),[rr]=tr,nr=reactExports.useRef(rr),sr=useCallbackRef$1(_e);return reactExports.useEffect(()=>{nr.current!==rr&&(sr(rr),nr.current=rr)},[rr,nr,sr]),tr}var NAME$2="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((er,_e)=>jsxRuntimeExports.jsx(Primitive.span,{...er,ref:_e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...er.style}}));VisuallyHidden.displayName=NAME$2;var Root$6=VisuallyHidden,PROVIDER_NAME$1="ToastProvider",[Collection$2,useCollection$2,createCollectionScope$2]=createCollection("Toast"),[createToastContext,createToastScope]=createContextScope$3("Toast",[createCollectionScope$2]),[ToastProviderProvider,useToastProviderContext]=createToastContext(PROVIDER_NAME$1),ToastProvider$1=er=>{const{__scopeToast:_e,label:tr="Notification",duration:rr=5e3,swipeDirection:nr="right",swipeThreshold:sr=50,children:ir}=er,[or,ar]=reactExports.useState(null),[lr,cr]=reactExports.useState(0),Ar=reactExports.useRef(!1),ur=reactExports.useRef(!1);return tr.trim()||console.error(`Invalid prop \`label\` supplied to \`${PROVIDER_NAME$1}\`. Expected non-empty \`string\`.`),jsxRuntimeExports.jsx(Collection$2.Provider,{scope:_e,children:jsxRuntimeExports.jsx(ToastProviderProvider,{scope:_e,label:tr,duration:rr,swipeDirection:nr,swipeThreshold:sr,toastCount:lr,viewport:or,onViewportChange:ar,onToastAdd:reactExports.useCallback(()=>cr(dr=>dr+1),[]),onToastRemove:reactExports.useCallback(()=>cr(dr=>dr-1),[]),isFocusedToastEscapeKeyDownRef:Ar,isClosePausedRef:ur,children:ir})})};ToastProvider$1.displayName=PROVIDER_NAME$1;var VIEWPORT_NAME$2="ToastViewport",VIEWPORT_DEFAULT_HOTKEY=["F8"],VIEWPORT_PAUSE="toast.viewportPause",VIEWPORT_RESUME="toast.viewportResume",ToastViewport$1=reactExports.forwardRef((er,_e)=>{const{__scopeToast:tr,hotkey:rr=VIEWPORT_DEFAULT_HOTKEY,label:nr="Notifications ({hotkey})",...sr}=er,ir=useToastProviderContext(VIEWPORT_NAME$2,tr),or=useCollection$2(tr),ar=reactExports.useRef(null),lr=reactExports.useRef(null),cr=reactExports.useRef(null),Ar=reactExports.useRef(null),ur=useComposedRefs(_e,Ar,ir.onViewportChange),dr=rr.join("+").replace(/Key/g,"").replace(/Digit/g,""),mr=ir.toastCount>0;reactExports.useEffect(()=>{const yr=hr=>{var Cr;rr.length!==0&&rr.every(Tr=>hr[Tr]||hr.code===Tr)&&((Cr=Ar.current)==null||Cr.focus())};return document.addEventListener("keydown",yr),()=>document.removeEventListener("keydown",yr)},[rr]),reactExports.useEffect(()=>{const yr=ar.current,hr=Ar.current;if(mr&&yr&&hr){const gr=()=>{if(!ir.isClosePausedRef.current){const Nr=new CustomEvent(VIEWPORT_PAUSE);hr.dispatchEvent(Nr),ir.isClosePausedRef.current=!0}},Cr=()=>{if(ir.isClosePausedRef.current){const Nr=new CustomEvent(VIEWPORT_RESUME);hr.dispatchEvent(Nr),ir.isClosePausedRef.current=!1}},Tr=Nr=>{!yr.contains(Nr.relatedTarget)&&Cr()},Sr=()=>{yr.contains(document.activeElement)||Cr()};return yr.addEventListener("focusin",gr),yr.addEventListener("focusout",Tr),yr.addEventListener("pointermove",gr),yr.addEventListener("pointerleave",Sr),window.addEventListener("blur",gr),window.addEventListener("focus",Cr),()=>{yr.removeEventListener("focusin",gr),yr.removeEventListener("focusout",Tr),yr.removeEventListener("pointermove",gr),yr.removeEventListener("pointerleave",Sr),window.removeEventListener("blur",gr),window.removeEventListener("focus",Cr)}}},[mr,ir.isClosePausedRef]);const pr=reactExports.useCallback(({tabbingDirection:yr})=>{const gr=or().map(Cr=>{const Tr=Cr.ref.current,Sr=[Tr,...getTabbableCandidates$1(Tr)];return yr==="forwards"?Sr:Sr.reverse()});return(yr==="forwards"?gr.reverse():gr).flat()},[or]);return reactExports.useEffect(()=>{const yr=Ar.current;if(yr){const hr=gr=>{var Sr,Nr,_r;const Cr=gr.altKey||gr.ctrlKey||gr.metaKey;if(gr.key==="Tab"&&!Cr){const vr=document.activeElement,br=gr.shiftKey;if(gr.target===yr&&br){(Sr=lr.current)==null||Sr.focus();return}const Rr=pr({tabbingDirection:br?"backwards":"forwards"}),Ir=Rr.findIndex(Qr=>Qr===vr);focusFirst$2(Rr.slice(Ir+1))?gr.preventDefault():br?(Nr=lr.current)==null||Nr.focus():(_r=cr.current)==null||_r.focus()}};return yr.addEventListener("keydown",hr),()=>yr.removeEventListener("keydown",hr)}},[or,pr]),jsxRuntimeExports.jsxs(Branch,{ref:ar,role:"region","aria-label":nr.replace("{hotkey}",dr),tabIndex:-1,style:{pointerEvents:mr?void 0:"none"},children:[mr&&jsxRuntimeExports.jsx(FocusProxy,{ref:lr,onFocusFromOutsideViewport:()=>{const yr=pr({tabbingDirection:"forwards"});focusFirst$2(yr)}}),jsxRuntimeExports.jsx(Collection$2.Slot,{scope:tr,children:jsxRuntimeExports.jsx(Primitive.ol,{tabIndex:-1,...sr,ref:ur})}),mr&&jsxRuntimeExports.jsx(FocusProxy,{ref:cr,onFocusFromOutsideViewport:()=>{const yr=pr({tabbingDirection:"backwards"});focusFirst$2(yr)}})]})});ToastViewport$1.displayName=VIEWPORT_NAME$2;var FOCUS_PROXY_NAME="ToastFocusProxy",FocusProxy=reactExports.forwardRef((er,_e)=>{const{__scopeToast:tr,onFocusFromOutsideViewport:rr,...nr}=er,sr=useToastProviderContext(FOCUS_PROXY_NAME,tr);return jsxRuntimeExports.jsx(VisuallyHidden,{"aria-hidden":!0,tabIndex:0,...nr,ref:_e,style:{position:"fixed"},onFocus:ir=>{var lr;const or=ir.relatedTarget;!((lr=sr.viewport)!=null&&lr.contains(or))&&rr()}})});FocusProxy.displayName=FOCUS_PROXY_NAME;var TOAST_NAME="Toast",TOAST_SWIPE_START="toast.swipeStart",TOAST_SWIPE_MOVE="toast.swipeMove",TOAST_SWIPE_CANCEL="toast.swipeCancel",TOAST_SWIPE_END="toast.swipeEnd",Toast$1=reactExports.forwardRef((er,_e)=>{const{forceMount:tr,open:rr,defaultOpen:nr,onOpenChange:sr,...ir}=er,[or=!0,ar]=useControllableState({prop:rr,defaultProp:nr,onChange:sr});return jsxRuntimeExports.jsx(Presence,{present:tr||or,children:jsxRuntimeExports.jsx(ToastImpl,{open:or,...ir,ref:_e,onClose:()=>ar(!1),onPause:useCallbackRef$1(er.onPause),onResume:useCallbackRef$1(er.onResume),onSwipeStart:composeEventHandlers$1(er.onSwipeStart,lr=>{lr.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:composeEventHandlers$1(er.onSwipeMove,lr=>{const{x:cr,y:Ar}=lr.detail.delta;lr.currentTarget.setAttribute("data-swipe","move"),lr.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${cr}px`),lr.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${Ar}px`)}),onSwipeCancel:composeEventHandlers$1(er.onSwipeCancel,lr=>{lr.currentTarget.setAttribute("data-swipe","cancel"),lr.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),lr.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),lr.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),lr.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:composeEventHandlers$1(er.onSwipeEnd,lr=>{const{x:cr,y:Ar}=lr.detail.delta;lr.currentTarget.setAttribute("data-swipe","end"),lr.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),lr.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),lr.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${cr}px`),lr.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${Ar}px`),ar(!1)})})})});Toast$1.displayName=TOAST_NAME;var[ToastInteractiveProvider,useToastInteractiveContext]=createToastContext(TOAST_NAME,{onClose(){}}),ToastImpl=reactExports.forwardRef((er,_e)=>{const{__scopeToast:tr,type:rr="foreground",duration:nr,open:sr,onClose:ir,onEscapeKeyDown:or,onPause:ar,onResume:lr,onSwipeStart:cr,onSwipeMove:Ar,onSwipeCancel:ur,onSwipeEnd:dr,...mr}=er,pr=useToastProviderContext(TOAST_NAME,tr),[yr,hr]=reactExports.useState(null),gr=useComposedRefs(_e,Qr=>hr(Qr)),Cr=reactExports.useRef(null),Tr=reactExports.useRef(null),Sr=nr||pr.duration,Nr=reactExports.useRef(0),_r=reactExports.useRef(Sr),vr=reactExports.useRef(0),{onToastAdd:br,onToastRemove:Pr}=pr,Er=useCallbackRef$1(()=>{var Ur;(yr==null?void 0:yr.contains(document.activeElement))&&((Ur=pr.viewport)==null||Ur.focus()),ir()}),Rr=reactExports.useCallback(Qr=>{!Qr||Qr===1/0||(window.clearTimeout(vr.current),Nr.current=new Date().getTime(),vr.current=window.setTimeout(Er,Qr))},[Er]);reactExports.useEffect(()=>{const Qr=pr.viewport;if(Qr){const Ur=()=>{Rr(_r.current),lr==null||lr()},Vr=()=>{const Wr=new Date().getTime()-Nr.current;_r.current=_r.current-Wr,window.clearTimeout(vr.current),ar==null||ar()};return Qr.addEventListener(VIEWPORT_PAUSE,Vr),Qr.addEventListener(VIEWPORT_RESUME,Ur),()=>{Qr.removeEventListener(VIEWPORT_PAUSE,Vr),Qr.removeEventListener(VIEWPORT_RESUME,Ur)}}},[pr.viewport,Sr,ar,lr,Rr]),reactExports.useEffect(()=>{sr&&!pr.isClosePausedRef.current&&Rr(Sr)},[sr,Sr,pr.isClosePausedRef,Rr]),reactExports.useEffect(()=>(br(),()=>Pr()),[br,Pr]);const Ir=reactExports.useMemo(()=>yr?getAnnounceTextContent(yr):null,[yr]);return pr.viewport?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Ir&&jsxRuntimeExports.jsx(ToastAnnounce,{__scopeToast:tr,role:"status","aria-live":rr==="foreground"?"assertive":"polite","aria-atomic":!0,children:Ir}),jsxRuntimeExports.jsx(ToastInteractiveProvider,{scope:tr,onClose:Er,children:reactDomExports.createPortal(jsxRuntimeExports.jsx(Collection$2.ItemSlot,{scope:tr,children:jsxRuntimeExports.jsx(Root$7,{asChild:!0,onEscapeKeyDown:composeEventHandlers$1(or,()=>{pr.isFocusedToastEscapeKeyDownRef.current||Er(),pr.isFocusedToastEscapeKeyDownRef.current=!1}),children:jsxRuntimeExports.jsx(Primitive.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":sr?"open":"closed","data-swipe-direction":pr.swipeDirection,...mr,ref:gr,style:{userSelect:"none",touchAction:"none",...er.style},onKeyDown:composeEventHandlers$1(er.onKeyDown,Qr=>{Qr.key==="Escape"&&(or==null||or(Qr.nativeEvent),Qr.nativeEvent.defaultPrevented||(pr.isFocusedToastEscapeKeyDownRef.current=!0,Er()))}),onPointerDown:composeEventHandlers$1(er.onPointerDown,Qr=>{Qr.button===0&&(Cr.current={x:Qr.clientX,y:Qr.clientY})}),onPointerMove:composeEventHandlers$1(er.onPointerMove,Qr=>{if(!Cr.current)return;const Ur=Qr.clientX-Cr.current.x,Vr=Qr.clientY-Cr.current.y,Wr=!!Tr.current,Hr=["left","right"].includes(pr.swipeDirection),$r=["left","up"].includes(pr.swipeDirection)?Math.min:Math.max,Xr=Hr?$r(0,Ur):0,pn=Hr?0:$r(0,Vr),jr=Qr.pointerType==="touch"?10:2,Br={x:Xr,y:pn},Lr={originalEvent:Qr,delta:Br};Wr?(Tr.current=Br,handleAndDispatchCustomEvent(TOAST_SWIPE_MOVE,Ar,Lr,{discrete:!1})):isDeltaInDirection(Br,pr.swipeDirection,jr)?(Tr.current=Br,handleAndDispatchCustomEvent(TOAST_SWIPE_START,cr,Lr,{discrete:!1}),Qr.target.setPointerCapture(Qr.pointerId)):(Math.abs(Ur)>jr||Math.abs(Vr)>jr)&&(Cr.current=null)}),onPointerUp:composeEventHandlers$1(er.onPointerUp,Qr=>{const Ur=Tr.current,Vr=Qr.target;if(Vr.hasPointerCapture(Qr.pointerId)&&Vr.releasePointerCapture(Qr.pointerId),Tr.current=null,Cr.current=null,Ur){const Wr=Qr.currentTarget,Hr={originalEvent:Qr,delta:Ur};isDeltaInDirection(Ur,pr.swipeDirection,pr.swipeThreshold)?handleAndDispatchCustomEvent(TOAST_SWIPE_END,dr,Hr,{discrete:!0}):handleAndDispatchCustomEvent(TOAST_SWIPE_CANCEL,ur,Hr,{discrete:!0}),Wr.addEventListener("click",$r=>$r.preventDefault(),{once:!0})}})})})}),pr.viewport)})]}):null}),ToastAnnounce=er=>{const{__scopeToast:_e,children:tr,...rr}=er,nr=useToastProviderContext(TOAST_NAME,_e),[sr,ir]=reactExports.useState(!1),[or,ar]=reactExports.useState(!1);return useNextFrame(()=>ir(!0)),reactExports.useEffect(()=>{const lr=window.setTimeout(()=>ar(!0),1e3);return()=>window.clearTimeout(lr)},[]),or?null:jsxRuntimeExports.jsx(Portal$2,{asChild:!0,children:jsxRuntimeExports.jsx(VisuallyHidden,{...rr,children:sr&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[nr.label," ",tr]})})})},TITLE_NAME$2="ToastTitle",ToastTitle$1=reactExports.forwardRef((er,_e)=>{const{__scopeToast:tr,...rr}=er;return jsxRuntimeExports.jsx(Primitive.div,{...rr,ref:_e})});ToastTitle$1.displayName=TITLE_NAME$2;var DESCRIPTION_NAME$2="ToastDescription",ToastDescription$1=reactExports.forwardRef((er,_e)=>{const{__scopeToast:tr,...rr}=er;return jsxRuntimeExports.jsx(Primitive.div,{...rr,ref:_e})});ToastDescription$1.displayName=DESCRIPTION_NAME$2;var ACTION_NAME$1="ToastAction",ToastAction$1=reactExports.forwardRef((er,_e)=>{const{altText:tr,...rr}=er;return tr.trim()?jsxRuntimeExports.jsx(ToastAnnounceExclude,{altText:tr,asChild:!0,children:jsxRuntimeExports.jsx(ToastClose$1,{...rr,ref:_e})}):(console.error(`Invalid prop \`altText\` supplied to \`${ACTION_NAME$1}\`. Expected non-empty \`string\`.`),null)});ToastAction$1.displayName=ACTION_NAME$1;var CLOSE_NAME$1="ToastClose",ToastClose$1=reactExports.forwardRef((er,_e)=>{const{__scopeToast:tr,...rr}=er,nr=useToastInteractiveContext(CLOSE_NAME$1,tr);return jsxRuntimeExports.jsx(ToastAnnounceExclude,{asChild:!0,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",...rr,ref:_e,onClick:composeEventHandlers$1(er.onClick,nr.onClose)})})});ToastClose$1.displayName=CLOSE_NAME$1;var ToastAnnounceExclude=reactExports.forwardRef((er,_e)=>{const{__scopeToast:tr,altText:rr,...nr}=er;return jsxRuntimeExports.jsx(Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":rr||void 0,...nr,ref:_e})});function getAnnounceTextContent(er){const _e=[];return Array.from(er.childNodes).forEach(rr=>{if(rr.nodeType===rr.TEXT_NODE&&rr.textContent&&_e.push(rr.textContent),isHTMLElement$2(rr)){const nr=rr.ariaHidden||rr.hidden||rr.style.display==="none",sr=rr.dataset.radixToastAnnounceExclude==="";if(!nr)if(sr){const ir=rr.dataset.radixToastAnnounceAlt;ir&&_e.push(ir)}else _e.push(...getAnnounceTextContent(rr))}}),_e}function handleAndDispatchCustomEvent(er,_e,tr,{discrete:rr}){const nr=tr.originalEvent.currentTarget,sr=new CustomEvent(er,{bubbles:!0,cancelable:!0,detail:tr});_e&&nr.addEventListener(er,_e,{once:!0}),rr?dispatchDiscreteCustomEvent(nr,sr):nr.dispatchEvent(sr)}var isDeltaInDirection=(er,_e,tr=0)=>{const rr=Math.abs(er.x),nr=Math.abs(er.y),sr=rr>nr;return _e==="left"||_e==="right"?sr&&rr>tr:!sr&&nr>tr};function useNextFrame(er=()=>{}){const _e=useCallbackRef$1(er);useLayoutEffect2(()=>{let tr=0,rr=0;return tr=window.requestAnimationFrame(()=>rr=window.requestAnimationFrame(_e)),()=>{window.cancelAnimationFrame(tr),window.cancelAnimationFrame(rr)}},[_e])}function isHTMLElement$2(er){return er.nodeType===er.ELEMENT_NODE}function getTabbableCandidates$1(er){const _e=[],tr=document.createTreeWalker(er,NodeFilter.SHOW_ELEMENT,{acceptNode:rr=>{const nr=rr.tagName==="INPUT"&&rr.type==="hidden";return rr.disabled||rr.hidden||nr?NodeFilter.FILTER_SKIP:rr.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;tr.nextNode();)_e.push(tr.currentNode);return _e}function focusFirst$2(er){const _e=document.activeElement;return er.some(tr=>tr===_e?!0:(tr.focus(),document.activeElement!==_e))}var Provider$2=ToastProvider$1,Viewport$2=ToastViewport$1,Root2$5=Toast$1,Title$1=ToastTitle$1,Description$1=ToastDescription$1,Action$1=ToastAction$1,Close$1=ToastClose$1;function r(er){var _e,tr,rr="";if(typeof er=="string"||typeof er=="number")rr+=er;else if(typeof er=="object")if(Array.isArray(er)){var nr=er.length;for(_e=0;_e<nr;_e++)er[_e]&&(tr=r(er[_e]))&&(rr&&(rr+=" "),rr+=tr)}else for(tr in er)er[tr]&&(rr&&(rr+=" "),rr+=tr);return rr}function clsx(){for(var er,_e,tr=0,rr="",nr=arguments.length;tr<nr;tr++)(er=arguments[tr])&&(_e=r(er))&&(rr&&(rr+=" "),rr+=_e);return rr}const falsyToString=er=>typeof er=="boolean"?`${er}`:er===0?"0":er,cx=clsx,cva=(er,_e)=>tr=>{var rr;if((_e==null?void 0:_e.variants)==null)return cx(er,tr==null?void 0:tr.class,tr==null?void 0:tr.className);const{variants:nr,defaultVariants:sr}=_e,ir=Object.keys(nr).map(lr=>{const cr=tr==null?void 0:tr[lr],Ar=sr==null?void 0:sr[lr];if(cr===null)return null;const ur=falsyToString(cr)||falsyToString(Ar);return nr[lr][ur]}),or=tr&&Object.entries(tr).reduce((lr,cr)=>{let[Ar,ur]=cr;return ur===void 0||(lr[Ar]=ur),lr},{}),ar=_e==null||(rr=_e.compoundVariants)===null||rr===void 0?void 0:rr.reduce((lr,cr)=>{let{class:Ar,className:ur,...dr}=cr;return Object.entries(dr).every(mr=>{let[pr,yr]=mr;return Array.isArray(yr)?yr.includes({...sr,...or}[pr]):{...sr,...or}[pr]===yr})?[...lr,Ar,ur]:lr},[]);return cx(er,ir,ar,tr==null?void 0:tr.class,tr==null?void 0:tr.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=er=>er.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(...er)=>er.filter((_e,tr,rr)=>!!_e&&_e.trim()!==""&&rr.indexOf(_e)===tr).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon$1=reactExports.forwardRef(({color:er="currentColor",size:_e=24,strokeWidth:tr=2,absoluteStrokeWidth:rr,className:nr="",children:sr,iconNode:ir,...or},ar)=>reactExports.createElement("svg",{ref:ar,...defaultAttributes,width:_e,height:_e,stroke:er,strokeWidth:rr?Number(tr)*24/Number(_e):tr,className:mergeClasses("lucide",nr),...or},[...ir.map(([lr,cr])=>reactExports.createElement(lr,cr)),...Array.isArray(sr)?sr:[sr]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(er,_e)=>{const tr=reactExports.forwardRef(({className:rr,...nr},sr)=>reactExports.createElement(Icon$1,{ref:sr,iconNode:_e,className:mergeClasses(`lucide-${toKebabCase(er)}`,rr),...nr}));return tr.displayName=`${er}`,tr};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowLeft=createLucideIcon("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowRight=createLucideIcon("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Award=createLucideIcon("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BookOpen=createLucideIcon("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Brain=createLucideIcon("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Calendar=createLucideIcon("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronLeft=createLucideIcon("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronRight=createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronUp=createLucideIcon("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleAlert=createLucideIcon("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleCheckBig=createLucideIcon("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Circle=createLucideIcon("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Clock=createLucideIcon("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Coffee=createLucideIcon("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Download=createLucideIcon("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ellipsis=createLucideIcon("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileText=createLucideIcon("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Filter$1=createLucideIcon("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FolderPlus=createLucideIcon("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const History=createLucideIcon("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Image$1=createLucideIcon("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Languages=createLucideIcon("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LoaderCircle=createLucideIcon("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LogOut=createLucideIcon("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Menu=createLucideIcon("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MessageCircle=createLucideIcon("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Paperclip=createLucideIcon("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pause=createLucideIcon("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Phone=createLucideIcon("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Play=createLucideIcon("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Plus=createLucideIcon("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RefreshCw=createLucideIcon("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RotateCcw=createLucideIcon("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Save=createLucideIcon("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Send=createLucideIcon("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Settings=createLucideIcon("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Shield=createLucideIcon("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sparkles=createLucideIcon("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SquarePen=createLucideIcon("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Square=createLucideIcon("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Target=createLucideIcon("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TrendingUp=createLucideIcon("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TriangleAlert=createLucideIcon("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trophy=createLucideIcon("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upload=createLucideIcon("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const User$1=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Users=createLucideIcon("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Volume2=createLucideIcon("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VolumeX=createLucideIcon("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$1=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zap=createLucideIcon("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),CLASS_PART_SEPARATOR="-",createClassGroupUtils=er=>{const _e=createClassMap(er),{conflictingClassGroups:tr,conflictingClassGroupModifiers:rr}=er;return{getClassGroupId:ir=>{const or=ir.split(CLASS_PART_SEPARATOR);return or[0]===""&&or.length!==1&&or.shift(),getGroupRecursive(or,_e)||getGroupIdForArbitraryProperty(ir)},getConflictingClassGroupIds:(ir,or)=>{const ar=tr[ir]||[];return or&&rr[ir]?[...ar,...rr[ir]]:ar}}},getGroupRecursive=(er,_e)=>{var ir;if(er.length===0)return _e.classGroupId;const tr=er[0],rr=_e.nextPart.get(tr),nr=rr?getGroupRecursive(er.slice(1),rr):void 0;if(nr)return nr;if(_e.validators.length===0)return;const sr=er.join(CLASS_PART_SEPARATOR);return(ir=_e.validators.find(({validator:or})=>or(sr)))==null?void 0:ir.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=er=>{if(arbitraryPropertyRegex.test(er)){const _e=arbitraryPropertyRegex.exec(er)[1],tr=_e==null?void 0:_e.substring(0,_e.indexOf(":"));if(tr)return"arbitrary.."+tr}},createClassMap=er=>{const{theme:_e,prefix:tr}=er,rr={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(er.classGroups),tr).forEach(([sr,ir])=>{processClassesRecursively(ir,rr,sr,_e)}),rr},processClassesRecursively=(er,_e,tr,rr)=>{er.forEach(nr=>{if(typeof nr=="string"){const sr=nr===""?_e:getPart(_e,nr);sr.classGroupId=tr;return}if(typeof nr=="function"){if(isThemeGetter(nr)){processClassesRecursively(nr(rr),_e,tr,rr);return}_e.validators.push({validator:nr,classGroupId:tr});return}Object.entries(nr).forEach(([sr,ir])=>{processClassesRecursively(ir,getPart(_e,sr),tr,rr)})})},getPart=(er,_e)=>{let tr=er;return _e.split(CLASS_PART_SEPARATOR).forEach(rr=>{tr.nextPart.has(rr)||tr.nextPart.set(rr,{nextPart:new Map,validators:[]}),tr=tr.nextPart.get(rr)}),tr},isThemeGetter=er=>er.isThemeGetter,getPrefixedClassGroupEntries=(er,_e)=>_e?er.map(([tr,rr])=>{const nr=rr.map(sr=>typeof sr=="string"?_e+sr:typeof sr=="object"?Object.fromEntries(Object.entries(sr).map(([ir,or])=>[_e+ir,or])):sr);return[tr,nr]}):er,createLruCache=er=>{if(er<1)return{get:()=>{},set:()=>{}};let _e=0,tr=new Map,rr=new Map;const nr=(sr,ir)=>{tr.set(sr,ir),_e++,_e>er&&(_e=0,rr=tr,tr=new Map)};return{get(sr){let ir=tr.get(sr);if(ir!==void 0)return ir;if((ir=rr.get(sr))!==void 0)return nr(sr,ir),ir},set(sr,ir){tr.has(sr)?tr.set(sr,ir):nr(sr,ir)}}},IMPORTANT_MODIFIER="!",createParseClassName=er=>{const{separator:_e,experimentalParseClassName:tr}=er,rr=_e.length===1,nr=_e[0],sr=_e.length,ir=or=>{const ar=[];let lr=0,cr=0,Ar;for(let yr=0;yr<or.length;yr++){let hr=or[yr];if(lr===0){if(hr===nr&&(rr||or.slice(yr,yr+sr)===_e)){ar.push(or.slice(cr,yr)),cr=yr+sr;continue}if(hr==="/"){Ar=yr;continue}}hr==="["?lr++:hr==="]"&&lr--}const ur=ar.length===0?or:or.substring(cr),dr=ur.startsWith(IMPORTANT_MODIFIER),mr=dr?ur.substring(1):ur,pr=Ar&&Ar>cr?Ar-cr:void 0;return{modifiers:ar,hasImportantModifier:dr,baseClassName:mr,maybePostfixModifierPosition:pr}};return tr?or=>tr({className:or,parseClassName:ir}):ir},sortModifiers=er=>{if(er.length<=1)return er;const _e=[];let tr=[];return er.forEach(rr=>{rr[0]==="["?(_e.push(...tr.sort(),rr),tr=[]):tr.push(rr)}),_e.push(...tr.sort()),_e},createConfigUtils=er=>({cache:createLruCache(er.cacheSize),parseClassName:createParseClassName(er),...createClassGroupUtils(er)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(er,_e)=>{const{parseClassName:tr,getClassGroupId:rr,getConflictingClassGroupIds:nr}=_e,sr=[],ir=er.trim().split(SPLIT_CLASSES_REGEX);let or="";for(let ar=ir.length-1;ar>=0;ar-=1){const lr=ir[ar],{modifiers:cr,hasImportantModifier:Ar,baseClassName:ur,maybePostfixModifierPosition:dr}=tr(lr);let mr=!!dr,pr=rr(mr?ur.substring(0,dr):ur);if(!pr){if(!mr){or=lr+(or.length>0?" "+or:or);continue}if(pr=rr(ur),!pr){or=lr+(or.length>0?" "+or:or);continue}mr=!1}const yr=sortModifiers(cr).join(":"),hr=Ar?yr+IMPORTANT_MODIFIER:yr,gr=hr+pr;if(sr.includes(gr))continue;sr.push(gr);const Cr=nr(pr,mr);for(let Tr=0;Tr<Cr.length;++Tr){const Sr=Cr[Tr];sr.push(hr+Sr)}or=lr+(or.length>0?" "+or:or)}return or};function twJoin(){let er=0,_e,tr,rr="";for(;er<arguments.length;)(_e=arguments[er++])&&(tr=toValue(_e))&&(rr&&(rr+=" "),rr+=tr);return rr}const toValue=er=>{if(typeof er=="string")return er;let _e,tr="";for(let rr=0;rr<er.length;rr++)er[rr]&&(_e=toValue(er[rr]))&&(tr&&(tr+=" "),tr+=_e);return tr};function createTailwindMerge(er,..._e){let tr,rr,nr,sr=ir;function ir(ar){const lr=_e.reduce((cr,Ar)=>Ar(cr),er());return tr=createConfigUtils(lr),rr=tr.cache.get,nr=tr.cache.set,sr=or,or(ar)}function or(ar){const lr=rr(ar);if(lr)return lr;const cr=mergeClassList(ar,tr);return nr(ar,cr),cr}return function(){return sr(twJoin.apply(null,arguments))}}const fromTheme=er=>{const _e=tr=>tr[er]||[];return _e.isThemeGetter=!0,_e},arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isLength$1=er=>isNumber$1(er)||stringLengths.has(er)||fractionRegex.test(er),isArbitraryLength=er=>getIsArbitraryValue(er,"length",isLengthOnly),isNumber$1=er=>!!er&&!Number.isNaN(Number(er)),isArbitraryNumber=er=>getIsArbitraryValue(er,"number",isNumber$1),isInteger$1=er=>!!er&&Number.isInteger(Number(er)),isPercent=er=>er.endsWith("%")&&isNumber$1(er.slice(0,-1)),isArbitraryValue=er=>arbitraryValueRegex.test(er),isTshirtSize=er=>tshirtUnitRegex.test(er),sizeLabels=new Set(["length","size","percentage"]),isArbitrarySize=er=>getIsArbitraryValue(er,sizeLabels,isNever),isArbitraryPosition=er=>getIsArbitraryValue(er,"position",isNever),imageLabels=new Set(["image","url"]),isArbitraryImage=er=>getIsArbitraryValue(er,imageLabels,isImage),isArbitraryShadow=er=>getIsArbitraryValue(er,"",isShadow),isAny=()=>!0,getIsArbitraryValue=(er,_e,tr)=>{const rr=arbitraryValueRegex.exec(er);return rr?rr[1]?typeof _e=="string"?rr[1]===_e:_e.has(rr[1]):tr(rr[2]):!1},isLengthOnly=er=>lengthUnitRegex.test(er)&&!colorFunctionRegex.test(er),isNever=()=>!1,isShadow=er=>shadowRegex.test(er),isImage=er=>imageRegex.test(er),getDefaultConfig=()=>{const er=fromTheme("colors"),_e=fromTheme("spacing"),tr=fromTheme("blur"),rr=fromTheme("brightness"),nr=fromTheme("borderColor"),sr=fromTheme("borderRadius"),ir=fromTheme("borderSpacing"),or=fromTheme("borderWidth"),ar=fromTheme("contrast"),lr=fromTheme("grayscale"),cr=fromTheme("hueRotate"),Ar=fromTheme("invert"),ur=fromTheme("gap"),dr=fromTheme("gradientColorStops"),mr=fromTheme("gradientColorStopPositions"),pr=fromTheme("inset"),yr=fromTheme("margin"),hr=fromTheme("opacity"),gr=fromTheme("padding"),Cr=fromTheme("saturate"),Tr=fromTheme("scale"),Sr=fromTheme("sepia"),Nr=fromTheme("skew"),_r=fromTheme("space"),vr=fromTheme("translate"),br=()=>["auto","contain","none"],Pr=()=>["auto","hidden","clip","visible","scroll"],Er=()=>["auto",isArbitraryValue,_e],Rr=()=>[isArbitraryValue,_e],Ir=()=>["",isLength$1,isArbitraryLength],Qr=()=>["auto",isNumber$1,isArbitraryValue],Ur=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Vr=()=>["solid","dashed","dotted","double","none"],Wr=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Hr=()=>["start","end","center","between","around","evenly","stretch"],$r=()=>["","0",isArbitraryValue],Xr=()=>["auto","avoid","all","avoid-page","page","left","right","column"],pn=()=>[isNumber$1,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength$1,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:pn(),borderColor:[er],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:Rr(),borderWidth:Ir(),contrast:pn(),grayscale:$r(),hueRotate:pn(),invert:$r(),gap:Rr(),gradientColorStops:[er],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:Er(),margin:Er(),opacity:pn(),padding:Rr(),saturate:pn(),scale:pn(),sepia:$r(),skew:pn(),space:Rr(),translate:Rr()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":Xr()}],"break-before":[{"break-before":Xr()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ur(),isArbitraryValue]}],overflow:[{overflow:Pr()}],"overflow-x":[{"overflow-x":Pr()}],"overflow-y":[{"overflow-y":Pr()}],overscroll:[{overscroll:br()}],"overscroll-x":[{"overscroll-x":br()}],"overscroll-y":[{"overscroll-y":br()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[pr]}],"inset-x":[{"inset-x":[pr]}],"inset-y":[{"inset-y":[pr]}],start:[{start:[pr]}],end:[{end:[pr]}],top:[{top:[pr]}],right:[{right:[pr]}],bottom:[{bottom:[pr]}],left:[{left:[pr]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger$1,isArbitraryValue]}],basis:[{basis:Er()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:$r()}],shrink:[{shrink:$r()}],order:[{order:["first","last","none",isInteger$1,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger$1,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":Qr()}],"col-end":[{"col-end":Qr()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger$1,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":Qr()}],"row-end":[{"row-end":Qr()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[ur]}],"gap-x":[{"gap-x":[ur]}],"gap-y":[{"gap-y":[ur]}],"justify-content":[{justify:["normal",...Hr()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Hr(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Hr(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[gr]}],px:[{px:[gr]}],py:[{py:[gr]}],ps:[{ps:[gr]}],pe:[{pe:[gr]}],pt:[{pt:[gr]}],pr:[{pr:[gr]}],pb:[{pb:[gr]}],pl:[{pl:[gr]}],m:[{m:[yr]}],mx:[{mx:[yr]}],my:[{my:[yr]}],ms:[{ms:[yr]}],me:[{me:[yr]}],mt:[{mt:[yr]}],mr:[{mr:[yr]}],mb:[{mb:[yr]}],ml:[{ml:[yr]}],"space-x":[{"space-x":[_r]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_r]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,_e]}],"min-w":[{"min-w":[isArbitraryValue,_e,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,_e,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,_e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,_e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,_e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,_e,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$1,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength$1,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[er]}],"placeholder-opacity":[{"placeholder-opacity":[hr]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[er]}],"text-opacity":[{"text-opacity":[hr]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Vr(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength$1,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength$1,isArbitraryValue]}],"text-decoration-color":[{decoration:[er]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Rr()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[hr]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ur(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[er]}],"gradient-from-pos":[{from:[mr]}],"gradient-via-pos":[{via:[mr]}],"gradient-to-pos":[{to:[mr]}],"gradient-from":[{from:[dr]}],"gradient-via":[{via:[dr]}],"gradient-to":[{to:[dr]}],rounded:[{rounded:[sr]}],"rounded-s":[{"rounded-s":[sr]}],"rounded-e":[{"rounded-e":[sr]}],"rounded-t":[{"rounded-t":[sr]}],"rounded-r":[{"rounded-r":[sr]}],"rounded-b":[{"rounded-b":[sr]}],"rounded-l":[{"rounded-l":[sr]}],"rounded-ss":[{"rounded-ss":[sr]}],"rounded-se":[{"rounded-se":[sr]}],"rounded-ee":[{"rounded-ee":[sr]}],"rounded-es":[{"rounded-es":[sr]}],"rounded-tl":[{"rounded-tl":[sr]}],"rounded-tr":[{"rounded-tr":[sr]}],"rounded-br":[{"rounded-br":[sr]}],"rounded-bl":[{"rounded-bl":[sr]}],"border-w":[{border:[or]}],"border-w-x":[{"border-x":[or]}],"border-w-y":[{"border-y":[or]}],"border-w-s":[{"border-s":[or]}],"border-w-e":[{"border-e":[or]}],"border-w-t":[{"border-t":[or]}],"border-w-r":[{"border-r":[or]}],"border-w-b":[{"border-b":[or]}],"border-w-l":[{"border-l":[or]}],"border-opacity":[{"border-opacity":[hr]}],"border-style":[{border:[...Vr(),"hidden"]}],"divide-x":[{"divide-x":[or]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[or]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[hr]}],"divide-style":[{divide:Vr()}],"border-color":[{border:[nr]}],"border-color-x":[{"border-x":[nr]}],"border-color-y":[{"border-y":[nr]}],"border-color-s":[{"border-s":[nr]}],"border-color-e":[{"border-e":[nr]}],"border-color-t":[{"border-t":[nr]}],"border-color-r":[{"border-r":[nr]}],"border-color-b":[{"border-b":[nr]}],"border-color-l":[{"border-l":[nr]}],"divide-color":[{divide:[nr]}],"outline-style":[{outline:["",...Vr()]}],"outline-offset":[{"outline-offset":[isLength$1,isArbitraryValue]}],"outline-w":[{outline:[isLength$1,isArbitraryLength]}],"outline-color":[{outline:[er]}],"ring-w":[{ring:Ir()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[er]}],"ring-opacity":[{"ring-opacity":[hr]}],"ring-offset-w":[{"ring-offset":[isLength$1,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[er]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[hr]}],"mix-blend":[{"mix-blend":[...Wr(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Wr()}],filter:[{filter:["","none"]}],blur:[{blur:[tr]}],brightness:[{brightness:[rr]}],contrast:[{contrast:[ar]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[lr]}],"hue-rotate":[{"hue-rotate":[cr]}],invert:[{invert:[Ar]}],saturate:[{saturate:[Cr]}],sepia:[{sepia:[Sr]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[tr]}],"backdrop-brightness":[{"backdrop-brightness":[rr]}],"backdrop-contrast":[{"backdrop-contrast":[ar]}],"backdrop-grayscale":[{"backdrop-grayscale":[lr]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[cr]}],"backdrop-invert":[{"backdrop-invert":[Ar]}],"backdrop-opacity":[{"backdrop-opacity":[hr]}],"backdrop-saturate":[{"backdrop-saturate":[Cr]}],"backdrop-sepia":[{"backdrop-sepia":[Sr]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[ir]}],"border-spacing-x":[{"border-spacing-x":[ir]}],"border-spacing-y":[{"border-spacing-y":[ir]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:pn()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:pn()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[Tr]}],"scale-x":[{"scale-x":[Tr]}],"scale-y":[{"scale-y":[Tr]}],rotate:[{rotate:[isInteger$1,isArbitraryValue]}],"translate-x":[{"translate-x":[vr]}],"translate-y":[{"translate-y":[vr]}],"skew-x":[{"skew-x":[Nr]}],"skew-y":[{"skew-y":[Nr]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",er]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[er]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Rr()}],"scroll-mx":[{"scroll-mx":Rr()}],"scroll-my":[{"scroll-my":Rr()}],"scroll-ms":[{"scroll-ms":Rr()}],"scroll-me":[{"scroll-me":Rr()}],"scroll-mt":[{"scroll-mt":Rr()}],"scroll-mr":[{"scroll-mr":Rr()}],"scroll-mb":[{"scroll-mb":Rr()}],"scroll-ml":[{"scroll-ml":Rr()}],"scroll-p":[{"scroll-p":Rr()}],"scroll-px":[{"scroll-px":Rr()}],"scroll-py":[{"scroll-py":Rr()}],"scroll-ps":[{"scroll-ps":Rr()}],"scroll-pe":[{"scroll-pe":Rr()}],"scroll-pt":[{"scroll-pt":Rr()}],"scroll-pr":[{"scroll-pr":Rr()}],"scroll-pb":[{"scroll-pb":Rr()}],"scroll-pl":[{"scroll-pl":Rr()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[er,"none"]}],"stroke-w":[{stroke:[isLength$1,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[er,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},twMerge=createTailwindMerge(getDefaultConfig);function cn$1(...er){return twMerge(clsx(er))}const ToastProvider=Provider$2,ToastViewport=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Viewport$2,{ref:tr,className:cn$1("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",er),..._e}));ToastViewport.displayName=Viewport$2.displayName;const toastVariants=cva("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Toast=reactExports.forwardRef(({className:er,variant:_e,...tr},rr)=>jsxRuntimeExports.jsx(Root2$5,{ref:rr,className:cn$1(toastVariants({variant:_e}),er),...tr}));Toast.displayName=Root2$5.displayName;const ToastAction=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Action$1,{ref:tr,className:cn$1("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",er),..._e}));ToastAction.displayName=Action$1.displayName;const ToastClose=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Close$1,{ref:tr,className:cn$1("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",er),"toast-close":"",..._e,children:jsxRuntimeExports.jsx(X$1,{className:"h-4 w-4"})}));ToastClose.displayName=Close$1.displayName;const ToastTitle=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Title$1,{ref:tr,className:cn$1("text-sm font-semibold",er),..._e}));ToastTitle.displayName=Title$1.displayName;const ToastDescription=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Description$1,{ref:tr,className:cn$1("text-sm opacity-90",er),..._e}));ToastDescription.displayName=Description$1.displayName;function Toaster$1(){const{toasts:er}=useToast();return jsxRuntimeExports.jsxs(ToastProvider,{children:[er.map(function({id:_e,title:tr,description:rr,action:nr,...sr}){return jsxRuntimeExports.jsxs(Toast,{...sr,children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-1",children:[tr&&jsxRuntimeExports.jsx(ToastTitle,{children:tr}),rr&&jsxRuntimeExports.jsx(ToastDescription,{children:rr})]}),nr,jsxRuntimeExports.jsx(ToastClose,{})]},_e)}),jsxRuntimeExports.jsx(ToastViewport,{})]})}var P$1=["light","dark"],E$2="(prefers-color-scheme: dark)",L$3=reactExports.createContext(void 0),D$1={setTheme:er=>{},themes:[]},j$1=()=>{var er;return(er=reactExports.useContext(L$3))!=null?er:D$1};reactExports.memo(({forcedTheme:er,storageKey:_e,attribute:tr,enableSystem:rr,enableColorScheme:nr,defaultTheme:sr,value:ir,attrs:or,nonce:ar})=>{let lr=sr==="system",cr=tr==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${or.map(mr=>`'${mr}'`).join(",")})`};`:`var d=document.documentElement,n='${tr}',s='setAttribute';`,Ar=nr?P$1.includes(sr)&&sr?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${sr}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",ur=(mr,pr=!1,yr=!0)=>{let hr=ir?ir[mr]:mr,gr=pr?mr+"|| ''":`'${hr}'`,Cr="";return nr&&yr&&!pr&&P$1.includes(mr)&&(Cr+=`d.style.colorScheme = '${mr}';`),tr==="class"?pr||hr?Cr+=`c.add(${gr})`:Cr+="null":hr&&(Cr+=`d[s](n,${gr})`),Cr},dr=er?`!function(){${cr}${ur(er)}}()`:rr?`!function(){try{${cr}var e=localStorage.getItem('${_e}');if('system'===e||(!e&&${lr})){var t='${E$2}',m=window.matchMedia(t);if(m.media!==t||m.matches){${ur("dark")}}else{${ur("light")}}}else if(e){${ir?`var x=${JSON.stringify(ir)};`:""}${ur(ir?"x[e]":"e",!0)}}${lr?"":"else{"+ur(sr,!1,!1)+"}"}${Ar}}catch(e){}}()`:`!function(){try{${cr}var e=localStorage.getItem('${_e}');if(e){${ir?`var x=${JSON.stringify(ir)};`:""}${ur(ir?"x[e]":"e",!0)}}else{${ur(sr,!1,!1)};}${Ar}}catch(t){}}();`;return reactExports.createElement("script",{nonce:ar,dangerouslySetInnerHTML:{__html:dr}})});var Ct$1=er=>{switch(er){case"success":return $t$2;case"info":return _t$2;case"warning":return Wt$1;case"error":return Ut$1;default:return null}},Ft$2=Array(12).fill(0),It$1=({visible:er})=>React.createElement("div",{className:"sonner-loading-wrapper","data-visible":er},React.createElement("div",{className:"sonner-spinner"},Ft$2.map((_e,tr)=>React.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${tr}`})))),$t$2=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Wt$1=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),_t$2=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ut$1=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Dt$1=()=>{let[er,_e]=React.useState(document.hidden);return React.useEffect(()=>{let tr=()=>{_e(document.hidden)};return document.addEventListener("visibilitychange",tr),()=>window.removeEventListener("visibilitychange",tr)},[]),er},ct$2=1,ut$2=class{constructor(){this.subscribe=_e=>(this.subscribers.push(_e),()=>{let tr=this.subscribers.indexOf(_e);this.subscribers.splice(tr,1)}),this.publish=_e=>{this.subscribers.forEach(tr=>tr(_e))},this.addToast=_e=>{this.publish(_e),this.toasts=[...this.toasts,_e]},this.create=_e=>{var tr;let{message:rr,...nr}=_e,sr=typeof(_e==null?void 0:_e.id)=="number"||((tr=_e.id)==null?void 0:tr.length)>0?_e.id:ct$2++,ir=this.toasts.find(ar=>ar.id===sr),or=_e.dismissible===void 0?!0:_e.dismissible;return ir?this.toasts=this.toasts.map(ar=>ar.id===sr?(this.publish({...ar,..._e,id:sr,title:rr}),{...ar,..._e,id:sr,dismissible:or,title:rr}):ar):this.addToast({title:rr,...nr,dismissible:or,id:sr}),sr},this.dismiss=_e=>(_e||this.toasts.forEach(tr=>{this.subscribers.forEach(rr=>rr({id:tr.id,dismiss:!0}))}),this.subscribers.forEach(tr=>tr({id:_e,dismiss:!0})),_e),this.message=(_e,tr)=>this.create({...tr,message:_e}),this.error=(_e,tr)=>this.create({...tr,message:_e,type:"error"}),this.success=(_e,tr)=>this.create({...tr,type:"success",message:_e}),this.info=(_e,tr)=>this.create({...tr,type:"info",message:_e}),this.warning=(_e,tr)=>this.create({...tr,type:"warning",message:_e}),this.loading=(_e,tr)=>this.create({...tr,type:"loading",message:_e}),this.promise=(_e,tr)=>{if(!tr)return;let rr;tr.loading!==void 0&&(rr=this.create({...tr,promise:_e,type:"loading",message:tr.loading,description:typeof tr.description!="function"?tr.description:void 0}));let nr=_e instanceof Promise?_e:_e(),sr=rr!==void 0;return nr.then(async ir=>{if(Ot$2(ir)&&!ir.ok){sr=!1;let or=typeof tr.error=="function"?await tr.error(`HTTP error! status: ${ir.status}`):tr.error,ar=typeof tr.description=="function"?await tr.description(`HTTP error! status: ${ir.status}`):tr.description;this.create({id:rr,type:"error",message:or,description:ar})}else if(tr.success!==void 0){sr=!1;let or=typeof tr.success=="function"?await tr.success(ir):tr.success,ar=typeof tr.description=="function"?await tr.description(ir):tr.description;this.create({id:rr,type:"success",message:or,description:ar})}}).catch(async ir=>{if(tr.error!==void 0){sr=!1;let or=typeof tr.error=="function"?await tr.error(ir):tr.error,ar=typeof tr.description=="function"?await tr.description(ir):tr.description;this.create({id:rr,type:"error",message:or,description:ar})}}).finally(()=>{var ir;sr&&(this.dismiss(rr),rr=void 0),(ir=tr.finally)==null||ir.call(tr)}),rr},this.custom=(_e,tr)=>{let rr=(tr==null?void 0:tr.id)||ct$2++;return this.create({jsx:_e(rr),id:rr,...tr}),rr},this.subscribers=[],this.toasts=[]}},v$1=new ut$2,Vt$2=(er,_e)=>{let tr=(_e==null?void 0:_e.id)||ct$2++;return v$1.addToast({title:er,..._e,id:tr}),tr},Ot$2=er=>er&&typeof er=="object"&&"ok"in er&&typeof er.ok=="boolean"&&"status"in er&&typeof er.status=="number",Kt$1=Vt$2,Xt$2=()=>v$1.toasts,Jt$2=Object.assign(Kt$1,{success:v$1.success,info:v$1.info,warning:v$1.warning,error:v$1.error,custom:v$1.custom,message:v$1.message,promise:v$1.promise,dismiss:v$1.dismiss,loading:v$1.loading},{getHistory:Xt$2});function ft$2(er,{insertAt:_e}={}){if(typeof document>"u")return;let tr=document.head||document.getElementsByTagName("head")[0],rr=document.createElement("style");rr.type="text/css",_e==="top"&&tr.firstChild?tr.insertBefore(rr,tr.firstChild):tr.appendChild(rr),rr.styleSheet?rr.styleSheet.cssText=er:rr.appendChild(document.createTextNode(er))}ft$2(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function U$2(er){return er.label!==void 0}var qt$1=3,Qt$2="32px",Zt$2=4e3,te$1=356,ee$1=14,oe$1=20,ae$1=200;function ne$1(...er){return er.filter(Boolean).join(" ")}var se$1=er=>{var _e,tr,rr,nr,sr,ir,or,ar,lr,cr;let{invert:Ar,toast:ur,unstyled:dr,interacting:mr,setHeights:pr,visibleToasts:yr,heights:hr,index:gr,toasts:Cr,expanded:Tr,removeToast:Sr,defaultRichColors:Nr,closeButton:_r,style:vr,cancelButtonStyle:br,actionButtonStyle:Pr,className:Er="",descriptionClassName:Rr="",duration:Ir,position:Qr,gap:Ur,loadingIcon:Vr,expandByDefault:Wr,classNames:Hr,icons:$r,closeButtonAriaLabel:Xr="Close toast",pauseWhenPageIsHidden:pn,cn:jr}=er,[Br,Lr]=React.useState(!1),[Or,zr]=React.useState(!1),[Gr,Yr]=React.useState(!1),[dn,En]=React.useState(!1),[Sn,Bn]=React.useState(0),[kn,Kn]=React.useState(0),Cn=React.useRef(null),Jr=React.useRef(null),Fn=gr===0,Zr=gr+1<=yr,hn=ur.type,bn=ur.dismissible!==!1,In=ur.className||"",jn=ur.descriptionClassName||"",zn=React.useMemo(()=>hr.findIndex(os=>os.toastId===ur.id)||0,[hr,ur.id]),qn=React.useMemo(()=>{var os;return(os=ur.closeButton)!=null?os:_r},[ur.closeButton,_r]),Nn=React.useMemo(()=>ur.duration||Ir||Zt$2,[ur.duration,Ir]),ns=React.useRef(0),rs=React.useRef(0),Is=React.useRef(0),ps=React.useRef(null),[Ps,ls]=Qr.split("-"),Ts=React.useMemo(()=>hr.reduce((os,js,bs)=>bs>=zn?os:os+js.height,0),[hr,zn]),Fs=Dt$1(),Vs=ur.invert||Ar,ts=hn==="loading";rs.current=React.useMemo(()=>zn*Ur+Ts,[zn,Ts]),React.useEffect(()=>{Lr(!0)},[]),React.useLayoutEffect(()=>{if(!Br)return;let os=Jr.current,js=os.style.height;os.style.height="auto";let bs=os.getBoundingClientRect().height;os.style.height=js,Kn(bs),pr(Rn=>Rn.find(es=>es.toastId===ur.id)?Rn.map(es=>es.toastId===ur.id?{...es,height:bs}:es):[{toastId:ur.id,height:bs,position:ur.position},...Rn])},[Br,ur.title,ur.description,pr,ur.id]);let Mn=React.useCallback(()=>{zr(!0),Bn(rs.current),pr(os=>os.filter(js=>js.toastId!==ur.id)),setTimeout(()=>{Sr(ur)},ae$1)},[ur,Sr,pr,rs]);React.useEffect(()=>{if(ur.promise&&hn==="loading"||ur.duration===1/0||ur.type==="loading")return;let os,js=Nn;return Tr||mr||pn&&Fs?(()=>{if(Is.current<ns.current){let bs=new Date().getTime()-ns.current;js=js-bs}Is.current=new Date().getTime()})():js!==1/0&&(ns.current=new Date().getTime(),os=setTimeout(()=>{var bs;(bs=ur.onAutoClose)==null||bs.call(ur,ur),Mn()},js)),()=>clearTimeout(os)},[Tr,mr,Wr,ur,Nn,Mn,ur.promise,hn,pn,Fs]),React.useEffect(()=>{let os=Jr.current;if(os){let js=os.getBoundingClientRect().height;return Kn(js),pr(bs=>[{toastId:ur.id,height:js,position:ur.position},...bs]),()=>pr(bs=>bs.filter(Rn=>Rn.toastId!==ur.id))}},[pr,ur.id]),React.useEffect(()=>{ur.delete&&Mn()},[Mn,ur.delete]);function Gn(){return $r!=null&&$r.loading?React.createElement("div",{className:"sonner-loader","data-visible":hn==="loading"},$r.loading):Vr?React.createElement("div",{className:"sonner-loader","data-visible":hn==="loading"},Vr):React.createElement(It$1,{visible:hn==="loading"})}return React.createElement("li",{"aria-live":ur.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Jr,className:jr(Er,In,Hr==null?void 0:Hr.toast,(_e=ur==null?void 0:ur.classNames)==null?void 0:_e.toast,Hr==null?void 0:Hr.default,Hr==null?void 0:Hr[hn],(tr=ur==null?void 0:ur.classNames)==null?void 0:tr[hn]),"data-sonner-toast":"","data-rich-colors":(rr=ur.richColors)!=null?rr:Nr,"data-styled":!(ur.jsx||ur.unstyled||dr),"data-mounted":Br,"data-promise":!!ur.promise,"data-removed":Or,"data-visible":Zr,"data-y-position":Ps,"data-x-position":ls,"data-index":gr,"data-front":Fn,"data-swiping":Gr,"data-dismissible":bn,"data-type":hn,"data-invert":Vs,"data-swipe-out":dn,"data-expanded":!!(Tr||Wr&&Br),style:{"--index":gr,"--toasts-before":gr,"--z-index":Cr.length-gr,"--offset":`${Or?Sn:rs.current}px`,"--initial-height":Wr?"auto":`${kn}px`,...vr,...ur.style},onPointerDown:os=>{ts||!bn||(Cn.current=new Date,Bn(rs.current),os.target.setPointerCapture(os.pointerId),os.target.tagName!=="BUTTON"&&(Yr(!0),ps.current={x:os.clientX,y:os.clientY}))},onPointerUp:()=>{var os,js,bs,Rn;if(dn||!bn)return;ps.current=null;let es=Number(((os=Jr.current)==null?void 0:os.style.getPropertyValue("--swipe-amount").replace("px",""))||0),ds=new Date().getTime()-((js=Cn.current)==null?void 0:js.getTime()),fs=Math.abs(es)/ds;if(Math.abs(es)>=oe$1||fs>.11){Bn(rs.current),(bs=ur.onDismiss)==null||bs.call(ur,ur),Mn(),En(!0);return}(Rn=Jr.current)==null||Rn.style.setProperty("--swipe-amount","0px"),Yr(!1)},onPointerMove:os=>{var js;if(!ps.current||!bn)return;let bs=os.clientY-ps.current.y,Rn=os.clientX-ps.current.x,es=(Ps==="top"?Math.min:Math.max)(0,bs),ds=os.pointerType==="touch"?10:2;Math.abs(es)>ds?(js=Jr.current)==null||js.style.setProperty("--swipe-amount",`${bs}px`):Math.abs(Rn)>ds&&(ps.current=null)}},qn&&!ur.jsx?React.createElement("button",{"aria-label":Xr,"data-disabled":ts,"data-close-button":!0,onClick:ts||!bn?()=>{}:()=>{var os;Mn(),(os=ur.onDismiss)==null||os.call(ur,ur)},className:jr(Hr==null?void 0:Hr.closeButton,(nr=ur==null?void 0:ur.classNames)==null?void 0:nr.closeButton)},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),React.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,ur.jsx||React.isValidElement(ur.title)?ur.jsx||ur.title:React.createElement(React.Fragment,null,hn||ur.icon||ur.promise?React.createElement("div",{"data-icon":"",className:jr(Hr==null?void 0:Hr.icon,(sr=ur==null?void 0:ur.classNames)==null?void 0:sr.icon)},ur.promise||ur.type==="loading"&&!ur.icon?ur.icon||Gn():null,ur.type!=="loading"?ur.icon||($r==null?void 0:$r[hn])||Ct$1(hn):null):null,React.createElement("div",{"data-content":"",className:jr(Hr==null?void 0:Hr.content,(ir=ur==null?void 0:ur.classNames)==null?void 0:ir.content)},React.createElement("div",{"data-title":"",className:jr(Hr==null?void 0:Hr.title,(or=ur==null?void 0:ur.classNames)==null?void 0:or.title)},ur.title),ur.description?React.createElement("div",{"data-description":"",className:jr(Rr,jn,Hr==null?void 0:Hr.description,(ar=ur==null?void 0:ur.classNames)==null?void 0:ar.description)},ur.description):null),React.isValidElement(ur.cancel)?ur.cancel:ur.cancel&&U$2(ur.cancel)?React.createElement("button",{"data-button":!0,"data-cancel":!0,style:ur.cancelButtonStyle||br,onClick:os=>{var js,bs;U$2(ur.cancel)&&bn&&((bs=(js=ur.cancel).onClick)==null||bs.call(js,os),Mn())},className:jr(Hr==null?void 0:Hr.cancelButton,(lr=ur==null?void 0:ur.classNames)==null?void 0:lr.cancelButton)},ur.cancel.label):null,React.isValidElement(ur.action)?ur.action:ur.action&&U$2(ur.action)?React.createElement("button",{"data-button":!0,"data-action":!0,style:ur.actionButtonStyle||Pr,onClick:os=>{var js,bs;U$2(ur.action)&&(os.defaultPrevented||((bs=(js=ur.action).onClick)==null||bs.call(js,os),Mn()))},className:jr(Hr==null?void 0:Hr.actionButton,(cr=ur==null?void 0:ur.classNames)==null?void 0:cr.actionButton)},ur.action.label):null))};function Ht$2(){if(typeof window>"u"||typeof document>"u")return"ltr";let er=document.documentElement.getAttribute("dir");return er==="auto"||!er?window.getComputedStyle(document.documentElement).direction:er}var Te=er=>{let{invert:_e,position:tr="bottom-right",hotkey:rr=["altKey","KeyT"],expand:nr,closeButton:sr,className:ir,offset:or,theme:ar="light",richColors:lr,duration:cr,style:Ar,visibleToasts:ur=qt$1,toastOptions:dr,dir:mr=Ht$2(),gap:pr=ee$1,loadingIcon:yr,icons:hr,containerAriaLabel:gr="Notifications",pauseWhenPageIsHidden:Cr,cn:Tr=ne$1}=er,[Sr,Nr]=React.useState([]),_r=React.useMemo(()=>Array.from(new Set([tr].concat(Sr.filter(pn=>pn.position).map(pn=>pn.position)))),[Sr,tr]),[vr,br]=React.useState([]),[Pr,Er]=React.useState(!1),[Rr,Ir]=React.useState(!1),[Qr,Ur]=React.useState(ar!=="system"?ar:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Vr=React.useRef(null),Wr=rr.join("+").replace(/Key/g,"").replace(/Digit/g,""),Hr=React.useRef(null),$r=React.useRef(!1),Xr=React.useCallback(pn=>{var jr;(jr=Sr.find(Br=>Br.id===pn.id))!=null&&jr.delete||v$1.dismiss(pn.id),Nr(Br=>Br.filter(({id:Lr})=>Lr!==pn.id))},[Sr]);return React.useEffect(()=>v$1.subscribe(pn=>{if(pn.dismiss){Nr(jr=>jr.map(Br=>Br.id===pn.id?{...Br,delete:!0}:Br));return}setTimeout(()=>{Gt$1.flushSync(()=>{Nr(jr=>{let Br=jr.findIndex(Lr=>Lr.id===pn.id);return Br!==-1?[...jr.slice(0,Br),{...jr[Br],...pn},...jr.slice(Br+1)]:[pn,...jr]})})})}),[]),React.useEffect(()=>{if(ar!=="system"){Ur(ar);return}ar==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Ur("dark"):Ur("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:pn})=>{Ur(pn?"dark":"light")})},[ar]),React.useEffect(()=>{Sr.length<=1&&Er(!1)},[Sr]),React.useEffect(()=>{let pn=jr=>{var Br,Lr;rr.every(Or=>jr[Or]||jr.code===Or)&&(Er(!0),(Br=Vr.current)==null||Br.focus()),jr.code==="Escape"&&(document.activeElement===Vr.current||(Lr=Vr.current)!=null&&Lr.contains(document.activeElement))&&Er(!1)};return document.addEventListener("keydown",pn),()=>document.removeEventListener("keydown",pn)},[rr]),React.useEffect(()=>{if(Vr.current)return()=>{Hr.current&&(Hr.current.focus({preventScroll:!0}),Hr.current=null,$r.current=!1)}},[Vr.current]),Sr.length?React.createElement("section",{"aria-label":`${gr} ${Wr}`,tabIndex:-1},_r.map((pn,jr)=>{var Br;let[Lr,Or]=pn.split("-");return React.createElement("ol",{key:pn,dir:mr==="auto"?Ht$2():mr,tabIndex:-1,ref:Vr,className:ir,"data-sonner-toaster":!0,"data-theme":Qr,"data-y-position":Lr,"data-x-position":Or,style:{"--front-toast-height":`${((Br=vr[0])==null?void 0:Br.height)||0}px`,"--offset":typeof or=="number"?`${or}px`:or||Qt$2,"--width":`${te$1}px`,"--gap":`${pr}px`,...Ar},onBlur:zr=>{$r.current&&!zr.currentTarget.contains(zr.relatedTarget)&&($r.current=!1,Hr.current&&(Hr.current.focus({preventScroll:!0}),Hr.current=null))},onFocus:zr=>{zr.target instanceof HTMLElement&&zr.target.dataset.dismissible==="false"||$r.current||($r.current=!0,Hr.current=zr.relatedTarget)},onMouseEnter:()=>Er(!0),onMouseMove:()=>Er(!0),onMouseLeave:()=>{Rr||Er(!1)},onPointerDown:zr=>{zr.target instanceof HTMLElement&&zr.target.dataset.dismissible==="false"||Ir(!0)},onPointerUp:()=>Ir(!1)},Sr.filter(zr=>!zr.position&&jr===0||zr.position===pn).map((zr,Gr)=>{var Yr,dn;return React.createElement(se$1,{key:zr.id,icons:hr,index:Gr,toast:zr,defaultRichColors:lr,duration:(Yr=dr==null?void 0:dr.duration)!=null?Yr:cr,className:dr==null?void 0:dr.className,descriptionClassName:dr==null?void 0:dr.descriptionClassName,invert:_e,visibleToasts:ur,closeButton:(dn=dr==null?void 0:dr.closeButton)!=null?dn:sr,interacting:Rr,position:pn,style:dr==null?void 0:dr.style,unstyled:dr==null?void 0:dr.unstyled,classNames:dr==null?void 0:dr.classNames,cancelButtonStyle:dr==null?void 0:dr.cancelButtonStyle,actionButtonStyle:dr==null?void 0:dr.actionButtonStyle,removeToast:Xr,toasts:Sr.filter(En=>En.position==zr.position),heights:vr.filter(En=>En.position==zr.position),setHeights:br,expandByDefault:nr,gap:pr,loadingIcon:yr,expanded:Pr,pauseWhenPageIsHidden:Cr,cn:Tr})}))})):null};const Toaster=({...er})=>{const{theme:_e="system"}=j$1();return jsxRuntimeExports.jsx(Te,{theme:_e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...er})};var useReactId=React$1.useId||(()=>{}),count$1=0;function useId(er){const[_e,tr]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{er||tr(rr=>rr??String(count$1++))},[er]),er||(_e?`radix-${_e}`:"")}const sides=["top","right","bottom","left"],min=Math.min,max$1=Math.max,round=Math.round,floor=Math.floor,createCoords=er=>({x:er,y:er}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(er,_e,tr){return max$1(er,min(_e,tr))}function evaluate(er,_e){return typeof er=="function"?er(_e):er}function getSide(er){return er.split("-")[0]}function getAlignment(er){return er.split("-")[1]}function getOppositeAxis(er){return er==="x"?"y":"x"}function getAxisLength(er){return er==="y"?"height":"width"}function getSideAxis(er){return["top","bottom"].includes(getSide(er))?"y":"x"}function getAlignmentAxis(er){return getOppositeAxis(getSideAxis(er))}function getAlignmentSides(er,_e,tr){tr===void 0&&(tr=!1);const rr=getAlignment(er),nr=getAlignmentAxis(er),sr=getAxisLength(nr);let ir=nr==="x"?rr===(tr?"end":"start")?"right":"left":rr==="start"?"bottom":"top";return _e.reference[sr]>_e.floating[sr]&&(ir=getOppositePlacement(ir)),[ir,getOppositePlacement(ir)]}function getExpandedPlacements(er){const _e=getOppositePlacement(er);return[getOppositeAlignmentPlacement(er),_e,getOppositeAlignmentPlacement(_e)]}function getOppositeAlignmentPlacement(er){return er.replace(/start|end/g,_e=>oppositeAlignmentMap[_e])}function getSideList(er,_e,tr){const rr=["left","right"],nr=["right","left"],sr=["top","bottom"],ir=["bottom","top"];switch(er){case"top":case"bottom":return tr?_e?nr:rr:_e?rr:nr;case"left":case"right":return _e?sr:ir;default:return[]}}function getOppositeAxisPlacements(er,_e,tr,rr){const nr=getAlignment(er);let sr=getSideList(getSide(er),tr==="start",rr);return nr&&(sr=sr.map(ir=>ir+"-"+nr),_e&&(sr=sr.concat(sr.map(getOppositeAlignmentPlacement)))),sr}function getOppositePlacement(er){return er.replace(/left|right|bottom|top/g,_e=>oppositeSideMap[_e])}function expandPaddingObject(er){return{top:0,right:0,bottom:0,left:0,...er}}function getPaddingObject(er){return typeof er!="number"?expandPaddingObject(er):{top:er,right:er,bottom:er,left:er}}function rectToClientRect(er){const{x:_e,y:tr,width:rr,height:nr}=er;return{width:rr,height:nr,top:tr,left:_e,right:_e+rr,bottom:tr+nr,x:_e,y:tr}}function computeCoordsFromPlacement(er,_e,tr){let{reference:rr,floating:nr}=er;const sr=getSideAxis(_e),ir=getAlignmentAxis(_e),or=getAxisLength(ir),ar=getSide(_e),lr=sr==="y",cr=rr.x+rr.width/2-nr.width/2,Ar=rr.y+rr.height/2-nr.height/2,ur=rr[or]/2-nr[or]/2;let dr;switch(ar){case"top":dr={x:cr,y:rr.y-nr.height};break;case"bottom":dr={x:cr,y:rr.y+rr.height};break;case"right":dr={x:rr.x+rr.width,y:Ar};break;case"left":dr={x:rr.x-nr.width,y:Ar};break;default:dr={x:rr.x,y:rr.y}}switch(getAlignment(_e)){case"start":dr[ir]-=ur*(tr&&lr?-1:1);break;case"end":dr[ir]+=ur*(tr&&lr?-1:1);break}return dr}const computePosition$1=async(er,_e,tr)=>{const{placement:rr="bottom",strategy:nr="absolute",middleware:sr=[],platform:ir}=tr,or=sr.filter(Boolean),ar=await(ir.isRTL==null?void 0:ir.isRTL(_e));let lr=await ir.getElementRects({reference:er,floating:_e,strategy:nr}),{x:cr,y:Ar}=computeCoordsFromPlacement(lr,rr,ar),ur=rr,dr={},mr=0;for(let pr=0;pr<or.length;pr++){const{name:yr,fn:hr}=or[pr],{x:gr,y:Cr,data:Tr,reset:Sr}=await hr({x:cr,y:Ar,initialPlacement:rr,placement:ur,strategy:nr,middlewareData:dr,rects:lr,platform:ir,elements:{reference:er,floating:_e}});cr=gr??cr,Ar=Cr??Ar,dr={...dr,[yr]:{...dr[yr],...Tr}},Sr&&mr<=50&&(mr++,typeof Sr=="object"&&(Sr.placement&&(ur=Sr.placement),Sr.rects&&(lr=Sr.rects===!0?await ir.getElementRects({reference:er,floating:_e,strategy:nr}):Sr.rects),{x:cr,y:Ar}=computeCoordsFromPlacement(lr,ur,ar)),pr=-1)}return{x:cr,y:Ar,placement:ur,strategy:nr,middlewareData:dr}};async function detectOverflow(er,_e){var tr;_e===void 0&&(_e={});const{x:rr,y:nr,platform:sr,rects:ir,elements:or,strategy:ar}=er,{boundary:lr="clippingAncestors",rootBoundary:cr="viewport",elementContext:Ar="floating",altBoundary:ur=!1,padding:dr=0}=evaluate(_e,er),mr=getPaddingObject(dr),yr=or[ur?Ar==="floating"?"reference":"floating":Ar],hr=rectToClientRect(await sr.getClippingRect({element:(tr=await(sr.isElement==null?void 0:sr.isElement(yr)))==null||tr?yr:yr.contextElement||await(sr.getDocumentElement==null?void 0:sr.getDocumentElement(or.floating)),boundary:lr,rootBoundary:cr,strategy:ar})),gr=Ar==="floating"?{x:rr,y:nr,width:ir.floating.width,height:ir.floating.height}:ir.reference,Cr=await(sr.getOffsetParent==null?void 0:sr.getOffsetParent(or.floating)),Tr=await(sr.isElement==null?void 0:sr.isElement(Cr))?await(sr.getScale==null?void 0:sr.getScale(Cr))||{x:1,y:1}:{x:1,y:1},Sr=rectToClientRect(sr.convertOffsetParentRelativeRectToViewportRelativeRect?await sr.convertOffsetParentRelativeRectToViewportRelativeRect({elements:or,rect:gr,offsetParent:Cr,strategy:ar}):gr);return{top:(hr.top-Sr.top+mr.top)/Tr.y,bottom:(Sr.bottom-hr.bottom+mr.bottom)/Tr.y,left:(hr.left-Sr.left+mr.left)/Tr.x,right:(Sr.right-hr.right+mr.right)/Tr.x}}const arrow$3=er=>({name:"arrow",options:er,async fn(_e){const{x:tr,y:rr,placement:nr,rects:sr,platform:ir,elements:or,middlewareData:ar}=_e,{element:lr,padding:cr=0}=evaluate(er,_e)||{};if(lr==null)return{};const Ar=getPaddingObject(cr),ur={x:tr,y:rr},dr=getAlignmentAxis(nr),mr=getAxisLength(dr),pr=await ir.getDimensions(lr),yr=dr==="y",hr=yr?"top":"left",gr=yr?"bottom":"right",Cr=yr?"clientHeight":"clientWidth",Tr=sr.reference[mr]+sr.reference[dr]-ur[dr]-sr.floating[mr],Sr=ur[dr]-sr.reference[dr],Nr=await(ir.getOffsetParent==null?void 0:ir.getOffsetParent(lr));let _r=Nr?Nr[Cr]:0;(!_r||!await(ir.isElement==null?void 0:ir.isElement(Nr)))&&(_r=or.floating[Cr]||sr.floating[mr]);const vr=Tr/2-Sr/2,br=_r/2-pr[mr]/2-1,Pr=min(Ar[hr],br),Er=min(Ar[gr],br),Rr=Pr,Ir=_r-pr[mr]-Er,Qr=_r/2-pr[mr]/2+vr,Ur=clamp$1(Rr,Qr,Ir),Vr=!ar.arrow&&getAlignment(nr)!=null&&Qr!==Ur&&sr.reference[mr]/2-(Qr<Rr?Pr:Er)-pr[mr]/2<0,Wr=Vr?Qr<Rr?Qr-Rr:Qr-Ir:0;return{[dr]:ur[dr]+Wr,data:{[dr]:Ur,centerOffset:Qr-Ur-Wr,...Vr&&{alignmentOffset:Wr}},reset:Vr}}}),flip$2=function(er){return er===void 0&&(er={}),{name:"flip",options:er,async fn(_e){var tr,rr;const{placement:nr,middlewareData:sr,rects:ir,initialPlacement:or,platform:ar,elements:lr}=_e,{mainAxis:cr=!0,crossAxis:Ar=!0,fallbackPlacements:ur,fallbackStrategy:dr="bestFit",fallbackAxisSideDirection:mr="none",flipAlignment:pr=!0,...yr}=evaluate(er,_e);if((tr=sr.arrow)!=null&&tr.alignmentOffset)return{};const hr=getSide(nr),gr=getSideAxis(or),Cr=getSide(or)===or,Tr=await(ar.isRTL==null?void 0:ar.isRTL(lr.floating)),Sr=ur||(Cr||!pr?[getOppositePlacement(or)]:getExpandedPlacements(or)),Nr=mr!=="none";!ur&&Nr&&Sr.push(...getOppositeAxisPlacements(or,pr,mr,Tr));const _r=[or,...Sr],vr=await detectOverflow(_e,yr),br=[];let Pr=((rr=sr.flip)==null?void 0:rr.overflows)||[];if(cr&&br.push(vr[hr]),Ar){const Qr=getAlignmentSides(nr,ir,Tr);br.push(vr[Qr[0]],vr[Qr[1]])}if(Pr=[...Pr,{placement:nr,overflows:br}],!br.every(Qr=>Qr<=0)){var Er,Rr;const Qr=(((Er=sr.flip)==null?void 0:Er.index)||0)+1,Ur=_r[Qr];if(Ur)return{data:{index:Qr,overflows:Pr},reset:{placement:Ur}};let Vr=(Rr=Pr.filter(Wr=>Wr.overflows[0]<=0).sort((Wr,Hr)=>Wr.overflows[1]-Hr.overflows[1])[0])==null?void 0:Rr.placement;if(!Vr)switch(dr){case"bestFit":{var Ir;const Wr=(Ir=Pr.filter(Hr=>{if(Nr){const $r=getSideAxis(Hr.placement);return $r===gr||$r==="y"}return!0}).map(Hr=>[Hr.placement,Hr.overflows.filter($r=>$r>0).reduce(($r,Xr)=>$r+Xr,0)]).sort((Hr,$r)=>Hr[1]-$r[1])[0])==null?void 0:Ir[0];Wr&&(Vr=Wr);break}case"initialPlacement":Vr=or;break}if(nr!==Vr)return{reset:{placement:Vr}}}return{}}}};function getSideOffsets(er,_e){return{top:er.top-_e.height,right:er.right-_e.width,bottom:er.bottom-_e.height,left:er.left-_e.width}}function isAnySideFullyClipped(er){return sides.some(_e=>er[_e]>=0)}const hide$2=function(er){return er===void 0&&(er={}),{name:"hide",options:er,async fn(_e){const{rects:tr}=_e,{strategy:rr="referenceHidden",...nr}=evaluate(er,_e);switch(rr){case"referenceHidden":{const sr=await detectOverflow(_e,{...nr,elementContext:"reference"}),ir=getSideOffsets(sr,tr.reference);return{data:{referenceHiddenOffsets:ir,referenceHidden:isAnySideFullyClipped(ir)}}}case"escaped":{const sr=await detectOverflow(_e,{...nr,altBoundary:!0}),ir=getSideOffsets(sr,tr.floating);return{data:{escapedOffsets:ir,escaped:isAnySideFullyClipped(ir)}}}default:return{}}}}};async function convertValueToCoords(er,_e){const{placement:tr,platform:rr,elements:nr}=er,sr=await(rr.isRTL==null?void 0:rr.isRTL(nr.floating)),ir=getSide(tr),or=getAlignment(tr),ar=getSideAxis(tr)==="y",lr=["left","top"].includes(ir)?-1:1,cr=sr&&ar?-1:1,Ar=evaluate(_e,er);let{mainAxis:ur,crossAxis:dr,alignmentAxis:mr}=typeof Ar=="number"?{mainAxis:Ar,crossAxis:0,alignmentAxis:null}:{mainAxis:Ar.mainAxis||0,crossAxis:Ar.crossAxis||0,alignmentAxis:Ar.alignmentAxis};return or&&typeof mr=="number"&&(dr=or==="end"?mr*-1:mr),ar?{x:dr*cr,y:ur*lr}:{x:ur*lr,y:dr*cr}}const offset$2=function(er){return er===void 0&&(er=0),{name:"offset",options:er,async fn(_e){var tr,rr;const{x:nr,y:sr,placement:ir,middlewareData:or}=_e,ar=await convertValueToCoords(_e,er);return ir===((tr=or.offset)==null?void 0:tr.placement)&&(rr=or.arrow)!=null&&rr.alignmentOffset?{}:{x:nr+ar.x,y:sr+ar.y,data:{...ar,placement:ir}}}}},shift$2=function(er){return er===void 0&&(er={}),{name:"shift",options:er,async fn(_e){const{x:tr,y:rr,placement:nr}=_e,{mainAxis:sr=!0,crossAxis:ir=!1,limiter:or={fn:yr=>{let{x:hr,y:gr}=yr;return{x:hr,y:gr}}},...ar}=evaluate(er,_e),lr={x:tr,y:rr},cr=await detectOverflow(_e,ar),Ar=getSideAxis(getSide(nr)),ur=getOppositeAxis(Ar);let dr=lr[ur],mr=lr[Ar];if(sr){const yr=ur==="y"?"top":"left",hr=ur==="y"?"bottom":"right",gr=dr+cr[yr],Cr=dr-cr[hr];dr=clamp$1(gr,dr,Cr)}if(ir){const yr=Ar==="y"?"top":"left",hr=Ar==="y"?"bottom":"right",gr=mr+cr[yr],Cr=mr-cr[hr];mr=clamp$1(gr,mr,Cr)}const pr=or.fn({..._e,[ur]:dr,[Ar]:mr});return{...pr,data:{x:pr.x-tr,y:pr.y-rr,enabled:{[ur]:sr,[Ar]:ir}}}}}},limitShift$2=function(er){return er===void 0&&(er={}),{options:er,fn(_e){const{x:tr,y:rr,placement:nr,rects:sr,middlewareData:ir}=_e,{offset:or=0,mainAxis:ar=!0,crossAxis:lr=!0}=evaluate(er,_e),cr={x:tr,y:rr},Ar=getSideAxis(nr),ur=getOppositeAxis(Ar);let dr=cr[ur],mr=cr[Ar];const pr=evaluate(or,_e),yr=typeof pr=="number"?{mainAxis:pr,crossAxis:0}:{mainAxis:0,crossAxis:0,...pr};if(ar){const Cr=ur==="y"?"height":"width",Tr=sr.reference[ur]-sr.floating[Cr]+yr.mainAxis,Sr=sr.reference[ur]+sr.reference[Cr]-yr.mainAxis;dr<Tr?dr=Tr:dr>Sr&&(dr=Sr)}if(lr){var hr,gr;const Cr=ur==="y"?"width":"height",Tr=["top","left"].includes(getSide(nr)),Sr=sr.reference[Ar]-sr.floating[Cr]+(Tr&&((hr=ir.offset)==null?void 0:hr[Ar])||0)+(Tr?0:yr.crossAxis),Nr=sr.reference[Ar]+sr.reference[Cr]+(Tr?0:((gr=ir.offset)==null?void 0:gr[Ar])||0)-(Tr?yr.crossAxis:0);mr<Sr?mr=Sr:mr>Nr&&(mr=Nr)}return{[ur]:dr,[Ar]:mr}}}},size$2=function(er){return er===void 0&&(er={}),{name:"size",options:er,async fn(_e){var tr,rr;const{placement:nr,rects:sr,platform:ir,elements:or}=_e,{apply:ar=()=>{},...lr}=evaluate(er,_e),cr=await detectOverflow(_e,lr),Ar=getSide(nr),ur=getAlignment(nr),dr=getSideAxis(nr)==="y",{width:mr,height:pr}=sr.floating;let yr,hr;Ar==="top"||Ar==="bottom"?(yr=Ar,hr=ur===(await(ir.isRTL==null?void 0:ir.isRTL(or.floating))?"start":"end")?"left":"right"):(hr=Ar,yr=ur==="end"?"top":"bottom");const gr=pr-cr.top-cr.bottom,Cr=mr-cr.left-cr.right,Tr=min(pr-cr[yr],gr),Sr=min(mr-cr[hr],Cr),Nr=!_e.middlewareData.shift;let _r=Tr,vr=Sr;if((tr=_e.middlewareData.shift)!=null&&tr.enabled.x&&(vr=Cr),(rr=_e.middlewareData.shift)!=null&&rr.enabled.y&&(_r=gr),Nr&&!ur){const Pr=max$1(cr.left,0),Er=max$1(cr.right,0),Rr=max$1(cr.top,0),Ir=max$1(cr.bottom,0);dr?vr=mr-2*(Pr!==0||Er!==0?Pr+Er:max$1(cr.left,cr.right)):_r=pr-2*(Rr!==0||Ir!==0?Rr+Ir:max$1(cr.top,cr.bottom))}await ar({..._e,availableWidth:vr,availableHeight:_r});const br=await ir.getDimensions(or.floating);return mr!==br.width||pr!==br.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(er){return isNode$1(er)?(er.nodeName||"").toLowerCase():"#document"}function getWindow(er){var _e;return(er==null||(_e=er.ownerDocument)==null?void 0:_e.defaultView)||window}function getDocumentElement(er){var _e;return(_e=(isNode$1(er)?er.ownerDocument:er.document)||window.document)==null?void 0:_e.documentElement}function isNode$1(er){return hasWindow()?er instanceof Node||er instanceof getWindow(er).Node:!1}function isElement(er){return hasWindow()?er instanceof Element||er instanceof getWindow(er).Element:!1}function isHTMLElement$1(er){return hasWindow()?er instanceof HTMLElement||er instanceof getWindow(er).HTMLElement:!1}function isShadowRoot(er){return!hasWindow()||typeof ShadowRoot>"u"?!1:er instanceof ShadowRoot||er instanceof getWindow(er).ShadowRoot}function isOverflowElement(er){const{overflow:_e,overflowX:tr,overflowY:rr,display:nr}=getComputedStyle$1(er);return/auto|scroll|overlay|hidden|clip/.test(_e+rr+tr)&&!["inline","contents"].includes(nr)}function isTableElement(er){return["table","td","th"].includes(getNodeName(er))}function isTopLayer(er){return[":popover-open",":modal"].some(_e=>{try{return er.matches(_e)}catch{return!1}})}function isContainingBlock(er){const _e=isWebKit(),tr=isElement(er)?getComputedStyle$1(er):er;return tr.transform!=="none"||tr.perspective!=="none"||(tr.containerType?tr.containerType!=="normal":!1)||!_e&&(tr.backdropFilter?tr.backdropFilter!=="none":!1)||!_e&&(tr.filter?tr.filter!=="none":!1)||["transform","perspective","filter"].some(rr=>(tr.willChange||"").includes(rr))||["paint","layout","strict","content"].some(rr=>(tr.contain||"").includes(rr))}function getContainingBlock(er){let _e=getParentNode(er);for(;isHTMLElement$1(_e)&&!isLastTraversableNode(_e);){if(isContainingBlock(_e))return _e;if(isTopLayer(_e))return null;_e=getParentNode(_e)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(er){return["html","body","#document"].includes(getNodeName(er))}function getComputedStyle$1(er){return getWindow(er).getComputedStyle(er)}function getNodeScroll(er){return isElement(er)?{scrollLeft:er.scrollLeft,scrollTop:er.scrollTop}:{scrollLeft:er.scrollX,scrollTop:er.scrollY}}function getParentNode(er){if(getNodeName(er)==="html")return er;const _e=er.assignedSlot||er.parentNode||isShadowRoot(er)&&er.host||getDocumentElement(er);return isShadowRoot(_e)?_e.host:_e}function getNearestOverflowAncestor(er){const _e=getParentNode(er);return isLastTraversableNode(_e)?er.ownerDocument?er.ownerDocument.body:er.body:isHTMLElement$1(_e)&&isOverflowElement(_e)?_e:getNearestOverflowAncestor(_e)}function getOverflowAncestors(er,_e,tr){var rr;_e===void 0&&(_e=[]),tr===void 0&&(tr=!0);const nr=getNearestOverflowAncestor(er),sr=nr===((rr=er.ownerDocument)==null?void 0:rr.body),ir=getWindow(nr);if(sr){const or=getFrameElement(ir);return _e.concat(ir,ir.visualViewport||[],isOverflowElement(nr)?nr:[],or&&tr?getOverflowAncestors(or):[])}return _e.concat(nr,getOverflowAncestors(nr,[],tr))}function getFrameElement(er){return er.parent&&Object.getPrototypeOf(er.parent)?er.frameElement:null}function getCssDimensions(er){const _e=getComputedStyle$1(er);let tr=parseFloat(_e.width)||0,rr=parseFloat(_e.height)||0;const nr=isHTMLElement$1(er),sr=nr?er.offsetWidth:tr,ir=nr?er.offsetHeight:rr,or=round(tr)!==sr||round(rr)!==ir;return or&&(tr=sr,rr=ir),{width:tr,height:rr,$:or}}function unwrapElement(er){return isElement(er)?er:er.contextElement}function getScale(er){const _e=unwrapElement(er);if(!isHTMLElement$1(_e))return createCoords(1);const tr=_e.getBoundingClientRect(),{width:rr,height:nr,$:sr}=getCssDimensions(_e);let ir=(sr?round(tr.width):tr.width)/rr,or=(sr?round(tr.height):tr.height)/nr;return(!ir||!Number.isFinite(ir))&&(ir=1),(!or||!Number.isFinite(or))&&(or=1),{x:ir,y:or}}const noOffsets=createCoords(0);function getVisualOffsets(er){const _e=getWindow(er);return!isWebKit()||!_e.visualViewport?noOffsets:{x:_e.visualViewport.offsetLeft,y:_e.visualViewport.offsetTop}}function shouldAddVisualOffsets(er,_e,tr){return _e===void 0&&(_e=!1),!tr||_e&&tr!==getWindow(er)?!1:_e}function getBoundingClientRect(er,_e,tr,rr){_e===void 0&&(_e=!1),tr===void 0&&(tr=!1);const nr=er.getBoundingClientRect(),sr=unwrapElement(er);let ir=createCoords(1);_e&&(rr?isElement(rr)&&(ir=getScale(rr)):ir=getScale(er));const or=shouldAddVisualOffsets(sr,tr,rr)?getVisualOffsets(sr):createCoords(0);let ar=(nr.left+or.x)/ir.x,lr=(nr.top+or.y)/ir.y,cr=nr.width/ir.x,Ar=nr.height/ir.y;if(sr){const ur=getWindow(sr),dr=rr&&isElement(rr)?getWindow(rr):rr;let mr=ur,pr=getFrameElement(mr);for(;pr&&rr&&dr!==mr;){const yr=getScale(pr),hr=pr.getBoundingClientRect(),gr=getComputedStyle$1(pr),Cr=hr.left+(pr.clientLeft+parseFloat(gr.paddingLeft))*yr.x,Tr=hr.top+(pr.clientTop+parseFloat(gr.paddingTop))*yr.y;ar*=yr.x,lr*=yr.y,cr*=yr.x,Ar*=yr.y,ar+=Cr,lr+=Tr,mr=getWindow(pr),pr=getFrameElement(mr)}}return rectToClientRect({width:cr,height:Ar,x:ar,y:lr})}function convertOffsetParentRelativeRectToViewportRelativeRect(er){let{elements:_e,rect:tr,offsetParent:rr,strategy:nr}=er;const sr=nr==="fixed",ir=getDocumentElement(rr),or=_e?isTopLayer(_e.floating):!1;if(rr===ir||or&&sr)return tr;let ar={scrollLeft:0,scrollTop:0},lr=createCoords(1);const cr=createCoords(0),Ar=isHTMLElement$1(rr);if((Ar||!Ar&&!sr)&&((getNodeName(rr)!=="body"||isOverflowElement(ir))&&(ar=getNodeScroll(rr)),isHTMLElement$1(rr))){const ur=getBoundingClientRect(rr);lr=getScale(rr),cr.x=ur.x+rr.clientLeft,cr.y=ur.y+rr.clientTop}return{width:tr.width*lr.x,height:tr.height*lr.y,x:tr.x*lr.x-ar.scrollLeft*lr.x+cr.x,y:tr.y*lr.y-ar.scrollTop*lr.y+cr.y}}function getClientRects(er){return Array.from(er.getClientRects())}function getWindowScrollBarX(er,_e){const tr=getNodeScroll(er).scrollLeft;return _e?_e.left+tr:getBoundingClientRect(getDocumentElement(er)).left+tr}function getDocumentRect(er){const _e=getDocumentElement(er),tr=getNodeScroll(er),rr=er.ownerDocument.body,nr=max$1(_e.scrollWidth,_e.clientWidth,rr.scrollWidth,rr.clientWidth),sr=max$1(_e.scrollHeight,_e.clientHeight,rr.scrollHeight,rr.clientHeight);let ir=-tr.scrollLeft+getWindowScrollBarX(er);const or=-tr.scrollTop;return getComputedStyle$1(rr).direction==="rtl"&&(ir+=max$1(_e.clientWidth,rr.clientWidth)-nr),{width:nr,height:sr,x:ir,y:or}}function getViewportRect(er,_e){const tr=getWindow(er),rr=getDocumentElement(er),nr=tr.visualViewport;let sr=rr.clientWidth,ir=rr.clientHeight,or=0,ar=0;if(nr){sr=nr.width,ir=nr.height;const lr=isWebKit();(!lr||lr&&_e==="fixed")&&(or=nr.offsetLeft,ar=nr.offsetTop)}return{width:sr,height:ir,x:or,y:ar}}function getInnerBoundingClientRect(er,_e){const tr=getBoundingClientRect(er,!0,_e==="fixed"),rr=tr.top+er.clientTop,nr=tr.left+er.clientLeft,sr=isHTMLElement$1(er)?getScale(er):createCoords(1),ir=er.clientWidth*sr.x,or=er.clientHeight*sr.y,ar=nr*sr.x,lr=rr*sr.y;return{width:ir,height:or,x:ar,y:lr}}function getClientRectFromClippingAncestor(er,_e,tr){let rr;if(_e==="viewport")rr=getViewportRect(er,tr);else if(_e==="document")rr=getDocumentRect(getDocumentElement(er));else if(isElement(_e))rr=getInnerBoundingClientRect(_e,tr);else{const nr=getVisualOffsets(er);rr={..._e,x:_e.x-nr.x,y:_e.y-nr.y}}return rectToClientRect(rr)}function hasFixedPositionAncestor(er,_e){const tr=getParentNode(er);return tr===_e||!isElement(tr)||isLastTraversableNode(tr)?!1:getComputedStyle$1(tr).position==="fixed"||hasFixedPositionAncestor(tr,_e)}function getClippingElementAncestors(er,_e){const tr=_e.get(er);if(tr)return tr;let rr=getOverflowAncestors(er,[],!1).filter(or=>isElement(or)&&getNodeName(or)!=="body"),nr=null;const sr=getComputedStyle$1(er).position==="fixed";let ir=sr?getParentNode(er):er;for(;isElement(ir)&&!isLastTraversableNode(ir);){const or=getComputedStyle$1(ir),ar=isContainingBlock(ir);!ar&&or.position==="fixed"&&(nr=null),(sr?!ar&&!nr:!ar&&or.position==="static"&&!!nr&&["absolute","fixed"].includes(nr.position)||isOverflowElement(ir)&&!ar&&hasFixedPositionAncestor(er,ir))?rr=rr.filter(cr=>cr!==ir):nr=or,ir=getParentNode(ir)}return _e.set(er,rr),rr}function getClippingRect(er){let{element:_e,boundary:tr,rootBoundary:rr,strategy:nr}=er;const ir=[...tr==="clippingAncestors"?isTopLayer(_e)?[]:getClippingElementAncestors(_e,this._c):[].concat(tr),rr],or=ir[0],ar=ir.reduce((lr,cr)=>{const Ar=getClientRectFromClippingAncestor(_e,cr,nr);return lr.top=max$1(Ar.top,lr.top),lr.right=min(Ar.right,lr.right),lr.bottom=min(Ar.bottom,lr.bottom),lr.left=max$1(Ar.left,lr.left),lr},getClientRectFromClippingAncestor(_e,or,nr));return{width:ar.right-ar.left,height:ar.bottom-ar.top,x:ar.left,y:ar.top}}function getDimensions(er){const{width:_e,height:tr}=getCssDimensions(er);return{width:_e,height:tr}}function getRectRelativeToOffsetParent(er,_e,tr){const rr=isHTMLElement$1(_e),nr=getDocumentElement(_e),sr=tr==="fixed",ir=getBoundingClientRect(er,!0,sr,_e);let or={scrollLeft:0,scrollTop:0};const ar=createCoords(0);if(rr||!rr&&!sr)if((getNodeName(_e)!=="body"||isOverflowElement(nr))&&(or=getNodeScroll(_e)),rr){const dr=getBoundingClientRect(_e,!0,sr,_e);ar.x=dr.x+_e.clientLeft,ar.y=dr.y+_e.clientTop}else nr&&(ar.x=getWindowScrollBarX(nr));let lr=0,cr=0;if(nr&&!rr&&!sr){const dr=nr.getBoundingClientRect();cr=dr.top+or.scrollTop,lr=dr.left+or.scrollLeft-getWindowScrollBarX(nr,dr)}const Ar=ir.left+or.scrollLeft-ar.x-lr,ur=ir.top+or.scrollTop-ar.y-cr;return{x:Ar,y:ur,width:ir.width,height:ir.height}}function isStaticPositioned(er){return getComputedStyle$1(er).position==="static"}function getTrueOffsetParent(er,_e){if(!isHTMLElement$1(er)||getComputedStyle$1(er).position==="fixed")return null;if(_e)return _e(er);let tr=er.offsetParent;return getDocumentElement(er)===tr&&(tr=tr.ownerDocument.body),tr}function getOffsetParent(er,_e){const tr=getWindow(er);if(isTopLayer(er))return tr;if(!isHTMLElement$1(er)){let nr=getParentNode(er);for(;nr&&!isLastTraversableNode(nr);){if(isElement(nr)&&!isStaticPositioned(nr))return nr;nr=getParentNode(nr)}return tr}let rr=getTrueOffsetParent(er,_e);for(;rr&&isTableElement(rr)&&isStaticPositioned(rr);)rr=getTrueOffsetParent(rr,_e);return rr&&isLastTraversableNode(rr)&&isStaticPositioned(rr)&&!isContainingBlock(rr)?tr:rr||getContainingBlock(er)||tr}const getElementRects=async function(er){const _e=this.getOffsetParent||getOffsetParent,tr=this.getDimensions,rr=await tr(er.floating);return{reference:getRectRelativeToOffsetParent(er.reference,await _e(er.floating),er.strategy),floating:{x:0,y:0,width:rr.width,height:rr.height}}};function isRTL(er){return getComputedStyle$1(er).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(er,_e){let tr=null,rr;const nr=getDocumentElement(er);function sr(){var or;clearTimeout(rr),(or=tr)==null||or.disconnect(),tr=null}function ir(or,ar){or===void 0&&(or=!1),ar===void 0&&(ar=1),sr();const{left:lr,top:cr,width:Ar,height:ur}=er.getBoundingClientRect();if(or||_e(),!Ar||!ur)return;const dr=floor(cr),mr=floor(nr.clientWidth-(lr+Ar)),pr=floor(nr.clientHeight-(cr+ur)),yr=floor(lr),gr={rootMargin:-dr+"px "+-mr+"px "+-pr+"px "+-yr+"px",threshold:max$1(0,min(1,ar))||1};let Cr=!0;function Tr(Sr){const Nr=Sr[0].intersectionRatio;if(Nr!==ar){if(!Cr)return ir();Nr?ir(!1,Nr):rr=setTimeout(()=>{ir(!1,1e-7)},1e3)}Cr=!1}try{tr=new IntersectionObserver(Tr,{...gr,root:nr.ownerDocument})}catch{tr=new IntersectionObserver(Tr,gr)}tr.observe(er)}return ir(!0),sr}function autoUpdate(er,_e,tr,rr){rr===void 0&&(rr={});const{ancestorScroll:nr=!0,ancestorResize:sr=!0,elementResize:ir=typeof ResizeObserver=="function",layoutShift:or=typeof IntersectionObserver=="function",animationFrame:ar=!1}=rr,lr=unwrapElement(er),cr=nr||sr?[...lr?getOverflowAncestors(lr):[],...getOverflowAncestors(_e)]:[];cr.forEach(hr=>{nr&&hr.addEventListener("scroll",tr,{passive:!0}),sr&&hr.addEventListener("resize",tr)});const Ar=lr&&or?observeMove(lr,tr):null;let ur=-1,dr=null;ir&&(dr=new ResizeObserver(hr=>{let[gr]=hr;gr&&gr.target===lr&&dr&&(dr.unobserve(_e),cancelAnimationFrame(ur),ur=requestAnimationFrame(()=>{var Cr;(Cr=dr)==null||Cr.observe(_e)})),tr()}),lr&&!ar&&dr.observe(lr),dr.observe(_e));let mr,pr=ar?getBoundingClientRect(er):null;ar&&yr();function yr(){const hr=getBoundingClientRect(er);pr&&(hr.x!==pr.x||hr.y!==pr.y||hr.width!==pr.width||hr.height!==pr.height)&&tr(),pr=hr,mr=requestAnimationFrame(yr)}return tr(),()=>{var hr;cr.forEach(gr=>{nr&&gr.removeEventListener("scroll",tr),sr&&gr.removeEventListener("resize",tr)}),Ar==null||Ar(),(hr=dr)==null||hr.disconnect(),dr=null,ar&&cancelAnimationFrame(mr)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(er,_e,tr)=>{const rr=new Map,nr={platform,...tr},sr={...nr.platform,_c:rr};return computePosition$1(er,_e,{...nr,platform:sr})};var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual$1(er,_e){if(er===_e)return!0;if(typeof er!=typeof _e)return!1;if(typeof er=="function"&&er.toString()===_e.toString())return!0;let tr,rr,nr;if(er&&_e&&typeof er=="object"){if(Array.isArray(er)){if(tr=er.length,tr!==_e.length)return!1;for(rr=tr;rr--!==0;)if(!deepEqual$1(er[rr],_e[rr]))return!1;return!0}if(nr=Object.keys(er),tr=nr.length,tr!==Object.keys(_e).length)return!1;for(rr=tr;rr--!==0;)if(!{}.hasOwnProperty.call(_e,nr[rr]))return!1;for(rr=tr;rr--!==0;){const sr=nr[rr];if(!(sr==="_owner"&&er.$$typeof)&&!deepEqual$1(er[sr],_e[sr]))return!1}return!0}return er!==er&&_e!==_e}function getDPR(er){return typeof window>"u"?1:(er.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(er,_e){const tr=getDPR(er);return Math.round(_e*tr)/tr}function useLatestRef(er){const _e=reactExports.useRef(er);return index(()=>{_e.current=er}),_e}function useFloating(er){er===void 0&&(er={});const{placement:_e="bottom",strategy:tr="absolute",middleware:rr=[],platform:nr,elements:{reference:sr,floating:ir}={},transform:or=!0,whileElementsMounted:ar,open:lr}=er,[cr,Ar]=reactExports.useState({x:0,y:0,strategy:tr,placement:_e,middlewareData:{},isPositioned:!1}),[ur,dr]=reactExports.useState(rr);deepEqual$1(ur,rr)||dr(rr);const[mr,pr]=reactExports.useState(null),[yr,hr]=reactExports.useState(null),gr=reactExports.useCallback(Hr=>{Hr!==Nr.current&&(Nr.current=Hr,pr(Hr))},[]),Cr=reactExports.useCallback(Hr=>{Hr!==_r.current&&(_r.current=Hr,hr(Hr))},[]),Tr=sr||mr,Sr=ir||yr,Nr=reactExports.useRef(null),_r=reactExports.useRef(null),vr=reactExports.useRef(cr),br=ar!=null,Pr=useLatestRef(ar),Er=useLatestRef(nr),Rr=useLatestRef(lr),Ir=reactExports.useCallback(()=>{if(!Nr.current||!_r.current)return;const Hr={placement:_e,strategy:tr,middleware:ur};Er.current&&(Hr.platform=Er.current),computePosition(Nr.current,_r.current,Hr).then($r=>{const Xr={...$r,isPositioned:Rr.current!==!1};Qr.current&&!deepEqual$1(vr.current,Xr)&&(vr.current=Xr,reactDomExports.flushSync(()=>{Ar(Xr)}))})},[ur,_e,tr,Er,Rr]);index(()=>{lr===!1&&vr.current.isPositioned&&(vr.current.isPositioned=!1,Ar(Hr=>({...Hr,isPositioned:!1})))},[lr]);const Qr=reactExports.useRef(!1);index(()=>(Qr.current=!0,()=>{Qr.current=!1}),[]),index(()=>{if(Tr&&(Nr.current=Tr),Sr&&(_r.current=Sr),Tr&&Sr){if(Pr.current)return Pr.current(Tr,Sr,Ir);Ir()}},[Tr,Sr,Ir,Pr,br]);const Ur=reactExports.useMemo(()=>({reference:Nr,floating:_r,setReference:gr,setFloating:Cr}),[gr,Cr]),Vr=reactExports.useMemo(()=>({reference:Tr,floating:Sr}),[Tr,Sr]),Wr=reactExports.useMemo(()=>{const Hr={position:tr,left:0,top:0};if(!Vr.floating)return Hr;const $r=roundByDPR(Vr.floating,cr.x),Xr=roundByDPR(Vr.floating,cr.y);return or?{...Hr,transform:"translate("+$r+"px, "+Xr+"px)",...getDPR(Vr.floating)>=1.5&&{willChange:"transform"}}:{position:tr,left:$r,top:Xr}},[tr,or,Vr.floating,cr.x,cr.y]);return reactExports.useMemo(()=>({...cr,update:Ir,refs:Ur,elements:Vr,floatingStyles:Wr}),[cr,Ir,Ur,Vr,Wr])}const arrow$1=er=>{function _e(tr){return{}.hasOwnProperty.call(tr,"current")}return{name:"arrow",options:er,fn(tr){const{element:rr,padding:nr}=typeof er=="function"?er(tr):er;return rr&&_e(rr)?rr.current!=null?arrow$2({element:rr.current,padding:nr}).fn(tr):{}:rr?arrow$2({element:rr,padding:nr}).fn(tr):{}}}},offset=(er,_e)=>({...offset$1(er),options:[er,_e]}),shift=(er,_e)=>({...shift$1(er),options:[er,_e]}),limitShift=(er,_e)=>({...limitShift$1(er),options:[er,_e]}),flip=(er,_e)=>({...flip$1(er),options:[er,_e]}),size=(er,_e)=>({...size$1(er),options:[er,_e]}),hide=(er,_e)=>({...hide$1(er),options:[er,_e]}),arrow=(er,_e)=>({...arrow$1(er),options:[er,_e]});var NAME$1="Arrow",Arrow$1=reactExports.forwardRef((er,_e)=>{const{children:tr,width:rr=10,height:nr=5,...sr}=er;return jsxRuntimeExports.jsx(Primitive.svg,{...sr,ref:_e,width:rr,height:nr,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:er.asChild?tr:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$1;var Root$5=Arrow$1;function createContextScope$2(er,_e=[]){let tr=[];function rr(sr,ir){const or=reactExports.createContext(ir),ar=tr.length;tr=[...tr,ir];function lr(Ar){const{scope:ur,children:dr,...mr}=Ar,pr=(ur==null?void 0:ur[er][ar])||or,yr=reactExports.useMemo(()=>mr,Object.values(mr));return jsxRuntimeExports.jsx(pr.Provider,{value:yr,children:dr})}function cr(Ar,ur){const dr=(ur==null?void 0:ur[er][ar])||or,mr=reactExports.useContext(dr);if(mr)return mr;if(ir!==void 0)return ir;throw new Error(`\`${Ar}\` must be used within \`${sr}\``)}return lr.displayName=sr+"Provider",[lr,cr]}const nr=()=>{const sr=tr.map(ir=>reactExports.createContext(ir));return function(or){const ar=(or==null?void 0:or[er])||sr;return reactExports.useMemo(()=>({[`__scope${er}`]:{...or,[er]:ar}}),[or,ar])}};return nr.scopeName=er,[rr,composeContextScopes$2(nr,..._e)]}function composeContextScopes$2(...er){const _e=er[0];if(er.length===1)return _e;const tr=()=>{const rr=er.map(nr=>({useScope:nr(),scopeName:nr.scopeName}));return function(sr){const ir=rr.reduce((or,{useScope:ar,scopeName:lr})=>{const Ar=ar(sr)[`__scope${lr}`];return{...or,...Ar}},{});return reactExports.useMemo(()=>({[`__scope${_e.scopeName}`]:ir}),[ir])}};return tr.scopeName=_e.scopeName,tr}function useSize(er){const[_e,tr]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(er){tr({width:er.offsetWidth,height:er.offsetHeight});const rr=new ResizeObserver(nr=>{if(!Array.isArray(nr)||!nr.length)return;const sr=nr[0];let ir,or;if("borderBoxSize"in sr){const ar=sr.borderBoxSize,lr=Array.isArray(ar)?ar[0]:ar;ir=lr.inlineSize,or=lr.blockSize}else ir=er.offsetWidth,or=er.offsetHeight;tr({width:ir,height:or})});return rr.observe(er,{box:"border-box"}),()=>rr.unobserve(er)}else tr(void 0)},[er]),_e}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope$2(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=er=>{const{__scopePopper:_e,children:tr}=er,[rr,nr]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:_e,anchor:rr,onAnchorChange:nr,children:tr})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME="PopperAnchor",PopperAnchor=reactExports.forwardRef((er,_e)=>{const{__scopePopper:tr,virtualRef:rr,...nr}=er,sr=usePopperContext(ANCHOR_NAME,tr),ir=reactExports.useRef(null),or=useComposedRefs(_e,ir);return reactExports.useEffect(()=>{sr.onAnchorChange((rr==null?void 0:rr.current)||ir.current)}),rr?null:jsxRuntimeExports.jsx(Primitive.div,{...nr,ref:or})});PopperAnchor.displayName=ANCHOR_NAME;var CONTENT_NAME$5="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$5),PopperContent=reactExports.forwardRef((er,_e)=>{var Gr,Yr,dn,En,Sn,Bn;const{__scopePopper:tr,side:rr="bottom",sideOffset:nr=0,align:sr="center",alignOffset:ir=0,arrowPadding:or=0,avoidCollisions:ar=!0,collisionBoundary:lr=[],collisionPadding:cr=0,sticky:Ar="partial",hideWhenDetached:ur=!1,updatePositionStrategy:dr="optimized",onPlaced:mr,...pr}=er,yr=usePopperContext(CONTENT_NAME$5,tr),[hr,gr]=reactExports.useState(null),Cr=useComposedRefs(_e,kn=>gr(kn)),[Tr,Sr]=reactExports.useState(null),Nr=useSize(Tr),_r=(Nr==null?void 0:Nr.width)??0,vr=(Nr==null?void 0:Nr.height)??0,br=rr+(sr!=="center"?"-"+sr:""),Pr=typeof cr=="number"?cr:{top:0,right:0,bottom:0,left:0,...cr},Er=Array.isArray(lr)?lr:[lr],Rr=Er.length>0,Ir={padding:Pr,boundary:Er.filter(isNotNull),altBoundary:Rr},{refs:Qr,floatingStyles:Ur,placement:Vr,isPositioned:Wr,middlewareData:Hr}=useFloating({strategy:"fixed",placement:br,whileElementsMounted:(...kn)=>autoUpdate(...kn,{animationFrame:dr==="always"}),elements:{reference:yr.anchor},middleware:[offset({mainAxis:nr+vr,alignmentAxis:ir}),ar&&shift({mainAxis:!0,crossAxis:!1,limiter:Ar==="partial"?limitShift():void 0,...Ir}),ar&&flip({...Ir}),size({...Ir,apply:({elements:kn,rects:Kn,availableWidth:Cn,availableHeight:Jr})=>{const{width:Fn,height:Zr}=Kn.reference,hn=kn.floating.style;hn.setProperty("--radix-popper-available-width",`${Cn}px`),hn.setProperty("--radix-popper-available-height",`${Jr}px`),hn.setProperty("--radix-popper-anchor-width",`${Fn}px`),hn.setProperty("--radix-popper-anchor-height",`${Zr}px`)}}),Tr&&arrow({element:Tr,padding:or}),transformOrigin$1({arrowWidth:_r,arrowHeight:vr}),ur&&hide({strategy:"referenceHidden",...Ir})]}),[$r,Xr]=getSideAndAlignFromPlacement(Vr),pn=useCallbackRef$1(mr);useLayoutEffect2(()=>{Wr&&(pn==null||pn())},[Wr,pn]);const jr=(Gr=Hr.arrow)==null?void 0:Gr.x,Br=(Yr=Hr.arrow)==null?void 0:Yr.y,Lr=((dn=Hr.arrow)==null?void 0:dn.centerOffset)!==0,[Or,zr]=reactExports.useState();return useLayoutEffect2(()=>{hr&&zr(window.getComputedStyle(hr).zIndex)},[hr]),jsxRuntimeExports.jsx("div",{ref:Qr.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ur,transform:Wr?Ur.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Or,"--radix-popper-transform-origin":[(En=Hr.transformOrigin)==null?void 0:En.x,(Sn=Hr.transformOrigin)==null?void 0:Sn.y].join(" "),...((Bn=Hr.hide)==null?void 0:Bn.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:er.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:tr,placedSide:$r,onArrowChange:Sr,arrowX:jr,arrowY:Br,shouldHideArrow:Lr,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":$r,"data-align":Xr,...pr,ref:Cr,style:{...pr.style,animation:Wr?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$5;var ARROW_NAME$2="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function(_e,tr){const{__scopePopper:rr,...nr}=_e,sr=useContentContext(ARROW_NAME$2,rr),ir=OPPOSITE_SIDE[sr.placedSide];return jsxRuntimeExports.jsx("span",{ref:sr.onArrowChange,style:{position:"absolute",left:sr.arrowX,top:sr.arrowY,[ir]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[sr.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[sr.placedSide],visibility:sr.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$5,{...nr,ref:tr,style:{...nr.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$2;function isNotNull(er){return er!==null}var transformOrigin$1=er=>({name:"transformOrigin",options:er,fn(_e){var yr,hr,gr;const{placement:tr,rects:rr,middlewareData:nr}=_e,ir=((yr=nr.arrow)==null?void 0:yr.centerOffset)!==0,or=ir?0:er.arrowWidth,ar=ir?0:er.arrowHeight,[lr,cr]=getSideAndAlignFromPlacement(tr),Ar={start:"0%",center:"50%",end:"100%"}[cr],ur=(((hr=nr.arrow)==null?void 0:hr.x)??0)+or/2,dr=(((gr=nr.arrow)==null?void 0:gr.y)??0)+ar/2;let mr="",pr="";return lr==="bottom"?(mr=ir?Ar:`${ur}px`,pr=`${-ar}px`):lr==="top"?(mr=ir?Ar:`${ur}px`,pr=`${rr.floating.height+ar}px`):lr==="right"?(mr=`${-ar}px`,pr=ir?Ar:`${dr}px`):lr==="left"&&(mr=`${rr.floating.width+ar}px`,pr=ir?Ar:`${dr}px`),{data:{x:mr,y:pr}}}});function getSideAndAlignFromPlacement(er){const[_e,tr="center"]=er.split("-");return[_e,tr]}var Root2$4=Popper,Anchor=PopperAnchor,Content$2=PopperContent,Arrow=PopperArrow,[createTooltipContext,createTooltipScope]=createContextScope$3("Tooltip",[createPopperScope]),usePopperScope$1=createPopperScope(),PROVIDER_NAME="TooltipProvider",DEFAULT_DELAY_DURATION=700,TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME),TooltipProvider$1=er=>{const{__scopeTooltip:_e,delayDuration:tr=DEFAULT_DELAY_DURATION,skipDelayDuration:rr=300,disableHoverableContent:nr=!1,children:sr}=er,[ir,or]=reactExports.useState(!0),ar=reactExports.useRef(!1),lr=reactExports.useRef(0);return reactExports.useEffect(()=>{const cr=lr.current;return()=>window.clearTimeout(cr)},[]),jsxRuntimeExports.jsx(TooltipProviderContextProvider,{scope:_e,isOpenDelayed:ir,delayDuration:tr,onOpen:reactExports.useCallback(()=>{window.clearTimeout(lr.current),or(!1)},[]),onClose:reactExports.useCallback(()=>{window.clearTimeout(lr.current),lr.current=window.setTimeout(()=>or(!0),rr)},[rr]),isPointerInTransitRef:ar,onPointerInTransitChange:reactExports.useCallback(cr=>{ar.current=cr},[]),disableHoverableContent:nr,children:sr})};TooltipProvider$1.displayName=PROVIDER_NAME;var TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),TRIGGER_NAME$4="TooltipTrigger",TooltipTrigger=reactExports.forwardRef((er,_e)=>{const{__scopeTooltip:tr,...rr}=er,nr=useTooltipContext(TRIGGER_NAME$4,tr),sr=useTooltipProviderContext(TRIGGER_NAME$4,tr),ir=usePopperScope$1(tr),or=reactExports.useRef(null),ar=useComposedRefs(_e,or,nr.onTriggerChange),lr=reactExports.useRef(!1),cr=reactExports.useRef(!1),Ar=reactExports.useCallback(()=>lr.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",Ar),[Ar]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,...ir,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":nr.open?nr.contentId:void 0,"data-state":nr.stateAttribute,...rr,ref:ar,onPointerMove:composeEventHandlers$1(er.onPointerMove,ur=>{ur.pointerType!=="touch"&&!cr.current&&!sr.isPointerInTransitRef.current&&(nr.onTriggerEnter(),cr.current=!0)}),onPointerLeave:composeEventHandlers$1(er.onPointerLeave,()=>{nr.onTriggerLeave(),cr.current=!1}),onPointerDown:composeEventHandlers$1(er.onPointerDown,()=>{lr.current=!0,document.addEventListener("pointerup",Ar,{once:!0})}),onFocus:composeEventHandlers$1(er.onFocus,()=>{lr.current||nr.onOpen()}),onBlur:composeEventHandlers$1(er.onBlur,nr.onClose),onClick:composeEventHandlers$1(er.onClick,nr.onClose)})})});TooltipTrigger.displayName=TRIGGER_NAME$4;var PORTAL_NAME$3="TooltipPortal",[PortalProvider$1,usePortalContext$1]=createTooltipContext(PORTAL_NAME$3,{forceMount:void 0}),CONTENT_NAME$4="TooltipContent",TooltipContent$1=reactExports.forwardRef((er,_e)=>{const tr=usePortalContext$1(CONTENT_NAME$4,er.__scopeTooltip),{forceMount:rr=tr.forceMount,side:nr="top",...sr}=er,ir=useTooltipContext(CONTENT_NAME$4,er.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:rr||ir.open,children:ir.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:nr,...sr,ref:_e}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:nr,...sr,ref:_e})})}),TooltipContentHoverable=reactExports.forwardRef((er,_e)=>{const tr=useTooltipContext(CONTENT_NAME$4,er.__scopeTooltip),rr=useTooltipProviderContext(CONTENT_NAME$4,er.__scopeTooltip),nr=reactExports.useRef(null),sr=useComposedRefs(_e,nr),[ir,or]=reactExports.useState(null),{trigger:ar,onClose:lr}=tr,cr=nr.current,{onPointerInTransitChange:Ar}=rr,ur=reactExports.useCallback(()=>{or(null),Ar(!1)},[Ar]),dr=reactExports.useCallback((mr,pr)=>{const yr=mr.currentTarget,hr={x:mr.clientX,y:mr.clientY},gr=getExitSideFromRect(hr,yr.getBoundingClientRect()),Cr=getPaddedExitPoints(hr,gr),Tr=getPointsFromRect(pr.getBoundingClientRect()),Sr=getHull([...Cr,...Tr]);or(Sr),Ar(!0)},[Ar]);return reactExports.useEffect(()=>()=>ur(),[ur]),reactExports.useEffect(()=>{if(ar&&cr){const mr=yr=>dr(yr,cr),pr=yr=>dr(yr,ar);return ar.addEventListener("pointerleave",mr),cr.addEventListener("pointerleave",pr),()=>{ar.removeEventListener("pointerleave",mr),cr.removeEventListener("pointerleave",pr)}}},[ar,cr,dr,ur]),reactExports.useEffect(()=>{if(ir){const mr=pr=>{const yr=pr.target,hr={x:pr.clientX,y:pr.clientY},gr=(ar==null?void 0:ar.contains(yr))||(cr==null?void 0:cr.contains(yr)),Cr=!isPointInPolygon(hr,ir);gr?ur():Cr&&(ur(),lr())};return document.addEventListener("pointermove",mr),()=>document.removeEventListener("pointermove",mr)}},[ar,cr,ir,lr,ur]),jsxRuntimeExports.jsx(TooltipContentImpl,{...er,ref:sr})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),TooltipContentImpl=reactExports.forwardRef((er,_e)=>{const{__scopeTooltip:tr,children:rr,"aria-label":nr,onEscapeKeyDown:sr,onPointerDownOutside:ir,...or}=er,ar=useTooltipContext(CONTENT_NAME$4,tr),lr=usePopperScope$1(tr),{onClose:cr}=ar;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,cr),()=>document.removeEventListener(TOOLTIP_OPEN,cr)),[cr]),reactExports.useEffect(()=>{if(ar.trigger){const Ar=ur=>{const dr=ur.target;dr!=null&&dr.contains(ar.trigger)&&cr()};return window.addEventListener("scroll",Ar,{capture:!0}),()=>window.removeEventListener("scroll",Ar,{capture:!0})}},[ar.trigger,cr]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:sr,onPointerDownOutside:ir,onFocusOutside:Ar=>Ar.preventDefault(),onDismiss:cr,children:jsxRuntimeExports.jsxs(Content$2,{"data-state":ar.stateAttribute,...lr,...or,ref:_e,style:{...or.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable,{children:rr}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:tr,isInside:!0,children:jsxRuntimeExports.jsx(Root$6,{id:ar.contentId,role:"tooltip",children:nr||rr})})]})})});TooltipContent$1.displayName=CONTENT_NAME$4;var ARROW_NAME$1="TooltipArrow",TooltipArrow=reactExports.forwardRef((er,_e)=>{const{__scopeTooltip:tr,...rr}=er,nr=usePopperScope$1(tr);return useVisuallyHiddenContentContext(ARROW_NAME$1,tr).isInside?null:jsxRuntimeExports.jsx(Arrow,{...nr,...rr,ref:_e})});TooltipArrow.displayName=ARROW_NAME$1;function getExitSideFromRect(er,_e){const tr=Math.abs(_e.top-er.y),rr=Math.abs(_e.bottom-er.y),nr=Math.abs(_e.right-er.x),sr=Math.abs(_e.left-er.x);switch(Math.min(tr,rr,nr,sr)){case sr:return"left";case nr:return"right";case tr:return"top";case rr:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(er,_e,tr=5){const rr=[];switch(_e){case"top":rr.push({x:er.x-tr,y:er.y+tr},{x:er.x+tr,y:er.y+tr});break;case"bottom":rr.push({x:er.x-tr,y:er.y-tr},{x:er.x+tr,y:er.y-tr});break;case"left":rr.push({x:er.x+tr,y:er.y-tr},{x:er.x+tr,y:er.y+tr});break;case"right":rr.push({x:er.x-tr,y:er.y-tr},{x:er.x-tr,y:er.y+tr});break}return rr}function getPointsFromRect(er){const{top:_e,right:tr,bottom:rr,left:nr}=er;return[{x:nr,y:_e},{x:tr,y:_e},{x:tr,y:rr},{x:nr,y:rr}]}function isPointInPolygon(er,_e){const{x:tr,y:rr}=er;let nr=!1;for(let sr=0,ir=_e.length-1;sr<_e.length;ir=sr++){const or=_e[sr].x,ar=_e[sr].y,lr=_e[ir].x,cr=_e[ir].y;ar>rr!=cr>rr&&tr<(lr-or)*(rr-ar)/(cr-ar)+or&&(nr=!nr)}return nr}function getHull(er){const _e=er.slice();return _e.sort((tr,rr)=>tr.x<rr.x?-1:tr.x>rr.x?1:tr.y<rr.y?-1:tr.y>rr.y?1:0),getHullPresorted(_e)}function getHullPresorted(er){if(er.length<=1)return er.slice();const _e=[];for(let rr=0;rr<er.length;rr++){const nr=er[rr];for(;_e.length>=2;){const sr=_e[_e.length-1],ir=_e[_e.length-2];if((sr.x-ir.x)*(nr.y-ir.y)>=(sr.y-ir.y)*(nr.x-ir.x))_e.pop();else break}_e.push(nr)}_e.pop();const tr=[];for(let rr=er.length-1;rr>=0;rr--){const nr=er[rr];for(;tr.length>=2;){const sr=tr[tr.length-1],ir=tr[tr.length-2];if((sr.x-ir.x)*(nr.y-ir.y)>=(sr.y-ir.y)*(nr.x-ir.x))tr.pop();else break}tr.push(nr)}return tr.pop(),_e.length===1&&tr.length===1&&_e[0].x===tr[0].x&&_e[0].y===tr[0].y?_e:_e.concat(tr)}var Provider$1=TooltipProvider$1,Content2$2=TooltipContent$1;const TooltipProvider=Provider$1,TooltipContent=reactExports.forwardRef(({className:er,sideOffset:_e=4,...tr},rr)=>jsxRuntimeExports.jsx(Content2$2,{ref:rr,sideOffset:_e,className:cn$1("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",er),...tr}));TooltipContent.displayName=Content2$2.displayName;var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(er){return this.listeners.add(er),this.onSubscribe(),()=>{this.listeners.delete(er),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer=typeof window>"u"||"Deno"in globalThis;function noop$1(){}function functionalUpdate(er,_e){return typeof er=="function"?er(_e):er}function isValidTimeout(er){return typeof er=="number"&&er>=0&&er!==1/0}function timeUntilStale(er,_e){return Math.max(er+(_e||0)-Date.now(),0)}function resolveStaleTime(er,_e){return typeof er=="function"?er(_e):er}function resolveEnabled(er,_e){return typeof er=="function"?er(_e):er}function matchQuery(er,_e){const{type:tr="all",exact:rr,fetchStatus:nr,predicate:sr,queryKey:ir,stale:or}=er;if(ir){if(rr){if(_e.queryHash!==hashQueryKeyByOptions(ir,_e.options))return!1}else if(!partialMatchKey(_e.queryKey,ir))return!1}if(tr!=="all"){const ar=_e.isActive();if(tr==="active"&&!ar||tr==="inactive"&&ar)return!1}return!(typeof or=="boolean"&&_e.isStale()!==or||nr&&nr!==_e.state.fetchStatus||sr&&!sr(_e))}function matchMutation(er,_e){const{exact:tr,status:rr,predicate:nr,mutationKey:sr}=er;if(sr){if(!_e.options.mutationKey)return!1;if(tr){if(hashKey(_e.options.mutationKey)!==hashKey(sr))return!1}else if(!partialMatchKey(_e.options.mutationKey,sr))return!1}return!(rr&&_e.state.status!==rr||nr&&!nr(_e))}function hashQueryKeyByOptions(er,_e){return((_e==null?void 0:_e.queryKeyHashFn)||hashKey)(er)}function hashKey(er){return JSON.stringify(er,(_e,tr)=>isPlainObject(tr)?Object.keys(tr).sort().reduce((rr,nr)=>(rr[nr]=tr[nr],rr),{}):tr)}function partialMatchKey(er,_e){return er===_e?!0:typeof er!=typeof _e?!1:er&&_e&&typeof er=="object"&&typeof _e=="object"?!Object.keys(_e).some(tr=>!partialMatchKey(er[tr],_e[tr])):!1}function replaceEqualDeep(er,_e){if(er===_e)return er;const tr=isPlainArray(er)&&isPlainArray(_e);if(tr||isPlainObject(er)&&isPlainObject(_e)){const rr=tr?er:Object.keys(er),nr=rr.length,sr=tr?_e:Object.keys(_e),ir=sr.length,or=tr?[]:{};let ar=0;for(let lr=0;lr<ir;lr++){const cr=tr?lr:sr[lr];(!tr&&rr.includes(cr)||tr)&&er[cr]===void 0&&_e[cr]===void 0?(or[cr]=void 0,ar++):(or[cr]=replaceEqualDeep(er[cr],_e[cr]),or[cr]===er[cr]&&er[cr]!==void 0&&ar++)}return nr===ir&&ar===nr?er:or}return _e}function isPlainArray(er){return Array.isArray(er)&&er.length===Object.keys(er).length}function isPlainObject(er){if(!hasObjectPrototype(er))return!1;const _e=er.constructor;if(_e===void 0)return!0;const tr=_e.prototype;return!(!hasObjectPrototype(tr)||!tr.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(er)!==Object.prototype)}function hasObjectPrototype(er){return Object.prototype.toString.call(er)==="[object Object]"}function sleep$1(er){return new Promise(_e=>{setTimeout(_e,er)})}function replaceData(er,_e,tr){return typeof tr.structuralSharing=="function"?tr.structuralSharing(er,_e):tr.structuralSharing!==!1?replaceEqualDeep(er,_e):_e}function addToEnd(er,_e,tr=0){const rr=[...er,_e];return tr&&rr.length>tr?rr.slice(1):rr}function addToStart(er,_e,tr=0){const rr=[_e,...er];return tr&&rr.length>tr?rr.slice(0,-1):rr}var skipToken=Symbol();function ensureQueryFn(er,_e){return!er.queryFn&&(_e!=null&&_e.initialPromise)?()=>_e.initialPromise:!er.queryFn||er.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${er.queryHash}'`)):er.queryFn}var gu,KA,Xu,M0,FocusManager=(M0=class extends Subscribable{constructor(){super();Vn(this,gu);Vn(this,KA);Vn(this,Xu);On(this,Xu,_e=>{if(!isServer&&window.addEventListener){const tr=()=>_e();return window.addEventListener("visibilitychange",tr,!1),()=>{window.removeEventListener("visibilitychange",tr)}}})}onSubscribe(){kr(this,KA)||this.setEventListener(kr(this,Xu))}onUnsubscribe(){var _e;this.hasListeners()||((_e=kr(this,KA))==null||_e.call(this),On(this,KA,void 0))}setEventListener(_e){var tr;On(this,Xu,_e),(tr=kr(this,KA))==null||tr.call(this),On(this,KA,_e(rr=>{typeof rr=="boolean"?this.setFocused(rr):this.onFocus()}))}setFocused(_e){kr(this,gu)!==_e&&(On(this,gu,_e),this.onFocus())}onFocus(){const _e=this.isFocused();this.listeners.forEach(tr=>{tr(_e)})}isFocused(){var _e;return typeof kr(this,gu)=="boolean"?kr(this,gu):((_e=globalThis.document)==null?void 0:_e.visibilityState)!=="hidden"}},gu=new WeakMap,KA=new WeakMap,Xu=new WeakMap,M0),focusManager=new FocusManager,Yu,zA,Ju,Q0,OnlineManager=(Q0=class extends Subscribable{constructor(){super();Vn(this,Yu,!0);Vn(this,zA);Vn(this,Ju);On(this,Ju,_e=>{if(!isServer&&window.addEventListener){const tr=()=>_e(!0),rr=()=>_e(!1);return window.addEventListener("online",tr,!1),window.addEventListener("offline",rr,!1),()=>{window.removeEventListener("online",tr),window.removeEventListener("offline",rr)}}})}onSubscribe(){kr(this,zA)||this.setEventListener(kr(this,Ju))}onUnsubscribe(){var _e;this.hasListeners()||((_e=kr(this,zA))==null||_e.call(this),On(this,zA,void 0))}setEventListener(_e){var tr;On(this,Ju,_e),(tr=kr(this,zA))==null||tr.call(this),On(this,zA,_e(this.setOnline.bind(this)))}setOnline(_e){kr(this,Yu)!==_e&&(On(this,Yu,_e),this.listeners.forEach(rr=>{rr(_e)}))}isOnline(){return kr(this,Yu)}},Yu=new WeakMap,zA=new WeakMap,Ju=new WeakMap,Q0),onlineManager=new OnlineManager;function pendingThenable(){let er,_e;const tr=new Promise((nr,sr)=>{er=nr,_e=sr});tr.status="pending",tr.catch(()=>{});function rr(nr){Object.assign(tr,nr),delete tr.resolve,delete tr.reject}return tr.resolve=nr=>{rr({status:"fulfilled",value:nr}),er(nr)},tr.reject=nr=>{rr({status:"rejected",reason:nr}),_e(nr)},tr}function defaultRetryDelay(er){return Math.min(1e3*2**er,3e4)}function canFetch(er){return(er??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(er){super("CancelledError"),this.revert=er==null?void 0:er.revert,this.silent=er==null?void 0:er.silent}};function isCancelledError(er){return er instanceof CancelledError}function createRetryer(er){let _e=!1,tr=0,rr=!1,nr;const sr=pendingThenable(),ir=pr=>{var yr;rr||(ur(new CancelledError(pr)),(yr=er.abort)==null||yr.call(er))},or=()=>{_e=!0},ar=()=>{_e=!1},lr=()=>focusManager.isFocused()&&(er.networkMode==="always"||onlineManager.isOnline())&&er.canRun(),cr=()=>canFetch(er.networkMode)&&er.canRun(),Ar=pr=>{var yr;rr||(rr=!0,(yr=er.onSuccess)==null||yr.call(er,pr),nr==null||nr(),sr.resolve(pr))},ur=pr=>{var yr;rr||(rr=!0,(yr=er.onError)==null||yr.call(er,pr),nr==null||nr(),sr.reject(pr))},dr=()=>new Promise(pr=>{var yr;nr=hr=>{(rr||lr())&&pr(hr)},(yr=er.onPause)==null||yr.call(er)}).then(()=>{var pr;nr=void 0,rr||(pr=er.onContinue)==null||pr.call(er)}),mr=()=>{if(rr)return;let pr;const yr=tr===0?er.initialPromise:void 0;try{pr=yr??er.fn()}catch(hr){pr=Promise.reject(hr)}Promise.resolve(pr).then(Ar).catch(hr=>{var Nr;if(rr)return;const gr=er.retry??(isServer?0:3),Cr=er.retryDelay??defaultRetryDelay,Tr=typeof Cr=="function"?Cr(tr,hr):Cr,Sr=gr===!0||typeof gr=="number"&&tr<gr||typeof gr=="function"&&gr(tr,hr);if(_e||!Sr){ur(hr);return}tr++,(Nr=er.onFail)==null||Nr.call(er,tr,hr),sleep$1(Tr).then(()=>lr()?void 0:dr()).then(()=>{_e?ur(hr):mr()})})};return{promise:sr,cancel:ir,continue:()=>(nr==null||nr(),sr),cancelRetry:or,continueRetry:ar,canStart:cr,start:()=>(cr()?mr():dr().then(mr),sr)}}function createNotifyManager(){let er=[],_e=0,tr=or=>{or()},rr=or=>{or()},nr=or=>setTimeout(or,0);const sr=or=>{_e?er.push(or):nr(()=>{tr(or)})},ir=()=>{const or=er;er=[],or.length&&nr(()=>{rr(()=>{or.forEach(ar=>{tr(ar)})})})};return{batch:or=>{let ar;_e++;try{ar=or()}finally{_e--,_e||ir()}return ar},batchCalls:or=>(...ar)=>{sr(()=>{or(...ar)})},schedule:sr,setNotifyFunction:or=>{tr=or},setBatchNotifyFunction:or=>{rr=or},setScheduler:or=>{nr=or}}}var notifyManager=createNotifyManager(),xu,V0,Removable=(V0=class{constructor(){Vn(this,xu)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&On(this,xu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(er){this.gcTime=Math.max(this.gcTime||0,er??(isServer?1/0:5*60*1e3))}clearGcTimeout(){kr(this,xu)&&(clearTimeout(kr(this,xu)),On(this,xu,void 0))}},xu=new WeakMap,V0),Zu,_d,El,jo,Sp,yu,Fl,uA,$0,Query$1=($0=class extends Removable{constructor(tr){super();Vn(this,Fl);Vn(this,Zu);Vn(this,_d);Vn(this,El);Vn(this,jo);Vn(this,Sp);Vn(this,yu);On(this,yu,!1),On(this,Sp,tr.defaultOptions),this.setOptions(tr.options),this.observers=[],On(this,El,tr.cache),this.queryKey=tr.queryKey,this.queryHash=tr.queryHash,On(this,Zu,getDefaultState$1(this.options)),this.state=tr.state??kr(this,Zu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var tr;return(tr=kr(this,jo))==null?void 0:tr.promise}setOptions(tr){this.options={...kr(this,Sp),...tr},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&kr(this,El).remove(this)}setData(tr,rr){const nr=replaceData(this.state.data,tr,this.options);return Un(this,Fl,uA).call(this,{data:nr,type:"success",dataUpdatedAt:rr==null?void 0:rr.updatedAt,manual:rr==null?void 0:rr.manual}),nr}setState(tr,rr){Un(this,Fl,uA).call(this,{type:"setState",state:tr,setStateOptions:rr})}cancel(tr){var nr,sr;const rr=(nr=kr(this,jo))==null?void 0:nr.promise;return(sr=kr(this,jo))==null||sr.cancel(tr),rr?rr.then(noop$1).catch(noop$1):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(kr(this,Zu))}isActive(){return this.observers.some(tr=>resolveEnabled(tr.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(tr=>tr.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(tr=0){return this.state.isInvalidated||this.state.data===void 0||!timeUntilStale(this.state.dataUpdatedAt,tr)}onFocus(){var rr;const tr=this.observers.find(nr=>nr.shouldFetchOnWindowFocus());tr==null||tr.refetch({cancelRefetch:!1}),(rr=kr(this,jo))==null||rr.continue()}onOnline(){var rr;const tr=this.observers.find(nr=>nr.shouldFetchOnReconnect());tr==null||tr.refetch({cancelRefetch:!1}),(rr=kr(this,jo))==null||rr.continue()}addObserver(tr){this.observers.includes(tr)||(this.observers.push(tr),this.clearGcTimeout(),kr(this,El).notify({type:"observerAdded",query:this,observer:tr}))}removeObserver(tr){this.observers.includes(tr)&&(this.observers=this.observers.filter(rr=>rr!==tr),this.observers.length||(kr(this,jo)&&(kr(this,yu)?kr(this,jo).cancel({revert:!0}):kr(this,jo).cancelRetry()),this.scheduleGc()),kr(this,El).notify({type:"observerRemoved",query:this,observer:tr}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Un(this,Fl,uA).call(this,{type:"invalidate"})}fetch(tr,rr){var lr,cr,Ar;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(rr!=null&&rr.cancelRefetch))this.cancel({silent:!0});else if(kr(this,jo))return kr(this,jo).continueRetry(),kr(this,jo).promise}if(tr&&this.setOptions(tr),!this.options.queryFn){const ur=this.observers.find(dr=>dr.options.queryFn);ur&&this.setOptions(ur.options)}const nr=new AbortController,sr=ur=>{Object.defineProperty(ur,"signal",{enumerable:!0,get:()=>(On(this,yu,!0),nr.signal)})},ir=()=>{const ur=ensureQueryFn(this.options,rr),dr={queryKey:this.queryKey,meta:this.meta};return sr(dr),On(this,yu,!1),this.options.persister?this.options.persister(ur,dr,this):ur(dr)},or={fetchOptions:rr,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:ir};sr(or),(lr=this.options.behavior)==null||lr.onFetch(or,this),On(this,_d,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((cr=or.fetchOptions)==null?void 0:cr.meta))&&Un(this,Fl,uA).call(this,{type:"fetch",meta:(Ar=or.fetchOptions)==null?void 0:Ar.meta});const ar=ur=>{var dr,mr,pr,yr;isCancelledError(ur)&&ur.silent||Un(this,Fl,uA).call(this,{type:"error",error:ur}),isCancelledError(ur)||((mr=(dr=kr(this,El).config).onError)==null||mr.call(dr,ur,this),(yr=(pr=kr(this,El).config).onSettled)==null||yr.call(pr,this.state.data,ur,this)),this.scheduleGc()};return On(this,jo,createRetryer({initialPromise:rr==null?void 0:rr.initialPromise,fn:or.fetchFn,abort:nr.abort.bind(nr),onSuccess:ur=>{var dr,mr,pr,yr;if(ur===void 0){ar(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(ur)}catch(hr){ar(hr);return}(mr=(dr=kr(this,El).config).onSuccess)==null||mr.call(dr,ur,this),(yr=(pr=kr(this,El).config).onSettled)==null||yr.call(pr,ur,this.state.error,this),this.scheduleGc()},onError:ar,onFail:(ur,dr)=>{Un(this,Fl,uA).call(this,{type:"failed",failureCount:ur,error:dr})},onPause:()=>{Un(this,Fl,uA).call(this,{type:"pause"})},onContinue:()=>{Un(this,Fl,uA).call(this,{type:"continue"})},retry:or.options.retry,retryDelay:or.options.retryDelay,networkMode:or.options.networkMode,canRun:()=>!0})),kr(this,jo).start()}},Zu=new WeakMap,_d=new WeakMap,El=new WeakMap,jo=new WeakMap,Sp=new WeakMap,yu=new WeakMap,Fl=new WeakSet,uA=function(tr){const rr=nr=>{switch(tr.type){case"failed":return{...nr,fetchFailureCount:tr.failureCount,fetchFailureReason:tr.error};case"pause":return{...nr,fetchStatus:"paused"};case"continue":return{...nr,fetchStatus:"fetching"};case"fetch":return{...nr,...fetchState(nr.data,this.options),fetchMeta:tr.meta??null};case"success":return{...nr,data:tr.data,dataUpdateCount:nr.dataUpdateCount+1,dataUpdatedAt:tr.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!tr.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const sr=tr.error;return isCancelledError(sr)&&sr.revert&&kr(this,_d)?{...kr(this,_d),fetchStatus:"idle"}:{...nr,error:sr,errorUpdateCount:nr.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:nr.fetchFailureCount+1,fetchFailureReason:sr,fetchStatus:"idle",status:"error"};case"invalidate":return{...nr,isInvalidated:!0};case"setState":return{...nr,...tr.state}}};this.state=rr(this.state),notifyManager.batch(()=>{this.observers.forEach(nr=>{nr.onQueryUpdate()}),kr(this,El).notify({query:this,type:"updated",action:tr})})},$0);function fetchState(er,_e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(_e.networkMode)?"fetching":"paused",...er===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(er){const _e=typeof er.initialData=="function"?er.initialData():er.initialData,tr=_e!==void 0,rr=tr?typeof er.initialDataUpdatedAt=="function"?er.initialDataUpdatedAt():er.initialDataUpdatedAt:0;return{data:_e,dataUpdateCount:0,dataUpdatedAt:tr?rr??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:tr?"success":"pending",fetchStatus:"idle"}}var zl,H0,QueryCache=(H0=class extends Subscribable{constructor(_e={}){super();Vn(this,zl);this.config=_e,On(this,zl,new Map)}build(_e,tr,rr){const nr=tr.queryKey,sr=tr.queryHash??hashQueryKeyByOptions(nr,tr);let ir=this.get(sr);return ir||(ir=new Query$1({cache:this,queryKey:nr,queryHash:sr,options:_e.defaultQueryOptions(tr),state:rr,defaultOptions:_e.getQueryDefaults(nr)}),this.add(ir)),ir}add(_e){kr(this,zl).has(_e.queryHash)||(kr(this,zl).set(_e.queryHash,_e),this.notify({type:"added",query:_e}))}remove(_e){const tr=kr(this,zl).get(_e.queryHash);tr&&(_e.destroy(),tr===_e&&kr(this,zl).delete(_e.queryHash),this.notify({type:"removed",query:_e}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(_e=>{this.remove(_e)})})}get(_e){return kr(this,zl).get(_e)}getAll(){return[...kr(this,zl).values()]}find(_e){const tr={exact:!0,..._e};return this.getAll().find(rr=>matchQuery(tr,rr))}findAll(_e={}){const tr=this.getAll();return Object.keys(_e).length>0?tr.filter(rr=>matchQuery(_e,rr)):tr}notify(_e){notifyManager.batch(()=>{this.listeners.forEach(tr=>{tr(_e)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(_e=>{_e.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(_e=>{_e.onOnline()})})}},zl=new WeakMap,H0),Gl,Oo,vu,Wl,HA,K0,Mutation$1=(K0=class extends Removable{constructor(tr){super();Vn(this,Wl);Vn(this,Gl);Vn(this,Oo);Vn(this,vu);this.mutationId=tr.mutationId,On(this,Oo,tr.mutationCache),On(this,Gl,[]),this.state=tr.state||getDefaultState(),this.setOptions(tr.options),this.scheduleGc()}setOptions(tr){this.options=tr,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(tr){kr(this,Gl).includes(tr)||(kr(this,Gl).push(tr),this.clearGcTimeout(),kr(this,Oo).notify({type:"observerAdded",mutation:this,observer:tr}))}removeObserver(tr){On(this,Gl,kr(this,Gl).filter(rr=>rr!==tr)),this.scheduleGc(),kr(this,Oo).notify({type:"observerRemoved",mutation:this,observer:tr})}optionalRemove(){kr(this,Gl).length||(this.state.status==="pending"?this.scheduleGc():kr(this,Oo).remove(this))}continue(){var tr;return((tr=kr(this,vu))==null?void 0:tr.continue())??this.execute(this.state.variables)}async execute(tr){var sr,ir,or,ar,lr,cr,Ar,ur,dr,mr,pr,yr,hr,gr,Cr,Tr,Sr,Nr,_r,vr;On(this,vu,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(tr):Promise.reject(new Error("No mutationFn found")),onFail:(br,Pr)=>{Un(this,Wl,HA).call(this,{type:"failed",failureCount:br,error:Pr})},onPause:()=>{Un(this,Wl,HA).call(this,{type:"pause"})},onContinue:()=>{Un(this,Wl,HA).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>kr(this,Oo).canRun(this)}));const rr=this.state.status==="pending",nr=!kr(this,vu).canStart();try{if(!rr){Un(this,Wl,HA).call(this,{type:"pending",variables:tr,isPaused:nr}),await((ir=(sr=kr(this,Oo).config).onMutate)==null?void 0:ir.call(sr,tr,this));const Pr=await((ar=(or=this.options).onMutate)==null?void 0:ar.call(or,tr));Pr!==this.state.context&&Un(this,Wl,HA).call(this,{type:"pending",context:Pr,variables:tr,isPaused:nr})}const br=await kr(this,vu).start();return await((cr=(lr=kr(this,Oo).config).onSuccess)==null?void 0:cr.call(lr,br,tr,this.state.context,this)),await((ur=(Ar=this.options).onSuccess)==null?void 0:ur.call(Ar,br,tr,this.state.context)),await((mr=(dr=kr(this,Oo).config).onSettled)==null?void 0:mr.call(dr,br,null,this.state.variables,this.state.context,this)),await((yr=(pr=this.options).onSettled)==null?void 0:yr.call(pr,br,null,tr,this.state.context)),Un(this,Wl,HA).call(this,{type:"success",data:br}),br}catch(br){try{throw await((gr=(hr=kr(this,Oo).config).onError)==null?void 0:gr.call(hr,br,tr,this.state.context,this)),await((Tr=(Cr=this.options).onError)==null?void 0:Tr.call(Cr,br,tr,this.state.context)),await((Nr=(Sr=kr(this,Oo).config).onSettled)==null?void 0:Nr.call(Sr,void 0,br,this.state.variables,this.state.context,this)),await((vr=(_r=this.options).onSettled)==null?void 0:vr.call(_r,void 0,br,tr,this.state.context)),br}finally{Un(this,Wl,HA).call(this,{type:"error",error:br})}}finally{kr(this,Oo).runNext(this)}}},Gl=new WeakMap,Oo=new WeakMap,vu=new WeakMap,Wl=new WeakSet,HA=function(tr){const rr=nr=>{switch(tr.type){case"failed":return{...nr,failureCount:tr.failureCount,failureReason:tr.error};case"pause":return{...nr,isPaused:!0};case"continue":return{...nr,isPaused:!1};case"pending":return{...nr,context:tr.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:tr.isPaused,status:"pending",variables:tr.variables,submittedAt:Date.now()};case"success":return{...nr,data:tr.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...nr,data:void 0,error:tr.error,failureCount:nr.failureCount+1,failureReason:tr.error,isPaused:!1,status:"error"}}};this.state=rr(this.state),notifyManager.batch(()=>{kr(this,Gl).forEach(nr=>{nr.onMutationUpdate(tr)}),kr(this,Oo).notify({mutation:this,type:"updated",action:tr})})},K0);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Yo,Tp,z0,MutationCache=(z0=class extends Subscribable{constructor(_e={}){super();Vn(this,Yo);Vn(this,Tp);this.config=_e,On(this,Yo,new Map),On(this,Tp,Date.now())}build(_e,tr,rr){const nr=new Mutation$1({mutationCache:this,mutationId:++$A(this,Tp)._,options:_e.defaultMutationOptions(tr),state:rr});return this.add(nr),nr}add(_e){const tr=scopeFor(_e),rr=kr(this,Yo).get(tr)??[];rr.push(_e),kr(this,Yo).set(tr,rr),this.notify({type:"added",mutation:_e})}remove(_e){var rr;const tr=scopeFor(_e);if(kr(this,Yo).has(tr)){const nr=(rr=kr(this,Yo).get(tr))==null?void 0:rr.filter(sr=>sr!==_e);nr&&(nr.length===0?kr(this,Yo).delete(tr):kr(this,Yo).set(tr,nr))}this.notify({type:"removed",mutation:_e})}canRun(_e){var rr;const tr=(rr=kr(this,Yo).get(scopeFor(_e)))==null?void 0:rr.find(nr=>nr.state.status==="pending");return!tr||tr===_e}runNext(_e){var rr;const tr=(rr=kr(this,Yo).get(scopeFor(_e)))==null?void 0:rr.find(nr=>nr!==_e&&nr.state.isPaused);return(tr==null?void 0:tr.continue())??Promise.resolve()}clear(){notifyManager.batch(()=>{this.getAll().forEach(_e=>{this.remove(_e)})})}getAll(){return[...kr(this,Yo).values()].flat()}find(_e){const tr={exact:!0,..._e};return this.getAll().find(rr=>matchMutation(tr,rr))}findAll(_e={}){return this.getAll().filter(tr=>matchMutation(_e,tr))}notify(_e){notifyManager.batch(()=>{this.listeners.forEach(tr=>{tr(_e)})})}resumePausedMutations(){const _e=this.getAll().filter(tr=>tr.state.isPaused);return notifyManager.batch(()=>Promise.all(_e.map(tr=>tr.continue().catch(noop$1))))}},Yo=new WeakMap,Tp=new WeakMap,z0);function scopeFor(er){var _e;return((_e=er.options.scope)==null?void 0:_e.id)??String(er.mutationId)}function infiniteQueryBehavior(er){return{onFetch:(_e,tr)=>{var cr,Ar,ur,dr,mr;const rr=_e.options,nr=(ur=(Ar=(cr=_e.fetchOptions)==null?void 0:cr.meta)==null?void 0:Ar.fetchMore)==null?void 0:ur.direction,sr=((dr=_e.state.data)==null?void 0:dr.pages)||[],ir=((mr=_e.state.data)==null?void 0:mr.pageParams)||[];let or={pages:[],pageParams:[]},ar=0;const lr=async()=>{let pr=!1;const yr=Cr=>{Object.defineProperty(Cr,"signal",{enumerable:!0,get:()=>(_e.signal.aborted?pr=!0:_e.signal.addEventListener("abort",()=>{pr=!0}),_e.signal)})},hr=ensureQueryFn(_e.options,_e.fetchOptions),gr=async(Cr,Tr,Sr)=>{if(pr)return Promise.reject();if(Tr==null&&Cr.pages.length)return Promise.resolve(Cr);const Nr={queryKey:_e.queryKey,pageParam:Tr,direction:Sr?"backward":"forward",meta:_e.options.meta};yr(Nr);const _r=await hr(Nr),{maxPages:vr}=_e.options,br=Sr?addToStart:addToEnd;return{pages:br(Cr.pages,_r,vr),pageParams:br(Cr.pageParams,Tr,vr)}};if(nr&&sr.length){const Cr=nr==="backward",Tr=Cr?getPreviousPageParam:getNextPageParam,Sr={pages:sr,pageParams:ir},Nr=Tr(rr,Sr);or=await gr(Sr,Nr,Cr)}else{const Cr=er??sr.length;do{const Tr=ar===0?ir[0]??rr.initialPageParam:getNextPageParam(rr,or);if(ar>0&&Tr==null)break;or=await gr(or,Tr),ar++}while(ar<Cr)}return or};_e.options.persister?_e.fetchFn=()=>{var pr,yr;return(yr=(pr=_e.options).persister)==null?void 0:yr.call(pr,lr,{queryKey:_e.queryKey,meta:_e.options.meta,signal:_e.signal},tr)}:_e.fetchFn=lr}}}function getNextPageParam(er,{pages:_e,pageParams:tr}){const rr=_e.length-1;return _e.length>0?er.getNextPageParam(_e[rr],_e,tr[rr],tr):void 0}function getPreviousPageParam(er,{pages:_e,pageParams:tr}){var rr;return _e.length>0?(rr=er.getPreviousPageParam)==null?void 0:rr.call(er,_e[0],_e,tr[0],tr):void 0}var go,GA,WA,_h,_f,qA,ep,tp,G0,QueryClient=(G0=class{constructor(er={}){Vn(this,go);Vn(this,GA);Vn(this,WA);Vn(this,_h);Vn(this,_f);Vn(this,qA);Vn(this,ep);Vn(this,tp);On(this,go,er.queryCache||new QueryCache),On(this,GA,er.mutationCache||new MutationCache),On(this,WA,er.defaultOptions||{}),On(this,_h,new Map),On(this,_f,new Map),On(this,qA,0)}mount(){$A(this,qA)._++,kr(this,qA)===1&&(On(this,ep,focusManager.subscribe(async er=>{er&&(await this.resumePausedMutations(),kr(this,go).onFocus())})),On(this,tp,onlineManager.subscribe(async er=>{er&&(await this.resumePausedMutations(),kr(this,go).onOnline())})))}unmount(){var er,_e;$A(this,qA)._--,kr(this,qA)===0&&((er=kr(this,ep))==null||er.call(this),On(this,ep,void 0),(_e=kr(this,tp))==null||_e.call(this),On(this,tp,void 0))}isFetching(er){return kr(this,go).findAll({...er,fetchStatus:"fetching"}).length}isMutating(er){return kr(this,GA).findAll({...er,status:"pending"}).length}getQueryData(er){var tr;const _e=this.defaultQueryOptions({queryKey:er});return(tr=kr(this,go).get(_e.queryHash))==null?void 0:tr.state.data}ensureQueryData(er){const _e=this.getQueryData(er.queryKey);if(_e===void 0)return this.fetchQuery(er);{const tr=this.defaultQueryOptions(er),rr=kr(this,go).build(this,tr);return er.revalidateIfStale&&rr.isStaleByTime(resolveStaleTime(tr.staleTime,rr))&&this.prefetchQuery(tr),Promise.resolve(_e)}}getQueriesData(er){return kr(this,go).findAll(er).map(({queryKey:_e,state:tr})=>{const rr=tr.data;return[_e,rr]})}setQueryData(er,_e,tr){const rr=this.defaultQueryOptions({queryKey:er}),nr=kr(this,go).get(rr.queryHash),sr=nr==null?void 0:nr.state.data,ir=functionalUpdate(_e,sr);if(ir!==void 0)return kr(this,go).build(this,rr).setData(ir,{...tr,manual:!0})}setQueriesData(er,_e,tr){return notifyManager.batch(()=>kr(this,go).findAll(er).map(({queryKey:rr})=>[rr,this.setQueryData(rr,_e,tr)]))}getQueryState(er){var tr;const _e=this.defaultQueryOptions({queryKey:er});return(tr=kr(this,go).get(_e.queryHash))==null?void 0:tr.state}removeQueries(er){const _e=kr(this,go);notifyManager.batch(()=>{_e.findAll(er).forEach(tr=>{_e.remove(tr)})})}resetQueries(er,_e){const tr=kr(this,go),rr={type:"active",...er};return notifyManager.batch(()=>(tr.findAll(er).forEach(nr=>{nr.reset()}),this.refetchQueries(rr,_e)))}cancelQueries(er={},_e={}){const tr={revert:!0,..._e},rr=notifyManager.batch(()=>kr(this,go).findAll(er).map(nr=>nr.cancel(tr)));return Promise.all(rr).then(noop$1).catch(noop$1)}invalidateQueries(er={},_e={}){return notifyManager.batch(()=>{if(kr(this,go).findAll(er).forEach(rr=>{rr.invalidate()}),er.refetchType==="none")return Promise.resolve();const tr={...er,type:er.refetchType??er.type??"active"};return this.refetchQueries(tr,_e)})}refetchQueries(er={},_e){const tr={..._e,cancelRefetch:(_e==null?void 0:_e.cancelRefetch)??!0},rr=notifyManager.batch(()=>kr(this,go).findAll(er).filter(nr=>!nr.isDisabled()).map(nr=>{let sr=nr.fetch(void 0,tr);return tr.throwOnError||(sr=sr.catch(noop$1)),nr.state.fetchStatus==="paused"?Promise.resolve():sr}));return Promise.all(rr).then(noop$1)}fetchQuery(er){const _e=this.defaultQueryOptions(er);_e.retry===void 0&&(_e.retry=!1);const tr=kr(this,go).build(this,_e);return tr.isStaleByTime(resolveStaleTime(_e.staleTime,tr))?tr.fetch(_e):Promise.resolve(tr.state.data)}prefetchQuery(er){return this.fetchQuery(er).then(noop$1).catch(noop$1)}fetchInfiniteQuery(er){return er.behavior=infiniteQueryBehavior(er.pages),this.fetchQuery(er)}prefetchInfiniteQuery(er){return this.fetchInfiniteQuery(er).then(noop$1).catch(noop$1)}ensureInfiniteQueryData(er){return er.behavior=infiniteQueryBehavior(er.pages),this.ensureQueryData(er)}resumePausedMutations(){return onlineManager.isOnline()?kr(this,GA).resumePausedMutations():Promise.resolve()}getQueryCache(){return kr(this,go)}getMutationCache(){return kr(this,GA)}getDefaultOptions(){return kr(this,WA)}setDefaultOptions(er){On(this,WA,er)}setQueryDefaults(er,_e){kr(this,_h).set(hashKey(er),{queryKey:er,defaultOptions:_e})}getQueryDefaults(er){const _e=[...kr(this,_h).values()];let tr={};return _e.forEach(rr=>{partialMatchKey(er,rr.queryKey)&&(tr={...tr,...rr.defaultOptions})}),tr}setMutationDefaults(er,_e){kr(this,_f).set(hashKey(er),{mutationKey:er,defaultOptions:_e})}getMutationDefaults(er){const _e=[...kr(this,_f).values()];let tr={};return _e.forEach(rr=>{partialMatchKey(er,rr.mutationKey)&&(tr={...tr,...rr.defaultOptions})}),tr}defaultQueryOptions(er){if(er._defaulted)return er;const _e={...kr(this,WA).queries,...this.getQueryDefaults(er.queryKey),...er,_defaulted:!0};return _e.queryHash||(_e.queryHash=hashQueryKeyByOptions(_e.queryKey,_e)),_e.refetchOnReconnect===void 0&&(_e.refetchOnReconnect=_e.networkMode!=="always"),_e.throwOnError===void 0&&(_e.throwOnError=!!_e.suspense),!_e.networkMode&&_e.persister&&(_e.networkMode="offlineFirst"),_e.enabled!==!0&&_e.queryFn===skipToken&&(_e.enabled=!1),_e}defaultMutationOptions(er){return er!=null&&er._defaulted?er:{...kr(this,WA).mutations,...(er==null?void 0:er.mutationKey)&&this.getMutationDefaults(er.mutationKey),...er,_defaulted:!0}}clear(){kr(this,go).clear(),kr(this,GA).clear()}},go=new WeakMap,GA=new WeakMap,WA=new WeakMap,_h=new WeakMap,_f=new WeakMap,qA=new WeakMap,ep=new WeakMap,tp=new WeakMap,G0),QueryClientContext=reactExports.createContext(void 0),QueryClientProvider=({client:er,children:_e})=>(reactExports.useEffect(()=>(er.mount(),()=>{er.unmount()}),[er]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:er,children:_e}));/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(er){const _e=[];let tr=0;for(let rr=0;rr<er.length;rr++){let nr=er.charCodeAt(rr);nr<128?_e[tr++]=nr:nr<2048?(_e[tr++]=nr>>6|192,_e[tr++]=nr&63|128):(nr&64512)===55296&&rr+1<er.length&&(er.charCodeAt(rr+1)&64512)===56320?(nr=65536+((nr&1023)<<10)+(er.charCodeAt(++rr)&1023),_e[tr++]=nr>>18|240,_e[tr++]=nr>>12&63|128,_e[tr++]=nr>>6&63|128,_e[tr++]=nr&63|128):(_e[tr++]=nr>>12|224,_e[tr++]=nr>>6&63|128,_e[tr++]=nr&63|128)}return _e},byteArrayToString=function(er){const _e=[];let tr=0,rr=0;for(;tr<er.length;){const nr=er[tr++];if(nr<128)_e[rr++]=String.fromCharCode(nr);else if(nr>191&&nr<224){const sr=er[tr++];_e[rr++]=String.fromCharCode((nr&31)<<6|sr&63)}else if(nr>239&&nr<365){const sr=er[tr++],ir=er[tr++],or=er[tr++],ar=((nr&7)<<18|(sr&63)<<12|(ir&63)<<6|or&63)-65536;_e[rr++]=String.fromCharCode(55296+(ar>>10)),_e[rr++]=String.fromCharCode(56320+(ar&1023))}else{const sr=er[tr++],ir=er[tr++];_e[rr++]=String.fromCharCode((nr&15)<<12|(sr&63)<<6|ir&63)}}return _e.join("")},base64$2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(er,_e){if(!Array.isArray(er))throw Error("encodeByteArray takes an array as a parameter");this.init_();const tr=_e?this.byteToCharMapWebSafe_:this.byteToCharMap_,rr=[];for(let nr=0;nr<er.length;nr+=3){const sr=er[nr],ir=nr+1<er.length,or=ir?er[nr+1]:0,ar=nr+2<er.length,lr=ar?er[nr+2]:0,cr=sr>>2,Ar=(sr&3)<<4|or>>4;let ur=(or&15)<<2|lr>>6,dr=lr&63;ar||(dr=64,ir||(ur=64)),rr.push(tr[cr],tr[Ar],tr[ur],tr[dr])}return rr.join("")},encodeString(er,_e){return this.HAS_NATIVE_SUPPORT&&!_e?btoa(er):this.encodeByteArray(stringToByteArray$1(er),_e)},decodeString(er,_e){return this.HAS_NATIVE_SUPPORT&&!_e?atob(er):byteArrayToString(this.decodeStringToByteArray(er,_e))},decodeStringToByteArray(er,_e){this.init_();const tr=_e?this.charToByteMapWebSafe_:this.charToByteMap_,rr=[];for(let nr=0;nr<er.length;){const sr=tr[er.charAt(nr++)],or=nr<er.length?tr[er.charAt(nr)]:0;++nr;const lr=nr<er.length?tr[er.charAt(nr)]:64;++nr;const Ar=nr<er.length?tr[er.charAt(nr)]:64;if(++nr,sr==null||or==null||lr==null||Ar==null)throw new DecodeBase64StringError;const ur=sr<<2|or>>4;if(rr.push(ur),lr!==64){const dr=or<<4&240|lr>>2;if(rr.push(dr),Ar!==64){const mr=lr<<6&192|Ar;rr.push(mr)}}}return rr},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let er=0;er<this.ENCODED_VALS.length;er++)this.byteToCharMap_[er]=this.ENCODED_VALS.charAt(er),this.charToByteMap_[this.byteToCharMap_[er]]=er,this.byteToCharMapWebSafe_[er]=this.ENCODED_VALS_WEBSAFE.charAt(er),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[er]]=er,er>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(er)]=er,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(er)]=er)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(er){const _e=stringToByteArray$1(er);return base64$2.encodeByteArray(_e,!0)},base64urlEncodeWithoutPadding=function(er){return base64Encode(er).replace(/\./g,"")},base64Decode=function(er){try{return base64$2.decodeString(er,!0)}catch(_e){console.error("base64Decode failed: ",_e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const er=define_process_env_default.__FIREBASE_DEFAULTS__;if(er)return JSON.parse(er)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let er;try{er=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const _e=er&&base64Decode(er[1]);return _e&&JSON.parse(_e)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(er){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${er}`);return}},getDefaultEmulatorHost=er=>{var _e,tr;return(tr=(_e=getDefaults())===null||_e===void 0?void 0:_e.emulatorHosts)===null||tr===void 0?void 0:tr[er]},getDefaultEmulatorHostnameAndPort=er=>{const _e=getDefaultEmulatorHost(er);if(!_e)return;const tr=_e.lastIndexOf(":");if(tr<=0||tr+1===_e.length)throw new Error(`Invalid host ${_e} with no separate hostname and port!`);const rr=parseInt(_e.substring(tr+1),10);return _e[0]==="["?[_e.substring(1,tr-1),rr]:[_e.substring(0,tr),rr]},getDefaultAppConfig=()=>{var er;return(er=getDefaults())===null||er===void 0?void 0:er.config},getExperimentalSetting=er=>{var _e;return(_e=getDefaults())===null||_e===void 0?void 0:_e[`_${er}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((_e,tr)=>{this.resolve=_e,this.reject=tr})}wrapCallback(_e){return(tr,rr)=>{tr?this.reject(tr):this.resolve(rr),typeof _e=="function"&&(this.promise.catch(()=>{}),_e.length===1?_e(tr):_e(tr,rr))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(er){return er.endsWith(".cloudworkstations.dev")}async function pingServer(er){return(await fetch(er,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(er,_e){if(er.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const tr={alg:"none",type:"JWT"},rr=_e||"demo-project",nr=er.iat||0,sr=er.sub||er.user_id;if(!sr)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ir=Object.assign({iss:`https://securetoken.google.com/${rr}`,aud:rr,iat:nr,exp:nr+3600,auth_time:nr,sub:sr,user_id:sr,firebase:{sign_in_provider:"custom",identities:{}}},er);return[base64urlEncodeWithoutPadding(JSON.stringify(tr)),base64urlEncodeWithoutPadding(JSON.stringify(ir)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const er={prod:[],emulator:[]};for(const _e of Object.keys(emulatorStatus))emulatorStatus[_e]?er.emulator.push(_e):er.prod.push(_e);return er}function getOrCreateEl(er){let _e=document.getElementById(er),tr=!1;return _e||(_e=document.createElement("div"),_e.setAttribute("id",er),tr=!0),{created:tr,element:_e}}let previouslyDismissed=!1;function updateEmulatorBanner(er,_e){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[er]===_e||emulatorStatus[er]||previouslyDismissed)return;emulatorStatus[er]=_e;function tr(ur){return`__firebase__banner__${ur}`}const rr="__firebase__banner",sr=getEmulatorSummary().prod.length>0;function ir(){const ur=document.getElementById(rr);ur&&ur.remove()}function or(ur){ur.style.display="flex",ur.style.background="#7faaf0",ur.style.position="fixed",ur.style.bottom="5px",ur.style.left="5px",ur.style.padding=".5em",ur.style.borderRadius="5px",ur.style.alignItems="center"}function ar(ur,dr){ur.setAttribute("width","24"),ur.setAttribute("id",dr),ur.setAttribute("height","24"),ur.setAttribute("viewBox","0 0 24 24"),ur.setAttribute("fill","none"),ur.style.marginLeft="-6px"}function lr(){const ur=document.createElement("span");return ur.style.cursor="pointer",ur.style.marginLeft="16px",ur.style.fontSize="24px",ur.innerHTML=" &times;",ur.onclick=()=>{previouslyDismissed=!0,ir()},ur}function cr(ur,dr){ur.setAttribute("id",dr),ur.innerText="Learn more",ur.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",ur.setAttribute("target","__blank"),ur.style.paddingLeft="5px",ur.style.textDecoration="underline"}function Ar(){const ur=getOrCreateEl(rr),dr=tr("text"),mr=document.getElementById(dr)||document.createElement("span"),pr=tr("learnmore"),yr=document.getElementById(pr)||document.createElement("a"),hr=tr("preprendIcon"),gr=document.getElementById(hr)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(ur.created){const Cr=ur.element;or(Cr),cr(yr,pr);const Tr=lr();ar(gr,hr),Cr.append(gr,mr,yr,Tr),document.body.appendChild(Cr)}sr?(mr.innerText="Preview backend disconnected.",gr.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(gr.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,mr.innerText="Preview backend running in this workspace."),mr.setAttribute("id",dr)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",Ar):Ar()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode(){var er;const _e=(er=getDefaults())===null||er===void 0?void 0:er.forceEnvironment;if(_e==="node")return!0;if(_e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const er=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof er=="object"&&er.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const er=getUA();return er.indexOf("MSIE ")>=0||er.indexOf("Trident/")>=0}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((er,_e)=>{try{let tr=!0;const rr="validate-browser-context-for-indexeddb-analytics-module",nr=self.indexedDB.open(rr);nr.onsuccess=()=>{nr.result.close(),tr||self.indexedDB.deleteDatabase(rr),er(!0)},nr.onupgradeneeded=()=>{tr=!1},nr.onerror=()=>{var sr;_e(((sr=nr.error)===null||sr===void 0?void 0:sr.message)||"")}}catch(tr){_e(tr)}})}function areCookiesEnabled(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(_e,tr,rr){super(tr),this.code=_e,this.customData=rr,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(_e,tr,rr){this.service=_e,this.serviceName=tr,this.errors=rr}create(_e,...tr){const rr=tr[0]||{},nr=`${this.service}/${_e}`,sr=this.errors[_e],ir=sr?replaceTemplate(sr,rr):"Error",or=`${this.serviceName}: ${ir} (${nr}).`;return new FirebaseError(nr,or,rr)}}function replaceTemplate(er,_e){return er.replace(PATTERN,(tr,rr)=>{const nr=_e[rr];return nr!=null?String(nr):`<${rr}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$1(er){for(const _e in er)if(Object.prototype.hasOwnProperty.call(er,_e))return!1;return!0}function deepEqual(er,_e){if(er===_e)return!0;const tr=Object.keys(er),rr=Object.keys(_e);for(const nr of tr){if(!rr.includes(nr))return!1;const sr=er[nr],ir=_e[nr];if(isObject(sr)&&isObject(ir)){if(!deepEqual(sr,ir))return!1}else if(sr!==ir)return!1}for(const nr of rr)if(!tr.includes(nr))return!1;return!0}function isObject(er){return er!==null&&typeof er=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(er){const _e=[];for(const[tr,rr]of Object.entries(er))Array.isArray(rr)?rr.forEach(nr=>{_e.push(encodeURIComponent(tr)+"="+encodeURIComponent(nr))}):_e.push(encodeURIComponent(tr)+"="+encodeURIComponent(rr));return _e.length?"&"+_e.join("&"):""}function createSubscribe(er,_e){const tr=new ObserverProxy(er,_e);return tr.subscribe.bind(tr)}class ObserverProxy{constructor(_e,tr){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=tr,this.task.then(()=>{_e(this)}).catch(rr=>{this.error(rr)})}next(_e){this.forEachObserver(tr=>{tr.next(_e)})}error(_e){this.forEachObserver(tr=>{tr.error(_e)}),this.close(_e)}complete(){this.forEachObserver(_e=>{_e.complete()}),this.close()}subscribe(_e,tr,rr){let nr;if(_e===void 0&&tr===void 0&&rr===void 0)throw new Error("Missing Observer.");implementsAnyMethods(_e,["next","error","complete"])?nr=_e:nr={next:_e,error:tr,complete:rr},nr.next===void 0&&(nr.next=noop),nr.error===void 0&&(nr.error=noop),nr.complete===void 0&&(nr.complete=noop);const sr=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?nr.error(this.finalError):nr.complete()}catch{}}),this.observers.push(nr),sr}unsubscribeOne(_e){this.observers===void 0||this.observers[_e]===void 0||(delete this.observers[_e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(_e){if(!this.finalized)for(let tr=0;tr<this.observers.length;tr++)this.sendOne(tr,_e)}sendOne(_e,tr){this.task.then(()=>{if(this.observers!==void 0&&this.observers[_e]!==void 0)try{tr(this.observers[_e])}catch(rr){typeof console<"u"&&console.error&&console.error(rr)}})}close(_e){this.finalized||(this.finalized=!0,_e!==void 0&&(this.finalError=_e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(er,_e){if(typeof er!="object"||er===null)return!1;for(const tr of _e)if(tr in er&&typeof er[tr]=="function")return!0;return!1}function noop(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_INTERVAL_MILLIS=1e3,DEFAULT_BACKOFF_FACTOR=2,MAX_VALUE_MILLIS=4*60*60*1e3,RANDOM_FACTOR=.5;function calculateBackoffMillis(er,_e=DEFAULT_INTERVAL_MILLIS,tr=DEFAULT_BACKOFF_FACTOR){const rr=_e*Math.pow(tr,er),nr=Math.round(RANDOM_FACTOR*rr*(Math.random()-.5)*2);return Math.min(MAX_VALUE_MILLIS,rr+nr)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(er){return er&&er._delegate?er._delegate:er}class Component{constructor(_e,tr,rr){this.name=_e,this.instanceFactory=tr,this.type=rr,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(_e){return this.instantiationMode=_e,this}setMultipleInstances(_e){return this.multipleInstances=_e,this}setServiceProps(_e){return this.serviceProps=_e,this}setInstanceCreatedCallback(_e){return this.onInstanceCreated=_e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(_e,tr){this.name=_e,this.container=tr,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(_e){const tr=this.normalizeInstanceIdentifier(_e);if(!this.instancesDeferred.has(tr)){const rr=new Deferred;if(this.instancesDeferred.set(tr,rr),this.isInitialized(tr)||this.shouldAutoInitialize())try{const nr=this.getOrInitializeService({instanceIdentifier:tr});nr&&rr.resolve(nr)}catch{}}return this.instancesDeferred.get(tr).promise}getImmediate(_e){var tr;const rr=this.normalizeInstanceIdentifier(_e==null?void 0:_e.identifier),nr=(tr=_e==null?void 0:_e.optional)!==null&&tr!==void 0?tr:!1;if(this.isInitialized(rr)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:rr})}catch(sr){if(nr)return null;throw sr}else{if(nr)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(_e){if(_e.name!==this.name)throw Error(`Mismatching Component ${_e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=_e,!!this.shouldAutoInitialize()){if(isComponentEager(_e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[tr,rr]of this.instancesDeferred.entries()){const nr=this.normalizeInstanceIdentifier(tr);try{const sr=this.getOrInitializeService({instanceIdentifier:nr});rr.resolve(sr)}catch{}}}}clearInstance(_e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(_e),this.instancesOptions.delete(_e),this.instances.delete(_e)}async delete(){const _e=Array.from(this.instances.values());await Promise.all([..._e.filter(tr=>"INTERNAL"in tr).map(tr=>tr.INTERNAL.delete()),..._e.filter(tr=>"_delete"in tr).map(tr=>tr._delete())])}isComponentSet(){return this.component!=null}isInitialized(_e=DEFAULT_ENTRY_NAME$1){return this.instances.has(_e)}getOptions(_e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(_e)||{}}initialize(_e={}){const{options:tr={}}=_e,rr=this.normalizeInstanceIdentifier(_e.instanceIdentifier);if(this.isInitialized(rr))throw Error(`${this.name}(${rr}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const nr=this.getOrInitializeService({instanceIdentifier:rr,options:tr});for(const[sr,ir]of this.instancesDeferred.entries()){const or=this.normalizeInstanceIdentifier(sr);rr===or&&ir.resolve(nr)}return nr}onInit(_e,tr){var rr;const nr=this.normalizeInstanceIdentifier(tr),sr=(rr=this.onInitCallbacks.get(nr))!==null&&rr!==void 0?rr:new Set;sr.add(_e),this.onInitCallbacks.set(nr,sr);const ir=this.instances.get(nr);return ir&&_e(ir,nr),()=>{sr.delete(_e)}}invokeOnInitCallbacks(_e,tr){const rr=this.onInitCallbacks.get(tr);if(rr)for(const nr of rr)try{nr(_e,tr)}catch{}}getOrInitializeService({instanceIdentifier:_e,options:tr={}}){let rr=this.instances.get(_e);if(!rr&&this.component&&(rr=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(_e),options:tr}),this.instances.set(_e,rr),this.instancesOptions.set(_e,tr),this.invokeOnInitCallbacks(rr,_e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,_e,rr)}catch{}return rr||null}normalizeInstanceIdentifier(_e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?_e:DEFAULT_ENTRY_NAME$1:_e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(er){return er===DEFAULT_ENTRY_NAME$1?void 0:er}function isComponentEager(er){return er.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(_e){this.name=_e,this.providers=new Map}addComponent(_e){const tr=this.getProvider(_e.name);if(tr.isComponentSet())throw new Error(`Component ${_e.name} has already been registered with ${this.name}`);tr.setComponent(_e)}addOrOverwriteComponent(_e){this.getProvider(_e.name).isComponentSet()&&this.providers.delete(_e.name),this.addComponent(_e)}getProvider(_e){if(this.providers.has(_e))return this.providers.get(_e);const tr=new Provider(_e,this);return this.providers.set(_e,tr),tr}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(er){er[er.DEBUG=0]="DEBUG",er[er.VERBOSE=1]="VERBOSE",er[er.INFO=2]="INFO",er[er.WARN=3]="WARN",er[er.ERROR=4]="ERROR",er[er.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(er,_e,...tr)=>{if(_e<er.logLevel)return;const rr=new Date().toISOString(),nr=ConsoleMethod[_e];if(nr)console[nr](`[${rr}]  ${er.name}:`,...tr);else throw new Error(`Attempted to log a message with an invalid logType (value: ${_e})`)};let Logger$1=class{constructor(_e){this.name=_e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(_e){if(!(_e in LogLevel))throw new TypeError(`Invalid value "${_e}" assigned to \`logLevel\``);this._logLevel=_e}setLogLevel(_e){this._logLevel=typeof _e=="string"?levelStringToEnum[_e]:_e}get logHandler(){return this._logHandler}set logHandler(_e){if(typeof _e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=_e}get userLogHandler(){return this._userLogHandler}set userLogHandler(_e){this._userLogHandler=_e}debug(..._e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,..._e),this._logHandler(this,LogLevel.DEBUG,..._e)}log(..._e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,..._e),this._logHandler(this,LogLevel.VERBOSE,..._e)}info(..._e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,..._e),this._logHandler(this,LogLevel.INFO,..._e)}warn(..._e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,..._e),this._logHandler(this,LogLevel.WARN,..._e)}error(..._e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,..._e),this._logHandler(this,LogLevel.ERROR,..._e)}};const instanceOfAny=(er,_e)=>_e.some(tr=>er instanceof tr);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(er){const _e=new Promise((tr,rr)=>{const nr=()=>{er.removeEventListener("success",sr),er.removeEventListener("error",ir)},sr=()=>{tr(wrap(er.result)),nr()},ir=()=>{rr(er.error),nr()};er.addEventListener("success",sr),er.addEventListener("error",ir)});return _e.then(tr=>{tr instanceof IDBCursor&&cursorRequestMap.set(tr,er)}).catch(()=>{}),reverseTransformCache.set(_e,er),_e}function cacheDonePromiseForTransaction(er){if(transactionDoneMap.has(er))return;const _e=new Promise((tr,rr)=>{const nr=()=>{er.removeEventListener("complete",sr),er.removeEventListener("error",ir),er.removeEventListener("abort",ir)},sr=()=>{tr(),nr()},ir=()=>{rr(er.error||new DOMException("AbortError","AbortError")),nr()};er.addEventListener("complete",sr),er.addEventListener("error",ir),er.addEventListener("abort",ir)});transactionDoneMap.set(er,_e)}let idbProxyTraps={get(er,_e,tr){if(er instanceof IDBTransaction){if(_e==="done")return transactionDoneMap.get(er);if(_e==="objectStoreNames")return er.objectStoreNames||transactionStoreNamesMap.get(er);if(_e==="store")return tr.objectStoreNames[1]?void 0:tr.objectStore(tr.objectStoreNames[0])}return wrap(er[_e])},set(er,_e,tr){return er[_e]=tr,!0},has(er,_e){return er instanceof IDBTransaction&&(_e==="done"||_e==="store")?!0:_e in er}};function replaceTraps(er){idbProxyTraps=er(idbProxyTraps)}function wrapFunction(er){return er===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(_e,...tr){const rr=er.call(unwrap(this),_e,...tr);return transactionStoreNamesMap.set(rr,_e.sort?_e.sort():[_e]),wrap(rr)}:getCursorAdvanceMethods().includes(er)?function(..._e){return er.apply(unwrap(this),_e),wrap(cursorRequestMap.get(this))}:function(..._e){return wrap(er.apply(unwrap(this),_e))}}function transformCachableValue(er){return typeof er=="function"?wrapFunction(er):(er instanceof IDBTransaction&&cacheDonePromiseForTransaction(er),instanceOfAny(er,getIdbProxyableTypes())?new Proxy(er,idbProxyTraps):er)}function wrap(er){if(er instanceof IDBRequest)return promisifyRequest(er);if(transformCache.has(er))return transformCache.get(er);const _e=transformCachableValue(er);return _e!==er&&(transformCache.set(er,_e),reverseTransformCache.set(_e,er)),_e}const unwrap=er=>reverseTransformCache.get(er);function openDB(er,_e,{blocked:tr,upgrade:rr,blocking:nr,terminated:sr}={}){const ir=indexedDB.open(er,_e),or=wrap(ir);return rr&&ir.addEventListener("upgradeneeded",ar=>{rr(wrap(ir.result),ar.oldVersion,ar.newVersion,wrap(ir.transaction),ar)}),tr&&ir.addEventListener("blocked",ar=>tr(ar.oldVersion,ar.newVersion,ar)),or.then(ar=>{sr&&ar.addEventListener("close",()=>sr()),nr&&ar.addEventListener("versionchange",lr=>nr(lr.oldVersion,lr.newVersion,lr))}).catch(()=>{}),or}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(er,_e){if(!(er instanceof IDBDatabase&&!(_e in er)&&typeof _e=="string"))return;if(cachedMethods.get(_e))return cachedMethods.get(_e);const tr=_e.replace(/FromIndex$/,""),rr=_e!==tr,nr=writeMethods.includes(tr);if(!(tr in(rr?IDBIndex:IDBObjectStore).prototype)||!(nr||readMethods.includes(tr)))return;const sr=async function(ir,...or){const ar=this.transaction(ir,nr?"readwrite":"readonly");let lr=ar.store;return rr&&(lr=lr.index(or.shift())),(await Promise.all([lr[tr](...or),nr&&ar.done]))[0]};return cachedMethods.set(_e,sr),sr}replaceTraps(er=>({...er,get:(_e,tr,rr)=>getMethod(_e,tr)||er.get(_e,tr,rr),has:(_e,tr)=>!!getMethod(_e,tr)||er.has(_e,tr)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map(tr=>{if(isVersionServiceProvider(tr)){const rr=tr.getImmediate();return`${rr.library}/${rr.version}`}else return null}).filter(tr=>tr).join(" ")}}function isVersionServiceProvider(er){const _e=er.getComponent();return(_e==null?void 0:_e.type)==="VERSION"}const name$q="@firebase/app",version$1$1="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger$1=new Logger$1("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4$1="@firebase/storage-compat",name$3$1="@firebase/firestore",name$2$1="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$5="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4$1]:"fire-gcs-compat",[name$3$1]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(er,_e){try{er.container.addComponent(_e)}catch(tr){logger$1.debug(`Component ${_e.name} failed to register with FirebaseApp ${er.name}`,tr)}}function _registerComponent(er){const _e=er.name;if(_components.has(_e))return logger$1.debug(`There were multiple attempts to register component ${_e}.`),!1;_components.set(_e,er);for(const tr of _apps.values())_addComponent(tr,er);for(const tr of _serverApps.values())_addComponent(tr,er);return!0}function _getProvider(er,_e){const tr=er.container.getProvider("heartbeat").getImmediate({optional:!0});return tr&&tr.triggerHeartbeat(),er.container.getProvider(_e)}function _isFirebaseServerApp(er){return er==null?!1:er.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS$1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY$2=new ErrorFactory("app","Firebase",ERRORS$1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(_e,tr,rr){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},tr),this._name=tr.name,this._automaticDataCollectionEnabled=tr.automaticDataCollectionEnabled,this._container=rr,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY$2.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$5;function initializeApp(er,_e={}){let tr=er;typeof _e!="object"&&(_e={name:_e});const rr=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0},_e),nr=rr.name;if(typeof nr!="string"||!nr)throw ERROR_FACTORY$2.create("bad-app-name",{appName:String(nr)});if(tr||(tr=getDefaultAppConfig()),!tr)throw ERROR_FACTORY$2.create("no-options");const sr=_apps.get(nr);if(sr){if(deepEqual(tr,sr.options)&&deepEqual(rr,sr.config))return sr;throw ERROR_FACTORY$2.create("duplicate-app",{appName:nr})}const ir=new ComponentContainer(nr);for(const ar of _components.values())ir.addComponent(ar);const or=new FirebaseAppImpl(tr,rr,ir);return _apps.set(nr,or),or}function getApp(er=DEFAULT_ENTRY_NAME){const _e=_apps.get(er);if(!_e&&er===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!_e)throw ERROR_FACTORY$2.create("no-app",{appName:er});return _e}function registerVersion(er,_e,tr){var rr;let nr=(rr=PLATFORM_LOG_STRING[er])!==null&&rr!==void 0?rr:er;tr&&(nr+=`-${tr}`);const sr=nr.match(/\s|\//),ir=_e.match(/\s|\//);if(sr||ir){const or=[`Unable to register library "${nr}" with version "${_e}":`];sr&&or.push(`library name "${nr}" contains illegal characters (whitespace or "/")`),sr&&ir&&or.push("and"),ir&&or.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),logger$1.warn(or.join(" "));return}_registerComponent(new Component(`${nr}-version`,()=>({library:nr,version:_e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise$1=null;function getDbPromise$1(){return dbPromise$1||(dbPromise$1=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(er,_e)=>{switch(_e){case 0:try{er.createObjectStore(STORE_NAME)}catch(tr){console.warn(tr)}}}}).catch(er=>{throw ERROR_FACTORY$2.create("idb-open",{originalErrorMessage:er.message})})),dbPromise$1}async function readHeartbeatsFromIndexedDB(er){try{const tr=(await getDbPromise$1()).transaction(STORE_NAME),rr=await tr.objectStore(STORE_NAME).get(computeKey(er));return await tr.done,rr}catch(_e){if(_e instanceof FirebaseError)logger$1.warn(_e.message);else{const tr=ERROR_FACTORY$2.create("idb-get",{originalErrorMessage:_e==null?void 0:_e.message});logger$1.warn(tr.message)}}}async function writeHeartbeatsToIndexedDB(er,_e){try{const rr=(await getDbPromise$1()).transaction(STORE_NAME,"readwrite");await rr.objectStore(STORE_NAME).put(_e,computeKey(er)),await rr.done}catch(tr){if(tr instanceof FirebaseError)logger$1.warn(tr.message);else{const rr=ERROR_FACTORY$2.create("idb-set",{originalErrorMessage:tr==null?void 0:tr.message});logger$1.warn(rr.message)}}}function computeKey(er){return`${er.name}!${er.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(_e){this.container=_e,this._heartbeatsCache=null;const tr=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(tr),this._heartbeatsCachePromise=this._storage.read().then(rr=>(this._heartbeatsCache=rr,rr))}async triggerHeartbeat(){var _e,tr;try{const nr=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),sr=getUTCDateString();if(((_e=this._heartbeatsCache)===null||_e===void 0?void 0:_e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((tr=this._heartbeatsCache)===null||tr===void 0?void 0:tr.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===sr||this._heartbeatsCache.heartbeats.some(ir=>ir.date===sr))return;if(this._heartbeatsCache.heartbeats.push({date:sr,agent:nr}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const ir=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(ir,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(rr){logger$1.warn(rr)}}async getHeartbeatsHeader(){var _e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((_e=this._heartbeatsCache)===null||_e===void 0?void 0:_e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const tr=getUTCDateString(),{heartbeatsToSend:rr,unsentEntries:nr}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),sr=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:rr}));return this._heartbeatsCache.lastSentHeartbeatDate=tr,nr.length>0?(this._heartbeatsCache.heartbeats=nr,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),sr}catch(tr){return logger$1.warn(tr),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(er,_e=MAX_HEADER_BYTES){const tr=[];let rr=er.slice();for(const nr of er){const sr=tr.find(ir=>ir.agent===nr.agent);if(sr){if(sr.dates.push(nr.date),countBytes(tr)>_e){sr.dates.pop();break}}else if(tr.push({agent:nr.agent,dates:[nr.date]}),countBytes(tr)>_e){tr.pop();break}rr=rr.slice(1)}return{heartbeatsToSend:tr,unsentEntries:rr}}class HeartbeatStorageImpl{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const tr=await readHeartbeatsFromIndexedDB(this.app);return tr!=null&&tr.heartbeats?tr:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(_e){var tr;if(await this._canUseIndexedDBPromise){const nr=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(tr=_e.lastSentHeartbeatDate)!==null&&tr!==void 0?tr:nr.lastSentHeartbeatDate,heartbeats:_e.heartbeats})}else return}async add(_e){var tr;if(await this._canUseIndexedDBPromise){const nr=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(tr=_e.lastSentHeartbeatDate)!==null&&tr!==void 0?tr:nr.lastSentHeartbeatDate,heartbeats:[...nr.heartbeats,..._e.heartbeats]})}else return}}function countBytes(er){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:er})).length}function getEarliestHeartbeatIdx(er){if(er.length===0)return-1;let _e=0,tr=er[0].date;for(let rr=1;rr<er.length;rr++)er[rr].date<tr&&(tr=er[rr].date,_e=rr);return _e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(er){_registerComponent(new Component("platform-logger",_e=>new PlatformLoggerServiceImpl(_e),"PRIVATE")),_registerComponent(new Component("heartbeat",_e=>new HeartbeatServiceImpl(_e),"PRIVATE")),registerVersion(name$q,version$1$1,er),registerVersion(name$q,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");var __assign$2=function(){return __assign$2=Object.assign||function(_e){for(var tr,rr=1,nr=arguments.length;rr<nr;rr++){tr=arguments[rr];for(var sr in tr)Object.prototype.hasOwnProperty.call(tr,sr)&&(_e[sr]=tr[sr])}return _e},__assign$2.apply(this,arguments)};function __rest(er,_e){var tr={};for(var rr in er)Object.prototype.hasOwnProperty.call(er,rr)&&_e.indexOf(rr)<0&&(tr[rr]=er[rr]);if(er!=null&&typeof Object.getOwnPropertySymbols=="function")for(var nr=0,rr=Object.getOwnPropertySymbols(er);nr<rr.length;nr++)_e.indexOf(rr[nr])<0&&Object.prototype.propertyIsEnumerable.call(er,rr[nr])&&(tr[rr[nr]]=er[rr[nr]]);return tr}function __spreadArray$1(er,_e,tr){if(tr||arguments.length===2)for(var rr=0,nr=_e.length,sr;rr<nr;rr++)(sr||!(rr in _e))&&(sr||(sr=Array.prototype.slice.call(_e,0,rr)),sr[rr]=_e[rr]);return er.concat(sr||Array.prototype.slice.call(_e))}typeof SuppressedError=="function"&&SuppressedError;function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger$1("@firebase/auth");function _logWarn(er,..._e){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${er}`,..._e)}function _logError(er,..._e){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${er}`,..._e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(er,..._e){throw createErrorInternal(er,..._e)}function _createError(er,..._e){return createErrorInternal(er,..._e)}function _errorWithCustomMessage(er,_e,tr){const rr=Object.assign(Object.assign({},prodErrorMap()),{[_e]:tr});return new ErrorFactory("auth","Firebase",rr).create(_e,{appName:er.name})}function _serverAppCurrentUserOperationNotSupportedError(er){return _errorWithCustomMessage(er,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function createErrorInternal(er,..._e){if(typeof er!="string"){const tr=_e[0],rr=[..._e.slice(1)];return rr[0]&&(rr[0].appName=er.name),er._errorFactory.create(tr,...rr)}return _DEFAULT_AUTH_ERROR_FACTORY.create(er,..._e)}function _assert(er,_e,...tr){if(!er)throw createErrorInternal(_e,...tr)}function debugFail(er){const _e="INTERNAL ASSERTION FAILED: "+er;throw _logError(_e),new Error(_e)}function debugAssert(er,_e){er||debugFail(_e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var er;return typeof self<"u"&&((er=self.location)===null||er===void 0?void 0:er.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var er;return typeof self<"u"&&((er=self.location)===null||er===void 0?void 0:er.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const er=navigator;return er.languages&&er.languages[0]||er.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(_e,tr){this.shortDelay=_e,this.longDelay=tr,debugAssert(tr>_e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(er,_e){debugAssert(er.emulator,"Emulator should always be set here");const{url:tr}=er.emulator;return _e?`${tr}${_e.startsWith("/")?_e.slice(1):_e}`:tr}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(_e,tr,rr){this.fetchImpl=_e,tr&&(this.headersImpl=tr),rr&&(this.responseImpl=rr)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(er,_e){return er.tenantId&&!_e.tenantId?Object.assign(Object.assign({},_e),{tenantId:er.tenantId}):_e}async function _performApiRequest(er,_e,tr,rr,nr={}){return _performFetchWithErrorHandling(er,nr,async()=>{let sr={},ir={};rr&&(_e==="GET"?ir=rr:sr={body:JSON.stringify(rr)});const or=querystring(Object.assign({key:er.config.apiKey},ir)).slice(1),ar=await er._getAdditionalHeaders();ar["Content-Type"]="application/json",er.languageCode&&(ar["X-Firebase-Locale"]=er.languageCode);const lr=Object.assign({method:_e,headers:ar},sr);return isCloudflareWorker()||(lr.referrerPolicy="no-referrer"),er.emulatorConfig&&isCloudWorkstation(er.emulatorConfig.host)&&(lr.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(er,er.config.apiHost,tr,or),lr)})}async function _performFetchWithErrorHandling(er,_e,tr){er._canInitEmulator=!1;const rr=Object.assign(Object.assign({},SERVER_ERROR_MAP),_e);try{const nr=new NetworkTimeout(er),sr=await Promise.race([tr(),nr.promise]);nr.clearNetworkTimeout();const ir=await sr.json();if("needConfirmation"in ir)throw _makeTaggedError(er,"account-exists-with-different-credential",ir);if(sr.ok&&!("errorMessage"in ir))return ir;{const or=sr.ok?ir.errorMessage:ir.error.message,[ar,lr]=or.split(" : ");if(ar==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(er,"credential-already-in-use",ir);if(ar==="EMAIL_EXISTS")throw _makeTaggedError(er,"email-already-in-use",ir);if(ar==="USER_DISABLED")throw _makeTaggedError(er,"user-disabled",ir);const cr=rr[ar]||ar.toLowerCase().replace(/[_\s]+/g,"-");if(lr)throw _errorWithCustomMessage(er,cr,lr);_fail(er,cr)}}catch(nr){if(nr instanceof FirebaseError)throw nr;_fail(er,"network-request-failed",{message:String(nr)})}}async function _performSignInRequest(er,_e,tr,rr,nr={}){const sr=await _performApiRequest(er,_e,tr,rr,nr);return"mfaPendingCredential"in sr&&_fail(er,"multi-factor-auth-required",{_serverResponse:sr}),sr}async function _getFinalTarget(er,_e,tr,rr){const nr=`${_e}${tr}?${rr}`,sr=er,ir=sr.config.emulator?_emulatorUrl(er.config,nr):`${er.config.apiScheme}://${nr}`;return CookieAuthProxiedEndpoints.includes(tr)&&(await sr._persistenceManagerAvailable,sr._getPersistenceType()==="COOKIE")?sr._getPersistence()._getFinalTarget(ir).toString():ir}function _parseEnforcementState(er){switch(er){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(_e){this.auth=_e,this.timer=null,this.promise=new Promise((tr,rr)=>{this.timer=setTimeout(()=>rr(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(er,_e,tr){const rr={appName:er.name};tr.email&&(rr.email=tr.email),tr.phoneNumber&&(rr.phoneNumber=tr.phoneNumber);const nr=_createError(er,_e,rr);return nr.customData._tokenResponse=tr,nr}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isV2(er){return er!==void 0&&er.getResponse!==void 0}function isEnterprise(er){return er!==void 0&&er.enterprise!==void 0}class RecaptchaConfig{constructor(_e){if(this.siteKey="",this.recaptchaEnforcementState=[],_e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=_e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=_e.recaptchaEnforcementState}getProviderEnforcementState(_e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const tr of this.recaptchaEnforcementState)if(tr.provider&&tr.provider===_e)return _parseEnforcementState(tr.enforcementState);return null}isProviderEnabled(_e){return this.getProviderEnforcementState(_e)==="ENFORCE"||this.getProviderEnforcementState(_e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getRecaptchaParams(er){return(await _performApiRequest(er,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function getRecaptchaConfig(er,_e){return _performApiRequest(er,"GET","/v2/recaptchaConfig",_addTidIfNecessary(er,_e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(er,_e){return _performApiRequest(er,"POST","/v1/accounts:delete",_e)}async function getAccountInfo(er,_e){return _performApiRequest(er,"POST","/v1/accounts:lookup",_e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(er){if(er)try{const _e=new Date(Number(er));if(!isNaN(_e.getTime()))return _e.toUTCString()}catch{}}async function getIdTokenResult(er,_e=!1){const tr=getModularInstance(er),rr=await tr.getIdToken(_e),nr=_parseToken(rr);_assert(nr&&nr.exp&&nr.auth_time&&nr.iat,tr.auth,"internal-error");const sr=typeof nr.firebase=="object"?nr.firebase:void 0,ir=sr==null?void 0:sr.sign_in_provider;return{claims:nr,token:rr,authTime:utcTimestampToDateString(secondsStringToMilliseconds(nr.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(nr.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(nr.exp)),signInProvider:ir||null,signInSecondFactor:(sr==null?void 0:sr.sign_in_second_factor)||null}}function secondsStringToMilliseconds(er){return Number(er)*1e3}function _parseToken(er){const[_e,tr,rr]=er.split(".");if(_e===void 0||tr===void 0||rr===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const nr=base64Decode(tr);return nr?JSON.parse(nr):(_logError("Failed to decode base64 JWT payload"),null)}catch(nr){return _logError("Caught error parsing JWT payload as JSON",nr==null?void 0:nr.toString()),null}}function _tokenExpiresIn(er){const _e=_parseToken(er);return _assert(_e,"internal-error"),_assert(typeof _e.exp<"u","internal-error"),_assert(typeof _e.iat<"u","internal-error"),Number(_e.exp)-Number(_e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(er,_e,tr=!1){if(tr)return _e;try{return await _e}catch(rr){throw rr instanceof FirebaseError&&isUserInvalidated(rr)&&er.auth.currentUser===er&&await er.auth.signOut(),rr}}function isUserInvalidated({code:er}){return er==="auth/user-disabled"||er==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(_e){this.user=_e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(_e){var tr;if(_e){const rr=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),rr}else{this.errorBackoff=3e4;const nr=((tr=this.user.stsTokenManager.expirationTime)!==null&&tr!==void 0?tr:0)-Date.now()-3e5;return Math.max(0,nr)}}schedule(_e=!1){if(!this.isRunning)return;const tr=this.getInterval(_e);this.timerId=setTimeout(async()=>{await this.iteration()},tr)}async iteration(){try{await this.user.getIdToken(!0)}catch(_e){(_e==null?void 0:_e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(_e,tr){this.createdAt=_e,this.lastLoginAt=tr,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(_e){this.createdAt=_e.createdAt,this.lastLoginAt=_e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(er){var _e;const tr=er.auth,rr=await er.getIdToken(),nr=await _logoutIfInvalidated(er,getAccountInfo(tr,{idToken:rr}));_assert(nr==null?void 0:nr.users.length,tr,"internal-error");const sr=nr.users[0];er._notifyReloadListener(sr);const ir=!((_e=sr.providerUserInfo)===null||_e===void 0)&&_e.length?extractProviderData(sr.providerUserInfo):[],or=mergeProviderData(er.providerData,ir),ar=er.isAnonymous,lr=!(er.email&&sr.passwordHash)&&!(or!=null&&or.length),cr=ar?lr:!1,Ar={uid:sr.localId,displayName:sr.displayName||null,photoURL:sr.photoUrl||null,email:sr.email||null,emailVerified:sr.emailVerified||!1,phoneNumber:sr.phoneNumber||null,tenantId:sr.tenantId||null,providerData:or,metadata:new UserMetadata(sr.createdAt,sr.lastLoginAt),isAnonymous:cr};Object.assign(er,Ar)}async function reload(er){const _e=getModularInstance(er);await _reloadWithoutSaving(_e),await _e.auth._persistUserIfCurrent(_e),_e.auth._notifyListenersIfCurrent(_e)}function mergeProviderData(er,_e){return[...er.filter(rr=>!_e.some(nr=>nr.providerId===rr.providerId)),..._e]}function extractProviderData(er){return er.map(_e=>{var{providerId:tr}=_e,rr=__rest(_e,["providerId"]);return{providerId:tr,uid:rr.rawId||"",displayName:rr.displayName||null,email:rr.email||null,phoneNumber:rr.phoneNumber||null,photoURL:rr.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(er,_e){const tr=await _performFetchWithErrorHandling(er,{},async()=>{const rr=querystring({grant_type:"refresh_token",refresh_token:_e}).slice(1),{tokenApiHost:nr,apiKey:sr}=er.config,ir=await _getFinalTarget(er,nr,"/v1/token",`key=${sr}`),or=await er._getAdditionalHeaders();or["Content-Type"]="application/x-www-form-urlencoded";const ar={method:"POST",headers:or,body:rr};return er.emulatorConfig&&isCloudWorkstation(er.emulatorConfig.host)&&(ar.credentials="include"),FetchProvider.fetch()(ir,ar)});return{accessToken:tr.access_token,expiresIn:tr.expires_in,refreshToken:tr.refresh_token}}async function revokeToken(er,_e){return _performApiRequest(er,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(er,_e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_e){_assert(_e.idToken,"internal-error"),_assert(typeof _e.idToken<"u","internal-error"),_assert(typeof _e.refreshToken<"u","internal-error");const tr="expiresIn"in _e&&typeof _e.expiresIn<"u"?Number(_e.expiresIn):_tokenExpiresIn(_e.idToken);this.updateTokensAndExpiration(_e.idToken,_e.refreshToken,tr)}updateFromIdToken(_e){_assert(_e.length!==0,"internal-error");const tr=_tokenExpiresIn(_e);this.updateTokensAndExpiration(_e,null,tr)}async getToken(_e,tr=!1){return!tr&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,_e,"user-token-expired"),this.refreshToken?(await this.refresh(_e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(_e,tr){const{accessToken:rr,refreshToken:nr,expiresIn:sr}=await requestStsToken(_e,tr);this.updateTokensAndExpiration(rr,nr,Number(sr))}updateTokensAndExpiration(_e,tr,rr){this.refreshToken=tr||null,this.accessToken=_e||null,this.expirationTime=Date.now()+rr*1e3}static fromJSON(_e,tr){const{refreshToken:rr,accessToken:nr,expirationTime:sr}=tr,ir=new StsTokenManager;return rr&&(_assert(typeof rr=="string","internal-error",{appName:_e}),ir.refreshToken=rr),nr&&(_assert(typeof nr=="string","internal-error",{appName:_e}),ir.accessToken=nr),sr&&(_assert(typeof sr=="number","internal-error",{appName:_e}),ir.expirationTime=sr),ir}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_e){this.accessToken=_e.accessToken,this.refreshToken=_e.refreshToken,this.expirationTime=_e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(er,_e){_assert(typeof er=="string"||typeof er>"u","internal-error",{appName:_e})}class UserImpl{constructor(_e){var{uid:tr,auth:rr,stsTokenManager:nr}=_e,sr=__rest(_e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=tr,this.auth=rr,this.stsTokenManager=nr,this.accessToken=nr.accessToken,this.displayName=sr.displayName||null,this.email=sr.email||null,this.emailVerified=sr.emailVerified||!1,this.phoneNumber=sr.phoneNumber||null,this.photoURL=sr.photoURL||null,this.isAnonymous=sr.isAnonymous||!1,this.tenantId=sr.tenantId||null,this.providerData=sr.providerData?[...sr.providerData]:[],this.metadata=new UserMetadata(sr.createdAt||void 0,sr.lastLoginAt||void 0)}async getIdToken(_e){const tr=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,_e));return _assert(tr,this.auth,"internal-error"),this.accessToken!==tr&&(this.accessToken=tr,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),tr}getIdTokenResult(_e){return getIdTokenResult(this,_e)}reload(){return reload(this)}_assign(_e){this!==_e&&(_assert(this.uid===_e.uid,this.auth,"internal-error"),this.displayName=_e.displayName,this.photoURL=_e.photoURL,this.email=_e.email,this.emailVerified=_e.emailVerified,this.phoneNumber=_e.phoneNumber,this.isAnonymous=_e.isAnonymous,this.tenantId=_e.tenantId,this.providerData=_e.providerData.map(tr=>Object.assign({},tr)),this.metadata._copy(_e.metadata),this.stsTokenManager._assign(_e.stsTokenManager))}_clone(_e){const tr=new UserImpl(Object.assign(Object.assign({},this),{auth:_e,stsTokenManager:this.stsTokenManager._clone()}));return tr.metadata._copy(this.metadata),tr}_onReload(_e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_e){this.reloadListener?this.reloadListener(_e):this.reloadUserInfo=_e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(_e,tr=!1){let rr=!1;_e.idToken&&_e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(_e),rr=!0),tr&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),rr&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const _e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:_e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_e=>Object.assign({},_e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_e,tr){var rr,nr,sr,ir,or,ar,lr,cr;const Ar=(rr=tr.displayName)!==null&&rr!==void 0?rr:void 0,ur=(nr=tr.email)!==null&&nr!==void 0?nr:void 0,dr=(sr=tr.phoneNumber)!==null&&sr!==void 0?sr:void 0,mr=(ir=tr.photoURL)!==null&&ir!==void 0?ir:void 0,pr=(or=tr.tenantId)!==null&&or!==void 0?or:void 0,yr=(ar=tr._redirectEventId)!==null&&ar!==void 0?ar:void 0,hr=(lr=tr.createdAt)!==null&&lr!==void 0?lr:void 0,gr=(cr=tr.lastLoginAt)!==null&&cr!==void 0?cr:void 0,{uid:Cr,emailVerified:Tr,isAnonymous:Sr,providerData:Nr,stsTokenManager:_r}=tr;_assert(Cr&&_r,_e,"internal-error");const vr=StsTokenManager.fromJSON(this.name,_r);_assert(typeof Cr=="string",_e,"internal-error"),assertStringOrUndefined(Ar,_e.name),assertStringOrUndefined(ur,_e.name),_assert(typeof Tr=="boolean",_e,"internal-error"),_assert(typeof Sr=="boolean",_e,"internal-error"),assertStringOrUndefined(dr,_e.name),assertStringOrUndefined(mr,_e.name),assertStringOrUndefined(pr,_e.name),assertStringOrUndefined(yr,_e.name),assertStringOrUndefined(hr,_e.name),assertStringOrUndefined(gr,_e.name);const br=new UserImpl({uid:Cr,auth:_e,email:ur,emailVerified:Tr,displayName:Ar,isAnonymous:Sr,photoURL:mr,phoneNumber:dr,tenantId:pr,stsTokenManager:vr,createdAt:hr,lastLoginAt:gr});return Nr&&Array.isArray(Nr)&&(br.providerData=Nr.map(Pr=>Object.assign({},Pr))),yr&&(br._redirectEventId=yr),br}static async _fromIdTokenResponse(_e,tr,rr=!1){const nr=new StsTokenManager;nr.updateFromServerResponse(tr);const sr=new UserImpl({uid:tr.localId,auth:_e,stsTokenManager:nr,isAnonymous:rr});return await _reloadWithoutSaving(sr),sr}static async _fromGetAccountInfoResponse(_e,tr,rr){const nr=tr.users[0];_assert(nr.localId!==void 0,"internal-error");const sr=nr.providerUserInfo!==void 0?extractProviderData(nr.providerUserInfo):[],ir=!(nr.email&&nr.passwordHash)&&!(sr!=null&&sr.length),or=new StsTokenManager;or.updateFromIdToken(rr);const ar=new UserImpl({uid:nr.localId,auth:_e,stsTokenManager:or,isAnonymous:ir}),lr={uid:nr.localId,displayName:nr.displayName||null,photoURL:nr.photoUrl||null,email:nr.email||null,emailVerified:nr.emailVerified||!1,phoneNumber:nr.phoneNumber||null,tenantId:nr.tenantId||null,providerData:sr,metadata:new UserMetadata(nr.createdAt,nr.lastLoginAt),isAnonymous:!(nr.email&&nr.passwordHash)&&!(sr!=null&&sr.length)};return Object.assign(ar,lr),ar}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(er){debugAssert(er instanceof Function,"Expected a class definition");let _e=instanceCache.get(er);return _e?(debugAssert(_e instanceof er,"Instance stored in cache mismatched with class"),_e):(_e=new er,instanceCache.set(er,_e),_e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(_e,tr){this.storage[_e]=tr}async _get(_e){const tr=this.storage[_e];return tr===void 0?null:tr}async _remove(_e){delete this.storage[_e]}_addListener(_e,tr){}_removeListener(_e,tr){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(er,_e,tr){return`firebase:${er}:${_e}:${tr}`}class PersistenceUserManager{constructor(_e,tr,rr){this.persistence=_e,this.auth=tr,this.userKey=rr;const{config:nr,name:sr}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,nr.apiKey,sr),this.fullPersistenceKey=_persistenceKeyName("persistence",nr.apiKey,sr),this.boundEventHandler=tr._onStorageEvent.bind(tr),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_e){return this.persistence._set(this.fullUserKey,_e.toJSON())}async getCurrentUser(){const _e=await this.persistence._get(this.fullUserKey);if(!_e)return null;if(typeof _e=="string"){const tr=await getAccountInfo(this.auth,{idToken:_e}).catch(()=>{});return tr?UserImpl._fromGetAccountInfoResponse(this.auth,tr,_e):null}return UserImpl._fromJSON(this.auth,_e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(_e){if(this.persistence===_e)return;const tr=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=_e,tr)return this.setCurrentUser(tr)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(_e,tr,rr="authUser"){if(!tr.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),_e,rr);const nr=(await Promise.all(tr.map(async lr=>{if(await lr._isAvailable())return lr}))).filter(lr=>lr);let sr=nr[0]||_getInstance(inMemoryPersistence);const ir=_persistenceKeyName(rr,_e.config.apiKey,_e.name);let or=null;for(const lr of tr)try{const cr=await lr._get(ir);if(cr){let Ar;if(typeof cr=="string"){const ur=await getAccountInfo(_e,{idToken:cr}).catch(()=>{});if(!ur)break;Ar=await UserImpl._fromGetAccountInfoResponse(_e,ur,cr)}else Ar=UserImpl._fromJSON(_e,cr);lr!==sr&&(or=Ar),sr=lr;break}}catch{}const ar=nr.filter(lr=>lr._shouldAllowMigration);return!sr._shouldAllowMigration||!ar.length?new PersistenceUserManager(sr,_e,rr):(sr=ar[0],or&&await sr._set(ir,or.toJSON()),await Promise.all(tr.map(async lr=>{if(lr!==sr)try{await lr._remove(ir)}catch{}})),new PersistenceUserManager(sr,_e,rr))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(er){const _e=er.toLowerCase();if(_e.includes("opera/")||_e.includes("opr/")||_e.includes("opios/"))return"Opera";if(_isIEMobile(_e))return"IEMobile";if(_e.includes("msie")||_e.includes("trident/"))return"IE";if(_e.includes("edge/"))return"Edge";if(_isFirefox(_e))return"Firefox";if(_e.includes("silk/"))return"Silk";if(_isBlackBerry(_e))return"Blackberry";if(_isWebOS(_e))return"Webos";if(_isSafari(_e))return"Safari";if((_e.includes("chrome/")||_isChromeIOS(_e))&&!_e.includes("edge/"))return"Chrome";if(_isAndroid(_e))return"Android";{const tr=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,rr=er.match(tr);if((rr==null?void 0:rr.length)===2)return rr[1]}return"Other"}function _isFirefox(er=getUA()){return/firefox\//i.test(er)}function _isSafari(er=getUA()){const _e=er.toLowerCase();return _e.includes("safari/")&&!_e.includes("chrome/")&&!_e.includes("crios/")&&!_e.includes("android")}function _isChromeIOS(er=getUA()){return/crios\//i.test(er)}function _isIEMobile(er=getUA()){return/iemobile/i.test(er)}function _isAndroid(er=getUA()){return/android/i.test(er)}function _isBlackBerry(er=getUA()){return/blackberry/i.test(er)}function _isWebOS(er=getUA()){return/webos/i.test(er)}function _isIOS(er=getUA()){return/iphone|ipad|ipod/i.test(er)||/macintosh/i.test(er)&&/mobile/i.test(er)}function _isIOSStandalone(er=getUA()){var _e;return _isIOS(er)&&!!(!((_e=window.navigator)===null||_e===void 0)&&_e.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(er=getUA()){return _isIOS(er)||_isAndroid(er)||_isWebOS(er)||_isBlackBerry(er)||/windows phone/i.test(er)||_isIEMobile(er)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(er,_e=[]){let tr;switch(er){case"Browser":tr=_getBrowserName(getUA());break;case"Worker":tr=`${_getBrowserName(getUA())}-${er}`;break;default:tr=er}const rr=_e.length?_e.join(","):"FirebaseCore-web";return`${tr}/JsCore/${SDK_VERSION}/${rr}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(_e){this.auth=_e,this.queue=[]}pushCallback(_e,tr){const rr=sr=>new Promise((ir,or)=>{try{const ar=_e(sr);ir(ar)}catch(ar){or(ar)}});rr.onAbort=tr,this.queue.push(rr);const nr=this.queue.length-1;return()=>{this.queue[nr]=()=>Promise.resolve()}}async runMiddleware(_e){if(this.auth.currentUser===_e)return;const tr=[];try{for(const rr of this.queue)await rr(_e),rr.onAbort&&tr.push(rr.onAbort)}catch(rr){tr.reverse();for(const nr of tr)try{nr()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:rr==null?void 0:rr.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(er,_e={}){return _performApiRequest(er,"GET","/v2/passwordPolicy",_addTidIfNecessary(er,_e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(_e){var tr,rr,nr,sr;const ir=_e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(tr=ir.minPasswordLength)!==null&&tr!==void 0?tr:MINIMUM_MIN_PASSWORD_LENGTH,ir.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ir.maxPasswordLength),ir.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=ir.containsLowercaseCharacter),ir.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=ir.containsUppercaseCharacter),ir.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=ir.containsNumericCharacter),ir.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ir.containsNonAlphanumericCharacter),this.enforcementState=_e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(nr=(rr=_e.allowedNonAlphanumericCharacters)===null||rr===void 0?void 0:rr.join(""))!==null&&nr!==void 0?nr:"",this.forceUpgradeOnSignin=(sr=_e.forceUpgradeOnSignin)!==null&&sr!==void 0?sr:!1,this.schemaVersion=_e.schemaVersion}validatePassword(_e){var tr,rr,nr,sr,ir,or;const ar={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(_e,ar),this.validatePasswordCharacterOptions(_e,ar),ar.isValid&&(ar.isValid=(tr=ar.meetsMinPasswordLength)!==null&&tr!==void 0?tr:!0),ar.isValid&&(ar.isValid=(rr=ar.meetsMaxPasswordLength)!==null&&rr!==void 0?rr:!0),ar.isValid&&(ar.isValid=(nr=ar.containsLowercaseLetter)!==null&&nr!==void 0?nr:!0),ar.isValid&&(ar.isValid=(sr=ar.containsUppercaseLetter)!==null&&sr!==void 0?sr:!0),ar.isValid&&(ar.isValid=(ir=ar.containsNumericCharacter)!==null&&ir!==void 0?ir:!0),ar.isValid&&(ar.isValid=(or=ar.containsNonAlphanumericCharacter)!==null&&or!==void 0?or:!0),ar}validatePasswordLengthOptions(_e,tr){const rr=this.customStrengthOptions.minPasswordLength,nr=this.customStrengthOptions.maxPasswordLength;rr&&(tr.meetsMinPasswordLength=_e.length>=rr),nr&&(tr.meetsMaxPasswordLength=_e.length<=nr)}validatePasswordCharacterOptions(_e,tr){this.updatePasswordCharacterOptionsStatuses(tr,!1,!1,!1,!1);let rr;for(let nr=0;nr<_e.length;nr++)rr=_e.charAt(nr),this.updatePasswordCharacterOptionsStatuses(tr,rr>="a"&&rr<="z",rr>="A"&&rr<="Z",rr>="0"&&rr<="9",this.allowedNonAlphanumericCharacters.includes(rr))}updatePasswordCharacterOptionsStatuses(_e,tr,rr,nr,sr){this.customStrengthOptions.containsLowercaseLetter&&(_e.containsLowercaseLetter||(_e.containsLowercaseLetter=tr)),this.customStrengthOptions.containsUppercaseLetter&&(_e.containsUppercaseLetter||(_e.containsUppercaseLetter=rr)),this.customStrengthOptions.containsNumericCharacter&&(_e.containsNumericCharacter||(_e.containsNumericCharacter=nr)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(_e.containsNonAlphanumericCharacter||(_e.containsNonAlphanumericCharacter=sr))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(_e,tr,rr,nr){this.app=_e,this.heartbeatServiceProvider=tr,this.appCheckServiceProvider=rr,this.config=nr,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_e.name,this.clientVersion=nr.sdkClientVersion,this._persistenceManagerAvailable=new Promise(sr=>this._resolvePersistenceManagerAvailable=sr)}_initializeWithPersistence(_e,tr){return tr&&(this._popupRedirectResolver=_getInstance(tr)),this._initializationPromise=this.queue(async()=>{var rr,nr,sr;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,_e),(rr=this._resolvePersistenceManagerAvailable)===null||rr===void 0||rr.call(this),!this._deleted)){if(!((nr=this._popupRedirectResolver)===null||nr===void 0)&&nr._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(tr),this.lastNotifiedUid=((sr=this.currentUser)===null||sr===void 0?void 0:sr.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const _e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!_e)){if(this.currentUser&&_e&&this.currentUser.uid===_e.uid){this._currentUser._assign(_e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(_e,!0)}}async initializeCurrentUserFromIdToken(_e){try{const tr=await getAccountInfo(this,{idToken:_e}),rr=await UserImpl._fromGetAccountInfoResponse(this,tr,_e);await this.directlySetCurrentUser(rr)}catch(tr){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",tr),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(_e){var tr;if(_isFirebaseServerApp(this.app)){const ir=this.app.settings.authIdToken;return ir?new Promise(or=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(ir).then(or,or))}):this.directlySetCurrentUser(null)}const rr=await this.assertedPersistence.getCurrentUser();let nr=rr,sr=!1;if(_e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const ir=(tr=this.redirectUser)===null||tr===void 0?void 0:tr._redirectEventId,or=nr==null?void 0:nr._redirectEventId,ar=await this.tryRedirectSignIn(_e);(!ir||ir===or)&&(ar!=null&&ar.user)&&(nr=ar.user,sr=!0)}if(!nr)return this.directlySetCurrentUser(null);if(!nr._redirectEventId){if(sr)try{await this.beforeStateQueue.runMiddleware(nr)}catch(ir){nr=rr,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(ir))}return nr?this.reloadAndSetCurrentUserOrClear(nr):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===nr._redirectEventId?this.directlySetCurrentUser(nr):this.reloadAndSetCurrentUserOrClear(nr)}async tryRedirectSignIn(_e){let tr=null;try{tr=await this._popupRedirectResolver._completeRedirectFn(this,_e,!0)}catch{await this._setRedirectUser(null)}return tr}async reloadAndSetCurrentUserOrClear(_e){try{await _reloadWithoutSaving(_e)}catch(tr){if((tr==null?void 0:tr.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(_e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(_e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const tr=_e?getModularInstance(_e):null;return tr&&_assert(tr.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(tr&&tr._clone(this))}async _updateCurrentUser(_e,tr=!1){if(!this._deleted)return _e&&_assert(this.tenantId===_e.tenantId,this,"tenant-id-mismatch"),tr||await this.beforeStateQueue.runMiddleware(_e),this.queue(async()=>{await this.directlySetCurrentUser(_e),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(_e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(_e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(_e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const tr=this._getPasswordPolicyInternal();return tr.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):tr.validatePassword(_e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const _e=await _getPasswordPolicy(this),tr=new PasswordPolicyImpl(_e);this.tenantId===null?this._projectPasswordPolicy=tr:this._tenantPasswordPolicies[this.tenantId]=tr}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(_e){this._errorFactory=new ErrorFactory("auth","Firebase",_e())}onAuthStateChanged(_e,tr,rr){return this.registerStateListener(this.authStateSubscription,_e,tr,rr)}beforeAuthStateChanged(_e,tr){return this.beforeStateQueue.pushCallback(_e,tr)}onIdTokenChanged(_e,tr,rr){return this.registerStateListener(this.idTokenSubscription,_e,tr,rr)}authStateReady(){return new Promise((_e,tr)=>{if(this.currentUser)_e();else{const rr=this.onAuthStateChanged(()=>{rr(),_e()},tr)}})}async revokeAccessToken(_e){if(this.currentUser){const tr=await this.currentUser.getIdToken(),rr={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:_e,idToken:tr};this.tenantId!=null&&(rr.tenantId=this.tenantId),await revokeToken(this,rr)}}toJSON(){var _e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(_e=this._currentUser)===null||_e===void 0?void 0:_e.toJSON()}}async _setRedirectUser(_e,tr){const rr=await this.getOrInitRedirectPersistenceManager(tr);return _e===null?rr.removeCurrentUser():rr.setCurrentUser(_e)}async getOrInitRedirectPersistenceManager(_e){if(!this.redirectPersistenceManager){const tr=_e&&_getInstance(_e)||this._popupRedirectResolver;_assert(tr,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(tr._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(_e){var tr,rr;return this._isInitialized&&await this.queue(async()=>{}),((tr=this._currentUser)===null||tr===void 0?void 0:tr._redirectEventId)===_e?this._currentUser:((rr=this.redirectUser)===null||rr===void 0?void 0:rr._redirectEventId)===_e?this.redirectUser:null}async _persistUserIfCurrent(_e){if(_e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(_e))}_notifyListenersIfCurrent(_e){_e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _e,tr;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const rr=(tr=(_e=this.currentUser)===null||_e===void 0?void 0:_e.uid)!==null&&tr!==void 0?tr:null;this.lastNotifiedUid!==rr&&(this.lastNotifiedUid=rr,this.authStateSubscription.next(this.currentUser))}registerStateListener(_e,tr,rr,nr){if(this._deleted)return()=>{};const sr=typeof tr=="function"?tr:tr.next.bind(tr);let ir=!1;const or=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(or,this,"internal-error"),or.then(()=>{ir||sr(this.currentUser)}),typeof tr=="function"){const ar=_e.addObserver(tr,rr,nr);return()=>{ir=!0,ar()}}else{const ar=_e.addObserver(tr);return()=>{ir=!0,ar()}}}async directlySetCurrentUser(_e){this.currentUser&&this.currentUser!==_e&&this._currentUser._stopProactiveRefresh(),_e&&this.isProactiveRefreshEnabled&&_e._startProactiveRefresh(),this.currentUser=_e,_e?await this.assertedPersistence.setCurrentUser(_e):await this.assertedPersistence.removeCurrentUser()}queue(_e){return this.operations=this.operations.then(_e,_e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_e){!_e||this.frameworks.includes(_e)||(this.frameworks.push(_e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var _e;const tr={"X-Client-Version":this.clientVersion};this.app.options.appId&&(tr["X-Firebase-gmpid"]=this.app.options.appId);const rr=await((_e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||_e===void 0?void 0:_e.getHeartbeatsHeader());rr&&(tr["X-Firebase-Client"]=rr);const nr=await this._getAppCheckToken();return nr&&(tr["X-Firebase-AppCheck"]=nr),tr}async _getAppCheckToken(){var _e;if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const tr=await((_e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||_e===void 0?void 0:_e.getToken());return tr!=null&&tr.error&&_logWarn(`Error while retrieving App Check token: ${tr.error}`),tr==null?void 0:tr.token}}function _castAuth(er){return getModularInstance(er)}class Subscription{constructor(_e){this.auth=_e,this.observer=null,this.addObserver=createSubscribe(tr=>this.observer=tr)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(er){externalJSProvider=er}function _loadJS(er){return externalJSProvider.loadJS(er)}function _recaptchaV2ScriptUrl(){return externalJSProvider.recaptchaV2Script}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(er){return`__${er}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _SOLVE_TIME_MS=500,_EXPIRATION_TIME_MS=6e4,_WIDGET_ID_START=1e12;class MockReCaptcha{constructor(_e){this.auth=_e,this.counter=_WIDGET_ID_START,this._widgets=new Map}render(_e,tr){const rr=this.counter;return this._widgets.set(rr,new MockWidget(_e,this.auth.name,tr||{})),this.counter++,rr}reset(_e){var tr;const rr=_e||_WIDGET_ID_START;(tr=this._widgets.get(rr))===null||tr===void 0||tr.delete(),this._widgets.delete(rr)}getResponse(_e){var tr;const rr=_e||_WIDGET_ID_START;return((tr=this._widgets.get(rr))===null||tr===void 0?void 0:tr.getResponse())||""}async execute(_e){var tr;const rr=_e||_WIDGET_ID_START;return(tr=this._widgets.get(rr))===null||tr===void 0||tr.execute(),""}}class MockGreCAPTCHATopLevel{constructor(){this.enterprise=new MockGreCAPTCHA}ready(_e){_e()}execute(_e,tr){return Promise.resolve("token")}render(_e,tr){return""}}class MockGreCAPTCHA{ready(_e){_e()}execute(_e,tr){return Promise.resolve("token")}render(_e,tr){return""}}class MockWidget{constructor(_e,tr,rr){this.params=rr,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const nr=typeof _e=="string"?document.getElementById(_e):_e;_assert(nr,"argument-error",{appName:tr}),this.container=nr,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=generateRandomAlphaNumericString(50);const{callback:_e,"expired-callback":tr}=this.params;if(_e)try{_e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,tr)try{tr()}catch{}this.isVisible&&this.execute()},_EXPIRATION_TIME_MS)},_SOLVE_TIME_MS))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function generateRandomAlphaNumericString(er){const _e=[],tr="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let rr=0;rr<er;rr++)_e.push(tr.charAt(Math.floor(Math.random()*tr.length)));return _e.join("")}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(_e){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(_e)}async verify(_e="verify",tr=!1){async function rr(sr){if(!tr){if(sr.tenantId==null&&sr._agentRecaptchaConfig!=null)return sr._agentRecaptchaConfig.siteKey;if(sr.tenantId!=null&&sr._tenantRecaptchaConfigs[sr.tenantId]!==void 0)return sr._tenantRecaptchaConfigs[sr.tenantId].siteKey}return new Promise(async(ir,or)=>{getRecaptchaConfig(sr,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ar=>{if(ar.recaptchaKey===void 0)or(new Error("recaptcha Enterprise site key undefined"));else{const lr=new RecaptchaConfig(ar);return sr.tenantId==null?sr._agentRecaptchaConfig=lr:sr._tenantRecaptchaConfigs[sr.tenantId]=lr,ir(lr.siteKey)}}).catch(ar=>{or(ar)})})}function nr(sr,ir,or){const ar=window.grecaptcha;isEnterprise(ar)?ar.enterprise.ready(()=>{ar.enterprise.execute(sr,{action:_e}).then(lr=>{ir(lr)}).catch(()=>{ir(FAKE_TOKEN)})}):or(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MockGreCAPTCHATopLevel().execute("siteKey",{action:"verify"}):new Promise((sr,ir)=>{rr(this.auth).then(or=>{if(!tr&&isEnterprise(window.grecaptcha))nr(or,sr,ir);else{if(typeof window>"u"){ir(new Error("RecaptchaVerifier is only supported in browser"));return}let ar=_recaptchaEnterpriseScriptUrl();ar.length!==0&&(ar+=or),_loadJS(ar).then(()=>{nr(or,sr,ir)}).catch(lr=>{ir(lr)})}}).catch(or=>{ir(or)})})}}async function injectRecaptchaFields(er,_e,tr,rr=!1,nr=!1){const sr=new RecaptchaEnterpriseVerifier(er);let ir;if(nr)ir=FAKE_TOKEN;else try{ir=await sr.verify(tr)}catch{ir=await sr.verify(tr,!0)}const or=Object.assign({},_e);if(tr==="mfaSmsEnrollment"||tr==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in or){const ar=or.phoneEnrollmentInfo.phoneNumber,lr=or.phoneEnrollmentInfo.recaptchaToken;Object.assign(or,{phoneEnrollmentInfo:{phoneNumber:ar,recaptchaToken:lr,captchaResponse:ir,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in or){const ar=or.phoneSignInInfo.recaptchaToken;Object.assign(or,{phoneSignInInfo:{recaptchaToken:ar,captchaResponse:ir,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return or}return rr?Object.assign(or,{captchaResp:ir}):Object.assign(or,{captchaResponse:ir}),Object.assign(or,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(or,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),or}async function handleRecaptchaFlow(er,_e,tr,rr,nr){var sr;if(!((sr=er._getRecaptchaConfig())===null||sr===void 0)&&sr.isProviderEnabled("PHONE_PROVIDER")){const ir=await injectRecaptchaFields(er,_e,tr);return rr(er,ir).catch(async or=>{var ar;if(((ar=er._getRecaptchaConfig())===null||ar===void 0?void 0:ar.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(or.code==="auth/missing-recaptcha-token"||or.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${tr} flow.`);const lr=await injectRecaptchaFields(er,_e,tr,!1,!0);return rr(er,lr)}return Promise.reject(or)})}else{const ir=await injectRecaptchaFields(er,_e,tr,!1,!0);return rr(er,ir)}}async function _initializeRecaptchaConfig(er){const _e=_castAuth(er),tr=await getRecaptchaConfig(_e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),rr=new RecaptchaConfig(tr);_e.tenantId==null?_e._agentRecaptchaConfig=rr:_e._tenantRecaptchaConfigs[_e.tenantId]=rr,rr.isAnyProviderEnabled()&&new RecaptchaEnterpriseVerifier(_e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(er,_e){const tr=_getProvider(er,"auth");if(tr.isInitialized()){const nr=tr.getImmediate(),sr=tr.getOptions();if(deepEqual(sr,_e??{}))return nr;_fail(nr,"already-initialized")}return tr.initialize({options:_e})}function _initializeAuthInstance(er,_e){const tr=(_e==null?void 0:_e.persistence)||[],rr=(Array.isArray(tr)?tr:[tr]).map(_getInstance);_e!=null&&_e.errorMap&&er._updateErrorMap(_e.errorMap),er._initializeWithPersistence(rr,_e==null?void 0:_e.popupRedirectResolver)}function connectAuthEmulator(er,_e,tr){const rr=_castAuth(er);_assert(/^https?:\/\//.test(_e),rr,"invalid-emulator-scheme");const nr=!1,sr=extractProtocol(_e),{host:ir,port:or}=extractHostAndPort(_e),ar=or===null?"":`:${or}`,lr={url:`${sr}//${ir}${ar}/`},cr=Object.freeze({host:ir,port:or,protocol:sr.replace(":",""),options:Object.freeze({disableWarnings:nr})});if(!rr._canInitEmulator){_assert(rr.config.emulator&&rr.emulatorConfig,rr,"emulator-config-failed"),_assert(deepEqual(lr,rr.config.emulator)&&deepEqual(cr,rr.emulatorConfig),rr,"emulator-config-failed");return}rr.config.emulator=lr,rr.emulatorConfig=cr,rr.settings.appVerificationDisabledForTesting=!0,isCloudWorkstation(ir)?(pingServer(`${sr}//${ir}${ar}`),updateEmulatorBanner("Auth",!0)):emitEmulatorWarning()}function extractProtocol(er){const _e=er.indexOf(":");return _e<0?"":er.substr(0,_e+1)}function extractHostAndPort(er){const _e=extractProtocol(er),tr=/(\/\/)?([^?#/]+)/.exec(er.substr(_e.length));if(!tr)return{host:"",port:null};const rr=tr[2].split("@").pop()||"",nr=/^(\[[^\]]+\])(:|$)/.exec(rr);if(nr){const sr=nr[1];return{host:sr,port:parsePort(rr.substr(sr.length+1))}}else{const[sr,ir]=rr.split(":");return{host:sr,port:parsePort(ir)}}}function parsePort(er){if(!er)return null;const _e=Number(er);return isNaN(_e)?null:_e}function emitEmulatorWarning(){function er(){const _e=document.createElement("p"),tr=_e.style;_e.innerText="Running in emulator mode. Do not use with production credentials.",tr.position="fixed",tr.width="100%",tr.backgroundColor="#ffffff",tr.border=".1em solid #000000",tr.color="#b50000",tr.bottom="0px",tr.left="0px",tr.margin="0px",tr.zIndex="10000",tr.textAlign="center",_e.classList.add("firebase-emulator-warning"),document.body.appendChild(_e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",er):er())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(_e,tr){this.providerId=_e,this.signInMethod=tr}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(_e){return debugFail("not implemented")}_linkToIdToken(_e,tr){return debugFail("not implemented")}_getReauthenticationResolver(_e){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(er,_e){return _performSignInRequest(er,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(er,_e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_e){const tr=new OAuthCredential(_e.providerId,_e.signInMethod);return _e.idToken||_e.accessToken?(_e.idToken&&(tr.idToken=_e.idToken),_e.accessToken&&(tr.accessToken=_e.accessToken),_e.nonce&&!_e.pendingToken&&(tr.nonce=_e.nonce),_e.pendingToken&&(tr.pendingToken=_e.pendingToken)):_e.oauthToken&&_e.oauthTokenSecret?(tr.accessToken=_e.oauthToken,tr.secret=_e.oauthTokenSecret):_fail("argument-error"),tr}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_e){const tr=typeof _e=="string"?JSON.parse(_e):_e,{providerId:rr,signInMethod:nr}=tr,sr=__rest(tr,["providerId","signInMethod"]);if(!rr||!nr)return null;const ir=new OAuthCredential(rr,nr);return ir.idToken=sr.idToken||void 0,ir.accessToken=sr.accessToken||void 0,ir.secret=sr.secret,ir.nonce=sr.nonce,ir.pendingToken=sr.pendingToken||null,ir}_getIdTokenResponse(_e){const tr=this.buildRequest();return signInWithIdp(_e,tr)}_linkToIdToken(_e,tr){const rr=this.buildRequest();return rr.idToken=tr,signInWithIdp(_e,rr)}_getReauthenticationResolver(_e){const tr=this.buildRequest();return tr.autoCreate=!1,signInWithIdp(_e,tr)}buildRequest(){const _e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)_e.pendingToken=this.pendingToken;else{const tr={};this.idToken&&(tr.id_token=this.idToken),this.accessToken&&(tr.access_token=this.accessToken),this.secret&&(tr.oauth_token_secret=this.secret),tr.providerId=this.providerId,this.nonce&&!this.pendingToken&&(tr.nonce=this.nonce),_e.postBody=querystring(tr)}return _e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sendPhoneVerificationCode(er,_e){return _performApiRequest(er,"POST","/v1/accounts:sendVerificationCode",_addTidIfNecessary(er,_e))}async function signInWithPhoneNumber$1(er,_e){return _performSignInRequest(er,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(er,_e))}async function linkWithPhoneNumber$1(er,_e){const tr=await _performSignInRequest(er,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(er,_e));if(tr.temporaryProof)throw _makeTaggedError(er,"account-exists-with-different-credential",tr);return tr}const VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_={USER_NOT_FOUND:"user-not-found"};async function verifyPhoneNumberForExisting(er,_e){const tr=Object.assign(Object.assign({},_e),{operation:"REAUTH"});return _performSignInRequest(er,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(er,tr),VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PhoneAuthCredential extends AuthCredential{constructor(_e){super("phone","phone"),this.params=_e}static _fromVerification(_e,tr){return new PhoneAuthCredential({verificationId:_e,verificationCode:tr})}static _fromTokenResponse(_e,tr){return new PhoneAuthCredential({phoneNumber:_e,temporaryProof:tr})}_getIdTokenResponse(_e){return signInWithPhoneNumber$1(_e,this._makeVerificationRequest())}_linkToIdToken(_e,tr){return linkWithPhoneNumber$1(_e,Object.assign({idToken:tr},this._makeVerificationRequest()))}_getReauthenticationResolver(_e){return verifyPhoneNumberForExisting(_e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_e,phoneNumber:tr,verificationId:rr,verificationCode:nr}=this.params;return _e&&tr?{temporaryProof:_e,phoneNumber:tr}:{sessionInfo:rr,code:nr}}toJSON(){const _e={providerId:this.providerId};return this.params.phoneNumber&&(_e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_e.verificationCode=this.params.verificationCode),this.params.verificationId&&(_e.verificationId=this.params.verificationId),_e}static fromJSON(_e){typeof _e=="string"&&(_e=JSON.parse(_e));const{verificationId:tr,verificationCode:rr,phoneNumber:nr,temporaryProof:sr}=_e;return!rr&&!tr&&!nr&&!sr?null:new PhoneAuthCredential({verificationId:tr,verificationCode:rr,phoneNumber:nr,temporaryProof:sr})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(_e){this.providerId=_e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_e){this.defaultLanguageCode=_e}setCustomParameters(_e){return this.customParameters=_e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(_e){return this.scopes.includes(_e)||this.scopes.push(_e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(_e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:_e})}static credentialFromResult(_e){return FacebookAuthProvider.credentialFromTaggedObject(_e)}static credentialFromError(_e){return FacebookAuthProvider.credentialFromTaggedObject(_e.customData||{})}static credentialFromTaggedObject({_tokenResponse:_e}){if(!_e||!("oauthAccessToken"in _e)||!_e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(_e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(_e,tr){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:_e,accessToken:tr})}static credentialFromResult(_e){return GoogleAuthProvider.credentialFromTaggedObject(_e)}static credentialFromError(_e){return GoogleAuthProvider.credentialFromTaggedObject(_e.customData||{})}static credentialFromTaggedObject({_tokenResponse:_e}){if(!_e)return null;const{oauthIdToken:tr,oauthAccessToken:rr}=_e;if(!tr&&!rr)return null;try{return GoogleAuthProvider.credential(tr,rr)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(_e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:_e})}static credentialFromResult(_e){return GithubAuthProvider.credentialFromTaggedObject(_e)}static credentialFromError(_e){return GithubAuthProvider.credentialFromTaggedObject(_e.customData||{})}static credentialFromTaggedObject({_tokenResponse:_e}){if(!_e||!("oauthAccessToken"in _e)||!_e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(_e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(_e,tr){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:_e,oauthTokenSecret:tr})}static credentialFromResult(_e){return TwitterAuthProvider.credentialFromTaggedObject(_e)}static credentialFromError(_e){return TwitterAuthProvider.credentialFromTaggedObject(_e.customData||{})}static credentialFromTaggedObject({_tokenResponse:_e}){if(!_e)return null;const{oauthAccessToken:tr,oauthTokenSecret:rr}=_e;if(!tr||!rr)return null;try{return TwitterAuthProvider.credential(tr,rr)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(_e){this.user=_e.user,this.providerId=_e.providerId,this._tokenResponse=_e._tokenResponse,this.operationType=_e.operationType}static async _fromIdTokenResponse(_e,tr,rr,nr=!1){const sr=await UserImpl._fromIdTokenResponse(_e,rr,nr),ir=providerIdForResponse(rr);return new UserCredentialImpl({user:sr,providerId:ir,_tokenResponse:rr,operationType:tr})}static async _forOperation(_e,tr,rr){await _e._updateTokensIfNecessary(rr,!0);const nr=providerIdForResponse(rr);return new UserCredentialImpl({user:_e,providerId:nr,_tokenResponse:rr,operationType:tr})}}function providerIdForResponse(er){return er.providerId?er.providerId:"phoneNumber"in er?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(_e,tr,rr,nr){var sr;super(tr.code,tr.message),this.operationType=rr,this.user=nr,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:_e.name,tenantId:(sr=_e.tenantId)!==null&&sr!==void 0?sr:void 0,_serverResponse:tr.customData._serverResponse,operationType:rr}}static _fromErrorAndOperation(_e,tr,rr,nr){return new MultiFactorError(_e,tr,rr,nr)}}function _processCredentialSavingMfaContextIfNecessary(er,_e,tr,rr){return(_e==="reauthenticate"?tr._getReauthenticationResolver(er):tr._getIdTokenResponse(er)).catch(sr=>{throw sr.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(er,sr,_e,rr):sr})}async function _link$1(er,_e,tr=!1){const rr=await _logoutIfInvalidated(er,_e._linkToIdToken(er.auth,await er.getIdToken()),tr);return UserCredentialImpl._forOperation(er,"link",rr)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(er,_e,tr=!1){const{auth:rr}=er;if(_isFirebaseServerApp(rr.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(rr));const nr="reauthenticate";try{const sr=await _logoutIfInvalidated(er,_processCredentialSavingMfaContextIfNecessary(rr,nr,_e,er),tr);_assert(sr.idToken,rr,"internal-error");const ir=_parseToken(sr.idToken);_assert(ir,rr,"internal-error");const{sub:or}=ir;return _assert(er.uid===or,rr,"user-mismatch"),UserCredentialImpl._forOperation(er,nr,sr)}catch(sr){throw(sr==null?void 0:sr.code)==="auth/user-not-found"&&_fail(rr,"user-mismatch"),sr}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(er,_e,tr=!1){if(_isFirebaseServerApp(er.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(er));const rr="signIn",nr=await _processCredentialSavingMfaContextIfNecessary(er,rr,_e),sr=await UserCredentialImpl._fromIdTokenResponse(er,rr,nr);return tr||await er._updateCurrentUser(sr.user),sr}async function signInWithCredential(er,_e){return _signInWithCredential(_castAuth(er),_e)}function onIdTokenChanged(er,_e,tr,rr){return getModularInstance(er).onIdTokenChanged(_e,tr,rr)}function beforeAuthStateChanged(er,_e,tr){return getModularInstance(er).beforeAuthStateChanged(_e,tr)}function onAuthStateChanged(er,_e,tr,rr){return getModularInstance(er).onAuthStateChanged(_e,tr,rr)}function signOut(er){return getModularInstance(er).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function startEnrollPhoneMfa(er,_e){return _performApiRequest(er,"POST","/v2/accounts/mfaEnrollment:start",_addTidIfNecessary(er,_e))}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(_e,tr){this.storageRetriever=_e,this.type=tr}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_e,tr){return this.storage.setItem(_e,JSON.stringify(tr)),Promise.resolve()}_get(_e){const tr=this.storage.getItem(_e);return Promise.resolve(tr?JSON.parse(tr):null)}_remove(_e){return this.storage.removeItem(_e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_e,tr)=>this.onStorageEvent(_e,tr),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(_e){for(const tr of Object.keys(this.listeners)){const rr=this.storage.getItem(tr),nr=this.localCache[tr];rr!==nr&&_e(tr,nr,rr)}}onStorageEvent(_e,tr=!1){if(!_e.key){this.forAllChangedKeys((ir,or,ar)=>{this.notifyListeners(ir,ar)});return}const rr=_e.key;tr?this.detachListener():this.stopPolling();const nr=()=>{const ir=this.storage.getItem(rr);!tr&&this.localCache[rr]===ir||this.notifyListeners(rr,ir)},sr=this.storage.getItem(rr);_isIE10()&&sr!==_e.newValue&&_e.newValue!==_e.oldValue?setTimeout(nr,IE10_LOCAL_STORAGE_SYNC_DELAY):nr()}notifyListeners(_e,tr){this.localCache[_e]=tr;const rr=this.listeners[_e];if(rr)for(const nr of Array.from(rr))nr(tr&&JSON.parse(tr))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_e,tr,rr)=>{this.onStorageEvent(new StorageEvent("storage",{key:_e,oldValue:tr,newValue:rr}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_e,tr){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_e]||(this.listeners[_e]=new Set,this.localCache[_e]=this.storage.getItem(_e)),this.listeners[_e].add(tr)}_removeListener(_e,tr){this.listeners[_e]&&(this.listeners[_e].delete(tr),this.listeners[_e].size===0&&delete this.listeners[_e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(_e,tr){await super._set(_e,tr),this.localCache[_e]=JSON.stringify(tr)}async _get(_e){const tr=await super._get(_e);return this.localCache[_e]=JSON.stringify(tr),tr}async _remove(_e){await super._remove(_e),delete this.localCache[_e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_e,tr){}_removeListener(_e,tr){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(er){return Promise.all(er.map(async _e=>{try{return{fulfilled:!0,value:await _e}}catch(tr){return{fulfilled:!1,reason:tr}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(_e){this.eventTarget=_e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_e){const tr=this.receivers.find(nr=>nr.isListeningto(_e));if(tr)return tr;const rr=new Receiver(_e);return this.receivers.push(rr),rr}isListeningto(_e){return this.eventTarget===_e}async handleEvent(_e){const tr=_e,{eventId:rr,eventType:nr,data:sr}=tr.data,ir=this.handlersMap[nr];if(!(ir!=null&&ir.size))return;tr.ports[0].postMessage({status:"ack",eventId:rr,eventType:nr});const or=Array.from(ir).map(async lr=>lr(tr.origin,sr)),ar=await _allSettled(or);tr.ports[0].postMessage({status:"done",eventId:rr,eventType:nr,response:ar})}_subscribe(_e,tr){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_e]||(this.handlersMap[_e]=new Set),this.handlersMap[_e].add(tr)}_unsubscribe(_e,tr){this.handlersMap[_e]&&tr&&this.handlersMap[_e].delete(tr),(!tr||this.handlersMap[_e].size===0)&&delete this.handlersMap[_e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(er="",_e=10){let tr="";for(let rr=0;rr<_e;rr++)tr+=Math.floor(Math.random()*10);return er+tr}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(_e){this.target=_e,this.handlers=new Set}removeMessageHandler(_e){_e.messageChannel&&(_e.messageChannel.port1.removeEventListener("message",_e.onMessage),_e.messageChannel.port1.close()),this.handlers.delete(_e)}async _send(_e,tr,rr=50){const nr=typeof MessageChannel<"u"?new MessageChannel:null;if(!nr)throw new Error("connection_unavailable");let sr,ir;return new Promise((or,ar)=>{const lr=_generateEventId("",20);nr.port1.start();const cr=setTimeout(()=>{ar(new Error("unsupported_event"))},rr);ir={messageChannel:nr,onMessage(Ar){const ur=Ar;if(ur.data.eventId===lr)switch(ur.data.status){case"ack":clearTimeout(cr),sr=setTimeout(()=>{ar(new Error("timeout"))},3e3);break;case"done":clearTimeout(sr),or(ur.data.response);break;default:clearTimeout(cr),clearTimeout(sr),ar(new Error("invalid_response"));break}}},this.handlers.add(ir),nr.port1.addEventListener("message",ir.onMessage),this.target.postMessage({eventType:_e,eventId:lr,data:tr},[nr.port2])}).finally(()=>{ir&&this.removeMessageHandler(ir)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(er){_window().location.href=er}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var er;return((er=navigator==null?void 0:navigator.serviceWorker)===null||er===void 0?void 0:er.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(_e){this.request=_e}toPromise(){return new Promise((_e,tr)=>{this.request.addEventListener("success",()=>{_e(this.request.result)}),this.request.addEventListener("error",()=>{tr(this.request.error)})})}}function getObjectStore(er,_e){return er.transaction([DB_OBJECTSTORE_NAME],_e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const er=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(er).toPromise()}function _openDatabase(){const er=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((_e,tr)=>{er.addEventListener("error",()=>{tr(er.error)}),er.addEventListener("upgradeneeded",()=>{const rr=er.result;try{rr.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(nr){tr(nr)}}),er.addEventListener("success",async()=>{const rr=er.result;rr.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?_e(rr):(rr.close(),await _deleteDatabase(),_e(await _openDatabase()))})})}async function _putObject(er,_e,tr){const rr=getObjectStore(er,!0).put({[DB_DATA_KEYPATH]:_e,value:tr});return new DBPromise(rr).toPromise()}async function getObject(er,_e){const tr=getObjectStore(er,!1).get(_e),rr=await new DBPromise(tr).toPromise();return rr===void 0?null:rr.value}function _deleteObject(er,_e){const tr=getObjectStore(er,!0).delete(_e);return new DBPromise(tr).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(_e){let tr=0;for(;;)try{const rr=await this._openDb();return await _e(rr)}catch(rr){if(tr++>_TRANSACTION_RETRY_COUNT)throw rr;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(_e,tr)=>({keyProcessed:(await this._poll()).includes(tr.key)})),this.receiver._subscribe("ping",async(_e,tr)=>["keyChanged"])}async initializeSender(){var _e,tr;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const rr=await this.sender._send("ping",{},800);rr&&!((_e=rr[0])===null||_e===void 0)&&_e.fulfilled&&!((tr=rr[0])===null||tr===void 0)&&tr.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(_e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:_e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const _e=await _openDatabase();return await _putObject(_e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(_e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(_e){this.pendingWrites++;try{await _e()}finally{this.pendingWrites--}}async _set(_e,tr){return this._withPendingWrite(async()=>(await this._withRetries(rr=>_putObject(rr,_e,tr)),this.localCache[_e]=tr,this.notifyServiceWorker(_e)))}async _get(_e){const tr=await this._withRetries(rr=>getObject(rr,_e));return this.localCache[_e]=tr,tr}async _remove(_e){return this._withPendingWrite(async()=>(await this._withRetries(tr=>_deleteObject(tr,_e)),delete this.localCache[_e],this.notifyServiceWorker(_e)))}async _poll(){const _e=await this._withRetries(nr=>{const sr=getObjectStore(nr,!1).getAll();return new DBPromise(sr).toPromise()});if(!_e)return[];if(this.pendingWrites!==0)return[];const tr=[],rr=new Set;if(_e.length!==0)for(const{fbase_key:nr,value:sr}of _e)rr.add(nr),JSON.stringify(this.localCache[nr])!==JSON.stringify(sr)&&(this.notifyListeners(nr,sr),tr.push(nr));for(const nr of Object.keys(this.localCache))this.localCache[nr]&&!rr.has(nr)&&(this.notifyListeners(nr,null),tr.push(nr));return tr}notifyListeners(_e,tr){this.localCache[_e]=tr;const rr=this.listeners[_e];if(rr)for(const nr of Array.from(rr))nr(tr)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_e,tr){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[_e]||(this.listeners[_e]=new Set,this._get(_e)),this.listeners[_e].add(tr)}_removeListener(_e,tr){this.listeners[_e]&&(this.listeners[_e].delete(tr),this.listeners[_e].size===0&&delete this.listeners[_e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function startSignInPhoneMfa(er,_e){return _performApiRequest(er,"POST","/v2/accounts/mfaSignIn:start",_addTidIfNecessary(er,_e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _JSLOAD_CALLBACK=_generateCallbackName("rcb"),NETWORK_TIMEOUT_DELAY=new Delay(3e4,6e4);class ReCaptchaLoaderImpl{constructor(){var _e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((_e=_window().grecaptcha)===null||_e===void 0)&&_e.render)}load(_e,tr=""){return _assert(isHostLanguageValid(tr),_e,"argument-error"),this.shouldResolveImmediately(tr)&&isV2(_window().grecaptcha)?Promise.resolve(_window().grecaptcha):new Promise((rr,nr)=>{const sr=_window().setTimeout(()=>{nr(_createError(_e,"network-request-failed"))},NETWORK_TIMEOUT_DELAY.get());_window()[_JSLOAD_CALLBACK]=()=>{_window().clearTimeout(sr),delete _window()[_JSLOAD_CALLBACK];const or=_window().grecaptcha;if(!or||!isV2(or)){nr(_createError(_e,"internal-error"));return}const ar=or.render;or.render=(lr,cr)=>{const Ar=ar(lr,cr);return this.counter++,Ar},this.hostLanguage=tr,rr(or)};const ir=`${_recaptchaV2ScriptUrl()}?${querystring({onload:_JSLOAD_CALLBACK,render:"explicit",hl:tr})}`;_loadJS(ir).catch(()=>{clearTimeout(sr),nr(_createError(_e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_e){var tr;return!!(!((tr=_window().grecaptcha)===null||tr===void 0)&&tr.render)&&(_e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function isHostLanguageValid(er){return er.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(er)}class MockReCaptchaLoaderImpl{async load(_e){return new MockReCaptcha(_e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RECAPTCHA_VERIFIER_TYPE="recaptcha",DEFAULT_PARAMS={theme:"light",type:"image"};class RecaptchaVerifier{constructor(_e,tr,rr=Object.assign({},DEFAULT_PARAMS)){this.parameters=rr,this.type=RECAPTCHA_VERIFIER_TYPE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_castAuth(_e),this.isInvisible=this.parameters.size==="invisible",_assert(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const nr=typeof tr=="string"?document.getElementById(tr):tr;_assert(nr,this.auth,"argument-error"),this.container=nr,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new MockReCaptchaLoaderImpl:new ReCaptchaLoaderImpl,this.validateStartingState()}async verify(){this.assertNotDestroyed();const _e=await this.render(),tr=this.getAssertedRecaptcha(),rr=tr.getResponse(_e);return rr||new Promise(nr=>{const sr=ir=>{ir&&(this.tokenChangeListeners.delete(sr),nr(ir))};this.tokenChangeListeners.add(sr),this.isInvisible&&tr.execute(_e)})}render(){try{this.assertNotDestroyed()}catch(_e){return Promise.reject(_e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(_e=>{throw this.renderPromise=null,_e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_e=>{this.container.removeChild(_e)})}validateStartingState(){_assert(!this.parameters.sitekey,this.auth,"argument-error"),_assert(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_assert(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_e){return tr=>{if(this.tokenChangeListeners.forEach(rr=>rr(tr)),typeof _e=="function")_e(tr);else if(typeof _e=="string"){const rr=_window()[_e];typeof rr=="function"&&rr(tr)}}}assertNotDestroyed(){_assert(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let _e=this.container;if(!this.isInvisible){const tr=document.createElement("div");_e.appendChild(tr),_e=tr}this.widgetId=this.getAssertedRecaptcha().render(_e,this.parameters)}return this.widgetId}async init(){_assert(_isHttpOrHttps()&&!_isWorker(),this.auth,"internal-error"),await domReady(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const _e=await getRecaptchaParams(this.auth);_assert(_e,this.auth,"internal-error"),this.parameters.sitekey=_e}getAssertedRecaptcha(){return _assert(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function domReady(){let er=null;return new Promise(_e=>{if(document.readyState==="complete"){_e();return}er=()=>_e(),window.addEventListener("load",er)}).catch(_e=>{throw er&&window.removeEventListener("load",er),_e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ConfirmationResultImpl{constructor(_e,tr){this.verificationId=_e,this.onConfirmation=tr}confirm(_e){const tr=PhoneAuthCredential._fromVerification(this.verificationId,_e);return this.onConfirmation(tr)}}async function signInWithPhoneNumber(er,_e,tr){if(_isFirebaseServerApp(er.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(er));const rr=_castAuth(er),nr=await _verifyPhoneNumber(rr,_e,getModularInstance(tr));return new ConfirmationResultImpl(nr,sr=>signInWithCredential(rr,sr))}async function _verifyPhoneNumber(er,_e,tr){var rr;if(!er._getRecaptchaConfig())try{await _initializeRecaptchaConfig(er)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let nr;if(typeof _e=="string"?nr={phoneNumber:_e}:nr=_e,"session"in nr){const sr=nr.session;if("phoneNumber"in nr){_assert(sr.type==="enroll",er,"internal-error");const ir={idToken:sr.credential,phoneEnrollmentInfo:{phoneNumber:nr.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await handleRecaptchaFlow(er,ir,"mfaSmsEnrollment",async(cr,Ar)=>{if(Ar.phoneEnrollmentInfo.captchaResponse===FAKE_TOKEN){_assert((tr==null?void 0:tr.type)===RECAPTCHA_VERIFIER_TYPE,cr,"argument-error");const ur=await injectRecaptchaV2Token(cr,Ar,tr);return startEnrollPhoneMfa(cr,ur)}return startEnrollPhoneMfa(cr,Ar)},"PHONE_PROVIDER").catch(cr=>Promise.reject(cr))).phoneSessionInfo.sessionInfo}else{_assert(sr.type==="signin",er,"internal-error");const ir=((rr=nr.multiFactorHint)===null||rr===void 0?void 0:rr.uid)||nr.multiFactorUid;_assert(ir,er,"missing-multi-factor-info");const or={mfaPendingCredential:sr.credential,mfaEnrollmentId:ir,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await handleRecaptchaFlow(er,or,"mfaSmsSignIn",async(Ar,ur)=>{if(ur.phoneSignInInfo.captchaResponse===FAKE_TOKEN){_assert((tr==null?void 0:tr.type)===RECAPTCHA_VERIFIER_TYPE,Ar,"argument-error");const dr=await injectRecaptchaV2Token(Ar,ur,tr);return startSignInPhoneMfa(Ar,dr)}return startSignInPhoneMfa(Ar,ur)},"PHONE_PROVIDER").catch(Ar=>Promise.reject(Ar))).phoneResponseInfo.sessionInfo}}else{const sr={phoneNumber:nr.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await handleRecaptchaFlow(er,sr,"sendVerificationCode",async(lr,cr)=>{if(cr.captchaResponse===FAKE_TOKEN){_assert((tr==null?void 0:tr.type)===RECAPTCHA_VERIFIER_TYPE,lr,"argument-error");const Ar=await injectRecaptchaV2Token(lr,cr,tr);return sendPhoneVerificationCode(lr,Ar)}return sendPhoneVerificationCode(lr,cr)},"PHONE_PROVIDER").catch(lr=>Promise.reject(lr))).sessionInfo}}finally{tr==null||tr._reset()}}async function injectRecaptchaV2Token(er,_e,tr){_assert(tr.type===RECAPTCHA_VERIFIER_TYPE,er,"argument-error");const rr=await tr.verify();_assert(typeof rr=="string",er,"argument-error");const nr=Object.assign({},_e);if("phoneEnrollmentInfo"in nr){const sr=nr.phoneEnrollmentInfo.phoneNumber,ir=nr.phoneEnrollmentInfo.captchaResponse,or=nr.phoneEnrollmentInfo.clientType,ar=nr.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(nr,{phoneEnrollmentInfo:{phoneNumber:sr,recaptchaToken:rr,captchaResponse:ir,clientType:or,recaptchaVersion:ar}}),nr}else if("phoneSignInInfo"in nr){const sr=nr.phoneSignInInfo.captchaResponse,ir=nr.phoneSignInInfo.clientType,or=nr.phoneSignInInfo.recaptchaVersion;return Object.assign(nr,{phoneSignInInfo:{recaptchaToken:rr,captchaResponse:sr,clientType:ir,recaptchaVersion:or}}),nr}else return Object.assign(nr,{recaptchaToken:rr}),nr}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(er,_e){return _e?_getInstance(_e):(_assert(er._popupRedirectResolver,er,"argument-error"),er._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(_e){super("custom","custom"),this.params=_e}_getIdTokenResponse(_e){return signInWithIdp(_e,this._buildIdpRequest())}_linkToIdToken(_e,tr){return signInWithIdp(_e,this._buildIdpRequest(tr))}_getReauthenticationResolver(_e){return signInWithIdp(_e,this._buildIdpRequest())}_buildIdpRequest(_e){const tr={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _e&&(tr.idToken=_e),tr}}function _signIn(er){return _signInWithCredential(er.auth,new IdpCredential(er),er.bypassAuthState)}function _reauth(er){const{auth:_e,user:tr}=er;return _assert(tr,_e,"internal-error"),_reauthenticate(tr,new IdpCredential(er),er.bypassAuthState)}async function _link(er){const{auth:_e,user:tr}=er;return _assert(tr,_e,"internal-error"),_link$1(tr,new IdpCredential(er),er.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(_e,tr,rr,nr,sr=!1){this.auth=_e,this.resolver=rr,this.user=nr,this.bypassAuthState=sr,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(tr)?tr:[tr]}execute(){return new Promise(async(_e,tr)=>{this.pendingPromise={resolve:_e,reject:tr};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(rr){this.reject(rr)}})}async onAuthEvent(_e){const{urlResponse:tr,sessionId:rr,postBody:nr,tenantId:sr,error:ir,type:or}=_e;if(ir){this.reject(ir);return}const ar={auth:this.auth,requestUri:tr,sessionId:rr,tenantId:sr||void 0,postBody:nr||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(or)(ar))}catch(lr){this.reject(lr)}}onError(_e){this.reject(_e)}getIdpTask(_e){switch(_e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(_e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_e),this.unregisterAndCleanUp()}reject(_e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);class PopupOperation extends AbstractPopupRedirectOperation{constructor(_e,tr,rr,nr,sr){super(_e,tr,nr,sr),this.provider=rr,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const _e=await this.execute();return _assert(_e,this.auth,"internal-error"),_e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const _e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],_e),this.authWindow.associatedEvent=_e,this.resolver._originValidation(this.auth).catch(tr=>{this.reject(tr)}),this.resolver._isIframeWebStorageSupported(this.auth,tr=>{tr||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var _e;return((_e=this.authWindow)===null||_e===void 0?void 0:_e.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const _e=()=>{var tr,rr;if(!((rr=(tr=this.authWindow)===null||tr===void 0?void 0:tr.window)===null||rr===void 0)&&rr.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(_e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};_e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(_e,tr,rr=!1){super(_e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],tr,void 0,rr),this.eventId=null}async execute(){let _e=redirectOutcomeMap.get(this.auth._key());if(!_e){try{const rr=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;_e=()=>Promise.resolve(rr)}catch(tr){_e=()=>Promise.reject(tr)}redirectOutcomeMap.set(this.auth._key(),_e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),_e()}async onAuthEvent(_e){if(_e.type==="signInViaRedirect")return super.onAuthEvent(_e);if(_e.type==="unknown"){this.resolve(null);return}if(_e.eventId){const tr=await this.auth._redirectUserForId(_e.eventId);if(tr)return this.user=tr,super.onAuthEvent(_e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(er,_e){const tr=pendingRedirectKey(_e),rr=resolverPersistence(er);if(!await rr._isAvailable())return!1;const nr=await rr._get(tr)==="true";return await rr._remove(tr),nr}function _overrideRedirectResult(er,_e){redirectOutcomeMap.set(er._key(),_e)}function resolverPersistence(er){return _getInstance(er._redirectPersistence)}function pendingRedirectKey(er){return _persistenceKeyName(PENDING_REDIRECT_KEY,er.config.apiKey,er.name)}async function _getRedirectResult(er,_e,tr=!1){if(_isFirebaseServerApp(er.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(er));const rr=_castAuth(er),nr=_withDefaultResolver(rr,_e),ir=await new RedirectAction(rr,nr,tr).execute();return ir&&!tr&&(delete ir.user._redirectEventId,await rr._persistUserIfCurrent(ir.user),await rr._setRedirectUser(null,_e)),ir}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(_e){this.auth=_e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_e){this.consumers.add(_e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_e)&&(this.sendToConsumer(this.queuedRedirectEvent,_e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_e){this.consumers.delete(_e)}onEvent(_e){if(this.hasEventBeenHandled(_e))return!1;let tr=!1;return this.consumers.forEach(rr=>{this.isEventForConsumer(_e,rr)&&(tr=!0,this.sendToConsumer(_e,rr),this.saveEventToCache(_e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(_e)||(this.hasHandledPotentialRedirect=!0,tr||(this.queuedRedirectEvent=_e,tr=!0)),tr}sendToConsumer(_e,tr){var rr;if(_e.error&&!isNullRedirectEvent(_e)){const nr=((rr=_e.error.code)===null||rr===void 0?void 0:rr.split("auth/")[1])||"internal-error";tr.onError(_createError(this.auth,nr))}else tr.onAuthEvent(_e)}isEventForConsumer(_e,tr){const rr=tr.eventId===null||!!_e.eventId&&_e.eventId===tr.eventId;return tr.filter.includes(_e.type)&&rr}hasEventBeenHandled(_e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(_e))}saveEventToCache(_e){this.cachedEventUids.add(eventUid(_e)),this.lastProcessedEventTime=Date.now()}}function eventUid(er){return[er.type,er.eventId,er.sessionId,er.tenantId].filter(_e=>_e).join("-")}function isNullRedirectEvent({type:er,error:_e}){return er==="unknown"&&(_e==null?void 0:_e.code)==="auth/no-auth-event"}function isRedirectEvent(er){switch(er.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(er);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(er,_e={}){return _performApiRequest(er,"GET","/v1/projects",_e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(er){if(er.config.emulator)return;const{authorizedDomains:_e}=await _getProjectConfig(er);for(const tr of _e)try{if(matchDomain(tr))return}catch{}_fail(er,"unauthorized-domain")}function matchDomain(er){const _e=_getCurrentUrl(),{protocol:tr,hostname:rr}=new URL(_e);if(er.startsWith("chrome-extension://")){const ir=new URL(er);return ir.hostname===""&&rr===""?tr==="chrome-extension:"&&er.replace("chrome-extension://","")===_e.replace("chrome-extension://",""):tr==="chrome-extension:"&&ir.hostname===rr}if(!HTTP_REGEX.test(tr))return!1;if(IP_ADDRESS_REGEX.test(er))return rr===er;const nr=er.replace(/\./g,"\\.");return new RegExp("^(.+\\."+nr+"|"+nr+")$","i").test(rr)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const er=_window().___jsl;if(er!=null&&er.H){for(const _e of Object.keys(er.H))if(er.H[_e].r=er.H[_e].r||[],er.H[_e].L=er.H[_e].L||[],er.H[_e].r=[...er.H[_e].L],er.CP)for(let tr=0;tr<er.CP.length;tr++)er.CP[tr]=null}}function loadGapi(er){return new Promise((_e,tr)=>{var rr,nr,sr;function ir(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{_e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),tr(_createError(er,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((nr=(rr=_window().gapi)===null||rr===void 0?void 0:rr.iframes)===null||nr===void 0)&&nr.Iframe)_e(gapi.iframes.getContext());else if(!((sr=_window().gapi)===null||sr===void 0)&&sr.load)ir();else{const or=_generateCallbackName("iframefcb");return _window()[or]=()=>{gapi.load?ir():tr(_createError(er,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${or}`).catch(ar=>tr(ar))}}).catch(_e=>{throw cachedGApiLoader=null,_e})}let cachedGApiLoader=null;function _loadGapi(er){return cachedGApiLoader=cachedGApiLoader||loadGapi(er),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(er){const _e=er.config;_assert(_e.authDomain,er,"auth-domain-config-required");const tr=_e.emulator?_emulatorUrl(_e,EMULATED_IFRAME_PATH):`https://${er.config.authDomain}/${IFRAME_PATH}`,rr={apiKey:_e.apiKey,appName:er.name,v:SDK_VERSION},nr=EID_FROM_APIHOST.get(er.config.apiHost);nr&&(rr.eid=nr);const sr=er._getFrameworks();return sr.length&&(rr.fw=sr.join(",")),`${tr}?${querystring(rr).slice(1)}`}async function _openIframe(er){const _e=await _loadGapi(er),tr=_window().gapi;return _assert(tr,er,"internal-error"),_e.open({where:document.body,url:getIframeUrl(er),messageHandlersFilter:tr.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},rr=>new Promise(async(nr,sr)=>{await rr.restyle({setHideOnLeave:!1});const ir=_createError(er,"network-request-failed"),or=_window().setTimeout(()=>{sr(ir)},PING_TIMEOUT.get());function ar(){_window().clearTimeout(or),nr(rr)}rr.ping(ar).then(ar,()=>{sr(ir)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(_e){this.window=_e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(er,_e,tr,rr=DEFAULT_WIDTH,nr=DEFAULT_HEIGHT){const sr=Math.max((window.screen.availHeight-nr)/2,0).toString(),ir=Math.max((window.screen.availWidth-rr)/2,0).toString();let or="";const ar=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:rr.toString(),height:nr.toString(),top:sr,left:ir}),lr=getUA().toLowerCase();tr&&(or=_isChromeIOS(lr)?TARGET_BLANK:tr),_isFirefox(lr)&&(_e=_e||FIREFOX_EMPTY_URL,ar.scrollbars="yes");const cr=Object.entries(ar).reduce((ur,[dr,mr])=>`${ur}${dr}=${mr},`,"");if(_isIOSStandalone(lr)&&or!=="_self")return openAsNewWindowIOS(_e||"",or),new AuthPopup(null);const Ar=window.open(_e||"",or,cr);_assert(Ar,er,"popup-blocked");try{Ar.focus()}catch{}return new AuthPopup(Ar)}function openAsNewWindowIOS(er,_e){const tr=document.createElement("a");tr.href=er,tr.target=_e;const rr=document.createEvent("MouseEvent");rr.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),tr.dispatchEvent(rr)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(er,_e,tr,rr,nr,sr){_assert(er.config.authDomain,er,"auth-domain-config-required"),_assert(er.config.apiKey,er,"invalid-api-key");const ir={apiKey:er.config.apiKey,appName:er.name,authType:tr,redirectUrl:rr,v:SDK_VERSION,eventId:nr};if(_e instanceof FederatedAuthProvider){_e.setDefaultLanguage(er.languageCode),ir.providerId=_e.providerId||"",isEmpty$1(_e.getCustomParameters())||(ir.customParameters=JSON.stringify(_e.getCustomParameters()));for(const[cr,Ar]of Object.entries({}))ir[cr]=Ar}if(_e instanceof BaseOAuthProvider){const cr=_e.getScopes().filter(Ar=>Ar!=="");cr.length>0&&(ir.scopes=cr.join(","))}er.tenantId&&(ir.tid=er.tenantId);const or=ir;for(const cr of Object.keys(or))or[cr]===void 0&&delete or[cr];const ar=await er._getAppCheckToken(),lr=ar?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(ar)}`:"";return`${getHandlerBase(er)}?${querystring(or).slice(1)}${lr}`}function getHandlerBase({config:er}){return er.emulator?_emulatorUrl(er,EMULATOR_WIDGET_PATH):`https://${er.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(_e,tr,rr,nr){var sr;debugAssert((sr=this.eventManagers[_e._key()])===null||sr===void 0?void 0:sr.manager,"_initialize() not called before _openPopup()");const ir=await _getRedirectUrl(_e,tr,rr,_getCurrentUrl(),nr);return _open(_e,ir,_generateEventId())}async _openRedirect(_e,tr,rr,nr){await this._originValidation(_e);const sr=await _getRedirectUrl(_e,tr,rr,_getCurrentUrl(),nr);return _setWindowLocation(sr),new Promise(()=>{})}_initialize(_e){const tr=_e._key();if(this.eventManagers[tr]){const{manager:nr,promise:sr}=this.eventManagers[tr];return nr?Promise.resolve(nr):(debugAssert(sr,"If manager is not set, promise should be"),sr)}const rr=this.initAndGetManager(_e);return this.eventManagers[tr]={promise:rr},rr.catch(()=>{delete this.eventManagers[tr]}),rr}async initAndGetManager(_e){const tr=await _openIframe(_e),rr=new AuthEventManager(_e);return tr.register("authEvent",nr=>(_assert(nr==null?void 0:nr.authEvent,_e,"invalid-auth-event"),{status:rr.onEvent(nr.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[_e._key()]={manager:rr},this.iframes[_e._key()]=tr,rr}_isIframeWebStorageSupported(_e,tr){this.iframes[_e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},nr=>{var sr;const ir=(sr=nr==null?void 0:nr[0])===null||sr===void 0?void 0:sr[WEB_STORAGE_SUPPORT_KEY];ir!==void 0&&tr(!!ir),_fail(_e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_e){const tr=_e._key();return this.originValidationPromises[tr]||(this.originValidationPromises[tr]=_validateOrigin(_e)),this.originValidationPromises[tr]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$4="@firebase/auth",version$4="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(_e){this.auth=_e,this.internalListeners=new Map}getUid(){var _e;return this.assertAuthConfigured(),((_e=this.auth.currentUser)===null||_e===void 0?void 0:_e.uid)||null}async getToken(_e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(_e)}:null}addAuthTokenListener(_e){if(this.assertAuthConfigured(),this.internalListeners.has(_e))return;const tr=this.auth.onIdTokenChanged(rr=>{_e((rr==null?void 0:rr.stsTokenManager.accessToken)||null)});this.internalListeners.set(_e,tr),this.updateProactiveRefresh()}removeAuthTokenListener(_e){this.assertAuthConfigured();const tr=this.internalListeners.get(_e);tr&&(this.internalListeners.delete(_e),tr(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(er){switch(er){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(er){_registerComponent(new Component("auth",(_e,{options:tr})=>{const rr=_e.getProvider("app").getImmediate(),nr=_e.getProvider("heartbeat"),sr=_e.getProvider("app-check-internal"),{apiKey:ir,authDomain:or}=rr.options;_assert(ir&&!ir.includes(":"),"invalid-api-key",{appName:rr.name});const ar={apiKey:ir,authDomain:or,clientPlatform:er,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(er)},lr=new AuthImpl(rr,nr,sr,ar);return _initializeAuthInstance(lr,tr),lr},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_e,tr,rr)=>{_e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",_e=>{const tr=_castAuth(_e.getProvider("auth").getImmediate());return(rr=>new AuthInterop(rr))(tr)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$4,version$4,getVersionForPlatform(er)),registerVersion(name$4,version$4,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=er=>async _e=>{const tr=_e&&await _e.getIdTokenResult(),rr=tr&&(new Date().getTime()-Date.parse(tr.issuedAtTime))/1e3;if(rr&&rr>authIdTokenMaxAge)return;const nr=tr==null?void 0:tr.token;lastPostedIdToken!==nr&&(lastPostedIdToken=nr,await fetch(er,{method:nr?"POST":"DELETE",headers:nr?{Authorization:`Bearer ${nr}`}:{}}))};function getAuth(er=getApp()){const _e=_getProvider(er,"auth");if(_e.isInitialized())return _e.getImmediate();const tr=initializeAuth(er,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),rr=getExperimentalSetting("authTokenSyncURL");if(rr&&typeof isSecureContext=="boolean"&&isSecureContext){const sr=new URL(rr,location.origin);if(location.origin===sr.origin){const ir=mintCookieFactory(sr.toString());beforeAuthStateChanged(tr,ir,()=>ir(tr.currentUser)),onIdTokenChanged(tr,or=>ir(or))}}const nr=getDefaultEmulatorHost("auth");return nr&&connectAuthEmulator(tr,`http://${nr}`),tr}function getScriptParentElement(){var er,_e;return(_e=(er=document.getElementsByTagName("head"))===null||er===void 0?void 0:er[0])!==null&&_e!==void 0?_e:document}_setExternalJSProvider({loadJS(er){return new Promise((_e,tr)=>{const rr=document.createElement("script");rr.setAttribute("src",er),rr.onload=_e,rr.onerror=nr=>{const sr=_createError("internal-error");sr.customData=nr,tr(sr)},rr.type="text/javascript",rr.charset="UTF-8",getScriptParentElement().appendChild(rr)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __awaiter$1(er,_e,tr,rr){function nr(sr){return sr instanceof tr?sr:new tr(function(ir){ir(sr)})}return new(tr||(tr=Promise))(function(sr,ir){function or(cr){try{lr(rr.next(cr))}catch(Ar){ir(Ar)}}function ar(cr){try{lr(rr.throw(cr))}catch(Ar){ir(Ar)}}function lr(cr){cr.done?sr(cr.value):nr(cr.value).then(or,ar)}lr((rr=rr.apply(er,[])).next())})}function __generator$1(er,_e){var tr={label:0,sent:function(){if(sr[0]&1)throw sr[1];return sr[1]},trys:[],ops:[]},rr,nr,sr,ir;return ir={next:or(0),throw:or(1),return:or(2)},typeof Symbol=="function"&&(ir[Symbol.iterator]=function(){return this}),ir;function or(lr){return function(cr){return ar([lr,cr])}}function ar(lr){if(rr)throw new TypeError("Generator is already executing.");for(;tr;)try{if(rr=1,nr&&(sr=lr[0]&2?nr.return:lr[0]?nr.throw||((sr=nr.return)&&sr.call(nr),0):nr.next)&&!(sr=sr.call(nr,lr[1])).done)return sr;switch(nr=0,sr&&(lr=[lr[0]&2,sr.value]),lr[0]){case 0:case 1:sr=lr;break;case 4:return tr.label++,{value:lr[1],done:!1};case 5:tr.label++,nr=lr[1],lr=[0];continue;case 7:lr=tr.ops.pop(),tr.trys.pop();continue;default:if(sr=tr.trys,!(sr=sr.length>0&&sr[sr.length-1])&&(lr[0]===6||lr[0]===2)){tr=0;continue}if(lr[0]===3&&(!sr||lr[1]>sr[0]&&lr[1]<sr[3])){tr.label=lr[1];break}if(lr[0]===6&&tr.label<sr[1]){tr.label=sr[1],sr=lr;break}if(sr&&tr.label<sr[2]){tr.label=sr[2],tr.ops.push(lr);break}sr[2]&&tr.ops.pop(),tr.trys.pop();continue}lr=_e.call(er,tr)}catch(cr){lr=[6,cr],nr=0}finally{rr=sr=0}if(lr[0]&5)throw lr[1];return{value:lr[0]?lr[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign$1=function(){return __assign$1=Object.assign||function(_e){for(var tr,rr=1,nr=arguments.length;rr<nr;rr++){tr=arguments[rr];for(var sr in tr)Object.prototype.hasOwnProperty.call(tr,sr)&&(_e[sr]=tr[sr])}return _e},__assign$1.apply(this,arguments)},defaultState=function(er){return{loading:er==null,value:er}},reducer=function(){return function(er,_e){switch(_e.type){case"error":return __assign$1(__assign$1({},er),{error:_e.error,loading:!1,value:void 0});case"reset":return defaultState(_e.defaultValue);case"value":return __assign$1(__assign$1({},er),{error:void 0,loading:!1,value:_e.value});default:return er}}},useLoadingValue=function(er){var _e=er?er():void 0,tr=reactExports.useReducer(reducer(),defaultState(_e)),rr=tr[0],nr=tr[1],sr=reactExports.useCallback(function(){var ar=er?er():void 0;nr({type:"reset",defaultValue:ar})},[er]),ir=reactExports.useCallback(function(ar){nr({type:"error",error:ar})},[]),or=reactExports.useCallback(function(ar){nr({type:"value",value:ar})},[]);return reactExports.useMemo(function(){return{error:rr.error,loading:rr.loading,reset:sr,setError:ir,setValue:or,value:rr.value}},[rr.error,rr.loading,sr,ir,or,rr.value])},useAuthState=function(er,_e){var tr=useLoadingValue(function(){return er.currentUser}),rr=tr.error,nr=tr.loading,sr=tr.setError,ir=tr.setValue,or=tr.value;return reactExports.useEffect(function(){var ar=onAuthStateChanged(er,function(lr){return __awaiter$1(void 0,void 0,void 0,function(){var cr;return __generator$1(this,function(Ar){switch(Ar.label){case 0:return[3,4];case 1:return Ar.trys.push([1,3,,4]),[4,_e.onUserChanged(lr)];case 2:return Ar.sent(),[3,4];case 3:return cr=Ar.sent(),sr(cr),[3,4];case 4:return ir(lr),[2]}})})},sr);return function(){ar()}},[er]),[or,nr,rr]},name$3="firebase",version$3="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$3,version$3,"app");const name$2="@firebase/installations",version$2="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_TIMEOUT_MS=1e4,PACKAGE_VERSION=`w:${version$2}`,INTERNAL_AUTH_VERSION="FIS_v2",INSTALLATIONS_API_URL="https://firebaseinstallations.googleapis.com/v1",TOKEN_EXPIRATION_BUFFER=60*60*1e3,SERVICE="installations",SERVICE_NAME="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_DESCRIPTION_MAP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ERROR_FACTORY$1=new ErrorFactory(SERVICE,SERVICE_NAME,ERROR_DESCRIPTION_MAP);function isServerError(er){return er instanceof FirebaseError&&er.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getInstallationsEndpoint({projectId:er}){return`${INSTALLATIONS_API_URL}/projects/${er}/installations`}function extractAuthTokenInfoFromResponse(er){return{token:er.token,requestStatus:2,expiresIn:getExpiresInFromResponseExpiresIn(er.expiresIn),creationTime:Date.now()}}async function getErrorFromResponse(er,_e){const rr=(await _e.json()).error;return ERROR_FACTORY$1.create("request-failed",{requestName:er,serverCode:rr.code,serverMessage:rr.message,serverStatus:rr.status})}function getHeaders$1({apiKey:er}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":er})}function getHeadersWithAuth(er,{refreshToken:_e}){const tr=getHeaders$1(er);return tr.append("Authorization",getAuthorizationHeader(_e)),tr}async function retryIfServerError(er){const _e=await er();return _e.status>=500&&_e.status<600?er():_e}function getExpiresInFromResponseExpiresIn(er){return Number(er.replace("s","000"))}function getAuthorizationHeader(er){return`${INTERNAL_AUTH_VERSION} ${er}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function createInstallationRequest({appConfig:er,heartbeatServiceProvider:_e},{fid:tr}){const rr=getInstallationsEndpoint(er),nr=getHeaders$1(er),sr=_e.getImmediate({optional:!0});if(sr){const lr=await sr.getHeartbeatsHeader();lr&&nr.append("x-firebase-client",lr)}const ir={fid:tr,authVersion:INTERNAL_AUTH_VERSION,appId:er.appId,sdkVersion:PACKAGE_VERSION},or={method:"POST",headers:nr,body:JSON.stringify(ir)},ar=await retryIfServerError(()=>fetch(rr,or));if(ar.ok){const lr=await ar.json();return{fid:lr.fid||tr,registrationStatus:2,refreshToken:lr.refreshToken,authToken:extractAuthTokenInfoFromResponse(lr.authToken)}}else throw await getErrorFromResponse("Create Installation",ar)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sleep(er){return new Promise(_e=>{setTimeout(_e,er)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bufferToBase64UrlSafe(er){return btoa(String.fromCharCode(...er)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VALID_FID_PATTERN=/^[cdef][\w-]{21}$/,INVALID_FID="";function generateFid(){try{const er=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(er),er[0]=112+er[0]%16;const tr=encode(er);return VALID_FID_PATTERN.test(tr)?tr:INVALID_FID}catch{return INVALID_FID}}function encode(er){return bufferToBase64UrlSafe(er).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getKey(er){return`${er.appName}!${er.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fidChangeCallbacks=new Map;function fidChanged(er,_e){const tr=getKey(er);callFidChangeCallbacks(tr,_e),broadcastFidChange(tr,_e)}function callFidChangeCallbacks(er,_e){const tr=fidChangeCallbacks.get(er);if(tr)for(const rr of tr)rr(_e)}function broadcastFidChange(er,_e){const tr=getBroadcastChannel();tr&&tr.postMessage({key:er,fid:_e}),closeBroadcastChannel()}let broadcastChannel=null;function getBroadcastChannel(){return!broadcastChannel&&"BroadcastChannel"in self&&(broadcastChannel=new BroadcastChannel("[Firebase] FID Change"),broadcastChannel.onmessage=er=>{callFidChangeCallbacks(er.data.key,er.data.fid)}),broadcastChannel}function closeBroadcastChannel(){fidChangeCallbacks.size===0&&broadcastChannel&&(broadcastChannel.close(),broadcastChannel=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DATABASE_NAME="firebase-installations-database",DATABASE_VERSION=1,OBJECT_STORE_NAME="firebase-installations-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DATABASE_NAME,DATABASE_VERSION,{upgrade:(er,_e)=>{switch(_e){case 0:er.createObjectStore(OBJECT_STORE_NAME)}}})),dbPromise}async function set(er,_e){const tr=getKey(er),nr=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite"),sr=nr.objectStore(OBJECT_STORE_NAME),ir=await sr.get(tr);return await sr.put(_e,tr),await nr.done,(!ir||ir.fid!==_e.fid)&&fidChanged(er,_e.fid),_e}async function remove(er){const _e=getKey(er),rr=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite");await rr.objectStore(OBJECT_STORE_NAME).delete(_e),await rr.done}async function update(er,_e){const tr=getKey(er),nr=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite"),sr=nr.objectStore(OBJECT_STORE_NAME),ir=await sr.get(tr),or=_e(ir);return or===void 0?await sr.delete(tr):await sr.put(or,tr),await nr.done,or&&(!ir||ir.fid!==or.fid)&&fidChanged(er,or.fid),or}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getInstallationEntry(er){let _e;const tr=await update(er.appConfig,rr=>{const nr=updateOrCreateInstallationEntry(rr),sr=triggerRegistrationIfNecessary(er,nr);return _e=sr.registrationPromise,sr.installationEntry});return tr.fid===INVALID_FID?{installationEntry:await _e}:{installationEntry:tr,registrationPromise:_e}}function updateOrCreateInstallationEntry(er){const _e=er||{fid:generateFid(),registrationStatus:0};return clearTimedOutRequest(_e)}function triggerRegistrationIfNecessary(er,_e){if(_e.registrationStatus===0){if(!navigator.onLine){const nr=Promise.reject(ERROR_FACTORY$1.create("app-offline"));return{installationEntry:_e,registrationPromise:nr}}const tr={fid:_e.fid,registrationStatus:1,registrationTime:Date.now()},rr=registerInstallation(er,tr);return{installationEntry:tr,registrationPromise:rr}}else return _e.registrationStatus===1?{installationEntry:_e,registrationPromise:waitUntilFidRegistration(er)}:{installationEntry:_e}}async function registerInstallation(er,_e){try{const tr=await createInstallationRequest(er,_e);return set(er.appConfig,tr)}catch(tr){throw isServerError(tr)&&tr.customData.serverCode===409?await remove(er.appConfig):await set(er.appConfig,{fid:_e.fid,registrationStatus:0}),tr}}async function waitUntilFidRegistration(er){let _e=await updateInstallationRequest(er.appConfig);for(;_e.registrationStatus===1;)await sleep(100),_e=await updateInstallationRequest(er.appConfig);if(_e.registrationStatus===0){const{installationEntry:tr,registrationPromise:rr}=await getInstallationEntry(er);return rr||tr}return _e}function updateInstallationRequest(er){return update(er,_e=>{if(!_e)throw ERROR_FACTORY$1.create("installation-not-found");return clearTimedOutRequest(_e)})}function clearTimedOutRequest(er){return hasInstallationRequestTimedOut(er)?{fid:er.fid,registrationStatus:0}:er}function hasInstallationRequestTimedOut(er){return er.registrationStatus===1&&er.registrationTime+PENDING_TIMEOUT_MS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function generateAuthTokenRequest({appConfig:er,heartbeatServiceProvider:_e},tr){const rr=getGenerateAuthTokenEndpoint(er,tr),nr=getHeadersWithAuth(er,tr),sr=_e.getImmediate({optional:!0});if(sr){const lr=await sr.getHeartbeatsHeader();lr&&nr.append("x-firebase-client",lr)}const ir={installation:{sdkVersion:PACKAGE_VERSION,appId:er.appId}},or={method:"POST",headers:nr,body:JSON.stringify(ir)},ar=await retryIfServerError(()=>fetch(rr,or));if(ar.ok){const lr=await ar.json();return extractAuthTokenInfoFromResponse(lr)}else throw await getErrorFromResponse("Generate Auth Token",ar)}function getGenerateAuthTokenEndpoint(er,{fid:_e}){return`${getInstallationsEndpoint(er)}/${_e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function refreshAuthToken(er,_e=!1){let tr;const rr=await update(er.appConfig,sr=>{if(!isEntryRegistered(sr))throw ERROR_FACTORY$1.create("not-registered");const ir=sr.authToken;if(!_e&&isAuthTokenValid(ir))return sr;if(ir.requestStatus===1)return tr=waitUntilAuthTokenRequest(er,_e),sr;{if(!navigator.onLine)throw ERROR_FACTORY$1.create("app-offline");const or=makeAuthTokenRequestInProgressEntry(sr);return tr=fetchAuthTokenFromServer(er,or),or}});return tr?await tr:rr.authToken}async function waitUntilAuthTokenRequest(er,_e){let tr=await updateAuthTokenRequest(er.appConfig);for(;tr.authToken.requestStatus===1;)await sleep(100),tr=await updateAuthTokenRequest(er.appConfig);const rr=tr.authToken;return rr.requestStatus===0?refreshAuthToken(er,_e):rr}function updateAuthTokenRequest(er){return update(er,_e=>{if(!isEntryRegistered(_e))throw ERROR_FACTORY$1.create("not-registered");const tr=_e.authToken;return hasAuthTokenRequestTimedOut(tr)?Object.assign(Object.assign({},_e),{authToken:{requestStatus:0}}):_e})}async function fetchAuthTokenFromServer(er,_e){try{const tr=await generateAuthTokenRequest(er,_e),rr=Object.assign(Object.assign({},_e),{authToken:tr});return await set(er.appConfig,rr),tr}catch(tr){if(isServerError(tr)&&(tr.customData.serverCode===401||tr.customData.serverCode===404))await remove(er.appConfig);else{const rr=Object.assign(Object.assign({},_e),{authToken:{requestStatus:0}});await set(er.appConfig,rr)}throw tr}}function isEntryRegistered(er){return er!==void 0&&er.registrationStatus===2}function isAuthTokenValid(er){return er.requestStatus===2&&!isAuthTokenExpired(er)}function isAuthTokenExpired(er){const _e=Date.now();return _e<er.creationTime||er.creationTime+er.expiresIn<_e+TOKEN_EXPIRATION_BUFFER}function makeAuthTokenRequestInProgressEntry(er){const _e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},er),{authToken:_e})}function hasAuthTokenRequestTimedOut(er){return er.requestStatus===1&&er.requestTime+PENDING_TIMEOUT_MS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getId(er){const _e=er,{installationEntry:tr,registrationPromise:rr}=await getInstallationEntry(_e);return rr?rr.catch(console.error):refreshAuthToken(_e).catch(console.error),tr.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getToken(er,_e=!1){const tr=er;return await completeInstallationRegistration(tr),(await refreshAuthToken(tr,_e)).token}async function completeInstallationRegistration(er){const{registrationPromise:_e}=await getInstallationEntry(er);_e&&await _e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function extractAppConfig(er){if(!er||!er.options)throw getMissingValueError("App Configuration");if(!er.name)throw getMissingValueError("App Name");const _e=["projectId","apiKey","appId"];for(const tr of _e)if(!er.options[tr])throw getMissingValueError(tr);return{appName:er.name,projectId:er.options.projectId,apiKey:er.options.apiKey,appId:er.options.appId}}function getMissingValueError(er){return ERROR_FACTORY$1.create("missing-app-config-values",{valueName:er})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INSTALLATIONS_NAME="installations",INSTALLATIONS_NAME_INTERNAL="installations-internal",publicFactory=er=>{const _e=er.getProvider("app").getImmediate(),tr=extractAppConfig(_e),rr=_getProvider(_e,"heartbeat");return{app:_e,appConfig:tr,heartbeatServiceProvider:rr,_delete:()=>Promise.resolve()}},internalFactory=er=>{const _e=er.getProvider("app").getImmediate(),tr=_getProvider(_e,INSTALLATIONS_NAME).getImmediate();return{getId:()=>getId(tr),getToken:nr=>getToken(tr,nr)}};function registerInstallations(){_registerComponent(new Component(INSTALLATIONS_NAME,publicFactory,"PUBLIC")),_registerComponent(new Component(INSTALLATIONS_NAME_INTERNAL,internalFactory,"PRIVATE"))}registerInstallations();registerVersion(name$2,version$2);registerVersion(name$2,version$2,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ANALYTICS_TYPE="analytics",GA_FID_KEY="firebase_id",ORIGIN_KEY="origin",FETCH_TIMEOUT_MILLIS=60*1e3,DYNAMIC_CONFIG_URL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",GTAG_URL="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger$1("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ERROR_FACTORY=new ErrorFactory("analytics","Analytics",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createGtagTrustedTypesScriptURL(er){if(!er.startsWith(GTAG_URL)){const _e=ERROR_FACTORY.create("invalid-gtag-resource",{gtagURL:er});return logger.warn(_e.message),""}return er}function promiseAllSettled(er){return Promise.all(er.map(_e=>_e.catch(tr=>tr)))}function createTrustedTypesPolicy(er,_e){let tr;return window.trustedTypes&&(tr=window.trustedTypes.createPolicy(er,_e)),tr}function insertScriptTag(er,_e){const tr=createTrustedTypesPolicy("firebase-js-sdk-policy",{createScriptURL:createGtagTrustedTypesScriptURL}),rr=document.createElement("script"),nr=`${GTAG_URL}?l=${er}&id=${_e}`;rr.src=tr?tr==null?void 0:tr.createScriptURL(nr):nr,rr.async=!0,document.head.appendChild(rr)}function getOrCreateDataLayer(er){let _e=[];return Array.isArray(window[er])?_e=window[er]:window[er]=_e,_e}async function gtagOnConfig(er,_e,tr,rr,nr,sr){const ir=rr[nr];try{if(ir)await _e[ir];else{const ar=(await promiseAllSettled(tr)).find(lr=>lr.measurementId===nr);ar&&await _e[ar.appId]}}catch(or){logger.error(or)}er("config",nr,sr)}async function gtagOnEvent(er,_e,tr,rr,nr){try{let sr=[];if(nr&&nr.send_to){let ir=nr.send_to;Array.isArray(ir)||(ir=[ir]);const or=await promiseAllSettled(tr);for(const ar of ir){const lr=or.find(Ar=>Ar.measurementId===ar),cr=lr&&_e[lr.appId];if(cr)sr.push(cr);else{sr=[];break}}}sr.length===0&&(sr=Object.values(_e)),await Promise.all(sr),er("event",rr,nr||{})}catch(sr){logger.error(sr)}}function wrapGtag(er,_e,tr,rr){async function nr(sr,...ir){try{if(sr==="event"){const[or,ar]=ir;await gtagOnEvent(er,_e,tr,or,ar)}else if(sr==="config"){const[or,ar]=ir;await gtagOnConfig(er,_e,tr,rr,or,ar)}else if(sr==="consent"){const[or,ar]=ir;er("consent",or,ar)}else if(sr==="get"){const[or,ar,lr]=ir;er("get",or,ar,lr)}else if(sr==="set"){const[or]=ir;er("set",or)}else er(sr,...ir)}catch(or){logger.error(or)}}return nr}function wrapOrCreateGtag(er,_e,tr,rr,nr){let sr=function(...ir){window[rr].push(arguments)};return window[nr]&&typeof window[nr]=="function"&&(sr=window[nr]),window[nr]=wrapGtag(sr,er,_e,tr),{gtagCore:sr,wrappedGtag:window[nr]}}function findGtagScriptOnPage(er){const _e=window.document.getElementsByTagName("script");for(const tr of Object.values(_e))if(tr.src&&tr.src.includes(GTAG_URL)&&tr.src.includes(er))return tr;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LONG_RETRY_FACTOR=30,BASE_INTERVAL_MILLIS=1e3;class RetryData{constructor(_e={},tr=BASE_INTERVAL_MILLIS){this.throttleMetadata=_e,this.intervalMillis=tr}getThrottleMetadata(_e){return this.throttleMetadata[_e]}setThrottleMetadata(_e,tr){this.throttleMetadata[_e]=tr}deleteThrottleMetadata(_e){delete this.throttleMetadata[_e]}}const defaultRetryData=new RetryData;function getHeaders(er){return new Headers({Accept:"application/json","x-goog-api-key":er})}async function fetchDynamicConfig(er){var _e;const{appId:tr,apiKey:rr}=er,nr={method:"GET",headers:getHeaders(rr)},sr=DYNAMIC_CONFIG_URL.replace("{app-id}",tr),ir=await fetch(sr,nr);if(ir.status!==200&&ir.status!==304){let or="";try{const ar=await ir.json();!((_e=ar.error)===null||_e===void 0)&&_e.message&&(or=ar.error.message)}catch{}throw ERROR_FACTORY.create("config-fetch-failed",{httpStatus:ir.status,responseMessage:or})}return ir.json()}async function fetchDynamicConfigWithRetry(er,_e=defaultRetryData,tr){const{appId:rr,apiKey:nr,measurementId:sr}=er.options;if(!rr)throw ERROR_FACTORY.create("no-app-id");if(!nr){if(sr)return{measurementId:sr,appId:rr};throw ERROR_FACTORY.create("no-api-key")}const ir=_e.getThrottleMetadata(rr)||{backoffCount:0,throttleEndTimeMillis:Date.now()},or=new AnalyticsAbortSignal;return setTimeout(async()=>{or.abort()},FETCH_TIMEOUT_MILLIS),attemptFetchDynamicConfigWithRetry({appId:rr,apiKey:nr,measurementId:sr},ir,or,_e)}async function attemptFetchDynamicConfigWithRetry(er,{throttleEndTimeMillis:_e,backoffCount:tr},rr,nr=defaultRetryData){var sr;const{appId:ir,measurementId:or}=er;try{await setAbortableTimeout(rr,_e)}catch(ar){if(or)return logger.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${or} provided in the "measurementId" field in the local Firebase config. [${ar==null?void 0:ar.message}]`),{appId:ir,measurementId:or};throw ar}try{const ar=await fetchDynamicConfig(er);return nr.deleteThrottleMetadata(ir),ar}catch(ar){const lr=ar;if(!isRetriableError(lr)){if(nr.deleteThrottleMetadata(ir),or)return logger.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${or} provided in the "measurementId" field in the local Firebase config. [${lr==null?void 0:lr.message}]`),{appId:ir,measurementId:or};throw ar}const cr=Number((sr=lr==null?void 0:lr.customData)===null||sr===void 0?void 0:sr.httpStatus)===503?calculateBackoffMillis(tr,nr.intervalMillis,LONG_RETRY_FACTOR):calculateBackoffMillis(tr,nr.intervalMillis),Ar={throttleEndTimeMillis:Date.now()+cr,backoffCount:tr+1};return nr.setThrottleMetadata(ir,Ar),logger.debug(`Calling attemptFetch again in ${cr} millis`),attemptFetchDynamicConfigWithRetry(er,Ar,rr,nr)}}function setAbortableTimeout(er,_e){return new Promise((tr,rr)=>{const nr=Math.max(_e-Date.now(),0),sr=setTimeout(tr,nr);er.addEventListener(()=>{clearTimeout(sr),rr(ERROR_FACTORY.create("fetch-throttle",{throttleEndTimeMillis:_e}))})})}function isRetriableError(er){if(!(er instanceof FirebaseError)||!er.customData)return!1;const _e=Number(er.customData.httpStatus);return _e===429||_e===500||_e===503||_e===504}class AnalyticsAbortSignal{constructor(){this.listeners=[]}addEventListener(_e){this.listeners.push(_e)}abort(){this.listeners.forEach(_e=>_e())}}async function logEvent$1(er,_e,tr,rr,nr){if(nr&&nr.global){er("event",tr,rr);return}else{const sr=await _e,ir=Object.assign(Object.assign({},rr),{send_to:sr});er("event",tr,ir)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function validateIndexedDB(){if(isIndexedDBAvailable())try{await validateIndexedDBOpenable()}catch(er){return logger.warn(ERROR_FACTORY.create("indexeddb-unavailable",{errorInfo:er==null?void 0:er.toString()}).message),!1}else return logger.warn(ERROR_FACTORY.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function _initializeAnalytics(er,_e,tr,rr,nr,sr,ir){var or;const ar=fetchDynamicConfigWithRetry(er);ar.then(dr=>{tr[dr.measurementId]=dr.appId,er.options.measurementId&&dr.measurementId!==er.options.measurementId&&logger.warn(`The measurement ID in the local Firebase config (${er.options.measurementId}) does not match the measurement ID fetched from the server (${dr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(dr=>logger.error(dr)),_e.push(ar);const lr=validateIndexedDB().then(dr=>{if(dr)return rr.getId()}),[cr,Ar]=await Promise.all([ar,lr]);findGtagScriptOnPage(sr)||insertScriptTag(sr,cr.measurementId),nr("js",new Date);const ur=(or=ir==null?void 0:ir.config)!==null&&or!==void 0?or:{};return ur[ORIGIN_KEY]="firebase",ur.update=!0,Ar!=null&&(ur[GA_FID_KEY]=Ar),nr("config",cr.measurementId,ur),cr.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AnalyticsService{constructor(_e){this.app=_e}_delete(){return delete initializationPromisesMap[this.app.options.appId],Promise.resolve()}}let initializationPromisesMap={},dynamicConfigPromisesList=[];const measurementIdToAppId={};let dataLayerName="dataLayer",gtagName="gtag",gtagCoreFunction,wrappedGtagFunction,globalInitDone=!1;function warnOnBrowserContextMismatch(){const er=[];if(isBrowserExtension()&&er.push("This is a browser extension environment."),areCookiesEnabled()||er.push("Cookies are not available."),er.length>0){const _e=er.map((rr,nr)=>`(${nr+1}) ${rr}`).join(" "),tr=ERROR_FACTORY.create("invalid-analytics-context",{errorInfo:_e});logger.warn(tr.message)}}function factory$1(er,_e,tr){warnOnBrowserContextMismatch();const rr=er.options.appId;if(!rr)throw ERROR_FACTORY.create("no-app-id");if(!er.options.apiKey)if(er.options.measurementId)logger.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${er.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ERROR_FACTORY.create("no-api-key");if(initializationPromisesMap[rr]!=null)throw ERROR_FACTORY.create("already-exists",{id:rr});if(!globalInitDone){getOrCreateDataLayer(dataLayerName);const{wrappedGtag:sr,gtagCore:ir}=wrapOrCreateGtag(initializationPromisesMap,dynamicConfigPromisesList,measurementIdToAppId,dataLayerName,gtagName);wrappedGtagFunction=sr,gtagCoreFunction=ir,globalInitDone=!0}return initializationPromisesMap[rr]=_initializeAnalytics(er,dynamicConfigPromisesList,measurementIdToAppId,_e,gtagCoreFunction,dataLayerName,tr),new AnalyticsService(er)}function getAnalytics(er=getApp()){er=getModularInstance(er);const _e=_getProvider(er,ANALYTICS_TYPE);return _e.isInitialized()?_e.getImmediate():initializeAnalytics(er)}function initializeAnalytics(er,_e={}){const tr=_getProvider(er,ANALYTICS_TYPE);if(tr.isInitialized()){const nr=tr.getImmediate();if(deepEqual(_e,tr.getOptions()))return nr;throw ERROR_FACTORY.create("already-initialized")}return tr.initialize({options:_e})}function logEvent(er,_e,tr,rr){er=getModularInstance(er),logEvent$1(wrappedGtagFunction,initializationPromisesMap[er.app.options.appId],_e,tr,rr).catch(nr=>logger.error(nr))}const name$1="@firebase/analytics",version$1="0.10.16";function registerAnalytics(){_registerComponent(new Component(ANALYTICS_TYPE,(_e,{options:tr})=>{const rr=_e.getProvider("app").getImmediate(),nr=_e.getProvider("installations-internal").getImmediate();return factory$1(rr,nr,tr)},"PUBLIC")),_registerComponent(new Component("analytics-internal",er,"PRIVATE")),registerVersion(name$1,version$1),registerVersion(name$1,version$1,"esm2017");function er(_e){try{const tr=_e.getProvider(ANALYTICS_TYPE).getImmediate();return{logEvent:(rr,nr,sr)=>logEvent(tr,rr,nr,sr)}}catch(tr){throw ERROR_FACTORY.create("interop-component-reg-failed",{reason:tr})}}}registerAnalytics();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var er;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function _e(_r,vr){function br(){}br.prototype=vr.prototype,_r.D=vr.prototype,_r.prototype=new br,_r.prototype.constructor=_r,_r.C=function(Pr,Er,Rr){for(var Ir=Array(arguments.length-2),Qr=2;Qr<arguments.length;Qr++)Ir[Qr-2]=arguments[Qr];return vr.prototype[Er].apply(Pr,Ir)}}function tr(){this.blockSize=-1}function rr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}_e(rr,tr),rr.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function nr(_r,vr,br){br||(br=0);var Pr=Array(16);if(typeof vr=="string")for(var Er=0;16>Er;++Er)Pr[Er]=vr.charCodeAt(br++)|vr.charCodeAt(br++)<<8|vr.charCodeAt(br++)<<16|vr.charCodeAt(br++)<<24;else for(Er=0;16>Er;++Er)Pr[Er]=vr[br++]|vr[br++]<<8|vr[br++]<<16|vr[br++]<<24;vr=_r.g[0],br=_r.g[1],Er=_r.g[2];var Rr=_r.g[3],Ir=vr+(Rr^br&(Er^Rr))+Pr[0]+3614090360&4294967295;vr=br+(Ir<<7&4294967295|Ir>>>25),Ir=Rr+(Er^vr&(br^Er))+Pr[1]+3905402710&4294967295,Rr=vr+(Ir<<12&4294967295|Ir>>>20),Ir=Er+(br^Rr&(vr^br))+Pr[2]+606105819&4294967295,Er=Rr+(Ir<<17&4294967295|Ir>>>15),Ir=br+(vr^Er&(Rr^vr))+Pr[3]+3250441966&4294967295,br=Er+(Ir<<22&4294967295|Ir>>>10),Ir=vr+(Rr^br&(Er^Rr))+Pr[4]+4118548399&4294967295,vr=br+(Ir<<7&4294967295|Ir>>>25),Ir=Rr+(Er^vr&(br^Er))+Pr[5]+1200080426&4294967295,Rr=vr+(Ir<<12&4294967295|Ir>>>20),Ir=Er+(br^Rr&(vr^br))+Pr[6]+2821735955&4294967295,Er=Rr+(Ir<<17&4294967295|Ir>>>15),Ir=br+(vr^Er&(Rr^vr))+Pr[7]+4249261313&4294967295,br=Er+(Ir<<22&4294967295|Ir>>>10),Ir=vr+(Rr^br&(Er^Rr))+Pr[8]+1770035416&4294967295,vr=br+(Ir<<7&4294967295|Ir>>>25),Ir=Rr+(Er^vr&(br^Er))+Pr[9]+2336552879&4294967295,Rr=vr+(Ir<<12&4294967295|Ir>>>20),Ir=Er+(br^Rr&(vr^br))+Pr[10]+4294925233&4294967295,Er=Rr+(Ir<<17&4294967295|Ir>>>15),Ir=br+(vr^Er&(Rr^vr))+Pr[11]+2304563134&4294967295,br=Er+(Ir<<22&4294967295|Ir>>>10),Ir=vr+(Rr^br&(Er^Rr))+Pr[12]+1804603682&4294967295,vr=br+(Ir<<7&4294967295|Ir>>>25),Ir=Rr+(Er^vr&(br^Er))+Pr[13]+4254626195&4294967295,Rr=vr+(Ir<<12&4294967295|Ir>>>20),Ir=Er+(br^Rr&(vr^br))+Pr[14]+2792965006&4294967295,Er=Rr+(Ir<<17&4294967295|Ir>>>15),Ir=br+(vr^Er&(Rr^vr))+Pr[15]+1236535329&4294967295,br=Er+(Ir<<22&4294967295|Ir>>>10),Ir=vr+(Er^Rr&(br^Er))+Pr[1]+4129170786&4294967295,vr=br+(Ir<<5&4294967295|Ir>>>27),Ir=Rr+(br^Er&(vr^br))+Pr[6]+3225465664&4294967295,Rr=vr+(Ir<<9&4294967295|Ir>>>23),Ir=Er+(vr^br&(Rr^vr))+Pr[11]+643717713&4294967295,Er=Rr+(Ir<<14&4294967295|Ir>>>18),Ir=br+(Rr^vr&(Er^Rr))+Pr[0]+3921069994&4294967295,br=Er+(Ir<<20&4294967295|Ir>>>12),Ir=vr+(Er^Rr&(br^Er))+Pr[5]+3593408605&4294967295,vr=br+(Ir<<5&4294967295|Ir>>>27),Ir=Rr+(br^Er&(vr^br))+Pr[10]+38016083&4294967295,Rr=vr+(Ir<<9&4294967295|Ir>>>23),Ir=Er+(vr^br&(Rr^vr))+Pr[15]+3634488961&4294967295,Er=Rr+(Ir<<14&4294967295|Ir>>>18),Ir=br+(Rr^vr&(Er^Rr))+Pr[4]+3889429448&4294967295,br=Er+(Ir<<20&4294967295|Ir>>>12),Ir=vr+(Er^Rr&(br^Er))+Pr[9]+568446438&4294967295,vr=br+(Ir<<5&4294967295|Ir>>>27),Ir=Rr+(br^Er&(vr^br))+Pr[14]+3275163606&4294967295,Rr=vr+(Ir<<9&4294967295|Ir>>>23),Ir=Er+(vr^br&(Rr^vr))+Pr[3]+4107603335&4294967295,Er=Rr+(Ir<<14&4294967295|Ir>>>18),Ir=br+(Rr^vr&(Er^Rr))+Pr[8]+1163531501&4294967295,br=Er+(Ir<<20&4294967295|Ir>>>12),Ir=vr+(Er^Rr&(br^Er))+Pr[13]+2850285829&4294967295,vr=br+(Ir<<5&4294967295|Ir>>>27),Ir=Rr+(br^Er&(vr^br))+Pr[2]+4243563512&4294967295,Rr=vr+(Ir<<9&4294967295|Ir>>>23),Ir=Er+(vr^br&(Rr^vr))+Pr[7]+1735328473&4294967295,Er=Rr+(Ir<<14&4294967295|Ir>>>18),Ir=br+(Rr^vr&(Er^Rr))+Pr[12]+2368359562&4294967295,br=Er+(Ir<<20&4294967295|Ir>>>12),Ir=vr+(br^Er^Rr)+Pr[5]+4294588738&4294967295,vr=br+(Ir<<4&4294967295|Ir>>>28),Ir=Rr+(vr^br^Er)+Pr[8]+2272392833&4294967295,Rr=vr+(Ir<<11&4294967295|Ir>>>21),Ir=Er+(Rr^vr^br)+Pr[11]+1839030562&4294967295,Er=Rr+(Ir<<16&4294967295|Ir>>>16),Ir=br+(Er^Rr^vr)+Pr[14]+4259657740&4294967295,br=Er+(Ir<<23&4294967295|Ir>>>9),Ir=vr+(br^Er^Rr)+Pr[1]+2763975236&4294967295,vr=br+(Ir<<4&4294967295|Ir>>>28),Ir=Rr+(vr^br^Er)+Pr[4]+1272893353&4294967295,Rr=vr+(Ir<<11&4294967295|Ir>>>21),Ir=Er+(Rr^vr^br)+Pr[7]+4139469664&4294967295,Er=Rr+(Ir<<16&4294967295|Ir>>>16),Ir=br+(Er^Rr^vr)+Pr[10]+3200236656&4294967295,br=Er+(Ir<<23&4294967295|Ir>>>9),Ir=vr+(br^Er^Rr)+Pr[13]+681279174&4294967295,vr=br+(Ir<<4&4294967295|Ir>>>28),Ir=Rr+(vr^br^Er)+Pr[0]+3936430074&4294967295,Rr=vr+(Ir<<11&4294967295|Ir>>>21),Ir=Er+(Rr^vr^br)+Pr[3]+3572445317&4294967295,Er=Rr+(Ir<<16&4294967295|Ir>>>16),Ir=br+(Er^Rr^vr)+Pr[6]+76029189&4294967295,br=Er+(Ir<<23&4294967295|Ir>>>9),Ir=vr+(br^Er^Rr)+Pr[9]+3654602809&4294967295,vr=br+(Ir<<4&4294967295|Ir>>>28),Ir=Rr+(vr^br^Er)+Pr[12]+3873151461&4294967295,Rr=vr+(Ir<<11&4294967295|Ir>>>21),Ir=Er+(Rr^vr^br)+Pr[15]+530742520&4294967295,Er=Rr+(Ir<<16&4294967295|Ir>>>16),Ir=br+(Er^Rr^vr)+Pr[2]+3299628645&4294967295,br=Er+(Ir<<23&4294967295|Ir>>>9),Ir=vr+(Er^(br|~Rr))+Pr[0]+4096336452&4294967295,vr=br+(Ir<<6&4294967295|Ir>>>26),Ir=Rr+(br^(vr|~Er))+Pr[7]+1126891415&4294967295,Rr=vr+(Ir<<10&4294967295|Ir>>>22),Ir=Er+(vr^(Rr|~br))+Pr[14]+2878612391&4294967295,Er=Rr+(Ir<<15&4294967295|Ir>>>17),Ir=br+(Rr^(Er|~vr))+Pr[5]+4237533241&4294967295,br=Er+(Ir<<21&4294967295|Ir>>>11),Ir=vr+(Er^(br|~Rr))+Pr[12]+1700485571&4294967295,vr=br+(Ir<<6&4294967295|Ir>>>26),Ir=Rr+(br^(vr|~Er))+Pr[3]+2399980690&4294967295,Rr=vr+(Ir<<10&4294967295|Ir>>>22),Ir=Er+(vr^(Rr|~br))+Pr[10]+4293915773&4294967295,Er=Rr+(Ir<<15&4294967295|Ir>>>17),Ir=br+(Rr^(Er|~vr))+Pr[1]+2240044497&4294967295,br=Er+(Ir<<21&4294967295|Ir>>>11),Ir=vr+(Er^(br|~Rr))+Pr[8]+1873313359&4294967295,vr=br+(Ir<<6&4294967295|Ir>>>26),Ir=Rr+(br^(vr|~Er))+Pr[15]+4264355552&4294967295,Rr=vr+(Ir<<10&4294967295|Ir>>>22),Ir=Er+(vr^(Rr|~br))+Pr[6]+2734768916&4294967295,Er=Rr+(Ir<<15&4294967295|Ir>>>17),Ir=br+(Rr^(Er|~vr))+Pr[13]+1309151649&4294967295,br=Er+(Ir<<21&4294967295|Ir>>>11),Ir=vr+(Er^(br|~Rr))+Pr[4]+4149444226&4294967295,vr=br+(Ir<<6&4294967295|Ir>>>26),Ir=Rr+(br^(vr|~Er))+Pr[11]+3174756917&4294967295,Rr=vr+(Ir<<10&4294967295|Ir>>>22),Ir=Er+(vr^(Rr|~br))+Pr[2]+718787259&4294967295,Er=Rr+(Ir<<15&4294967295|Ir>>>17),Ir=br+(Rr^(Er|~vr))+Pr[9]+3951481745&4294967295,_r.g[0]=_r.g[0]+vr&4294967295,_r.g[1]=_r.g[1]+(Er+(Ir<<21&4294967295|Ir>>>11))&4294967295,_r.g[2]=_r.g[2]+Er&4294967295,_r.g[3]=_r.g[3]+Rr&4294967295}rr.prototype.u=function(_r,vr){vr===void 0&&(vr=_r.length);for(var br=vr-this.blockSize,Pr=this.B,Er=this.h,Rr=0;Rr<vr;){if(Er==0)for(;Rr<=br;)nr(this,_r,Rr),Rr+=this.blockSize;if(typeof _r=="string"){for(;Rr<vr;)if(Pr[Er++]=_r.charCodeAt(Rr++),Er==this.blockSize){nr(this,Pr),Er=0;break}}else for(;Rr<vr;)if(Pr[Er++]=_r[Rr++],Er==this.blockSize){nr(this,Pr),Er=0;break}}this.h=Er,this.o+=vr},rr.prototype.v=function(){var _r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_r[0]=128;for(var vr=1;vr<_r.length-8;++vr)_r[vr]=0;var br=8*this.o;for(vr=_r.length-8;vr<_r.length;++vr)_r[vr]=br&255,br/=256;for(this.u(_r),_r=Array(16),vr=br=0;4>vr;++vr)for(var Pr=0;32>Pr;Pr+=8)_r[br++]=this.g[vr]>>>Pr&255;return _r};function sr(_r,vr){var br=or;return Object.prototype.hasOwnProperty.call(br,_r)?br[_r]:br[_r]=vr(_r)}function ir(_r,vr){this.h=vr;for(var br=[],Pr=!0,Er=_r.length-1;0<=Er;Er--){var Rr=_r[Er]|0;Pr&&Rr==vr||(br[Er]=Rr,Pr=!1)}this.g=br}var or={};function ar(_r){return-128<=_r&&128>_r?sr(_r,function(vr){return new ir([vr|0],0>vr?-1:0)}):new ir([_r|0],0>_r?-1:0)}function lr(_r){if(isNaN(_r)||!isFinite(_r))return Ar;if(0>_r)return yr(lr(-_r));for(var vr=[],br=1,Pr=0;_r>=br;Pr++)vr[Pr]=_r/br|0,br*=4294967296;return new ir(vr,0)}function cr(_r,vr){if(_r.length==0)throw Error("number format error: empty string");if(vr=vr||10,2>vr||36<vr)throw Error("radix out of range: "+vr);if(_r.charAt(0)=="-")return yr(cr(_r.substring(1),vr));if(0<=_r.indexOf("-"))throw Error('number format error: interior "-" character');for(var br=lr(Math.pow(vr,8)),Pr=Ar,Er=0;Er<_r.length;Er+=8){var Rr=Math.min(8,_r.length-Er),Ir=parseInt(_r.substring(Er,Er+Rr),vr);8>Rr?(Rr=lr(Math.pow(vr,Rr)),Pr=Pr.j(Rr).add(lr(Ir))):(Pr=Pr.j(br),Pr=Pr.add(lr(Ir)))}return Pr}var Ar=ar(0),ur=ar(1),dr=ar(16777216);er=ir.prototype,er.m=function(){if(pr(this))return-yr(this).m();for(var _r=0,vr=1,br=0;br<this.g.length;br++){var Pr=this.i(br);_r+=(0<=Pr?Pr:4294967296+Pr)*vr,vr*=4294967296}return _r},er.toString=function(_r){if(_r=_r||10,2>_r||36<_r)throw Error("radix out of range: "+_r);if(mr(this))return"0";if(pr(this))return"-"+yr(this).toString(_r);for(var vr=lr(Math.pow(_r,6)),br=this,Pr="";;){var Er=Tr(br,vr).g;br=hr(br,Er.j(vr));var Rr=((0<br.g.length?br.g[0]:br.h)>>>0).toString(_r);if(br=Er,mr(br))return Rr+Pr;for(;6>Rr.length;)Rr="0"+Rr;Pr=Rr+Pr}},er.i=function(_r){return 0>_r?0:_r<this.g.length?this.g[_r]:this.h};function mr(_r){if(_r.h!=0)return!1;for(var vr=0;vr<_r.g.length;vr++)if(_r.g[vr]!=0)return!1;return!0}function pr(_r){return _r.h==-1}er.l=function(_r){return _r=hr(this,_r),pr(_r)?-1:mr(_r)?0:1};function yr(_r){for(var vr=_r.g.length,br=[],Pr=0;Pr<vr;Pr++)br[Pr]=~_r.g[Pr];return new ir(br,~_r.h).add(ur)}er.abs=function(){return pr(this)?yr(this):this},er.add=function(_r){for(var vr=Math.max(this.g.length,_r.g.length),br=[],Pr=0,Er=0;Er<=vr;Er++){var Rr=Pr+(this.i(Er)&65535)+(_r.i(Er)&65535),Ir=(Rr>>>16)+(this.i(Er)>>>16)+(_r.i(Er)>>>16);Pr=Ir>>>16,Rr&=65535,Ir&=65535,br[Er]=Ir<<16|Rr}return new ir(br,br[br.length-1]&-2147483648?-1:0)};function hr(_r,vr){return _r.add(yr(vr))}er.j=function(_r){if(mr(this)||mr(_r))return Ar;if(pr(this))return pr(_r)?yr(this).j(yr(_r)):yr(yr(this).j(_r));if(pr(_r))return yr(this.j(yr(_r)));if(0>this.l(dr)&&0>_r.l(dr))return lr(this.m()*_r.m());for(var vr=this.g.length+_r.g.length,br=[],Pr=0;Pr<2*vr;Pr++)br[Pr]=0;for(Pr=0;Pr<this.g.length;Pr++)for(var Er=0;Er<_r.g.length;Er++){var Rr=this.i(Pr)>>>16,Ir=this.i(Pr)&65535,Qr=_r.i(Er)>>>16,Ur=_r.i(Er)&65535;br[2*Pr+2*Er]+=Ir*Ur,gr(br,2*Pr+2*Er),br[2*Pr+2*Er+1]+=Rr*Ur,gr(br,2*Pr+2*Er+1),br[2*Pr+2*Er+1]+=Ir*Qr,gr(br,2*Pr+2*Er+1),br[2*Pr+2*Er+2]+=Rr*Qr,gr(br,2*Pr+2*Er+2)}for(Pr=0;Pr<vr;Pr++)br[Pr]=br[2*Pr+1]<<16|br[2*Pr];for(Pr=vr;Pr<2*vr;Pr++)br[Pr]=0;return new ir(br,0)};function gr(_r,vr){for(;(_r[vr]&65535)!=_r[vr];)_r[vr+1]+=_r[vr]>>>16,_r[vr]&=65535,vr++}function Cr(_r,vr){this.g=_r,this.h=vr}function Tr(_r,vr){if(mr(vr))throw Error("division by zero");if(mr(_r))return new Cr(Ar,Ar);if(pr(_r))return vr=Tr(yr(_r),vr),new Cr(yr(vr.g),yr(vr.h));if(pr(vr))return vr=Tr(_r,yr(vr)),new Cr(yr(vr.g),vr.h);if(30<_r.g.length){if(pr(_r)||pr(vr))throw Error("slowDivide_ only works with positive integers.");for(var br=ur,Pr=vr;0>=Pr.l(_r);)br=Sr(br),Pr=Sr(Pr);var Er=Nr(br,1),Rr=Nr(Pr,1);for(Pr=Nr(Pr,2),br=Nr(br,2);!mr(Pr);){var Ir=Rr.add(Pr);0>=Ir.l(_r)&&(Er=Er.add(br),Rr=Ir),Pr=Nr(Pr,1),br=Nr(br,1)}return vr=hr(_r,Er.j(vr)),new Cr(Er,vr)}for(Er=Ar;0<=_r.l(vr);){for(br=Math.max(1,Math.floor(_r.m()/vr.m())),Pr=Math.ceil(Math.log(br)/Math.LN2),Pr=48>=Pr?1:Math.pow(2,Pr-48),Rr=lr(br),Ir=Rr.j(vr);pr(Ir)||0<Ir.l(_r);)br-=Pr,Rr=lr(br),Ir=Rr.j(vr);mr(Rr)&&(Rr=ur),Er=Er.add(Rr),_r=hr(_r,Ir)}return new Cr(Er,_r)}er.A=function(_r){return Tr(this,_r).h},er.and=function(_r){for(var vr=Math.max(this.g.length,_r.g.length),br=[],Pr=0;Pr<vr;Pr++)br[Pr]=this.i(Pr)&_r.i(Pr);return new ir(br,this.h&_r.h)},er.or=function(_r){for(var vr=Math.max(this.g.length,_r.g.length),br=[],Pr=0;Pr<vr;Pr++)br[Pr]=this.i(Pr)|_r.i(Pr);return new ir(br,this.h|_r.h)},er.xor=function(_r){for(var vr=Math.max(this.g.length,_r.g.length),br=[],Pr=0;Pr<vr;Pr++)br[Pr]=this.i(Pr)^_r.i(Pr);return new ir(br,this.h^_r.h)};function Sr(_r){for(var vr=_r.g.length+1,br=[],Pr=0;Pr<vr;Pr++)br[Pr]=_r.i(Pr)<<1|_r.i(Pr-1)>>>31;return new ir(br,_r.h)}function Nr(_r,vr){var br=vr>>5;vr%=32;for(var Pr=_r.g.length-br,Er=[],Rr=0;Rr<Pr;Rr++)Er[Rr]=0<vr?_r.i(Rr+br)>>>vr|_r.i(Rr+br+1)<<32-vr:_r.i(Rr+br);return new ir(Er,_r.h)}rr.prototype.digest=rr.prototype.v,rr.prototype.reset=rr.prototype.s,rr.prototype.update=rr.prototype.u,Md5=rr,ir.prototype.add=ir.prototype.add,ir.prototype.multiply=ir.prototype.j,ir.prototype.modulo=ir.prototype.A,ir.prototype.compare=ir.prototype.l,ir.prototype.toNumber=ir.prototype.m,ir.prototype.toString=ir.prototype.toString,ir.prototype.getBits=ir.prototype.i,ir.fromNumber=lr,ir.fromString=cr,Integer=ir}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode$1,Stat,Event$1,getStatEventTarget,createWebChannelTransport;(function(){var er,_e=typeof Object.defineProperties=="function"?Object.defineProperty:function(xr,Mr,qr){return xr==Array.prototype||xr==Object.prototype||(xr[Mr]=qr.value),xr};function tr(xr){xr=[typeof globalThis=="object"&&globalThis,xr,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var Mr=0;Mr<xr.length;++Mr){var qr=xr[Mr];if(qr&&qr.Math==Math)return qr}throw Error("Cannot find global object")}var rr=tr(this);function nr(xr,Mr){if(Mr)e:{var qr=rr;xr=xr.split(".");for(var gn=0;gn<xr.length-1;gn++){var Xn=xr[gn];if(!(Xn in qr))break e;qr=qr[Xn]}xr=xr[xr.length-1],gn=qr[xr],Mr=Mr(gn),Mr!=gn&&Mr!=null&&_e(qr,xr,{configurable:!0,writable:!0,value:Mr})}}function sr(xr,Mr){xr instanceof String&&(xr+="");var qr=0,gn=!1,Xn={next:function(){if(!gn&&qr<xr.length){var as=qr++;return{value:Mr(as,xr[as]),done:!1}}return gn=!0,{done:!0,value:void 0}}};return Xn[Symbol.iterator]=function(){return Xn},Xn}nr("Array.prototype.values",function(xr){return xr||function(){return sr(this,function(Mr,qr){return qr})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var ir=ir||{},or=this||self;function ar(xr){var Mr=typeof xr;return Mr=Mr!="object"?Mr:xr?Array.isArray(xr)?"array":Mr:"null",Mr=="array"||Mr=="object"&&typeof xr.length=="number"}function lr(xr){var Mr=typeof xr;return Mr=="object"&&xr!=null||Mr=="function"}function cr(xr,Mr,qr){return xr.call.apply(xr.bind,arguments)}function Ar(xr,Mr,qr){if(!xr)throw Error();if(2<arguments.length){var gn=Array.prototype.slice.call(arguments,2);return function(){var Xn=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Xn,gn),xr.apply(Mr,Xn)}}return function(){return xr.apply(Mr,arguments)}}function ur(xr,Mr,qr){return ur=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?cr:Ar,ur.apply(null,arguments)}function dr(xr,Mr){var qr=Array.prototype.slice.call(arguments,1);return function(){var gn=qr.slice();return gn.push.apply(gn,arguments),xr.apply(this,gn)}}function mr(xr,Mr){function qr(){}qr.prototype=Mr.prototype,xr.aa=Mr.prototype,xr.prototype=new qr,xr.prototype.constructor=xr,xr.Qb=function(gn,Xn,as){for(var ws=Array(arguments.length-2),Gs=2;Gs<arguments.length;Gs++)ws[Gs-2]=arguments[Gs];return Mr.prototype[Xn].apply(gn,ws)}}function pr(xr){const Mr=xr.length;if(0<Mr){const qr=Array(Mr);for(let gn=0;gn<Mr;gn++)qr[gn]=xr[gn];return qr}return[]}function yr(xr,Mr){for(let qr=1;qr<arguments.length;qr++){const gn=arguments[qr];if(ar(gn)){const Xn=xr.length||0,as=gn.length||0;xr.length=Xn+as;for(let ws=0;ws<as;ws++)xr[Xn+ws]=gn[ws]}else xr.push(gn)}}class hr{constructor(Mr,qr){this.i=Mr,this.j=qr,this.h=0,this.g=null}get(){let Mr;return 0<this.h?(this.h--,Mr=this.g,this.g=Mr.next,Mr.next=null):Mr=this.i(),Mr}}function gr(xr){return/^[\s\xa0]*$/.test(xr)}function Cr(){var xr=or.navigator;return xr&&(xr=xr.userAgent)?xr:""}function Tr(xr){return Tr[" "](xr),xr}Tr[" "]=function(){};var Sr=Cr().indexOf("Gecko")!=-1&&!(Cr().toLowerCase().indexOf("webkit")!=-1&&Cr().indexOf("Edge")==-1)&&!(Cr().indexOf("Trident")!=-1||Cr().indexOf("MSIE")!=-1)&&Cr().indexOf("Edge")==-1;function Nr(xr,Mr,qr){for(const gn in xr)Mr.call(qr,xr[gn],gn,xr)}function _r(xr,Mr){for(const qr in xr)Mr.call(void 0,xr[qr],qr,xr)}function vr(xr){const Mr={};for(const qr in xr)Mr[qr]=xr[qr];return Mr}const br="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pr(xr,Mr){let qr,gn;for(let Xn=1;Xn<arguments.length;Xn++){gn=arguments[Xn];for(qr in gn)xr[qr]=gn[qr];for(let as=0;as<br.length;as++)qr=br[as],Object.prototype.hasOwnProperty.call(gn,qr)&&(xr[qr]=gn[qr])}}function Er(xr){var Mr=1;xr=xr.split(":");const qr=[];for(;0<Mr&&xr.length;)qr.push(xr.shift()),Mr--;return xr.length&&qr.push(xr.join(":")),qr}function Rr(xr){or.setTimeout(()=>{throw xr},0)}function Ir(){var xr=$r;let Mr=null;return xr.g&&(Mr=xr.g,xr.g=xr.g.next,xr.g||(xr.h=null),Mr.next=null),Mr}class Qr{constructor(){this.h=this.g=null}add(Mr,qr){const gn=Ur.get();gn.set(Mr,qr),this.h?this.h.next=gn:this.g=gn,this.h=gn}}var Ur=new hr(()=>new Vr,xr=>xr.reset());class Vr{constructor(){this.next=this.g=this.h=null}set(Mr,qr){this.h=Mr,this.g=qr,this.next=null}reset(){this.next=this.g=this.h=null}}let Wr,Hr=!1,$r=new Qr,Xr=()=>{const xr=or.Promise.resolve(void 0);Wr=()=>{xr.then(pn)}};var pn=()=>{for(var xr;xr=Ir();){try{xr.h.call(xr.g)}catch(qr){Rr(qr)}var Mr=Ur;Mr.j(xr),100>Mr.h&&(Mr.h++,xr.next=Mr.g,Mr.g=xr)}Hr=!1};function jr(){this.s=this.s,this.C=this.C}jr.prototype.s=!1,jr.prototype.ma=function(){this.s||(this.s=!0,this.N())},jr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Br(xr,Mr){this.type=xr,this.g=this.target=Mr,this.defaultPrevented=!1}Br.prototype.h=function(){this.defaultPrevented=!0};var Lr=function(){if(!or.addEventListener||!Object.defineProperty)return!1;var xr=!1,Mr=Object.defineProperty({},"passive",{get:function(){xr=!0}});try{const qr=()=>{};or.addEventListener("test",qr,Mr),or.removeEventListener("test",qr,Mr)}catch{}return xr}();function Or(xr,Mr){if(Br.call(this,xr?xr.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,xr){var qr=this.type=xr.type,gn=xr.changedTouches&&xr.changedTouches.length?xr.changedTouches[0]:null;if(this.target=xr.target||xr.srcElement,this.g=Mr,Mr=xr.relatedTarget){if(Sr){e:{try{Tr(Mr.nodeName);var Xn=!0;break e}catch{}Xn=!1}Xn||(Mr=null)}}else qr=="mouseover"?Mr=xr.fromElement:qr=="mouseout"&&(Mr=xr.toElement);this.relatedTarget=Mr,gn?(this.clientX=gn.clientX!==void 0?gn.clientX:gn.pageX,this.clientY=gn.clientY!==void 0?gn.clientY:gn.pageY,this.screenX=gn.screenX||0,this.screenY=gn.screenY||0):(this.clientX=xr.clientX!==void 0?xr.clientX:xr.pageX,this.clientY=xr.clientY!==void 0?xr.clientY:xr.pageY,this.screenX=xr.screenX||0,this.screenY=xr.screenY||0),this.button=xr.button,this.key=xr.key||"",this.ctrlKey=xr.ctrlKey,this.altKey=xr.altKey,this.shiftKey=xr.shiftKey,this.metaKey=xr.metaKey,this.pointerId=xr.pointerId||0,this.pointerType=typeof xr.pointerType=="string"?xr.pointerType:zr[xr.pointerType]||"",this.state=xr.state,this.i=xr,xr.defaultPrevented&&Or.aa.h.call(this)}}mr(Or,Br);var zr={2:"touch",3:"pen",4:"mouse"};Or.prototype.h=function(){Or.aa.h.call(this);var xr=this.i;xr.preventDefault?xr.preventDefault():xr.returnValue=!1};var Gr="closure_listenable_"+(1e6*Math.random()|0),Yr=0;function dn(xr,Mr,qr,gn,Xn){this.listener=xr,this.proxy=null,this.src=Mr,this.type=qr,this.capture=!!gn,this.ha=Xn,this.key=++Yr,this.da=this.fa=!1}function En(xr){xr.da=!0,xr.listener=null,xr.proxy=null,xr.src=null,xr.ha=null}function Sn(xr){this.src=xr,this.g={},this.h=0}Sn.prototype.add=function(xr,Mr,qr,gn,Xn){var as=xr.toString();xr=this.g[as],xr||(xr=this.g[as]=[],this.h++);var ws=kn(xr,Mr,gn,Xn);return-1<ws?(Mr=xr[ws],qr||(Mr.fa=!1)):(Mr=new dn(Mr,this.src,as,!!gn,Xn),Mr.fa=qr,xr.push(Mr)),Mr};function Bn(xr,Mr){var qr=Mr.type;if(qr in xr.g){var gn=xr.g[qr],Xn=Array.prototype.indexOf.call(gn,Mr,void 0),as;(as=0<=Xn)&&Array.prototype.splice.call(gn,Xn,1),as&&(En(Mr),xr.g[qr].length==0&&(delete xr.g[qr],xr.h--))}}function kn(xr,Mr,qr,gn){for(var Xn=0;Xn<xr.length;++Xn){var as=xr[Xn];if(!as.da&&as.listener==Mr&&as.capture==!!qr&&as.ha==gn)return Xn}return-1}var Kn="closure_lm_"+(1e6*Math.random()|0),Cn={};function Jr(xr,Mr,qr,gn,Xn){if(Array.isArray(Mr)){for(var as=0;as<Mr.length;as++)Jr(xr,Mr[as],qr,gn,Xn);return null}return qr=Nn(qr),xr&&xr[Gr]?xr.K(Mr,qr,lr(gn)?!!gn.capture:!!gn,Xn):Fn(xr,Mr,qr,!1,gn,Xn)}function Fn(xr,Mr,qr,gn,Xn,as){if(!Mr)throw Error("Invalid event type");var ws=lr(Xn)?!!Xn.capture:!!Xn,Gs=zn(xr);if(Gs||(xr[Kn]=Gs=new Sn(xr)),qr=Gs.add(Mr,qr,gn,ws,as),qr.proxy)return qr;if(gn=Zr(),qr.proxy=gn,gn.src=xr,gn.listener=qr,xr.addEventListener)Lr||(Xn=ws),Xn===void 0&&(Xn=!1),xr.addEventListener(Mr.toString(),gn,Xn);else if(xr.attachEvent)xr.attachEvent(In(Mr.toString()),gn);else if(xr.addListener&&xr.removeListener)xr.addListener(gn);else throw Error("addEventListener and attachEvent are unavailable.");return qr}function Zr(){function xr(qr){return Mr.call(xr.src,xr.listener,qr)}const Mr=jn;return xr}function hn(xr,Mr,qr,gn,Xn){if(Array.isArray(Mr))for(var as=0;as<Mr.length;as++)hn(xr,Mr[as],qr,gn,Xn);else gn=lr(gn)?!!gn.capture:!!gn,qr=Nn(qr),xr&&xr[Gr]?(xr=xr.i,Mr=String(Mr).toString(),Mr in xr.g&&(as=xr.g[Mr],qr=kn(as,qr,gn,Xn),-1<qr&&(En(as[qr]),Array.prototype.splice.call(as,qr,1),as.length==0&&(delete xr.g[Mr],xr.h--)))):xr&&(xr=zn(xr))&&(Mr=xr.g[Mr.toString()],xr=-1,Mr&&(xr=kn(Mr,qr,gn,Xn)),(qr=-1<xr?Mr[xr]:null)&&bn(qr))}function bn(xr){if(typeof xr!="number"&&xr&&!xr.da){var Mr=xr.src;if(Mr&&Mr[Gr])Bn(Mr.i,xr);else{var qr=xr.type,gn=xr.proxy;Mr.removeEventListener?Mr.removeEventListener(qr,gn,xr.capture):Mr.detachEvent?Mr.detachEvent(In(qr),gn):Mr.addListener&&Mr.removeListener&&Mr.removeListener(gn),(qr=zn(Mr))?(Bn(qr,xr),qr.h==0&&(qr.src=null,Mr[Kn]=null)):En(xr)}}}function In(xr){return xr in Cn?Cn[xr]:Cn[xr]="on"+xr}function jn(xr,Mr){if(xr.da)xr=!0;else{Mr=new Or(Mr,this);var qr=xr.listener,gn=xr.ha||xr.src;xr.fa&&bn(xr),xr=qr.call(gn,Mr)}return xr}function zn(xr){return xr=xr[Kn],xr instanceof Sn?xr:null}var qn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nn(xr){return typeof xr=="function"?xr:(xr[qn]||(xr[qn]=function(Mr){return xr.handleEvent(Mr)}),xr[qn])}function ns(){jr.call(this),this.i=new Sn(this),this.M=this,this.F=null}mr(ns,jr),ns.prototype[Gr]=!0,ns.prototype.removeEventListener=function(xr,Mr,qr,gn){hn(this,xr,Mr,qr,gn)};function rs(xr,Mr){var qr,gn=xr.F;if(gn)for(qr=[];gn;gn=gn.F)qr.push(gn);if(xr=xr.M,gn=Mr.type||Mr,typeof Mr=="string")Mr=new Br(Mr,xr);else if(Mr instanceof Br)Mr.target=Mr.target||xr;else{var Xn=Mr;Mr=new Br(gn,xr),Pr(Mr,Xn)}if(Xn=!0,qr)for(var as=qr.length-1;0<=as;as--){var ws=Mr.g=qr[as];Xn=Is(ws,gn,!0,Mr)&&Xn}if(ws=Mr.g=xr,Xn=Is(ws,gn,!0,Mr)&&Xn,Xn=Is(ws,gn,!1,Mr)&&Xn,qr)for(as=0;as<qr.length;as++)ws=Mr.g=qr[as],Xn=Is(ws,gn,!1,Mr)&&Xn}ns.prototype.N=function(){if(ns.aa.N.call(this),this.i){var xr=this.i,Mr;for(Mr in xr.g){for(var qr=xr.g[Mr],gn=0;gn<qr.length;gn++)En(qr[gn]);delete xr.g[Mr],xr.h--}}this.F=null},ns.prototype.K=function(xr,Mr,qr,gn){return this.i.add(String(xr),Mr,!1,qr,gn)},ns.prototype.L=function(xr,Mr,qr,gn){return this.i.add(String(xr),Mr,!0,qr,gn)};function Is(xr,Mr,qr,gn){if(Mr=xr.i.g[String(Mr)],!Mr)return!0;Mr=Mr.concat();for(var Xn=!0,as=0;as<Mr.length;++as){var ws=Mr[as];if(ws&&!ws.da&&ws.capture==qr){var Gs=ws.listener,Xs=ws.ha||ws.src;ws.fa&&Bn(xr.i,ws),Xn=Gs.call(Xs,gn)!==!1&&Xn}}return Xn&&!gn.defaultPrevented}function ps(xr,Mr,qr){if(typeof xr=="function")qr&&(xr=ur(xr,qr));else if(xr&&typeof xr.handleEvent=="function")xr=ur(xr.handleEvent,xr);else throw Error("Invalid listener argument");return 2147483647<Number(Mr)?-1:or.setTimeout(xr,Mr||0)}function Ps(xr){xr.g=ps(()=>{xr.g=null,xr.i&&(xr.i=!1,Ps(xr))},xr.l);const Mr=xr.h;xr.h=null,xr.m.apply(null,Mr)}class ls extends jr{constructor(Mr,qr){super(),this.m=Mr,this.l=qr,this.h=null,this.i=!1,this.g=null}j(Mr){this.h=arguments,this.g?this.i=!0:Ps(this)}N(){super.N(),this.g&&(or.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ts(xr){jr.call(this),this.h=xr,this.g={}}mr(Ts,jr);var Fs=[];function Vs(xr){Nr(xr.g,function(Mr,qr){this.g.hasOwnProperty(qr)&&bn(Mr)},xr),xr.g={}}Ts.prototype.N=function(){Ts.aa.N.call(this),Vs(this)},Ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ts=or.JSON.stringify,Mn=or.JSON.parse,Gn=class{stringify(xr){return or.JSON.stringify(xr,void 0)}parse(xr){return or.JSON.parse(xr,void 0)}};function os(){}os.prototype.h=null;function js(xr){return xr.h||(xr.h=xr.i())}function bs(){}var Rn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function es(){Br.call(this,"d")}mr(es,Br);function ds(){Br.call(this,"c")}mr(ds,Br);var fs={},vs=null;function Ss(){return vs=vs||new ns}fs.La="serverreachability";function wn(xr){Br.call(this,fs.La,xr)}mr(wn,Br);function yn(xr){const Mr=Ss();rs(Mr,new wn(Mr))}fs.STAT_EVENT="statevent";function Ln(xr,Mr){Br.call(this,fs.STAT_EVENT,xr),this.stat=Mr}mr(Ln,Br);function Dn(xr){const Mr=Ss();rs(Mr,new Ln(Mr,xr))}fs.Ma="timingevent";function Zn(xr,Mr){Br.call(this,fs.Ma,xr),this.size=Mr}mr(Zn,Br);function cs(xr,Mr){if(typeof xr!="function")throw Error("Fn must not be null and must be a function");return or.setTimeout(function(){xr()},Mr)}function As(){this.g=!0}As.prototype.xa=function(){this.g=!1};function Rs(xr,Mr,qr,gn,Xn,as){xr.info(function(){if(xr.g)if(as)for(var ws="",Gs=as.split("&"),Xs=0;Xs<Gs.length;Xs++){var Ws=Gs[Xs].split("=");if(1<Ws.length){var ro=Ws[0];Ws=Ws[1];var lo=ro.split("_");ws=2<=lo.length&&lo[1]=="type"?ws+(ro+"="+Ws+"&"):ws+(ro+"=redacted&")}}else ws=null;else ws=as;return"XMLHTTP REQ ("+gn+") [attempt "+Xn+"]: "+Mr+`
`+qr+`
`+ws})}function Cs(xr,Mr,qr,gn,Xn,as,ws){xr.info(function(){return"XMLHTTP RESP ("+gn+") [ attempt "+Xn+"]: "+Mr+`
`+qr+`
`+as+" "+ws})}function gs(xr,Mr,qr,gn){xr.info(function(){return"XMLHTTP TEXT ("+Mr+"): "+Ns(xr,qr)+(gn?" "+gn:"")})}function Qs(xr,Mr){xr.info(function(){return"TIMEOUT: "+Mr})}As.prototype.info=function(){};function Ns(xr,Mr){if(!xr.g)return Mr;if(!Mr)return null;try{var qr=JSON.parse(Mr);if(qr){for(xr=0;xr<qr.length;xr++)if(Array.isArray(qr[xr])){var gn=qr[xr];if(!(2>gn.length)){var Xn=gn[1];if(Array.isArray(Xn)&&!(1>Xn.length)){var as=Xn[0];if(as!="noop"&&as!="stop"&&as!="close")for(var ws=1;ws<Xn.length;ws++)Xn[ws]=""}}}}return ts(qr)}catch{return Mr}}var Bs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Us={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ms;function $s(){}mr($s,os),$s.prototype.g=function(){return new XMLHttpRequest},$s.prototype.i=function(){return{}},Ms=new $s;function Hs(xr,Mr,qr,gn){this.j=xr,this.i=Mr,this.l=qr,this.R=gn||1,this.U=new Ts(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _i}function _i(){this.i=null,this.g="",this.h=!1}var Js={},vo={};function wo(xr,Mr,qr){xr.L=1,xr.v=Zl(Lo(Mr)),xr.m=qr,xr.P=!0,Ro(xr,null)}function Ro(xr,Mr){xr.F=Date.now(),hA(xr),xr.A=Lo(xr.v);var qr=xr.A,gn=xr.R;Array.isArray(gn)||(gn=[String(gn)]),zs(qr.i,"t",gn),xr.C=0,qr=xr.j.J,xr.h=new _i,xr.g=An(xr.j,qr?Mr:null,!xr.m),0<xr.O&&(xr.M=new ls(ur(xr.Y,xr,xr.g),xr.O)),Mr=xr.U,qr=xr.g,gn=xr.ca;var Xn="readystatechange";Array.isArray(Xn)||(Xn&&(Fs[0]=Xn.toString()),Xn=Fs);for(var as=0;as<Xn.length;as++){var ws=Jr(qr,Xn[as],gn||Mr.handleEvent,!1,Mr.h||Mr);if(!ws)break;Mr.g[ws.key]=ws}Mr=xr.H?vr(xr.H):{},xr.m?(xr.u||(xr.u="POST"),Mr["Content-Type"]="application/x-www-form-urlencoded",xr.g.ea(xr.A,xr.u,xr.m,Mr)):(xr.u="GET",xr.g.ea(xr.A,xr.u,null,Mr)),yn(),Rs(xr.i,xr.u,xr.A,xr.l,xr.R,xr.m)}Hs.prototype.ca=function(xr){xr=xr.target;const Mr=this.M;Mr&&bo(xr)==3?Mr.j():this.Y(xr)},Hs.prototype.Y=function(xr){try{if(xr==this.g)e:{const lo=bo(this.g);var Mr=this.g.Ba();const Bl=this.g.Z();if(!(3>lo)&&(lo!=3||this.g&&(this.h.h||this.g.oa()||Bu(this.g)))){this.J||lo!=4||Mr==7||(Mr==8||0>=Bl?yn(3):yn(2)),Ll(this);var qr=this.g.Z();this.X=qr;t:if(Jo(this)){var gn=Bu(this.g);xr="";var Xn=gn.length,as=bo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_l(this),Dl(this);var ws="";break t}this.h.i=new or.TextDecoder}for(Mr=0;Mr<Xn;Mr++)this.h.h=!0,xr+=this.h.i.decode(gn[Mr],{stream:!(as&&Mr==Xn-1)});gn.length=0,this.h.g+=xr,this.C=0,ws=this.h.g}else ws=this.g.oa();if(this.o=qr==200,Cs(this.i,this.u,this.A,this.l,this.R,lo,qr),this.o){if(this.T&&!this.K){t:{if(this.g){var Gs,Xs=this.g;if((Gs=Xs.g?Xs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gr(Gs)){var Ws=Gs;break t}}Ws=null}if(qr=Ws)gs(this.i,this.l,qr,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xl(this,qr);else{this.o=!1,this.s=3,Dn(12),_l(this),Dl(this);break e}}if(this.P){qr=!0;let Bo;for(;!this.J&&this.C<ws.length;)if(Bo=Eu(this,ws),Bo==vo){lo==4&&(this.s=4,Dn(14),qr=!1),gs(this.i,this.l,null,"[Incomplete Response]");break}else if(Bo==Js){this.s=4,Dn(15),gs(this.i,this.l,ws,"[Invalid Chunk]"),qr=!1;break}else gs(this.i,this.l,Bo,null),Xl(this,Bo);if(Jo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lo!=4||ws.length!=0||this.h.h||(this.s=1,Dn(16),qr=!1),this.o=this.o&&qr,!qr)gs(this.i,this.l,ws,"[Invalid Chunked Response]"),_l(this),Dl(this);else if(0<ws.length&&!this.W){this.W=!0;var ro=this.j;ro.g==this&&ro.ba&&!ro.M&&(ro.j.info("Great, no buffering proxy detected. Bytes received: "+ws.length),TA(ro),ro.M=!0,Dn(11))}}else gs(this.i,this.l,ws,null),Xl(this,ws);lo==4&&_l(this),this.o&&!this.J&&(lo==4?Vl(this.j,this):(this.o=!1,hA(this)))}else Ml(this.g),qr==400&&0<ws.indexOf("Unknown SID")?(this.s=3,Dn(12)):(this.s=0,Dn(13)),_l(this),Dl(this)}}}catch{}finally{}};function Jo(xr){return xr.g?xr.u=="GET"&&xr.L!=2&&xr.j.Ca:!1}function Eu(xr,Mr){var qr=xr.C,gn=Mr.indexOf(`
`,qr);return gn==-1?vo:(qr=Number(Mr.substring(qr,gn)),isNaN(qr)?Js:(gn+=1,gn+qr>Mr.length?vo:(Mr=Mr.slice(gn,gn+qr),xr.C=gn+qr,Mr)))}Hs.prototype.cancel=function(){this.J=!0,_l(this)};function hA(xr){xr.S=Date.now()+xr.I,_u(xr,xr.I)}function _u(xr,Mr){if(xr.B!=null)throw Error("WatchDog timer not null");xr.B=cs(ur(xr.ba,xr),Mr)}function Ll(xr){xr.B&&(or.clearTimeout(xr.B),xr.B=null)}Hs.prototype.ba=function(){this.B=null;const xr=Date.now();0<=xr-this.S?(Qs(this.i,this.A),this.L!=2&&(yn(),Dn(17)),_l(this),this.s=2,Dl(this)):_u(this,this.S-xr)};function Dl(xr){xr.j.G==0||xr.J||Vl(xr.j,xr)}function _l(xr){Ll(xr);var Mr=xr.M;Mr&&typeof Mr.ma=="function"&&Mr.ma(),xr.M=null,Vs(xr.U),xr.g&&(Mr=xr.g,xr.g=null,Mr.abort(),Mr.ma())}function Xl(xr,Mr){try{var qr=xr.j;if(qr.G!=0&&(qr.g==xr||YA(qr.h,xr))){if(!xr.K&&YA(qr.h,xr)&&qr.G==3){try{var gn=qr.Da.g.parse(Mr)}catch{gn=null}if(Array.isArray(gn)&&gn.length==3){var Xn=gn;if(Xn[0]==0){e:if(!qr.u){if(qr.g)if(qr.g.F+3e3<xr.F)Il(qr),wA(qr);else break e;nA(qr),Dn(18)}}else qr.za=Xn[1],0<qr.za-qr.T&&37500>Xn[2]&&qr.F&&qr.v==0&&!qr.C&&(qr.C=cs(ur(qr.Za,qr),6e3));if(1>=Yl(qr.h)&&qr.ca){try{qr.ca()}catch{}qr.ca=void 0}}else Fo(qr,11)}else if((xr.K||qr.g==xr)&&Il(qr),!gr(Mr))for(Xn=qr.Da.g.parse(Mr),Mr=0;Mr<Xn.length;Mr++){let Ws=Xn[Mr];if(qr.T=Ws[0],Ws=Ws[1],qr.G==2)if(Ws[0]=="c"){qr.K=Ws[1],qr.ia=Ws[2];const ro=Ws[3];ro!=null&&(qr.la=ro,qr.j.info("VER="+qr.la));const lo=Ws[4];lo!=null&&(qr.Aa=lo,qr.j.info("SVER="+qr.Aa));const Bl=Ws[5];Bl!=null&&typeof Bl=="number"&&0<Bl&&(gn=1.5*Bl,qr.L=gn,qr.j.info("backChannelRequestTimeoutMs_="+gn)),gn=qr;const Bo=xr.g;if(Bo){const $l=Bo.g?Bo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($l){var as=gn.h;as.g||$l.indexOf("spdy")==-1&&$l.indexOf("quic")==-1&&$l.indexOf("h2")==-1||(as.j=as.l,as.g=new Set,as.h&&(ho(as,as.h),as.h=null))}if(gn.D){const Hl=Bo.g?Bo.g.getResponseHeader("X-HTTP-Session-Id"):null;Hl&&(gn.ya=Hl,no(gn.I,gn.D,Hl))}}qr.G=3,qr.l&&qr.l.ua(),qr.ba&&(qr.R=Date.now()-xr.F,qr.j.info("Handshake RTT: "+qr.R+"ms")),gn=qr;var ws=xr;if(gn.qa=Fr(gn,gn.J?gn.ia:null,gn.W),ws.K){JA(gn.h,ws);var Gs=ws,Xs=gn.L;Xs&&(Gs.I=Xs),Gs.B&&(Ll(Gs),hA(Gs)),gn.g=ws}else RA(gn);0<qr.i.length&&bA(qr)}else Ws[0]!="stop"&&Ws[0]!="close"||Fo(qr,7);else qr.G==3&&(Ws[0]=="stop"||Ws[0]=="close"?Ws[0]=="stop"?Fo(qr,7):Tl(qr):Ws[0]!="noop"&&qr.l&&qr.l.ta(Ws),qr.v=0)}}yn(4)}catch{}}var rp=class{constructor(xr,Mr){this.g=xr,this.map=Mr}};function XA(xr){this.l=xr||10,or.PerformanceNavigationTiming?(xr=or.performance.getEntriesByType("navigation"),xr=0<xr.length&&(xr[0].nextHopProtocol=="hq"||xr[0].nextHopProtocol=="h2")):xr=!!(or.chrome&&or.chrome.loadTimes&&or.chrome.loadTimes()&&or.chrome.loadTimes().wasFetchedViaSpdy),this.j=xr?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wu(xr){return xr.h?!0:xr.g?xr.g.size>=xr.j:!1}function Yl(xr){return xr.h?1:xr.g?xr.g.size:0}function YA(xr,Mr){return xr.h?xr.h==Mr:xr.g?xr.g.has(Mr):!1}function ho(xr,Mr){xr.g?xr.g.add(Mr):xr.h=Mr}function JA(xr,Mr){xr.h&&xr.h==Mr?xr.h=null:xr.g&&xr.g.has(Mr)&&xr.g.delete(Mr)}XA.prototype.cancel=function(){if(this.i=ZA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const xr of this.g.values())xr.cancel();this.g.clear()}};function ZA(xr){if(xr.h!=null)return xr.i.concat(xr.h.D);if(xr.g!=null&&xr.g.size!==0){let Mr=xr.i;for(const qr of xr.g.values())Mr=Mr.concat(qr.D);return Mr}return pr(xr.i)}function bu(xr){if(xr.V&&typeof xr.V=="function")return xr.V();if(typeof Map<"u"&&xr instanceof Map||typeof Set<"u"&&xr instanceof Set)return Array.from(xr.values());if(typeof xr=="string")return xr.split("");if(ar(xr)){for(var Mr=[],qr=xr.length,gn=0;gn<qr;gn++)Mr.push(xr[gn]);return Mr}Mr=[],qr=0;for(gn in xr)Mr[qr++]=xr[gn];return Mr}function eu(xr){if(xr.na&&typeof xr.na=="function")return xr.na();if(!xr.V||typeof xr.V!="function"){if(typeof Map<"u"&&xr instanceof Map)return Array.from(xr.keys());if(!(typeof Set<"u"&&xr instanceof Set)){if(ar(xr)||typeof xr=="string"){var Mr=[];xr=xr.length;for(var qr=0;qr<xr;qr++)Mr.push(qr);return Mr}Mr=[],qr=0;for(const gn in xr)Mr[qr++]=gn;return Mr}}}function Cu(xr,Mr){if(xr.forEach&&typeof xr.forEach=="function")xr.forEach(Mr,void 0);else if(ar(xr)||typeof xr=="string")Array.prototype.forEach.call(xr,Mr,void 0);else for(var qr=eu(xr),gn=bu(xr),Xn=gn.length,as=0;as<Xn;as++)Mr.call(void 0,gn[as],qr&&qr[as],xr)}var Mo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fA(xr,Mr){if(xr){xr=xr.split("&");for(var qr=0;qr<xr.length;qr++){var gn=xr[qr].indexOf("="),Xn=null;if(0<=gn){var as=xr[qr].substring(0,gn);Xn=xr[qr].substring(gn+1)}else as=xr[qr];Mr(as,Xn?decodeURIComponent(Xn.replace(/\+/g," ")):"")}}}function po(xr){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,xr instanceof po){this.h=xr.h,Jl(this,xr.j),this.o=xr.o,this.g=xr.g,pA(this,xr.s),this.l=xr.l;var Mr=xr.i,qr=new Ul;qr.i=Mr.i,Mr.g&&(qr.g=new Map(Mr.g),qr.h=Mr.h),tu(this,qr),this.m=xr.m}else xr&&(Mr=String(xr).match(Mo))?(this.h=!1,Jl(this,Mr[1]||"",!0),this.o=_c(Mr[2]||""),this.g=_c(Mr[3]||"",!0),pA(this,Mr[4]),this.l=_c(Mr[5]||"",!0),tu(this,Mr[6]||"",!0),this.m=_c(Mr[7]||"")):(this.h=!1,this.i=new Ul(null,this.h))}po.prototype.toString=function(){var xr=[],Mr=this.j;Mr&&xr.push(wl(Mr,Ru,!0),":");var qr=this.g;return(qr||Mr=="file")&&(xr.push("//"),(Mr=this.o)&&xr.push(wl(Mr,Ru,!0),"@"),xr.push(encodeURIComponent(String(qr)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),qr=this.s,qr!=null&&xr.push(":",String(qr))),(qr=this.l)&&(this.g&&qr.charAt(0)!="/"&&xr.push("/"),xr.push(wl(qr,qr.charAt(0)=="/"?Cl:sp,!0))),(qr=this.i.toString())&&xr.push("?",qr),(qr=this.m)&&xr.push("#",wl(qr,gA)),xr.join("")};function Lo(xr){return new po(xr)}function Jl(xr,Mr,qr){xr.j=qr?_c(Mr,!0):Mr,xr.j&&(xr.j=xr.j.replace(/:$/,""))}function pA(xr,Mr){if(Mr){if(Mr=Number(Mr),isNaN(Mr)||0>Mr)throw Error("Bad port number "+Mr);xr.s=Mr}else xr.s=null}function tu(xr,Mr,qr){Mr instanceof Ul?(xr.i=Mr,ip(xr.i,xr.h)):(qr||(Mr=wl(Mr,mA)),xr.i=new Ul(Mr,xr.h))}function no(xr,Mr,qr){xr.i.set(Mr,qr)}function Zl(xr){return no(xr,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),xr}function _c(xr,Mr){return xr?Mr?decodeURI(xr.replace(/%25/g,"%2525")):decodeURIComponent(xr):""}function wl(xr,Mr,qr){return typeof xr=="string"?(xr=encodeURI(xr).replace(Mr,np),qr&&(xr=xr.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),xr):null}function np(xr){return xr=xr.charCodeAt(0),"%"+(xr>>4&15).toString(16)+(xr&15).toString(16)}var Ru=/[#\/\?@]/g,sp=/[#\?:]/g,Cl=/[#\?]/g,mA=/[#\?@]/g,gA=/#/g;function Ul(xr,Mr){this.h=this.g=null,this.i=xr||null,this.j=!!Mr}function fo(xr){xr.g||(xr.g=new Map,xr.h=0,xr.i&&fA(xr.i,function(Mr,qr){xr.add(decodeURIComponent(Mr.replace(/\+/g," ")),qr)}))}er=Ul.prototype,er.add=function(xr,Mr){fo(this),this.i=null,xr=Ol(this,xr);var qr=this.g.get(xr);return qr||this.g.set(xr,qr=[]),qr.push(Mr),this.h+=1,this};function Su(xr,Mr){fo(xr),Mr=Ol(xr,Mr),xr.g.has(Mr)&&(xr.i=null,xr.h-=xr.g.get(Mr).length,xr.g.delete(Mr))}function ru(xr,Mr){return fo(xr),Mr=Ol(xr,Mr),xr.g.has(Mr)}er.forEach=function(xr,Mr){fo(this),this.g.forEach(function(qr,gn){qr.forEach(function(Xn){xr.call(Mr,Xn,gn,this)},this)},this)},er.na=function(){fo(this);const xr=Array.from(this.g.values()),Mr=Array.from(this.g.keys()),qr=[];for(let gn=0;gn<Mr.length;gn++){const Xn=xr[gn];for(let as=0;as<Xn.length;as++)qr.push(Mr[gn])}return qr},er.V=function(xr){fo(this);let Mr=[];if(typeof xr=="string")ru(this,xr)&&(Mr=Mr.concat(this.g.get(Ol(this,xr))));else{xr=Array.from(this.g.values());for(let qr=0;qr<xr.length;qr++)Mr=Mr.concat(xr[qr])}return Mr},er.set=function(xr,Mr){return fo(this),this.i=null,xr=Ol(this,xr),ru(this,xr)&&(this.h-=this.g.get(xr).length),this.g.set(xr,[Mr]),this.h+=1,this},er.get=function(xr,Mr){return xr?(xr=this.V(xr),0<xr.length?String(xr[0]):Mr):Mr};function zs(xr,Mr,qr){Su(xr,Mr),0<qr.length&&(xr.i=null,xr.g.set(Ol(xr,Mr),pr(qr)),xr.h+=qr.length)}er.toString=function(){if(this.i)return this.i;if(!this.g)return"";const xr=[],Mr=Array.from(this.g.keys());for(var qr=0;qr<Mr.length;qr++){var gn=Mr[qr];const as=encodeURIComponent(String(gn)),ws=this.V(gn);for(gn=0;gn<ws.length;gn++){var Xn=as;ws[gn]!==""&&(Xn+="="+encodeURIComponent(String(ws[gn]))),xr.push(Xn)}}return this.i=xr.join("&")};function Ol(xr,Mr){return Mr=String(Mr),xr.j&&(Mr=Mr.toLowerCase()),Mr}function ip(xr,Mr){Mr&&!xr.j&&(fo(xr),xr.i=null,xr.g.forEach(function(qr,gn){var Xn=gn.toLowerCase();gn!=Xn&&(Su(this,gn),zs(this,Xn,qr))},xr)),xr.j=Mr}function Zo(xr,Mr){const qr=new As;if(or.Image){const gn=new Image;gn.onload=dr(Ko,qr,"TestLoadImage: loaded",!0,Mr,gn),gn.onerror=dr(Ko,qr,"TestLoadImage: error",!1,Mr,gn),gn.onabort=dr(Ko,qr,"TestLoadImage: abort",!1,Mr,gn),gn.ontimeout=dr(Ko,qr,"TestLoadImage: timeout",!1,Mr,gn),or.setTimeout(function(){gn.ontimeout&&gn.ontimeout()},1e4),gn.src=xr}else Mr(!1)}function Tu(xr,Mr){const qr=new As,gn=new AbortController,Xn=setTimeout(()=>{gn.abort(),Ko(qr,"TestPingServer: timeout",!1,Mr)},1e4);fetch(xr,{signal:gn.signal}).then(as=>{clearTimeout(Xn),as.ok?Ko(qr,"TestPingServer: ok",!0,Mr):Ko(qr,"TestPingServer: server error",!1,Mr)}).catch(()=>{clearTimeout(Xn),Ko(qr,"TestPingServer: error",!1,Mr)})}function Ko(xr,Mr,qr,gn,Xn){try{Xn&&(Xn.onload=null,Xn.onerror=null,Xn.onabort=null,Xn.ontimeout=null),gn(qr)}catch{}}function xA(){this.g=new Gn}function nu(xr,Mr,qr){const gn=qr||"";try{Cu(xr,function(Xn,as){let ws=Xn;lr(Xn)&&(ws=ts(Xn)),Mr.push(gn+as+"="+encodeURIComponent(ws))})}catch(Xn){throw Mr.push(gn+"type="+encodeURIComponent("_badmap")),Xn}}function yA(xr){this.l=xr.Ub||null,this.j=xr.eb||!1}mr(yA,os),yA.prototype.g=function(){return new vA(this.l,this.j)},yA.prototype.i=function(xr){return function(){return xr}}({});function vA(xr,Mr){ns.call(this),this.D=xr,this.o=Mr,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}mr(vA,ns),er=vA.prototype,er.open=function(xr,Mr){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=xr,this.A=Mr,this.readyState=1,zo(this)},er.send=function(xr){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const Mr={headers:this.u,method:this.B,credentials:this.m,cache:void 0};xr&&(Mr.body=xr),(this.D||or).fetch(new Request(this.A,Mr)).then(this.Sa.bind(this),this.ga.bind(this))},er.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rl(this)),this.readyState=0},er.Sa=function(xr){if(this.g&&(this.l=xr,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=xr.headers,this.readyState=2,zo(this)),this.g&&(this.readyState=3,zo(this),this.g)))if(this.responseType==="arraybuffer")xr.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof or.ReadableStream<"u"&&"body"in xr){if(this.j=xr.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Iu(this)}else xr.text().then(this.Ra.bind(this),this.ga.bind(this))};function Iu(xr){xr.j.read().then(xr.Pa.bind(xr)).catch(xr.ga.bind(xr))}er.Pa=function(xr){if(this.g){if(this.o&&xr.value)this.response.push(xr.value);else if(!this.o){var Mr=xr.value?xr.value:new Uint8Array(0);(Mr=this.v.decode(Mr,{stream:!xr.done}))&&(this.response=this.responseText+=Mr)}xr.done?Rl(this):zo(this),this.readyState==3&&Iu(this)}},er.Ra=function(xr){this.g&&(this.response=this.responseText=xr,Rl(this))},er.Qa=function(xr){this.g&&(this.response=xr,Rl(this))},er.ga=function(){this.g&&Rl(this)};function Rl(xr){xr.readyState=4,xr.l=null,xr.j=null,xr.v=null,zo(xr)}er.setRequestHeader=function(xr,Mr){this.u.append(xr,Mr)},er.getResponseHeader=function(xr){return this.h&&this.h.get(xr.toLowerCase())||""},er.getAllResponseHeaders=function(){if(!this.h)return"";const xr=[],Mr=this.h.entries();for(var qr=Mr.next();!qr.done;)qr=qr.value,xr.push(qr[0]+": "+qr[1]),qr=Mr.next();return xr.join(`\r
`)};function zo(xr){xr.onreadystatechange&&xr.onreadystatechange.call(xr)}Object.defineProperty(vA.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(xr){this.m=xr?"include":"same-origin"}});function Sl(xr){let Mr="";return Nr(xr,function(qr,gn){Mr+=gn,Mr+=":",Mr+=qr,Mr+=`\r
`}),Mr}function su(xr,Mr,qr){e:{for(gn in qr){var gn=!1;break e}gn=!0}gn||(qr=Sl(qr),typeof xr=="string"?qr!=null&&encodeURIComponent(String(qr)):no(xr,Mr,qr))}function to(xr){ns.call(this),this.headers=new Map,this.o=xr||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}mr(to,ns);var iu=/^https?$/i,EA=["POST","PUT"];er=to.prototype,er.Ha=function(xr){this.J=xr},er.ea=function(xr,Mr,qr,gn){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+xr);Mr=Mr?Mr.toUpperCase():"GET",this.D=xr,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ms.g(),this.v=this.o?js(this.o):js(Ms),this.g.onreadystatechange=ur(this.Ea,this);try{this.B=!0,this.g.open(Mr,String(xr),!0),this.B=!1}catch(as){ou(this,as);return}if(xr=qr||"",qr=new Map(this.headers),gn)if(Object.getPrototypeOf(gn)===Object.prototype)for(var Xn in gn)qr.set(Xn,gn[Xn]);else if(typeof gn.keys=="function"&&typeof gn.get=="function")for(const as of gn.keys())qr.set(as,gn.get(as));else throw Error("Unknown input type for opt_headers: "+String(gn));gn=Array.from(qr.keys()).find(as=>as.toLowerCase()=="content-type"),Xn=or.FormData&&xr instanceof or.FormData,!(0<=Array.prototype.indexOf.call(EA,Mr,void 0))||gn||Xn||qr.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[as,ws]of qr)this.g.setRequestHeader(as,ws);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Go(this),this.u=!0,this.g.send(xr),this.u=!1}catch(as){ou(this,as)}};function ou(xr,Mr){xr.h=!1,xr.g&&(xr.j=!0,xr.g.abort(),xr.j=!1),xr.l=Mr,xr.m=5,au(xr),eA(xr)}function au(xr){xr.A||(xr.A=!0,rs(xr,"complete"),rs(xr,"error"))}er.abort=function(xr){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=xr||7,rs(this,"complete"),rs(this,"abort"),eA(this))},er.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),eA(this,!0)),to.aa.N.call(this)},er.Ea=function(){this.s||(this.B||this.u||this.j?lu(this):this.bb())},er.bb=function(){lu(this)};function lu(xr){if(xr.h&&typeof ir<"u"&&(!xr.v[1]||bo(xr)!=4||xr.Z()!=2)){if(xr.u&&bo(xr)==4)ps(xr.Ea,0,xr);else if(rs(xr,"readystatechange"),bo(xr)==4){xr.h=!1;try{const ws=xr.Z();e:switch(ws){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Mr=!0;break e;default:Mr=!1}var qr;if(!(qr=Mr)){var gn;if(gn=ws===0){var Xn=String(xr.D).match(Mo)[1]||null;!Xn&&or.self&&or.self.location&&(Xn=or.self.location.protocol.slice(0,-1)),gn=!iu.test(Xn?Xn.toLowerCase():"")}qr=gn}if(qr)rs(xr,"complete"),rs(xr,"success");else{xr.m=6;try{var as=2<bo(xr)?xr.g.statusText:""}catch{as=""}xr.l=as+" ["+xr.Z()+"]",au(xr)}}finally{eA(xr)}}}}function eA(xr,Mr){if(xr.g){Go(xr);const qr=xr.g,gn=xr.v[0]?()=>{}:null;xr.g=null,xr.v=null,Mr||rs(xr,"ready");try{qr.onreadystatechange=gn}catch{}}}function Go(xr){xr.I&&(or.clearTimeout(xr.I),xr.I=null)}er.isActive=function(){return!!this.g};function bo(xr){return xr.g?xr.g.readyState:0}er.Z=function(){try{return 2<bo(this)?this.g.status:-1}catch{return-1}},er.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},er.Oa=function(xr){if(this.g){var Mr=this.g.responseText;return xr&&Mr.indexOf(xr)==0&&(Mr=Mr.substring(xr.length)),Mn(Mr)}};function Bu(xr){try{if(!xr.g)return null;if("response"in xr.g)return xr.g.response;switch(xr.H){case"":case"text":return xr.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in xr.g)return xr.g.mozResponseArrayBuffer}return null}catch{return null}}function Ml(xr){const Mr={};xr=(xr.g&&2<=bo(xr)&&xr.g.getAllResponseHeaders()||"").split(`\r
`);for(let gn=0;gn<xr.length;gn++){if(gr(xr[gn]))continue;var qr=Er(xr[gn]);const Xn=qr[0];if(qr=qr[1],typeof qr!="string")continue;qr=qr.trim();const as=Mr[Xn]||[];Mr[Xn]=as,as.push(qr)}_r(Mr,function(gn){return gn.join(", ")})}er.Ba=function(){return this.m},er.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Io(xr,Mr,qr){return qr&&qr.internalChannelParams&&qr.internalChannelParams[xr]||Mr}function _A(xr){this.Aa=0,this.i=[],this.j=new As,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Io("failFast",!1,xr),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Io("baseRetryDelayMs",5e3,xr),this.cb=Io("retryDelaySeedMs",1e4,xr),this.Wa=Io("forwardChannelMaxRetries",2,xr),this.wa=Io("forwardChannelRequestTimeoutMs",2e4,xr),this.pa=xr&&xr.xmlHttpFactory||void 0,this.Xa=xr&&xr.Tb||void 0,this.Ca=xr&&xr.useFetchStreams||!1,this.L=void 0,this.J=xr&&xr.supportsCrossDomainXhr||!1,this.K="",this.h=new XA(xr&&xr.concurrentRequestLimit),this.Da=new xA,this.P=xr&&xr.fastHandshake||!1,this.O=xr&&xr.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=xr&&xr.Rb||!1,xr&&xr.xa&&this.j.xa(),xr&&xr.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&xr&&xr.detectBufferingProxy||!1,this.ja=void 0,xr&&xr.longPollingTimeout&&0<xr.longPollingTimeout&&(this.ja=xr.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}er=_A.prototype,er.la=8,er.G=1,er.connect=function(xr,Mr,qr,gn){Dn(0),this.W=xr,this.H=Mr||{},qr&&gn!==void 0&&(this.H.OSID=qr,this.H.OAID=gn),this.F=this.X,this.I=Fr(this,null,this.W),bA(this)};function Tl(xr){if(tA(xr),xr.G==3){var Mr=xr.U++,qr=Lo(xr.I);if(no(qr,"SID",xr.K),no(qr,"RID",Mr),no(qr,"TYPE","terminate"),Ql(xr,qr),Mr=new Hs(xr,xr.j,Mr),Mr.L=2,Mr.v=Zl(Lo(qr)),qr=!1,or.navigator&&or.navigator.sendBeacon)try{qr=or.navigator.sendBeacon(Mr.v.toString(),"")}catch{}!qr&&or.Image&&(new Image().src=Mr.v,qr=!0),qr||(Mr.g=An(Mr.j,null),Mr.g.ea(Mr.v)),Mr.F=Date.now(),hA(Mr)}PA(xr)}function wA(xr){xr.g&&(TA(xr),xr.g.cancel(),xr.g=null)}function tA(xr){wA(xr),xr.u&&(or.clearTimeout(xr.u),xr.u=null),Il(xr),xr.h.cancel(),xr.s&&(typeof xr.s=="number"&&or.clearTimeout(xr.s),xr.s=null)}function bA(xr){if(!wu(xr.h)&&!xr.s){xr.s=!0;var Mr=xr.Ga;Wr||Xr(),Hr||(Wr(),Hr=!0),$r.add(Mr,xr),xr.B=0}}function cu(xr,Mr){return Yl(xr.h)>=xr.h.j-(xr.s?1:0)?!1:xr.s?(xr.i=Mr.D.concat(xr.i),!0):xr.G==1||xr.G==2||xr.B>=(xr.Va?0:xr.Wa)?!1:(xr.s=cs(ur(xr.Ga,xr,Mr),IA(xr,xr.B)),xr.B++,!0)}er.Ga=function(xr){if(this.s)if(this.s=null,this.G==1){if(!xr){this.U=Math.floor(1e5*Math.random()),xr=this.U++;const Xn=new Hs(this,this.j,xr);let as=this.o;if(this.S&&(as?(as=vr(as),Pr(as,this.S)):as=this.S),this.m!==null||this.O||(Xn.H=as,as=null),this.P)e:{for(var Mr=0,qr=0;qr<this.i.length;qr++){t:{var gn=this.i[qr];if("__data__"in gn.map&&(gn=gn.map.__data__,typeof gn=="string")){gn=gn.length;break t}gn=void 0}if(gn===void 0)break;if(Mr+=gn,4096<Mr){Mr=qr;break e}if(Mr===4096||qr===this.i.length-1){Mr=qr+1;break e}}Mr=1e3}else Mr=1e3;Mr=rA(this,Xn,Mr),qr=Lo(this.I),no(qr,"RID",xr),no(qr,"CVER",22),this.D&&no(qr,"X-HTTP-Session-Id",this.D),Ql(this,qr),as&&(this.O?Mr="headers="+encodeURIComponent(String(Sl(as)))+"&"+Mr:this.m&&su(qr,this.m,as)),ho(this.h,Xn),this.Ua&&no(qr,"TYPE","init"),this.P?(no(qr,"$req",Mr),no(qr,"SID","null"),Xn.T=!0,wo(Xn,qr,null)):wo(Xn,qr,Mr),this.G=2}}else this.G==3&&(xr?CA(this,xr):this.i.length==0||wu(this.h)||CA(this))};function CA(xr,Mr){var qr;Mr?qr=Mr.l:qr=xr.U++;const gn=Lo(xr.I);no(gn,"SID",xr.K),no(gn,"RID",qr),no(gn,"AID",xr.T),Ql(xr,gn),xr.m&&xr.o&&su(gn,xr.m,xr.o),qr=new Hs(xr,xr.j,qr,xr.B+1),xr.m===null&&(qr.H=xr.o),Mr&&(xr.i=Mr.D.concat(xr.i)),Mr=rA(xr,qr,1e3),qr.I=Math.round(.5*xr.wa)+Math.round(.5*xr.wa*Math.random()),ho(xr.h,qr),wo(qr,gn,Mr)}function Ql(xr,Mr){xr.H&&Nr(xr.H,function(qr,gn){no(Mr,gn,qr)}),xr.l&&Cu({},function(qr,gn){no(Mr,gn,qr)})}function rA(xr,Mr,qr){qr=Math.min(xr.i.length,qr);var gn=xr.l?ur(xr.l.Na,xr.l,xr):null;e:{var Xn=xr.i;let as=-1;for(;;){const ws=["count="+qr];as==-1?0<qr?(as=Xn[0].g,ws.push("ofs="+as)):as=0:ws.push("ofs="+as);let Gs=!0;for(let Xs=0;Xs<qr;Xs++){let Ws=Xn[Xs].g;const ro=Xn[Xs].map;if(Ws-=as,0>Ws)as=Math.max(0,Xn[Xs].g-100),Gs=!1;else try{nu(ro,ws,"req"+Ws+"_")}catch{gn&&gn(ro)}}if(Gs){gn=ws.join("&");break e}}}return xr=xr.i.splice(0,qr),Mr.D=xr,gn}function RA(xr){if(!xr.g&&!xr.u){xr.Y=1;var Mr=xr.Fa;Wr||Xr(),Hr||(Wr(),Hr=!0),$r.add(Mr,xr),xr.v=0}}function nA(xr){return xr.g||xr.u||3<=xr.v?!1:(xr.Y++,xr.u=cs(ur(xr.Fa,xr),IA(xr,xr.v)),xr.v++,!0)}er.Fa=function(){if(this.u=null,Pu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var xr=2*this.R;this.j.info("BP detection timer enabled: "+xr),this.A=cs(ur(this.ab,this),xr)}},er.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dn(10),wA(this),Pu(this))};function TA(xr){xr.A!=null&&(or.clearTimeout(xr.A),xr.A=null)}function Pu(xr){xr.g=new Hs(xr,xr.j,"rpc",xr.Y),xr.m===null&&(xr.g.H=xr.o),xr.g.O=0;var Mr=Lo(xr.qa);no(Mr,"RID","rpc"),no(Mr,"SID",xr.K),no(Mr,"AID",xr.T),no(Mr,"CI",xr.F?"0":"1"),!xr.F&&xr.ja&&no(Mr,"TO",xr.ja),no(Mr,"TYPE","xmlhttp"),Ql(xr,Mr),xr.m&&xr.o&&su(Mr,xr.m,xr.o),xr.L&&(xr.g.I=xr.L);var qr=xr.g;xr=xr.ia,qr.L=1,qr.v=Zl(Lo(Mr)),qr.m=null,qr.P=!0,Ro(qr,xr)}er.Za=function(){this.C!=null&&(this.C=null,wA(this),nA(this),Dn(19))};function Il(xr){xr.C!=null&&(or.clearTimeout(xr.C),xr.C=null)}function Vl(xr,Mr){var qr=null;if(xr.g==Mr){Il(xr),TA(xr),xr.g=null;var gn=2}else if(YA(xr.h,Mr))qr=Mr.D,JA(xr.h,Mr),gn=1;else return;if(xr.G!=0){if(Mr.o)if(gn==1){qr=Mr.m?Mr.m.length:0,Mr=Date.now()-Mr.F;var Xn=xr.B;gn=Ss(),rs(gn,new Zn(gn,qr)),bA(xr)}else RA(xr);else if(Xn=Mr.s,Xn==3||Xn==0&&0<Mr.X||!(gn==1&&cu(xr,Mr)||gn==2&&nA(xr)))switch(qr&&0<qr.length&&(Mr=xr.h,Mr.i=Mr.i.concat(qr)),Xn){case 1:Fo(xr,5);break;case 4:Fo(xr,10);break;case 3:Fo(xr,6);break;default:Fo(xr,2)}}}function IA(xr,Mr){let qr=xr.Ta+Math.floor(Math.random()*xr.cb);return xr.isActive()||(qr*=2),qr*Mr}function Fo(xr,Mr){if(xr.j.info("Error code "+Mr),Mr==2){var qr=ur(xr.fb,xr),gn=xr.Xa;const Xn=!gn;gn=new po(gn||"//www.google.com/images/cleardot.gif"),or.location&&or.location.protocol=="http"||Jl(gn,"https"),Zl(gn),Xn?Zo(gn.toString(),qr):Tu(gn.toString(),qr)}else Dn(2);xr.G=0,xr.l&&xr.l.sa(Mr),PA(xr),tA(xr)}er.fb=function(xr){xr?(this.j.info("Successfully pinged google.com"),Dn(2)):(this.j.info("Failed to ping google.com"),Dn(1))};function PA(xr){if(xr.G=0,xr.ka=[],xr.l){const Mr=ZA(xr.h);(Mr.length!=0||xr.i.length!=0)&&(yr(xr.ka,Mr),yr(xr.ka,xr.i),xr.h.i.length=0,pr(xr.i),xr.i.length=0),xr.l.ra()}}function Fr(xr,Mr,qr){var gn=qr instanceof po?Lo(qr):new po(qr);if(gn.g!="")Mr&&(gn.g=Mr+"."+gn.g),pA(gn,gn.s);else{var Xn=or.location;gn=Xn.protocol,Mr=Mr?Mr+"."+Xn.hostname:Xn.hostname,Xn=+Xn.port;var as=new po(null);gn&&Jl(as,gn),Mr&&(as.g=Mr),Xn&&pA(as,Xn),qr&&(as.l=qr),gn=as}return qr=xr.D,Mr=xr.ya,qr&&Mr&&no(gn,qr,Mr),no(gn,"VER",xr.la),Ql(xr,gn),gn}function An(xr,Mr,qr){if(Mr&&!xr.J)throw Error("Can't create secondary domain capable XhrIo object.");return Mr=xr.Ca&&!xr.pa?new to(new yA({eb:qr})):new to(xr.pa),Mr.Ha(xr.J),Mr}er.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pn(){}er=Pn.prototype,er.ua=function(){},er.ta=function(){},er.sa=function(){},er.ra=function(){},er.isActive=function(){return!0},er.Na=function(){};function Qn(){}Qn.prototype.g=function(xr,Mr){return new Yn(xr,Mr)};function Yn(xr,Mr){ns.call(this),this.g=new _A(Mr),this.l=xr,this.h=Mr&&Mr.messageUrlParams||null,xr=Mr&&Mr.messageHeaders||null,Mr&&Mr.clientProtocolHeaderRequired&&(xr?xr["X-Client-Protocol"]="webchannel":xr={"X-Client-Protocol":"webchannel"}),this.g.o=xr,xr=Mr&&Mr.initMessageHeaders||null,Mr&&Mr.messageContentType&&(xr?xr["X-WebChannel-Content-Type"]=Mr.messageContentType:xr={"X-WebChannel-Content-Type":Mr.messageContentType}),Mr&&Mr.va&&(xr?xr["X-WebChannel-Client-Profile"]=Mr.va:xr={"X-WebChannel-Client-Profile":Mr.va}),this.g.S=xr,(xr=Mr&&Mr.Sb)&&!gr(xr)&&(this.g.m=xr),this.v=Mr&&Mr.supportsCrossDomainXhr||!1,this.u=Mr&&Mr.sendRawJson||!1,(Mr=Mr&&Mr.httpSessionIdParam)&&!gr(Mr)&&(this.g.D=Mr,xr=this.h,xr!==null&&Mr in xr&&(xr=this.h,Mr in xr&&delete xr[Mr])),this.j=new ks(this)}mr(Yn,ns),Yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yn.prototype.close=function(){Tl(this.g)},Yn.prototype.o=function(xr){var Mr=this.g;if(typeof xr=="string"){var qr={};qr.__data__=xr,xr=qr}else this.u&&(qr={},qr.__data__=ts(xr),xr=qr);Mr.i.push(new rp(Mr.Ya++,xr)),Mr.G==3&&bA(Mr)},Yn.prototype.N=function(){this.g.l=null,delete this.j,Tl(this.g),delete this.g,Yn.aa.N.call(this)};function hs(xr){es.call(this),xr.__headers__&&(this.headers=xr.__headers__,this.statusCode=xr.__status__,delete xr.__headers__,delete xr.__status__);var Mr=xr.__sm__;if(Mr){e:{for(const qr in Mr){xr=qr;break e}xr=void 0}(this.i=xr)&&(xr=this.i,Mr=Mr!==null&&xr in Mr?Mr[xr]:void 0),this.data=Mr}else this.data=xr}mr(hs,es);function _s(){ds.call(this),this.status=1}mr(_s,ds);function ks(xr){this.g=xr}mr(ks,Pn),ks.prototype.ua=function(){rs(this.g,"a")},ks.prototype.ta=function(xr){rs(this.g,new hs(xr))},ks.prototype.sa=function(xr){rs(this.g,new _s)},ks.prototype.ra=function(){rs(this.g,"b")},Qn.prototype.createWebChannel=Qn.prototype.g,Yn.prototype.send=Yn.prototype.o,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,createWebChannelTransport=function(){return new Qn},getStatEventTarget=function(){return Ss()},Event$1=fs,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bs.NO_ERROR=0,Bs.TIMEOUT=8,Bs.HTTP_ERROR=6,ErrorCode$1=Bs,Us.COMPLETE="complete",EventType=Us,bs.EventType=Rn,Rn.OPEN="a",Rn.CLOSE="b",Rn.ERROR="c",Rn.MESSAGE="d",ns.prototype.listen=ns.prototype.K,WebChannel=bs,to.prototype.listenOnce=to.prototype.L,to.prototype.getLastError=to.prototype.Ka,to.prototype.getLastErrorCode=to.prototype.Ba,to.prototype.getStatus=to.prototype.Z,to.prototype.getResponseJson=to.prototype.Oa,to.prototype.getResponseText=to.prototype.oa,to.prototype.send=to.prototype.ea,to.prototype.setWithCredentials=to.prototype.Ha,XhrIo=to}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const F$2="@firebase/firestore",M$1="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(_e){this.uid=_e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(_e){return _e.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x$2="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$1=new Logger$1("@firebase/firestore");function __PRIVATE_getLogLevel(){return O$1.logLevel}function __PRIVATE_logDebug(er,..._e){if(O$1.logLevel<=LogLevel.DEBUG){const tr=_e.map(__PRIVATE_argToString);O$1.debug(`Firestore (${x$2}): ${er}`,...tr)}}function __PRIVATE_logError(er,..._e){if(O$1.logLevel<=LogLevel.ERROR){const tr=_e.map(__PRIVATE_argToString);O$1.error(`Firestore (${x$2}): ${er}`,...tr)}}function __PRIVATE_logWarn(er,..._e){if(O$1.logLevel<=LogLevel.WARN){const tr=_e.map(__PRIVATE_argToString);O$1.warn(`Firestore (${x$2}): ${er}`,...tr)}}function __PRIVATE_argToString(er){if(typeof er=="string")return er;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(tr){return JSON.stringify(tr)}(er)}catch{return er}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(er,_e,tr){let rr="Unexpected state";typeof _e=="string"?rr=_e:tr=_e,__PRIVATE__fail(er,rr,tr)}function __PRIVATE__fail(er,_e,tr){let rr=`FIRESTORE (${x$2}) INTERNAL ASSERTION FAILED: ${_e} (ID: ${er.toString(16)})`;if(tr!==void 0)try{rr+=" CONTEXT: "+JSON.stringify(tr)}catch{rr+=" CONTEXT: "+tr}throw __PRIVATE_logError(rr),new Error(rr)}function __PRIVATE_hardAssert(er,_e,tr,rr){let nr="Unexpected state";typeof tr=="string"?nr=tr:rr=tr,er||__PRIVATE__fail(_e,nr,rr)}function __PRIVATE_debugCast(er,_e){return er}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(_e,tr){super(_e,tr),this.code=_e,this.message=tr,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((_e,tr)=>{this.resolve=_e,this.reject=tr})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(_e,tr){this.user=tr,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${_e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(_e,tr){_e.enqueueRetryable(()=>tr(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(_e){this.token=_e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(_e,tr){this.changeListener=tr,_e.enqueueRetryable(()=>tr(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(_e){this.t=_e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(_e,tr){__PRIVATE_hardAssert(this.o===void 0,42304);let rr=this.i;const nr=ar=>this.i!==rr?(rr=this.i,tr(ar)):Promise.resolve();let sr=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),sr.resolve(),sr=new __PRIVATE_Deferred,_e.enqueueRetryable(()=>nr(this.currentUser))};const ir=()=>{const ar=sr;_e.enqueueRetryable(async()=>{await ar.promise,await nr(this.currentUser)})},or=ar=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ar,this.o&&(this.auth.addAuthTokenListener(this.o),ir())};this.t.onInit(ar=>or(ar)),setTimeout(()=>{if(!this.auth){const ar=this.t.getImmediate({optional:!0});ar?or(ar):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),sr.resolve(),sr=new __PRIVATE_Deferred)}},0),ir()}getToken(){const _e=this.i,tr=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(tr).then(rr=>this.i!==_e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):rr?(__PRIVATE_hardAssert(typeof rr.accessToken=="string",31837,{l:rr}),new __PRIVATE_OAuthToken(rr.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const _e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(_e===null||typeof _e=="string",2055,{h:_e}),new User(_e)}}class __PRIVATE_FirstPartyToken{constructor(_e,tr,rr){this.P=_e,this.T=tr,this.I=rr,this.type="FirstParty",this.user=User.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const _e=this.R();return _e&&this.A.set("Authorization",_e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(_e,tr,rr){this.P=_e,this.T=tr,this.I=rr}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(_e,tr){_e.enqueueRetryable(()=>tr(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(_e){this.value=_e,this.type="AppCheck",this.headers=new Map,_e&&_e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(_e,tr){this.V=tr,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(_e)&&_e.settings.appCheckToken&&(this.p=_e.settings.appCheckToken)}start(_e,tr){__PRIVATE_hardAssert(this.o===void 0,3512);const rr=sr=>{sr.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${sr.error.message}`);const ir=sr.token!==this.m;return this.m=sr.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${ir?"new":"existing"} token.`),ir?tr(sr.token):Promise.resolve()};this.o=sr=>{_e.enqueueRetryable(()=>rr(sr))};const nr=sr=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=sr,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(sr=>nr(sr)),setTimeout(()=>{if(!this.appCheck){const sr=this.V.getImmediate({optional:!0});sr?nr(sr):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const _e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(_e).then(tr=>tr?(__PRIVATE_hardAssert(typeof tr.token=="string",44558,{tokenResult:tr}),this.m=tr.token,new AppCheckToken(tr.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(er){const _e=typeof self<"u"&&(self.crypto||self.msCrypto),tr=new Uint8Array(er);if(_e&&typeof _e.getRandomValues=="function")_e.getRandomValues(tr);else for(let rr=0;rr<er;rr++)tr[rr]=Math.floor(256*Math.random());return tr}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const _e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",tr=62*Math.floor(4.129032258064516);let rr="";for(;rr.length<20;){const nr=__PRIVATE_randomBytes(40);for(let sr=0;sr<nr.length;++sr)rr.length<20&&nr[sr]<tr&&(rr+=_e.charAt(nr[sr]%62))}return rr}}function __PRIVATE_primitiveComparator(er,_e){return er<_e?-1:er>_e?1:0}function __PRIVATE_compareUtf8Strings(er,_e){let tr=0;for(;tr<er.length&&tr<_e.length;){const rr=er.codePointAt(tr),nr=_e.codePointAt(tr);if(rr!==nr){if(rr<128&&nr<128)return __PRIVATE_primitiveComparator(rr,nr);{const sr=__PRIVATE_newTextEncoder(),ir=__PRIVATE_compareByteArrays$1(sr.encode(__PRIVATE_getUtf8SafeSubstring(er,tr)),sr.encode(__PRIVATE_getUtf8SafeSubstring(_e,tr)));return ir!==0?ir:__PRIVATE_primitiveComparator(rr,nr)}}tr+=rr>65535?2:1}return __PRIVATE_primitiveComparator(er.length,_e.length)}function __PRIVATE_getUtf8SafeSubstring(er,_e){return er.codePointAt(_e)>65535?er.substring(_e,_e+2):er.substring(_e,_e+1)}function __PRIVATE_compareByteArrays$1(er,_e){for(let tr=0;tr<er.length&&tr<_e.length;++tr)if(er[tr]!==_e[tr])return __PRIVATE_primitiveComparator(er[tr],_e[tr]);return __PRIVATE_primitiveComparator(er.length,_e.length)}function __PRIVATE_arrayEquals(er,_e,tr){return er.length===_e.length&&er.every((rr,nr)=>tr(rr,_e[nr]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$1=-62135596800,L$2=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(_e){return Timestamp.fromMillis(_e.getTime())}static fromMillis(_e){const tr=Math.floor(_e/1e3),rr=Math.floor((_e-1e3*tr)*L$2);return new Timestamp(tr,rr)}constructor(_e,tr){if(this.seconds=_e,this.nanoseconds=tr,tr<0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+tr);if(tr>=1e9)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+tr);if(_e<B$1)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+_e);if(_e>=253402300800)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+_e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/L$2}_compareTo(_e){return this.seconds===_e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,_e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,_e.seconds)}isEqual(_e){return _e.seconds===this.seconds&&_e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const _e=this.seconds-B$1;return String(_e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(_e){return new SnapshotVersion(_e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(_e){this.timestamp=_e}compareTo(_e){return this.timestamp._compareTo(_e.timestamp)}isEqual(_e){return this.timestamp.isEqual(_e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$1="__name__";class BasePath{constructor(_e,tr,rr){tr===void 0?tr=0:tr>_e.length&&fail(637,{offset:tr,range:_e.length}),rr===void 0?rr=_e.length-tr:rr>_e.length-tr&&fail(1746,{length:rr,range:_e.length-tr}),this.segments=_e,this.offset=tr,this.len=rr}get length(){return this.len}isEqual(_e){return BasePath.comparator(this,_e)===0}child(_e){const tr=this.segments.slice(this.offset,this.limit());return _e instanceof BasePath?_e.forEach(rr=>{tr.push(rr)}):tr.push(_e),this.construct(tr)}limit(){return this.offset+this.length}popFirst(_e){return _e=_e===void 0?1:_e,this.construct(this.segments,this.offset+_e,this.length-_e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(_e){return this.segments[this.offset+_e]}isEmpty(){return this.length===0}isPrefixOf(_e){if(_e.length<this.length)return!1;for(let tr=0;tr<this.length;tr++)if(this.get(tr)!==_e.get(tr))return!1;return!0}isImmediateParentOf(_e){if(this.length+1!==_e.length)return!1;for(let tr=0;tr<this.length;tr++)if(this.get(tr)!==_e.get(tr))return!1;return!0}forEach(_e){for(let tr=this.offset,rr=this.limit();tr<rr;tr++)_e(this.segments[tr])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(_e,tr){const rr=Math.min(_e.length,tr.length);for(let nr=0;nr<rr;nr++){const sr=BasePath.compareSegments(_e.get(nr),tr.get(nr));if(sr!==0)return sr}return __PRIVATE_primitiveComparator(_e.length,tr.length)}static compareSegments(_e,tr){const rr=BasePath.isNumericId(_e),nr=BasePath.isNumericId(tr);return rr&&!nr?-1:!rr&&nr?1:rr&&nr?BasePath.extractNumericId(_e).compare(BasePath.extractNumericId(tr)):__PRIVATE_compareUtf8Strings(_e,tr)}static isNumericId(_e){return _e.startsWith("__id")&&_e.endsWith("__")}static extractNumericId(_e){return Integer.fromString(_e.substring(4,_e.length-2))}}class ResourcePath extends BasePath{construct(_e,tr,rr){return new ResourcePath(_e,tr,rr)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(..._e){const tr=[];for(const rr of _e){if(rr.indexOf("//")>=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid segment (${rr}). Paths must not contain // in them.`);tr.push(...rr.split("/").filter(nr=>nr.length>0))}return new ResourcePath(tr)}static emptyPath(){return new ResourcePath([])}}const q$1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(_e,tr,rr){return new FieldPath$1(_e,tr,rr)}static isValidIdentifier(_e){return q$1.test(_e)}canonicalString(){return this.toArray().map(_e=>(_e=_e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(_e)||(_e="`"+_e+"`"),_e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k$1}static keyField(){return new FieldPath$1([k$1])}static fromServerFormat(_e){const tr=[];let rr="",nr=0;const sr=()=>{if(rr.length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid field path (${_e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);tr.push(rr),rr=""};let ir=!1;for(;nr<_e.length;){const or=_e[nr];if(or==="\\"){if(nr+1===_e.length)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Path has trailing escape character: "+_e);const ar=_e[nr+1];if(ar!=="\\"&&ar!=="."&&ar!=="`")throw new FirestoreError(N$1.INVALID_ARGUMENT,"Path has invalid escape sequence: "+_e);rr+=ar,nr+=2}else or==="`"?(ir=!ir,nr++):or!=="."||ir?(rr+=or,nr++):(sr(),nr++)}if(sr(),ir)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Unterminated ` in path: "+_e);return new FieldPath$1(tr)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(_e){this.path=_e}static fromPath(_e){return new DocumentKey(ResourcePath.fromString(_e))}static fromName(_e){return new DocumentKey(ResourcePath.fromString(_e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(_e){return this.path.length>=2&&this.path.get(this.path.length-2)===_e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(_e){return _e!==null&&ResourcePath.comparator(this.path,_e.path)===0}toString(){return this.path.toString()}static comparator(_e,tr){return ResourcePath.comparator(_e.path,tr.path)}static isDocumentKey(_e){return _e.length%2==0}static fromSegments(_e){return new DocumentKey(new ResourcePath(_e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$1=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(er,_e){const tr=er.toTimestamp().seconds,rr=er.toTimestamp().nanoseconds+1,nr=SnapshotVersion.fromTimestamp(rr===1e9?new Timestamp(tr+1,0):new Timestamp(tr,rr));return new IndexOffset(nr,DocumentKey.empty(),_e)}function __PRIVATE_newIndexOffsetFromDocument(er){return new IndexOffset(er.readTime,er.key,Q$1)}class IndexOffset{constructor(_e,tr,rr){this.readTime=_e,this.documentKey=tr,this.largestBatchId=rr}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),Q$1)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),Q$1)}}function __PRIVATE_indexOffsetComparator(er,_e){let tr=er.readTime.compareTo(_e.readTime);return tr!==0?tr:(tr=DocumentKey.comparator(er.documentKey,_e.documentKey),tr!==0?tr:__PRIVATE_primitiveComparator(er.largestBatchId,_e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(_e){this.onCommittedListeners.push(_e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(_e=>_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(er){if(er.code!==N$1.FAILED_PRECONDITION||er.message!==$$1)throw er;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(_e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,_e(tr=>{this.isDone=!0,this.result=tr,this.nextCallback&&this.nextCallback(tr)},tr=>{this.isDone=!0,this.error=tr,this.catchCallback&&this.catchCallback(tr)})}catch(_e){return this.next(void 0,_e)}next(_e,tr){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(tr,this.error):this.wrapSuccess(_e,this.result):new PersistencePromise((rr,nr)=>{this.nextCallback=sr=>{this.wrapSuccess(_e,sr).next(rr,nr)},this.catchCallback=sr=>{this.wrapFailure(tr,sr).next(rr,nr)}})}toPromise(){return new Promise((_e,tr)=>{this.next(_e,tr)})}wrapUserFunction(_e){try{const tr=_e();return tr instanceof PersistencePromise?tr:PersistencePromise.resolve(tr)}catch(tr){return PersistencePromise.reject(tr)}}wrapSuccess(_e,tr){return _e?this.wrapUserFunction(()=>_e(tr)):PersistencePromise.resolve(tr)}wrapFailure(_e,tr){return _e?this.wrapUserFunction(()=>_e(tr)):PersistencePromise.reject(tr)}static resolve(_e){return new PersistencePromise((tr,rr)=>{tr(_e)})}static reject(_e){return new PersistencePromise((tr,rr)=>{rr(_e)})}static waitFor(_e){return new PersistencePromise((tr,rr)=>{let nr=0,sr=0,ir=!1;_e.forEach(or=>{++nr,or.next(()=>{++sr,ir&&sr===nr&&tr()},ar=>rr(ar))}),ir=!0,sr===nr&&tr()})}static or(_e){let tr=PersistencePromise.resolve(!1);for(const rr of _e)tr=tr.next(nr=>nr?PersistencePromise.resolve(nr):rr());return tr}static forEach(_e,tr){const rr=[];return _e.forEach((nr,sr)=>{rr.push(tr.call(this,nr,sr))}),this.waitFor(rr)}static mapArray(_e,tr){return new PersistencePromise((rr,nr)=>{const sr=_e.length,ir=new Array(sr);let or=0;for(let ar=0;ar<sr;ar++){const lr=ar;tr(_e[lr]).next(cr=>{ir[lr]=cr,++or,or===sr&&rr(ir)},cr=>nr(cr))}})}static doWhile(_e,tr){return new PersistencePromise((rr,nr)=>{const sr=()=>{_e()===!0?tr().next(()=>{sr()},nr):rr()};sr()})}}function __PRIVATE_getAndroidVersion(er){const _e=er.match(/Android ([\d.]+)/i),tr=_e?_e[1].split(".").slice(0,2).join("."):"-1";return Number(tr)}function __PRIVATE_isIndexedDbTransactionError(er){return er.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(_e,tr){this.previousValue=_e,tr&&(tr.sequenceNumberHandler=rr=>this.ue(rr),this.ce=rr=>tr.writeSequenceNumber(rr))}ue(_e){return this.previousValue=Math.max(_e,this.previousValue),this.previousValue}next(){const _e=++this.previousValue;return this.ce&&this.ce(_e),_e}}__PRIVATE_ListenSequence.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$1=-1;function __PRIVATE_isNullOrUndefined(er){return er==null}function __PRIVATE_isNegativeZero(er){return er===0&&1/er==-1/0}function isSafeInteger(er){return typeof er=="number"&&Number.isInteger(er)&&!__PRIVATE_isNegativeZero(er)&&er<=Number.MAX_SAFE_INTEGER&&er>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$2="";function __PRIVATE_encodeResourcePath(er){let _e="";for(let tr=0;tr<er.length;tr++)_e.length>0&&(_e=__PRIVATE_encodeSeparator(_e)),_e=__PRIVATE_encodeSegment(er.get(tr),_e);return __PRIVATE_encodeSeparator(_e)}function __PRIVATE_encodeSegment(er,_e){let tr=_e;const rr=er.length;for(let nr=0;nr<rr;nr++){const sr=er.charAt(nr);switch(sr){case"\0":tr+="";break;case z$2:tr+="";break;default:tr+=sr}}return tr}function __PRIVATE_encodeSeparator(er){return er+z$2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(er){let _e=0;for(const tr in er)Object.prototype.hasOwnProperty.call(er,tr)&&_e++;return _e}function forEach(er,_e){for(const tr in er)Object.prototype.hasOwnProperty.call(er,tr)&&_e(tr,er[tr])}function isEmpty(er){for(const _e in er)if(Object.prototype.hasOwnProperty.call(er,_e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(_e,tr){this.comparator=_e,this.root=tr||LLRBNode.EMPTY}insert(_e,tr){return new SortedMap(this.comparator,this.root.insert(_e,tr,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(_e){return new SortedMap(this.comparator,this.root.remove(_e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(_e){let tr=this.root;for(;!tr.isEmpty();){const rr=this.comparator(_e,tr.key);if(rr===0)return tr.value;rr<0?tr=tr.left:rr>0&&(tr=tr.right)}return null}indexOf(_e){let tr=0,rr=this.root;for(;!rr.isEmpty();){const nr=this.comparator(_e,rr.key);if(nr===0)return tr+rr.left.size;nr<0?rr=rr.left:(tr+=rr.left.size+1,rr=rr.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(_e){return this.root.inorderTraversal(_e)}forEach(_e){this.inorderTraversal((tr,rr)=>(_e(tr,rr),!1))}toString(){const _e=[];return this.inorderTraversal((tr,rr)=>(_e.push(`${tr}:${rr}`),!1)),`{${_e.join(", ")}}`}reverseTraversal(_e){return this.root.reverseTraversal(_e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(_e){return new SortedMapIterator(this.root,_e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(_e){return new SortedMapIterator(this.root,_e,this.comparator,!0)}}class SortedMapIterator{constructor(_e,tr,rr,nr){this.isReverse=nr,this.nodeStack=[];let sr=1;for(;!_e.isEmpty();)if(sr=tr?rr(_e.key,tr):1,tr&&nr&&(sr*=-1),sr<0)_e=this.isReverse?_e.left:_e.right;else{if(sr===0){this.nodeStack.push(_e);break}this.nodeStack.push(_e),_e=this.isReverse?_e.right:_e.left}}getNext(){let _e=this.nodeStack.pop();const tr={key:_e.key,value:_e.value};if(this.isReverse)for(_e=_e.left;!_e.isEmpty();)this.nodeStack.push(_e),_e=_e.right;else for(_e=_e.right;!_e.isEmpty();)this.nodeStack.push(_e),_e=_e.left;return tr}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const _e=this.nodeStack[this.nodeStack.length-1];return{key:_e.key,value:_e.value}}}class LLRBNode{constructor(_e,tr,rr,nr,sr){this.key=_e,this.value=tr,this.color=rr??LLRBNode.RED,this.left=nr??LLRBNode.EMPTY,this.right=sr??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(_e,tr,rr,nr,sr){return new LLRBNode(_e??this.key,tr??this.value,rr??this.color,nr??this.left,sr??this.right)}isEmpty(){return!1}inorderTraversal(_e){return this.left.inorderTraversal(_e)||_e(this.key,this.value)||this.right.inorderTraversal(_e)}reverseTraversal(_e){return this.right.reverseTraversal(_e)||_e(this.key,this.value)||this.left.reverseTraversal(_e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(_e,tr,rr){let nr=this;const sr=rr(_e,nr.key);return nr=sr<0?nr.copy(null,null,null,nr.left.insert(_e,tr,rr),null):sr===0?nr.copy(null,tr,null,null,null):nr.copy(null,null,null,null,nr.right.insert(_e,tr,rr)),nr.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let _e=this;return _e.left.isRed()||_e.left.left.isRed()||(_e=_e.moveRedLeft()),_e=_e.copy(null,null,null,_e.left.removeMin(),null),_e.fixUp()}remove(_e,tr){let rr,nr=this;if(tr(_e,nr.key)<0)nr.left.isEmpty()||nr.left.isRed()||nr.left.left.isRed()||(nr=nr.moveRedLeft()),nr=nr.copy(null,null,null,nr.left.remove(_e,tr),null);else{if(nr.left.isRed()&&(nr=nr.rotateRight()),nr.right.isEmpty()||nr.right.isRed()||nr.right.left.isRed()||(nr=nr.moveRedRight()),tr(_e,nr.key)===0){if(nr.right.isEmpty())return LLRBNode.EMPTY;rr=nr.right.min(),nr=nr.copy(rr.key,rr.value,null,null,nr.right.removeMin())}nr=nr.copy(null,null,null,null,nr.right.remove(_e,tr))}return nr.fixUp()}isRed(){return this.color}fixUp(){let _e=this;return _e.right.isRed()&&!_e.left.isRed()&&(_e=_e.rotateLeft()),_e.left.isRed()&&_e.left.left.isRed()&&(_e=_e.rotateRight()),_e.left.isRed()&&_e.right.isRed()&&(_e=_e.colorFlip()),_e}moveRedLeft(){let _e=this.colorFlip();return _e.right.left.isRed()&&(_e=_e.copy(null,null,null,null,_e.right.rotateRight()),_e=_e.rotateLeft(),_e=_e.colorFlip()),_e}moveRedRight(){let _e=this.colorFlip();return _e.left.left.isRed()&&(_e=_e.rotateRight(),_e=_e.colorFlip()),_e}rotateLeft(){const _e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,_e,null)}rotateRight(){const _e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,_e)}colorFlip(){const _e=this.left.copy(null,null,!this.left.color,null,null),tr=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,_e,tr)}checkMaxDepth(){const _e=this.check();return Math.pow(2,_e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const _e=this.left.check();if(_e!==this.right.check())throw fail(27949);return _e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(_e,tr,rr,nr,sr){return this}insert(_e,tr,rr){return new LLRBNode(_e,tr)}remove(_e,tr){return this}isEmpty(){return!0}inorderTraversal(_e){return!1}reverseTraversal(_e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(_e){this.comparator=_e,this.data=new SortedMap(this.comparator)}has(_e){return this.data.get(_e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(_e){return this.data.indexOf(_e)}forEach(_e){this.data.inorderTraversal((tr,rr)=>(_e(tr),!1))}forEachInRange(_e,tr){const rr=this.data.getIteratorFrom(_e[0]);for(;rr.hasNext();){const nr=rr.getNext();if(this.comparator(nr.key,_e[1])>=0)return;tr(nr.key)}}forEachWhile(_e,tr){let rr;for(rr=tr!==void 0?this.data.getIteratorFrom(tr):this.data.getIterator();rr.hasNext();)if(!_e(rr.getNext().key))return}firstAfterOrEqual(_e){const tr=this.data.getIteratorFrom(_e);return tr.hasNext()?tr.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(_e){return new SortedSetIterator(this.data.getIteratorFrom(_e))}add(_e){return this.copy(this.data.remove(_e).insert(_e,!0))}delete(_e){return this.has(_e)?this.copy(this.data.remove(_e)):this}isEmpty(){return this.data.isEmpty()}unionWith(_e){let tr=this;return tr.size<_e.size&&(tr=_e,_e=this),_e.forEach(rr=>{tr=tr.add(rr)}),tr}isEqual(_e){if(!(_e instanceof SortedSet)||this.size!==_e.size)return!1;const tr=this.data.getIterator(),rr=_e.data.getIterator();for(;tr.hasNext();){const nr=tr.getNext().key,sr=rr.getNext().key;if(this.comparator(nr,sr)!==0)return!1}return!0}toArray(){const _e=[];return this.forEach(tr=>{_e.push(tr)}),_e}toString(){const _e=[];return this.forEach(tr=>_e.push(tr)),"SortedSet("+_e.toString()+")"}copy(_e){const tr=new SortedSet(this.comparator);return tr.data=_e,tr}}class SortedSetIterator{constructor(_e){this.iter=_e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(_e){this.fields=_e,_e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(_e){let tr=new SortedSet(FieldPath$1.comparator);for(const rr of this.fields)tr=tr.add(rr);for(const rr of _e)tr=tr.add(rr);return new FieldMask(tr.toArray())}covers(_e){for(const tr of this.fields)if(tr.isPrefixOf(_e))return!0;return!1}isEqual(_e){return __PRIVATE_arrayEquals(this.fields,_e.fields,(tr,rr)=>tr.isEqual(rr))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(_e){this.binaryString=_e}static fromBase64String(_e){const tr=function(nr){try{return atob(nr)}catch(sr){throw typeof DOMException<"u"&&sr instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+sr):sr}}(_e);return new ByteString(tr)}static fromUint8Array(_e){const tr=function(nr){let sr="";for(let ir=0;ir<nr.length;++ir)sr+=String.fromCharCode(nr[ir]);return sr}(_e);return new ByteString(tr)}[Symbol.iterator](){let _e=0;return{next:()=>_e<this.binaryString.length?{value:this.binaryString.charCodeAt(_e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(tr){return btoa(tr)}(this.binaryString)}toUint8Array(){return function(tr){const rr=new Uint8Array(tr.length);for(let nr=0;nr<tr.length;nr++)rr[nr]=tr.charCodeAt(nr);return rr}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(_e){return __PRIVATE_primitiveComparator(this.binaryString,_e.binaryString)}isEqual(_e){return this.binaryString===_e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const it$1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(er){if(__PRIVATE_hardAssert(!!er,39018),typeof er=="string"){let _e=0;const tr=it$1.exec(er);if(__PRIVATE_hardAssert(!!tr,46558,{timestamp:er}),tr[1]){let nr=tr[1];nr=(nr+"000000000").substr(0,9),_e=Number(nr)}const rr=new Date(er);return{seconds:Math.floor(rr.getTime()/1e3),nanos:_e}}return{seconds:__PRIVATE_normalizeNumber(er.seconds),nanos:__PRIVATE_normalizeNumber(er.nanos)}}function __PRIVATE_normalizeNumber(er){return typeof er=="number"?er:typeof er=="string"?Number(er):0}function __PRIVATE_normalizeByteString(er){return typeof er=="string"?ByteString.fromBase64String(er):ByteString.fromUint8Array(er)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st$1="server_timestamp",ot$1="__type__",_t$1="__previous_value__",at$1="__local_write_time__";function __PRIVATE_isServerTimestamp(er){var _e,tr;return((tr=(((_e=er==null?void 0:er.mapValue)===null||_e===void 0?void 0:_e.fields)||{})[ot$1])===null||tr===void 0?void 0:tr.stringValue)===st$1}function __PRIVATE_getPreviousValue(er){const _e=er.mapValue.fields[_t$1];return __PRIVATE_isServerTimestamp(_e)?__PRIVATE_getPreviousValue(_e):_e}function __PRIVATE_getLocalWriteTime(er){const _e=__PRIVATE_normalizeTimestamp(er.mapValue.fields[at$1].timestampValue);return new Timestamp(_e.seconds,_e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(_e,tr,rr,nr,sr,ir,or,ar,lr,cr){this.databaseId=_e,this.appId=tr,this.persistenceKey=rr,this.host=nr,this.ssl=sr,this.forceLongPolling=ir,this.autoDetectLongPolling=or,this.longPollingOptions=ar,this.useFetchStreams=lr,this.isUsingEmulator=cr}}const ut$1="(default)";class DatabaseId{constructor(_e,tr){this.projectId=_e,this.database=tr||ut$1}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===ut$1}isEqual(_e){return _e instanceof DatabaseId&&_e.projectId===this.projectId&&_e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct$1="__type__",lt$1="__max__",ht$1={mapValue:{fields:{__type__:{stringValue:lt$1}}}},Pt$1="__vector__",Tt$1="value";function __PRIVATE_typeOrder(er){return"nullValue"in er?0:"booleanValue"in er?1:"integerValue"in er||"doubleValue"in er?2:"timestampValue"in er?3:"stringValue"in er?5:"bytesValue"in er?6:"referenceValue"in er?7:"geoPointValue"in er?8:"arrayValue"in er?9:"mapValue"in er?__PRIVATE_isServerTimestamp(er)?4:__PRIVATE_isMaxValue(er)?9007199254740991:__PRIVATE_isVectorValue(er)?10:11:fail(28295,{value:er})}function __PRIVATE_valueEquals(er,_e){if(er===_e)return!0;const tr=__PRIVATE_typeOrder(er);if(tr!==__PRIVATE_typeOrder(_e))return!1;switch(tr){case 0:case 9007199254740991:return!0;case 1:return er.booleanValue===_e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(er).isEqual(__PRIVATE_getLocalWriteTime(_e));case 3:return function(nr,sr){if(typeof nr.timestampValue=="string"&&typeof sr.timestampValue=="string"&&nr.timestampValue.length===sr.timestampValue.length)return nr.timestampValue===sr.timestampValue;const ir=__PRIVATE_normalizeTimestamp(nr.timestampValue),or=__PRIVATE_normalizeTimestamp(sr.timestampValue);return ir.seconds===or.seconds&&ir.nanos===or.nanos}(er,_e);case 5:return er.stringValue===_e.stringValue;case 6:return function(nr,sr){return __PRIVATE_normalizeByteString(nr.bytesValue).isEqual(__PRIVATE_normalizeByteString(sr.bytesValue))}(er,_e);case 7:return er.referenceValue===_e.referenceValue;case 8:return function(nr,sr){return __PRIVATE_normalizeNumber(nr.geoPointValue.latitude)===__PRIVATE_normalizeNumber(sr.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(nr.geoPointValue.longitude)===__PRIVATE_normalizeNumber(sr.geoPointValue.longitude)}(er,_e);case 2:return function(nr,sr){if("integerValue"in nr&&"integerValue"in sr)return __PRIVATE_normalizeNumber(nr.integerValue)===__PRIVATE_normalizeNumber(sr.integerValue);if("doubleValue"in nr&&"doubleValue"in sr){const ir=__PRIVATE_normalizeNumber(nr.doubleValue),or=__PRIVATE_normalizeNumber(sr.doubleValue);return ir===or?__PRIVATE_isNegativeZero(ir)===__PRIVATE_isNegativeZero(or):isNaN(ir)&&isNaN(or)}return!1}(er,_e);case 9:return __PRIVATE_arrayEquals(er.arrayValue.values||[],_e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function(nr,sr){const ir=nr.mapValue.fields||{},or=sr.mapValue.fields||{};if(__PRIVATE_objectSize(ir)!==__PRIVATE_objectSize(or))return!1;for(const ar in ir)if(ir.hasOwnProperty(ar)&&(or[ar]===void 0||!__PRIVATE_valueEquals(ir[ar],or[ar])))return!1;return!0}(er,_e);default:return fail(52216,{left:er})}}function __PRIVATE_arrayValueContains(er,_e){return(er.values||[]).find(tr=>__PRIVATE_valueEquals(tr,_e))!==void 0}function __PRIVATE_valueCompare(er,_e){if(er===_e)return 0;const tr=__PRIVATE_typeOrder(er),rr=__PRIVATE_typeOrder(_e);if(tr!==rr)return __PRIVATE_primitiveComparator(tr,rr);switch(tr){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(er.booleanValue,_e.booleanValue);case 2:return function(sr,ir){const or=__PRIVATE_normalizeNumber(sr.integerValue||sr.doubleValue),ar=__PRIVATE_normalizeNumber(ir.integerValue||ir.doubleValue);return or<ar?-1:or>ar?1:or===ar?0:isNaN(or)?isNaN(ar)?0:-1:1}(er,_e);case 3:return __PRIVATE_compareTimestamps(er.timestampValue,_e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(er),__PRIVATE_getLocalWriteTime(_e));case 5:return __PRIVATE_compareUtf8Strings(er.stringValue,_e.stringValue);case 6:return function(sr,ir){const or=__PRIVATE_normalizeByteString(sr),ar=__PRIVATE_normalizeByteString(ir);return or.compareTo(ar)}(er.bytesValue,_e.bytesValue);case 7:return function(sr,ir){const or=sr.split("/"),ar=ir.split("/");for(let lr=0;lr<or.length&&lr<ar.length;lr++){const cr=__PRIVATE_primitiveComparator(or[lr],ar[lr]);if(cr!==0)return cr}return __PRIVATE_primitiveComparator(or.length,ar.length)}(er.referenceValue,_e.referenceValue);case 8:return function(sr,ir){const or=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(sr.latitude),__PRIVATE_normalizeNumber(ir.latitude));return or!==0?or:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(sr.longitude),__PRIVATE_normalizeNumber(ir.longitude))}(er.geoPointValue,_e.geoPointValue);case 9:return __PRIVATE_compareArrays(er.arrayValue,_e.arrayValue);case 10:return function(sr,ir){var or,ar,lr,cr;const Ar=sr.fields||{},ur=ir.fields||{},dr=(or=Ar[Tt$1])===null||or===void 0?void 0:or.arrayValue,mr=(ar=ur[Tt$1])===null||ar===void 0?void 0:ar.arrayValue,pr=__PRIVATE_primitiveComparator(((lr=dr==null?void 0:dr.values)===null||lr===void 0?void 0:lr.length)||0,((cr=mr==null?void 0:mr.values)===null||cr===void 0?void 0:cr.length)||0);return pr!==0?pr:__PRIVATE_compareArrays(dr,mr)}(er.mapValue,_e.mapValue);case 11:return function(sr,ir){if(sr===ht$1.mapValue&&ir===ht$1.mapValue)return 0;if(sr===ht$1.mapValue)return 1;if(ir===ht$1.mapValue)return-1;const or=sr.fields||{},ar=Object.keys(or),lr=ir.fields||{},cr=Object.keys(lr);ar.sort(),cr.sort();for(let Ar=0;Ar<ar.length&&Ar<cr.length;++Ar){const ur=__PRIVATE_compareUtf8Strings(ar[Ar],cr[Ar]);if(ur!==0)return ur;const dr=__PRIVATE_valueCompare(or[ar[Ar]],lr[cr[Ar]]);if(dr!==0)return dr}return __PRIVATE_primitiveComparator(ar.length,cr.length)}(er.mapValue,_e.mapValue);default:throw fail(23264,{Pe:tr})}}function __PRIVATE_compareTimestamps(er,_e){if(typeof er=="string"&&typeof _e=="string"&&er.length===_e.length)return __PRIVATE_primitiveComparator(er,_e);const tr=__PRIVATE_normalizeTimestamp(er),rr=__PRIVATE_normalizeTimestamp(_e),nr=__PRIVATE_primitiveComparator(tr.seconds,rr.seconds);return nr!==0?nr:__PRIVATE_primitiveComparator(tr.nanos,rr.nanos)}function __PRIVATE_compareArrays(er,_e){const tr=er.values||[],rr=_e.values||[];for(let nr=0;nr<tr.length&&nr<rr.length;++nr){const sr=__PRIVATE_valueCompare(tr[nr],rr[nr]);if(sr)return sr}return __PRIVATE_primitiveComparator(tr.length,rr.length)}function canonicalId(er){return __PRIVATE_canonifyValue(er)}function __PRIVATE_canonifyValue(er){return"nullValue"in er?"null":"booleanValue"in er?""+er.booleanValue:"integerValue"in er?""+er.integerValue:"doubleValue"in er?""+er.doubleValue:"timestampValue"in er?function(tr){const rr=__PRIVATE_normalizeTimestamp(tr);return`time(${rr.seconds},${rr.nanos})`}(er.timestampValue):"stringValue"in er?er.stringValue:"bytesValue"in er?function(tr){return __PRIVATE_normalizeByteString(tr).toBase64()}(er.bytesValue):"referenceValue"in er?function(tr){return DocumentKey.fromName(tr).toString()}(er.referenceValue):"geoPointValue"in er?function(tr){return`geo(${tr.latitude},${tr.longitude})`}(er.geoPointValue):"arrayValue"in er?function(tr){let rr="[",nr=!0;for(const sr of tr.values||[])nr?nr=!1:rr+=",",rr+=__PRIVATE_canonifyValue(sr);return rr+"]"}(er.arrayValue):"mapValue"in er?function(tr){const rr=Object.keys(tr.fields||{}).sort();let nr="{",sr=!0;for(const ir of rr)sr?sr=!1:nr+=",",nr+=`${ir}:${__PRIVATE_canonifyValue(tr.fields[ir])}`;return nr+"}"}(er.mapValue):fail(61005,{value:er})}function __PRIVATE_estimateByteSize(er){switch(__PRIVATE_typeOrder(er)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const _e=__PRIVATE_getPreviousValue(er);return _e?16+__PRIVATE_estimateByteSize(_e):16;case 5:return 2*er.stringValue.length;case 6:return __PRIVATE_normalizeByteString(er.bytesValue).approximateByteSize();case 7:return er.referenceValue.length;case 9:return function(rr){return(rr.values||[]).reduce((nr,sr)=>nr+__PRIVATE_estimateByteSize(sr),0)}(er.arrayValue);case 10:case 11:return function(rr){let nr=0;return forEach(rr.fields,(sr,ir)=>{nr+=sr.length+__PRIVATE_estimateByteSize(ir)}),nr}(er.mapValue);default:throw fail(13486,{value:er})}}function __PRIVATE_refValue(er,_e){return{referenceValue:`projects/${er.projectId}/databases/${er.database}/documents/${_e.path.canonicalString()}`}}function isInteger(er){return!!er&&"integerValue"in er}function isArray(er){return!!er&&"arrayValue"in er}function __PRIVATE_isNullValue(er){return!!er&&"nullValue"in er}function __PRIVATE_isNanValue(er){return!!er&&"doubleValue"in er&&isNaN(Number(er.doubleValue))}function __PRIVATE_isMapValue(er){return!!er&&"mapValue"in er}function __PRIVATE_isVectorValue(er){var _e,tr;return((tr=(((_e=er==null?void 0:er.mapValue)===null||_e===void 0?void 0:_e.fields)||{})[ct$1])===null||tr===void 0?void 0:tr.stringValue)===Pt$1}function __PRIVATE_deepClone(er){if(er.geoPointValue)return{geoPointValue:Object.assign({},er.geoPointValue)};if(er.timestampValue&&typeof er.timestampValue=="object")return{timestampValue:Object.assign({},er.timestampValue)};if(er.mapValue){const _e={mapValue:{fields:{}}};return forEach(er.mapValue.fields,(tr,rr)=>_e.mapValue.fields[tr]=__PRIVATE_deepClone(rr)),_e}if(er.arrayValue){const _e={arrayValue:{values:[]}};for(let tr=0;tr<(er.arrayValue.values||[]).length;++tr)_e.arrayValue.values[tr]=__PRIVATE_deepClone(er.arrayValue.values[tr]);return _e}return Object.assign({},er)}function __PRIVATE_isMaxValue(er){return(((er.mapValue||{}).fields||{}).__type__||{}).stringValue===lt$1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(_e){this.value=_e}static empty(){return new ObjectValue({mapValue:{}})}field(_e){if(_e.isEmpty())return this.value;{let tr=this.value;for(let rr=0;rr<_e.length-1;++rr)if(tr=(tr.mapValue.fields||{})[_e.get(rr)],!__PRIVATE_isMapValue(tr))return null;return tr=(tr.mapValue.fields||{})[_e.lastSegment()],tr||null}}set(_e,tr){this.getFieldsMap(_e.popLast())[_e.lastSegment()]=__PRIVATE_deepClone(tr)}setAll(_e){let tr=FieldPath$1.emptyPath(),rr={},nr=[];_e.forEach((ir,or)=>{if(!tr.isImmediateParentOf(or)){const ar=this.getFieldsMap(tr);this.applyChanges(ar,rr,nr),rr={},nr=[],tr=or.popLast()}ir?rr[or.lastSegment()]=__PRIVATE_deepClone(ir):nr.push(or.lastSegment())});const sr=this.getFieldsMap(tr);this.applyChanges(sr,rr,nr)}delete(_e){const tr=this.field(_e.popLast());__PRIVATE_isMapValue(tr)&&tr.mapValue.fields&&delete tr.mapValue.fields[_e.lastSegment()]}isEqual(_e){return __PRIVATE_valueEquals(this.value,_e.value)}getFieldsMap(_e){let tr=this.value;tr.mapValue.fields||(tr.mapValue={fields:{}});for(let rr=0;rr<_e.length;++rr){let nr=tr.mapValue.fields[_e.get(rr)];__PRIVATE_isMapValue(nr)&&nr.mapValue.fields||(nr={mapValue:{fields:{}}},tr.mapValue.fields[_e.get(rr)]=nr),tr=nr}return tr.mapValue.fields}applyChanges(_e,tr,rr){forEach(tr,(nr,sr)=>_e[nr]=sr);for(const nr of rr)delete _e[nr]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(er){const _e=[];return forEach(er.fields,(tr,rr)=>{const nr=new FieldPath$1([tr]);if(__PRIVATE_isMapValue(rr)){const sr=__PRIVATE_extractFieldMask(rr.mapValue).fields;if(sr.length===0)_e.push(nr);else for(const ir of sr)_e.push(nr.child(ir))}else _e.push(nr)}),new FieldMask(_e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(_e,tr,rr,nr,sr,ir,or){this.key=_e,this.documentType=tr,this.version=rr,this.readTime=nr,this.createTime=sr,this.data=ir,this.documentState=or}static newInvalidDocument(_e){return new MutableDocument(_e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(_e,tr,rr,nr){return new MutableDocument(_e,1,tr,SnapshotVersion.min(),rr,nr,0)}static newNoDocument(_e,tr){return new MutableDocument(_e,2,tr,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(_e,tr){return new MutableDocument(_e,3,tr,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(_e,tr){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=_e),this.version=_e,this.documentType=1,this.data=tr,this.documentState=0,this}convertToNoDocument(_e){return this.version=_e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(_e){return this.version=_e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(_e){return this.readTime=_e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(_e){return _e instanceof MutableDocument&&this.key.isEqual(_e.key)&&this.version.isEqual(_e.version)&&this.documentType===_e.documentType&&this.documentState===_e.documentState&&this.data.isEqual(_e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(_e,tr){this.position=_e,this.inclusive=tr}}function __PRIVATE_boundCompareToDocument(er,_e,tr){let rr=0;for(let nr=0;nr<er.position.length;nr++){const sr=_e[nr],ir=er.position[nr];if(sr.field.isKeyField()?rr=DocumentKey.comparator(DocumentKey.fromName(ir.referenceValue),tr.key):rr=__PRIVATE_valueCompare(ir,tr.data.field(sr.field)),sr.dir==="desc"&&(rr*=-1),rr!==0)break}return rr}function __PRIVATE_boundEquals(er,_e){if(er===null)return _e===null;if(_e===null||er.inclusive!==_e.inclusive||er.position.length!==_e.position.length)return!1;for(let tr=0;tr<er.position.length;tr++)if(!__PRIVATE_valueEquals(er.position[tr],_e.position[tr]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(_e,tr="asc"){this.field=_e,this.dir=tr}}function __PRIVATE_orderByEquals(er,_e){return er.dir===_e.dir&&er.field.isEqual(_e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(_e,tr,rr){super(),this.field=_e,this.op=tr,this.value=rr}static create(_e,tr,rr){return _e.isKeyField()?tr==="in"||tr==="not-in"?this.createKeyFieldInFilter(_e,tr,rr):new __PRIVATE_KeyFieldFilter(_e,tr,rr):tr==="array-contains"?new __PRIVATE_ArrayContainsFilter(_e,rr):tr==="in"?new __PRIVATE_InFilter(_e,rr):tr==="not-in"?new __PRIVATE_NotInFilter(_e,rr):tr==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(_e,rr):new FieldFilter(_e,tr,rr)}static createKeyFieldInFilter(_e,tr,rr){return tr==="in"?new __PRIVATE_KeyFieldInFilter(_e,rr):new __PRIVATE_KeyFieldNotInFilter(_e,rr)}matches(_e){const tr=_e.data.field(this.field);return this.op==="!="?tr!==null&&tr.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(tr,this.value)):tr!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(tr)&&this.matchesComparison(__PRIVATE_valueCompare(tr,this.value))}matchesComparison(_e){switch(this.op){case"<":return _e<0;case"<=":return _e<=0;case"==":return _e===0;case"!=":return _e!==0;case">":return _e>0;case">=":return _e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(_e,tr){super(),this.filters=_e,this.op=tr,this.Te=null}static create(_e,tr){return new CompositeFilter(_e,tr)}matches(_e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(tr=>!tr.matches(_e))===void 0:this.filters.find(tr=>tr.matches(_e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((_e,tr)=>_e.concat(tr.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(er){return er.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(er){return __PRIVATE_compositeFilterIsFlat(er)&&__PRIVATE_compositeFilterIsConjunction(er)}function __PRIVATE_compositeFilterIsFlat(er){for(const _e of er.filters)if(_e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(er){if(er instanceof FieldFilter)return er.field.canonicalString()+er.op.toString()+canonicalId(er.value);if(__PRIVATE_compositeFilterIsFlatConjunction(er))return er.filters.map(_e=>__PRIVATE_canonifyFilter(_e)).join(",");{const _e=er.filters.map(tr=>__PRIVATE_canonifyFilter(tr)).join(",");return`${er.op}(${_e})`}}function __PRIVATE_filterEquals(er,_e){return er instanceof FieldFilter?function(rr,nr){return nr instanceof FieldFilter&&rr.op===nr.op&&rr.field.isEqual(nr.field)&&__PRIVATE_valueEquals(rr.value,nr.value)}(er,_e):er instanceof CompositeFilter?function(rr,nr){return nr instanceof CompositeFilter&&rr.op===nr.op&&rr.filters.length===nr.filters.length?rr.filters.reduce((sr,ir,or)=>sr&&__PRIVATE_filterEquals(ir,nr.filters[or]),!0):!1}(er,_e):void fail(19439)}function __PRIVATE_stringifyFilter(er){return er instanceof FieldFilter?function(tr){return`${tr.field.canonicalString()} ${tr.op} ${canonicalId(tr.value)}`}(er):er instanceof CompositeFilter?function(tr){return tr.op.toString()+" {"+tr.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(er):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(_e,tr,rr){super(_e,tr,rr),this.key=DocumentKey.fromName(rr.referenceValue)}matches(_e){const tr=DocumentKey.comparator(_e.key,this.key);return this.matchesComparison(tr)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(_e,tr){super(_e,"in",tr),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",tr)}matches(_e){return this.keys.some(tr=>tr.isEqual(_e.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(_e,tr){super(_e,"not-in",tr),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",tr)}matches(_e){return!this.keys.some(tr=>tr.isEqual(_e.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(er,_e){var tr;return(((tr=_e.arrayValue)===null||tr===void 0?void 0:tr.values)||[]).map(rr=>DocumentKey.fromName(rr.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(_e,tr){super(_e,"array-contains",tr)}matches(_e){const tr=_e.data.field(this.field);return isArray(tr)&&__PRIVATE_arrayValueContains(tr.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(_e,tr){super(_e,"in",tr)}matches(_e){const tr=_e.data.field(this.field);return tr!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,tr)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(_e,tr){super(_e,"not-in",tr)}matches(_e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const tr=_e.data.field(this.field);return tr!==null&&tr.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,tr)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(_e,tr){super(_e,"array-contains-any",tr)}matches(_e){const tr=_e.data.field(this.field);return!(!isArray(tr)||!tr.arrayValue.values)&&tr.arrayValue.values.some(rr=>__PRIVATE_arrayValueContains(this.value.arrayValue,rr))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(_e,tr=null,rr=[],nr=[],sr=null,ir=null,or=null){this.path=_e,this.collectionGroup=tr,this.orderBy=rr,this.filters=nr,this.limit=sr,this.startAt=ir,this.endAt=or,this.Ie=null}}function __PRIVATE_newTarget(er,_e=null,tr=[],rr=[],nr=null,sr=null,ir=null){return new __PRIVATE_TargetImpl(er,_e,tr,rr,nr,sr,ir)}function __PRIVATE_canonifyTarget(er){const _e=__PRIVATE_debugCast(er);if(_e.Ie===null){let tr=_e.path.canonicalString();_e.collectionGroup!==null&&(tr+="|cg:"+_e.collectionGroup),tr+="|f:",tr+=_e.filters.map(rr=>__PRIVATE_canonifyFilter(rr)).join(","),tr+="|ob:",tr+=_e.orderBy.map(rr=>function(sr){return sr.field.canonicalString()+sr.dir}(rr)).join(","),__PRIVATE_isNullOrUndefined(_e.limit)||(tr+="|l:",tr+=_e.limit),_e.startAt&&(tr+="|lb:",tr+=_e.startAt.inclusive?"b:":"a:",tr+=_e.startAt.position.map(rr=>canonicalId(rr)).join(",")),_e.endAt&&(tr+="|ub:",tr+=_e.endAt.inclusive?"a:":"b:",tr+=_e.endAt.position.map(rr=>canonicalId(rr)).join(",")),_e.Ie=tr}return _e.Ie}function __PRIVATE_targetEquals(er,_e){if(er.limit!==_e.limit||er.orderBy.length!==_e.orderBy.length)return!1;for(let tr=0;tr<er.orderBy.length;tr++)if(!__PRIVATE_orderByEquals(er.orderBy[tr],_e.orderBy[tr]))return!1;if(er.filters.length!==_e.filters.length)return!1;for(let tr=0;tr<er.filters.length;tr++)if(!__PRIVATE_filterEquals(er.filters[tr],_e.filters[tr]))return!1;return er.collectionGroup===_e.collectionGroup&&!!er.path.isEqual(_e.path)&&!!__PRIVATE_boundEquals(er.startAt,_e.startAt)&&__PRIVATE_boundEquals(er.endAt,_e.endAt)}function __PRIVATE_targetIsDocumentTarget(er){return DocumentKey.isDocumentKey(er.path)&&er.collectionGroup===null&&er.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(_e,tr=null,rr=[],nr=[],sr=null,ir="F",or=null,ar=null){this.path=_e,this.collectionGroup=tr,this.explicitOrderBy=rr,this.filters=nr,this.limit=sr,this.limitType=ir,this.startAt=or,this.endAt=ar,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(er,_e,tr,rr,nr,sr,ir,or){return new __PRIVATE_QueryImpl(er,_e,tr,rr,nr,sr,ir,or)}function __PRIVATE_newQueryForPath(er){return new __PRIVATE_QueryImpl(er)}function __PRIVATE_queryMatchesAllDocuments(er){return er.filters.length===0&&er.limit===null&&er.startAt==null&&er.endAt==null&&(er.explicitOrderBy.length===0||er.explicitOrderBy.length===1&&er.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(er){return er.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(er){const _e=__PRIVATE_debugCast(er);if(_e.Ee===null){_e.Ee=[];const tr=new Set;for(const sr of _e.explicitOrderBy)_e.Ee.push(sr),tr.add(sr.field.canonicalString());const rr=_e.explicitOrderBy.length>0?_e.explicitOrderBy[_e.explicitOrderBy.length-1].dir:"asc";(function(ir){let or=new SortedSet(FieldPath$1.comparator);return ir.filters.forEach(ar=>{ar.getFlattenedFilters().forEach(lr=>{lr.isInequality()&&(or=or.add(lr.field))})}),or})(_e).forEach(sr=>{tr.has(sr.canonicalString())||sr.isKeyField()||_e.Ee.push(new OrderBy(sr,rr))}),tr.has(FieldPath$1.keyField().canonicalString())||_e.Ee.push(new OrderBy(FieldPath$1.keyField(),rr))}return _e.Ee}function __PRIVATE_queryToTarget(er){const _e=__PRIVATE_debugCast(er);return _e.de||(_e.de=__PRIVATE__queryToTarget(_e,__PRIVATE_queryNormalizedOrderBy(er))),_e.de}function __PRIVATE__queryToTarget(er,_e){if(er.limitType==="F")return __PRIVATE_newTarget(er.path,er.collectionGroup,_e,er.filters,er.limit,er.startAt,er.endAt);{_e=_e.map(nr=>{const sr=nr.dir==="desc"?"asc":"desc";return new OrderBy(nr.field,sr)});const tr=er.endAt?new Bound(er.endAt.position,er.endAt.inclusive):null,rr=er.startAt?new Bound(er.startAt.position,er.startAt.inclusive):null;return __PRIVATE_newTarget(er.path,er.collectionGroup,_e,er.filters,er.limit,tr,rr)}}function __PRIVATE_queryWithAddedFilter(er,_e){const tr=er.filters.concat([_e]);return new __PRIVATE_QueryImpl(er.path,er.collectionGroup,er.explicitOrderBy.slice(),tr,er.limit,er.limitType,er.startAt,er.endAt)}function __PRIVATE_queryWithLimit(er,_e,tr){return new __PRIVATE_QueryImpl(er.path,er.collectionGroup,er.explicitOrderBy.slice(),er.filters.slice(),_e,tr,er.startAt,er.endAt)}function __PRIVATE_queryEquals(er,_e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(er),__PRIVATE_queryToTarget(_e))&&er.limitType===_e.limitType}function __PRIVATE_canonifyQuery(er){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(er))}|lt:${er.limitType}`}function __PRIVATE_stringifyQuery(er){return`Query(target=${function(tr){let rr=tr.path.canonicalString();return tr.collectionGroup!==null&&(rr+=" collectionGroup="+tr.collectionGroup),tr.filters.length>0&&(rr+=`, filters: [${tr.filters.map(nr=>__PRIVATE_stringifyFilter(nr)).join(", ")}]`),__PRIVATE_isNullOrUndefined(tr.limit)||(rr+=", limit: "+tr.limit),tr.orderBy.length>0&&(rr+=`, orderBy: [${tr.orderBy.map(nr=>function(ir){return`${ir.field.canonicalString()} (${ir.dir})`}(nr)).join(", ")}]`),tr.startAt&&(rr+=", startAt: ",rr+=tr.startAt.inclusive?"b:":"a:",rr+=tr.startAt.position.map(nr=>canonicalId(nr)).join(",")),tr.endAt&&(rr+=", endAt: ",rr+=tr.endAt.inclusive?"a:":"b:",rr+=tr.endAt.position.map(nr=>canonicalId(nr)).join(",")),`Target(${rr})`}(__PRIVATE_queryToTarget(er))}; limitType=${er.limitType})`}function __PRIVATE_queryMatches(er,_e){return _e.isFoundDocument()&&function(rr,nr){const sr=nr.key.path;return rr.collectionGroup!==null?nr.key.hasCollectionId(rr.collectionGroup)&&rr.path.isPrefixOf(sr):DocumentKey.isDocumentKey(rr.path)?rr.path.isEqual(sr):rr.path.isImmediateParentOf(sr)}(er,_e)&&function(rr,nr){for(const sr of __PRIVATE_queryNormalizedOrderBy(rr))if(!sr.field.isKeyField()&&nr.data.field(sr.field)===null)return!1;return!0}(er,_e)&&function(rr,nr){for(const sr of rr.filters)if(!sr.matches(nr))return!1;return!0}(er,_e)&&function(rr,nr){return!(rr.startAt&&!function(ir,or,ar){const lr=__PRIVATE_boundCompareToDocument(ir,or,ar);return ir.inclusive?lr<=0:lr<0}(rr.startAt,__PRIVATE_queryNormalizedOrderBy(rr),nr)||rr.endAt&&!function(ir,or,ar){const lr=__PRIVATE_boundCompareToDocument(ir,or,ar);return ir.inclusive?lr>=0:lr>0}(rr.endAt,__PRIVATE_queryNormalizedOrderBy(rr),nr))}(er,_e)}function __PRIVATE_queryCollectionGroup(er){return er.collectionGroup||(er.path.length%2==1?er.path.lastSegment():er.path.get(er.path.length-2))}function __PRIVATE_newQueryComparator(er){return(_e,tr)=>{let rr=!1;for(const nr of __PRIVATE_queryNormalizedOrderBy(er)){const sr=__PRIVATE_compareDocs(nr,_e,tr);if(sr!==0)return sr;rr=rr||nr.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(er,_e,tr){const rr=er.field.isKeyField()?DocumentKey.comparator(_e.key,tr.key):function(sr,ir,or){const ar=ir.data.field(sr),lr=or.data.field(sr);return ar!==null&&lr!==null?__PRIVATE_valueCompare(ar,lr):fail(42886)}(er.field,_e,tr);switch(er.dir){case"asc":return rr;case"desc":return-1*rr;default:return fail(19790,{direction:er.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(_e,tr){this.mapKeyFn=_e,this.equalsFn=tr,this.inner={},this.innerSize=0}get(_e){const tr=this.mapKeyFn(_e),rr=this.inner[tr];if(rr!==void 0){for(const[nr,sr]of rr)if(this.equalsFn(nr,_e))return sr}}has(_e){return this.get(_e)!==void 0}set(_e,tr){const rr=this.mapKeyFn(_e),nr=this.inner[rr];if(nr===void 0)return this.inner[rr]=[[_e,tr]],void this.innerSize++;for(let sr=0;sr<nr.length;sr++)if(this.equalsFn(nr[sr][0],_e))return void(nr[sr]=[_e,tr]);nr.push([_e,tr]),this.innerSize++}delete(_e){const tr=this.mapKeyFn(_e),rr=this.inner[tr];if(rr===void 0)return!1;for(let nr=0;nr<rr.length;nr++)if(this.equalsFn(rr[nr][0],_e))return rr.length===1?delete this.inner[tr]:rr.splice(nr,1),this.innerSize--,!0;return!1}forEach(_e){forEach(this.inner,(tr,rr)=>{for(const[nr,sr]of rr)_e(nr,sr)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt$1=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return dt$1}const At$1=new SortedMap(DocumentKey.comparator);function documentMap(...er){let _e=At$1;for(const tr of er)_e=_e.insert(tr.key,tr);return _e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(er){let _e=At$1;return er.forEach((tr,rr)=>_e=_e.insert(tr,rr.overlayedDocument)),_e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(er=>er.toString(),(er,_e)=>er.isEqual(_e))}const Rt$1=new SortedMap(DocumentKey.comparator),Vt$1=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...er){let _e=Vt$1;for(const tr of er)_e=_e.add(tr);return _e}const mt$1=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return mt$1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(er,_e){if(er.useProto3Json){if(isNaN(_e))return{doubleValue:"NaN"};if(_e===1/0)return{doubleValue:"Infinity"};if(_e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(_e)?"-0":_e}}function __PRIVATE_toInteger(er){return{integerValue:""+er}}function toNumber(er,_e){return isSafeInteger(_e)?__PRIVATE_toInteger(_e):__PRIVATE_toDouble(er,_e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(er,_e,tr){return er instanceof __PRIVATE_ServerTimestampTransform?function(nr,sr){const ir={fields:{[ot$1]:{stringValue:st$1},[at$1]:{timestampValue:{seconds:nr.seconds,nanos:nr.nanoseconds}}}};return sr&&__PRIVATE_isServerTimestamp(sr)&&(sr=__PRIVATE_getPreviousValue(sr)),sr&&(ir.fields[_t$1]=sr),{mapValue:ir}}(tr,_e):er instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(er,_e):er instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(er,_e):function(nr,sr){const ir=__PRIVATE_computeTransformOperationBaseValue(nr,sr),or=asNumber(ir)+asNumber(nr.Re);return isInteger(ir)&&isInteger(nr.Re)?__PRIVATE_toInteger(or):__PRIVATE_toDouble(nr.serializer,or)}(er,_e)}function __PRIVATE_applyTransformOperationToRemoteDocument(er,_e,tr){return er instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(er,_e):er instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(er,_e):tr}function __PRIVATE_computeTransformOperationBaseValue(er,_e){return er instanceof __PRIVATE_NumericIncrementTransformOperation?function(rr){return isInteger(rr)||function(sr){return!!sr&&"doubleValue"in sr}(rr)}(_e)?_e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(_e){super(),this.elements=_e}}function __PRIVATE_applyArrayUnionTransformOperation(er,_e){const tr=__PRIVATE_coercedFieldValuesArray(_e);for(const rr of er.elements)tr.some(nr=>__PRIVATE_valueEquals(nr,rr))||tr.push(rr);return{arrayValue:{values:tr}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(_e){super(),this.elements=_e}}function __PRIVATE_applyArrayRemoveTransformOperation(er,_e){let tr=__PRIVATE_coercedFieldValuesArray(_e);for(const rr of er.elements)tr=tr.filter(nr=>!__PRIVATE_valueEquals(nr,rr));return{arrayValue:{values:tr}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(_e,tr){super(),this.serializer=_e,this.Re=tr}}function asNumber(er){return __PRIVATE_normalizeNumber(er.integerValue||er.doubleValue)}function __PRIVATE_coercedFieldValuesArray(er){return isArray(er)&&er.arrayValue.values?er.arrayValue.values.slice():[]}function __PRIVATE_fieldTransformEquals(er,_e){return er.field.isEqual(_e.field)&&function(rr,nr){return rr instanceof __PRIVATE_ArrayUnionTransformOperation&&nr instanceof __PRIVATE_ArrayUnionTransformOperation||rr instanceof __PRIVATE_ArrayRemoveTransformOperation&&nr instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(rr.elements,nr.elements,__PRIVATE_valueEquals):rr instanceof __PRIVATE_NumericIncrementTransformOperation&&nr instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(rr.Re,nr.Re):rr instanceof __PRIVATE_ServerTimestampTransform&&nr instanceof __PRIVATE_ServerTimestampTransform}(er.transform,_e.transform)}class MutationResult{constructor(_e,tr){this.version=_e,this.transformResults=tr}}class Precondition{constructor(_e,tr){this.updateTime=_e,this.exists=tr}static none(){return new Precondition}static exists(_e){return new Precondition(void 0,_e)}static updateTime(_e){return new Precondition(_e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(_e){return this.exists===_e.exists&&(this.updateTime?!!_e.updateTime&&this.updateTime.isEqual(_e.updateTime):!_e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(er,_e){return er.updateTime!==void 0?_e.isFoundDocument()&&_e.version.isEqual(er.updateTime):er.exists===void 0||er.exists===_e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(er,_e){if(!er.hasLocalMutations||_e&&_e.fields.length===0)return null;if(_e===null)return er.isNoDocument()?new __PRIVATE_DeleteMutation(er.key,Precondition.none()):new __PRIVATE_SetMutation(er.key,er.data,Precondition.none());{const tr=er.data,rr=ObjectValue.empty();let nr=new SortedSet(FieldPath$1.comparator);for(let sr of _e.fields)if(!nr.has(sr)){let ir=tr.field(sr);ir===null&&sr.length>1&&(sr=sr.popLast(),ir=tr.field(sr)),ir===null?rr.delete(sr):rr.set(sr,ir),nr=nr.add(sr)}return new __PRIVATE_PatchMutation(er.key,rr,new FieldMask(nr.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(er,_e,tr){er instanceof __PRIVATE_SetMutation?function(nr,sr,ir){const or=nr.value.clone(),ar=__PRIVATE_serverTransformResults(nr.fieldTransforms,sr,ir.transformResults);or.setAll(ar),sr.convertToFoundDocument(ir.version,or).setHasCommittedMutations()}(er,_e,tr):er instanceof __PRIVATE_PatchMutation?function(nr,sr,ir){if(!__PRIVATE_preconditionIsValidForDocument(nr.precondition,sr))return void sr.convertToUnknownDocument(ir.version);const or=__PRIVATE_serverTransformResults(nr.fieldTransforms,sr,ir.transformResults),ar=sr.data;ar.setAll(__PRIVATE_getPatch(nr)),ar.setAll(or),sr.convertToFoundDocument(ir.version,ar).setHasCommittedMutations()}(er,_e,tr):function(nr,sr,ir){sr.convertToNoDocument(ir.version).setHasCommittedMutations()}(0,_e,tr)}function __PRIVATE_mutationApplyToLocalView(er,_e,tr,rr){return er instanceof __PRIVATE_SetMutation?function(sr,ir,or,ar){if(!__PRIVATE_preconditionIsValidForDocument(sr.precondition,ir))return or;const lr=sr.value.clone(),cr=__PRIVATE_localTransformResults(sr.fieldTransforms,ar,ir);return lr.setAll(cr),ir.convertToFoundDocument(ir.version,lr).setHasLocalMutations(),null}(er,_e,tr,rr):er instanceof __PRIVATE_PatchMutation?function(sr,ir,or,ar){if(!__PRIVATE_preconditionIsValidForDocument(sr.precondition,ir))return or;const lr=__PRIVATE_localTransformResults(sr.fieldTransforms,ar,ir),cr=ir.data;return cr.setAll(__PRIVATE_getPatch(sr)),cr.setAll(lr),ir.convertToFoundDocument(ir.version,cr).setHasLocalMutations(),or===null?null:or.unionWith(sr.fieldMask.fields).unionWith(sr.fieldTransforms.map(Ar=>Ar.field))}(er,_e,tr,rr):function(sr,ir,or){return __PRIVATE_preconditionIsValidForDocument(sr.precondition,ir)?(ir.convertToNoDocument(ir.version).setHasLocalMutations(),null):or}(er,_e,tr)}function __PRIVATE_mutationExtractBaseValue(er,_e){let tr=null;for(const rr of er.fieldTransforms){const nr=_e.data.field(rr.field),sr=__PRIVATE_computeTransformOperationBaseValue(rr.transform,nr||null);sr!=null&&(tr===null&&(tr=ObjectValue.empty()),tr.set(rr.field,sr))}return tr||null}function __PRIVATE_mutationEquals(er,_e){return er.type===_e.type&&!!er.key.isEqual(_e.key)&&!!er.precondition.isEqual(_e.precondition)&&!!function(rr,nr){return rr===void 0&&nr===void 0||!(!rr||!nr)&&__PRIVATE_arrayEquals(rr,nr,(sr,ir)=>__PRIVATE_fieldTransformEquals(sr,ir))}(er.fieldTransforms,_e.fieldTransforms)&&(er.type===0?er.value.isEqual(_e.value):er.type!==1||er.data.isEqual(_e.data)&&er.fieldMask.isEqual(_e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(_e,tr,rr,nr=[]){super(),this.key=_e,this.value=tr,this.precondition=rr,this.fieldTransforms=nr,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(_e,tr,rr,nr,sr=[]){super(),this.key=_e,this.data=tr,this.fieldMask=rr,this.precondition=nr,this.fieldTransforms=sr,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(er){const _e=new Map;return er.fieldMask.fields.forEach(tr=>{if(!tr.isEmpty()){const rr=er.data.field(tr);_e.set(tr,rr)}}),_e}function __PRIVATE_serverTransformResults(er,_e,tr){const rr=new Map;__PRIVATE_hardAssert(er.length===tr.length,32656,{Ve:tr.length,me:er.length});for(let nr=0;nr<tr.length;nr++){const sr=er[nr],ir=sr.transform,or=_e.data.field(sr.field);rr.set(sr.field,__PRIVATE_applyTransformOperationToRemoteDocument(ir,or,tr[nr]))}return rr}function __PRIVATE_localTransformResults(er,_e,tr){const rr=new Map;for(const nr of er){const sr=nr.transform,ir=tr.data.field(nr.field);rr.set(nr.field,__PRIVATE_applyTransformOperationToLocalView(sr,ir,_e))}return rr}class __PRIVATE_DeleteMutation extends Mutation{constructor(_e,tr){super(),this.key=_e,this.precondition=tr,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(_e,tr){super(),this.key=_e,this.precondition=tr,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(_e,tr,rr,nr){this.batchId=_e,this.localWriteTime=tr,this.baseMutations=rr,this.mutations=nr}applyToRemoteDocument(_e,tr){const rr=tr.mutationResults;for(let nr=0;nr<this.mutations.length;nr++){const sr=this.mutations[nr];sr.key.isEqual(_e.key)&&__PRIVATE_mutationApplyToRemoteDocument(sr,_e,rr[nr])}}applyToLocalView(_e,tr){for(const rr of this.baseMutations)rr.key.isEqual(_e.key)&&(tr=__PRIVATE_mutationApplyToLocalView(rr,_e,tr,this.localWriteTime));for(const rr of this.mutations)rr.key.isEqual(_e.key)&&(tr=__PRIVATE_mutationApplyToLocalView(rr,_e,tr,this.localWriteTime));return tr}applyToLocalDocumentSet(_e,tr){const rr=__PRIVATE_newMutationMap();return this.mutations.forEach(nr=>{const sr=_e.get(nr.key),ir=sr.overlayedDocument;let or=this.applyToLocalView(ir,sr.mutatedFields);or=tr.has(nr.key)?null:or;const ar=__PRIVATE_calculateOverlayMutation(ir,or);ar!==null&&rr.set(nr.key,ar),ir.isValidDocument()||ir.convertToNoDocument(SnapshotVersion.min())}),rr}keys(){return this.mutations.reduce((_e,tr)=>_e.add(tr.key),__PRIVATE_documentKeySet())}isEqual(_e){return this.batchId===_e.batchId&&__PRIVATE_arrayEquals(this.mutations,_e.mutations,(tr,rr)=>__PRIVATE_mutationEquals(tr,rr))&&__PRIVATE_arrayEquals(this.baseMutations,_e.baseMutations,(tr,rr)=>__PRIVATE_mutationEquals(tr,rr))}}class MutationBatchResult{constructor(_e,tr,rr,nr){this.batch=_e,this.commitVersion=tr,this.mutationResults=rr,this.docVersions=nr}static from(_e,tr,rr){__PRIVATE_hardAssert(_e.mutations.length===rr.length,58842,{fe:_e.mutations.length,ge:rr.length});let nr=function(){return Rt$1}();const sr=_e.mutations;for(let ir=0;ir<sr.length;ir++)nr=nr.insert(sr[ir].key,rr[ir].version);return new MutationBatchResult(_e,tr,rr,nr)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Overlay$1=class{constructor(_e,tr){this.largestBatchId=_e,this.mutation=tr}getKey(){return this.mutation.key}isEqual(_e){return _e!==null&&this.mutation===_e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(_e,tr){this.count=_e,this.unchangedNames=tr}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft$1,gt$1;function __PRIVATE_isPermanentError(er){switch(er){case N$1.OK:return fail(64938);case N$1.CANCELLED:case N$1.UNKNOWN:case N$1.DEADLINE_EXCEEDED:case N$1.RESOURCE_EXHAUSTED:case N$1.INTERNAL:case N$1.UNAVAILABLE:case N$1.UNAUTHENTICATED:return!1;case N$1.INVALID_ARGUMENT:case N$1.NOT_FOUND:case N$1.ALREADY_EXISTS:case N$1.PERMISSION_DENIED:case N$1.FAILED_PRECONDITION:case N$1.ABORTED:case N$1.OUT_OF_RANGE:case N$1.UNIMPLEMENTED:case N$1.DATA_LOSS:return!0;default:return fail(15467,{code:er})}}function __PRIVATE_mapCodeFromRpcCode(er){if(er===void 0)return __PRIVATE_logError("GRPC error has no .code"),N$1.UNKNOWN;switch(er){case ft$1.OK:return N$1.OK;case ft$1.CANCELLED:return N$1.CANCELLED;case ft$1.UNKNOWN:return N$1.UNKNOWN;case ft$1.DEADLINE_EXCEEDED:return N$1.DEADLINE_EXCEEDED;case ft$1.RESOURCE_EXHAUSTED:return N$1.RESOURCE_EXHAUSTED;case ft$1.INTERNAL:return N$1.INTERNAL;case ft$1.UNAVAILABLE:return N$1.UNAVAILABLE;case ft$1.UNAUTHENTICATED:return N$1.UNAUTHENTICATED;case ft$1.INVALID_ARGUMENT:return N$1.INVALID_ARGUMENT;case ft$1.NOT_FOUND:return N$1.NOT_FOUND;case ft$1.ALREADY_EXISTS:return N$1.ALREADY_EXISTS;case ft$1.PERMISSION_DENIED:return N$1.PERMISSION_DENIED;case ft$1.FAILED_PRECONDITION:return N$1.FAILED_PRECONDITION;case ft$1.ABORTED:return N$1.ABORTED;case ft$1.OUT_OF_RANGE:return N$1.OUT_OF_RANGE;case ft$1.UNIMPLEMENTED:return N$1.UNIMPLEMENTED;case ft$1.DATA_LOSS:return N$1.DATA_LOSS;default:return fail(39323,{code:er})}}(gt$1=ft$1||(ft$1={}))[gt$1.OK=0]="OK",gt$1[gt$1.CANCELLED=1]="CANCELLED",gt$1[gt$1.UNKNOWN=2]="UNKNOWN",gt$1[gt$1.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt$1[gt$1.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt$1[gt$1.NOT_FOUND=5]="NOT_FOUND",gt$1[gt$1.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt$1[gt$1.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt$1[gt$1.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt$1[gt$1.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt$1[gt$1.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt$1[gt$1.ABORTED=10]="ABORTED",gt$1[gt$1.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt$1[gt$1.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt$1[gt$1.INTERNAL=13]="INTERNAL",gt$1[gt$1.UNAVAILABLE=14]="UNAVAILABLE",gt$1[gt$1.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt$1=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(er){const _e=__PRIVATE_newTextEncoder().encode(er),tr=new Md5;return tr.update(_e),new Uint8Array(tr.digest())}function __PRIVATE_get64BitUints(er){const _e=new DataView(er.buffer),tr=_e.getUint32(0,!0),rr=_e.getUint32(4,!0),nr=_e.getUint32(8,!0),sr=_e.getUint32(12,!0);return[new Integer([tr,rr],0),new Integer([nr,sr],0)]}class BloomFilter{constructor(_e,tr,rr){if(this.bitmap=_e,this.padding=tr,this.hashCount=rr,tr<0||tr>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${tr}`);if(rr<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${rr}`);if(_e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${rr}`);if(_e.length===0&&tr!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${tr}`);this.pe=8*_e.length-tr,this.ye=Integer.fromNumber(this.pe)}we(_e,tr,rr){let nr=_e.add(tr.multiply(Integer.fromNumber(rr)));return nr.compare(yt$1)===1&&(nr=new Integer([nr.getBits(0),nr.getBits(1)],0)),nr.modulo(this.ye).toNumber()}be(_e){return!!(this.bitmap[Math.floor(_e/8)]&1<<_e%8)}mightContain(_e){if(this.pe===0)return!1;const tr=__PRIVATE_getMd5HashValue(_e),[rr,nr]=__PRIVATE_get64BitUints(tr);for(let sr=0;sr<this.hashCount;sr++){const ir=this.we(rr,nr,sr);if(!this.be(ir))return!1}return!0}static create(_e,tr,rr){const nr=_e%8==0?0:8-_e%8,sr=new Uint8Array(Math.ceil(_e/8)),ir=new BloomFilter(sr,nr,tr);return rr.forEach(or=>ir.insert(or)),ir}insert(_e){if(this.pe===0)return;const tr=__PRIVATE_getMd5HashValue(_e),[rr,nr]=__PRIVATE_get64BitUints(tr);for(let sr=0;sr<this.hashCount;sr++){const ir=this.we(rr,nr,sr);this.Se(ir)}}Se(_e){const tr=Math.floor(_e/8),rr=_e%8;this.bitmap[tr]|=1<<rr}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(_e,tr,rr,nr,sr){this.snapshotVersion=_e,this.targetChanges=tr,this.targetMismatches=rr,this.documentUpdates=nr,this.resolvedLimboDocuments=sr}static createSynthesizedRemoteEventForCurrentChange(_e,tr,rr){const nr=new Map;return nr.set(_e,TargetChange.createSynthesizedTargetChangeForCurrentChange(_e,tr,rr)),new RemoteEvent(SnapshotVersion.min(),nr,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(_e,tr,rr,nr,sr){this.resumeToken=_e,this.current=tr,this.addedDocuments=rr,this.modifiedDocuments=nr,this.removedDocuments=sr}static createSynthesizedTargetChangeForCurrentChange(_e,tr,rr){return new TargetChange(rr,tr,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(_e,tr,rr,nr){this.De=_e,this.removedTargetIds=tr,this.key=rr,this.ve=nr}}class __PRIVATE_ExistenceFilterChange{constructor(_e,tr){this.targetId=_e,this.Ce=tr}}class __PRIVATE_WatchTargetChange{constructor(_e,tr,rr=ByteString.EMPTY_BYTE_STRING,nr=null){this.state=_e,this.targetIds=tr,this.resumeToken=rr,this.cause=nr}}class __PRIVATE_TargetState{constructor(){this.Fe=0,this.Me=__PRIVATE_snapshotChangesMap(),this.xe=ByteString.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(_e){_e.approximateByteSize()>0&&(this.Ne=!0,this.xe=_e)}qe(){let _e=__PRIVATE_documentKeySet(),tr=__PRIVATE_documentKeySet(),rr=__PRIVATE_documentKeySet();return this.Me.forEach((nr,sr)=>{switch(sr){case 0:_e=_e.add(nr);break;case 2:tr=tr.add(nr);break;case 1:rr=rr.add(nr);break;default:fail(38017,{changeType:sr})}}),new TargetChange(this.xe,this.Oe,_e,tr,rr)}Qe(){this.Ne=!1,this.Me=__PRIVATE_snapshotChangesMap()}$e(_e,tr){this.Ne=!0,this.Me=this.Me.insert(_e,tr)}Ue(_e){this.Ne=!0,this.Me=this.Me.remove(_e)}Ke(){this.Fe+=1}We(){this.Fe-=1,__PRIVATE_hardAssert(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class __PRIVATE_WatchChangeAggregator{constructor(_e){this.ze=_e,this.je=new Map,this.He=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.Ye=__PRIVATE_documentTargetMap(),this.Ze=new SortedMap(__PRIVATE_primitiveComparator)}Xe(_e){for(const tr of _e.De)_e.ve&&_e.ve.isFoundDocument()?this.et(tr,_e.ve):this.tt(tr,_e.key,_e.ve);for(const tr of _e.removedTargetIds)this.tt(tr,_e.key,_e.ve)}nt(_e){this.forEachTarget(_e,tr=>{const rr=this.rt(tr);switch(_e.state){case 0:this.it(tr)&&rr.ke(_e.resumeToken);break;case 1:rr.We(),rr.Be||rr.Qe(),rr.ke(_e.resumeToken);break;case 2:rr.We(),rr.Be||this.removeTarget(tr);break;case 3:this.it(tr)&&(rr.Ge(),rr.ke(_e.resumeToken));break;case 4:this.it(tr)&&(this.st(tr),rr.ke(_e.resumeToken));break;default:fail(56790,{state:_e.state})}})}forEachTarget(_e,tr){_e.targetIds.length>0?_e.targetIds.forEach(tr):this.je.forEach((rr,nr)=>{this.it(nr)&&tr(nr)})}ot(_e){const tr=_e.targetId,rr=_e.Ce.count,nr=this._t(tr);if(nr){const sr=nr.target;if(__PRIVATE_targetIsDocumentTarget(sr))if(rr===0){const ir=new DocumentKey(sr.path);this.tt(tr,ir,MutableDocument.newNoDocument(ir,SnapshotVersion.min()))}else __PRIVATE_hardAssert(rr===1,20013,{expectedCount:rr});else{const ir=this.ut(tr);if(ir!==rr){const or=this.ct(_e),ar=or?this.lt(or,_e,ir):1;if(ar!==0){this.st(tr);const lr=ar===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(tr,lr)}}}}}ct(_e){const tr=_e.Ce.unchangedNames;if(!tr||!tr.bits)return null;const{bits:{bitmap:rr="",padding:nr=0},hashCount:sr=0}=tr;let ir,or;try{ir=__PRIVATE_normalizeByteString(rr).toUint8Array()}catch(ar){if(ar instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+ar.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw ar}try{or=new BloomFilter(ir,nr,sr)}catch(ar){return __PRIVATE_logWarn(ar instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",ar),null}return or.pe===0?null:or}lt(_e,tr,rr){return tr.Ce.count===rr-this.Tt(_e,tr.targetId)?0:2}Tt(_e,tr){const rr=this.ze.getRemoteKeysForTarget(tr);let nr=0;return rr.forEach(sr=>{const ir=this.ze.Pt(),or=`projects/${ir.projectId}/databases/${ir.database}/documents/${sr.path.canonicalString()}`;_e.mightContain(or)||(this.tt(tr,sr,null),nr++)}),nr}It(_e){const tr=new Map;this.je.forEach((sr,ir)=>{const or=this._t(ir);if(or){if(sr.current&&__PRIVATE_targetIsDocumentTarget(or.target)){const ar=new DocumentKey(or.target.path);this.Et(ar).has(ir)||this.dt(ir,ar)||this.tt(ir,ar,MutableDocument.newNoDocument(ar,_e))}sr.Le&&(tr.set(ir,sr.qe()),sr.Qe())}});let rr=__PRIVATE_documentKeySet();this.Ye.forEach((sr,ir)=>{let or=!0;ir.forEachWhile(ar=>{const lr=this._t(ar);return!lr||lr.purpose==="TargetPurposeLimboResolution"||(or=!1,!1)}),or&&(rr=rr.add(sr))}),this.He.forEach((sr,ir)=>ir.setReadTime(_e));const nr=new RemoteEvent(_e,tr,this.Ze,this.He,rr);return this.He=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.Ye=__PRIVATE_documentTargetMap(),this.Ze=new SortedMap(__PRIVATE_primitiveComparator),nr}et(_e,tr){if(!this.it(_e))return;const rr=this.dt(_e,tr.key)?2:0;this.rt(_e).$e(tr.key,rr),this.He=this.He.insert(tr.key,tr),this.Je=this.Je.insert(tr.key,this.Et(tr.key).add(_e)),this.Ye=this.Ye.insert(tr.key,this.At(tr.key).add(_e))}tt(_e,tr,rr){if(!this.it(_e))return;const nr=this.rt(_e);this.dt(_e,tr)?nr.$e(tr,1):nr.Ue(tr),this.Ye=this.Ye.insert(tr,this.At(tr).delete(_e)),this.Ye=this.Ye.insert(tr,this.At(tr).add(_e)),rr&&(this.He=this.He.insert(tr,rr))}removeTarget(_e){this.je.delete(_e)}ut(_e){const tr=this.rt(_e).qe();return this.ze.getRemoteKeysForTarget(_e).size+tr.addedDocuments.size-tr.removedDocuments.size}Ke(_e){this.rt(_e).Ke()}rt(_e){let tr=this.je.get(_e);return tr||(tr=new __PRIVATE_TargetState,this.je.set(_e,tr)),tr}At(_e){let tr=this.Ye.get(_e);return tr||(tr=new SortedSet(__PRIVATE_primitiveComparator),this.Ye=this.Ye.insert(_e,tr)),tr}Et(_e){let tr=this.Je.get(_e);return tr||(tr=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(_e,tr)),tr}it(_e){const tr=this._t(_e)!==null;return tr||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",_e),tr}_t(_e){const tr=this.je.get(_e);return tr&&tr.Be?null:this.ze.Rt(_e)}st(_e){this.je.set(_e,new __PRIVATE_TargetState),this.ze.getRemoteKeysForTarget(_e).forEach(tr=>{this.tt(_e,tr,null)})}dt(_e,tr){return this.ze.getRemoteKeysForTarget(_e).has(tr)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const wt$1={asc:"ASCENDING",desc:"DESCENDING"},bt$1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},St={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(_e,tr){this.databaseId=_e,this.useProto3Json=tr}}function __PRIVATE_toInt32Proto(er,_e){return er.useProto3Json||__PRIVATE_isNullOrUndefined(_e)?_e:{value:_e}}function toTimestamp(er,_e){return er.useProto3Json?`${new Date(1e3*_e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+_e.nanoseconds).slice(-9)}Z`:{seconds:""+_e.seconds,nanos:_e.nanoseconds}}function __PRIVATE_toBytes(er,_e){return er.useProto3Json?_e.toBase64():_e.toUint8Array()}function __PRIVATE_toVersion(er,_e){return toTimestamp(er,_e.toTimestamp())}function __PRIVATE_fromVersion(er){return __PRIVATE_hardAssert(!!er,49232),SnapshotVersion.fromTimestamp(function(tr){const rr=__PRIVATE_normalizeTimestamp(tr);return new Timestamp(rr.seconds,rr.nanos)}(er))}function __PRIVATE_toResourceName(er,_e){return __PRIVATE_toResourcePath(er,_e).canonicalString()}function __PRIVATE_toResourcePath(er,_e){const tr=function(nr){return new ResourcePath(["projects",nr.projectId,"databases",nr.database])}(er).child("documents");return _e===void 0?tr:tr.child(_e)}function __PRIVATE_fromResourceName(er){const _e=ResourcePath.fromString(er);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(_e),10190,{key:_e.toString()}),_e}function __PRIVATE_toName(er,_e){return __PRIVATE_toResourceName(er.databaseId,_e.path)}function fromName(er,_e){const tr=__PRIVATE_fromResourceName(_e);if(tr.get(1)!==er.databaseId.projectId)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+tr.get(1)+" vs "+er.databaseId.projectId);if(tr.get(3)!==er.databaseId.database)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+tr.get(3)+" vs "+er.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(tr))}function __PRIVATE_toQueryPath(er,_e){return __PRIVATE_toResourceName(er.databaseId,_e)}function __PRIVATE_fromQueryPath(er){const _e=__PRIVATE_fromResourceName(er);return _e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(_e)}function __PRIVATE_getEncodedDatabaseId(er){return new ResourcePath(["projects",er.databaseId.projectId,"databases",er.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(er){return __PRIVATE_hardAssert(er.length>4&&er.get(4)==="documents",29091,{key:er.toString()}),er.popFirst(5)}function __PRIVATE_toMutationDocument(er,_e,tr){return{name:__PRIVATE_toName(er,_e),fields:tr.value.mapValue.fields}}function __PRIVATE_fromWatchChange(er,_e){let tr;if("targetChange"in _e){_e.targetChange;const rr=function(lr){return lr==="NO_CHANGE"?0:lr==="ADD"?1:lr==="REMOVE"?2:lr==="CURRENT"?3:lr==="RESET"?4:fail(39313,{state:lr})}(_e.targetChange.targetChangeType||"NO_CHANGE"),nr=_e.targetChange.targetIds||[],sr=function(lr,cr){return lr.useProto3Json?(__PRIVATE_hardAssert(cr===void 0||typeof cr=="string",58123),ByteString.fromBase64String(cr||"")):(__PRIVATE_hardAssert(cr===void 0||cr instanceof Buffer||cr instanceof Uint8Array,16193),ByteString.fromUint8Array(cr||new Uint8Array))}(er,_e.targetChange.resumeToken),ir=_e.targetChange.cause,or=ir&&function(lr){const cr=lr.code===void 0?N$1.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(lr.code);return new FirestoreError(cr,lr.message||"")}(ir);tr=new __PRIVATE_WatchTargetChange(rr,nr,sr,or||null)}else if("documentChange"in _e){_e.documentChange;const rr=_e.documentChange;rr.document,rr.document.name,rr.document.updateTime;const nr=fromName(er,rr.document.name),sr=__PRIVATE_fromVersion(rr.document.updateTime),ir=rr.document.createTime?__PRIVATE_fromVersion(rr.document.createTime):SnapshotVersion.min(),or=new ObjectValue({mapValue:{fields:rr.document.fields}}),ar=MutableDocument.newFoundDocument(nr,sr,ir,or),lr=rr.targetIds||[],cr=rr.removedTargetIds||[];tr=new __PRIVATE_DocumentWatchChange(lr,cr,ar.key,ar)}else if("documentDelete"in _e){_e.documentDelete;const rr=_e.documentDelete;rr.document;const nr=fromName(er,rr.document),sr=rr.readTime?__PRIVATE_fromVersion(rr.readTime):SnapshotVersion.min(),ir=MutableDocument.newNoDocument(nr,sr),or=rr.removedTargetIds||[];tr=new __PRIVATE_DocumentWatchChange([],or,ir.key,ir)}else if("documentRemove"in _e){_e.documentRemove;const rr=_e.documentRemove;rr.document;const nr=fromName(er,rr.document),sr=rr.removedTargetIds||[];tr=new __PRIVATE_DocumentWatchChange([],sr,nr,null)}else{if(!("filter"in _e))return fail(11601,{Vt:_e});{_e.filter;const rr=_e.filter;rr.targetId;const{count:nr=0,unchangedNames:sr}=rr,ir=new ExistenceFilter(nr,sr),or=rr.targetId;tr=new __PRIVATE_ExistenceFilterChange(or,ir)}}return tr}function toMutation(er,_e){let tr;if(_e instanceof __PRIVATE_SetMutation)tr={update:__PRIVATE_toMutationDocument(er,_e.key,_e.value)};else if(_e instanceof __PRIVATE_DeleteMutation)tr={delete:__PRIVATE_toName(er,_e.key)};else if(_e instanceof __PRIVATE_PatchMutation)tr={update:__PRIVATE_toMutationDocument(er,_e.key,_e.data),updateMask:__PRIVATE_toDocumentMask(_e.fieldMask)};else{if(!(_e instanceof __PRIVATE_VerifyMutation))return fail(16599,{ft:_e.type});tr={verify:__PRIVATE_toName(er,_e.key)}}return _e.fieldTransforms.length>0&&(tr.updateTransforms=_e.fieldTransforms.map(rr=>function(sr,ir){const or=ir.transform;if(or instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:ir.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(or instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:ir.field.canonicalString(),appendMissingElements:{values:or.elements}};if(or instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:ir.field.canonicalString(),removeAllFromArray:{values:or.elements}};if(or instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:ir.field.canonicalString(),increment:or.Re};throw fail(20930,{transform:ir.transform})}(0,rr))),_e.precondition.isNone||(tr.currentDocument=function(nr,sr){return sr.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(nr,sr.updateTime)}:sr.exists!==void 0?{exists:sr.exists}:fail(27497)}(er,_e.precondition)),tr}function __PRIVATE_fromWriteResults(er,_e){return er&&er.length>0?(__PRIVATE_hardAssert(_e!==void 0,14353),er.map(tr=>function(nr,sr){let ir=nr.updateTime?__PRIVATE_fromVersion(nr.updateTime):__PRIVATE_fromVersion(sr);return ir.isEqual(SnapshotVersion.min())&&(ir=__PRIVATE_fromVersion(sr)),new MutationResult(ir,nr.transformResults||[])}(tr,_e))):[]}function __PRIVATE_toDocumentsTarget(er,_e){return{documents:[__PRIVATE_toQueryPath(er,_e.path)]}}function __PRIVATE_toQueryTarget(er,_e){const tr={structuredQuery:{}},rr=_e.path;let nr;_e.collectionGroup!==null?(nr=rr,tr.structuredQuery.from=[{collectionId:_e.collectionGroup,allDescendants:!0}]):(nr=rr.popLast(),tr.structuredQuery.from=[{collectionId:rr.lastSegment()}]),tr.parent=__PRIVATE_toQueryPath(er,nr);const sr=function(lr){if(lr.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(lr,"and"))}(_e.filters);sr&&(tr.structuredQuery.where=sr);const ir=function(lr){if(lr.length!==0)return lr.map(cr=>function(ur){return{field:__PRIVATE_toFieldPathReference(ur.field),direction:__PRIVATE_toDirection(ur.dir)}}(cr))}(_e.orderBy);ir&&(tr.structuredQuery.orderBy=ir);const or=__PRIVATE_toInt32Proto(er,_e.limit);return or!==null&&(tr.structuredQuery.limit=or),_e.startAt&&(tr.structuredQuery.startAt=function(lr){return{before:lr.inclusive,values:lr.position}}(_e.startAt)),_e.endAt&&(tr.structuredQuery.endAt=function(lr){return{before:!lr.inclusive,values:lr.position}}(_e.endAt)),{gt:tr,parent:nr}}function __PRIVATE_convertQueryTargetToQuery(er){let _e=__PRIVATE_fromQueryPath(er.parent);const tr=er.structuredQuery,rr=tr.from?tr.from.length:0;let nr=null;if(rr>0){__PRIVATE_hardAssert(rr===1,65062);const cr=tr.from[0];cr.allDescendants?nr=cr.collectionId:_e=_e.child(cr.collectionId)}let sr=[];tr.where&&(sr=function(Ar){const ur=__PRIVATE_fromFilter(Ar);return ur instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(ur)?ur.getFilters():[ur]}(tr.where));let ir=[];tr.orderBy&&(ir=function(Ar){return Ar.map(ur=>function(mr){return new OrderBy(__PRIVATE_fromFieldPathReference(mr.field),function(yr){switch(yr){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(mr.direction))}(ur))}(tr.orderBy));let or=null;tr.limit&&(or=function(Ar){let ur;return ur=typeof Ar=="object"?Ar.value:Ar,__PRIVATE_isNullOrUndefined(ur)?null:ur}(tr.limit));let ar=null;tr.startAt&&(ar=function(Ar){const ur=!!Ar.before,dr=Ar.values||[];return new Bound(dr,ur)}(tr.startAt));let lr=null;return tr.endAt&&(lr=function(Ar){const ur=!Ar.before,dr=Ar.values||[];return new Bound(dr,ur)}(tr.endAt)),__PRIVATE_newQuery(_e,nr,ir,sr,or,"F",ar,lr)}function __PRIVATE_toListenRequestLabels(er,_e){const tr=function(nr){switch(nr){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:nr})}}(_e.purpose);return tr==null?null:{"goog-listen-tags":tr}}function __PRIVATE_fromFilter(er){return er.unaryFilter!==void 0?function(tr){switch(tr.unaryFilter.op){case"IS_NAN":const rr=__PRIVATE_fromFieldPathReference(tr.unaryFilter.field);return FieldFilter.create(rr,"==",{doubleValue:NaN});case"IS_NULL":const nr=__PRIVATE_fromFieldPathReference(tr.unaryFilter.field);return FieldFilter.create(nr,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const sr=__PRIVATE_fromFieldPathReference(tr.unaryFilter.field);return FieldFilter.create(sr,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const ir=__PRIVATE_fromFieldPathReference(tr.unaryFilter.field);return FieldFilter.create(ir,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}}(er):er.fieldFilter!==void 0?function(tr){return FieldFilter.create(__PRIVATE_fromFieldPathReference(tr.fieldFilter.field),function(nr){switch(nr){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}}(tr.fieldFilter.op),tr.fieldFilter.value)}(er):er.compositeFilter!==void 0?function(tr){return CompositeFilter.create(tr.compositeFilter.filters.map(rr=>__PRIVATE_fromFilter(rr)),function(nr){switch(nr){case"AND":return"and";case"OR":return"or";default:return fail(1026)}}(tr.compositeFilter.op))}(er):fail(30097,{filter:er})}function __PRIVATE_toDirection(er){return wt$1[er]}function __PRIVATE_toOperatorName(er){return bt$1[er]}function __PRIVATE_toCompositeOperatorName(er){return St[er]}function __PRIVATE_toFieldPathReference(er){return{fieldPath:er.canonicalString()}}function __PRIVATE_fromFieldPathReference(er){return FieldPath$1.fromServerFormat(er.fieldPath)}function __PRIVATE_toFilter(er){return er instanceof FieldFilter?function(tr){if(tr.op==="=="){if(__PRIVATE_isNanValue(tr.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(tr.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(tr.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(tr.field),op:"IS_NULL"}}}else if(tr.op==="!="){if(__PRIVATE_isNanValue(tr.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(tr.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(tr.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(tr.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(tr.field),op:__PRIVATE_toOperatorName(tr.op),value:tr.value}}}(er):er instanceof CompositeFilter?function(tr){const rr=tr.getFilters().map(nr=>__PRIVATE_toFilter(nr));return rr.length===1?rr[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(tr.op),filters:rr}}}(er):fail(54877,{filter:er})}function __PRIVATE_toDocumentMask(er){const _e=[];return er.fields.forEach(tr=>_e.push(tr.canonicalString())),{fieldPaths:_e}}function __PRIVATE_isValidResourceName(er){return er.length>=4&&er.get(0)==="projects"&&er.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(_e,tr,rr,nr,sr=SnapshotVersion.min(),ir=SnapshotVersion.min(),or=ByteString.EMPTY_BYTE_STRING,ar=null){this.target=_e,this.targetId=tr,this.purpose=rr,this.sequenceNumber=nr,this.snapshotVersion=sr,this.lastLimboFreeSnapshotVersion=ir,this.resumeToken=or,this.expectedCount=ar}withSequenceNumber(_e){return new TargetData(this.target,this.targetId,this.purpose,_e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(_e,tr){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,tr,this.lastLimboFreeSnapshotVersion,_e,null)}withExpectedCount(_e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,_e)}withLastLimboFreeSnapshotVersion(_e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,_e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(_e){this.wt=_e}}function __PRIVATE_fromBundledQuery(er){const _e=__PRIVATE_convertQueryTargetToQuery({parent:er.parent,structuredQuery:er.structuredQuery});return er.limitType==="LAST"?__PRIVATE_queryWithLimit(_e,_e.limit,"L"):_e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.Cn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(_e,tr){return this.Cn.add(tr),PersistencePromise.resolve()}getCollectionParents(_e,tr){return PersistencePromise.resolve(this.Cn.getEntries(tr))}addFieldIndex(_e,tr){return PersistencePromise.resolve()}deleteFieldIndex(_e,tr){return PersistencePromise.resolve()}deleteAllFieldIndexes(_e){return PersistencePromise.resolve()}createTargetIndexes(_e,tr){return PersistencePromise.resolve()}getDocumentsMatchingTarget(_e,tr){return PersistencePromise.resolve(null)}getIndexType(_e,tr){return PersistencePromise.resolve(0)}getFieldIndexes(_e,tr){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(_e){return PersistencePromise.resolve(null)}getMinOffset(_e,tr){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(_e,tr){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(_e,tr,rr){return PersistencePromise.resolve()}updateIndexEntries(_e,tr){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(_e){const tr=_e.lastSegment(),rr=_e.popLast(),nr=this.index[tr]||new SortedSet(ResourcePath.comparator),sr=!nr.has(rr);return this.index[tr]=nr.add(rr),sr}has(_e){const tr=_e.lastSegment(),rr=_e.popLast(),nr=this.index[tr];return nr&&nr.has(rr)}getEntries(_e){return(this.index[_e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft$1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mt$1=41943040;class LruParams{static withCacheSize(_e){return new LruParams(_e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(_e,tr,rr){this.cacheSizeCollectionThreshold=_e,this.percentileToCollect=tr,this.maximumSequenceNumbersToCollect=rr}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Mt$1,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(_e){this.ur=_e}next(){return this.ur+=2,this.ur}static cr(){return new __PRIVATE_TargetIdGenerator(0)}static lr(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt$1="LruGarbageCollector",Ot$1=1048576;function __PRIVATE_bufferEntryComparator([er,_e],[tr,rr]){const nr=__PRIVATE_primitiveComparator(er,tr);return nr===0?__PRIVATE_primitiveComparator(_e,rr):nr}class __PRIVATE_RollingSequenceNumberBuffer{constructor(_e){this.Er=_e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.dr=0}Ar(){return++this.dr}Rr(_e){const tr=[_e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(tr);else{const rr=this.buffer.last();__PRIVATE_bufferEntryComparator(tr,rr)<0&&(this.buffer=this.buffer.delete(rr).add(tr))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(_e,tr,rr){this.garbageCollector=_e,this.asyncQueue=tr,this.localStore=rr,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(_e){__PRIVATE_logDebug(xt$1,`Garbage collection scheduled in ${_e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",_e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(tr){__PRIVATE_isIndexedDbTransactionError(tr)?__PRIVATE_logDebug(xt$1,"Ignoring IndexedDB error during garbage collection: ",tr):await __PRIVATE_ignoreIfPrimaryLeaseLoss(tr)}await this.mr(3e5)})}}class __PRIVATE_LruGarbageCollectorImpl{constructor(_e,tr){this.gr=_e,this.params=tr}calculateTargetCount(_e,tr){return this.gr.pr(_e).next(rr=>Math.floor(tr/100*rr))}nthSequenceNumber(_e,tr){if(tr===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.le);const rr=new __PRIVATE_RollingSequenceNumberBuffer(tr);return this.gr.forEachTarget(_e,nr=>rr.Rr(nr.sequenceNumber)).next(()=>this.gr.yr(_e,nr=>rr.Rr(nr))).next(()=>rr.maxValue)}removeTargets(_e,tr,rr){return this.gr.removeTargets(_e,tr,rr)}removeOrphanedDocuments(_e,tr){return this.gr.removeOrphanedDocuments(_e,tr)}collect(_e,tr){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(Ft$1)):this.getCacheSize(_e).next(rr=>rr<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${rr} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ft$1):this.wr(_e,tr))}getCacheSize(_e){return this.gr.getCacheSize(_e)}wr(_e,tr){let rr,nr,sr,ir,or,ar,lr;const cr=Date.now();return this.calculateTargetCount(_e,this.params.percentileToCollect).next(Ar=>(Ar>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ar}`),nr=this.params.maximumSequenceNumbersToCollect):nr=Ar,ir=Date.now(),this.nthSequenceNumber(_e,nr))).next(Ar=>(rr=Ar,or=Date.now(),this.removeTargets(_e,rr,tr))).next(Ar=>(sr=Ar,ar=Date.now(),this.removeOrphanedDocuments(_e,rr))).next(Ar=>(lr=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${ir-cr}ms
	Determined least recently used ${nr} in `+(or-ir)+`ms
	Removed ${sr} targets in `+(ar-or)+`ms
	Removed ${Ar} documents in `+(lr-ar)+`ms
Total Duration: ${lr-cr}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:nr,targetsRemoved:sr,documentsRemoved:Ar})))}}function __PRIVATE_newLruGarbageCollector(er,_e){return new __PRIVATE_LruGarbageCollectorImpl(er,_e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(_e=>_e.toString(),(_e,tr)=>_e.isEqual(tr)),this.changesApplied=!1}addEntry(_e){this.assertNotApplied(),this.changes.set(_e.key,_e)}removeEntry(_e,tr){this.assertNotApplied(),this.changes.set(_e,MutableDocument.newInvalidDocument(_e).setReadTime(tr))}getEntry(_e,tr){this.assertNotApplied();const rr=this.changes.get(tr);return rr!==void 0?PersistencePromise.resolve(rr):this.getFromCache(_e,tr)}getEntries(_e,tr){return this.getAllFromCache(_e,tr)}apply(_e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(_e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(_e,tr){this.overlayedDocument=_e,this.mutatedFields=tr}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(_e,tr,rr,nr){this.remoteDocumentCache=_e,this.mutationQueue=tr,this.documentOverlayCache=rr,this.indexManager=nr}getDocument(_e,tr){let rr=null;return this.documentOverlayCache.getOverlay(_e,tr).next(nr=>(rr=nr,this.remoteDocumentCache.getEntry(_e,tr))).next(nr=>(rr!==null&&__PRIVATE_mutationApplyToLocalView(rr.mutation,nr,FieldMask.empty(),Timestamp.now()),nr))}getDocuments(_e,tr){return this.remoteDocumentCache.getEntries(_e,tr).next(rr=>this.getLocalViewOfDocuments(_e,rr,__PRIVATE_documentKeySet()).next(()=>rr))}getLocalViewOfDocuments(_e,tr,rr=__PRIVATE_documentKeySet()){const nr=__PRIVATE_newOverlayMap();return this.populateOverlays(_e,nr,tr).next(()=>this.computeViews(_e,tr,nr,rr).next(sr=>{let ir=documentMap();return sr.forEach((or,ar)=>{ir=ir.insert(or,ar.overlayedDocument)}),ir}))}getOverlayedDocuments(_e,tr){const rr=__PRIVATE_newOverlayMap();return this.populateOverlays(_e,rr,tr).next(()=>this.computeViews(_e,tr,rr,__PRIVATE_documentKeySet()))}populateOverlays(_e,tr,rr){const nr=[];return rr.forEach(sr=>{tr.has(sr)||nr.push(sr)}),this.documentOverlayCache.getOverlays(_e,nr).next(sr=>{sr.forEach((ir,or)=>{tr.set(ir,or)})})}computeViews(_e,tr,rr,nr){let sr=__PRIVATE_mutableDocumentMap();const ir=__PRIVATE_newDocumentKeyMap(),or=function(){return __PRIVATE_newDocumentKeyMap()}();return tr.forEach((ar,lr)=>{const cr=rr.get(lr.key);nr.has(lr.key)&&(cr===void 0||cr.mutation instanceof __PRIVATE_PatchMutation)?sr=sr.insert(lr.key,lr):cr!==void 0?(ir.set(lr.key,cr.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(cr.mutation,lr,cr.mutation.getFieldMask(),Timestamp.now())):ir.set(lr.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(_e,sr).next(ar=>(ar.forEach((lr,cr)=>ir.set(lr,cr)),tr.forEach((lr,cr)=>{var Ar;return or.set(lr,new OverlayedDocument(cr,(Ar=ir.get(lr))!==null&&Ar!==void 0?Ar:null))}),or))}recalculateAndSaveOverlays(_e,tr){const rr=__PRIVATE_newDocumentKeyMap();let nr=new SortedMap((ir,or)=>ir-or),sr=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(_e,tr).next(ir=>{for(const or of ir)or.keys().forEach(ar=>{const lr=tr.get(ar);if(lr===null)return;let cr=rr.get(ar)||FieldMask.empty();cr=or.applyToLocalView(lr,cr),rr.set(ar,cr);const Ar=(nr.get(or.batchId)||__PRIVATE_documentKeySet()).add(ar);nr=nr.insert(or.batchId,Ar)})}).next(()=>{const ir=[],or=nr.getReverseIterator();for(;or.hasNext();){const ar=or.getNext(),lr=ar.key,cr=ar.value,Ar=__PRIVATE_newMutationMap();cr.forEach(ur=>{if(!sr.has(ur)){const dr=__PRIVATE_calculateOverlayMutation(tr.get(ur),rr.get(ur));dr!==null&&Ar.set(ur,dr),sr=sr.add(ur)}}),ir.push(this.documentOverlayCache.saveOverlays(_e,lr,Ar))}return PersistencePromise.waitFor(ir)}).next(()=>rr)}recalculateAndSaveOverlaysForDocumentKeys(_e,tr){return this.remoteDocumentCache.getEntries(_e,tr).next(rr=>this.recalculateAndSaveOverlays(_e,rr))}getDocumentsMatchingQuery(_e,tr,rr,nr){return function(ir){return DocumentKey.isDocumentKey(ir.path)&&ir.collectionGroup===null&&ir.filters.length===0}(tr)?this.getDocumentsMatchingDocumentQuery(_e,tr.path):__PRIVATE_isCollectionGroupQuery(tr)?this.getDocumentsMatchingCollectionGroupQuery(_e,tr,rr,nr):this.getDocumentsMatchingCollectionQuery(_e,tr,rr,nr)}getNextDocuments(_e,tr,rr,nr){return this.remoteDocumentCache.getAllFromCollectionGroup(_e,tr,rr,nr).next(sr=>{const ir=nr-sr.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(_e,tr,rr.largestBatchId,nr-sr.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let or=Q$1,ar=sr;return ir.next(lr=>PersistencePromise.forEach(lr,(cr,Ar)=>(or<Ar.largestBatchId&&(or=Ar.largestBatchId),sr.get(cr)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(_e,cr).next(ur=>{ar=ar.insert(cr,ur)}))).next(()=>this.populateOverlays(_e,lr,sr)).next(()=>this.computeViews(_e,ar,lr,__PRIVATE_documentKeySet())).next(cr=>({batchId:or,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(cr)})))})}getDocumentsMatchingDocumentQuery(_e,tr){return this.getDocument(_e,new DocumentKey(tr)).next(rr=>{let nr=documentMap();return rr.isFoundDocument()&&(nr=nr.insert(rr.key,rr)),nr})}getDocumentsMatchingCollectionGroupQuery(_e,tr,rr,nr){const sr=tr.collectionGroup;let ir=documentMap();return this.indexManager.getCollectionParents(_e,sr).next(or=>PersistencePromise.forEach(or,ar=>{const lr=function(Ar,ur){return new __PRIVATE_QueryImpl(ur,null,Ar.explicitOrderBy.slice(),Ar.filters.slice(),Ar.limit,Ar.limitType,Ar.startAt,Ar.endAt)}(tr,ar.child(sr));return this.getDocumentsMatchingCollectionQuery(_e,lr,rr,nr).next(cr=>{cr.forEach((Ar,ur)=>{ir=ir.insert(Ar,ur)})})}).next(()=>ir))}getDocumentsMatchingCollectionQuery(_e,tr,rr,nr){let sr;return this.documentOverlayCache.getOverlaysForCollection(_e,tr.path,rr.largestBatchId).next(ir=>(sr=ir,this.remoteDocumentCache.getDocumentsMatchingQuery(_e,tr,rr,sr,nr))).next(ir=>{sr.forEach((ar,lr)=>{const cr=lr.getKey();ir.get(cr)===null&&(ir=ir.insert(cr,MutableDocument.newInvalidDocument(cr)))});let or=documentMap();return ir.forEach((ar,lr)=>{const cr=sr.get(ar);cr!==void 0&&__PRIVATE_mutationApplyToLocalView(cr.mutation,lr,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(tr,lr)&&(or=or.insert(ar,lr))}),or})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(_e){this.serializer=_e,this.kr=new Map,this.qr=new Map}getBundleMetadata(_e,tr){return PersistencePromise.resolve(this.kr.get(tr))}saveBundleMetadata(_e,tr){return this.kr.set(tr.id,function(nr){return{id:nr.id,version:nr.version,createTime:__PRIVATE_fromVersion(nr.createTime)}}(tr)),PersistencePromise.resolve()}getNamedQuery(_e,tr){return PersistencePromise.resolve(this.qr.get(tr))}saveNamedQuery(_e,tr){return this.qr.set(tr.name,function(nr){return{name:nr.name,query:__PRIVATE_fromBundledQuery(nr.bundledQuery),readTime:__PRIVATE_fromVersion(nr.readTime)}}(tr)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.Qr=new Map}getOverlay(_e,tr){return PersistencePromise.resolve(this.overlays.get(tr))}getOverlays(_e,tr){const rr=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(tr,nr=>this.getOverlay(_e,nr).next(sr=>{sr!==null&&rr.set(nr,sr)})).next(()=>rr)}saveOverlays(_e,tr,rr){return rr.forEach((nr,sr)=>{this.St(_e,tr,sr)}),PersistencePromise.resolve()}removeOverlaysForBatchId(_e,tr,rr){const nr=this.Qr.get(rr);return nr!==void 0&&(nr.forEach(sr=>this.overlays=this.overlays.remove(sr)),this.Qr.delete(rr)),PersistencePromise.resolve()}getOverlaysForCollection(_e,tr,rr){const nr=__PRIVATE_newOverlayMap(),sr=tr.length+1,ir=new DocumentKey(tr.child("")),or=this.overlays.getIteratorFrom(ir);for(;or.hasNext();){const ar=or.getNext().value,lr=ar.getKey();if(!tr.isPrefixOf(lr.path))break;lr.path.length===sr&&ar.largestBatchId>rr&&nr.set(ar.getKey(),ar)}return PersistencePromise.resolve(nr)}getOverlaysForCollectionGroup(_e,tr,rr,nr){let sr=new SortedMap((lr,cr)=>lr-cr);const ir=this.overlays.getIterator();for(;ir.hasNext();){const lr=ir.getNext().value;if(lr.getKey().getCollectionGroup()===tr&&lr.largestBatchId>rr){let cr=sr.get(lr.largestBatchId);cr===null&&(cr=__PRIVATE_newOverlayMap(),sr=sr.insert(lr.largestBatchId,cr)),cr.set(lr.getKey(),lr)}}const or=__PRIVATE_newOverlayMap(),ar=sr.getIterator();for(;ar.hasNext()&&(ar.getNext().value.forEach((lr,cr)=>or.set(lr,cr)),!(or.size()>=nr)););return PersistencePromise.resolve(or)}St(_e,tr,rr){const nr=this.overlays.get(rr.key);if(nr!==null){const ir=this.Qr.get(nr.largestBatchId).delete(rr.key);this.Qr.set(nr.largestBatchId,ir)}this.overlays=this.overlays.insert(rr.key,new Overlay$1(tr,rr));let sr=this.Qr.get(tr);sr===void 0&&(sr=__PRIVATE_documentKeySet(),this.Qr.set(tr,sr)),this.Qr.set(tr,sr.add(rr.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(_e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(_e,tr){return this.sessionToken=tr,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.$r=new SortedSet(__PRIVATE_DocReference.Ur),this.Kr=new SortedSet(__PRIVATE_DocReference.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(_e,tr){const rr=new __PRIVATE_DocReference(_e,tr);this.$r=this.$r.add(rr),this.Kr=this.Kr.add(rr)}Gr(_e,tr){_e.forEach(rr=>this.addReference(rr,tr))}removeReference(_e,tr){this.zr(new __PRIVATE_DocReference(_e,tr))}jr(_e,tr){_e.forEach(rr=>this.removeReference(rr,tr))}Hr(_e){const tr=new DocumentKey(new ResourcePath([])),rr=new __PRIVATE_DocReference(tr,_e),nr=new __PRIVATE_DocReference(tr,_e+1),sr=[];return this.Kr.forEachInRange([rr,nr],ir=>{this.zr(ir),sr.push(ir.key)}),sr}Jr(){this.$r.forEach(_e=>this.zr(_e))}zr(_e){this.$r=this.$r.delete(_e),this.Kr=this.Kr.delete(_e)}Yr(_e){const tr=new DocumentKey(new ResourcePath([])),rr=new __PRIVATE_DocReference(tr,_e),nr=new __PRIVATE_DocReference(tr,_e+1);let sr=__PRIVATE_documentKeySet();return this.Kr.forEachInRange([rr,nr],ir=>{sr=sr.add(ir.key)}),sr}containsKey(_e){const tr=new __PRIVATE_DocReference(_e,0),rr=this.$r.firstAfterOrEqual(tr);return rr!==null&&_e.isEqual(rr.key)}}class __PRIVATE_DocReference{constructor(_e,tr){this.key=_e,this.Zr=tr}static Ur(_e,tr){return DocumentKey.comparator(_e.key,tr.key)||__PRIVATE_primitiveComparator(_e.Zr,tr.Zr)}static Wr(_e,tr){return __PRIVATE_primitiveComparator(_e.Zr,tr.Zr)||DocumentKey.comparator(_e.key,tr.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(_e,tr){this.indexManager=_e,this.referenceDelegate=tr,this.mutationQueue=[],this.nr=1,this.Xr=new SortedSet(__PRIVATE_DocReference.Ur)}checkEmpty(_e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(_e,tr,rr,nr){const sr=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const ir=new MutationBatch(sr,tr,rr,nr);this.mutationQueue.push(ir);for(const or of nr)this.Xr=this.Xr.add(new __PRIVATE_DocReference(or.key,sr)),this.indexManager.addToCollectionParentIndex(_e,or.key.path.popLast());return PersistencePromise.resolve(ir)}lookupMutationBatch(_e,tr){return PersistencePromise.resolve(this.ei(tr))}getNextMutationBatchAfterBatchId(_e,tr){const rr=tr+1,nr=this.ti(rr),sr=nr<0?0:nr;return PersistencePromise.resolve(this.mutationQueue.length>sr?this.mutationQueue[sr]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?G$1:this.nr-1)}getAllMutationBatches(_e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(_e,tr){const rr=new __PRIVATE_DocReference(tr,0),nr=new __PRIVATE_DocReference(tr,Number.POSITIVE_INFINITY),sr=[];return this.Xr.forEachInRange([rr,nr],ir=>{const or=this.ei(ir.Zr);sr.push(or)}),PersistencePromise.resolve(sr)}getAllMutationBatchesAffectingDocumentKeys(_e,tr){let rr=new SortedSet(__PRIVATE_primitiveComparator);return tr.forEach(nr=>{const sr=new __PRIVATE_DocReference(nr,0),ir=new __PRIVATE_DocReference(nr,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([sr,ir],or=>{rr=rr.add(or.Zr)})}),PersistencePromise.resolve(this.ni(rr))}getAllMutationBatchesAffectingQuery(_e,tr){const rr=tr.path,nr=rr.length+1;let sr=rr;DocumentKey.isDocumentKey(sr)||(sr=sr.child(""));const ir=new __PRIVATE_DocReference(new DocumentKey(sr),0);let or=new SortedSet(__PRIVATE_primitiveComparator);return this.Xr.forEachWhile(ar=>{const lr=ar.key.path;return!!rr.isPrefixOf(lr)&&(lr.length===nr&&(or=or.add(ar.Zr)),!0)},ir),PersistencePromise.resolve(this.ni(or))}ni(_e){const tr=[];return _e.forEach(rr=>{const nr=this.ei(rr);nr!==null&&tr.push(nr)}),tr}removeMutationBatch(_e,tr){__PRIVATE_hardAssert(this.ri(tr.batchId,"removed")===0,55003),this.mutationQueue.shift();let rr=this.Xr;return PersistencePromise.forEach(tr.mutations,nr=>{const sr=new __PRIVATE_DocReference(nr.key,tr.batchId);return rr=rr.delete(sr),this.referenceDelegate.markPotentiallyOrphaned(_e,nr.key)}).next(()=>{this.Xr=rr})}sr(_e){}containsKey(_e,tr){const rr=new __PRIVATE_DocReference(tr,0),nr=this.Xr.firstAfterOrEqual(rr);return PersistencePromise.resolve(tr.isEqual(nr&&nr.key))}performConsistencyCheck(_e){return this.mutationQueue.length,PersistencePromise.resolve()}ri(_e,tr){return this.ti(_e)}ti(_e){return this.mutationQueue.length===0?0:_e-this.mutationQueue[0].batchId}ei(_e){const tr=this.ti(_e);return tr<0||tr>=this.mutationQueue.length?null:this.mutationQueue[tr]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(_e){this.ii=_e,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(_e){this.indexManager=_e}addEntry(_e,tr){const rr=tr.key,nr=this.docs.get(rr),sr=nr?nr.size:0,ir=this.ii(tr);return this.docs=this.docs.insert(rr,{document:tr.mutableCopy(),size:ir}),this.size+=ir-sr,this.indexManager.addToCollectionParentIndex(_e,rr.path.popLast())}removeEntry(_e){const tr=this.docs.get(_e);tr&&(this.docs=this.docs.remove(_e),this.size-=tr.size)}getEntry(_e,tr){const rr=this.docs.get(tr);return PersistencePromise.resolve(rr?rr.document.mutableCopy():MutableDocument.newInvalidDocument(tr))}getEntries(_e,tr){let rr=__PRIVATE_mutableDocumentMap();return tr.forEach(nr=>{const sr=this.docs.get(nr);rr=rr.insert(nr,sr?sr.document.mutableCopy():MutableDocument.newInvalidDocument(nr))}),PersistencePromise.resolve(rr)}getDocumentsMatchingQuery(_e,tr,rr,nr){let sr=__PRIVATE_mutableDocumentMap();const ir=tr.path,or=new DocumentKey(ir.child("__id-9223372036854775808__")),ar=this.docs.getIteratorFrom(or);for(;ar.hasNext();){const{key:lr,value:{document:cr}}=ar.getNext();if(!ir.isPrefixOf(lr.path))break;lr.path.length>ir.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(cr),rr)<=0||(nr.has(cr.key)||__PRIVATE_queryMatches(tr,cr))&&(sr=sr.insert(cr.key,cr.mutableCopy()))}return PersistencePromise.resolve(sr)}getAllFromCollectionGroup(_e,tr,rr,nr){fail(9500)}si(_e,tr){return PersistencePromise.forEach(this.docs,rr=>tr(rr))}newChangeBuffer(_e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(_e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(_e){super(),this.Br=_e}applyChanges(_e){const tr=[];return this.changes.forEach((rr,nr)=>{nr.isValidDocument()?tr.push(this.Br.addEntry(_e,nr)):this.Br.removeEntry(rr)}),PersistencePromise.waitFor(tr)}getFromCache(_e,tr){return this.Br.getEntry(_e,tr)}getAllFromCache(_e,tr){return this.Br.getEntries(_e,tr)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(_e){this.persistence=_e,this.oi=new ObjectMap(tr=>__PRIVATE_canonifyTarget(tr),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this._i=0,this.ai=new __PRIVATE_ReferenceSet,this.targetCount=0,this.ui=__PRIVATE_TargetIdGenerator.cr()}forEachTarget(_e,tr){return this.oi.forEach((rr,nr)=>tr(nr)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(_e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(_e){return PersistencePromise.resolve(this._i)}allocateTargetId(_e){return this.highestTargetId=this.ui.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(_e,tr,rr){return rr&&(this.lastRemoteSnapshotVersion=rr),tr>this._i&&(this._i=tr),PersistencePromise.resolve()}Tr(_e){this.oi.set(_e.target,_e);const tr=_e.targetId;tr>this.highestTargetId&&(this.ui=new __PRIVATE_TargetIdGenerator(tr),this.highestTargetId=tr),_e.sequenceNumber>this._i&&(this._i=_e.sequenceNumber)}addTargetData(_e,tr){return this.Tr(tr),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(_e,tr){return this.Tr(tr),PersistencePromise.resolve()}removeTargetData(_e,tr){return this.oi.delete(tr.target),this.ai.Hr(tr.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(_e,tr,rr){let nr=0;const sr=[];return this.oi.forEach((ir,or)=>{or.sequenceNumber<=tr&&rr.get(or.targetId)===null&&(this.oi.delete(ir),sr.push(this.removeMatchingKeysForTargetId(_e,or.targetId)),nr++)}),PersistencePromise.waitFor(sr).next(()=>nr)}getTargetCount(_e){return PersistencePromise.resolve(this.targetCount)}getTargetData(_e,tr){const rr=this.oi.get(tr)||null;return PersistencePromise.resolve(rr)}addMatchingKeys(_e,tr,rr){return this.ai.Gr(tr,rr),PersistencePromise.resolve()}removeMatchingKeys(_e,tr,rr){this.ai.jr(tr,rr);const nr=this.persistence.referenceDelegate,sr=[];return nr&&tr.forEach(ir=>{sr.push(nr.markPotentiallyOrphaned(_e,ir))}),PersistencePromise.waitFor(sr)}removeMatchingKeysForTargetId(_e,tr){return this.ai.Hr(tr),PersistencePromise.resolve()}getMatchingKeysForTargetId(_e,tr){const rr=this.ai.Yr(tr);return PersistencePromise.resolve(rr)}containsKey(_e,tr){return PersistencePromise.resolve(this.ai.containsKey(tr))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(_e,tr){this.ci={},this.overlays={},this.li=new __PRIVATE_ListenSequence(0),this.hi=!1,this.hi=!0,this.Pi=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=_e(this),this.Ti=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(nr){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(nr)}(rr=>this.referenceDelegate.Ii(rr)),this.serializer=new __PRIVATE_LocalSerializer(tr),this.Ei=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(_e){return this.indexManager}getDocumentOverlayCache(_e){let tr=this.overlays[_e.toKey()];return tr||(tr=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[_e.toKey()]=tr),tr}getMutationQueue(_e,tr){let rr=this.ci[_e.toKey()];return rr||(rr=new __PRIVATE_MemoryMutationQueue(tr,this.referenceDelegate),this.ci[_e.toKey()]=rr),rr}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(_e,tr,rr){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",_e);const nr=new __PRIVATE_MemoryTransaction(this.li.next());return this.referenceDelegate.di(),rr(nr).next(sr=>this.referenceDelegate.Ai(nr).next(()=>sr)).toPromise().then(sr=>(nr.raiseOnCommittedEvent(),sr))}Ri(_e,tr){return PersistencePromise.or(Object.values(this.ci).map(rr=>()=>rr.containsKey(_e,tr)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(_e){super(),this.currentSequenceNumber=_e}}class __PRIVATE_MemoryEagerDelegate{constructor(_e){this.persistence=_e,this.Vi=new __PRIVATE_ReferenceSet,this.mi=null}static fi(_e){return new __PRIVATE_MemoryEagerDelegate(_e)}get gi(){if(this.mi)return this.mi;throw fail(60996)}addReference(_e,tr,rr){return this.Vi.addReference(rr,tr),this.gi.delete(rr.toString()),PersistencePromise.resolve()}removeReference(_e,tr,rr){return this.Vi.removeReference(rr,tr),this.gi.add(rr.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(_e,tr){return this.gi.add(tr.toString()),PersistencePromise.resolve()}removeTarget(_e,tr){this.Vi.Hr(tr.targetId).forEach(nr=>this.gi.add(nr.toString()));const rr=this.persistence.getTargetCache();return rr.getMatchingKeysForTargetId(_e,tr.targetId).next(nr=>{nr.forEach(sr=>this.gi.add(sr.toString()))}).next(()=>rr.removeTargetData(_e,tr))}di(){this.mi=new Set}Ai(_e){const tr=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.gi,rr=>{const nr=DocumentKey.fromPath(rr);return this.pi(_e,nr).next(sr=>{sr||tr.removeEntry(nr,SnapshotVersion.min())})}).next(()=>(this.mi=null,tr.apply(_e)))}updateLimboDocument(_e,tr){return this.pi(_e,tr).next(rr=>{rr?this.gi.delete(tr.toString()):this.gi.add(tr.toString())})}Ii(_e){return 0}pi(_e,tr){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Vi.containsKey(tr)),()=>this.persistence.getTargetCache().containsKey(_e,tr),()=>this.persistence.Ri(_e,tr)])}}class __PRIVATE_MemoryLruDelegate{constructor(_e,tr){this.persistence=_e,this.yi=new ObjectMap(rr=>__PRIVATE_encodeResourcePath(rr.path),(rr,nr)=>rr.isEqual(nr)),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,tr)}static fi(_e,tr){return new __PRIVATE_MemoryLruDelegate(_e,tr)}di(){}Ai(_e){return PersistencePromise.resolve()}forEachTarget(_e,tr){return this.persistence.getTargetCache().forEachTarget(_e,tr)}pr(_e){const tr=this.br(_e);return this.persistence.getTargetCache().getTargetCount(_e).next(rr=>tr.next(nr=>rr+nr))}br(_e){let tr=0;return this.yr(_e,rr=>{tr++}).next(()=>tr)}yr(_e,tr){return PersistencePromise.forEach(this.yi,(rr,nr)=>this.Dr(_e,rr,nr).next(sr=>sr?PersistencePromise.resolve():tr(nr)))}removeTargets(_e,tr,rr){return this.persistence.getTargetCache().removeTargets(_e,tr,rr)}removeOrphanedDocuments(_e,tr){let rr=0;const nr=this.persistence.getRemoteDocumentCache(),sr=nr.newChangeBuffer();return nr.si(_e,ir=>this.Dr(_e,ir,tr).next(or=>{or||(rr++,sr.removeEntry(ir,SnapshotVersion.min()))})).next(()=>sr.apply(_e)).next(()=>rr)}markPotentiallyOrphaned(_e,tr){return this.yi.set(tr,_e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(_e,tr){const rr=tr.withSequenceNumber(_e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(_e,rr)}addReference(_e,tr,rr){return this.yi.set(rr,_e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(_e,tr,rr){return this.yi.set(rr,_e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(_e,tr){return this.yi.set(tr,_e.currentSequenceNumber),PersistencePromise.resolve()}Ii(_e){let tr=_e.key.toString().length;return _e.isFoundDocument()&&(tr+=__PRIVATE_estimateByteSize(_e.data.value)),tr}Dr(_e,tr,rr){return PersistencePromise.or([()=>this.persistence.Ri(_e,tr),()=>this.persistence.getTargetCache().containsKey(_e,tr),()=>{const nr=this.yi.get(tr);return PersistencePromise.resolve(nr!==void 0&&nr>rr)}])}getCacheSize(_e){return this.persistence.getRemoteDocumentCache().getSize(_e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(_e,tr,rr,nr){this.targetId=_e,this.fromCache=tr,this.ds=rr,this.As=nr}static Rs(_e,tr){let rr=__PRIVATE_documentKeySet(),nr=__PRIVATE_documentKeySet();for(const sr of tr.docChanges)switch(sr.type){case 0:rr=rr.add(sr.doc.key);break;case 1:nr=nr.add(sr.doc.key)}return new __PRIVATE_LocalViewChanges(_e,tr.fromCache,rr,nr)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(_e){this._documentReadCount+=_e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4}()}initialize(_e,tr){this.ys=_e,this.indexManager=tr,this.Vs=!0}getDocumentsMatchingQuery(_e,tr,rr,nr){const sr={result:null};return this.ws(_e,tr).next(ir=>{sr.result=ir}).next(()=>{if(!sr.result)return this.bs(_e,tr,nr,rr).next(ir=>{sr.result=ir})}).next(()=>{if(sr.result)return;const ir=new QueryContext;return this.Ss(_e,tr,ir).next(or=>{if(sr.result=or,this.fs)return this.Ds(_e,tr,ir,or.size)})}).next(()=>sr.result)}Ds(_e,tr,rr,nr){return rr.documentReadCount<this.gs?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(tr),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(tr),"scans",rr.documentReadCount,"local documents and returns",nr,"documents as results."),rr.documentReadCount>this.ps*nr?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(tr),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(_e,__PRIVATE_queryToTarget(tr))):PersistencePromise.resolve())}ws(_e,tr){if(__PRIVATE_queryMatchesAllDocuments(tr))return PersistencePromise.resolve(null);let rr=__PRIVATE_queryToTarget(tr);return this.indexManager.getIndexType(_e,rr).next(nr=>nr===0?null:(tr.limit!==null&&nr===1&&(tr=__PRIVATE_queryWithLimit(tr,null,"F"),rr=__PRIVATE_queryToTarget(tr)),this.indexManager.getDocumentsMatchingTarget(_e,rr).next(sr=>{const ir=__PRIVATE_documentKeySet(...sr);return this.ys.getDocuments(_e,ir).next(or=>this.indexManager.getMinOffset(_e,rr).next(ar=>{const lr=this.vs(tr,or);return this.Cs(tr,lr,ir,ar.readTime)?this.ws(_e,__PRIVATE_queryWithLimit(tr,null,"F")):this.Fs(_e,lr,tr,ar)}))})))}bs(_e,tr,rr,nr){return __PRIVATE_queryMatchesAllDocuments(tr)||nr.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.ys.getDocuments(_e,rr).next(sr=>{const ir=this.vs(tr,sr);return this.Cs(tr,ir,rr,nr)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",nr.toString(),__PRIVATE_stringifyQuery(tr)),this.Fs(_e,ir,tr,__PRIVATE_newIndexOffsetSuccessorFromReadTime(nr,Q$1)).next(or=>or))})}vs(_e,tr){let rr=new SortedSet(__PRIVATE_newQueryComparator(_e));return tr.forEach((nr,sr)=>{__PRIVATE_queryMatches(_e,sr)&&(rr=rr.add(sr))}),rr}Cs(_e,tr,rr,nr){if(_e.limit===null)return!1;if(rr.size!==tr.size)return!0;const sr=_e.limitType==="F"?tr.last():tr.first();return!!sr&&(sr.hasPendingWrites||sr.version.compareTo(nr)>0)}Ss(_e,tr,rr){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(tr)),this.ys.getDocumentsMatchingQuery(_e,tr,IndexOffset.min(),rr)}Fs(_e,tr,rr,nr){return this.ys.getDocumentsMatchingQuery(_e,rr,nr).next(sr=>(tr.forEach(ir=>{sr=sr.insert(ir.key,ir)}),sr))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt$1="LocalStore",$t$1=3e8;class __PRIVATE_LocalStoreImpl{constructor(_e,tr,rr,nr){this.persistence=_e,this.Ms=tr,this.serializer=nr,this.xs=new SortedMap(__PRIVATE_primitiveComparator),this.Os=new ObjectMap(sr=>__PRIVATE_canonifyTarget(sr),__PRIVATE_targetEquals),this.Ns=new Map,this.Bs=_e.getRemoteDocumentCache(),this.Ti=_e.getTargetCache(),this.Ei=_e.getBundleCache(),this.Ls(rr)}Ls(_e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(_e),this.indexManager=this.persistence.getIndexManager(_e),this.mutationQueue=this.persistence.getMutationQueue(_e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(_e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",tr=>_e.collect(tr,this.xs))}}function __PRIVATE_newLocalStore(er,_e,tr,rr){return new __PRIVATE_LocalStoreImpl(er,_e,tr,rr)}async function __PRIVATE_localStoreHandleUserChange(er,_e){const tr=__PRIVATE_debugCast(er);return await tr.persistence.runTransaction("Handle user change","readonly",rr=>{let nr;return tr.mutationQueue.getAllMutationBatches(rr).next(sr=>(nr=sr,tr.Ls(_e),tr.mutationQueue.getAllMutationBatches(rr))).next(sr=>{const ir=[],or=[];let ar=__PRIVATE_documentKeySet();for(const lr of nr){ir.push(lr.batchId);for(const cr of lr.mutations)ar=ar.add(cr.key)}for(const lr of sr){or.push(lr.batchId);for(const cr of lr.mutations)ar=ar.add(cr.key)}return tr.localDocuments.getDocuments(rr,ar).next(lr=>({ks:lr,removedBatchIds:ir,addedBatchIds:or}))})})}function __PRIVATE_localStoreAcknowledgeBatch(er,_e){const tr=__PRIVATE_debugCast(er);return tr.persistence.runTransaction("Acknowledge batch","readwrite-primary",rr=>{const nr=_e.batch.keys(),sr=tr.Bs.newChangeBuffer({trackRemovals:!0});return function(or,ar,lr,cr){const Ar=lr.batch,ur=Ar.keys();let dr=PersistencePromise.resolve();return ur.forEach(mr=>{dr=dr.next(()=>cr.getEntry(ar,mr)).next(pr=>{const yr=lr.docVersions.get(mr);__PRIVATE_hardAssert(yr!==null,48541),pr.version.compareTo(yr)<0&&(Ar.applyToRemoteDocument(pr,lr),pr.isValidDocument()&&(pr.setReadTime(lr.commitVersion),cr.addEntry(pr)))})}),dr.next(()=>or.mutationQueue.removeMutationBatch(ar,Ar))}(tr,rr,_e,sr).next(()=>sr.apply(rr)).next(()=>tr.mutationQueue.performConsistencyCheck(rr)).next(()=>tr.documentOverlayCache.removeOverlaysForBatchId(rr,nr,_e.batch.batchId)).next(()=>tr.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(rr,function(or){let ar=__PRIVATE_documentKeySet();for(let lr=0;lr<or.mutationResults.length;++lr)or.mutationResults[lr].transformResults.length>0&&(ar=ar.add(or.batch.mutations[lr].key));return ar}(_e))).next(()=>tr.localDocuments.getDocuments(rr,nr))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(er){const _e=__PRIVATE_debugCast(er);return _e.persistence.runTransaction("Get last remote snapshot version","readonly",tr=>_e.Ti.getLastRemoteSnapshotVersion(tr))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(er,_e){const tr=__PRIVATE_debugCast(er),rr=_e.snapshotVersion;let nr=tr.xs;return tr.persistence.runTransaction("Apply remote event","readwrite-primary",sr=>{const ir=tr.Bs.newChangeBuffer({trackRemovals:!0});nr=tr.xs;const or=[];_e.targetChanges.forEach((cr,Ar)=>{const ur=nr.get(Ar);if(!ur)return;or.push(tr.Ti.removeMatchingKeys(sr,cr.removedDocuments,Ar).next(()=>tr.Ti.addMatchingKeys(sr,cr.addedDocuments,Ar)));let dr=ur.withSequenceNumber(sr.currentSequenceNumber);_e.targetMismatches.get(Ar)!==null?dr=dr.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):cr.resumeToken.approximateByteSize()>0&&(dr=dr.withResumeToken(cr.resumeToken,rr)),nr=nr.insert(Ar,dr),function(pr,yr,hr){return pr.resumeToken.approximateByteSize()===0||yr.snapshotVersion.toMicroseconds()-pr.snapshotVersion.toMicroseconds()>=$t$1?!0:hr.addedDocuments.size+hr.modifiedDocuments.size+hr.removedDocuments.size>0}(ur,dr,cr)&&or.push(tr.Ti.updateTargetData(sr,dr))});let ar=__PRIVATE_mutableDocumentMap(),lr=__PRIVATE_documentKeySet();if(_e.documentUpdates.forEach(cr=>{_e.resolvedLimboDocuments.has(cr)&&or.push(tr.persistence.referenceDelegate.updateLimboDocument(sr,cr))}),or.push(__PRIVATE_populateDocumentChangeBuffer(sr,ir,_e.documentUpdates).next(cr=>{ar=cr.qs,lr=cr.Qs})),!rr.isEqual(SnapshotVersion.min())){const cr=tr.Ti.getLastRemoteSnapshotVersion(sr).next(Ar=>tr.Ti.setTargetsMetadata(sr,sr.currentSequenceNumber,rr));or.push(cr)}return PersistencePromise.waitFor(or).next(()=>ir.apply(sr)).next(()=>tr.localDocuments.getLocalViewOfDocuments(sr,ar,lr)).next(()=>ar)}).then(sr=>(tr.xs=nr,sr))}function __PRIVATE_populateDocumentChangeBuffer(er,_e,tr){let rr=__PRIVATE_documentKeySet(),nr=__PRIVATE_documentKeySet();return tr.forEach(sr=>rr=rr.add(sr)),_e.getEntries(er,rr).next(sr=>{let ir=__PRIVATE_mutableDocumentMap();return tr.forEach((or,ar)=>{const lr=sr.get(or);ar.isFoundDocument()!==lr.isFoundDocument()&&(nr=nr.add(or)),ar.isNoDocument()&&ar.version.isEqual(SnapshotVersion.min())?(_e.removeEntry(or,ar.readTime),ir=ir.insert(or,ar)):!lr.isValidDocument()||ar.version.compareTo(lr.version)>0||ar.version.compareTo(lr.version)===0&&lr.hasPendingWrites?(_e.addEntry(ar),ir=ir.insert(or,ar)):__PRIVATE_logDebug(Qt$1,"Ignoring outdated watch update for ",or,". Current version:",lr.version," Watch version:",ar.version)}),{qs:ir,Qs:nr}})}function __PRIVATE_localStoreGetNextMutationBatch(er,_e){const tr=__PRIVATE_debugCast(er);return tr.persistence.runTransaction("Get next mutation batch","readonly",rr=>(_e===void 0&&(_e=G$1),tr.mutationQueue.getNextMutationBatchAfterBatchId(rr,_e)))}function __PRIVATE_localStoreAllocateTarget(er,_e){const tr=__PRIVATE_debugCast(er);return tr.persistence.runTransaction("Allocate target","readwrite",rr=>{let nr;return tr.Ti.getTargetData(rr,_e).next(sr=>sr?(nr=sr,PersistencePromise.resolve(nr)):tr.Ti.allocateTargetId(rr).next(ir=>(nr=new TargetData(_e,ir,"TargetPurposeListen",rr.currentSequenceNumber),tr.Ti.addTargetData(rr,nr).next(()=>nr))))}).then(rr=>{const nr=tr.xs.get(rr.targetId);return(nr===null||rr.snapshotVersion.compareTo(nr.snapshotVersion)>0)&&(tr.xs=tr.xs.insert(rr.targetId,rr),tr.Os.set(_e,rr.targetId)),rr})}async function __PRIVATE_localStoreReleaseTarget(er,_e,tr){const rr=__PRIVATE_debugCast(er),nr=rr.xs.get(_e),sr=tr?"readwrite":"readwrite-primary";try{tr||await rr.persistence.runTransaction("Release target",sr,ir=>rr.persistence.referenceDelegate.removeTarget(ir,nr))}catch(ir){if(!__PRIVATE_isIndexedDbTransactionError(ir))throw ir;__PRIVATE_logDebug(Qt$1,`Failed to update sequence numbers for target ${_e}: ${ir}`)}rr.xs=rr.xs.remove(_e),rr.Os.delete(nr.target)}function __PRIVATE_localStoreExecuteQuery(er,_e,tr){const rr=__PRIVATE_debugCast(er);let nr=SnapshotVersion.min(),sr=__PRIVATE_documentKeySet();return rr.persistence.runTransaction("Execute query","readwrite",ir=>function(ar,lr,cr){const Ar=__PRIVATE_debugCast(ar),ur=Ar.Os.get(cr);return ur!==void 0?PersistencePromise.resolve(Ar.xs.get(ur)):Ar.Ti.getTargetData(lr,cr)}(rr,ir,__PRIVATE_queryToTarget(_e)).next(or=>{if(or)return nr=or.lastLimboFreeSnapshotVersion,rr.Ti.getMatchingKeysForTargetId(ir,or.targetId).next(ar=>{sr=ar})}).next(()=>rr.Ms.getDocumentsMatchingQuery(ir,_e,tr?nr:SnapshotVersion.min(),tr?sr:__PRIVATE_documentKeySet())).next(or=>(__PRIVATE_setMaxReadTime(rr,__PRIVATE_queryCollectionGroup(_e),or),{documents:or,$s:sr})))}function __PRIVATE_setMaxReadTime(er,_e,tr){let rr=er.Ns.get(_e)||SnapshotVersion.min();tr.forEach((nr,sr)=>{sr.readTime.compareTo(rr)>0&&(rr=sr.readTime)}),er.Ns.set(_e,rr)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}js(_e){this.activeTargetIds=this.activeTargetIds.add(_e)}Hs(_e){this.activeTargetIds=this.activeTargetIds.delete(_e)}zs(){const _e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(_e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.xo=new __PRIVATE_LocalClientState,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(_e){}updateMutationState(_e,tr,rr){}addLocalQueryTarget(_e,tr=!0){return tr&&this.xo.js(_e),this.Oo[_e]||"not-current"}updateQueryState(_e,tr,rr){this.Oo[_e]=tr}removeLocalQueryTarget(_e){this.xo.Hs(_e)}isLocalQueryTarget(_e){return this.xo.activeTargetIds.has(_e)}clearQueryState(_e){delete this.Oo[_e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(_e){return this.xo.activeTargetIds.has(_e)}start(){return this.xo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(_e,tr,rr){}setOnlineState(_e){}shutdown(){}writeSequenceNumber(_e){}notifyBundleLoaded(_e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{No(_e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt$1="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(_e){this.Qo.push(_e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){__PRIVATE_logDebug(zt$1,"Network connectivity changed: AVAILABLE");for(const _e of this.Qo)_e(0)}qo(){__PRIVATE_logDebug(zt$1,"Network connectivity changed: UNAVAILABLE");for(const _e of this.Qo)_e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jt$1=null;function __PRIVATE_generateUniqueDebugId(){return jt$1===null?jt$1=function(){return 268435456+Math.round(2147483648*Math.random())}():jt$1++,"0x"+jt$1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht$1="RestConnection",Jt$1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get Uo(){return!1}constructor(_e){this.databaseInfo=_e,this.databaseId=_e.databaseId;const tr=_e.ssl?"https":"http",rr=encodeURIComponent(this.databaseId.projectId),nr=encodeURIComponent(this.databaseId.database);this.Ko=tr+"://"+_e.host,this.Wo=`projects/${rr}/databases/${nr}`,this.Go=this.databaseId.database===ut$1?`project_id=${rr}`:`project_id=${rr}&database_id=${nr}`}zo(_e,tr,rr,nr,sr){const ir=__PRIVATE_generateUniqueDebugId(),or=this.jo(_e,tr.toUriEncodedString());__PRIVATE_logDebug(Ht$1,`Sending RPC '${_e}' ${ir}:`,or,rr);const ar={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(ar,nr,sr);const{host:lr}=new URL(or),cr=isCloudWorkstation(lr);return this.Jo(_e,or,ar,rr,cr).then(Ar=>(__PRIVATE_logDebug(Ht$1,`Received RPC '${_e}' ${ir}: `,Ar),Ar),Ar=>{throw __PRIVATE_logWarn(Ht$1,`RPC '${_e}' ${ir} failed with error: `,Ar,"url: ",or,"request:",rr),Ar})}Yo(_e,tr,rr,nr,sr,ir){return this.zo(_e,tr,rr,nr,sr)}Ho(_e,tr,rr){_e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+x$2}(),_e["Content-Type"]="text/plain",this.databaseInfo.appId&&(_e["X-Firebase-GMPID"]=this.databaseInfo.appId),tr&&tr.headers.forEach((nr,sr)=>_e[sr]=nr),rr&&rr.headers.forEach((nr,sr)=>_e[sr]=nr)}jo(_e,tr){const rr=Jt$1[_e];return`${this.Ko}/v1/${tr}:${rr}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(_e){this.Zo=_e.Zo,this.Xo=_e.Xo}e_(_e){this.t_=_e}n_(_e){this.r_=_e}i_(_e){this.s_=_e}onMessage(_e){this.o_=_e}close(){this.Xo()}send(_e){this.Zo(_e)}__(){this.t_()}a_(){this.r_()}u_(_e){this.s_(_e)}c_(_e){this.o_(_e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt$1="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(_e){super(_e),this.l_=[],this.forceLongPolling=_e.forceLongPolling,this.autoDetectLongPolling=_e.autoDetectLongPolling,this.useFetchStreams=_e.useFetchStreams,this.longPollingOptions=_e.longPollingOptions}Jo(_e,tr,rr,nr,sr){const ir=__PRIVATE_generateUniqueDebugId();return new Promise((or,ar)=>{const lr=new XhrIo;lr.setWithCredentials(!0),lr.listenOnce(EventType.COMPLETE,()=>{try{switch(lr.getLastErrorCode()){case ErrorCode$1.NO_ERROR:const Ar=lr.getResponseJson();__PRIVATE_logDebug(Yt$1,`XHR for RPC '${_e}' ${ir} received:`,JSON.stringify(Ar)),or(Ar);break;case ErrorCode$1.TIMEOUT:__PRIVATE_logDebug(Yt$1,`RPC '${_e}' ${ir} timed out`),ar(new FirestoreError(N$1.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode$1.HTTP_ERROR:const ur=lr.getStatus();if(__PRIVATE_logDebug(Yt$1,`RPC '${_e}' ${ir} failed with status:`,ur,"response text:",lr.getResponseText()),ur>0){let dr=lr.getResponseJson();Array.isArray(dr)&&(dr=dr[0]);const mr=dr==null?void 0:dr.error;if(mr&&mr.status&&mr.message){const pr=function(hr){const gr=hr.toLowerCase().replace(/_/g,"-");return Object.values(N$1).indexOf(gr)>=0?gr:N$1.UNKNOWN}(mr.status);ar(new FirestoreError(pr,mr.message))}else ar(new FirestoreError(N$1.UNKNOWN,"Server responded with status "+lr.getStatus()))}else ar(new FirestoreError(N$1.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{h_:_e,streamId:ir,P_:lr.getLastErrorCode(),T_:lr.getLastError()})}}finally{__PRIVATE_logDebug(Yt$1,`RPC '${_e}' ${ir} completed.`)}});const cr=JSON.stringify(nr);__PRIVATE_logDebug(Yt$1,`RPC '${_e}' ${ir} sending request:`,nr),lr.send(tr,"POST",cr,rr,15)})}I_(_e,tr,rr){const nr=__PRIVATE_generateUniqueDebugId(),sr=[this.Ko,"/","google.firestore.v1.Firestore","/",_e,"/channel"],ir=createWebChannelTransport(),or=getStatEventTarget(),ar={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},lr=this.longPollingOptions.timeoutSeconds;lr!==void 0&&(ar.longPollingTimeout=Math.round(1e3*lr)),this.useFetchStreams&&(ar.useFetchStreams=!0),this.Ho(ar.initMessageHeaders,tr,rr),ar.encodeInitMessageHeaders=!0;const cr=sr.join("");__PRIVATE_logDebug(Yt$1,`Creating RPC '${_e}' stream ${nr}: ${cr}`,ar);const Ar=ir.createWebChannel(cr,ar);this.E_(Ar);let ur=!1,dr=!1;const mr=new __PRIVATE_StreamBridge({Zo:yr=>{dr?__PRIVATE_logDebug(Yt$1,`Not sending because RPC '${_e}' stream ${nr} is closed:`,yr):(ur||(__PRIVATE_logDebug(Yt$1,`Opening RPC '${_e}' stream ${nr} transport.`),Ar.open(),ur=!0),__PRIVATE_logDebug(Yt$1,`RPC '${_e}' stream ${nr} sending:`,yr),Ar.send(yr))},Xo:()=>Ar.close()}),pr=(yr,hr,gr)=>{yr.listen(hr,Cr=>{try{gr(Cr)}catch(Tr){setTimeout(()=>{throw Tr},0)}})};return pr(Ar,WebChannel.EventType.OPEN,()=>{dr||(__PRIVATE_logDebug(Yt$1,`RPC '${_e}' stream ${nr} transport opened.`),mr.__())}),pr(Ar,WebChannel.EventType.CLOSE,()=>{dr||(dr=!0,__PRIVATE_logDebug(Yt$1,`RPC '${_e}' stream ${nr} transport closed`),mr.u_(),this.d_(Ar))}),pr(Ar,WebChannel.EventType.ERROR,yr=>{dr||(dr=!0,__PRIVATE_logWarn(Yt$1,`RPC '${_e}' stream ${nr} transport errored. Name:`,yr.name,"Message:",yr.message),mr.u_(new FirestoreError(N$1.UNAVAILABLE,"The operation could not be completed")))}),pr(Ar,WebChannel.EventType.MESSAGE,yr=>{var hr;if(!dr){const gr=yr.data[0];__PRIVATE_hardAssert(!!gr,16349);const Cr=gr,Tr=(Cr==null?void 0:Cr.error)||((hr=Cr[0])===null||hr===void 0?void 0:hr.error);if(Tr){__PRIVATE_logDebug(Yt$1,`RPC '${_e}' stream ${nr} received error:`,Tr);const Sr=Tr.status;let Nr=function(br){const Pr=ft$1[br];if(Pr!==void 0)return __PRIVATE_mapCodeFromRpcCode(Pr)}(Sr),_r=Tr.message;Nr===void 0&&(Nr=N$1.INTERNAL,_r="Unknown error status: "+Sr+" with message "+Tr.message),dr=!0,mr.u_(new FirestoreError(Nr,_r)),Ar.close()}else __PRIVATE_logDebug(Yt$1,`RPC '${_e}' stream ${nr} received:`,gr),mr.c_(gr)}}),pr(or,Event$1.STAT_EVENT,yr=>{yr.stat===Stat.PROXY?__PRIVATE_logDebug(Yt$1,`RPC '${_e}' stream ${nr} detected buffering proxy`):yr.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Yt$1,`RPC '${_e}' stream ${nr} detected no buffering proxy`)}),setTimeout(()=>{mr.a_()},0),mr}terminate(){this.l_.forEach(_e=>_e.close()),this.l_=[]}E_(_e){this.l_.push(_e)}d_(_e){this.l_=this.l_.filter(tr=>tr===_e)}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(er){return new JsonProtoSerializer(er,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(_e,tr,rr=1e3,nr=1.5,sr=6e4){this.xi=_e,this.timerId=tr,this.A_=rr,this.R_=nr,this.V_=sr,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(_e){this.cancel();const tr=Math.floor(this.m_+this.w_()),rr=Math.max(0,Date.now()-this.g_),nr=Math.max(0,tr-rr);nr>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${nr} ms (base delay: ${this.m_} ms, delay with jitter: ${tr} ms, last attempt: ${rr} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,nr,()=>(this.g_=Date.now(),_e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt$1="PersistentStream";class __PRIVATE_PersistentStream{constructor(_e,tr,rr,nr,sr,ir,or,ar){this.xi=_e,this.S_=rr,this.D_=nr,this.connection=sr,this.authCredentialsProvider=ir,this.appCheckCredentialsProvider=or,this.listener=ar,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new __PRIVATE_ExponentialBackoff(_e,tr)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(_e){this.U_(),this.stream.send(_e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(_e,tr){this.U_(),this.K_(),this.x_.cancel(),this.v_++,_e!==4?this.x_.reset():tr&&tr.code===N$1.RESOURCE_EXHAUSTED?(__PRIVATE_logError(tr.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):tr&&tr.code===N$1.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=_e,await this.listener.i_(tr)}W_(){}auth(){this.state=1;const _e=this.G_(this.v_),tr=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([rr,nr])=>{this.v_===tr&&this.z_(rr,nr)},rr=>{_e(()=>{const nr=new FirestoreError(N$1.UNKNOWN,"Fetching auth token failed: "+rr.message);return this.j_(nr)})})}z_(_e,tr){const rr=this.G_(this.v_);this.stream=this.H_(_e,tr),this.stream.e_(()=>{rr(()=>this.listener.e_())}),this.stream.n_(()=>{rr(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(nr=>{rr(()=>this.j_(nr))}),this.stream.onMessage(nr=>{rr(()=>++this.M_==1?this.J_(nr):this.onNext(nr))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(_e){return __PRIVATE_logDebug(Zt$1,`close with error: ${_e}`),this.stream=null,this.close(4,_e)}G_(_e){return tr=>{this.xi.enqueueAndForget(()=>this.v_===_e?tr():(__PRIVATE_logDebug(Zt$1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(_e,tr,rr,nr,sr,ir){super(_e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",tr,rr,nr,ir),this.serializer=sr}H_(_e,tr){return this.connection.I_("Listen",_e,tr)}J_(_e){return this.onNext(_e)}onNext(_e){this.x_.reset();const tr=__PRIVATE_fromWatchChange(this.serializer,_e),rr=function(sr){if(!("targetChange"in sr))return SnapshotVersion.min();const ir=sr.targetChange;return ir.targetIds&&ir.targetIds.length?SnapshotVersion.min():ir.readTime?__PRIVATE_fromVersion(ir.readTime):SnapshotVersion.min()}(_e);return this.listener.Y_(tr,rr)}Z_(_e){const tr={};tr.database=__PRIVATE_getEncodedDatabaseId(this.serializer),tr.addTarget=function(sr,ir){let or;const ar=ir.target;if(or=__PRIVATE_targetIsDocumentTarget(ar)?{documents:__PRIVATE_toDocumentsTarget(sr,ar)}:{query:__PRIVATE_toQueryTarget(sr,ar).gt},or.targetId=ir.targetId,ir.resumeToken.approximateByteSize()>0){or.resumeToken=__PRIVATE_toBytes(sr,ir.resumeToken);const lr=__PRIVATE_toInt32Proto(sr,ir.expectedCount);lr!==null&&(or.expectedCount=lr)}else if(ir.snapshotVersion.compareTo(SnapshotVersion.min())>0){or.readTime=toTimestamp(sr,ir.snapshotVersion.toTimestamp());const lr=__PRIVATE_toInt32Proto(sr,ir.expectedCount);lr!==null&&(or.expectedCount=lr)}return or}(this.serializer,_e);const rr=__PRIVATE_toListenRequestLabels(this.serializer,_e);rr&&(tr.labels=rr),this.Q_(tr)}X_(_e){const tr={};tr.database=__PRIVATE_getEncodedDatabaseId(this.serializer),tr.removeTarget=_e,this.Q_(tr)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(_e,tr,rr,nr,sr,ir){super(_e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",tr,rr,nr,ir),this.serializer=sr}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(_e,tr){return this.connection.I_("Write",_e,tr)}J_(_e){return __PRIVATE_hardAssert(!!_e.streamToken,31322),this.lastStreamToken=_e.streamToken,__PRIVATE_hardAssert(!_e.writeResults||_e.writeResults.length===0,55816),this.listener.na()}onNext(_e){__PRIVATE_hardAssert(!!_e.streamToken,12678),this.lastStreamToken=_e.streamToken,this.x_.reset();const tr=__PRIVATE_fromWriteResults(_e.writeResults,_e.commitTime),rr=__PRIVATE_fromVersion(_e.commitTime);return this.listener.ra(rr,tr)}ia(){const _e={};_e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.Q_(_e)}ta(_e){const tr={streamToken:this.lastStreamToken,writes:_e.map(rr=>toMutation(this.serializer,rr))};this.Q_(tr)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(_e,tr,rr,nr){super(),this.authCredentials=_e,this.appCheckCredentials=tr,this.connection=rr,this.serializer=nr,this.sa=!1}oa(){if(this.sa)throw new FirestoreError(N$1.FAILED_PRECONDITION,"The client has already been terminated.")}zo(_e,tr,rr,nr){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([sr,ir])=>this.connection.zo(_e,__PRIVATE_toResourcePath(tr,rr),nr,sr,ir)).catch(sr=>{throw sr.name==="FirebaseError"?(sr.code===N$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),sr):new FirestoreError(N$1.UNKNOWN,sr.toString())})}Yo(_e,tr,rr,nr,sr){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([ir,or])=>this.connection.Yo(_e,__PRIVATE_toResourcePath(tr,rr),nr,ir,or,sr)).catch(ir=>{throw ir.name==="FirebaseError"?(ir.code===N$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),ir):new FirestoreError(N$1.UNKNOWN,ir.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(_e,tr){this.asyncQueue=_e,this.onlineStateHandler=tr,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(_e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${_e.toString()}`),this.la("Offline")))}set(_e){this.Ta(),this._a=0,_e==="Online"&&(this.ua=!1),this.la(_e)}la(_e){_e!==this.state&&(this.state=_e,this.onlineStateHandler(_e))}ha(_e){const tr=`Could not reach Cloud Firestore backend. ${_e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(__PRIVATE_logError(tr),this.ua=!1):__PRIVATE_logDebug("OnlineStateTracker",tr)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt$1="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(_e,tr,rr,nr,sr){this.localStore=_e,this.datastore=tr,this.asyncQueue=rr,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=sr,this.Ra.No(ir=>{rr.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(Xt$1,"Restarting streams for network reachability change."),await async function(ar){const lr=__PRIVATE_debugCast(ar);lr.da.add(4),await __PRIVATE_disableNetworkInternal(lr),lr.Va.set("Unknown"),lr.da.delete(4),await __PRIVATE_enableNetworkInternal(lr)}(this))})}),this.Va=new __PRIVATE_OnlineStateTracker(rr,nr)}}async function __PRIVATE_enableNetworkInternal(er){if(__PRIVATE_canUseNetwork(er))for(const _e of er.Aa)await _e(!0)}async function __PRIVATE_disableNetworkInternal(er){for(const _e of er.Aa)await _e(!1)}function __PRIVATE_remoteStoreListen(er,_e){const tr=__PRIVATE_debugCast(er);tr.Ea.has(_e.targetId)||(tr.Ea.set(_e.targetId,_e),__PRIVATE_shouldStartWatchStream(tr)?__PRIVATE_startWatchStream(tr):__PRIVATE_ensureWatchStream(tr).N_()&&__PRIVATE_sendWatchRequest(tr,_e))}function __PRIVATE_remoteStoreUnlisten(er,_e){const tr=__PRIVATE_debugCast(er),rr=__PRIVATE_ensureWatchStream(tr);tr.Ea.delete(_e),rr.N_()&&__PRIVATE_sendUnwatchRequest(tr,_e),tr.Ea.size===0&&(rr.N_()?rr.k_():__PRIVATE_canUseNetwork(tr)&&tr.Va.set("Unknown"))}function __PRIVATE_sendWatchRequest(er,_e){if(er.ma.Ke(_e.targetId),_e.resumeToken.approximateByteSize()>0||_e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const tr=er.remoteSyncer.getRemoteKeysForTarget(_e.targetId).size;_e=_e.withExpectedCount(tr)}__PRIVATE_ensureWatchStream(er).Z_(_e)}function __PRIVATE_sendUnwatchRequest(er,_e){er.ma.Ke(_e),__PRIVATE_ensureWatchStream(er).X_(_e)}function __PRIVATE_startWatchStream(er){er.ma=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:_e=>er.remoteSyncer.getRemoteKeysForTarget(_e),Rt:_e=>er.Ea.get(_e)||null,Pt:()=>er.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(er).start(),er.Va.ca()}function __PRIVATE_shouldStartWatchStream(er){return __PRIVATE_canUseNetwork(er)&&!__PRIVATE_ensureWatchStream(er).O_()&&er.Ea.size>0}function __PRIVATE_canUseNetwork(er){return __PRIVATE_debugCast(er).da.size===0}function __PRIVATE_cleanUpWatchStreamState(er){er.ma=void 0}async function __PRIVATE_onWatchStreamConnected(er){er.Va.set("Online")}async function __PRIVATE_onWatchStreamOpen(er){er.Ea.forEach((_e,tr)=>{__PRIVATE_sendWatchRequest(er,_e)})}async function __PRIVATE_onWatchStreamClose(er,_e){__PRIVATE_cleanUpWatchStreamState(er),__PRIVATE_shouldStartWatchStream(er)?(er.Va.Pa(_e),__PRIVATE_startWatchStream(er)):er.Va.set("Unknown")}async function __PRIVATE_onWatchStreamChange(er,_e,tr){if(er.Va.set("Online"),_e instanceof __PRIVATE_WatchTargetChange&&_e.state===2&&_e.cause)try{await async function(nr,sr){const ir=sr.cause;for(const or of sr.targetIds)nr.Ea.has(or)&&(await nr.remoteSyncer.rejectListen(or,ir),nr.Ea.delete(or),nr.ma.removeTarget(or))}(er,_e)}catch(rr){__PRIVATE_logDebug(Xt$1,"Failed to remove targets %s: %s ",_e.targetIds.join(","),rr),await __PRIVATE_disableNetworkUntilRecovery(er,rr)}else if(_e instanceof __PRIVATE_DocumentWatchChange?er.ma.Xe(_e):_e instanceof __PRIVATE_ExistenceFilterChange?er.ma.ot(_e):er.ma.nt(_e),!tr.isEqual(SnapshotVersion.min()))try{const rr=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(er.localStore);tr.compareTo(rr)>=0&&await function(sr,ir){const or=sr.ma.It(ir);return or.targetChanges.forEach((ar,lr)=>{if(ar.resumeToken.approximateByteSize()>0){const cr=sr.Ea.get(lr);cr&&sr.Ea.set(lr,cr.withResumeToken(ar.resumeToken,ir))}}),or.targetMismatches.forEach((ar,lr)=>{const cr=sr.Ea.get(ar);if(!cr)return;sr.Ea.set(ar,cr.withResumeToken(ByteString.EMPTY_BYTE_STRING,cr.snapshotVersion)),__PRIVATE_sendUnwatchRequest(sr,ar);const Ar=new TargetData(cr.target,ar,lr,cr.sequenceNumber);__PRIVATE_sendWatchRequest(sr,Ar)}),sr.remoteSyncer.applyRemoteEvent(or)}(er,tr)}catch(rr){__PRIVATE_logDebug(Xt$1,"Failed to raise snapshot:",rr),await __PRIVATE_disableNetworkUntilRecovery(er,rr)}}async function __PRIVATE_disableNetworkUntilRecovery(er,_e,tr){if(!__PRIVATE_isIndexedDbTransactionError(_e))throw _e;er.da.add(1),await __PRIVATE_disableNetworkInternal(er),er.Va.set("Offline"),tr||(tr=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(er.localStore)),er.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug(Xt$1,"Retrying IndexedDB access"),await tr(),er.da.delete(1),await __PRIVATE_enableNetworkInternal(er)})}function __PRIVATE_executeWithRecovery(er,_e){return _e().catch(tr=>__PRIVATE_disableNetworkUntilRecovery(er,tr,_e))}async function __PRIVATE_fillWritePipeline(er){const _e=__PRIVATE_debugCast(er),tr=__PRIVATE_ensureWriteStream(_e);let rr=_e.Ia.length>0?_e.Ia[_e.Ia.length-1].batchId:G$1;for(;__PRIVATE_canAddToWritePipeline(_e);)try{const nr=await __PRIVATE_localStoreGetNextMutationBatch(_e.localStore,rr);if(nr===null){_e.Ia.length===0&&tr.k_();break}rr=nr.batchId,__PRIVATE_addToWritePipeline(_e,nr)}catch(nr){await __PRIVATE_disableNetworkUntilRecovery(_e,nr)}__PRIVATE_shouldStartWriteStream(_e)&&__PRIVATE_startWriteStream(_e)}function __PRIVATE_canAddToWritePipeline(er){return __PRIVATE_canUseNetwork(er)&&er.Ia.length<10}function __PRIVATE_addToWritePipeline(er,_e){er.Ia.push(_e);const tr=__PRIVATE_ensureWriteStream(er);tr.N_()&&tr.ea&&tr.ta(_e.mutations)}function __PRIVATE_shouldStartWriteStream(er){return __PRIVATE_canUseNetwork(er)&&!__PRIVATE_ensureWriteStream(er).O_()&&er.Ia.length>0}function __PRIVATE_startWriteStream(er){__PRIVATE_ensureWriteStream(er).start()}async function __PRIVATE_onWriteStreamOpen(er){__PRIVATE_ensureWriteStream(er).ia()}async function __PRIVATE_onWriteHandshakeComplete(er){const _e=__PRIVATE_ensureWriteStream(er);for(const tr of er.Ia)_e.ta(tr.mutations)}async function __PRIVATE_onMutationResult(er,_e,tr){const rr=er.Ia.shift(),nr=MutationBatchResult.from(rr,_e,tr);await __PRIVATE_executeWithRecovery(er,()=>er.remoteSyncer.applySuccessfulWrite(nr)),await __PRIVATE_fillWritePipeline(er)}async function __PRIVATE_onWriteStreamClose(er,_e){_e&&__PRIVATE_ensureWriteStream(er).ea&&await async function(rr,nr){if(function(ir){return __PRIVATE_isPermanentError(ir)&&ir!==N$1.ABORTED}(nr.code)){const sr=rr.Ia.shift();__PRIVATE_ensureWriteStream(rr).L_(),await __PRIVATE_executeWithRecovery(rr,()=>rr.remoteSyncer.rejectFailedWrite(sr.batchId,nr)),await __PRIVATE_fillWritePipeline(rr)}}(er,_e),__PRIVATE_shouldStartWriteStream(er)&&__PRIVATE_startWriteStream(er)}async function __PRIVATE_remoteStoreHandleCredentialChange(er,_e){const tr=__PRIVATE_debugCast(er);tr.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(Xt$1,"RemoteStore received new credentials");const rr=__PRIVATE_canUseNetwork(tr);tr.da.add(3),await __PRIVATE_disableNetworkInternal(tr),rr&&tr.Va.set("Unknown"),await tr.remoteSyncer.handleCredentialChange(_e),tr.da.delete(3),await __PRIVATE_enableNetworkInternal(tr)}async function __PRIVATE_remoteStoreApplyPrimaryState(er,_e){const tr=__PRIVATE_debugCast(er);_e?(tr.da.delete(2),await __PRIVATE_enableNetworkInternal(tr)):_e||(tr.da.add(2),await __PRIVATE_disableNetworkInternal(tr),tr.Va.set("Unknown"))}function __PRIVATE_ensureWatchStream(er){return er.fa||(er.fa=function(tr,rr,nr){const sr=__PRIVATE_debugCast(tr);return sr.oa(),new __PRIVATE_PersistentListenStream(rr,sr.connection,sr.authCredentials,sr.appCheckCredentials,sr.serializer,nr)}(er.datastore,er.asyncQueue,{e_:__PRIVATE_onWatchStreamConnected.bind(null,er),n_:__PRIVATE_onWatchStreamOpen.bind(null,er),i_:__PRIVATE_onWatchStreamClose.bind(null,er),Y_:__PRIVATE_onWatchStreamChange.bind(null,er)}),er.Aa.push(async _e=>{_e?(er.fa.L_(),__PRIVATE_shouldStartWatchStream(er)?__PRIVATE_startWatchStream(er):er.Va.set("Unknown")):(await er.fa.stop(),__PRIVATE_cleanUpWatchStreamState(er))})),er.fa}function __PRIVATE_ensureWriteStream(er){return er.ga||(er.ga=function(tr,rr,nr){const sr=__PRIVATE_debugCast(tr);return sr.oa(),new __PRIVATE_PersistentWriteStream(rr,sr.connection,sr.authCredentials,sr.appCheckCredentials,sr.serializer,nr)}(er.datastore,er.asyncQueue,{e_:()=>Promise.resolve(),n_:__PRIVATE_onWriteStreamOpen.bind(null,er),i_:__PRIVATE_onWriteStreamClose.bind(null,er),na:__PRIVATE_onWriteHandshakeComplete.bind(null,er),ra:__PRIVATE_onMutationResult.bind(null,er)}),er.Aa.push(async _e=>{_e?(er.ga.L_(),await __PRIVATE_fillWritePipeline(er)):(await er.ga.stop(),er.Ia.length>0&&(__PRIVATE_logDebug(Xt$1,`Stopping write stream with ${er.Ia.length} pending writes`),er.Ia=[]))})),er.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(_e,tr,rr,nr,sr){this.asyncQueue=_e,this.timerId=tr,this.targetTimeMs=rr,this.op=nr,this.removalCallback=sr,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(ir=>{})}get promise(){return this.deferred.promise}static createAndSchedule(_e,tr,rr,nr,sr){const ir=Date.now()+rr,or=new DelayedOperation(_e,tr,ir,nr,sr);return or.start(rr),or}start(_e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),_e)}skipDelay(){return this.handleDelayElapsed()}cancel(_e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N$1.CANCELLED,"Operation cancelled"+(_e?": "+_e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(_e=>this.deferred.resolve(_e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(er,_e){if(__PRIVATE_logError("AsyncQueue",`${_e}: ${er}`),__PRIVATE_isIndexedDbTransactionError(er))return new FirestoreError(N$1.UNAVAILABLE,`${_e}: ${er}`);throw er}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(_e){return new DocumentSet(_e.comparator)}constructor(_e){this.comparator=_e?(tr,rr)=>_e(tr,rr)||DocumentKey.comparator(tr.key,rr.key):(tr,rr)=>DocumentKey.comparator(tr.key,rr.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(_e){return this.keyedMap.get(_e)!=null}get(_e){return this.keyedMap.get(_e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(_e){const tr=this.keyedMap.get(_e);return tr?this.sortedSet.indexOf(tr):-1}get size(){return this.sortedSet.size}forEach(_e){this.sortedSet.inorderTraversal((tr,rr)=>(_e(tr),!1))}add(_e){const tr=this.delete(_e.key);return tr.copy(tr.keyedMap.insert(_e.key,_e),tr.sortedSet.insert(_e,null))}delete(_e){const tr=this.get(_e);return tr?this.copy(this.keyedMap.remove(_e),this.sortedSet.remove(tr)):this}isEqual(_e){if(!(_e instanceof DocumentSet)||this.size!==_e.size)return!1;const tr=this.sortedSet.getIterator(),rr=_e.sortedSet.getIterator();for(;tr.hasNext();){const nr=tr.getNext().key,sr=rr.getNext().key;if(!nr.isEqual(sr))return!1}return!0}toString(){const _e=[];return this.forEach(tr=>{_e.push(tr.toString())}),_e.length===0?"DocumentSet ()":`DocumentSet (
  `+_e.join(`  
`)+`
)`}copy(_e,tr){const rr=new DocumentSet;return rr.comparator=this.comparator,rr.keyedMap=_e,rr.sortedSet=tr,rr}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.pa=new SortedMap(DocumentKey.comparator)}track(_e){const tr=_e.doc.key,rr=this.pa.get(tr);rr?_e.type!==0&&rr.type===3?this.pa=this.pa.insert(tr,_e):_e.type===3&&rr.type!==1?this.pa=this.pa.insert(tr,{type:rr.type,doc:_e.doc}):_e.type===2&&rr.type===2?this.pa=this.pa.insert(tr,{type:2,doc:_e.doc}):_e.type===2&&rr.type===0?this.pa=this.pa.insert(tr,{type:0,doc:_e.doc}):_e.type===1&&rr.type===0?this.pa=this.pa.remove(tr):_e.type===1&&rr.type===2?this.pa=this.pa.insert(tr,{type:1,doc:rr.doc}):_e.type===0&&rr.type===1?this.pa=this.pa.insert(tr,{type:2,doc:_e.doc}):fail(63341,{Vt:_e,ya:rr}):this.pa=this.pa.insert(tr,_e)}wa(){const _e=[];return this.pa.inorderTraversal((tr,rr)=>{_e.push(rr)}),_e}}class ViewSnapshot{constructor(_e,tr,rr,nr,sr,ir,or,ar,lr){this.query=_e,this.docs=tr,this.oldDocs=rr,this.docChanges=nr,this.mutatedKeys=sr,this.fromCache=ir,this.syncStateChanged=or,this.excludesMetadataChanges=ar,this.hasCachedResults=lr}static fromInitialDocuments(_e,tr,rr,nr,sr){const ir=[];return tr.forEach(or=>{ir.push({type:0,doc:or})}),new ViewSnapshot(_e,tr,DocumentSet.emptySet(tr),ir,rr,nr,!0,!1,sr)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(_e){if(!(this.fromCache===_e.fromCache&&this.hasCachedResults===_e.hasCachedResults&&this.syncStateChanged===_e.syncStateChanged&&this.mutatedKeys.isEqual(_e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,_e.query)&&this.docs.isEqual(_e.docs)&&this.oldDocs.isEqual(_e.oldDocs)))return!1;const tr=this.docChanges,rr=_e.docChanges;if(tr.length!==rr.length)return!1;for(let nr=0;nr<tr.length;nr++)if(tr[nr].type!==rr[nr].type||!tr[nr].doc.isEqual(rr[nr].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(_e=>_e.va())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(tr,rr){const nr=__PRIVATE_debugCast(tr),sr=nr.queries;nr.queries=__PRIVATE_newQueriesObjectMap(),sr.forEach((ir,or)=>{for(const ar of or.Sa)ar.onError(rr)})})(this,new FirestoreError(N$1.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(er=>__PRIVATE_canonifyQuery(er),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(er,_e){const tr=__PRIVATE_debugCast(er);let rr=3;const nr=_e.query;let sr=tr.queries.get(nr);sr?!sr.Da()&&_e.va()&&(rr=2):(sr=new __PRIVATE_QueryListenersInfo,rr=_e.va()?0:1);try{switch(rr){case 0:sr.ba=await tr.onListen(nr,!0);break;case 1:sr.ba=await tr.onListen(nr,!1);break;case 2:await tr.onFirstRemoteStoreListen(nr)}}catch(ir){const or=__PRIVATE_wrapInUserErrorIfRecoverable(ir,`Initialization of query '${__PRIVATE_stringifyQuery(_e.query)}' failed`);return void _e.onError(or)}tr.queries.set(nr,sr),sr.Sa.push(_e),_e.Fa(tr.onlineState),sr.ba&&_e.Ma(sr.ba)&&__PRIVATE_raiseSnapshotsInSyncEvent(tr)}async function __PRIVATE_eventManagerUnlisten(er,_e){const tr=__PRIVATE_debugCast(er),rr=_e.query;let nr=3;const sr=tr.queries.get(rr);if(sr){const ir=sr.Sa.indexOf(_e);ir>=0&&(sr.Sa.splice(ir,1),sr.Sa.length===0?nr=_e.va()?0:1:!sr.Da()&&_e.va()&&(nr=2))}switch(nr){case 0:return tr.queries.delete(rr),tr.onUnlisten(rr,!0);case 1:return tr.queries.delete(rr),tr.onUnlisten(rr,!1);case 2:return tr.onLastRemoteStoreUnlisten(rr);default:return}}function __PRIVATE_eventManagerOnWatchChange(er,_e){const tr=__PRIVATE_debugCast(er);let rr=!1;for(const nr of _e){const sr=nr.query,ir=tr.queries.get(sr);if(ir){for(const or of ir.Sa)or.Ma(nr)&&(rr=!0);ir.ba=nr}}rr&&__PRIVATE_raiseSnapshotsInSyncEvent(tr)}function __PRIVATE_eventManagerOnWatchError(er,_e,tr){const rr=__PRIVATE_debugCast(er),nr=rr.queries.get(_e);if(nr)for(const sr of nr.Sa)sr.onError(tr);rr.queries.delete(_e)}function __PRIVATE_raiseSnapshotsInSyncEvent(er){er.Ca.forEach(_e=>{_e.next()})}var en,tn;(tn=en||(en={})).xa="default",tn.Cache="cache";class __PRIVATE_QueryListener{constructor(_e,tr,rr){this.query=_e,this.Oa=tr,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=rr||{}}Ma(_e){if(!this.options.includeMetadataChanges){const rr=[];for(const nr of _e.docChanges)nr.type!==3&&rr.push(nr);_e=new ViewSnapshot(_e.query,_e.docs,_e.oldDocs,rr,_e.mutatedKeys,_e.fromCache,_e.syncStateChanged,!0,_e.hasCachedResults)}let tr=!1;return this.Na?this.La(_e)&&(this.Oa.next(_e),tr=!0):this.ka(_e,this.onlineState)&&(this.qa(_e),tr=!0),this.Ba=_e,tr}onError(_e){this.Oa.error(_e)}Fa(_e){this.onlineState=_e;let tr=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,_e)&&(this.qa(this.Ba),tr=!0),tr}ka(_e,tr){if(!_e.fromCache||!this.va())return!0;const rr=tr!=="Offline";return(!this.options.Qa||!rr)&&(!_e.docs.isEmpty()||_e.hasCachedResults||tr==="Offline")}La(_e){if(_e.docChanges.length>0)return!0;const tr=this.Ba&&this.Ba.hasPendingWrites!==_e.hasPendingWrites;return!(!_e.syncStateChanged&&!tr)&&this.options.includeMetadataChanges===!0}qa(_e){_e=ViewSnapshot.fromInitialDocuments(_e.query,_e.docs,_e.mutatedKeys,_e.fromCache,_e.hasCachedResults),this.Na=!0,this.Oa.next(_e)}va(){return this.options.source!==en.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(_e){this.key=_e}}class __PRIVATE_RemovedLimboDocument{constructor(_e){this.key=_e}}class __PRIVATE_View{constructor(_e,tr){this.query=_e,this.Ha=tr,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.Za=__PRIVATE_newQueryComparator(_e),this.Xa=new DocumentSet(this.Za)}get eu(){return this.Ha}tu(_e,tr){const rr=tr?tr.nu:new __PRIVATE_DocumentChangeSet,nr=tr?tr.Xa:this.Xa;let sr=tr?tr.mutatedKeys:this.mutatedKeys,ir=nr,or=!1;const ar=this.query.limitType==="F"&&nr.size===this.query.limit?nr.last():null,lr=this.query.limitType==="L"&&nr.size===this.query.limit?nr.first():null;if(_e.inorderTraversal((cr,Ar)=>{const ur=nr.get(cr),dr=__PRIVATE_queryMatches(this.query,Ar)?Ar:null,mr=!!ur&&this.mutatedKeys.has(ur.key),pr=!!dr&&(dr.hasLocalMutations||this.mutatedKeys.has(dr.key)&&dr.hasCommittedMutations);let yr=!1;ur&&dr?ur.data.isEqual(dr.data)?mr!==pr&&(rr.track({type:3,doc:dr}),yr=!0):this.ru(ur,dr)||(rr.track({type:2,doc:dr}),yr=!0,(ar&&this.Za(dr,ar)>0||lr&&this.Za(dr,lr)<0)&&(or=!0)):!ur&&dr?(rr.track({type:0,doc:dr}),yr=!0):ur&&!dr&&(rr.track({type:1,doc:ur}),yr=!0,(ar||lr)&&(or=!0)),yr&&(dr?(ir=ir.add(dr),sr=pr?sr.add(cr):sr.delete(cr)):(ir=ir.delete(cr),sr=sr.delete(cr)))}),this.query.limit!==null)for(;ir.size>this.query.limit;){const cr=this.query.limitType==="F"?ir.last():ir.first();ir=ir.delete(cr.key),sr=sr.delete(cr.key),rr.track({type:1,doc:cr})}return{Xa:ir,nu:rr,Cs:or,mutatedKeys:sr}}ru(_e,tr){return _e.hasLocalMutations&&tr.hasCommittedMutations&&!tr.hasLocalMutations}applyChanges(_e,tr,rr,nr){const sr=this.Xa;this.Xa=_e.Xa,this.mutatedKeys=_e.mutatedKeys;const ir=_e.nu.wa();ir.sort((cr,Ar)=>function(dr,mr){const pr=yr=>{switch(yr){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{Vt:yr})}};return pr(dr)-pr(mr)}(cr.type,Ar.type)||this.Za(cr.doc,Ar.doc)),this.iu(rr),nr=nr!=null&&nr;const or=tr&&!nr?this.su():[],ar=this.Ya.size===0&&this.current&&!nr?1:0,lr=ar!==this.Ja;return this.Ja=ar,ir.length!==0||lr?{snapshot:new ViewSnapshot(this.query,_e.Xa,sr,ir,_e.mutatedKeys,ar===0,lr,!1,!!rr&&rr.resumeToken.approximateByteSize()>0),ou:or}:{ou:or}}Fa(_e){return this.current&&_e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(_e){return!this.Ha.has(_e)&&!!this.Xa.has(_e)&&!this.Xa.get(_e).hasLocalMutations}iu(_e){_e&&(_e.addedDocuments.forEach(tr=>this.Ha=this.Ha.add(tr)),_e.modifiedDocuments.forEach(tr=>{}),_e.removedDocuments.forEach(tr=>this.Ha=this.Ha.delete(tr)),this.current=_e.current)}su(){if(!this.current)return[];const _e=this.Ya;this.Ya=__PRIVATE_documentKeySet(),this.Xa.forEach(rr=>{this._u(rr.key)&&(this.Ya=this.Ya.add(rr.key))});const tr=[];return _e.forEach(rr=>{this.Ya.has(rr)||tr.push(new __PRIVATE_RemovedLimboDocument(rr))}),this.Ya.forEach(rr=>{_e.has(rr)||tr.push(new __PRIVATE_AddedLimboDocument(rr))}),tr}au(_e){this.Ha=_e.$s,this.Ya=__PRIVATE_documentKeySet();const tr=this.tu(_e.documents);return this.applyChanges(tr,!0)}uu(){return ViewSnapshot.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const nn="SyncEngine";class __PRIVATE_QueryView{constructor(_e,tr,rr){this.query=_e,this.targetId=tr,this.view=rr}}class LimboResolution{constructor(_e){this.key=_e,this.cu=!1}}class __PRIVATE_SyncEngineImpl{constructor(_e,tr,rr,nr,sr,ir){this.localStore=_e,this.remoteStore=tr,this.eventManager=rr,this.sharedClientState=nr,this.currentUser=sr,this.maxConcurrentLimboResolutions=ir,this.lu={},this.hu=new ObjectMap(or=>__PRIVATE_canonifyQuery(or),__PRIVATE_queryEquals),this.Pu=new Map,this.Tu=new Set,this.Iu=new SortedMap(DocumentKey.comparator),this.Eu=new Map,this.du=new __PRIVATE_ReferenceSet,this.Au={},this.Ru=new Map,this.Vu=__PRIVATE_TargetIdGenerator.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function __PRIVATE_syncEngineListen(er,_e,tr=!0){const rr=__PRIVATE_ensureWatchCallbacks(er);let nr;const sr=rr.hu.get(_e);return sr?(rr.sharedClientState.addLocalQueryTarget(sr.targetId),nr=sr.view.uu()):nr=await __PRIVATE_allocateTargetAndMaybeListen(rr,_e,tr,!0),nr}async function __PRIVATE_triggerRemoteStoreListen(er,_e){const tr=__PRIVATE_ensureWatchCallbacks(er);await __PRIVATE_allocateTargetAndMaybeListen(tr,_e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(er,_e,tr,rr){const nr=await __PRIVATE_localStoreAllocateTarget(er.localStore,__PRIVATE_queryToTarget(_e)),sr=nr.targetId,ir=er.sharedClientState.addLocalQueryTarget(sr,tr);let or;return rr&&(or=await __PRIVATE_initializeViewAndComputeSnapshot(er,_e,sr,ir==="current",nr.resumeToken)),er.isPrimaryClient&&tr&&__PRIVATE_remoteStoreListen(er.remoteStore,nr),or}async function __PRIVATE_initializeViewAndComputeSnapshot(er,_e,tr,rr,nr){er.fu=(Ar,ur,dr)=>async function(pr,yr,hr,gr){let Cr=yr.view.tu(hr);Cr.Cs&&(Cr=await __PRIVATE_localStoreExecuteQuery(pr.localStore,yr.query,!1).then(({documents:_r})=>yr.view.tu(_r,Cr)));const Tr=gr&&gr.targetChanges.get(yr.targetId),Sr=gr&&gr.targetMismatches.get(yr.targetId)!=null,Nr=yr.view.applyChanges(Cr,pr.isPrimaryClient,Tr,Sr);return __PRIVATE_updateTrackedLimbos(pr,yr.targetId,Nr.ou),Nr.snapshot}(er,Ar,ur,dr);const sr=await __PRIVATE_localStoreExecuteQuery(er.localStore,_e,!0),ir=new __PRIVATE_View(_e,sr.$s),or=ir.tu(sr.documents),ar=TargetChange.createSynthesizedTargetChangeForCurrentChange(tr,rr&&er.onlineState!=="Offline",nr),lr=ir.applyChanges(or,er.isPrimaryClient,ar);__PRIVATE_updateTrackedLimbos(er,tr,lr.ou);const cr=new __PRIVATE_QueryView(_e,tr,ir);return er.hu.set(_e,cr),er.Pu.has(tr)?er.Pu.get(tr).push(_e):er.Pu.set(tr,[_e]),lr.snapshot}async function __PRIVATE_syncEngineUnlisten(er,_e,tr){const rr=__PRIVATE_debugCast(er),nr=rr.hu.get(_e),sr=rr.Pu.get(nr.targetId);if(sr.length>1)return rr.Pu.set(nr.targetId,sr.filter(ir=>!__PRIVATE_queryEquals(ir,_e))),void rr.hu.delete(_e);rr.isPrimaryClient?(rr.sharedClientState.removeLocalQueryTarget(nr.targetId),rr.sharedClientState.isActiveQueryTarget(nr.targetId)||await __PRIVATE_localStoreReleaseTarget(rr.localStore,nr.targetId,!1).then(()=>{rr.sharedClientState.clearQueryState(nr.targetId),tr&&__PRIVATE_remoteStoreUnlisten(rr.remoteStore,nr.targetId),__PRIVATE_removeAndCleanupTarget(rr,nr.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(rr,nr.targetId),await __PRIVATE_localStoreReleaseTarget(rr.localStore,nr.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(er,_e){const tr=__PRIVATE_debugCast(er),rr=tr.hu.get(_e),nr=tr.Pu.get(rr.targetId);tr.isPrimaryClient&&nr.length===1&&(tr.sharedClientState.removeLocalQueryTarget(rr.targetId),__PRIVATE_remoteStoreUnlisten(tr.remoteStore,rr.targetId))}async function __PRIVATE_syncEngineWrite(er,_e,tr){const rr=__PRIVATE_syncEngineEnsureWriteCallbacks(er);try{const nr=await function(ir,or){const ar=__PRIVATE_debugCast(ir),lr=Timestamp.now(),cr=or.reduce((dr,mr)=>dr.add(mr.key),__PRIVATE_documentKeySet());let Ar,ur;return ar.persistence.runTransaction("Locally write mutations","readwrite",dr=>{let mr=__PRIVATE_mutableDocumentMap(),pr=__PRIVATE_documentKeySet();return ar.Bs.getEntries(dr,cr).next(yr=>{mr=yr,mr.forEach((hr,gr)=>{gr.isValidDocument()||(pr=pr.add(hr))})}).next(()=>ar.localDocuments.getOverlayedDocuments(dr,mr)).next(yr=>{Ar=yr;const hr=[];for(const gr of or){const Cr=__PRIVATE_mutationExtractBaseValue(gr,Ar.get(gr.key).overlayedDocument);Cr!=null&&hr.push(new __PRIVATE_PatchMutation(gr.key,Cr,__PRIVATE_extractFieldMask(Cr.value.mapValue),Precondition.exists(!0)))}return ar.mutationQueue.addMutationBatch(dr,lr,hr,or)}).next(yr=>{ur=yr;const hr=yr.applyToLocalDocumentSet(Ar,pr);return ar.documentOverlayCache.saveOverlays(dr,yr.batchId,hr)})}).then(()=>({batchId:ur.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(Ar)}))}(rr.localStore,_e);rr.sharedClientState.addPendingMutation(nr.batchId),function(ir,or,ar){let lr=ir.Au[ir.currentUser.toKey()];lr||(lr=new SortedMap(__PRIVATE_primitiveComparator)),lr=lr.insert(or,ar),ir.Au[ir.currentUser.toKey()]=lr}(rr,nr.batchId,tr),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(rr,nr.changes),await __PRIVATE_fillWritePipeline(rr.remoteStore)}catch(nr){const sr=__PRIVATE_wrapInUserErrorIfRecoverable(nr,"Failed to persist write");tr.reject(sr)}}async function __PRIVATE_syncEngineApplyRemoteEvent(er,_e){const tr=__PRIVATE_debugCast(er);try{const rr=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(tr.localStore,_e);_e.targetChanges.forEach((nr,sr)=>{const ir=tr.Eu.get(sr);ir&&(__PRIVATE_hardAssert(nr.addedDocuments.size+nr.modifiedDocuments.size+nr.removedDocuments.size<=1,22616),nr.addedDocuments.size>0?ir.cu=!0:nr.modifiedDocuments.size>0?__PRIVATE_hardAssert(ir.cu,14607):nr.removedDocuments.size>0&&(__PRIVATE_hardAssert(ir.cu,42227),ir.cu=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(tr,rr,_e)}catch(rr){await __PRIVATE_ignoreIfPrimaryLeaseLoss(rr)}}function __PRIVATE_syncEngineApplyOnlineStateChange(er,_e,tr){const rr=__PRIVATE_debugCast(er);if(rr.isPrimaryClient&&tr===0||!rr.isPrimaryClient&&tr===1){const nr=[];rr.hu.forEach((sr,ir)=>{const or=ir.view.Fa(_e);or.snapshot&&nr.push(or.snapshot)}),function(ir,or){const ar=__PRIVATE_debugCast(ir);ar.onlineState=or;let lr=!1;ar.queries.forEach((cr,Ar)=>{for(const ur of Ar.Sa)ur.Fa(or)&&(lr=!0)}),lr&&__PRIVATE_raiseSnapshotsInSyncEvent(ar)}(rr.eventManager,_e),nr.length&&rr.lu.Y_(nr),rr.onlineState=_e,rr.isPrimaryClient&&rr.sharedClientState.setOnlineState(_e)}}async function __PRIVATE_syncEngineRejectListen(er,_e,tr){const rr=__PRIVATE_debugCast(er);rr.sharedClientState.updateQueryState(_e,"rejected",tr);const nr=rr.Eu.get(_e),sr=nr&&nr.key;if(sr){let ir=new SortedMap(DocumentKey.comparator);ir=ir.insert(sr,MutableDocument.newNoDocument(sr,SnapshotVersion.min()));const or=__PRIVATE_documentKeySet().add(sr),ar=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),ir,or);await __PRIVATE_syncEngineApplyRemoteEvent(rr,ar),rr.Iu=rr.Iu.remove(sr),rr.Eu.delete(_e),__PRIVATE_pumpEnqueuedLimboResolutions(rr)}else await __PRIVATE_localStoreReleaseTarget(rr.localStore,_e,!1).then(()=>__PRIVATE_removeAndCleanupTarget(rr,_e,tr)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(er,_e){const tr=__PRIVATE_debugCast(er),rr=_e.batch.batchId;try{const nr=await __PRIVATE_localStoreAcknowledgeBatch(tr.localStore,_e);__PRIVATE_processUserCallback(tr,rr,null),__PRIVATE_triggerPendingWritesCallbacks(tr,rr),tr.sharedClientState.updateMutationState(rr,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(tr,nr)}catch(nr){await __PRIVATE_ignoreIfPrimaryLeaseLoss(nr)}}async function __PRIVATE_syncEngineRejectFailedWrite(er,_e,tr){const rr=__PRIVATE_debugCast(er);try{const nr=await function(ir,or){const ar=__PRIVATE_debugCast(ir);return ar.persistence.runTransaction("Reject batch","readwrite-primary",lr=>{let cr;return ar.mutationQueue.lookupMutationBatch(lr,or).next(Ar=>(__PRIVATE_hardAssert(Ar!==null,37113),cr=Ar.keys(),ar.mutationQueue.removeMutationBatch(lr,Ar))).next(()=>ar.mutationQueue.performConsistencyCheck(lr)).next(()=>ar.documentOverlayCache.removeOverlaysForBatchId(lr,cr,or)).next(()=>ar.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(lr,cr)).next(()=>ar.localDocuments.getDocuments(lr,cr))})}(rr.localStore,_e);__PRIVATE_processUserCallback(rr,_e,tr),__PRIVATE_triggerPendingWritesCallbacks(rr,_e),rr.sharedClientState.updateMutationState(_e,"rejected",tr),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(rr,nr)}catch(nr){await __PRIVATE_ignoreIfPrimaryLeaseLoss(nr)}}function __PRIVATE_triggerPendingWritesCallbacks(er,_e){(er.Ru.get(_e)||[]).forEach(tr=>{tr.resolve()}),er.Ru.delete(_e)}function __PRIVATE_processUserCallback(er,_e,tr){const rr=__PRIVATE_debugCast(er);let nr=rr.Au[rr.currentUser.toKey()];if(nr){const sr=nr.get(_e);sr&&(tr?sr.reject(tr):sr.resolve(),nr=nr.remove(_e)),rr.Au[rr.currentUser.toKey()]=nr}}function __PRIVATE_removeAndCleanupTarget(er,_e,tr=null){er.sharedClientState.removeLocalQueryTarget(_e);for(const rr of er.Pu.get(_e))er.hu.delete(rr),tr&&er.lu.gu(rr,tr);er.Pu.delete(_e),er.isPrimaryClient&&er.du.Hr(_e).forEach(rr=>{er.du.containsKey(rr)||__PRIVATE_removeLimboTarget(er,rr)})}function __PRIVATE_removeLimboTarget(er,_e){er.Tu.delete(_e.path.canonicalString());const tr=er.Iu.get(_e);tr!==null&&(__PRIVATE_remoteStoreUnlisten(er.remoteStore,tr),er.Iu=er.Iu.remove(_e),er.Eu.delete(tr),__PRIVATE_pumpEnqueuedLimboResolutions(er))}function __PRIVATE_updateTrackedLimbos(er,_e,tr){for(const rr of tr)rr instanceof __PRIVATE_AddedLimboDocument?(er.du.addReference(rr.key,_e),__PRIVATE_trackLimboChange(er,rr)):rr instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(nn,"Document no longer in limbo: "+rr.key),er.du.removeReference(rr.key,_e),er.du.containsKey(rr.key)||__PRIVATE_removeLimboTarget(er,rr.key)):fail(19791,{pu:rr})}function __PRIVATE_trackLimboChange(er,_e){const tr=_e.key,rr=tr.path.canonicalString();er.Iu.get(tr)||er.Tu.has(rr)||(__PRIVATE_logDebug(nn,"New document in limbo: "+tr),er.Tu.add(rr),__PRIVATE_pumpEnqueuedLimboResolutions(er))}function __PRIVATE_pumpEnqueuedLimboResolutions(er){for(;er.Tu.size>0&&er.Iu.size<er.maxConcurrentLimboResolutions;){const _e=er.Tu.values().next().value;er.Tu.delete(_e);const tr=new DocumentKey(ResourcePath.fromString(_e)),rr=er.Vu.next();er.Eu.set(rr,new LimboResolution(tr)),er.Iu=er.Iu.insert(tr,rr),__PRIVATE_remoteStoreListen(er.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(tr.path)),rr,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.le))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(er,_e,tr){const rr=__PRIVATE_debugCast(er),nr=[],sr=[],ir=[];rr.hu.isEmpty()||(rr.hu.forEach((or,ar)=>{ir.push(rr.fu(ar,_e,tr).then(lr=>{var cr;if((lr||tr)&&rr.isPrimaryClient){const Ar=lr?!lr.fromCache:(cr=tr==null?void 0:tr.targetChanges.get(ar.targetId))===null||cr===void 0?void 0:cr.current;rr.sharedClientState.updateQueryState(ar.targetId,Ar?"current":"not-current")}if(lr){nr.push(lr);const Ar=__PRIVATE_LocalViewChanges.Rs(ar.targetId,lr);sr.push(Ar)}}))}),await Promise.all(ir),rr.lu.Y_(nr),await async function(ar,lr){const cr=__PRIVATE_debugCast(ar);try{await cr.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ar=>PersistencePromise.forEach(lr,ur=>PersistencePromise.forEach(ur.ds,dr=>cr.persistence.referenceDelegate.addReference(Ar,ur.targetId,dr)).next(()=>PersistencePromise.forEach(ur.As,dr=>cr.persistence.referenceDelegate.removeReference(Ar,ur.targetId,dr)))))}catch(Ar){if(!__PRIVATE_isIndexedDbTransactionError(Ar))throw Ar;__PRIVATE_logDebug(Qt$1,"Failed to update sequence numbers: "+Ar)}for(const Ar of lr){const ur=Ar.targetId;if(!Ar.fromCache){const dr=cr.xs.get(ur),mr=dr.snapshotVersion,pr=dr.withLastLimboFreeSnapshotVersion(mr);cr.xs=cr.xs.insert(ur,pr)}}}(rr.localStore,sr))}async function __PRIVATE_syncEngineHandleCredentialChange(er,_e){const tr=__PRIVATE_debugCast(er);if(!tr.currentUser.isEqual(_e)){__PRIVATE_logDebug(nn,"User change. New user:",_e.toKey());const rr=await __PRIVATE_localStoreHandleUserChange(tr.localStore,_e);tr.currentUser=_e,function(sr,ir){sr.Ru.forEach(or=>{or.forEach(ar=>{ar.reject(new FirestoreError(N$1.CANCELLED,ir))})}),sr.Ru.clear()}(tr,"'waitForPendingWrites' promise is rejected due to a user change."),tr.sharedClientState.handleUserChange(_e,rr.removedBatchIds,rr.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(tr,rr.ks)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(er,_e){const tr=__PRIVATE_debugCast(er),rr=tr.Eu.get(_e);if(rr&&rr.cu)return __PRIVATE_documentKeySet().add(rr.key);{let nr=__PRIVATE_documentKeySet();const sr=tr.Pu.get(_e);if(!sr)return nr;for(const ir of sr){const or=tr.hu.get(ir);nr=nr.unionWith(or.view.eu)}return nr}}function __PRIVATE_ensureWatchCallbacks(er){const _e=__PRIVATE_debugCast(er);return _e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,_e),_e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,_e),_e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,_e),_e.lu.Y_=__PRIVATE_eventManagerOnWatchChange.bind(null,_e.eventManager),_e.lu.gu=__PRIVATE_eventManagerOnWatchError.bind(null,_e.eventManager),_e}function __PRIVATE_syncEngineEnsureWriteCallbacks(er){const _e=__PRIVATE_debugCast(er);return _e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,_e),_e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,_e),_e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(_e){this.serializer=__PRIVATE_newSerializer(_e.databaseInfo.databaseId),this.sharedClientState=this.bu(_e),this.persistence=this.Su(_e),await this.persistence.start(),this.localStore=this.Du(_e),this.gcScheduler=this.vu(_e,this.localStore),this.indexBackfillerScheduler=this.Cu(_e,this.localStore)}vu(_e,tr){return null}Cu(_e,tr){return null}Du(_e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,_e.initialUser,this.serializer)}Su(_e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.fi,this.serializer)}bu(_e){return new __PRIVATE_MemorySharedClientState}async terminate(){var _e,tr;(_e=this.gcScheduler)===null||_e===void 0||_e.stop(),(tr=this.indexBackfillerScheduler)===null||tr===void 0||tr.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(_e){super(),this.cacheSizeBytes=_e}vu(_e,tr){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const rr=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(rr,_e.asyncQueue,tr)}Su(_e){const tr=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence(rr=>__PRIVATE_MemoryLruDelegate.fi(rr,tr),this.serializer)}}class OnlineComponentProvider{async initialize(_e,tr){this.localStore||(this.localStore=_e.localStore,this.sharedClientState=_e.sharedClientState,this.datastore=this.createDatastore(tr),this.remoteStore=this.createRemoteStore(tr),this.eventManager=this.createEventManager(tr),this.syncEngine=this.createSyncEngine(tr,!_e.synchronizeTabs),this.sharedClientState.onlineStateHandler=rr=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,rr,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(_e){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(_e){const tr=__PRIVATE_newSerializer(_e.databaseInfo.databaseId),rr=function(sr){return new __PRIVATE_WebChannelConnection(sr)}(_e.databaseInfo);return function(sr,ir,or,ar){return new __PRIVATE_DatastoreImpl(sr,ir,or,ar)}(_e.authCredentials,_e.appCheckCredentials,rr,tr)}createRemoteStore(_e){return function(rr,nr,sr,ir,or){return new __PRIVATE_RemoteStoreImpl(rr,nr,sr,ir,or)}(this.localStore,this.datastore,_e.asyncQueue,tr=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,tr,0),function(){return __PRIVATE_BrowserConnectivityMonitor.C()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(_e,tr){return function(nr,sr,ir,or,ar,lr,cr){const Ar=new __PRIVATE_SyncEngineImpl(nr,sr,ir,or,ar,lr);return cr&&(Ar.mu=!0),Ar}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,_e.initialUser,_e.maxConcurrentLimboResolutions,tr)}async terminate(){var _e,tr;await async function(nr){const sr=__PRIVATE_debugCast(nr);__PRIVATE_logDebug(Xt$1,"RemoteStore shutting down."),sr.da.add(5),await __PRIVATE_disableNetworkInternal(sr),sr.Ra.shutdown(),sr.Va.set("Unknown")}(this.remoteStore),(_e=this.datastore)===null||_e===void 0||_e.terminate(),(tr=this.eventManager)===null||tr===void 0||tr.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(_e){this.observer=_e,this.muted=!1}next(_e){this.muted||this.observer.next&&this.Mu(this.observer.next,_e)}error(_e){this.muted||(this.observer.error?this.Mu(this.observer.error,_e):__PRIVATE_logError("Uncaught Error in snapshot listener:",_e.toString()))}xu(){this.muted=!0}Mu(_e,tr){setTimeout(()=>{this.muted||_e(tr)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="FirestoreClient";class FirestoreClient{constructor(_e,tr,rr,nr,sr){this.authCredentials=_e,this.appCheckCredentials=tr,this.asyncQueue=rr,this.databaseInfo=nr,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=sr,this.authCredentials.start(rr,async ir=>{__PRIVATE_logDebug(rn,"Received user=",ir.uid),await this.authCredentialListener(ir),this.user=ir}),this.appCheckCredentials.start(rr,ir=>(__PRIVATE_logDebug(rn,"Received new app check token=",ir),this.appCheckCredentialListener(ir,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(_e){this.authCredentialListener=_e}setAppCheckTokenChangeListener(_e){this.appCheckCredentialListener=_e}terminate(){this.asyncQueue.enterRestrictedMode();const _e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),_e.resolve()}catch(tr){const rr=__PRIVATE_wrapInUserErrorIfRecoverable(tr,"Failed to shutdown persistence");_e.reject(rr)}}),_e.promise}}async function __PRIVATE_setOfflineComponentProvider(er,_e){er.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(rn,"Initializing OfflineComponentProvider");const tr=er.configuration;await _e.initialize(tr);let rr=tr.initialUser;er.setCredentialChangeListener(async nr=>{rr.isEqual(nr)||(await __PRIVATE_localStoreHandleUserChange(_e.localStore,nr),rr=nr)}),_e.persistence.setDatabaseDeletedListener(()=>er.terminate()),er._offlineComponents=_e}async function __PRIVATE_setOnlineComponentProvider(er,_e){er.asyncQueue.verifyOperationInProgress();const tr=await __PRIVATE_ensureOfflineComponents(er);__PRIVATE_logDebug(rn,"Initializing OnlineComponentProvider"),await _e.initialize(tr,er.configuration),er.setCredentialChangeListener(rr=>__PRIVATE_remoteStoreHandleCredentialChange(_e.remoteStore,rr)),er.setAppCheckTokenChangeListener((rr,nr)=>__PRIVATE_remoteStoreHandleCredentialChange(_e.remoteStore,nr)),er._onlineComponents=_e}async function __PRIVATE_ensureOfflineComponents(er){if(!er._offlineComponents)if(er._uninitializedComponentsProvider){__PRIVATE_logDebug(rn,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(er,er._uninitializedComponentsProvider._offline)}catch(_e){const tr=_e;if(!function(nr){return nr.name==="FirebaseError"?nr.code===N$1.FAILED_PRECONDITION||nr.code===N$1.UNIMPLEMENTED:!(typeof DOMException<"u"&&nr instanceof DOMException)||nr.code===22||nr.code===20||nr.code===11}(tr))throw tr;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+tr),await __PRIVATE_setOfflineComponentProvider(er,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(rn,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(er,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return er._offlineComponents}async function __PRIVATE_ensureOnlineComponents(er){return er._onlineComponents||(er._uninitializedComponentsProvider?(__PRIVATE_logDebug(rn,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(er,er._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(rn,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(er,new OnlineComponentProvider))),er._onlineComponents}function __PRIVATE_getSyncEngine(er){return __PRIVATE_ensureOnlineComponents(er).then(_e=>_e.syncEngine)}async function __PRIVATE_getEventManager(er){const _e=await __PRIVATE_ensureOnlineComponents(er),tr=_e.eventManager;return tr.onListen=__PRIVATE_syncEngineListen.bind(null,_e.syncEngine),tr.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,_e.syncEngine),tr.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,_e.syncEngine),tr.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,_e.syncEngine),tr}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(er,_e,tr={}){const rr=new __PRIVATE_Deferred;return er.asyncQueue.enqueueAndForget(async()=>function(sr,ir,or,ar,lr){const cr=new __PRIVATE_AsyncObserver({next:ur=>{cr.xu(),ir.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(sr,Ar));const dr=ur.docs.has(or);!dr&&ur.fromCache?lr.reject(new FirestoreError(N$1.UNAVAILABLE,"Failed to get document because the client is offline.")):dr&&ur.fromCache&&ar&&ar.source==="server"?lr.reject(new FirestoreError(N$1.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):lr.resolve(ur)},error:ur=>lr.reject(ur)}),Ar=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(or.path),cr,{includeMetadataChanges:!0,Qa:!0});return __PRIVATE_eventManagerListen(sr,Ar)}(await __PRIVATE_getEventManager(er),er.asyncQueue,_e,tr,rr)),rr.promise}function __PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(er,_e,tr={}){const rr=new __PRIVATE_Deferred;return er.asyncQueue.enqueueAndForget(async()=>function(sr,ir,or,ar,lr){const cr=new __PRIVATE_AsyncObserver({next:ur=>{cr.xu(),ir.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(sr,Ar)),ur.fromCache&&ar.source==="server"?lr.reject(new FirestoreError(N$1.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):lr.resolve(ur)},error:ur=>lr.reject(ur)}),Ar=new __PRIVATE_QueryListener(or,cr,{includeMetadataChanges:!0,Qa:!0});return __PRIVATE_eventManagerListen(sr,Ar)}(await __PRIVATE_getEventManager(er),er.asyncQueue,_e,tr,rr)),rr.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(er){const _e={};return er.timeoutSeconds!==void 0&&(_e.timeoutSeconds=er.timeoutSeconds),_e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(er,_e,tr){if(!tr)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Function ${er}() cannot be called with an empty ${_e}.`)}function __PRIVATE_validateIsNotUsedTogether(er,_e,tr,rr){if(_e===!0&&rr===!0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`${er} and ${tr} cannot be used together.`)}function __PRIVATE_validateDocumentPath(er){if(!DocumentKey.isDocumentKey(er))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${er} has ${er.length}.`)}function __PRIVATE_validateCollectionPath(er){if(DocumentKey.isDocumentKey(er))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${er} has ${er.length}.`)}function __PRIVATE_valueDescription(er){if(er===void 0)return"undefined";if(er===null)return"null";if(typeof er=="string")return er.length>20&&(er=`${er.substring(0,20)}...`),JSON.stringify(er);if(typeof er=="number"||typeof er=="boolean")return""+er;if(typeof er=="object"){if(er instanceof Array)return"an array";{const _e=function(rr){return rr.constructor?rr.constructor.name:null}(er);return _e?`a custom ${_e} object`:"an object"}}return typeof er=="function"?"a function":fail(12329,{type:typeof er})}function __PRIVATE_cast(er,_e){if("_delegate"in er&&(er=er._delegate),!(er instanceof _e)){if(_e.name===er.constructor.name)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const tr=__PRIVATE_valueDescription(er);throw new FirestoreError(N$1.INVALID_ARGUMENT,`Expected type '${_e.name}', but it was: ${tr}`)}}return er}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="firestore.googleapis.com",_n=!0;class FirestoreSettingsImpl{constructor(_e){var tr,rr;if(_e.host===void 0){if(_e.ssl!==void 0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=on,this.ssl=_n}else this.host=_e.host,this.ssl=(tr=_e.ssl)!==null&&tr!==void 0?tr:_n;if(this.isUsingEmulator=_e.emulatorOptions!==void 0,this.credentials=_e.credentials,this.ignoreUndefinedProperties=!!_e.ignoreUndefinedProperties,this.localCache=_e.localCache,_e.cacheSizeBytes===void 0)this.cacheSizeBytes=Mt$1;else{if(_e.cacheSizeBytes!==-1&&_e.cacheSizeBytes<Ot$1)throw new FirestoreError(N$1.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=_e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",_e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",_e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!_e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:_e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!_e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions((rr=_e.experimentalLongPollingOptions)!==null&&rr!==void 0?rr:{}),function(sr){if(sr.timeoutSeconds!==void 0){if(isNaN(sr.timeoutSeconds))throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${sr.timeoutSeconds} (must not be NaN)`);if(sr.timeoutSeconds<5)throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${sr.timeoutSeconds} (minimum allowed value is 5)`);if(sr.timeoutSeconds>30)throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${sr.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!_e.useFetchStreams}isEqual(_e){return this.host===_e.host&&this.ssl===_e.ssl&&this.credentials===_e.credentials&&this.cacheSizeBytes===_e.cacheSizeBytes&&this.experimentalForceLongPolling===_e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===_e.experimentalAutoDetectLongPolling&&function(rr,nr){return rr.timeoutSeconds===nr.timeoutSeconds}(this.experimentalLongPollingOptions,_e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===_e.ignoreUndefinedProperties&&this.useFetchStreams===_e.useFetchStreams}}class Firestore$1{constructor(_e,tr,rr,nr){this._authCredentials=_e,this._appCheckCredentials=tr,this._databaseId=rr,this._app=nr,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N$1.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(_e){if(this._settingsFrozen)throw new FirestoreError(N$1.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(_e),this._emulatorOptions=_e.emulatorOptions||{},_e.credentials!==void 0&&(this._authCredentials=function(rr){if(!rr)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(rr.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(rr.sessionIndex||"0",rr.iamToken||null,rr.authTokenFactory||null);case"provider":return rr.client;default:throw new FirestoreError(N$1.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(_e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(tr){const rr=sn.get(tr);rr&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),sn.delete(tr),rr.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(er,_e,tr,rr={}){var nr;er=__PRIVATE_cast(er,Firestore$1);const sr=isCloudWorkstation(_e),ir=er._getSettings(),or=Object.assign(Object.assign({},ir),{emulatorOptions:er._getEmulatorOptions()}),ar=`${_e}:${tr}`;sr&&(pingServer(`https://${ar}`),updateEmulatorBanner("Firestore",!0)),ir.host!==on&&ir.host!==ar&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const lr=Object.assign(Object.assign({},ir),{host:ar,ssl:sr,emulatorOptions:rr});if(!deepEqual(lr,or)&&(er._setSettings(lr),rr.mockUserToken)){let cr,Ar;if(typeof rr.mockUserToken=="string")cr=rr.mockUserToken,Ar=User.MOCK_USER;else{cr=createMockUserToken(rr.mockUserToken,(nr=er._app)===null||nr===void 0?void 0:nr.options.projectId);const ur=rr.mockUserToken.sub||rr.mockUserToken.user_id;if(!ur)throw new FirestoreError(N$1.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");Ar=new User(ur)}er._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(cr,Ar))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(_e,tr,rr){this.converter=tr,this._query=rr,this.type="query",this.firestore=_e}withConverter(_e){return new Query(this.firestore,_e,this._query)}}class DocumentReference{constructor(_e,tr,rr){this.converter=tr,this._key=rr,this.type="document",this.firestore=_e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(_e){return new DocumentReference(this.firestore,_e,this._key)}}class CollectionReference extends Query{constructor(_e,tr,rr){super(_e,tr,__PRIVATE_newQueryForPath(rr)),this._path=rr,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const _e=this._path.popLast();return _e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(_e))}withConverter(_e){return new CollectionReference(this.firestore,_e,this._path)}}function collection(er,_e,...tr){if(er=getModularInstance(er),__PRIVATE_validateNonEmptyArgument("collection","path",_e),er instanceof Firestore$1){const rr=ResourcePath.fromString(_e,...tr);return __PRIVATE_validateCollectionPath(rr),new CollectionReference(er,null,rr)}{if(!(er instanceof DocumentReference||er instanceof CollectionReference))throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const rr=er._path.child(ResourcePath.fromString(_e,...tr));return __PRIVATE_validateCollectionPath(rr),new CollectionReference(er.firestore,null,rr)}}function doc(er,_e,...tr){if(er=getModularInstance(er),arguments.length===1&&(_e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",_e),er instanceof Firestore$1){const rr=ResourcePath.fromString(_e,...tr);return __PRIVATE_validateDocumentPath(rr),new DocumentReference(er,null,new DocumentKey(rr))}{if(!(er instanceof DocumentReference||er instanceof CollectionReference))throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const rr=er._path.child(ResourcePath.fromString(_e,...tr));return __PRIVATE_validateDocumentPath(rr),new DocumentReference(er.firestore,er instanceof CollectionReference?er.converter:null,new DocumentKey(rr))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(_e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this.rc=()=>{const rr=getDocument();rr&&__PRIVATE_logDebug(an,"Visibility state changed to "+rr.visibilityState),this.x_.b_()},this.sc=_e;const tr=getDocument();tr&&typeof tr.addEventListener=="function"&&tr.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(_e){this.enqueue(_e)}enqueueAndForgetEvenWhileRestricted(_e){this.oc(),this._c(_e)}enterRestrictedMode(_e){if(!this.Yu){this.Yu=!0,this.tc=_e||!1;const tr=getDocument();tr&&typeof tr.removeEventListener=="function"&&tr.removeEventListener("visibilitychange",this.rc)}}enqueue(_e){if(this.oc(),this.Yu)return new Promise(()=>{});const tr=new __PRIVATE_Deferred;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(_e().then(tr.resolve,tr.reject),tr.promise)).then(()=>tr.promise)}enqueueRetryable(_e){this.enqueueAndForget(()=>(this.Ju.push(_e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(_e){if(!__PRIVATE_isIndexedDbTransactionError(_e))throw _e;__PRIVATE_logDebug(an,"Operation failed with retryable error: "+_e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(_e){const tr=this.sc.then(()=>(this.ec=!0,_e().catch(rr=>{throw this.Xu=rr,this.ec=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(rr)),rr}).then(rr=>(this.ec=!1,rr))));return this.sc=tr,tr}enqueueAfterDelay(_e,tr,rr){this.oc(),this.nc.indexOf(_e)>-1&&(tr=0);const nr=DelayedOperation.createAndSchedule(this,_e,tr,rr,sr=>this.uc(sr));return this.Zu.push(nr),nr}oc(){this.Xu&&fail(47125,{cc:__PRIVATE_getMessageOrStack(this.Xu)})}verifyOperationInProgress(){}async lc(){let _e;do _e=this.sc,await _e;while(_e!==this.sc)}hc(_e){for(const tr of this.Zu)if(tr.timerId===_e)return!0;return!1}Pc(_e){return this.lc().then(()=>{this.Zu.sort((tr,rr)=>tr.targetTimeMs-rr.targetTimeMs);for(const tr of this.Zu)if(tr.skipDelay(),_e!=="all"&&tr.timerId===_e)break;return this.lc()})}Tc(_e){this.nc.push(_e)}uc(_e){const tr=this.Zu.indexOf(_e);this.Zu.splice(tr,1)}}function __PRIVATE_getMessageOrStack(er){let _e=er.message||"";return er.stack&&(_e=er.stack.includes(er.message)?er.stack:er.message+`
`+er.stack),_e}class Firestore extends Firestore$1{constructor(_e,tr,rr,nr){super(_e,tr,rr,nr),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=(nr==null?void 0:nr.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const _e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(_e),this._firestoreClient=void 0,await _e}}}function getFirestore(er,_e){const tr=typeof er=="object"?er:getApp(),rr=typeof er=="string"?er:ut$1,nr=_getProvider(tr,"firestore").getImmediate({identifier:rr});if(!nr._initialized){const sr=getDefaultEmulatorHostnameAndPort("firestore");sr&&connectFirestoreEmulator(nr,...sr)}return nr}function ensureFirestoreConfigured(er){if(er._terminated)throw new FirestoreError(N$1.FAILED_PRECONDITION,"The client has already been terminated.");return er._firestoreClient||__PRIVATE_configureFirestore(er),er._firestoreClient}function __PRIVATE_configureFirestore(er){var _e,tr,rr;const nr=er._freezeSettings(),sr=function(or,ar,lr,cr){return new DatabaseInfo(or,ar,lr,cr.host,cr.ssl,cr.experimentalForceLongPolling,cr.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(cr.experimentalLongPollingOptions),cr.useFetchStreams,cr.isUsingEmulator)}(er._databaseId,((_e=er._app)===null||_e===void 0?void 0:_e.options.appId)||"",er._persistenceKey,nr);er._componentsProvider||!((tr=nr.localCache)===null||tr===void 0)&&tr._offlineComponentProvider&&(!((rr=nr.localCache)===null||rr===void 0)&&rr._onlineComponentProvider)&&(er._componentsProvider={_offline:nr.localCache._offlineComponentProvider,_online:nr.localCache._onlineComponentProvider}),er._firestoreClient=new FirestoreClient(er._authCredentials,er._appCheckCredentials,er._queue,sr,er._componentsProvider&&function(or){const ar=or==null?void 0:or._online.build();return{_offline:or==null?void 0:or._offline.build(ar),_online:ar}}(er._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(_e){this._byteString=_e}static fromBase64String(_e){try{return new Bytes(ByteString.fromBase64String(_e))}catch(tr){throw new FirestoreError(N$1.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+tr)}}static fromUint8Array(_e){return new Bytes(ByteString.fromUint8Array(_e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(_e){return this._byteString.isEqual(_e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(..._e){for(let tr=0;tr<_e.length;++tr)if(_e[tr].length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(_e)}isEqual(_e){return this._internalPath.isEqual(_e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(_e){this._methodName=_e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(_e,tr){if(!isFinite(_e)||_e<-90||_e>90)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+_e);if(!isFinite(tr)||tr<-180||tr>180)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+tr);this._lat=_e,this._long=tr}get latitude(){return this._lat}get longitude(){return this._long}isEqual(_e){return this._lat===_e._lat&&this._long===_e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(_e){return __PRIVATE_primitiveComparator(this._lat,_e._lat)||__PRIVATE_primitiveComparator(this._long,_e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(_e){this._values=(_e||[]).map(tr=>tr)}toArray(){return this._values.map(_e=>_e)}isEqual(_e){return function(rr,nr){if(rr.length!==nr.length)return!1;for(let sr=0;sr<rr.length;++sr)if(rr[sr]!==nr[sr])return!1;return!0}(this._values,_e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn=/^__.*__$/;class ParsedSetData{constructor(_e,tr,rr){this.data=_e,this.fieldMask=tr,this.fieldTransforms=rr}toMutation(_e,tr){return this.fieldMask!==null?new __PRIVATE_PatchMutation(_e,this.data,this.fieldMask,tr,this.fieldTransforms):new __PRIVATE_SetMutation(_e,this.data,tr,this.fieldTransforms)}}class ParsedUpdateData{constructor(_e,tr,rr){this.data=_e,this.fieldMask=tr,this.fieldTransforms=rr}toMutation(_e,tr){return new __PRIVATE_PatchMutation(_e,this.data,this.fieldMask,tr,this.fieldTransforms)}}function __PRIVATE_isWrite(er){switch(er){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ic:er})}}class __PRIVATE_ParseContextImpl{constructor(_e,tr,rr,nr,sr,ir){this.settings=_e,this.databaseId=tr,this.serializer=rr,this.ignoreUndefinedProperties=nr,sr===void 0&&this.Ec(),this.fieldTransforms=sr||[],this.fieldMask=ir||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(_e){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),_e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(_e){var tr;const rr=(tr=this.path)===null||tr===void 0?void 0:tr.child(_e),nr=this.dc({path:rr,Rc:!1});return nr.Vc(_e),nr}mc(_e){var tr;const rr=(tr=this.path)===null||tr===void 0?void 0:tr.child(_e),nr=this.dc({path:rr,Rc:!1});return nr.Ec(),nr}fc(_e){return this.dc({path:void 0,Rc:!0})}gc(_e){return __PRIVATE_createError(_e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(_e){return this.fieldMask.find(tr=>_e.isPrefixOf(tr))!==void 0||this.fieldTransforms.find(tr=>_e.isPrefixOf(tr.field))!==void 0}Ec(){if(this.path)for(let _e=0;_e<this.path.length;_e++)this.Vc(this.path.get(_e))}Vc(_e){if(_e.length===0)throw this.gc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ic)&&cn.test(_e))throw this.gc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(_e,tr,rr){this.databaseId=_e,this.ignoreUndefinedProperties=tr,this.serializer=rr||__PRIVATE_newSerializer(_e)}bc(_e,tr,rr,nr=!1){return new __PRIVATE_ParseContextImpl({Ic:_e,methodName:tr,wc:rr,path:FieldPath$1.emptyPath(),Rc:!1,yc:nr},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(er){const _e=er._freezeSettings(),tr=__PRIVATE_newSerializer(er._databaseId);return new __PRIVATE_UserDataReader(er._databaseId,!!_e.ignoreUndefinedProperties,tr)}function __PRIVATE_parseSetData(er,_e,tr,rr,nr,sr={}){const ir=er.bc(sr.merge||sr.mergeFields?2:0,_e,tr,nr);__PRIVATE_validatePlainObject("Data must be an object, but it was:",ir,rr);const or=__PRIVATE_parseObject(rr,ir);let ar,lr;if(sr.merge)ar=new FieldMask(ir.fieldMask),lr=ir.fieldTransforms;else if(sr.mergeFields){const cr=[];for(const Ar of sr.mergeFields){const ur=__PRIVATE_fieldPathFromArgument$1(_e,Ar,tr);if(!ir.contains(ur))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Field '${ur}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(cr,ur)||cr.push(ur)}ar=new FieldMask(cr),lr=ir.fieldTransforms.filter(Ar=>ar.covers(Ar.field))}else ar=null,lr=ir.fieldTransforms;return new ParsedSetData(new ObjectValue(or),ar,lr)}class __PRIVATE_DeleteFieldValueImpl extends FieldValue{_toFieldTransform(_e){if(_e.Ic!==2)throw _e.Ic===1?_e.gc(`${this._methodName}() can only appear at the top level of your update data`):_e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return _e.fieldMask.push(_e.path),null}isEqual(_e){return _e instanceof __PRIVATE_DeleteFieldValueImpl}}function __PRIVATE_parseUpdateData(er,_e,tr,rr){const nr=er.bc(1,_e,tr);__PRIVATE_validatePlainObject("Data must be an object, but it was:",nr,rr);const sr=[],ir=ObjectValue.empty();forEach(rr,(ar,lr)=>{const cr=__PRIVATE_fieldPathFromDotSeparatedString(_e,ar,tr);lr=getModularInstance(lr);const Ar=nr.mc(cr);if(lr instanceof __PRIVATE_DeleteFieldValueImpl)sr.push(cr);else{const ur=__PRIVATE_parseData(lr,Ar);ur!=null&&(sr.push(cr),ir.set(cr,ur))}});const or=new FieldMask(sr);return new ParsedUpdateData(ir,or,nr.fieldTransforms)}function __PRIVATE_parseUpdateVarargs(er,_e,tr,rr,nr,sr){const ir=er.bc(1,_e,tr),or=[__PRIVATE_fieldPathFromArgument$1(_e,rr,tr)],ar=[nr];if(sr.length%2!=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Function ${_e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ur=0;ur<sr.length;ur+=2)or.push(__PRIVATE_fieldPathFromArgument$1(_e,sr[ur])),ar.push(sr[ur+1]);const lr=[],cr=ObjectValue.empty();for(let ur=or.length-1;ur>=0;--ur)if(!__PRIVATE_fieldMaskContains(lr,or[ur])){const dr=or[ur];let mr=ar[ur];mr=getModularInstance(mr);const pr=ir.mc(dr);if(mr instanceof __PRIVATE_DeleteFieldValueImpl)lr.push(dr);else{const yr=__PRIVATE_parseData(mr,pr);yr!=null&&(lr.push(dr),cr.set(dr,yr))}}const Ar=new FieldMask(lr);return new ParsedUpdateData(cr,Ar,ir.fieldTransforms)}function __PRIVATE_parseQueryValue(er,_e,tr,rr=!1){return __PRIVATE_parseData(tr,er.bc(rr?4:3,_e))}function __PRIVATE_parseData(er,_e){if(__PRIVATE_looksLikeJsonObject(er=getModularInstance(er)))return __PRIVATE_validatePlainObject("Unsupported field value:",_e,er),__PRIVATE_parseObject(er,_e);if(er instanceof FieldValue)return function(rr,nr){if(!__PRIVATE_isWrite(nr.Ic))throw nr.gc(`${rr._methodName}() can only be used with update() and set()`);if(!nr.path)throw nr.gc(`${rr._methodName}() is not currently supported inside arrays`);const sr=rr._toFieldTransform(nr);sr&&nr.fieldTransforms.push(sr)}(er,_e),null;if(er===void 0&&_e.ignoreUndefinedProperties)return null;if(_e.path&&_e.fieldMask.push(_e.path),er instanceof Array){if(_e.settings.Rc&&_e.Ic!==4)throw _e.gc("Nested arrays are not supported");return function(rr,nr){const sr=[];let ir=0;for(const or of rr){let ar=__PRIVATE_parseData(or,nr.fc(ir));ar==null&&(ar={nullValue:"NULL_VALUE"}),sr.push(ar),ir++}return{arrayValue:{values:sr}}}(er,_e)}return function(rr,nr){if((rr=getModularInstance(rr))===null)return{nullValue:"NULL_VALUE"};if(typeof rr=="number")return toNumber(nr.serializer,rr);if(typeof rr=="boolean")return{booleanValue:rr};if(typeof rr=="string")return{stringValue:rr};if(rr instanceof Date){const sr=Timestamp.fromDate(rr);return{timestampValue:toTimestamp(nr.serializer,sr)}}if(rr instanceof Timestamp){const sr=new Timestamp(rr.seconds,1e3*Math.floor(rr.nanoseconds/1e3));return{timestampValue:toTimestamp(nr.serializer,sr)}}if(rr instanceof GeoPoint)return{geoPointValue:{latitude:rr.latitude,longitude:rr.longitude}};if(rr instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(nr.serializer,rr._byteString)};if(rr instanceof DocumentReference){const sr=nr.databaseId,ir=rr.firestore._databaseId;if(!ir.isEqual(sr))throw nr.gc(`Document reference is for database ${ir.projectId}/${ir.database} but should be for database ${sr.projectId}/${sr.database}`);return{referenceValue:__PRIVATE_toResourceName(rr.firestore._databaseId||nr.databaseId,rr._key.path)}}if(rr instanceof VectorValue)return function(ir,or){return{mapValue:{fields:{[ct$1]:{stringValue:Pt$1},[Tt$1]:{arrayValue:{values:ir.toArray().map(lr=>{if(typeof lr!="number")throw or.gc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(or.serializer,lr)})}}}}}}(rr,nr);throw nr.gc(`Unsupported field value: ${__PRIVATE_valueDescription(rr)}`)}(er,_e)}function __PRIVATE_parseObject(er,_e){const tr={};return isEmpty(er)?_e.path&&_e.path.length>0&&_e.fieldMask.push(_e.path):forEach(er,(rr,nr)=>{const sr=__PRIVATE_parseData(nr,_e.Ac(rr));sr!=null&&(tr[rr]=sr)}),{mapValue:{fields:tr}}}function __PRIVATE_looksLikeJsonObject(er){return!(typeof er!="object"||er===null||er instanceof Array||er instanceof Date||er instanceof Timestamp||er instanceof GeoPoint||er instanceof Bytes||er instanceof DocumentReference||er instanceof FieldValue||er instanceof VectorValue)}function __PRIVATE_validatePlainObject(er,_e,tr){if(!__PRIVATE_looksLikeJsonObject(tr)||!function(nr){return typeof nr=="object"&&nr!==null&&(Object.getPrototypeOf(nr)===Object.prototype||Object.getPrototypeOf(nr)===null)}(tr)){const rr=__PRIVATE_valueDescription(tr);throw rr==="an object"?_e.gc(er+" a custom object"):_e.gc(er+" "+rr)}}function __PRIVATE_fieldPathFromArgument$1(er,_e,tr){if((_e=getModularInstance(_e))instanceof FieldPath)return _e._internalPath;if(typeof _e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(er,_e);throw __PRIVATE_createError("Field path arguments must be of type string or ",er,!1,void 0,tr)}const ln$1=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(er,_e,tr){if(_e.search(ln$1)>=0)throw __PRIVATE_createError(`Invalid field path (${_e}). Paths must not contain '~', '*', '/', '[', or ']'`,er,!1,void 0,tr);try{return new FieldPath(..._e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${_e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,er,!1,void 0,tr)}}function __PRIVATE_createError(er,_e,tr,rr,nr){const sr=rr&&!rr.isEmpty(),ir=nr!==void 0;let or=`Function ${_e}() called with invalid data`;tr&&(or+=" (via `toFirestore()`)"),or+=". ";let ar="";return(sr||ir)&&(ar+=" (found",sr&&(ar+=` in field ${rr}`),ir&&(ar+=` in document ${nr}`),ar+=")"),new FirestoreError(N$1.INVALID_ARGUMENT,or+er+ar)}function __PRIVATE_fieldMaskContains(er,_e){return er.some(tr=>tr.isEqual(_e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(_e,tr,rr,nr,sr){this._firestore=_e,this._userDataWriter=tr,this._key=rr,this._document=nr,this._converter=sr}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const _e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(_e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(_e){if(this._document){const tr=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",_e));if(tr!==null)return this._userDataWriter.convertValue(tr)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(er,_e){return typeof _e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(er,_e):_e instanceof FieldPath?_e._internalPath:_e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(er){if(er.limitType==="L"&&er.explicitOrderBy.length===0)throw new FirestoreError(N$1.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(er,_e,...tr){let rr=[];_e instanceof AppliableConstraint&&rr.push(_e),rr=rr.concat(tr),function(sr){const ir=sr.filter(ar=>ar instanceof QueryCompositeFilterConstraint).length,or=sr.filter(ar=>ar instanceof QueryFieldFilterConstraint).length;if(ir>1||ir>0&&or>0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(rr);for(const nr of rr)er=nr._apply(er);return er}class QueryFieldFilterConstraint extends QueryConstraint{constructor(_e,tr,rr){super(),this._field=_e,this._op=tr,this._value=rr,this.type="where"}static _create(_e,tr,rr){return new QueryFieldFilterConstraint(_e,tr,rr)}_apply(_e){const tr=this._parse(_e);return __PRIVATE_validateNewFieldFilter(_e._query,tr),new Query(_e.firestore,_e.converter,__PRIVATE_queryWithAddedFilter(_e._query,tr))}_parse(_e){const tr=__PRIVATE_newUserDataReader(_e.firestore);return function(sr,ir,or,ar,lr,cr,Ar){let ur;if(lr.isKeyField()){if(cr==="array-contains"||cr==="array-contains-any")throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid Query. You can't perform '${cr}' queries on documentId().`);if(cr==="in"||cr==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(Ar,cr);const mr=[];for(const pr of Ar)mr.push(__PRIVATE_parseDocumentIdValue(ar,sr,pr));ur={arrayValue:{values:mr}}}else ur=__PRIVATE_parseDocumentIdValue(ar,sr,Ar)}else cr!=="in"&&cr!=="not-in"&&cr!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(Ar,cr),ur=__PRIVATE_parseQueryValue(or,ir,Ar,cr==="in"||cr==="not-in");return FieldFilter.create(lr,cr,ur)}(_e._query,"where",tr,_e.firestore._databaseId,this._field,this._op,this._value)}}function where(er,_e,tr){const rr=_e,nr=__PRIVATE_fieldPathFromArgument("where",er);return QueryFieldFilterConstraint._create(nr,rr,tr)}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(_e,tr){super(),this.type=_e,this._queryConstraints=tr}static _create(_e,tr){return new QueryCompositeFilterConstraint(_e,tr)}_parse(_e){const tr=this._queryConstraints.map(rr=>rr._parse(_e)).filter(rr=>rr.getFilters().length>0);return tr.length===1?tr[0]:CompositeFilter.create(tr,this._getOperator())}_apply(_e){const tr=this._parse(_e);return tr.getFilters().length===0?_e:(function(nr,sr){let ir=nr;const or=sr.getFlattenedFilters();for(const ar of or)__PRIVATE_validateNewFieldFilter(ir,ar),ir=__PRIVATE_queryWithAddedFilter(ir,ar)}(_e._query,tr),new Query(_e.firestore,_e.converter,__PRIVATE_queryWithAddedFilter(_e._query,tr)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(_e,tr){super(),this._field=_e,this._direction=tr,this.type="orderBy"}static _create(_e,tr){return new QueryOrderByConstraint(_e,tr)}_apply(_e){const tr=function(nr,sr,ir){if(nr.startAt!==null)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(nr.endAt!==null)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(sr,ir)}(_e._query,this._field,this._direction);return new Query(_e.firestore,_e.converter,function(nr,sr){const ir=nr.explicitOrderBy.concat([sr]);return new __PRIVATE_QueryImpl(nr.path,nr.collectionGroup,ir,nr.filters.slice(),nr.limit,nr.limitType,nr.startAt,nr.endAt)}(_e._query,tr))}}function orderBy(er,_e="asc"){const tr=_e,rr=__PRIVATE_fieldPathFromArgument("orderBy",er);return QueryOrderByConstraint._create(rr,tr)}function __PRIVATE_parseDocumentIdValue(er,_e,tr){if(typeof(tr=getModularInstance(tr))=="string"){if(tr==="")throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(_e)&&tr.indexOf("/")!==-1)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${tr}' contains a '/' character.`);const rr=_e.path.child(ResourcePath.fromString(tr));if(!DocumentKey.isDocumentKey(rr))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${rr}' is not because it has an odd number of segments (${rr.length}).`);return __PRIVATE_refValue(er,new DocumentKey(rr))}if(tr instanceof DocumentReference)return __PRIVATE_refValue(er,tr._key);throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(tr)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(er,_e){if(!Array.isArray(er)||er.length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${_e.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(er,_e){const tr=function(nr,sr){for(const ir of nr)for(const or of ir.getFlattenedFilters())if(sr.indexOf(or.op)>=0)return or.op;return null}(er.filters,function(nr){switch(nr){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(_e.op));if(tr!==null)throw tr===_e.op?new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${_e.op.toString()}' filter.`):new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. You cannot use '${_e.op.toString()}' filters with '${tr.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(_e,tr="none"){switch(__PRIVATE_typeOrder(_e)){case 0:return null;case 1:return _e.booleanValue;case 2:return __PRIVATE_normalizeNumber(_e.integerValue||_e.doubleValue);case 3:return this.convertTimestamp(_e.timestampValue);case 4:return this.convertServerTimestamp(_e,tr);case 5:return _e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(_e.bytesValue));case 7:return this.convertReference(_e.referenceValue);case 8:return this.convertGeoPoint(_e.geoPointValue);case 9:return this.convertArray(_e.arrayValue,tr);case 11:return this.convertObject(_e.mapValue,tr);case 10:return this.convertVectorValue(_e.mapValue);default:throw fail(62114,{value:_e})}}convertObject(_e,tr){return this.convertObjectMap(_e.fields,tr)}convertObjectMap(_e,tr="none"){const rr={};return forEach(_e,(nr,sr)=>{rr[nr]=this.convertValue(sr,tr)}),rr}convertVectorValue(_e){var tr,rr,nr;const sr=(nr=(rr=(tr=_e.fields)===null||tr===void 0?void 0:tr[Tt$1].arrayValue)===null||rr===void 0?void 0:rr.values)===null||nr===void 0?void 0:nr.map(ir=>__PRIVATE_normalizeNumber(ir.doubleValue));return new VectorValue(sr)}convertGeoPoint(_e){return new GeoPoint(__PRIVATE_normalizeNumber(_e.latitude),__PRIVATE_normalizeNumber(_e.longitude))}convertArray(_e,tr){return(_e.values||[]).map(rr=>this.convertValue(rr,tr))}convertServerTimestamp(_e,tr){switch(tr){case"previous":const rr=__PRIVATE_getPreviousValue(_e);return rr==null?null:this.convertValue(rr,tr);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(_e));default:return null}}convertTimestamp(_e){const tr=__PRIVATE_normalizeTimestamp(_e);return new Timestamp(tr.seconds,tr.nanos)}convertDocumentKey(_e,tr){const rr=ResourcePath.fromString(_e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(rr),9688,{name:_e});const nr=new DatabaseId(rr.get(1),rr.get(3)),sr=new DocumentKey(rr.popFirst(5));return nr.isEqual(tr)||__PRIVATE_logError(`Document ${sr} contains a document reference within a different database (${nr.projectId}/${nr.database}) which is not supported. It will be treated as a reference in the current database (${tr.projectId}/${tr.database}) instead.`),sr}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(er,_e,tr){let rr;return rr=er?er.toFirestore(_e):_e,rr}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotMetadata{constructor(_e,tr){this.hasPendingWrites=_e,this.fromCache=tr}isEqual(_e){return this.hasPendingWrites===_e.hasPendingWrites&&this.fromCache===_e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(_e,tr,rr,nr,sr,ir){super(_e,tr,rr,nr,ir),this._firestore=_e,this._firestoreImpl=_e,this.metadata=sr}exists(){return super.exists()}data(_e={}){if(this._document){if(this._converter){const tr=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(tr,_e)}return this._userDataWriter.convertValue(this._document.data.value,_e.serverTimestamps)}}get(_e,tr={}){if(this._document){const rr=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",_e));if(rr!==null)return this._userDataWriter.convertValue(rr,tr.serverTimestamps)}}}class QueryDocumentSnapshot extends DocumentSnapshot{data(_e={}){return super.data(_e)}}class QuerySnapshot{constructor(_e,tr,rr,nr){this._firestore=_e,this._userDataWriter=tr,this._snapshot=nr,this.metadata=new SnapshotMetadata(nr.hasPendingWrites,nr.fromCache),this.query=rr}get docs(){const _e=[];return this.forEach(tr=>_e.push(tr)),_e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(_e,tr){this._snapshot.docs.forEach(rr=>{_e.call(tr,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,rr.key,rr,new SnapshotMetadata(this._snapshot.mutatedKeys.has(rr.key),this._snapshot.fromCache),this.query.converter))})}docChanges(_e={}){const tr=!!_e.includeMetadataChanges;if(tr&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N$1.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===tr||(this._cachedChanges=function(nr,sr){if(nr._snapshot.oldDocs.isEmpty()){let ir=0;return nr._snapshot.docChanges.map(or=>{const ar=new QueryDocumentSnapshot(nr._firestore,nr._userDataWriter,or.doc.key,or.doc,new SnapshotMetadata(nr._snapshot.mutatedKeys.has(or.doc.key),nr._snapshot.fromCache),nr.query.converter);return or.doc,{type:"added",doc:ar,oldIndex:-1,newIndex:ir++}})}{let ir=nr._snapshot.oldDocs;return nr._snapshot.docChanges.filter(or=>sr||or.type!==3).map(or=>{const ar=new QueryDocumentSnapshot(nr._firestore,nr._userDataWriter,or.doc.key,or.doc,new SnapshotMetadata(nr._snapshot.mutatedKeys.has(or.doc.key),nr._snapshot.fromCache),nr.query.converter);let lr=-1,cr=-1;return or.type!==0&&(lr=ir.indexOf(or.doc.key),ir=ir.delete(or.doc.key)),or.type!==1&&(ir=ir.add(or.doc),cr=ir.indexOf(or.doc.key)),{type:__PRIVATE_resultChangeType(or.type),doc:ar,oldIndex:lr,newIndex:cr}})}}(this,tr),this._cachedChangesIncludeMetadataChanges=tr),this._cachedChanges}}function __PRIVATE_resultChangeType(er){switch(er){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:er})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(er){er=__PRIVATE_cast(er,DocumentReference);const _e=__PRIVATE_cast(er.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(_e),er._key).then(tr=>__PRIVATE_convertToDocSnapshot(_e,er,tr))}class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(_e){super(),this.firestore=_e}convertBytes(_e){return new Bytes(_e)}convertReference(_e){const tr=this.convertDocumentKey(_e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,tr)}}function getDocs(er){er=__PRIVATE_cast(er,Query);const _e=__PRIVATE_cast(er.firestore,Firestore),tr=ensureFirestoreConfigured(_e),rr=new __PRIVATE_ExpUserDataWriter(_e);return __PRIVATE_validateHasExplicitOrderByForLimitToLast(er._query),__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(tr,er._query).then(nr=>new QuerySnapshot(_e,rr,er,nr))}function updateDoc(er,_e,tr,...rr){er=__PRIVATE_cast(er,DocumentReference);const nr=__PRIVATE_cast(er.firestore,Firestore),sr=__PRIVATE_newUserDataReader(nr);let ir;return ir=typeof(_e=getModularInstance(_e))=="string"||_e instanceof FieldPath?__PRIVATE_parseUpdateVarargs(sr,"updateDoc",er._key,_e,tr,rr):__PRIVATE_parseUpdateData(sr,"updateDoc",er._key,_e),executeWrite(nr,[ir.toMutation(er._key,Precondition.exists(!0))])}function deleteDoc(er){return executeWrite(__PRIVATE_cast(er.firestore,Firestore),[new __PRIVATE_DeleteMutation(er._key,Precondition.none())])}function addDoc(er,_e){const tr=__PRIVATE_cast(er.firestore,Firestore),rr=doc(er),nr=__PRIVATE_applyFirestoreDataConverter(er.converter,_e);return executeWrite(tr,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(er.firestore),"addDoc",rr._key,nr,er.converter!==null,{}).toMutation(rr._key,Precondition.exists(!1))]).then(()=>rr)}function executeWrite(er,_e){return function(rr,nr){const sr=new __PRIVATE_Deferred;return rr.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(rr),nr,sr)),sr.promise}(ensureFirestoreConfigured(er),_e)}function __PRIVATE_convertToDocSnapshot(er,_e,tr){const rr=tr.docs.get(_e._key),nr=new __PRIVATE_ExpUserDataWriter(er);return new DocumentSnapshot(er,nr,_e._key,rr,new SnapshotMetadata(tr.hasPendingWrites,tr.fromCache),_e.converter)}(function(_e,tr=!0){(function(nr){x$2=nr})(SDK_VERSION),_registerComponent(new Component("firestore",(rr,{instanceIdentifier:nr,options:sr})=>{const ir=rr.getProvider("app").getImmediate(),or=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(rr.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(ir,rr.getProvider("app-check-internal")),function(lr,cr){if(!Object.prototype.hasOwnProperty.apply(lr.options,["projectId"]))throw new FirestoreError(N$1.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(lr.options.projectId,cr)}(ir,nr),ir);return sr=Object.assign({useFetchStreams:tr},sr),or._setSettings(sr),or},"PUBLIC").setMultipleInstances(!0)),registerVersion(F$2,M$1,_e),registerVersion(F$2,M$1,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_HOST="firebasestorage.googleapis.com",CONFIG_STORAGE_BUCKET_KEY="storageBucket",DEFAULT_MAX_OPERATION_RETRY_TIME=2*60*1e3,DEFAULT_MAX_UPLOAD_RETRY_TIME=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StorageError extends FirebaseError{constructor(_e,tr,rr=0){super(prependCode(_e),`Firebase Storage: ${tr} (${prependCode(_e)})`),this.status_=rr,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,StorageError.prototype)}get status(){return this.status_}set status(_e){this.status_=_e}_codeEquals(_e){return prependCode(_e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(_e){this.customData.serverResponse=_e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var StorageErrorCode;(function(er){er.UNKNOWN="unknown",er.OBJECT_NOT_FOUND="object-not-found",er.BUCKET_NOT_FOUND="bucket-not-found",er.PROJECT_NOT_FOUND="project-not-found",er.QUOTA_EXCEEDED="quota-exceeded",er.UNAUTHENTICATED="unauthenticated",er.UNAUTHORIZED="unauthorized",er.UNAUTHORIZED_APP="unauthorized-app",er.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",er.INVALID_CHECKSUM="invalid-checksum",er.CANCELED="canceled",er.INVALID_EVENT_NAME="invalid-event-name",er.INVALID_URL="invalid-url",er.INVALID_DEFAULT_BUCKET="invalid-default-bucket",er.NO_DEFAULT_BUCKET="no-default-bucket",er.CANNOT_SLICE_BLOB="cannot-slice-blob",er.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",er.NO_DOWNLOAD_URL="no-download-url",er.INVALID_ARGUMENT="invalid-argument",er.INVALID_ARGUMENT_COUNT="invalid-argument-count",er.APP_DELETED="app-deleted",er.INVALID_ROOT_OPERATION="invalid-root-operation",er.INVALID_FORMAT="invalid-format",er.INTERNAL_ERROR="internal-error",er.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(StorageErrorCode||(StorageErrorCode={}));function prependCode(er){return"storage/"+er}function unknown(){const er="An unknown error occurred, please check the error payload for server response.";return new StorageError(StorageErrorCode.UNKNOWN,er)}function objectNotFound(er){return new StorageError(StorageErrorCode.OBJECT_NOT_FOUND,"Object '"+er+"' does not exist.")}function quotaExceeded(er){return new StorageError(StorageErrorCode.QUOTA_EXCEEDED,"Quota for bucket '"+er+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function unauthenticated(){const er="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new StorageError(StorageErrorCode.UNAUTHENTICATED,er)}function unauthorizedApp(){return new StorageError(StorageErrorCode.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function unauthorized(er){return new StorageError(StorageErrorCode.UNAUTHORIZED,"User does not have permission to access '"+er+"'.")}function retryLimitExceeded(){return new StorageError(StorageErrorCode.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function canceled(){return new StorageError(StorageErrorCode.CANCELED,"User canceled the upload/download.")}function invalidUrl(er){return new StorageError(StorageErrorCode.INVALID_URL,"Invalid URL '"+er+"'.")}function invalidDefaultBucket(er){return new StorageError(StorageErrorCode.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+er+"'.")}function noDefaultBucket(){return new StorageError(StorageErrorCode.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CONFIG_STORAGE_BUCKET_KEY+"' property when initializing the app?")}function cannotSliceBlob(){return new StorageError(StorageErrorCode.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function noDownloadURL(){return new StorageError(StorageErrorCode.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function missingPolyFill(er){return new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,`${er} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function invalidArgument(er){return new StorageError(StorageErrorCode.INVALID_ARGUMENT,er)}function appDeleted(){return new StorageError(StorageErrorCode.APP_DELETED,"The Firebase app was deleted.")}function invalidRootOperation(er){return new StorageError(StorageErrorCode.INVALID_ROOT_OPERATION,"The operation '"+er+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function invalidFormat(er,_e){return new StorageError(StorageErrorCode.INVALID_FORMAT,"String does not match format '"+er+"': "+_e)}function internalError(er){throw new StorageError(StorageErrorCode.INTERNAL_ERROR,"Internal error: "+er)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Location{constructor(_e,tr){this.bucket=_e,this.path_=tr}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const _e=encodeURIComponent;return"/b/"+_e(this.bucket)+"/o/"+_e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(_e,tr){let rr;try{rr=Location.makeFromUrl(_e,tr)}catch{return new Location(_e,"")}if(rr.path==="")return rr;throw invalidDefaultBucket(_e)}static makeFromUrl(_e,tr){let rr=null;const nr="([A-Za-z0-9.\\-_]+)";function sr(Tr){Tr.path.charAt(Tr.path.length-1)==="/"&&(Tr.path_=Tr.path_.slice(0,-1))}const ir="(/(.*))?$",or=new RegExp("^gs://"+nr+ir,"i"),ar={bucket:1,path:3};function lr(Tr){Tr.path_=decodeURIComponent(Tr.path)}const cr="v[A-Za-z0-9_]+",Ar=tr.replace(/[.]/g,"\\."),ur="(/([^?#]*).*)?$",dr=new RegExp(`^https?://${Ar}/${cr}/b/${nr}/o${ur}`,"i"),mr={bucket:1,path:3},pr=tr===DEFAULT_HOST?"(?:storage.googleapis.com|storage.cloud.google.com)":tr,yr="([^?#]*)",hr=new RegExp(`^https?://${pr}/${nr}/${yr}`,"i"),Cr=[{regex:or,indices:ar,postModify:sr},{regex:dr,indices:mr,postModify:lr},{regex:hr,indices:{bucket:1,path:2},postModify:lr}];for(let Tr=0;Tr<Cr.length;Tr++){const Sr=Cr[Tr],Nr=Sr.regex.exec(_e);if(Nr){const _r=Nr[Sr.indices.bucket];let vr=Nr[Sr.indices.path];vr||(vr=""),rr=new Location(_r,vr),Sr.postModify(rr);break}}if(rr==null)throw invalidUrl(_e);return rr}}class FailRequest{constructor(_e){this.promise_=Promise.reject(_e)}getPromise(){return this.promise_}cancel(_e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function start(er,_e,tr){let rr=1,nr=null,sr=null,ir=!1,or=0;function ar(){return or===2}let lr=!1;function cr(...yr){lr||(lr=!0,_e.apply(null,yr))}function Ar(yr){nr=setTimeout(()=>{nr=null,er(dr,ar())},yr)}function ur(){sr&&clearTimeout(sr)}function dr(yr,...hr){if(lr){ur();return}if(yr){ur(),cr.call(null,yr,...hr);return}if(ar()||ir){ur(),cr.call(null,yr,...hr);return}rr<64&&(rr*=2);let Cr;or===1?(or=2,Cr=0):Cr=(rr+Math.random())*1e3,Ar(Cr)}let mr=!1;function pr(yr){mr||(mr=!0,ur(),!lr&&(nr!==null?(yr||(or=2),clearTimeout(nr),Ar(0)):yr||(or=1)))}return Ar(0),sr=setTimeout(()=>{ir=!0,pr(!0)},tr),pr}function stop(er){er(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isJustDef(er){return er!==void 0}function isNonArrayObject(er){return typeof er=="object"&&!Array.isArray(er)}function isString(er){return typeof er=="string"||er instanceof String}function isNativeBlob(er){return isNativeBlobDefined()&&er instanceof Blob}function isNativeBlobDefined(){return typeof Blob<"u"}function validateNumber(er,_e,tr,rr){if(rr<_e)throw invalidArgument(`Invalid value for '${er}'. Expected ${_e} or greater.`);if(rr>tr)throw invalidArgument(`Invalid value for '${er}'. Expected ${tr} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function makeUrl(er,_e,tr){let rr=_e;return tr==null&&(rr=`https://${_e}`),`${tr}://${rr}/v0${er}`}function makeQueryString(er){const _e=encodeURIComponent;let tr="?";for(const rr in er)if(er.hasOwnProperty(rr)){const nr=_e(rr)+"="+_e(er[rr]);tr=tr+nr+"&"}return tr=tr.slice(0,-1),tr}var ErrorCode;(function(er){er[er.NO_ERROR=0]="NO_ERROR",er[er.NETWORK_ERROR=1]="NETWORK_ERROR",er[er.ABORT=2]="ABORT"})(ErrorCode||(ErrorCode={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isRetryStatusCode(er,_e){const tr=er>=500&&er<600,nr=[408,429].indexOf(er)!==-1,sr=_e.indexOf(er)!==-1;return tr||nr||sr}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NetworkRequest{constructor(_e,tr,rr,nr,sr,ir,or,ar,lr,cr,Ar,ur=!0,dr=!1){this.url_=_e,this.method_=tr,this.headers_=rr,this.body_=nr,this.successCodes_=sr,this.additionalRetryCodes_=ir,this.callback_=or,this.errorCallback_=ar,this.timeout_=lr,this.progressCallback_=cr,this.connectionFactory_=Ar,this.retry=ur,this.isUsingEmulator=dr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((mr,pr)=>{this.resolve_=mr,this.reject_=pr,this.start_()})}start_(){const _e=(rr,nr)=>{if(nr){rr(!1,new RequestEndStatus(!1,null,!0));return}const sr=this.connectionFactory_();this.pendingConnection_=sr;const ir=or=>{const ar=or.loaded,lr=or.lengthComputable?or.total:-1;this.progressCallback_!==null&&this.progressCallback_(ar,lr)};this.progressCallback_!==null&&sr.addUploadProgressListener(ir),sr.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&sr.removeUploadProgressListener(ir),this.pendingConnection_=null;const or=sr.getErrorCode()===ErrorCode.NO_ERROR,ar=sr.getStatus();if(!or||isRetryStatusCode(ar,this.additionalRetryCodes_)&&this.retry){const cr=sr.getErrorCode()===ErrorCode.ABORT;rr(!1,new RequestEndStatus(!1,null,cr));return}const lr=this.successCodes_.indexOf(ar)!==-1;rr(!0,new RequestEndStatus(lr,sr))})},tr=(rr,nr)=>{const sr=this.resolve_,ir=this.reject_,or=nr.connection;if(nr.wasSuccessCode)try{const ar=this.callback_(or,or.getResponse());isJustDef(ar)?sr(ar):sr()}catch(ar){ir(ar)}else if(or!==null){const ar=unknown();ar.serverResponse=or.getErrorText(),this.errorCallback_?ir(this.errorCallback_(or,ar)):ir(ar)}else if(nr.canceled){const ar=this.appDelete_?appDeleted():canceled();ir(ar)}else{const ar=retryLimitExceeded();ir(ar)}};this.canceled_?tr(!1,new RequestEndStatus(!1,null,!0)):this.backoffId_=start(_e,tr,this.timeout_)}getPromise(){return this.promise_}cancel(_e){this.canceled_=!0,this.appDelete_=_e||!1,this.backoffId_!==null&&stop(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class RequestEndStatus{constructor(_e,tr,rr){this.wasSuccessCode=_e,this.connection=tr,this.canceled=!!rr}}function addAuthHeader_(er,_e){_e!==null&&_e.length>0&&(er.Authorization="Firebase "+_e)}function addVersionHeader_(er,_e){er["X-Firebase-Storage-Version"]="webjs/"+(_e??"AppManager")}function addGmpidHeader_(er,_e){_e&&(er["X-Firebase-GMPID"]=_e)}function addAppCheckHeader_(er,_e){_e!==null&&(er["X-Firebase-AppCheck"]=_e)}function makeRequest(er,_e,tr,rr,nr,sr,ir=!0,or=!1){const ar=makeQueryString(er.urlParams),lr=er.url+ar,cr=Object.assign({},er.headers);return addGmpidHeader_(cr,_e),addAuthHeader_(cr,tr),addVersionHeader_(cr,sr),addAppCheckHeader_(cr,rr),new NetworkRequest(lr,er.method,cr,er.body,er.successCodes,er.additionalRetryCodes,er.handler,er.errorHandler,er.timeout,er.progressCallback,nr,ir,or)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getBlobBuilder(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function getBlob$1(...er){const _e=getBlobBuilder();if(_e!==void 0){const tr=new _e;for(let rr=0;rr<er.length;rr++)tr.append(er[rr]);return tr.getBlob()}else{if(isNativeBlobDefined())return new Blob(er);throw new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function sliceBlob(er,_e,tr){return er.webkitSlice?er.webkitSlice(_e,tr):er.mozSlice?er.mozSlice(_e,tr):er.slice?er.slice(_e,tr):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function decodeBase64(er){if(typeof atob>"u")throw missingPolyFill("base-64");return atob(er)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const StringFormat={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class StringData{constructor(_e,tr){this.data=_e,this.contentType=tr||null}}function dataFromString(er,_e){switch(er){case StringFormat.RAW:return new StringData(utf8Bytes_(_e));case StringFormat.BASE64:case StringFormat.BASE64URL:return new StringData(base64Bytes_(er,_e));case StringFormat.DATA_URL:return new StringData(dataURLBytes_(_e),dataURLContentType_(_e))}throw unknown()}function utf8Bytes_(er){const _e=[];for(let tr=0;tr<er.length;tr++){let rr=er.charCodeAt(tr);if(rr<=127)_e.push(rr);else if(rr<=2047)_e.push(192|rr>>6,128|rr&63);else if((rr&64512)===55296)if(!(tr<er.length-1&&(er.charCodeAt(tr+1)&64512)===56320))_e.push(239,191,189);else{const sr=rr,ir=er.charCodeAt(++tr);rr=65536|(sr&1023)<<10|ir&1023,_e.push(240|rr>>18,128|rr>>12&63,128|rr>>6&63,128|rr&63)}else(rr&64512)===56320?_e.push(239,191,189):_e.push(224|rr>>12,128|rr>>6&63,128|rr&63)}return new Uint8Array(_e)}function percentEncodedBytes_(er){let _e;try{_e=decodeURIComponent(er)}catch{throw invalidFormat(StringFormat.DATA_URL,"Malformed data URL.")}return utf8Bytes_(_e)}function base64Bytes_(er,_e){switch(er){case StringFormat.BASE64:{const nr=_e.indexOf("-")!==-1,sr=_e.indexOf("_")!==-1;if(nr||sr)throw invalidFormat(er,"Invalid character '"+(nr?"-":"_")+"' found: is it base64url encoded?");break}case StringFormat.BASE64URL:{const nr=_e.indexOf("+")!==-1,sr=_e.indexOf("/")!==-1;if(nr||sr)throw invalidFormat(er,"Invalid character '"+(nr?"+":"/")+"' found: is it base64 encoded?");_e=_e.replace(/-/g,"+").replace(/_/g,"/");break}}let tr;try{tr=decodeBase64(_e)}catch(nr){throw nr.message.includes("polyfill")?nr:invalidFormat(er,"Invalid character found")}const rr=new Uint8Array(tr.length);for(let nr=0;nr<tr.length;nr++)rr[nr]=tr.charCodeAt(nr);return rr}class DataURLParts{constructor(_e){this.base64=!1,this.contentType=null;const tr=_e.match(/^data:([^,]+)?,/);if(tr===null)throw invalidFormat(StringFormat.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const rr=tr[1]||null;rr!=null&&(this.base64=endsWith(rr,";base64"),this.contentType=this.base64?rr.substring(0,rr.length-7):rr),this.rest=_e.substring(_e.indexOf(",")+1)}}function dataURLBytes_(er){const _e=new DataURLParts(er);return _e.base64?base64Bytes_(StringFormat.BASE64,_e.rest):percentEncodedBytes_(_e.rest)}function dataURLContentType_(er){return new DataURLParts(er).contentType}function endsWith(er,_e){return er.length>=_e.length?er.substring(er.length-_e.length)===_e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FbsBlob{constructor(_e,tr){let rr=0,nr="";isNativeBlob(_e)?(this.data_=_e,rr=_e.size,nr=_e.type):_e instanceof ArrayBuffer?(tr?this.data_=new Uint8Array(_e):(this.data_=new Uint8Array(_e.byteLength),this.data_.set(new Uint8Array(_e))),rr=this.data_.length):_e instanceof Uint8Array&&(tr?this.data_=_e:(this.data_=new Uint8Array(_e.length),this.data_.set(_e)),rr=_e.length),this.size_=rr,this.type_=nr}size(){return this.size_}type(){return this.type_}slice(_e,tr){if(isNativeBlob(this.data_)){const rr=this.data_,nr=sliceBlob(rr,_e,tr);return nr===null?null:new FbsBlob(nr)}else{const rr=new Uint8Array(this.data_.buffer,_e,tr-_e);return new FbsBlob(rr,!0)}}static getBlob(..._e){if(isNativeBlobDefined()){const tr=_e.map(rr=>rr instanceof FbsBlob?rr.data_:rr);return new FbsBlob(getBlob$1.apply(null,tr))}else{const tr=_e.map(ir=>isString(ir)?dataFromString(StringFormat.RAW,ir).data:ir.data_);let rr=0;tr.forEach(ir=>{rr+=ir.byteLength});const nr=new Uint8Array(rr);let sr=0;return tr.forEach(ir=>{for(let or=0;or<ir.length;or++)nr[sr++]=ir[or]}),new FbsBlob(nr,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonObjectOrNull(er){let _e;try{_e=JSON.parse(er)}catch{return null}return isNonArrayObject(_e)?_e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parent(er){if(er.length===0)return null;const _e=er.lastIndexOf("/");return _e===-1?"":er.slice(0,_e)}function child(er,_e){const tr=_e.split("/").filter(rr=>rr.length>0).join("/");return er.length===0?tr:er+"/"+tr}function lastComponent(er){const _e=er.lastIndexOf("/",er.length-2);return _e===-1?er:er.slice(_e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function noXform_(er,_e){return _e}class Mapping{constructor(_e,tr,rr,nr){this.server=_e,this.local=tr||_e,this.writable=!!rr,this.xform=nr||noXform_}}let mappings_=null;function xformPath(er){return!isString(er)||er.length<2?er:lastComponent(er)}function getMappings(){if(mappings_)return mappings_;const er=[];er.push(new Mapping("bucket")),er.push(new Mapping("generation")),er.push(new Mapping("metageneration")),er.push(new Mapping("name","fullPath",!0));function _e(sr,ir){return xformPath(ir)}const tr=new Mapping("name");tr.xform=_e,er.push(tr);function rr(sr,ir){return ir!==void 0?Number(ir):ir}const nr=new Mapping("size");return nr.xform=rr,er.push(nr),er.push(new Mapping("timeCreated")),er.push(new Mapping("updated")),er.push(new Mapping("md5Hash",null,!0)),er.push(new Mapping("cacheControl",null,!0)),er.push(new Mapping("contentDisposition",null,!0)),er.push(new Mapping("contentEncoding",null,!0)),er.push(new Mapping("contentLanguage",null,!0)),er.push(new Mapping("contentType",null,!0)),er.push(new Mapping("metadata","customMetadata",!0)),mappings_=er,mappings_}function addRef(er,_e){function tr(){const rr=er.bucket,nr=er.fullPath,sr=new Location(rr,nr);return _e._makeStorageReference(sr)}Object.defineProperty(er,"ref",{get:tr})}function fromResource(er,_e,tr){const rr={};rr.type="file";const nr=tr.length;for(let sr=0;sr<nr;sr++){const ir=tr[sr];rr[ir.local]=ir.xform(rr,_e[ir.server])}return addRef(rr,er),rr}function fromResourceString(er,_e,tr){const rr=jsonObjectOrNull(_e);return rr===null?null:fromResource(er,rr,tr)}function downloadUrlFromResourceString(er,_e,tr,rr){const nr=jsonObjectOrNull(_e);if(nr===null||!isString(nr.downloadTokens))return null;const sr=nr.downloadTokens;if(sr.length===0)return null;const ir=encodeURIComponent;return sr.split(",").map(lr=>{const cr=er.bucket,Ar=er.fullPath,ur="/b/"+ir(cr)+"/o/"+ir(Ar),dr=makeUrl(ur,tr,rr),mr=makeQueryString({alt:"media",token:lr});return dr+mr})[0]}function toResourceString(er,_e){const tr={},rr=_e.length;for(let nr=0;nr<rr;nr++){const sr=_e[nr];sr.writable&&(tr[sr.server]=er[sr.local])}return JSON.stringify(tr)}class RequestInfo{constructor(_e,tr,rr,nr){this.url=_e,this.method=tr,this.handler=rr,this.timeout=nr,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function handlerCheck(er){if(!er)throw unknown()}function metadataHandler(er,_e){function tr(rr,nr){const sr=fromResourceString(er,nr,_e);return handlerCheck(sr!==null),sr}return tr}function downloadUrlHandler(er,_e){function tr(rr,nr){const sr=fromResourceString(er,nr,_e);return handlerCheck(sr!==null),downloadUrlFromResourceString(sr,nr,er.host,er._protocol)}return tr}function sharedErrorHandler(er){function _e(tr,rr){let nr;return tr.getStatus()===401?tr.getErrorText().includes("Firebase App Check token is invalid")?nr=unauthorizedApp():nr=unauthenticated():tr.getStatus()===402?nr=quotaExceeded(er.bucket):tr.getStatus()===403?nr=unauthorized(er.path):nr=rr,nr.status=tr.getStatus(),nr.serverResponse=rr.serverResponse,nr}return _e}function objectErrorHandler(er){const _e=sharedErrorHandler(er);function tr(rr,nr){let sr=_e(rr,nr);return rr.getStatus()===404&&(sr=objectNotFound(er.path)),sr.serverResponse=nr.serverResponse,sr}return tr}function getDownloadUrl(er,_e,tr){const rr=_e.fullServerUrl(),nr=makeUrl(rr,er.host,er._protocol),sr="GET",ir=er.maxOperationRetryTime,or=new RequestInfo(nr,sr,downloadUrlHandler(er,tr),ir);return or.errorHandler=objectErrorHandler(_e),or}function deleteObject$2(er,_e){const tr=_e.fullServerUrl(),rr=makeUrl(tr,er.host,er._protocol),nr="DELETE",sr=er.maxOperationRetryTime;function ir(ar,lr){}const or=new RequestInfo(rr,nr,ir,sr);return or.successCodes=[200,204],or.errorHandler=objectErrorHandler(_e),or}function determineContentType_(er,_e){return er&&er.contentType||_e&&_e.type()||"application/octet-stream"}function metadataForUpload_(er,_e,tr){const rr=Object.assign({},tr);return rr.fullPath=er.path,rr.size=_e.size(),rr.contentType||(rr.contentType=determineContentType_(null,_e)),rr}function multipartUpload(er,_e,tr,rr,nr){const sr=_e.bucketOnlyServerUrl(),ir={"X-Goog-Upload-Protocol":"multipart"};function or(){let Cr="";for(let Tr=0;Tr<2;Tr++)Cr=Cr+Math.random().toString().slice(2);return Cr}const ar=or();ir["Content-Type"]="multipart/related; boundary="+ar;const lr=metadataForUpload_(_e,rr,nr),cr=toResourceString(lr,tr),Ar="--"+ar+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+cr+`\r
--`+ar+`\r
Content-Type: `+lr.contentType+`\r
\r
`,ur=`\r
--`+ar+"--",dr=FbsBlob.getBlob(Ar,rr,ur);if(dr===null)throw cannotSliceBlob();const mr={name:lr.fullPath},pr=makeUrl(sr,er.host,er._protocol),yr="POST",hr=er.maxUploadRetryTime,gr=new RequestInfo(pr,yr,metadataHandler(er,tr),hr);return gr.urlParams=mr,gr.headers=ir,gr.body=dr.uploadData(),gr.errorHandler=sharedErrorHandler(_e),gr}class XhrConnection{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ErrorCode.NO_ERROR,this.sendPromise_=new Promise(_e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ErrorCode.ABORT,_e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ErrorCode.NETWORK_ERROR,_e()}),this.xhr_.addEventListener("load",()=>{_e()})})}send(_e,tr,rr,nr,sr){if(this.sent_)throw internalError("cannot .send() more than once");if(isCloudWorkstation(_e)&&rr&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(tr,_e,!0),sr!==void 0)for(const ir in sr)sr.hasOwnProperty(ir)&&this.xhr_.setRequestHeader(ir,sr[ir].toString());return nr!==void 0?this.xhr_.send(nr):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw internalError("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw internalError("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw internalError("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw internalError("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(_e){return this.xhr_.getResponseHeader(_e)}addUploadProgressListener(_e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",_e)}removeUploadProgressListener(_e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",_e)}}class XhrTextConnection extends XhrConnection{initXhr(){this.xhr_.responseType="text"}}function newTextConnection(){return new XhrTextConnection}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Reference{constructor(_e,tr){this._service=_e,tr instanceof Location?this._location=tr:this._location=Location.makeFromUrl(tr,_e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(_e,tr){return new Reference(_e,tr)}get root(){const _e=new Location(this._location.bucket,"");return this._newRef(this._service,_e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lastComponent(this._location.path)}get storage(){return this._service}get parent(){const _e=parent(this._location.path);if(_e===null)return null;const tr=new Location(this._location.bucket,_e);return new Reference(this._service,tr)}_throwIfRoot(_e){if(this._location.path==="")throw invalidRootOperation(_e)}}function uploadBytes$1(er,_e,tr){er._throwIfRoot("uploadBytes");const rr=multipartUpload(er.storage,er._location,getMappings(),new FbsBlob(_e,!0),tr);return er.storage.makeRequestWithTokens(rr,newTextConnection).then(nr=>({metadata:nr,ref:er}))}function getDownloadURL$1(er){er._throwIfRoot("getDownloadURL");const _e=getDownloadUrl(er.storage,er._location,getMappings());return er.storage.makeRequestWithTokens(_e,newTextConnection).then(tr=>{if(tr===null)throw noDownloadURL();return tr})}function deleteObject$1(er){er._throwIfRoot("deleteObject");const _e=deleteObject$2(er.storage,er._location);return er.storage.makeRequestWithTokens(_e,newTextConnection)}function _getChild$1(er,_e){const tr=child(er._location.path,_e),rr=new Location(er._location.bucket,tr);return new Reference(er.storage,rr)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isUrl(er){return/^[A-Za-z]+:\/\//.test(er)}function refFromURL(er,_e){return new Reference(er,_e)}function refFromPath(er,_e){if(er instanceof FirebaseStorageImpl){const tr=er;if(tr._bucket==null)throw noDefaultBucket();const rr=new Reference(tr,tr._bucket);return _e!=null?refFromPath(rr,_e):rr}else return _e!==void 0?_getChild$1(er,_e):er}function ref$1(er,_e){if(_e&&isUrl(_e)){if(er instanceof FirebaseStorageImpl)return refFromURL(er,_e);throw invalidArgument("To use ref(service, url), the first argument must be a Storage instance.")}else return refFromPath(er,_e)}function extractBucket(er,_e){const tr=_e==null?void 0:_e[CONFIG_STORAGE_BUCKET_KEY];return tr==null?null:Location.makeFromBucketSpec(tr,er)}function connectStorageEmulator$1(er,_e,tr,rr={}){er.host=`${_e}:${tr}`;const nr=isCloudWorkstation(_e);nr&&(pingServer(`https://${er.host}/b`),updateEmulatorBanner("Storage",!0)),er._isUsingEmulator=!0,er._protocol=nr?"https":"http";const{mockUserToken:sr}=rr;sr&&(er._overrideAuthToken=typeof sr=="string"?sr:createMockUserToken(sr,er.app.options.projectId))}class FirebaseStorageImpl{constructor(_e,tr,rr,nr,sr,ir=!1){this.app=_e,this._authProvider=tr,this._appCheckProvider=rr,this._url=nr,this._firebaseVersion=sr,this._isUsingEmulator=ir,this._bucket=null,this._host=DEFAULT_HOST,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DEFAULT_MAX_OPERATION_RETRY_TIME,this._maxUploadRetryTime=DEFAULT_MAX_UPLOAD_RETRY_TIME,this._requests=new Set,nr!=null?this._bucket=Location.makeFromBucketSpec(nr,this._host):this._bucket=extractBucket(this._host,this.app.options)}get host(){return this._host}set host(_e){this._host=_e,this._url!=null?this._bucket=Location.makeFromBucketSpec(this._url,_e):this._bucket=extractBucket(_e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(_e){validateNumber("time",0,Number.POSITIVE_INFINITY,_e),this._maxUploadRetryTime=_e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(_e){validateNumber("time",0,Number.POSITIVE_INFINITY,_e),this._maxOperationRetryTime=_e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const _e=this._authProvider.getImmediate({optional:!0});if(_e){const tr=await _e.getToken();if(tr!==null)return tr.accessToken}return null}async _getAppCheckToken(){if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const _e=this._appCheckProvider.getImmediate({optional:!0});return _e?(await _e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(_e=>_e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(_e){return new Reference(this,_e)}_makeRequest(_e,tr,rr,nr,sr=!0){if(this._deleted)return new FailRequest(appDeleted());{const ir=makeRequest(_e,this._appId,rr,nr,tr,this._firebaseVersion,sr,this._isUsingEmulator);return this._requests.add(ir),ir.getPromise().then(()=>this._requests.delete(ir),()=>this._requests.delete(ir)),ir}}async makeRequestWithTokens(_e,tr){const[rr,nr]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(_e,tr,rr,nr).getPromise()}}const name="@firebase/storage",version="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const STORAGE_TYPE="storage";function uploadBytes(er,_e,tr){return er=getModularInstance(er),uploadBytes$1(er,_e,tr)}function getDownloadURL(er){return er=getModularInstance(er),getDownloadURL$1(er)}function deleteObject(er){return er=getModularInstance(er),deleteObject$1(er)}function ref(er,_e){return er=getModularInstance(er),ref$1(er,_e)}function getStorage(er=getApp(),_e){er=getModularInstance(er);const rr=_getProvider(er,STORAGE_TYPE).getImmediate({identifier:_e}),nr=getDefaultEmulatorHostnameAndPort("storage");return nr&&connectStorageEmulator(rr,...nr),rr}function connectStorageEmulator(er,_e,tr,rr={}){connectStorageEmulator$1(er,_e,tr,rr)}function factory(er,{instanceIdentifier:_e}){const tr=er.getProvider("app").getImmediate(),rr=er.getProvider("auth-internal"),nr=er.getProvider("app-check-internal");return new FirebaseStorageImpl(tr,rr,nr,_e,SDK_VERSION)}function registerStorage(){_registerComponent(new Component(STORAGE_TYPE,factory,"PUBLIC").setMultipleInstances(!0)),registerVersion(name,version,""),registerVersion(name,version,"esm2017")}registerStorage();const firebaseConfig={apiKey:"AIzaSyAf3ak-5S-1ZhSGxKfPiMy2or-83dNFB5c",authDomain:"study-ai-12fcd.firebaseapp.com",projectId:"study-ai-12fcd",storageBucket:"study-ai-12fcd.firebasestorage.app",messagingSenderId:"747684597937",appId:"1:747684597937:web:9b815b9b649fdb1c751290",measurementId:"G-RGLEE1R25B"},app=initializeApp(firebaseConfig);getAnalytics(app);const auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(er={}){function _e(rr,nr){let{pathname:sr,search:ir,hash:or}=rr.location;return createLocation("",{pathname:sr,search:ir,hash:or},nr.state&&nr.state.usr||null,nr.state&&nr.state.key||"default")}function tr(rr,nr){return typeof nr=="string"?nr:createPath(nr)}return getUrlBasedHistory(_e,tr,null,er)}function invariant(er,_e){if(er===!1||er===null||typeof er>"u")throw new Error(_e)}function warning(er,_e){if(!er){typeof console<"u"&&console.warn(_e);try{throw new Error(_e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(er,_e){return{usr:er.state,key:er.key,idx:_e}}function createLocation(er,_e,tr=null,rr){return{pathname:typeof er=="string"?er:er.pathname,search:"",hash:"",...typeof _e=="string"?parsePath(_e):_e,state:tr,key:_e&&_e.key||rr||createKey()}}function createPath({pathname:er="/",search:_e="",hash:tr=""}){return _e&&_e!=="?"&&(er+=_e.charAt(0)==="?"?_e:"?"+_e),tr&&tr!=="#"&&(er+=tr.charAt(0)==="#"?tr:"#"+tr),er}function parsePath(er){let _e={};if(er){let tr=er.indexOf("#");tr>=0&&(_e.hash=er.substring(tr),er=er.substring(0,tr));let rr=er.indexOf("?");rr>=0&&(_e.search=er.substring(rr),er=er.substring(0,rr)),er&&(_e.pathname=er)}return _e}function getUrlBasedHistory(er,_e,tr,rr={}){let{window:nr=document.defaultView,v5Compat:sr=!1}=rr,ir=nr.history,or="POP",ar=null,lr=cr();lr==null&&(lr=0,ir.replaceState({...ir.state,idx:lr},""));function cr(){return(ir.state||{idx:null}).idx}function Ar(){or="POP";let yr=cr(),hr=yr==null?null:yr-lr;lr=yr,ar&&ar({action:or,location:pr.location,delta:hr})}function ur(yr,hr){or="PUSH";let gr=createLocation(pr.location,yr,hr);lr=cr()+1;let Cr=getHistoryState(gr,lr),Tr=pr.createHref(gr);try{ir.pushState(Cr,"",Tr)}catch(Sr){if(Sr instanceof DOMException&&Sr.name==="DataCloneError")throw Sr;nr.location.assign(Tr)}sr&&ar&&ar({action:or,location:pr.location,delta:1})}function dr(yr,hr){or="REPLACE";let gr=createLocation(pr.location,yr,hr);lr=cr();let Cr=getHistoryState(gr,lr),Tr=pr.createHref(gr);ir.replaceState(Cr,"",Tr),sr&&ar&&ar({action:or,location:pr.location,delta:0})}function mr(yr){return createBrowserURLImpl(yr)}let pr={get action(){return or},get location(){return er(nr,ir)},listen(yr){if(ar)throw new Error("A history only accepts one active listener");return nr.addEventListener(PopStateEventType,Ar),ar=yr,()=>{nr.removeEventListener(PopStateEventType,Ar),ar=null}},createHref(yr){return _e(nr,yr)},createURL:mr,encodeLocation(yr){let hr=mr(yr);return{pathname:hr.pathname,search:hr.search,hash:hr.hash}},push:ur,replace:dr,go(yr){return ir.go(yr)}};return pr}function createBrowserURLImpl(er,_e=!1){let tr="http://localhost";typeof window<"u"&&(tr=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(tr,"No window.location.(origin|href) available to create URL");let rr=typeof er=="string"?er:createPath(er);return rr=rr.replace(/ $/,"%20"),!_e&&rr.startsWith("//")&&(rr=tr+rr),new URL(rr,tr)}function matchRoutes(er,_e,tr="/"){return matchRoutesImpl(er,_e,tr,!1)}function matchRoutesImpl(er,_e,tr,rr){let nr=typeof _e=="string"?parsePath(_e):_e,sr=stripBasename(nr.pathname||"/",tr);if(sr==null)return null;let ir=flattenRoutes(er);rankRouteBranches(ir);let or=null;for(let ar=0;or==null&&ar<ir.length;++ar){let lr=decodePath(sr);or=matchRouteBranch(ir[ar],lr,rr)}return or}function flattenRoutes(er,_e=[],tr=[],rr=""){let nr=(sr,ir,or)=>{let ar={relativePath:or===void 0?sr.path||"":or,caseSensitive:sr.caseSensitive===!0,childrenIndex:ir,route:sr};ar.relativePath.startsWith("/")&&(invariant(ar.relativePath.startsWith(rr),`Absolute route path "${ar.relativePath}" nested under path "${rr}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),ar.relativePath=ar.relativePath.slice(rr.length));let lr=joinPaths([rr,ar.relativePath]),cr=tr.concat(ar);sr.children&&sr.children.length>0&&(invariant(sr.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${lr}".`),flattenRoutes(sr.children,_e,cr,lr)),!(sr.path==null&&!sr.index)&&_e.push({path:lr,score:computeScore(lr,sr.index),routesMeta:cr})};return er.forEach((sr,ir)=>{var or;if(sr.path===""||!((or=sr.path)!=null&&or.includes("?")))nr(sr,ir);else for(let ar of explodeOptionalSegments(sr.path))nr(sr,ir,ar)}),_e}function explodeOptionalSegments(er){let _e=er.split("/");if(_e.length===0)return[];let[tr,...rr]=_e,nr=tr.endsWith("?"),sr=tr.replace(/\?$/,"");if(rr.length===0)return nr?[sr,""]:[sr];let ir=explodeOptionalSegments(rr.join("/")),or=[];return or.push(...ir.map(ar=>ar===""?sr:[sr,ar].join("/"))),nr&&or.push(...ir),or.map(ar=>er.startsWith("/")&&ar===""?"/":ar)}function rankRouteBranches(er){er.sort((_e,tr)=>_e.score!==tr.score?tr.score-_e.score:compareIndexes(_e.routesMeta.map(rr=>rr.childrenIndex),tr.routesMeta.map(rr=>rr.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=er=>er==="*";function computeScore(er,_e){let tr=er.split("/"),rr=tr.length;return tr.some(isSplat)&&(rr+=splatPenalty),_e&&(rr+=indexRouteValue),tr.filter(nr=>!isSplat(nr)).reduce((nr,sr)=>nr+(paramRe.test(sr)?dynamicSegmentValue:sr===""?emptySegmentValue:staticSegmentValue),rr)}function compareIndexes(er,_e){return er.length===_e.length&&er.slice(0,-1).every((rr,nr)=>rr===_e[nr])?er[er.length-1]-_e[_e.length-1]:0}function matchRouteBranch(er,_e,tr=!1){let{routesMeta:rr}=er,nr={},sr="/",ir=[];for(let or=0;or<rr.length;++or){let ar=rr[or],lr=or===rr.length-1,cr=sr==="/"?_e:_e.slice(sr.length)||"/",Ar=matchPath({path:ar.relativePath,caseSensitive:ar.caseSensitive,end:lr},cr),ur=ar.route;if(!Ar&&lr&&tr&&!rr[rr.length-1].route.index&&(Ar=matchPath({path:ar.relativePath,caseSensitive:ar.caseSensitive,end:!1},cr)),!Ar)return null;Object.assign(nr,Ar.params),ir.push({params:nr,pathname:joinPaths([sr,Ar.pathname]),pathnameBase:normalizePathname(joinPaths([sr,Ar.pathnameBase])),route:ur}),Ar.pathnameBase!=="/"&&(sr=joinPaths([sr,Ar.pathnameBase]))}return ir}function matchPath(er,_e){typeof er=="string"&&(er={path:er,caseSensitive:!1,end:!0});let[tr,rr]=compilePath(er.path,er.caseSensitive,er.end),nr=_e.match(tr);if(!nr)return null;let sr=nr[0],ir=sr.replace(/(.)\/+$/,"$1"),or=nr.slice(1);return{params:rr.reduce((lr,{paramName:cr,isOptional:Ar},ur)=>{if(cr==="*"){let mr=or[ur]||"";ir=sr.slice(0,sr.length-mr.length).replace(/(.)\/+$/,"$1")}const dr=or[ur];return Ar&&!dr?lr[cr]=void 0:lr[cr]=(dr||"").replace(/%2F/g,"/"),lr},{}),pathname:sr,pathnameBase:ir,pattern:er}}function compilePath(er,_e=!1,tr=!0){warning(er==="*"||!er.endsWith("*")||er.endsWith("/*"),`Route path "${er}" will be treated as if it were "${er.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${er.replace(/\*$/,"/*")}".`);let rr=[],nr="^"+er.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(ir,or,ar)=>(rr.push({paramName:or,isOptional:ar!=null}),ar?"/?([^\\/]+)?":"/([^\\/]+)"));return er.endsWith("*")?(rr.push({paramName:"*"}),nr+=er==="*"||er==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):tr?nr+="\\/*$":er!==""&&er!=="/"&&(nr+="(?:(?=\\/|$))"),[new RegExp(nr,_e?void 0:"i"),rr]}function decodePath(er){try{return er.split("/").map(_e=>decodeURIComponent(_e).replace(/\//g,"%2F")).join("/")}catch(_e){return warning(!1,`The URL path "${er}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${_e}).`),er}}function stripBasename(er,_e){if(_e==="/")return er;if(!er.toLowerCase().startsWith(_e.toLowerCase()))return null;let tr=_e.endsWith("/")?_e.length-1:_e.length,rr=er.charAt(tr);return rr&&rr!=="/"?null:er.slice(tr)||"/"}function resolvePath(er,_e="/"){let{pathname:tr,search:rr="",hash:nr=""}=typeof er=="string"?parsePath(er):er;return{pathname:tr?tr.startsWith("/")?tr:resolvePathname(tr,_e):_e,search:normalizeSearch(rr),hash:normalizeHash(nr)}}function resolvePathname(er,_e){let tr=_e.replace(/\/+$/,"").split("/");return er.split("/").forEach(nr=>{nr===".."?tr.length>1&&tr.pop():nr!=="."&&tr.push(nr)}),tr.length>1?tr.join("/"):"/"}function getInvalidPathError(er,_e,tr,rr){return`Cannot include a '${er}' character in a manually specified \`to.${_e}\` field [${JSON.stringify(rr)}].  Please separate it out to the \`to.${tr}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(er){return er.filter((_e,tr)=>tr===0||_e.route.path&&_e.route.path.length>0)}function getResolveToMatches(er){let _e=getPathContributingMatches(er);return _e.map((tr,rr)=>rr===_e.length-1?tr.pathname:tr.pathnameBase)}function resolveTo(er,_e,tr,rr=!1){let nr;typeof er=="string"?nr=parsePath(er):(nr={...er},invariant(!nr.pathname||!nr.pathname.includes("?"),getInvalidPathError("?","pathname","search",nr)),invariant(!nr.pathname||!nr.pathname.includes("#"),getInvalidPathError("#","pathname","hash",nr)),invariant(!nr.search||!nr.search.includes("#"),getInvalidPathError("#","search","hash",nr)));let sr=er===""||nr.pathname==="",ir=sr?"/":nr.pathname,or;if(ir==null)or=tr;else{let Ar=_e.length-1;if(!rr&&ir.startsWith("..")){let ur=ir.split("/");for(;ur[0]==="..";)ur.shift(),Ar-=1;nr.pathname=ur.join("/")}or=Ar>=0?_e[Ar]:"/"}let ar=resolvePath(nr,or),lr=ir&&ir!=="/"&&ir.endsWith("/"),cr=(sr||ir===".")&&tr.endsWith("/");return!ar.pathname.endsWith("/")&&(lr||cr)&&(ar.pathname+="/"),ar}var joinPaths=er=>er.join("/").replace(/\/\/+/g,"/"),normalizePathname=er=>er.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=er=>!er||er==="?"?"":er.startsWith("?")?er:"?"+er,normalizeHash=er=>!er||er==="#"?"":er.startsWith("#")?er:"#"+er;function isRouteErrorResponse(er){return er!=null&&typeof er.status=="number"&&typeof er.statusText=="string"&&typeof er.internal=="boolean"&&"data"in er}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(er,{relative:_e}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:tr,navigator:rr}=reactExports.useContext(NavigationContext),{hash:nr,pathname:sr,search:ir}=useResolvedPath(er,{relative:_e}),or=sr;return tr!=="/"&&(or=sr==="/"?tr:joinPaths([tr,sr])),rr.createHref({pathname:or,search:ir,hash:nr})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(er){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(er)}function useNavigate(){let{isDataRoute:er}=reactExports.useContext(RouteContext);return er?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let er=reactExports.useContext(DataRouterContext),{basename:_e,navigator:tr}=reactExports.useContext(NavigationContext),{matches:rr}=reactExports.useContext(RouteContext),{pathname:nr}=useLocation(),sr=JSON.stringify(getResolveToMatches(rr)),ir=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{ir.current=!0}),reactExports.useCallback((ar,lr={})=>{if(warning(ir.current,navigateEffectWarning),!ir.current)return;if(typeof ar=="number"){tr.go(ar);return}let cr=resolveTo(ar,JSON.parse(sr),nr,lr.relative==="path");er==null&&_e!=="/"&&(cr.pathname=cr.pathname==="/"?_e:joinPaths([_e,cr.pathname])),(lr.replace?tr.replace:tr.push)(cr,lr.state,lr)},[_e,tr,sr,nr,er])}reactExports.createContext(null);function useResolvedPath(er,{relative:_e}={}){let{matches:tr}=reactExports.useContext(RouteContext),{pathname:rr}=useLocation(),nr=JSON.stringify(getResolveToMatches(tr));return reactExports.useMemo(()=>resolveTo(er,JSON.parse(nr),rr,_e==="path"),[er,nr,rr,_e])}function useRoutes(er,_e){return useRoutesImpl(er,_e)}function useRoutesImpl(er,_e,tr,rr){var hr;invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:nr}=reactExports.useContext(NavigationContext),{matches:sr}=reactExports.useContext(RouteContext),ir=sr[sr.length-1],or=ir?ir.params:{},ar=ir?ir.pathname:"/",lr=ir?ir.pathnameBase:"/",cr=ir&&ir.route;{let gr=cr&&cr.path||"";warningOnce(ar,!cr||gr.endsWith("*")||gr.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${ar}" (under <Route path="${gr}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${gr}"> to <Route path="${gr==="/"?"*":`${gr}/*`}">.`)}let Ar=useLocation(),ur;if(_e){let gr=typeof _e=="string"?parsePath(_e):_e;invariant(lr==="/"||((hr=gr.pathname)==null?void 0:hr.startsWith(lr)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${lr}" but pathname "${gr.pathname}" was given in the \`location\` prop.`),ur=gr}else ur=Ar;let dr=ur.pathname||"/",mr=dr;if(lr!=="/"){let gr=lr.replace(/^\//,"").split("/");mr="/"+dr.replace(/^\//,"").split("/").slice(gr.length).join("/")}let pr=matchRoutes(er,{pathname:mr});warning(cr||pr!=null,`No routes matched location "${ur.pathname}${ur.search}${ur.hash}" `),warning(pr==null||pr[pr.length-1].route.element!==void 0||pr[pr.length-1].route.Component!==void 0||pr[pr.length-1].route.lazy!==void 0,`Matched leaf route at location "${ur.pathname}${ur.search}${ur.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let yr=_renderMatches(pr&&pr.map(gr=>Object.assign({},gr,{params:Object.assign({},or,gr.params),pathname:joinPaths([lr,nr.encodeLocation?nr.encodeLocation(gr.pathname).pathname:gr.pathname]),pathnameBase:gr.pathnameBase==="/"?lr:joinPaths([lr,nr.encodeLocation?nr.encodeLocation(gr.pathnameBase).pathname:gr.pathnameBase])})),sr,tr,rr);return _e&&yr?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...ur},navigationType:"POP"}},yr):yr}function DefaultErrorComponent(){let er=useRouteError(),_e=isRouteErrorResponse(er)?`${er.status} ${er.statusText}`:er instanceof Error?er.message:JSON.stringify(er),tr=er instanceof Error?er.stack:null,rr="rgba(200,200,200, 0.5)",nr={padding:"0.5rem",backgroundColor:rr},sr={padding:"2px 4px",backgroundColor:rr},ir=null;return console.error("Error handled by React Router default ErrorBoundary:",er),ir=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:sr},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:sr},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},_e),tr?reactExports.createElement("pre",{style:nr},tr):null,ir)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(er){super(er),this.state={location:er.location,revalidation:er.revalidation,error:er.error}}static getDerivedStateFromError(er){return{error:er}}static getDerivedStateFromProps(er,_e){return _e.location!==er.location||_e.revalidation!=="idle"&&er.revalidation==="idle"?{error:er.error,location:er.location,revalidation:er.revalidation}:{error:er.error!==void 0?er.error:_e.error,location:_e.location,revalidation:er.revalidation||_e.revalidation}}componentDidCatch(er,_e){console.error("React Router caught the following error during render",er,_e)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:er,match:_e,children:tr}){let rr=reactExports.useContext(DataRouterContext);return rr&&rr.static&&rr.staticContext&&(_e.route.errorElement||_e.route.ErrorBoundary)&&(rr.staticContext._deepestRenderedBoundaryId=_e.route.id),reactExports.createElement(RouteContext.Provider,{value:er},tr)}function _renderMatches(er,_e=[],tr=null,rr=null){if(er==null){if(!tr)return null;if(tr.errors)er=tr.matches;else if(_e.length===0&&!tr.initialized&&tr.matches.length>0)er=tr.matches;else return null}let nr=er,sr=tr==null?void 0:tr.errors;if(sr!=null){let ar=nr.findIndex(lr=>lr.route.id&&(sr==null?void 0:sr[lr.route.id])!==void 0);invariant(ar>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(sr).join(",")}`),nr=nr.slice(0,Math.min(nr.length,ar+1))}let ir=!1,or=-1;if(tr)for(let ar=0;ar<nr.length;ar++){let lr=nr[ar];if((lr.route.HydrateFallback||lr.route.hydrateFallbackElement)&&(or=ar),lr.route.id){let{loaderData:cr,errors:Ar}=tr,ur=lr.route.loader&&!cr.hasOwnProperty(lr.route.id)&&(!Ar||Ar[lr.route.id]===void 0);if(lr.route.lazy||ur){ir=!0,or>=0?nr=nr.slice(0,or+1):nr=[nr[0]];break}}}return nr.reduceRight((ar,lr,cr)=>{let Ar,ur=!1,dr=null,mr=null;tr&&(Ar=sr&&lr.route.id?sr[lr.route.id]:void 0,dr=lr.route.errorElement||defaultErrorElement,ir&&(or<0&&cr===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),ur=!0,mr=null):or===cr&&(ur=!0,mr=lr.route.hydrateFallbackElement||null)));let pr=_e.concat(nr.slice(0,cr+1)),yr=()=>{let hr;return Ar?hr=dr:ur?hr=mr:lr.route.Component?hr=reactExports.createElement(lr.route.Component,null):lr.route.element?hr=lr.route.element:hr=ar,reactExports.createElement(RenderedRoute,{match:lr,routeContext:{outlet:ar,matches:pr,isDataRoute:tr!=null},children:hr})};return tr&&(lr.route.ErrorBoundary||lr.route.errorElement||cr===0)?reactExports.createElement(RenderErrorBoundary,{location:tr.location,revalidation:tr.revalidation,component:dr,error:Ar,children:yr(),routeContext:{outlet:null,matches:pr,isDataRoute:!0}}):yr()},null)}function getDataRouterConsoleError(er){return`${er} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(er){let _e=reactExports.useContext(DataRouterContext);return invariant(_e,getDataRouterConsoleError(er)),_e}function useDataRouterState(er){let _e=reactExports.useContext(DataRouterStateContext);return invariant(_e,getDataRouterConsoleError(er)),_e}function useRouteContext(er){let _e=reactExports.useContext(RouteContext);return invariant(_e,getDataRouterConsoleError(er)),_e}function useCurrentRouteId(er){let _e=useRouteContext(er),tr=_e.matches[_e.matches.length-1];return invariant(tr.route.id,`${er} can only be used on routes that contain a unique "id"`),tr.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var rr;let er=reactExports.useContext(RouteErrorContext),_e=useDataRouterState("useRouteError"),tr=useCurrentRouteId("useRouteError");return er!==void 0?er:(rr=_e.errors)==null?void 0:rr[tr]}function useNavigateStable(){let{router:er}=useDataRouterContext("useNavigate"),_e=useCurrentRouteId("useNavigate"),tr=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{tr.current=!0}),reactExports.useCallback(async(nr,sr={})=>{warning(tr.current,navigateEffectWarning),tr.current&&(typeof nr=="number"?er.navigate(nr):await er.navigate(nr,{fromRouteId:_e,...sr}))},[er,_e])}var alreadyWarned={};function warningOnce(er,_e,tr){!_e&&!alreadyWarned[er]&&(alreadyWarned[er]=!0,warning(!1,tr))}reactExports.memo(DataRoutes);function DataRoutes({routes:er,future:_e,state:tr}){return useRoutesImpl(er,void 0,tr,_e)}function Navigate({to:er,replace:_e,state:tr,relative:rr}){invariant(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:nr}=reactExports.useContext(NavigationContext);warning(!nr,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:sr}=reactExports.useContext(RouteContext),{pathname:ir}=useLocation(),or=useNavigate(),ar=resolveTo(er,getResolveToMatches(sr),ir,rr==="path"),lr=JSON.stringify(ar);return reactExports.useEffect(()=>{or(JSON.parse(lr),{replace:_e,state:tr,relative:rr})},[or,lr,rr,_e,tr]),null}function Route(er){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:er="/",children:_e=null,location:tr,navigationType:rr="POP",navigator:nr,static:sr=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let ir=er.replace(/^\/*/,"/"),or=reactExports.useMemo(()=>({basename:ir,navigator:nr,static:sr,future:{}}),[ir,nr,sr]);typeof tr=="string"&&(tr=parsePath(tr));let{pathname:ar="/",search:lr="",hash:cr="",state:Ar=null,key:ur="default"}=tr,dr=reactExports.useMemo(()=>{let mr=stripBasename(ar,ir);return mr==null?null:{location:{pathname:mr,search:lr,hash:cr,state:Ar,key:ur},navigationType:rr}},[ir,ar,lr,cr,Ar,ur,rr]);return warning(dr!=null,`<Router basename="${ir}"> is not able to match the URL "${ar}${lr}${cr}" because it does not start with the basename, so the <Router> won't render anything.`),dr==null?null:reactExports.createElement(NavigationContext.Provider,{value:or},reactExports.createElement(LocationContext.Provider,{children:_e,value:dr}))}function Routes({children:er,location:_e}){return useRoutes(createRoutesFromChildren(er),_e)}function createRoutesFromChildren(er,_e=[]){let tr=[];return reactExports.Children.forEach(er,(rr,nr)=>{if(!reactExports.isValidElement(rr))return;let sr=[..._e,nr];if(rr.type===reactExports.Fragment){tr.push.apply(tr,createRoutesFromChildren(rr.props.children,sr));return}invariant(rr.type===Route,`[${typeof rr.type=="string"?rr.type:rr.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!rr.props.index||!rr.props.children,"An index route cannot have child routes.");let ir={id:rr.props.id||sr.join("-"),caseSensitive:rr.props.caseSensitive,element:rr.props.element,Component:rr.props.Component,index:rr.props.index,path:rr.props.path,loader:rr.props.loader,action:rr.props.action,hydrateFallbackElement:rr.props.hydrateFallbackElement,HydrateFallback:rr.props.HydrateFallback,errorElement:rr.props.errorElement,ErrorBoundary:rr.props.ErrorBoundary,hasErrorBoundary:rr.props.hasErrorBoundary===!0||rr.props.ErrorBoundary!=null||rr.props.errorElement!=null,shouldRevalidate:rr.props.shouldRevalidate,handle:rr.props.handle,lazy:rr.props.lazy};rr.props.children&&(ir.children=createRoutesFromChildren(rr.props.children,sr)),tr.push(ir)}),tr}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(er){return er!=null&&typeof er.tagName=="string"}function isButtonElement(er){return isHtmlElement(er)&&er.tagName.toLowerCase()==="button"}function isFormElement(er){return isHtmlElement(er)&&er.tagName.toLowerCase()==="form"}function isInputElement$1(er){return isHtmlElement(er)&&er.tagName.toLowerCase()==="input"}function isModifiedEvent(er){return!!(er.metaKey||er.altKey||er.ctrlKey||er.shiftKey)}function shouldProcessLinkClick(er,_e){return er.button===0&&(!_e||_e==="_self")&&!isModifiedEvent(er)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(er){return er!=null&&!supportedFormEncTypes.has(er)?(warning(!1,`"${er}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):er}function getFormSubmissionInfo(er,_e){let tr,rr,nr,sr,ir;if(isFormElement(er)){let or=er.getAttribute("action");rr=or?stripBasename(or,_e):null,tr=er.getAttribute("method")||defaultMethod,nr=getFormEncType(er.getAttribute("enctype"))||defaultEncType,sr=new FormData(er)}else if(isButtonElement(er)||isInputElement$1(er)&&(er.type==="submit"||er.type==="image")){let or=er.form;if(or==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let ar=er.getAttribute("formaction")||or.getAttribute("action");if(rr=ar?stripBasename(ar,_e):null,tr=er.getAttribute("formmethod")||or.getAttribute("method")||defaultMethod,nr=getFormEncType(er.getAttribute("formenctype"))||getFormEncType(or.getAttribute("enctype"))||defaultEncType,sr=new FormData(or,er),!isFormDataSubmitterSupported()){let{name:lr,type:cr,value:Ar}=er;if(cr==="image"){let ur=lr?`${lr}.`:"";sr.append(`${ur}x`,"0"),sr.append(`${ur}y`,"0")}else lr&&sr.append(lr,Ar)}}else{if(isHtmlElement(er))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');tr=defaultMethod,rr=null,nr=defaultEncType,ir=er}return sr&&nr==="text/plain"&&(ir=sr,sr=void 0),{action:rr,method:tr.toLowerCase(),encType:nr,formData:sr,body:ir}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(er,_e){if(er===!1||er===null||typeof er>"u")throw new Error(_e)}function singleFetchUrl(er,_e,tr){let rr=typeof er=="string"?new URL(er,typeof window>"u"?"server://singlefetch/":window.location.origin):er;return rr.pathname==="/"?rr.pathname=`_root.${tr}`:_e&&stripBasename(rr.pathname,_e)==="/"?rr.pathname=`${_e.replace(/\/$/,"")}/_root.${tr}`:rr.pathname=`${rr.pathname.replace(/\/$/,"")}.${tr}`,rr}async function loadRouteModule(er,_e){if(er.id in _e)return _e[er.id];try{let tr=await import(er.module);return _e[er.id]=tr,tr}catch(tr){return console.error(`Error loading route module \`${er.module}\`, reloading page...`),console.error(tr),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(er){return er==null?!1:er.href==null?er.rel==="preload"&&typeof er.imageSrcSet=="string"&&typeof er.imageSizes=="string":typeof er.rel=="string"&&typeof er.href=="string"}async function getKeyedPrefetchLinks(er,_e,tr){let rr=await Promise.all(er.map(async nr=>{let sr=_e.routes[nr.route.id];if(sr){let ir=await loadRouteModule(sr,tr);return ir.links?ir.links():[]}return[]}));return dedupeLinkDescriptors(rr.flat(1).filter(isHtmlLinkDescriptor).filter(nr=>nr.rel==="stylesheet"||nr.rel==="preload").map(nr=>nr.rel==="stylesheet"?{...nr,rel:"prefetch",as:"style"}:{...nr,rel:"prefetch"}))}function getNewMatchesForLinks(er,_e,tr,rr,nr,sr){let ir=(ar,lr)=>tr[lr]?ar.route.id!==tr[lr].route.id:!0,or=(ar,lr)=>{var cr;return tr[lr].pathname!==ar.pathname||((cr=tr[lr].route.path)==null?void 0:cr.endsWith("*"))&&tr[lr].params["*"]!==ar.params["*"]};return sr==="assets"?_e.filter((ar,lr)=>ir(ar,lr)||or(ar,lr)):sr==="data"?_e.filter((ar,lr)=>{var Ar;let cr=rr.routes[ar.route.id];if(!cr||!cr.hasLoader)return!1;if(ir(ar,lr)||or(ar,lr))return!0;if(ar.route.shouldRevalidate){let ur=ar.route.shouldRevalidate({currentUrl:new URL(nr.pathname+nr.search+nr.hash,window.origin),currentParams:((Ar=tr[0])==null?void 0:Ar.params)||{},nextUrl:new URL(er,window.origin),nextParams:ar.params,defaultShouldRevalidate:!0});if(typeof ur=="boolean")return ur}return!0}):[]}function getModuleLinkHrefs(er,_e,{includeHydrateFallback:tr}={}){return dedupeHrefs(er.map(rr=>{let nr=_e.routes[rr.route.id];if(!nr)return[];let sr=[nr.module];return nr.clientActionModule&&(sr=sr.concat(nr.clientActionModule)),nr.clientLoaderModule&&(sr=sr.concat(nr.clientLoaderModule)),tr&&nr.hydrateFallbackModule&&(sr=sr.concat(nr.hydrateFallbackModule)),nr.imports&&(sr=sr.concat(nr.imports)),sr}).flat(1))}function dedupeHrefs(er){return[...new Set(er)]}function sortKeys(er){let _e={},tr=Object.keys(er).sort();for(let rr of tr)_e[rr]=er[rr];return _e}function dedupeLinkDescriptors(er,_e){let tr=new Set;return new Set(_e),er.reduce((rr,nr)=>{let sr=JSON.stringify(sortKeys(nr));return tr.has(sr)||(tr.add(sr),rr.push({key:sr,link:nr})),rr},[])}function useDataRouterContext2(){let er=reactExports.useContext(DataRouterContext);return invariant2(er,"You must render this element inside a <DataRouterContext.Provider> element"),er}function useDataRouterStateContext(){let er=reactExports.useContext(DataRouterStateContext);return invariant2(er,"You must render this element inside a <DataRouterStateContext.Provider> element"),er}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let er=reactExports.useContext(FrameworkContext);return invariant2(er,"You must render this element inside a <HydratedRouter> element"),er}function usePrefetchBehavior(er,_e){let tr=reactExports.useContext(FrameworkContext),[rr,nr]=reactExports.useState(!1),[sr,ir]=reactExports.useState(!1),{onFocus:or,onBlur:ar,onMouseEnter:lr,onMouseLeave:cr,onTouchStart:Ar}=_e,ur=reactExports.useRef(null);reactExports.useEffect(()=>{if(er==="render"&&ir(!0),er==="viewport"){let pr=hr=>{hr.forEach(gr=>{ir(gr.isIntersecting)})},yr=new IntersectionObserver(pr,{threshold:.5});return ur.current&&yr.observe(ur.current),()=>{yr.disconnect()}}},[er]),reactExports.useEffect(()=>{if(rr){let pr=setTimeout(()=>{ir(!0)},100);return()=>{clearTimeout(pr)}}},[rr]);let dr=()=>{nr(!0)},mr=()=>{nr(!1),ir(!1)};return tr?er!=="intent"?[sr,ur,{}]:[sr,ur,{onFocus:composeEventHandlers(or,dr),onBlur:composeEventHandlers(ar,mr),onMouseEnter:composeEventHandlers(lr,dr),onMouseLeave:composeEventHandlers(cr,mr),onTouchStart:composeEventHandlers(Ar,dr)}]:[!1,ur,{}]}function composeEventHandlers(er,_e){return tr=>{er&&er(tr),tr.defaultPrevented||_e(tr)}}function PrefetchPageLinks({page:er,..._e}){let{router:tr}=useDataRouterContext2(),rr=reactExports.useMemo(()=>matchRoutes(tr.routes,er,tr.basename),[tr.routes,er,tr.basename]);return rr?reactExports.createElement(PrefetchPageLinksImpl,{page:er,matches:rr,..._e}):null}function useKeyedPrefetchLinks(er){let{manifest:_e,routeModules:tr}=useFrameworkContext(),[rr,nr]=reactExports.useState([]);return reactExports.useEffect(()=>{let sr=!1;return getKeyedPrefetchLinks(er,_e,tr).then(ir=>{sr||nr(ir)}),()=>{sr=!0}},[er,_e,tr]),rr}function PrefetchPageLinksImpl({page:er,matches:_e,...tr}){let rr=useLocation(),{manifest:nr,routeModules:sr}=useFrameworkContext(),{basename:ir}=useDataRouterContext2(),{loaderData:or,matches:ar}=useDataRouterStateContext(),lr=reactExports.useMemo(()=>getNewMatchesForLinks(er,_e,ar,nr,rr,"data"),[er,_e,ar,nr,rr]),cr=reactExports.useMemo(()=>getNewMatchesForLinks(er,_e,ar,nr,rr,"assets"),[er,_e,ar,nr,rr]),Ar=reactExports.useMemo(()=>{if(er===rr.pathname+rr.search+rr.hash)return[];let mr=new Set,pr=!1;if(_e.forEach(hr=>{var Cr;let gr=nr.routes[hr.route.id];!gr||!gr.hasLoader||(!lr.some(Tr=>Tr.route.id===hr.route.id)&&hr.route.id in or&&((Cr=sr[hr.route.id])!=null&&Cr.shouldRevalidate)||gr.hasClientLoader?pr=!0:mr.add(hr.route.id))}),mr.size===0)return[];let yr=singleFetchUrl(er,ir,"data");return pr&&mr.size>0&&yr.searchParams.set("_routes",_e.filter(hr=>mr.has(hr.route.id)).map(hr=>hr.route.id).join(",")),[yr.pathname+yr.search]},[ir,or,rr,nr,lr,_e,er,sr]),ur=reactExports.useMemo(()=>getModuleLinkHrefs(cr,nr),[cr,nr]),dr=useKeyedPrefetchLinks(cr);return reactExports.createElement(reactExports.Fragment,null,Ar.map(mr=>reactExports.createElement("link",{key:mr,rel:"prefetch",as:"fetch",href:mr,...tr})),ur.map(mr=>reactExports.createElement("link",{key:mr,rel:"modulepreload",href:mr,...tr})),dr.map(({key:mr,link:pr})=>reactExports.createElement("link",{key:mr,...pr})))}function mergeRefs(...er){return _e=>{er.forEach(tr=>{typeof tr=="function"?tr(_e):tr!=null&&(tr.current=_e)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.7.1")}catch{}function BrowserRouter({basename:er,children:_e,window:tr}){let rr=reactExports.useRef();rr.current==null&&(rr.current=createBrowserHistory({window:tr,v5Compat:!0}));let nr=rr.current,[sr,ir]=reactExports.useState({action:nr.action,location:nr.location}),or=reactExports.useCallback(ar=>{reactExports.startTransition(()=>ir(ar))},[ir]);return reactExports.useLayoutEffect(()=>nr.listen(or),[nr,or]),reactExports.createElement(Router,{basename:er,children:_e,location:sr.location,navigationType:sr.action,navigator:nr})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:_e,discover:tr="render",prefetch:rr="none",relative:nr,reloadDocument:sr,replace:ir,state:or,target:ar,to:lr,preventScrollReset:cr,viewTransition:Ar,...ur},dr){let{basename:mr}=reactExports.useContext(NavigationContext),pr=typeof lr=="string"&&ABSOLUTE_URL_REGEX2.test(lr),yr,hr=!1;if(typeof lr=="string"&&pr&&(yr=lr,isBrowser))try{let br=new URL(window.location.href),Pr=lr.startsWith("//")?new URL(br.protocol+lr):new URL(lr),Er=stripBasename(Pr.pathname,mr);Pr.origin===br.origin&&Er!=null?lr=Er+Pr.search+Pr.hash:hr=!0}catch{warning(!1,`<Link to="${lr}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let gr=useHref(lr,{relative:nr}),[Cr,Tr,Sr]=usePrefetchBehavior(rr,ur),Nr=useLinkClickHandler(lr,{replace:ir,state:or,target:ar,preventScrollReset:cr,relative:nr,viewTransition:Ar});function _r(br){_e&&_e(br),br.defaultPrevented||Nr(br)}let vr=reactExports.createElement("a",{...ur,...Sr,href:yr||gr,onClick:hr||sr?_e:_r,ref:mergeRefs(dr,Tr),target:ar,"data-discover":!pr&&tr==="render"?"true":void 0});return Cr&&!pr?reactExports.createElement(reactExports.Fragment,null,vr,reactExports.createElement(PrefetchPageLinks,{page:gr})):vr});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":_e="page",caseSensitive:tr=!1,className:rr="",end:nr=!1,style:sr,to:ir,viewTransition:or,children:ar,...lr},cr){let Ar=useResolvedPath(ir,{relative:lr.relative}),ur=useLocation(),dr=reactExports.useContext(DataRouterStateContext),{navigator:mr,basename:pr}=reactExports.useContext(NavigationContext),yr=dr!=null&&useViewTransitionState(Ar)&&or===!0,hr=mr.encodeLocation?mr.encodeLocation(Ar).pathname:Ar.pathname,gr=ur.pathname,Cr=dr&&dr.navigation&&dr.navigation.location?dr.navigation.location.pathname:null;tr||(gr=gr.toLowerCase(),Cr=Cr?Cr.toLowerCase():null,hr=hr.toLowerCase()),Cr&&pr&&(Cr=stripBasename(Cr,pr)||Cr);const Tr=hr!=="/"&&hr.endsWith("/")?hr.length-1:hr.length;let Sr=gr===hr||!nr&&gr.startsWith(hr)&&gr.charAt(Tr)==="/",Nr=Cr!=null&&(Cr===hr||!nr&&Cr.startsWith(hr)&&Cr.charAt(hr.length)==="/"),_r={isActive:Sr,isPending:Nr,isTransitioning:yr},vr=Sr?_e:void 0,br;typeof rr=="function"?br=rr(_r):br=[rr,Sr?"active":null,Nr?"pending":null,yr?"transitioning":null].filter(Boolean).join(" ");let Pr=typeof sr=="function"?sr(_r):sr;return reactExports.createElement(Link,{...lr,"aria-current":vr,className:br,ref:cr,style:Pr,to:ir,viewTransition:or},typeof ar=="function"?ar(_r):ar)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:er="render",fetcherKey:_e,navigate:tr,reloadDocument:rr,replace:nr,state:sr,method:ir=defaultMethod,action:or,onSubmit:ar,relative:lr,preventScrollReset:cr,viewTransition:Ar,...ur},dr)=>{let mr=useSubmit(),pr=useFormAction(or,{relative:lr}),yr=ir.toLowerCase()==="get"?"get":"post",hr=typeof or=="string"&&ABSOLUTE_URL_REGEX2.test(or),gr=Cr=>{if(ar&&ar(Cr),Cr.defaultPrevented)return;Cr.preventDefault();let Tr=Cr.nativeEvent.submitter,Sr=(Tr==null?void 0:Tr.getAttribute("formmethod"))||ir;mr(Tr||Cr.currentTarget,{fetcherKey:_e,method:Sr,navigate:tr,replace:nr,state:sr,relative:lr,preventScrollReset:cr,viewTransition:Ar})};return reactExports.createElement("form",{ref:dr,method:yr,action:pr,onSubmit:rr?ar:gr,...ur,"data-discover":!hr&&er==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(er){return`${er} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(er){let _e=reactExports.useContext(DataRouterContext);return invariant(_e,getDataRouterConsoleError2(er)),_e}function useLinkClickHandler(er,{target:_e,replace:tr,state:rr,preventScrollReset:nr,relative:sr,viewTransition:ir}={}){let or=useNavigate(),ar=useLocation(),lr=useResolvedPath(er,{relative:sr});return reactExports.useCallback(cr=>{if(shouldProcessLinkClick(cr,_e)){cr.preventDefault();let Ar=tr!==void 0?tr:createPath(ar)===createPath(lr);or(er,{replace:Ar,state:rr,preventScrollReset:nr,relative:sr,viewTransition:ir})}},[ar,or,lr,tr,rr,_e,er,nr,sr,ir])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:er}=useDataRouterContext3("useSubmit"),{basename:_e}=reactExports.useContext(NavigationContext),tr=useRouteId();return reactExports.useCallback(async(rr,nr={})=>{let{action:sr,method:ir,encType:or,formData:ar,body:lr}=getFormSubmissionInfo(rr,_e);if(nr.navigate===!1){let cr=nr.fetcherKey||getUniqueFetcherId();await er.fetch(cr,tr,nr.action||sr,{preventScrollReset:nr.preventScrollReset,formData:ar,body:lr,formMethod:nr.method||ir,formEncType:nr.encType||or,flushSync:nr.flushSync})}else await er.navigate(nr.action||sr,{preventScrollReset:nr.preventScrollReset,formData:ar,body:lr,formMethod:nr.method||ir,formEncType:nr.encType||or,replace:nr.replace,state:nr.state,fromRouteId:tr,flushSync:nr.flushSync,viewTransition:nr.viewTransition})},[er,_e,tr])}function useFormAction(er,{relative:_e}={}){let{basename:tr}=reactExports.useContext(NavigationContext),rr=reactExports.useContext(RouteContext);invariant(rr,"useFormAction must be used inside a RouteContext");let[nr]=rr.matches.slice(-1),sr={...useResolvedPath(er||".",{relative:_e})},ir=useLocation();if(er==null){sr.search=ir.search;let or=new URLSearchParams(sr.search),ar=or.getAll("index");if(ar.some(cr=>cr==="")){or.delete("index"),ar.filter(Ar=>Ar).forEach(Ar=>or.append("index",Ar));let cr=or.toString();sr.search=cr?`?${cr}`:""}}return(!er||er===".")&&nr.route.index&&(sr.search=sr.search?sr.search.replace(/^\?/,"?index&"):"?index"),tr!=="/"&&(sr.pathname=sr.pathname==="/"?tr:joinPaths([tr,sr.pathname])),createPath(sr)}function useViewTransitionState(er,{relative:_e}={}){let tr=reactExports.useContext(ViewTransitionContext);invariant(tr!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:rr}=useDataRouterContext3("useViewTransitionState"),nr=useResolvedPath(er,{relative:_e});if(!tr.isTransitioning)return!1;let sr=stripBasename(tr.currentLocation.pathname,rr)||tr.currentLocation.pathname,ir=stripBasename(tr.nextLocation.pathname,rr)||tr.nextLocation.pathname;return matchPath(nr.pathname,ir)!=null||matchPath(nr.pathname,sr)!=null}const buttonVariants=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Button=reactExports.forwardRef(({className:er,variant:_e,size:tr,asChild:rr=!1,...nr},sr)=>{const ir=rr?Slot:"button";return jsxRuntimeExports.jsx(ir,{className:cn$1(buttonVariants({variant:_e,size:tr,className:er})),ref:sr,...nr})});Button.displayName="Button";const badgeVariants=cva("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge({className:er,variant:_e,...tr}){return jsxRuntimeExports.jsx("div",{className:cn$1(badgeVariants({variant:_e}),er),...tr})}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((er,_e)=>{const{loop:tr=!1,trapped:rr=!1,onMountAutoFocus:nr,onUnmountAutoFocus:sr,...ir}=er,[or,ar]=reactExports.useState(null),lr=useCallbackRef$1(nr),cr=useCallbackRef$1(sr),Ar=reactExports.useRef(null),ur=useComposedRefs(_e,pr=>ar(pr)),dr=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(rr){let pr=function(Cr){if(dr.paused||!or)return;const Tr=Cr.target;or.contains(Tr)?Ar.current=Tr:focus(Ar.current,{select:!0})},yr=function(Cr){if(dr.paused||!or)return;const Tr=Cr.relatedTarget;Tr!==null&&(or.contains(Tr)||focus(Ar.current,{select:!0}))},hr=function(Cr){if(document.activeElement===document.body)for(const Sr of Cr)Sr.removedNodes.length>0&&focus(or)};document.addEventListener("focusin",pr),document.addEventListener("focusout",yr);const gr=new MutationObserver(hr);return or&&gr.observe(or,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",pr),document.removeEventListener("focusout",yr),gr.disconnect()}}},[rr,or,dr.paused]),reactExports.useEffect(()=>{if(or){focusScopesStack.add(dr);const pr=document.activeElement;if(!or.contains(pr)){const hr=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS$1);or.addEventListener(AUTOFOCUS_ON_MOUNT,lr),or.dispatchEvent(hr),hr.defaultPrevented||(focusFirst$1(removeLinks(getTabbableCandidates(or)),{select:!0}),document.activeElement===pr&&focus(or))}return()=>{or.removeEventListener(AUTOFOCUS_ON_MOUNT,lr),setTimeout(()=>{const hr=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS$1);or.addEventListener(AUTOFOCUS_ON_UNMOUNT,cr),or.dispatchEvent(hr),hr.defaultPrevented||focus(pr??document.body,{select:!0}),or.removeEventListener(AUTOFOCUS_ON_UNMOUNT,cr),focusScopesStack.remove(dr)},0)}}},[or,lr,cr,dr]);const mr=reactExports.useCallback(pr=>{if(!tr&&!rr||dr.paused)return;const yr=pr.key==="Tab"&&!pr.altKey&&!pr.ctrlKey&&!pr.metaKey,hr=document.activeElement;if(yr&&hr){const gr=pr.currentTarget,[Cr,Tr]=getTabbableEdges(gr);Cr&&Tr?!pr.shiftKey&&hr===Tr?(pr.preventDefault(),tr&&focus(Cr,{select:!0})):pr.shiftKey&&hr===Cr&&(pr.preventDefault(),tr&&focus(Tr,{select:!0})):hr===gr&&pr.preventDefault()}},[tr,rr,dr.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...ir,ref:ur,onKeyDown:mr})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst$1(er,{select:_e=!1}={}){const tr=document.activeElement;for(const rr of er)if(focus(rr,{select:_e}),document.activeElement!==tr)return}function getTabbableEdges(er){const _e=getTabbableCandidates(er),tr=findVisible(_e,er),rr=findVisible(_e.reverse(),er);return[tr,rr]}function getTabbableCandidates(er){const _e=[],tr=document.createTreeWalker(er,NodeFilter.SHOW_ELEMENT,{acceptNode:rr=>{const nr=rr.tagName==="INPUT"&&rr.type==="hidden";return rr.disabled||rr.hidden||nr?NodeFilter.FILTER_SKIP:rr.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;tr.nextNode();)_e.push(tr.currentNode);return _e}function findVisible(er,_e){for(const tr of er)if(!isHidden(tr,{upTo:_e}))return tr}function isHidden(er,{upTo:_e}){if(getComputedStyle(er).visibility==="hidden")return!0;for(;er;){if(_e!==void 0&&er===_e)return!1;if(getComputedStyle(er).display==="none")return!0;er=er.parentElement}return!1}function isSelectableInput(er){return er instanceof HTMLInputElement&&"select"in er}function focus(er,{select:_e=!1}={}){if(er&&er.focus){const tr=document.activeElement;er.focus({preventScroll:!0}),er!==tr&&isSelectableInput(er)&&_e&&er.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let er=[];return{add(_e){const tr=er[0];_e!==tr&&(tr==null||tr.pause()),er=arrayRemove(er,_e),er.unshift(_e)},remove(_e){var tr;er=arrayRemove(er,_e),(tr=er[0])==null||tr.resume()}}}function arrayRemove(er,_e){const tr=[...er],rr=tr.indexOf(_e);return rr!==-1&&tr.splice(rr,1),tr}function removeLinks(er){return er.filter(_e=>_e.tagName!=="A")}var count=0;function useFocusGuards(){reactExports.useEffect(()=>{const er=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",er[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",er[1]??createFocusGuard()),count++,()=>{count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(_e=>_e.remove()),count--}},[])}function createFocusGuard(){const er=document.createElement("span");return er.setAttribute("data-radix-focus-guard",""),er.tabIndex=0,er.style.outline="none",er.style.opacity="0",er.style.position="fixed",er.style.pointerEvents="none",er}var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(er,_e){return typeof er=="function"?er(_e):er&&(er.current=_e),er}function useCallbackRef(er,_e){var tr=reactExports.useState(function(){return{value:er,callback:_e,facade:{get current(){return tr.value},set current(rr){var nr=tr.value;nr!==rr&&(tr.value=rr,tr.callback(rr,nr))}}}})[0];return tr.callback=_e,tr.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(er,_e){var tr=useCallbackRef(null,function(rr){return er.forEach(function(nr){return assignRef(nr,rr)})});return useIsomorphicLayoutEffect(function(){var rr=currentValues.get(tr);if(rr){var nr=new Set(rr),sr=new Set(er),ir=tr.current;nr.forEach(function(or){sr.has(or)||assignRef(or,null)}),sr.forEach(function(or){nr.has(or)||assignRef(or,ir)})}currentValues.set(tr,er)},[er]),tr}function ItoI(er){return er}function innerCreateMedium(er,_e){_e===void 0&&(_e=ItoI);var tr=[],rr=!1,nr={read:function(){if(rr)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return tr.length?tr[tr.length-1]:er},useMedium:function(sr){var ir=_e(sr,rr);return tr.push(ir),function(){tr=tr.filter(function(or){return or!==ir})}},assignSyncMedium:function(sr){for(rr=!0;tr.length;){var ir=tr;tr=[],ir.forEach(sr)}tr={push:function(or){return sr(or)},filter:function(){return tr}}},assignMedium:function(sr){rr=!0;var ir=[];if(tr.length){var or=tr;tr=[],or.forEach(sr),ir=tr}var ar=function(){var cr=ir;ir=[],cr.forEach(sr)},lr=function(){return Promise.resolve().then(ar)};lr(),tr={push:function(cr){ir.push(cr),lr()},filter:function(cr){return ir=ir.filter(cr),tr}}}};return nr}function createSidecarMedium(er){er===void 0&&(er={});var _e=innerCreateMedium(null);return _e.options=__assign$2({async:!0,ssr:!1},er),_e}var SideCar$1=function(er){var _e=er.sideCar,tr=__rest(er,["sideCar"]);if(!_e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var rr=_e.read();if(!rr)throw new Error("Sidecar medium not found");return reactExports.createElement(rr,__assign$2({},tr))};SideCar$1.isSideCarExport=!0;function exportSidecar(er,_e){return er.useMedium(_e),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(er,_e){var tr=reactExports.useRef(null),rr=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),nr=rr[0],sr=rr[1],ir=er.forwardProps,or=er.children,ar=er.className,lr=er.removeScrollBar,cr=er.enabled,Ar=er.shards,ur=er.sideCar,dr=er.noIsolation,mr=er.inert,pr=er.allowPinchZoom,yr=er.as,hr=yr===void 0?"div":yr,gr=er.gapMode,Cr=__rest(er,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),Tr=ur,Sr=useMergeRefs([tr,_e]),Nr=__assign$2(__assign$2({},Cr),nr);return reactExports.createElement(reactExports.Fragment,null,cr&&reactExports.createElement(Tr,{sideCar:effectCar,removeScrollBar:lr,shards:Ar,noIsolation:dr,inert:mr,setCallbacks:sr,allowPinchZoom:!!pr,lockRef:tr,gapMode:gr}),ir?reactExports.cloneElement(reactExports.Children.only(or),__assign$2(__assign$2({},Nr),{ref:Sr})):reactExports.createElement(hr,__assign$2({},Nr,{className:ar,ref:Sr}),or))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var er=document.createElement("style");er.type="text/css";var _e=getNonce();return _e&&er.setAttribute("nonce",_e),er}function injectStyles(er,_e){er.styleSheet?er.styleSheet.cssText=_e:er.appendChild(document.createTextNode(_e))}function insertStyleTag(er){var _e=document.head||document.getElementsByTagName("head")[0];_e.appendChild(er)}var stylesheetSingleton=function(){var er=0,_e=null;return{add:function(tr){er==0&&(_e=makeStyleTag())&&(injectStyles(_e,tr),insertStyleTag(_e)),er++},remove:function(){er--,!er&&_e&&(_e.parentNode&&_e.parentNode.removeChild(_e),_e=null)}}},styleHookSingleton=function(){var er=stylesheetSingleton();return function(_e,tr){reactExports.useEffect(function(){return er.add(_e),function(){er.remove()}},[_e&&tr])}},styleSingleton=function(){var er=styleHookSingleton(),_e=function(tr){var rr=tr.styles,nr=tr.dynamic;return er(rr,nr),null};return _e},zeroGap={left:0,top:0,right:0,gap:0},parse$1=function(er){return parseInt(er||"",10)||0},getOffset=function(er){var _e=window.getComputedStyle(document.body),tr=_e[er==="padding"?"paddingLeft":"marginLeft"],rr=_e[er==="padding"?"paddingTop":"marginTop"],nr=_e[er==="padding"?"paddingRight":"marginRight"];return[parse$1(tr),parse$1(rr),parse$1(nr)]},getGapWidth=function(er){if(er===void 0&&(er="margin"),typeof window>"u")return zeroGap;var _e=getOffset(er),tr=document.documentElement.clientWidth,rr=window.innerWidth;return{left:_e[0],top:_e[1],right:_e[2],gap:Math.max(0,rr-tr+_e[2]-_e[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(er,_e,tr,rr){var nr=er.left,sr=er.top,ir=er.right,or=er.gap;return tr===void 0&&(tr="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(rr,`;
   padding-right: `).concat(or,"px ").concat(rr,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(rr,`;
    overscroll-behavior: contain;
    `).concat([_e&&"position: relative ".concat(rr,";"),tr==="margin"&&`
    padding-left: `.concat(nr,`px;
    padding-top: `).concat(sr,`px;
    padding-right: `).concat(ir,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(or,"px ").concat(rr,`;
    `),tr==="padding"&&"padding-right: ".concat(or,"px ").concat(rr,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(or,"px ").concat(rr,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(or,"px ").concat(rr,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(rr,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(rr,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(or,`px;
  }
`)},getCurrentUseCounter=function(){var er=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(er)?er:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var er=getCurrentUseCounter()-1;er<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,er.toString())}},[])},RemoveScrollBar=function(er){var _e=er.noRelative,tr=er.noImportant,rr=er.gapMode,nr=rr===void 0?"margin":rr;useLockAttribute();var sr=reactExports.useMemo(function(){return getGapWidth(nr)},[nr]);return reactExports.createElement(Style,{styles:getStyles(sr,!_e,nr,tr?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(er){return er.tagName==="TEXTAREA"},elementCanBeScrolled=function(er,_e){if(!(er instanceof Element))return!1;var tr=window.getComputedStyle(er);return tr[_e]!=="hidden"&&!(tr.overflowY===tr.overflowX&&!alwaysContainsScroll(er)&&tr[_e]==="visible")},elementCouldBeVScrolled=function(er){return elementCanBeScrolled(er,"overflowY")},elementCouldBeHScrolled=function(er){return elementCanBeScrolled(er,"overflowX")},locationCouldBeScrolled=function(er,_e){var tr=_e.ownerDocument,rr=_e;do{typeof ShadowRoot<"u"&&rr instanceof ShadowRoot&&(rr=rr.host);var nr=elementCouldBeScrolled(er,rr);if(nr){var sr=getScrollVariables(er,rr),ir=sr[1],or=sr[2];if(ir>or)return!0}rr=rr.parentNode}while(rr&&rr!==tr.body);return!1},getVScrollVariables=function(er){var _e=er.scrollTop,tr=er.scrollHeight,rr=er.clientHeight;return[_e,tr,rr]},getHScrollVariables=function(er){var _e=er.scrollLeft,tr=er.scrollWidth,rr=er.clientWidth;return[_e,tr,rr]},elementCouldBeScrolled=function(er,_e){return er==="v"?elementCouldBeVScrolled(_e):elementCouldBeHScrolled(_e)},getScrollVariables=function(er,_e){return er==="v"?getVScrollVariables(_e):getHScrollVariables(_e)},getDirectionFactor=function(er,_e){return er==="h"&&_e==="rtl"?-1:1},handleScroll=function(er,_e,tr,rr,nr){var sr=getDirectionFactor(er,window.getComputedStyle(_e).direction),ir=sr*rr,or=tr.target,ar=_e.contains(or),lr=!1,cr=ir>0,Ar=0,ur=0;do{var dr=getScrollVariables(er,or),mr=dr[0],pr=dr[1],yr=dr[2],hr=pr-yr-sr*mr;(mr||hr)&&elementCouldBeScrolled(er,or)&&(Ar+=hr,ur+=mr),or instanceof ShadowRoot?or=or.host:or=or.parentNode}while(!ar&&or!==document.body||ar&&(_e.contains(or)||_e===or));return(cr&&(Math.abs(Ar)<1||!nr)||!cr&&(Math.abs(ur)<1||!nr))&&(lr=!0),lr},getTouchXY=function(er){return"changedTouches"in er?[er.changedTouches[0].clientX,er.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(er){return[er.deltaX,er.deltaY]},extractRef=function(er){return er&&"current"in er?er.current:er},deltaCompare=function(er,_e){return er[0]===_e[0]&&er[1]===_e[1]},generateStyle=function(er){return`
  .block-interactivity-`.concat(er,` {pointer-events: none;}
  .allow-interactivity-`).concat(er,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(er){var _e=reactExports.useRef([]),tr=reactExports.useRef([0,0]),rr=reactExports.useRef(),nr=reactExports.useState(idCounter++)[0],sr=reactExports.useState(styleSingleton)[0],ir=reactExports.useRef(er);reactExports.useEffect(function(){ir.current=er},[er]),reactExports.useEffect(function(){if(er.inert){document.body.classList.add("block-interactivity-".concat(nr));var pr=__spreadArray$1([er.lockRef.current],(er.shards||[]).map(extractRef),!0).filter(Boolean);return pr.forEach(function(yr){return yr.classList.add("allow-interactivity-".concat(nr))}),function(){document.body.classList.remove("block-interactivity-".concat(nr)),pr.forEach(function(yr){return yr.classList.remove("allow-interactivity-".concat(nr))})}}},[er.inert,er.lockRef.current,er.shards]);var or=reactExports.useCallback(function(pr,yr){if("touches"in pr&&pr.touches.length===2||pr.type==="wheel"&&pr.ctrlKey)return!ir.current.allowPinchZoom;var hr=getTouchXY(pr),gr=tr.current,Cr="deltaX"in pr?pr.deltaX:gr[0]-hr[0],Tr="deltaY"in pr?pr.deltaY:gr[1]-hr[1],Sr,Nr=pr.target,_r=Math.abs(Cr)>Math.abs(Tr)?"h":"v";if("touches"in pr&&_r==="h"&&Nr.type==="range")return!1;var vr=locationCouldBeScrolled(_r,Nr);if(!vr)return!0;if(vr?Sr=_r:(Sr=_r==="v"?"h":"v",vr=locationCouldBeScrolled(_r,Nr)),!vr)return!1;if(!rr.current&&"changedTouches"in pr&&(Cr||Tr)&&(rr.current=Sr),!Sr)return!0;var br=rr.current||Sr;return handleScroll(br,yr,pr,br==="h"?Cr:Tr,!0)},[]),ar=reactExports.useCallback(function(pr){var yr=pr;if(!(!lockStack.length||lockStack[lockStack.length-1]!==sr)){var hr="deltaY"in yr?getDeltaXY(yr):getTouchXY(yr),gr=_e.current.filter(function(Sr){return Sr.name===yr.type&&(Sr.target===yr.target||yr.target===Sr.shadowParent)&&deltaCompare(Sr.delta,hr)})[0];if(gr&&gr.should){yr.cancelable&&yr.preventDefault();return}if(!gr){var Cr=(ir.current.shards||[]).map(extractRef).filter(Boolean).filter(function(Sr){return Sr.contains(yr.target)}),Tr=Cr.length>0?or(yr,Cr[0]):!ir.current.noIsolation;Tr&&yr.cancelable&&yr.preventDefault()}}},[]),lr=reactExports.useCallback(function(pr,yr,hr,gr){var Cr={name:pr,delta:yr,target:hr,should:gr,shadowParent:getOutermostShadowParent(hr)};_e.current.push(Cr),setTimeout(function(){_e.current=_e.current.filter(function(Tr){return Tr!==Cr})},1)},[]),cr=reactExports.useCallback(function(pr){tr.current=getTouchXY(pr),rr.current=void 0},[]),Ar=reactExports.useCallback(function(pr){lr(pr.type,getDeltaXY(pr),pr.target,or(pr,er.lockRef.current))},[]),ur=reactExports.useCallback(function(pr){lr(pr.type,getTouchXY(pr),pr.target,or(pr,er.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(sr),er.setCallbacks({onScrollCapture:Ar,onWheelCapture:Ar,onTouchMoveCapture:ur}),document.addEventListener("wheel",ar,nonPassive),document.addEventListener("touchmove",ar,nonPassive),document.addEventListener("touchstart",cr,nonPassive),function(){lockStack=lockStack.filter(function(pr){return pr!==sr}),document.removeEventListener("wheel",ar,nonPassive),document.removeEventListener("touchmove",ar,nonPassive),document.removeEventListener("touchstart",cr,nonPassive)}},[]);var dr=er.removeScrollBar,mr=er.inert;return reactExports.createElement(reactExports.Fragment,null,mr?reactExports.createElement(sr,{styles:generateStyle(nr)}):null,dr?reactExports.createElement(RemoveScrollBar,{gapMode:er.gapMode}):null)}function getOutermostShadowParent(er){for(var _e=null;er!==null;)er instanceof ShadowRoot&&(_e=er.host,er=er.host),er=er.parentNode;return _e}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(er,_e){return reactExports.createElement(RemoveScroll,__assign$2({},er,{ref:_e,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var getDefaultParent=function(er){if(typeof document>"u")return null;var _e=Array.isArray(er)?er[0]:er;return _e.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(er){return er&&(er.host||unwrapHost(er.parentNode))},correctTargets=function(er,_e){return _e.map(function(tr){if(er.contains(tr))return tr;var rr=unwrapHost(tr);return rr&&er.contains(rr)?rr:(console.error("aria-hidden",tr,"in not contained inside",er,". Doing nothing"),null)}).filter(function(tr){return!!tr})},applyAttributeToOthers=function(er,_e,tr,rr){var nr=correctTargets(_e,Array.isArray(er)?er:[er]);markerMap[tr]||(markerMap[tr]=new WeakMap);var sr=markerMap[tr],ir=[],or=new Set,ar=new Set(nr),lr=function(Ar){!Ar||or.has(Ar)||(or.add(Ar),lr(Ar.parentNode))};nr.forEach(lr);var cr=function(Ar){!Ar||ar.has(Ar)||Array.prototype.forEach.call(Ar.children,function(ur){if(or.has(ur))cr(ur);else try{var dr=ur.getAttribute(rr),mr=dr!==null&&dr!=="false",pr=(counterMap.get(ur)||0)+1,yr=(sr.get(ur)||0)+1;counterMap.set(ur,pr),sr.set(ur,yr),ir.push(ur),pr===1&&mr&&uncontrolledNodes.set(ur,!0),yr===1&&ur.setAttribute(tr,"true"),mr||ur.setAttribute(rr,"true")}catch(hr){console.error("aria-hidden: cannot operate on ",ur,hr)}})};return cr(_e),or.clear(),lockCount++,function(){ir.forEach(function(Ar){var ur=counterMap.get(Ar)-1,dr=sr.get(Ar)-1;counterMap.set(Ar,ur),sr.set(Ar,dr),ur||(uncontrolledNodes.has(Ar)||Ar.removeAttribute(rr),uncontrolledNodes.delete(Ar)),dr||Ar.removeAttribute(tr)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(er,_e,tr){tr===void 0&&(tr="data-aria-hidden");var rr=Array.from(Array.isArray(er)?er:[er]),nr=getDefaultParent(er);return nr?(rr.push.apply(rr,Array.from(nr.querySelectorAll("[aria-live]"))),applyAttributeToOthers(rr,nr,tr,"aria-hidden")):function(){return null}},DIALOG_NAME="Dialog",[createDialogContext,createDialogScope]=createContextScope$3(DIALOG_NAME),[DialogProvider,useDialogContext]=createDialogContext(DIALOG_NAME),Dialog$1=er=>{const{__scopeDialog:_e,children:tr,open:rr,defaultOpen:nr,onOpenChange:sr,modal:ir=!0}=er,or=reactExports.useRef(null),ar=reactExports.useRef(null),[lr=!1,cr]=useControllableState({prop:rr,defaultProp:nr,onChange:sr});return jsxRuntimeExports.jsx(DialogProvider,{scope:_e,triggerRef:or,contentRef:ar,contentId:useId(),titleId:useId(),descriptionId:useId(),open:lr,onOpenChange:cr,onOpenToggle:reactExports.useCallback(()=>cr(Ar=>!Ar),[cr]),modal:ir,children:tr})};Dialog$1.displayName=DIALOG_NAME;var TRIGGER_NAME$3="DialogTrigger",DialogTrigger=reactExports.forwardRef((er,_e)=>{const{__scopeDialog:tr,...rr}=er,nr=useDialogContext(TRIGGER_NAME$3,tr),sr=useComposedRefs(_e,nr.triggerRef);return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":nr.open,"aria-controls":nr.contentId,"data-state":getState$1(nr.open),...rr,ref:sr,onClick:composeEventHandlers$1(er.onClick,nr.onOpenToggle)})});DialogTrigger.displayName=TRIGGER_NAME$3;var PORTAL_NAME$2="DialogPortal",[PortalProvider,usePortalContext]=createDialogContext(PORTAL_NAME$2,{forceMount:void 0}),DialogPortal$1=er=>{const{__scopeDialog:_e,forceMount:tr,children:rr,container:nr}=er,sr=useDialogContext(PORTAL_NAME$2,_e);return jsxRuntimeExports.jsx(PortalProvider,{scope:_e,forceMount:tr,children:reactExports.Children.map(rr,ir=>jsxRuntimeExports.jsx(Presence,{present:tr||sr.open,children:jsxRuntimeExports.jsx(Portal$2,{asChild:!0,container:nr,children:ir})}))})};DialogPortal$1.displayName=PORTAL_NAME$2;var OVERLAY_NAME$1="DialogOverlay",DialogOverlay$1=reactExports.forwardRef((er,_e)=>{const tr=usePortalContext(OVERLAY_NAME$1,er.__scopeDialog),{forceMount:rr=tr.forceMount,...nr}=er,sr=useDialogContext(OVERLAY_NAME$1,er.__scopeDialog);return sr.modal?jsxRuntimeExports.jsx(Presence,{present:rr||sr.open,children:jsxRuntimeExports.jsx(DialogOverlayImpl,{...nr,ref:_e})}):null});DialogOverlay$1.displayName=OVERLAY_NAME$1;var DialogOverlayImpl=reactExports.forwardRef((er,_e)=>{const{__scopeDialog:tr,...rr}=er,nr=useDialogContext(OVERLAY_NAME$1,tr);return jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,shards:[nr.contentRef],children:jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$1(nr.open),...rr,ref:_e,style:{pointerEvents:"auto",...rr.style}})})}),CONTENT_NAME$3="DialogContent",DialogContent$1=reactExports.forwardRef((er,_e)=>{const tr=usePortalContext(CONTENT_NAME$3,er.__scopeDialog),{forceMount:rr=tr.forceMount,...nr}=er,sr=useDialogContext(CONTENT_NAME$3,er.__scopeDialog);return jsxRuntimeExports.jsx(Presence,{present:rr||sr.open,children:sr.modal?jsxRuntimeExports.jsx(DialogContentModal,{...nr,ref:_e}):jsxRuntimeExports.jsx(DialogContentNonModal,{...nr,ref:_e})})});DialogContent$1.displayName=CONTENT_NAME$3;var DialogContentModal=reactExports.forwardRef((er,_e)=>{const tr=useDialogContext(CONTENT_NAME$3,er.__scopeDialog),rr=reactExports.useRef(null),nr=useComposedRefs(_e,tr.contentRef,rr);return reactExports.useEffect(()=>{const sr=rr.current;if(sr)return hideOthers(sr)},[]),jsxRuntimeExports.jsx(DialogContentImpl,{...er,ref:nr,trapFocus:tr.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers$1(er.onCloseAutoFocus,sr=>{var ir;sr.preventDefault(),(ir=tr.triggerRef.current)==null||ir.focus()}),onPointerDownOutside:composeEventHandlers$1(er.onPointerDownOutside,sr=>{const ir=sr.detail.originalEvent,or=ir.button===0&&ir.ctrlKey===!0;(ir.button===2||or)&&sr.preventDefault()}),onFocusOutside:composeEventHandlers$1(er.onFocusOutside,sr=>sr.preventDefault())})}),DialogContentNonModal=reactExports.forwardRef((er,_e)=>{const tr=useDialogContext(CONTENT_NAME$3,er.__scopeDialog),rr=reactExports.useRef(!1),nr=reactExports.useRef(!1);return jsxRuntimeExports.jsx(DialogContentImpl,{...er,ref:_e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:sr=>{var ir,or;(ir=er.onCloseAutoFocus)==null||ir.call(er,sr),sr.defaultPrevented||(rr.current||(or=tr.triggerRef.current)==null||or.focus(),sr.preventDefault()),rr.current=!1,nr.current=!1},onInteractOutside:sr=>{var ar,lr;(ar=er.onInteractOutside)==null||ar.call(er,sr),sr.defaultPrevented||(rr.current=!0,sr.detail.originalEvent.type==="pointerdown"&&(nr.current=!0));const ir=sr.target;((lr=tr.triggerRef.current)==null?void 0:lr.contains(ir))&&sr.preventDefault(),sr.detail.originalEvent.type==="focusin"&&nr.current&&sr.preventDefault()}})}),DialogContentImpl=reactExports.forwardRef((er,_e)=>{const{__scopeDialog:tr,trapFocus:rr,onOpenAutoFocus:nr,onCloseAutoFocus:sr,...ir}=er,or=useDialogContext(CONTENT_NAME$3,tr),ar=reactExports.useRef(null),lr=useComposedRefs(_e,ar);return useFocusGuards(),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:rr,onMountAutoFocus:nr,onUnmountAutoFocus:sr,children:jsxRuntimeExports.jsx(DismissableLayer,{role:"dialog",id:or.contentId,"aria-describedby":or.descriptionId,"aria-labelledby":or.titleId,"data-state":getState$1(or.open),...ir,ref:lr,onDismiss:()=>or.onOpenChange(!1)})}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TitleWarning,{titleId:or.titleId}),jsxRuntimeExports.jsx(DescriptionWarning$1,{contentRef:ar,descriptionId:or.descriptionId})]})]})}),TITLE_NAME$1="DialogTitle",DialogTitle$1=reactExports.forwardRef((er,_e)=>{const{__scopeDialog:tr,...rr}=er,nr=useDialogContext(TITLE_NAME$1,tr);return jsxRuntimeExports.jsx(Primitive.h2,{id:nr.titleId,...rr,ref:_e})});DialogTitle$1.displayName=TITLE_NAME$1;var DESCRIPTION_NAME$1="DialogDescription",DialogDescription$1=reactExports.forwardRef((er,_e)=>{const{__scopeDialog:tr,...rr}=er,nr=useDialogContext(DESCRIPTION_NAME$1,tr);return jsxRuntimeExports.jsx(Primitive.p,{id:nr.descriptionId,...rr,ref:_e})});DialogDescription$1.displayName=DESCRIPTION_NAME$1;var CLOSE_NAME="DialogClose",DialogClose=reactExports.forwardRef((er,_e)=>{const{__scopeDialog:tr,...rr}=er,nr=useDialogContext(CLOSE_NAME,tr);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...rr,ref:_e,onClick:composeEventHandlers$1(er.onClick,()=>nr.onOpenChange(!1))})});DialogClose.displayName=CLOSE_NAME;function getState$1(er){return er?"open":"closed"}var TITLE_WARNING_NAME="DialogTitleWarning",[WarningProvider,useWarningContext]=createContext2(TITLE_WARNING_NAME,{contentName:CONTENT_NAME$3,titleName:TITLE_NAME$1,docsSlug:"dialog"}),TitleWarning=({titleId:er})=>{const _e=useWarningContext(TITLE_WARNING_NAME),tr=`\`${_e.contentName}\` requires a \`${_e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${_e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${_e.docsSlug}`;return reactExports.useEffect(()=>{er&&(document.getElementById(er)||console.error(tr))},[tr,er]),null},DESCRIPTION_WARNING_NAME="DialogDescriptionWarning",DescriptionWarning$1=({contentRef:er,descriptionId:_e})=>{const rr=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${useWarningContext(DESCRIPTION_WARNING_NAME).contentName}}.`;return reactExports.useEffect(()=>{var sr;const nr=(sr=er.current)==null?void 0:sr.getAttribute("aria-describedby");_e&&nr&&(document.getElementById(_e)||console.warn(rr))},[rr,er,_e]),null},Root$4=Dialog$1,Trigger$2=DialogTrigger,Portal$1=DialogPortal$1,Overlay=DialogOverlay$1,Content$1=DialogContent$1,Title=DialogTitle$1,Description=DialogDescription$1,Close=DialogClose;const Dialog=Root$4,DialogPortal=Portal$1,DialogOverlay=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Overlay,{ref:tr,className:cn$1("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",er),..._e}));DialogOverlay.displayName=Overlay.displayName;const DialogContent=reactExports.forwardRef(({className:er,children:_e,...tr},rr)=>jsxRuntimeExports.jsxs(DialogPortal,{children:[jsxRuntimeExports.jsx(DialogOverlay,{}),jsxRuntimeExports.jsxs(Content$1,{ref:rr,className:cn$1("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",er),...tr,children:[_e,jsxRuntimeExports.jsxs(Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[jsxRuntimeExports.jsx(X$1,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));DialogContent.displayName=Content$1.displayName;const DialogHeader=({className:er,..._e})=>jsxRuntimeExports.jsx("div",{className:cn$1("flex flex-col space-y-1.5 text-center sm:text-left",er),..._e});DialogHeader.displayName="DialogHeader";const DialogTitle=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Title,{ref:tr,className:cn$1("text-lg font-semibold leading-none tracking-tight",er),..._e}));DialogTitle.displayName=Title.displayName;const DialogDescription=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Description,{ref:tr,className:cn$1("text-sm text-muted-foreground",er),..._e}));DialogDescription.displayName=Description.displayName;const Input=reactExports.forwardRef(({className:er,type:_e,...tr},rr)=>jsxRuntimeExports.jsx("input",{type:_e,className:cn$1("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",er),ref:rr,...tr}));Input.displayName="Input";var NAME="Label",Label$2=reactExports.forwardRef((er,_e)=>jsxRuntimeExports.jsx(Primitive.label,{...er,ref:_e,onMouseDown:tr=>{var nr;tr.target.closest("button, input, select, textarea")||((nr=er.onMouseDown)==null||nr.call(er,tr),!tr.defaultPrevented&&tr.detail>1&&tr.preventDefault())}}));Label$2.displayName=NAME;var Root$3=Label$2;const labelVariants=cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label$1=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Root$3,{ref:tr,className:cn$1(labelVariants(),er),..._e}));Label$1.displayName=Root$3.displayName;function createContextScope$1(er,_e=[]){let tr=[];function rr(sr,ir){const or=reactExports.createContext(ir),ar=tr.length;tr=[...tr,ir];function lr(Ar){const{scope:ur,children:dr,...mr}=Ar,pr=(ur==null?void 0:ur[er][ar])||or,yr=reactExports.useMemo(()=>mr,Object.values(mr));return jsxRuntimeExports.jsx(pr.Provider,{value:yr,children:dr})}function cr(Ar,ur){const dr=(ur==null?void 0:ur[er][ar])||or,mr=reactExports.useContext(dr);if(mr)return mr;if(ir!==void 0)return ir;throw new Error(`\`${Ar}\` must be used within \`${sr}\``)}return lr.displayName=sr+"Provider",[lr,cr]}const nr=()=>{const sr=tr.map(ir=>reactExports.createContext(ir));return function(or){const ar=(or==null?void 0:or[er])||sr;return reactExports.useMemo(()=>({[`__scope${er}`]:{...or,[er]:ar}}),[or,ar])}};return nr.scopeName=er,[rr,composeContextScopes$1(nr,..._e)]}function composeContextScopes$1(...er){const _e=er[0];if(er.length===1)return _e;const tr=()=>{const rr=er.map(nr=>({useScope:nr(),scopeName:nr.scopeName}));return function(sr){const ir=rr.reduce((or,{useScope:ar,scopeName:lr})=>{const Ar=ar(sr)[`__scope${lr}`];return{...or,...Ar}},{});return reactExports.useMemo(()=>({[`__scope${_e.scopeName}`]:ir}),[ir])}};return tr.scopeName=_e.scopeName,tr}var DirectionContext=reactExports.createContext(void 0);function useDirection(er){const _e=reactExports.useContext(DirectionContext);return er||_e||"ltr"}var ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS={bubbles:!1,cancelable:!0},GROUP_NAME$1="RovingFocusGroup",[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(GROUP_NAME$1),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope$1(GROUP_NAME$1,[createCollectionScope$1]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME$1),RovingFocusGroup=reactExports.forwardRef((er,_e)=>jsxRuntimeExports.jsx(Collection$1.Provider,{scope:er.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:er.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{...er,ref:_e})})}));RovingFocusGroup.displayName=GROUP_NAME$1;var RovingFocusGroupImpl=reactExports.forwardRef((er,_e)=>{const{__scopeRovingFocusGroup:tr,orientation:rr,loop:nr=!1,dir:sr,currentTabStopId:ir,defaultCurrentTabStopId:or,onCurrentTabStopIdChange:ar,onEntryFocus:lr,preventScrollOnEntryFocus:cr=!1,...Ar}=er,ur=reactExports.useRef(null),dr=useComposedRefs(_e,ur),mr=useDirection(sr),[pr=null,yr]=useControllableState({prop:ir,defaultProp:or,onChange:ar}),[hr,gr]=reactExports.useState(!1),Cr=useCallbackRef$1(lr),Tr=useCollection$1(tr),Sr=reactExports.useRef(!1),[Nr,_r]=reactExports.useState(0);return reactExports.useEffect(()=>{const vr=ur.current;if(vr)return vr.addEventListener(ENTRY_FOCUS,Cr),()=>vr.removeEventListener(ENTRY_FOCUS,Cr)},[Cr]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:tr,orientation:rr,dir:mr,loop:nr,currentTabStopId:pr,onItemFocus:reactExports.useCallback(vr=>yr(vr),[yr]),onItemShiftTab:reactExports.useCallback(()=>gr(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>_r(vr=>vr+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>_r(vr=>vr-1),[]),children:jsxRuntimeExports.jsx(Primitive.div,{tabIndex:hr||Nr===0?-1:0,"data-orientation":rr,...Ar,ref:dr,style:{outline:"none",...er.style},onMouseDown:composeEventHandlers$1(er.onMouseDown,()=>{Sr.current=!0}),onFocus:composeEventHandlers$1(er.onFocus,vr=>{const br=!Sr.current;if(vr.target===vr.currentTarget&&br&&!hr){const Pr=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS);if(vr.currentTarget.dispatchEvent(Pr),!Pr.defaultPrevented){const Er=Tr().filter(Vr=>Vr.focusable),Rr=Er.find(Vr=>Vr.active),Ir=Er.find(Vr=>Vr.id===pr),Ur=[Rr,Ir,...Er].filter(Boolean).map(Vr=>Vr.ref.current);focusFirst(Ur,cr)}}Sr.current=!1}),onBlur:composeEventHandlers$1(er.onBlur,()=>gr(!1))})})}),ITEM_NAME$2="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef((er,_e)=>{const{__scopeRovingFocusGroup:tr,focusable:rr=!0,active:nr=!1,tabStopId:sr,...ir}=er,or=useId(),ar=sr||or,lr=useRovingFocusContext(ITEM_NAME$2,tr),cr=lr.currentTabStopId===ar,Ar=useCollection$1(tr),{onFocusableItemAdd:ur,onFocusableItemRemove:dr}=lr;return reactExports.useEffect(()=>{if(rr)return ur(),()=>dr()},[rr,ur,dr]),jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:tr,id:ar,focusable:rr,active:nr,children:jsxRuntimeExports.jsx(Primitive.span,{tabIndex:cr?0:-1,"data-orientation":lr.orientation,...ir,ref:_e,onMouseDown:composeEventHandlers$1(er.onMouseDown,mr=>{rr?lr.onItemFocus(ar):mr.preventDefault()}),onFocus:composeEventHandlers$1(er.onFocus,()=>lr.onItemFocus(ar)),onKeyDown:composeEventHandlers$1(er.onKeyDown,mr=>{if(mr.key==="Tab"&&mr.shiftKey){lr.onItemShiftTab();return}if(mr.target!==mr.currentTarget)return;const pr=getFocusIntent(mr,lr.orientation,lr.dir);if(pr!==void 0){if(mr.metaKey||mr.ctrlKey||mr.altKey||mr.shiftKey)return;mr.preventDefault();let hr=Ar().filter(gr=>gr.focusable).map(gr=>gr.ref.current);if(pr==="last")hr.reverse();else if(pr==="prev"||pr==="next"){pr==="prev"&&hr.reverse();const gr=hr.indexOf(mr.currentTarget);hr=lr.loop?wrapArray$1(hr,gr+1):hr.slice(gr+1)}setTimeout(()=>focusFirst(hr))}})})})});RovingFocusGroupItem.displayName=ITEM_NAME$2;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey(er,_e){return _e!=="rtl"?er:er==="ArrowLeft"?"ArrowRight":er==="ArrowRight"?"ArrowLeft":er}function getFocusIntent(er,_e,tr){const rr=getDirectionAwareKey(er.key,tr);if(!(_e==="vertical"&&["ArrowLeft","ArrowRight"].includes(rr))&&!(_e==="horizontal"&&["ArrowUp","ArrowDown"].includes(rr)))return MAP_KEY_TO_FOCUS_INTENT[rr]}function focusFirst(er,_e=!1){const tr=document.activeElement;for(const rr of er)if(rr===tr||(rr.focus({preventScroll:_e}),document.activeElement!==tr))return}function wrapArray$1(er,_e){return er.map((tr,rr)=>er[(_e+rr)%er.length])}var Root$2=RovingFocusGroup,Item$1=RovingFocusGroupItem,TABS_NAME="Tabs",[createTabsContext,createTabsScope]=createContextScope$3(TABS_NAME,[createRovingFocusGroupScope]),useRovingFocusGroupScope$1=createRovingFocusGroupScope(),[TabsProvider,useTabsContext]=createTabsContext(TABS_NAME),Tabs$1=reactExports.forwardRef((er,_e)=>{const{__scopeTabs:tr,value:rr,onValueChange:nr,defaultValue:sr,orientation:ir="horizontal",dir:or,activationMode:ar="automatic",...lr}=er,cr=useDirection(or),[Ar,ur]=useControllableState({prop:rr,onChange:nr,defaultProp:sr});return jsxRuntimeExports.jsx(TabsProvider,{scope:tr,baseId:useId(),value:Ar,onValueChange:ur,orientation:ir,dir:cr,activationMode:ar,children:jsxRuntimeExports.jsx(Primitive.div,{dir:cr,"data-orientation":ir,...lr,ref:_e})})});Tabs$1.displayName=TABS_NAME;var TAB_LIST_NAME="TabsList",TabsList$1=reactExports.forwardRef((er,_e)=>{const{__scopeTabs:tr,loop:rr=!0,...nr}=er,sr=useTabsContext(TAB_LIST_NAME,tr),ir=useRovingFocusGroupScope$1(tr);return jsxRuntimeExports.jsx(Root$2,{asChild:!0,...ir,orientation:sr.orientation,dir:sr.dir,loop:rr,children:jsxRuntimeExports.jsx(Primitive.div,{role:"tablist","aria-orientation":sr.orientation,...nr,ref:_e})})});TabsList$1.displayName=TAB_LIST_NAME;var TRIGGER_NAME$2="TabsTrigger",TabsTrigger$1=reactExports.forwardRef((er,_e)=>{const{__scopeTabs:tr,value:rr,disabled:nr=!1,...sr}=er,ir=useTabsContext(TRIGGER_NAME$2,tr),or=useRovingFocusGroupScope$1(tr),ar=makeTriggerId(ir.baseId,rr),lr=makeContentId(ir.baseId,rr),cr=rr===ir.value;return jsxRuntimeExports.jsx(Item$1,{asChild:!0,...or,focusable:!nr,active:cr,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"tab","aria-selected":cr,"aria-controls":lr,"data-state":cr?"active":"inactive","data-disabled":nr?"":void 0,disabled:nr,id:ar,...sr,ref:_e,onMouseDown:composeEventHandlers$1(er.onMouseDown,Ar=>{!nr&&Ar.button===0&&Ar.ctrlKey===!1?ir.onValueChange(rr):Ar.preventDefault()}),onKeyDown:composeEventHandlers$1(er.onKeyDown,Ar=>{[" ","Enter"].includes(Ar.key)&&ir.onValueChange(rr)}),onFocus:composeEventHandlers$1(er.onFocus,()=>{const Ar=ir.activationMode!=="manual";!cr&&!nr&&Ar&&ir.onValueChange(rr)})})})});TabsTrigger$1.displayName=TRIGGER_NAME$2;var CONTENT_NAME$2="TabsContent",TabsContent$1=reactExports.forwardRef((er,_e)=>{const{__scopeTabs:tr,value:rr,forceMount:nr,children:sr,...ir}=er,or=useTabsContext(CONTENT_NAME$2,tr),ar=makeTriggerId(or.baseId,rr),lr=makeContentId(or.baseId,rr),cr=rr===or.value,Ar=reactExports.useRef(cr);return reactExports.useEffect(()=>{const ur=requestAnimationFrame(()=>Ar.current=!1);return()=>cancelAnimationFrame(ur)},[]),jsxRuntimeExports.jsx(Presence,{present:nr||cr,children:({present:ur})=>jsxRuntimeExports.jsx(Primitive.div,{"data-state":cr?"active":"inactive","data-orientation":or.orientation,role:"tabpanel","aria-labelledby":ar,hidden:!ur,id:lr,tabIndex:0,...ir,ref:_e,style:{...er.style,animationDuration:Ar.current?"0s":void 0},children:ur&&sr})})});TabsContent$1.displayName=CONTENT_NAME$2;function makeTriggerId(er,_e){return`${er}-trigger-${_e}`}function makeContentId(er,_e){return`${er}-content-${_e}`}var Root2$3=Tabs$1,List=TabsList$1,Trigger$1=TabsTrigger$1,Content=TabsContent$1;const Tabs=Root2$3,TabsList=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(List,{ref:tr,className:cn$1("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",er),..._e}));TabsList.displayName=List.displayName;const TabsTrigger=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Trigger$1,{ref:tr,className:cn$1("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",er),..._e}));TabsTrigger.displayName=Trigger$1.displayName;const TabsContent=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Content,{ref:tr,className:cn$1("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",er),..._e}));TabsContent.displayName=Content.displayName;const AuthModal=({isOpen:er,onClose:_e,onSuccess:tr})=>{const[rr,nr]=reactExports.useState(""),[sr,ir]=reactExports.useState(""),[or,ar]=reactExports.useState(!1),[lr,cr]=reactExports.useState(null),Ar=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new RecaptchaVerifier(auth,"recaptcha-container",{size:"invisible",callback:()=>{}}))},ur=async()=>{if(!rr.trim()){Jt$2.error("Please enter a valid phone number");return}ar(!0);try{Ar();const hr=`+91${rr}`,gr=await signInWithPhoneNumber(auth,hr,window.recaptchaVerifier);cr(gr),Jt$2.success("OTP sent successfully!")}catch(hr){console.error("OTP sending error:",hr),hr.code==="auth/configuration-not-found"?Jt$2.error("Phone authentication not configured. Please enable it in Firebase Console."):Jt$2.error(hr.message||"Failed to send OTP. Please try again.")}finally{ar(!1)}},dr=async()=>{if(!sr.trim()||!lr){Jt$2.error("Please enter the OTP");return}ar(!0);try{await lr.confirm(sr),Jt$2.success("Phone number verified successfully!"),tr(),_e(),mr()}catch(hr){console.error("OTP verification error:",hr),Jt$2.error("Invalid OTP. Please try again.")}finally{ar(!1)}},mr=()=>{nr(""),ir(""),cr(null)},pr=()=>{mr(),_e()},yr=hr=>{const gr=hr.target.value.replace(/\D/g,"");gr.length<=10&&nr(gr)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Dialog,{open:er,onOpenChange:pr,children:jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-md w-[95%] max-w-[400px] mx-auto",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{className:"text-xl md:text-2xl font-bold text-center",children:"Welcome to Ram's AI"}),jsxRuntimeExports.jsx(DialogDescription,{className:"text-center text-sm md:text-base",children:"Sign in with your phone number to save your progress"})]}),jsxRuntimeExports.jsxs(Tabs,{defaultValue:"login",className:"w-full",children:[jsxRuntimeExports.jsx(TabsList,{className:"grid w-full grid-cols-1",children:jsxRuntimeExports.jsx(TabsTrigger,{value:"login",children:"Phone Login"})}),jsxRuntimeExports.jsx(TabsContent,{value:"login",className:"space-y-4",children:lr?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"otp",children:"Enter OTP"}),jsxRuntimeExports.jsx(Input,{id:"otp",type:"text",placeholder:"Enter 6-digit OTP",value:sr,onChange:hr=>ir(hr.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,className:"w-full text-center text-lg tracking-widest"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["OTP sent to +91",rr]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Button,{onClick:dr,disabled:or||sr.length!==6,className:"w-full bg-gradient-to-r from-green-600 to-blue-600",children:or?"Verifying...":"Verify OTP"}),jsxRuntimeExports.jsx(Button,{onClick:()=>cr(null),variant:"outline",className:"w-full",children:"Change Phone Number"})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"phone",children:"Phone Number"}),jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center px-3 bg-gray-100 border border-r-0 border-gray-300 rounded-l-md",children:jsxRuntimeExports.jsx("span",{className:"text-gray-600 font-medium",children:"+91"})}),jsxRuntimeExports.jsx(Input,{id:"phone",type:"tel",placeholder:"9876543210",value:rr,onChange:yr,className:"rounded-l-none flex-1",maxLength:10})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Enter your 10-digit mobile number"})]}),jsxRuntimeExports.jsx(Button,{onClick:ur,disabled:or||rr.length!==10,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600",children:or?"Sending OTP...":"Send OTP"}),jsxRuntimeExports.jsx("div",{className:"text-center text-xs text-red-600",children:"Note: Phone authentication needs to be enabled in Firebase Console first"})]})})]})]})}),jsxRuntimeExports.jsx("div",{id:"recaptcha-container"})]})},generateFileHash$1=async er=>{const _e=await er.arrayBuffer(),tr=await crypto.subtle.digest("SHA-256",_e);return Array.from(new Uint8Array(tr)).map(nr=>nr.toString(16).padStart(2,"0")).join("")},saveStudyHistory=async(er,_e,tr,rr)=>{try{let nr=[],sr,ir;if(rr.files&&rr.files.length>0)for(const dr of rr.files){sr||(sr=await generateFileHash$1(dr),ir=dr.size);const mr=Date.now(),pr=`${er}/${mr}_${dr.name}`,yr=ref(storage,`study-files/${pr}`);await uploadBytes(yr,dr);const hr=await getDownloadURL(yr);nr.push(hr)}let or=null,ar=null;if(_e==="analysis"&&Array.isArray(tr)){const dr=tr[0];or={keyPoints:dr.keyPoints||[],studyPoints:dr.studyPoints||[],summary:dr.summary||"",mainTopic:dr.mainTopic||rr.fileName||"Study Material",tnpscCategories:dr.tnpscCategories||[]}}else _e==="quiz"&&(ar={questions:tr.questions||[],answers:rr.quizAnswers||[],score:rr.score||0,totalQuestions:rr.totalQuestions||0,percentage:rr.percentage||0,difficulty:rr.difficulty});const lr={userId:er,timestamp:Timestamp.now(),type:_e,fileName:rr.fileName,difficulty:rr.difficulty,language:rr.language,data:tr,fileUrls:nr,analysisData:or,quizData:ar};rr.notes!==void 0&&(lr.notes=rr.notes);const cr=sr||rr.fileHash,Ar=ir||rr.fileSize;cr!==void 0&&(lr.fileHash=cr),Ar!==void 0&&(lr.fileSize=Ar),rr.pageAnalysesMap&&(lr.totalAnalyzedPages=Object.keys(rr.pageAnalysesMap).length),rr.pageAnalysesMap!==void 0&&(lr.pageAnalysesMap=rr.pageAnalysesMap),rr.score!==void 0&&(lr.score=rr.score),rr.totalQuestions!==void 0&&(lr.totalQuestions=rr.totalQuestions),rr.percentage!==void 0&&(lr.percentage=rr.percentage);const ur=await addDoc(collection(db,"studyHistory"),lr);return console.log("Study history saved successfully:",ur.id),ur.id}catch(nr){throw console.error("Error saving study history:",nr),nr}},updateStudyHistory=async(er,_e,tr)=>{try{const rr=doc(db,"studyHistory",er),nr={analysisData:_e,data:[_e],timestamp:Timestamp.now()};tr&&(nr.pageAnalysesMap=tr,nr.totalAnalyzedPages=Object.keys(tr).length),await updateDoc(rr,nr),console.log("Study history updated successfully:",er)}catch(rr){throw console.error("Error updating study history:",rr),rr}},getStudyHistory=async er=>{try{const _e=query(collection(db,"studyHistory"),where("userId","==",er),orderBy("timestamp","desc")),tr=await getDocs(_e),rr=[];return tr.forEach(nr=>{const sr=nr.data();rr.push({id:nr.id,...sr,timestamp:sr.timestamp})}),rr}catch(_e){throw console.error("Error fetching study history:",_e),_e}},getStudyHistoryForFile=async(er,_e,tr,rr)=>{try{let nr;tr&&rr?nr=query(collection(db,"studyHistory"),where("userId","==",er),where("fileHash","==",tr),where("fileSize","==",rr),where("type","==","analysis"),orderBy("timestamp","desc")):nr=query(collection(db,"studyHistory"),where("userId","==",er),where("fileName","==",_e),where("type","==","analysis"),orderBy("timestamp","desc"));const sr=await getDocs(nr);if(sr.empty)return null;const ir=sr.docs[0],or=ir.data();return{id:ir.id,...or}}catch(nr){return console.error("Error fetching study history for file:",nr),null}},deleteStudyHistory=async(er,_e)=>{try{if(await deleteDoc(doc(db,"studyHistory",er)),_e&&_e.length>0)for(const tr of _e)try{const rr=ref(storage,tr);await deleteObject(rr)}catch(rr){console.warn("Error deleting file from storage:",rr)}}catch(tr){throw console.error("Error deleting study history:",tr),tr}},AppContext=reactExports.createContext(void 0),useAppContext=()=>{const er=reactExports.useContext(AppContext);if(!er)throw new Error("useAppContext must be used within AppProvider");return er},AppProvider=({children:er})=>{const[_e]=useAuthState(auth),[tr,rr]=reactExports.useState([]),[nr,sr]=reactExports.useState([]),[ir,or]=reactExports.useState(null),[ar,lr]=reactExports.useState("medium"),[cr,Ar]=reactExports.useState("english"),[ur,dr]=reactExports.useState(null),[mr,pr]=reactExports.useState(null),[yr,hr]=reactExports.useState(null),[gr,Cr]=reactExports.useState(!1),[Tr,Sr]=reactExports.useState(null),[Nr,_r]=reactExports.useState(0),[vr,br]=reactExports.useState(null),[Pr,Er]=reactExports.useState(null);reactExports.useEffect(()=>{let Xr;return gr&&yr!==null&&yr>0&&(Xr=setInterval(()=>{hr(pn=>pn===null||pn<=1?(Cr(!1),0):pn-1)},1e3)),()=>{Xr&&clearInterval(Xr)}},[gr,yr]),reactExports.useEffect(()=>{const Xr=new Date().toDateString(),pn=localStorage.getItem("studySessionsToday");if(pn){const{date:jr,count:Br}=JSON.parse(pn);jr===Xr?_r(Br):(localStorage.setItem("studySessionsToday",JSON.stringify({date:Xr,count:0})),_r(0))}else localStorage.setItem("studySessionsToday",JSON.stringify({date:Xr,count:0}))},[]);const Rr=(Xr,pn)=>{dr(Xr.id),pr(Xr.duration*60),hr(Xr.duration*60),Cr(!0),br(pn||null),Er(new Date),Xr.phases&&Xr.phases.length>0?Sr(Xr.phases[0].type):Sr("focus")},Ir=()=>{Cr(!1)},Qr=()=>{Cr(!0)},Ur=()=>{mr&&(hr(mr),Cr(!1))},Vr=async()=>{await Hr(!1)},Wr=async Xr=>{await Hr(!0,Xr)},Hr=async(Xr=!1,pn)=>{if(_e&&ur&&Pr)try{const Lr=new Date,Or=Math.round((Lr.getTime()-Pr.getTime())/1e3/60);await saveStudyHistory(_e.uid,"study-session",{sessionType:ur,plannedDuration:mr?Math.round(mr/60):0,actualDuration:Or,topic:vr,completed:!Xr,stopped:Xr,startTime:Pr,endTime:Lr,notes:pn||void 0},{fileName:`Study Session - ${vr||ur}`,difficulty:"medium",language:"english",notes:pn||void 0})}catch(Lr){console.error("Failed to save study session:",Lr)}const jr=Xr?Nr:Nr+1;_r(jr);const Br=new Date().toDateString();localStorage.setItem("studySessionsToday",JSON.stringify({date:Br,count:jr})),dr(null),pr(null),hr(null),Cr(!1),Sr(null),br(null),Er(null)},$r=()=>{rr([]),sr([]),or(null),lr("medium"),Ar("english")};return jsxRuntimeExports.jsx(AppContext.Provider,{value:{selectedFiles:tr,setSelectedFiles:rr,analysisResults:nr,setAnalysisResults:sr,questionResult:ir,setQuestionResult:or,difficulty:ar,setDifficulty:lr,outputLanguage:cr,setOutputLanguage:Ar,clearAppState:$r,activeSessionType:ur,sessionDuration:mr,timeRemaining:yr,isSessionActive:gr,sessionPhase:Tr,sessionsCompletedToday:Nr,studyTopic:vr,startStudySession:Rr,pauseStudySession:Ir,resumeStudySession:Qr,resetStudySession:Ur,completeStudySession:Vr,stopStudySession:Wr},children:er})},NavigationHeader=()=>{var mr;const[er,_e]=useAuthState(auth),[tr,rr]=reactExports.useState(!1),[nr,sr]=reactExports.useState(!1),{activeSessionType:ir,timeRemaining:or,isSessionActive:ar}=useAppContext(),lr=useLocation(),cr=useNavigate(),Ar=lr.pathname,ur=async()=>{try{await signOut(auth),Jt$2.success("Logged out successfully"),cr("/")}catch{Jt$2.error("Failed to logout")}},dr=[{path:"/study",label:"Study Assistant",icon:Brain},{path:"/study-sessions",label:"Study Sessions",icon:Clock},{path:"/library",label:"Library",icon:BookOpen},{path:"/arivu",label:"Arivu Chat",icon:MessageCircle},{path:"/history",label:"Study History",icon:History},{path:"/admin",label:"Admin",icon:Shield},{path:"/profile",label:"Profile",icon:Settings}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("header",{className:"bg-white/95 backdrop-blur-xl border-b border-gray-200/50 sticky top-0 z-50 shadow-xl transition-all duration-300",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between h-14 md:h-16",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-1.5 md:p-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg shadow-md pulse-glow",children:jsxRuntimeExports.jsx(Brain,{className:"h-5 w-5 md:h-6 md:w-6 text-white"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("h1",{className:"text-lg md:text-xl font-bold gradient-text",children:"Ram's AI"})})]}),jsxRuntimeExports.jsx("nav",{className:"hidden md:flex items-center gap-2 lg:gap-4",children:dr.map(pr=>jsxRuntimeExports.jsxs(Button,{variant:Ar===pr.path?"default":"ghost",onClick:()=>cr(pr.path),className:`flex items-center gap-2 px-2 lg:px-3 py-2 rounded-lg transition-all duration-300 ${Ar===pr.path?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-md transform scale-105":"text-gray-700 hover:text-blue-600 hover:bg-blue-50 hover:shadow-sm hover:scale-102"}`,children:[jsxRuntimeExports.jsx(pr.icon,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"hidden lg:inline text-sm font-medium",children:pr.label})]},pr.path))}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[ir&&or!==null&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1 bg-gradient-to-r from-green-500 to-blue-600 text-white rounded-full text-sm font-medium animate-pulse",children:[jsxRuntimeExports.jsx(Clock,{className:"h-3 w-3"}),jsxRuntimeExports.jsxs("span",{children:[Math.floor((or||0)/60),":",((or||0)%60).toString().padStart(2,"0")]}),!ar&&jsxRuntimeExports.jsx("span",{className:"text-xs",children:"(Paused)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex sm:hidden items-center gap-1 px-2 py-1 bg-gradient-to-r from-green-500 to-blue-600 text-white rounded-full text-xs font-medium animate-pulse",children:[jsxRuntimeExports.jsx(Clock,{className:"h-3 w-3"}),jsxRuntimeExports.jsxs("span",{children:[Math.floor((or||0)/60),":",((or||0)%60).toString().padStart(2,"0")]})]})]}),er?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"hidden sm:block text-right",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["+91",(mr=er.phoneNumber)==null?void 0:mr.replace("+91","")]}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs",children:"Verified"})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 p-2",children:jsxRuntimeExports.jsx(User$1,{className:"h-4 w-4"})})})]}):jsxRuntimeExports.jsxs(Button,{onClick:()=>rr(!0),className:"btn-primary flex items-center gap-2 px-3 md:px-4",disabled:_e,size:"sm",children:[jsxRuntimeExports.jsx(User$1,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Login"})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"md:hidden text-blue-600 hover:text-blue-700 hover:bg-blue-50 p-2",onClick:()=>sr(!nr),children:nr?jsxRuntimeExports.jsx(X$1,{className:"h-5 w-5"}):jsxRuntimeExports.jsx(Menu,{className:"h-5 w-5"})})]})]}),nr&&jsxRuntimeExports.jsx("nav",{className:"md:hidden py-4 border-t border-gray-200/50 bg-white/98 backdrop-blur-xl animate-fadeInUp shadow-lg",children:jsxRuntimeExports.jsxs("div",{className:"space-y-2 px-2",children:[dr.map(pr=>jsxRuntimeExports.jsxs(Button,{variant:"ghost",onClick:()=>{cr(pr.path),sr(!1)},className:`w-full justify-start flex items-center gap-3 px-4 py-3 rounded-xl ${Ar===pr.path?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg transform scale-102":"text-gray-700 hover:text-blue-600 hover:bg-blue-50 hover:shadow-sm"} transition-all duration-300`,children:[jsxRuntimeExports.jsx(pr.icon,{className:"h-5 w-5"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:pr.label})]},pr.path)),er&&jsxRuntimeExports.jsxs(Button,{onClick:ur,variant:"ghost",className:"w-full justify-start flex items-center gap-3 px-4 py-3 rounded-xl text-red-600 hover:text-red-700 hover:bg-red-50 transition-all duration-300",children:[jsxRuntimeExports.jsx(LogOut,{className:"h-5 w-5"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Logout"})]})]})})]})}),jsxRuntimeExports.jsx(AuthModal,{isOpen:tr,onClose:()=>rr(!1),onSuccess:()=>{Jt$2.success("Welcome to Ram's AI!")}})]})},Card=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx("div",{ref:tr,className:cn$1("rounded-lg border bg-card text-card-foreground shadow-sm",er),..._e}));Card.displayName="Card";const CardHeader=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx("div",{ref:tr,className:cn$1("flex flex-col space-y-1.5 p-6",er),..._e}));CardHeader.displayName="CardHeader";const CardTitle=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx("h3",{ref:tr,className:cn$1("text-2xl font-semibold leading-none tracking-tight",er),..._e}));CardTitle.displayName="CardTitle";const CardDescription=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx("p",{ref:tr,className:cn$1("text-sm text-muted-foreground",er),..._e}));CardDescription.displayName="CardDescription";const CardContent=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx("div",{ref:tr,className:cn$1("p-6 pt-0",er),..._e}));CardContent.displayName="CardContent";const CardFooter=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx("div",{ref:tr,className:cn$1("flex items-center p-6 pt-0",er),..._e}));CardFooter.displayName="CardFooter";function commonjsRequire(er){throw new Error('Could not dynamically require "'+er+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(_e,tr){module.exports=_e.pdfjsLib=tr()})(globalThis,()=>(()=>{var __webpack_modules__=[,(er,_e)=>{var Vs;Object.defineProperty(_e,"__esModule",{value:!0}),_e.VerbosityLevel=_e.Util=_e.UnknownErrorException=_e.UnexpectedResponseException=_e.TextRenderingMode=_e.RenderingIntentFlag=_e.PromiseCapability=_e.PermissionFlag=_e.PasswordResponses=_e.PasswordException=_e.PageActionEventType=_e.OPS=_e.MissingPDFException=_e.MAX_IMAGE_SIZE_TO_CACHE=_e.LINE_FACTOR=_e.LINE_DESCENT_FACTOR=_e.InvalidPDFException=_e.ImageKind=_e.IDENTITY_MATRIX=_e.FormatError=_e.FeatureTest=_e.FONT_IDENTITY_MATRIX=_e.DocumentActionEventType=_e.CMapCompressionType=_e.BaseException=_e.BASELINE_FACTOR=_e.AnnotationType=_e.AnnotationReplyType=_e.AnnotationPrefix=_e.AnnotationMode=_e.AnnotationFlag=_e.AnnotationFieldFlag=_e.AnnotationEditorType=_e.AnnotationEditorPrefix=_e.AnnotationEditorParamsType=_e.AnnotationBorderStyleType=_e.AnnotationActionEventType=_e.AbortException=void 0,_e.assert=$r,_e.bytesToString=Sn,_e.createValidAbsoluteUrl=pn,_e.getModificationDate=rs,_e.getUuid=Ts,_e.getVerbosityLevel=Ur,_e.info=Vr,_e.isArrayBuffer=Nn,_e.isArrayEqual=ns,_e.isNodeJS=void 0,_e.normalizeUnicode=ls,_e.objectFromMap=Cn,_e.objectSize=Kn,_e.setVerbosityLevel=Qr,_e.shadow=jr,_e.string32=kn,_e.stringToBytes=Bn,_e.stringToPDFString=jn,_e.stringToUTF8String=zn,_e.unreachable=Hr,_e.utf8StringToString=qn,_e.warn=Wr;const tr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");_e.isNodeJS=tr;const rr=[1,0,0,1,0,0];_e.IDENTITY_MATRIX=rr;const nr=[.001,0,0,.001,0,0];_e.FONT_IDENTITY_MATRIX=nr;const sr=1e7;_e.MAX_IMAGE_SIZE_TO_CACHE=sr;const ir=1.35;_e.LINE_FACTOR=ir;const or=.35;_e.LINE_DESCENT_FACTOR=or;const ar=or/ir;_e.BASELINE_FACTOR=ar;const lr={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};_e.RenderingIntentFlag=lr;const cr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};_e.AnnotationMode=cr;const Ar="pdfjs_internal_editor_";_e.AnnotationEditorPrefix=Ar;const ur={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};_e.AnnotationEditorType=ur;const dr={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};_e.AnnotationEditorParamsType=dr;const mr={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};_e.PermissionFlag=mr;const pr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};_e.TextRenderingMode=pr;const yr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};_e.ImageKind=yr;const hr={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};_e.AnnotationType=hr;const gr={GROUP:"Group",REPLY:"R"};_e.AnnotationReplyType=gr;const Cr={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};_e.AnnotationFlag=Cr;const Tr={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};_e.AnnotationFieldFlag=Tr;const Sr={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};_e.AnnotationBorderStyleType=Sr;const Nr={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};_e.AnnotationActionEventType=Nr;const _r={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};_e.DocumentActionEventType=_r;const vr={O:"PageOpen",C:"PageClose"};_e.PageActionEventType=vr;const br={ERRORS:0,WARNINGS:1,INFOS:5};_e.VerbosityLevel=br;const Pr={NONE:0,BINARY:1};_e.CMapCompressionType=Pr;const Er={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};_e.OPS=Er;const Rr={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};_e.PasswordResponses=Rr;let Ir=br.WARNINGS;function Qr(ts){Number.isInteger(ts)&&(Ir=ts)}function Ur(){return Ir}function Vr(ts){Ir>=br.INFOS&&console.log(`Info: ${ts}`)}function Wr(ts){Ir>=br.WARNINGS&&console.log(`Warning: ${ts}`)}function Hr(ts){throw new Error(ts)}function $r(ts,Mn){ts||Hr(Mn)}function Xr(ts){switch(ts==null?void 0:ts.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function pn(ts,Mn=null,Gn=null){if(!ts)return null;try{if(Gn&&typeof ts=="string"){if(Gn.addDefaultProtocol&&ts.startsWith("www.")){const js=ts.match(/\./g);(js==null?void 0:js.length)>=2&&(ts=`http://${ts}`)}if(Gn.tryConvertEncoding)try{ts=zn(ts)}catch{}}const os=Mn?new URL(ts,Mn):new URL(ts);if(Xr(os))return os}catch{}return null}function jr(ts,Mn,Gn,os=!1){return Object.defineProperty(ts,Mn,{value:Gn,enumerable:!os,configurable:!0,writable:!1}),Gn}const Br=function(){function Mn(Gn,os){this.constructor===Mn&&Hr("Cannot initialize BaseException."),this.message=Gn,this.name=os}return Mn.prototype=new Error,Mn.constructor=Mn,Mn}();_e.BaseException=Br;class Lr extends Br{constructor(Mn,Gn){super(Mn,"PasswordException"),this.code=Gn}}_e.PasswordException=Lr;class Or extends Br{constructor(Mn,Gn){super(Mn,"UnknownErrorException"),this.details=Gn}}_e.UnknownErrorException=Or;class zr extends Br{constructor(Mn){super(Mn,"InvalidPDFException")}}_e.InvalidPDFException=zr;class Gr extends Br{constructor(Mn){super(Mn,"MissingPDFException")}}_e.MissingPDFException=Gr;class Yr extends Br{constructor(Mn,Gn){super(Mn,"UnexpectedResponseException"),this.status=Gn}}_e.UnexpectedResponseException=Yr;class dn extends Br{constructor(Mn){super(Mn,"FormatError")}}_e.FormatError=dn;class En extends Br{constructor(Mn){super(Mn,"AbortException")}}_e.AbortException=En;function Sn(ts){(typeof ts!="object"||(ts==null?void 0:ts.length)===void 0)&&Hr("Invalid argument for bytesToString");const Mn=ts.length,Gn=8192;if(Mn<Gn)return String.fromCharCode.apply(null,ts);const os=[];for(let js=0;js<Mn;js+=Gn){const bs=Math.min(js+Gn,Mn),Rn=ts.subarray(js,bs);os.push(String.fromCharCode.apply(null,Rn))}return os.join("")}function Bn(ts){typeof ts!="string"&&Hr("Invalid argument for stringToBytes");const Mn=ts.length,Gn=new Uint8Array(Mn);for(let os=0;os<Mn;++os)Gn[os]=ts.charCodeAt(os)&255;return Gn}function kn(ts){return String.fromCharCode(ts>>24&255,ts>>16&255,ts>>8&255,ts&255)}function Kn(ts){return Object.keys(ts).length}function Cn(ts){const Mn=Object.create(null);for(const[Gn,os]of ts)Mn[Gn]=os;return Mn}function Jr(){const ts=new Uint8Array(4);return ts[0]=1,new Uint32Array(ts.buffer,0,1)[0]===1}function Fn(){try{return new Function(""),!0}catch{return!1}}class Zr{static get isLittleEndian(){return jr(this,"isLittleEndian",Jr())}static get isEvalSupported(){return jr(this,"isEvalSupported",Fn())}static get isOffscreenCanvasSupported(){return jr(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?jr(this,"platform",{isWin:!1,isMac:!1}):jr(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Mn,Gn;return jr(this,"isCSSRoundSupported",(Gn=(Mn=globalThis.CSS)==null?void 0:Mn.supports)==null?void 0:Gn.call(Mn,"width: round(1.5px, 1px)"))}}_e.FeatureTest=Zr;const hn=[...Array(256).keys()].map(ts=>ts.toString(16).padStart(2,"0"));class bn{static makeHexColor(Mn,Gn,os){return`#${hn[Mn]}${hn[Gn]}${hn[os]}`}static scaleMinMax(Mn,Gn){let os;Mn[0]?(Mn[0]<0&&(os=Gn[0],Gn[0]=Gn[1],Gn[1]=os),Gn[0]*=Mn[0],Gn[1]*=Mn[0],Mn[3]<0&&(os=Gn[2],Gn[2]=Gn[3],Gn[3]=os),Gn[2]*=Mn[3],Gn[3]*=Mn[3]):(os=Gn[0],Gn[0]=Gn[2],Gn[2]=os,os=Gn[1],Gn[1]=Gn[3],Gn[3]=os,Mn[1]<0&&(os=Gn[2],Gn[2]=Gn[3],Gn[3]=os),Gn[2]*=Mn[1],Gn[3]*=Mn[1],Mn[2]<0&&(os=Gn[0],Gn[0]=Gn[1],Gn[1]=os),Gn[0]*=Mn[2],Gn[1]*=Mn[2]),Gn[0]+=Mn[4],Gn[1]+=Mn[4],Gn[2]+=Mn[5],Gn[3]+=Mn[5]}static transform(Mn,Gn){return[Mn[0]*Gn[0]+Mn[2]*Gn[1],Mn[1]*Gn[0]+Mn[3]*Gn[1],Mn[0]*Gn[2]+Mn[2]*Gn[3],Mn[1]*Gn[2]+Mn[3]*Gn[3],Mn[0]*Gn[4]+Mn[2]*Gn[5]+Mn[4],Mn[1]*Gn[4]+Mn[3]*Gn[5]+Mn[5]]}static applyTransform(Mn,Gn){const os=Mn[0]*Gn[0]+Mn[1]*Gn[2]+Gn[4],js=Mn[0]*Gn[1]+Mn[1]*Gn[3]+Gn[5];return[os,js]}static applyInverseTransform(Mn,Gn){const os=Gn[0]*Gn[3]-Gn[1]*Gn[2],js=(Mn[0]*Gn[3]-Mn[1]*Gn[2]+Gn[2]*Gn[5]-Gn[4]*Gn[3])/os,bs=(-Mn[0]*Gn[1]+Mn[1]*Gn[0]+Gn[4]*Gn[1]-Gn[5]*Gn[0])/os;return[js,bs]}static getAxialAlignedBoundingBox(Mn,Gn){const os=this.applyTransform(Mn,Gn),js=this.applyTransform(Mn.slice(2,4),Gn),bs=this.applyTransform([Mn[0],Mn[3]],Gn),Rn=this.applyTransform([Mn[2],Mn[1]],Gn);return[Math.min(os[0],js[0],bs[0],Rn[0]),Math.min(os[1],js[1],bs[1],Rn[1]),Math.max(os[0],js[0],bs[0],Rn[0]),Math.max(os[1],js[1],bs[1],Rn[1])]}static inverseTransform(Mn){const Gn=Mn[0]*Mn[3]-Mn[1]*Mn[2];return[Mn[3]/Gn,-Mn[1]/Gn,-Mn[2]/Gn,Mn[0]/Gn,(Mn[2]*Mn[5]-Mn[4]*Mn[3])/Gn,(Mn[4]*Mn[1]-Mn[5]*Mn[0])/Gn]}static singularValueDecompose2dScale(Mn){const Gn=[Mn[0],Mn[2],Mn[1],Mn[3]],os=Mn[0]*Gn[0]+Mn[1]*Gn[2],js=Mn[0]*Gn[1]+Mn[1]*Gn[3],bs=Mn[2]*Gn[0]+Mn[3]*Gn[2],Rn=Mn[2]*Gn[1]+Mn[3]*Gn[3],es=(os+Rn)/2,ds=Math.sqrt((os+Rn)**2-4*(os*Rn-bs*js))/2,fs=es+ds||1,vs=es-ds||1;return[Math.sqrt(fs),Math.sqrt(vs)]}static normalizeRect(Mn){const Gn=Mn.slice(0);return Mn[0]>Mn[2]&&(Gn[0]=Mn[2],Gn[2]=Mn[0]),Mn[1]>Mn[3]&&(Gn[1]=Mn[3],Gn[3]=Mn[1]),Gn}static intersect(Mn,Gn){const os=Math.max(Math.min(Mn[0],Mn[2]),Math.min(Gn[0],Gn[2])),js=Math.min(Math.max(Mn[0],Mn[2]),Math.max(Gn[0],Gn[2]));if(os>js)return null;const bs=Math.max(Math.min(Mn[1],Mn[3]),Math.min(Gn[1],Gn[3])),Rn=Math.min(Math.max(Mn[1],Mn[3]),Math.max(Gn[1],Gn[3]));return bs>Rn?null:[os,bs,js,Rn]}static bezierBoundingBox(Mn,Gn,os,js,bs,Rn,es,ds){const fs=[],vs=[[],[]];let Ss,wn,yn,Ln,Dn,Zn,cs,As;for(let Qs=0;Qs<2;++Qs){if(Qs===0?(wn=6*Mn-12*os+6*bs,Ss=-3*Mn+9*os-9*bs+3*es,yn=3*os-3*Mn):(wn=6*Gn-12*js+6*Rn,Ss=-3*Gn+9*js-9*Rn+3*ds,yn=3*js-3*Gn),Math.abs(Ss)<1e-12){if(Math.abs(wn)<1e-12)continue;Ln=-yn/wn,0<Ln&&Ln<1&&fs.push(Ln);continue}cs=wn*wn-4*yn*Ss,As=Math.sqrt(cs),!(cs<0)&&(Dn=(-wn+As)/(2*Ss),0<Dn&&Dn<1&&fs.push(Dn),Zn=(-wn-As)/(2*Ss),0<Zn&&Zn<1&&fs.push(Zn))}let Rs=fs.length,Cs;const gs=Rs;for(;Rs--;)Ln=fs[Rs],Cs=1-Ln,vs[0][Rs]=Cs*Cs*Cs*Mn+3*Cs*Cs*Ln*os+3*Cs*Ln*Ln*bs+Ln*Ln*Ln*es,vs[1][Rs]=Cs*Cs*Cs*Gn+3*Cs*Cs*Ln*js+3*Cs*Ln*Ln*Rn+Ln*Ln*Ln*ds;return vs[0][gs]=Mn,vs[1][gs]=Gn,vs[0][gs+1]=es,vs[1][gs+1]=ds,vs[0].length=vs[1].length=gs+2,[Math.min(...vs[0]),Math.min(...vs[1]),Math.max(...vs[0]),Math.max(...vs[1])]}}_e.Util=bn;const In=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function jn(ts){if(ts[0]>=""){let Gn;if(ts[0]===""&&ts[1]===""?Gn="utf-16be":ts[0]===""&&ts[1]===""?Gn="utf-16le":ts[0]===""&&ts[1]===""&&ts[2]===""&&(Gn="utf-8"),Gn)try{const os=new TextDecoder(Gn,{fatal:!0}),js=Bn(ts);return os.decode(js)}catch(os){Wr(`stringToPDFString: "${os}".`)}}const Mn=[];for(let Gn=0,os=ts.length;Gn<os;Gn++){const js=In[ts.charCodeAt(Gn)];Mn.push(js?String.fromCharCode(js):ts.charAt(Gn))}return Mn.join("")}function zn(ts){return decodeURIComponent(escape(ts))}function qn(ts){return unescape(encodeURIComponent(ts))}function Nn(ts){return typeof ts=="object"&&(ts==null?void 0:ts.byteLength)!==void 0}function ns(ts,Mn){if(ts.length!==Mn.length)return!1;for(let Gn=0,os=ts.length;Gn<os;Gn++)if(ts[Gn]!==Mn[Gn])return!1;return!0}function rs(ts=new Date){return[ts.getUTCFullYear().toString(),(ts.getUTCMonth()+1).toString().padStart(2,"0"),ts.getUTCDate().toString().padStart(2,"0"),ts.getUTCHours().toString().padStart(2,"0"),ts.getUTCMinutes().toString().padStart(2,"0"),ts.getUTCSeconds().toString().padStart(2,"0")].join("")}class Is{constructor(){Vn(this,Vs,!1);this.promise=new Promise((Mn,Gn)=>{this.resolve=os=>{On(this,Vs,!0),Mn(os)},this.reject=os=>{On(this,Vs,!0),Gn(os)}})}get settled(){return kr(this,Vs)}}Vs=new WeakMap,_e.PromiseCapability=Is;let ps=null,Ps=null;function ls(ts){return ps||(ps=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ps=new Map([["","t"]])),ts.replaceAll(ps,(Mn,Gn,os)=>Gn?Gn.normalize("NFKC"):Ps.get(os))}function Ts(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ts=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ts);else for(let Mn=0;Mn<32;Mn++)ts[Mn]=Math.floor(Math.random()*255);return Sn(ts)}const Fs="pdfjs_internal_id_";_e.AnnotationPrefix=Fs},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var er,tr,rr,nr,Ku,Zp,or,ar,lr,cr,Ar,ur,dr,mr,pr,em,hr,gr,Nm,Tr,Sr;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(_r){if(typeof _r=="string"||_r instanceof URL?_r={url:_r}:(0,_util.isArrayBuffer)(_r)&&(_r={data:_r}),typeof _r!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!_r.url&&!_r.data&&!_r.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const vr=new PDFDocumentLoadingTask,{docId:br}=vr,Pr=_r.url?getUrlProp(_r.url):null,Er=_r.data?getDataProp(_r.data):null,Rr=_r.httpHeaders||null,Ir=_r.withCredentials===!0,Qr=_r.password??null,Ur=_r.range instanceof PDFDataRangeTransport?_r.range:null,Vr=Number.isInteger(_r.rangeChunkSize)&&_r.rangeChunkSize>0?_r.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Wr=_r.worker instanceof PDFWorker?_r.worker:null;const Hr=_r.verbosity,$r=typeof _r.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(_r.docBaseUrl)?_r.docBaseUrl:null,Xr=typeof _r.cMapUrl=="string"?_r.cMapUrl:null,pn=_r.cMapPacked!==!1,jr=_r.CMapReaderFactory||DefaultCMapReaderFactory,Br=typeof _r.standardFontDataUrl=="string"?_r.standardFontDataUrl:null,Lr=_r.StandardFontDataFactory||DefaultStandardFontDataFactory,Or=_r.stopAtErrors!==!0,zr=Number.isInteger(_r.maxImageSize)&&_r.maxImageSize>-1?_r.maxImageSize:-1,Gr=_r.isEvalSupported!==!1,Yr=typeof _r.isOffscreenCanvasSupported=="boolean"?_r.isOffscreenCanvasSupported:!_util.isNodeJS,dn=Number.isInteger(_r.canvasMaxAreaInBytes)?_r.canvasMaxAreaInBytes:-1,En=typeof _r.disableFontFace=="boolean"?_r.disableFontFace:_util.isNodeJS,Sn=_r.fontExtraProperties===!0,Bn=_r.enableXfa===!0,kn=_r.ownerDocument||globalThis.document,Kn=_r.disableRange===!0,Cn=_r.disableStream===!0,Jr=_r.disableAutoFetch===!0,Fn=_r.pdfBug===!0,Zr=Ur?Ur.length:_r.length??NaN,hn=typeof _r.useSystemFonts=="boolean"?_r.useSystemFonts:!_util.isNodeJS&&!En,bn=typeof _r.useWorkerFetch=="boolean"?_r.useWorkerFetch:jr===_display_utils.DOMCMapReaderFactory&&Lr===_display_utils.DOMStandardFontDataFactory&&Xr&&Br&&(0,_display_utils.isValidFetchUrl)(Xr,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Br,document.baseURI),In=_r.canvasFactory||new DefaultCanvasFactory({ownerDocument:kn}),jn=_r.filterFactory||new DefaultFilterFactory({docId:br,ownerDocument:kn}),zn=null;(0,_util.setVerbosityLevel)(Hr);const qn={canvasFactory:In,filterFactory:jn};if(bn||(qn.cMapReaderFactory=new jr({baseUrl:Xr,isCompressed:pn}),qn.standardFontDataFactory=new Lr({baseUrl:Br})),!Wr){const rs={verbosity:Hr,port:_worker_options.GlobalWorkerOptions.workerPort};Wr=rs.port?PDFWorker.fromPort(rs):new PDFWorker(rs),vr._worker=Wr}const Nn={docId:br,apiVersion:"3.11.174",data:Er,password:Qr,disableAutoFetch:Jr,rangeChunkSize:Vr,length:Zr,docBaseUrl:$r,enableXfa:Bn,evaluatorOptions:{maxImageSize:zr,disableFontFace:En,ignoreErrors:Or,isEvalSupported:Gr,isOffscreenCanvasSupported:Yr,canvasMaxAreaInBytes:dn,fontExtraProperties:Sn,useSystemFonts:hn,cMapUrl:bn?Xr:null,standardFontDataUrl:bn?Br:null}},ns={ignoreErrors:Or,isEvalSupported:Gr,disableFontFace:En,fontExtraProperties:Sn,enableXfa:Bn,ownerDocument:kn,disableAutoFetch:Jr,pdfBug:Fn,styleElement:zn};return Wr.promise.then(function(){if(vr.destroyed)throw new Error("Loading aborted");const rs=_fetchDocument(Wr,Nn),Is=new Promise(function(ps){let Ps;Ur?Ps=new _transport_stream.PDFDataTransportStream({length:Zr,initialData:Ur.initialData,progressiveDone:Ur.progressiveDone,contentDispositionFilename:Ur.contentDispositionFilename,disableRange:Kn,disableStream:Cn},Ur):Er||(Ps=(Ts=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Ts):(0,_display_utils.isValidFetchUrl)(Ts.url)?new _displayFetch_stream.PDFFetchStream(Ts):new _displayNetwork.PDFNetworkStream(Ts))({url:Pr,length:Zr,httpHeaders:Rr,withCredentials:Ir,rangeChunkSize:Vr,disableRange:Kn,disableStream:Cn})),ps(Ps)});return Promise.all([rs,Is]).then(function([ps,Ps]){if(vr.destroyed)throw new Error("Loading aborted");const ls=new _message_handler.MessageHandler(br,ps,Wr.port),Ts=new WorkerTransport(ls,vr,Ps,ns,qn);vr._transport=Ts,ls.send("Ready",null)})}).catch(vr._capability.reject),vr}async function _fetchDocument(_r,vr){if(_r.destroyed)throw new Error("Worker was destroyed");const br=await _r.messageHandler.sendWithPromise("GetDocRequest",vr,vr.data?[vr.data.buffer]:null);if(_r.destroyed)throw new Error("Worker was destroyed");return br}function getUrlProp(_r){if(_r instanceof URL)return _r.href;try{return new URL(_r,window.location).href}catch{if(_util.isNodeJS&&typeof _r=="string")return _r}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(_r){if(_util.isNodeJS&&typeof Buffer<"u"&&_r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(_r instanceof Uint8Array&&_r.byteLength===_r.buffer.byteLength)return _r;if(typeof _r=="string")return(0,_util.stringToBytes)(_r);if(typeof _r=="object"&&!isNaN(_r==null?void 0:_r.length)||(0,_util.isArrayBuffer)(_r))return new Uint8Array(_r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const _e=class _e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${$A(_e,er)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var vr,br,Pr;this.destroyed=!0;try{(vr=this._worker)!=null&&vr.port&&(this._worker._pendingDestroy=!0),await((br=this._transport)==null?void 0:br.destroy())}catch(Er){throw(Pr=this._worker)!=null&&Pr.port&&delete this._worker._pendingDestroy,Er}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};er=new WeakMap,Vn(_e,er,0);let PDFDocumentLoadingTask=_e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(vr,br,Pr=!1,Er=null){this.length=vr,this.initialData=br,this.progressiveDone=Pr,this.contentDispositionFilename=Er,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(vr){this._rangeListeners.push(vr)}addProgressListener(vr){this._progressListeners.push(vr)}addProgressiveReadListener(vr){this._progressiveReadListeners.push(vr)}addProgressiveDoneListener(vr){this._progressiveDoneListeners.push(vr)}onDataRange(vr,br){for(const Pr of this._rangeListeners)Pr(vr,br)}onDataProgress(vr,br){this._readyCapability.promise.then(()=>{for(const Pr of this._progressListeners)Pr(vr,br)})}onDataProgressiveRead(vr){this._readyCapability.promise.then(()=>{for(const br of this._progressiveReadListeners)br(vr)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const vr of this._progressiveDoneListeners)vr()})}transportReady(){this._readyCapability.resolve()}requestDataRange(vr,br){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(vr,br){this._pdfInfo=vr,this._transport=br,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Pr=>{if(!Pr)return Pr;const Er=[];for(const Rr in Pr)Er.push(...Pr[Rr]);return Er}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(vr){return this._transport.getPage(vr)}getPageIndex(vr){return this._transport.getPageIndex(vr)}getDestinations(){return this._transport.getDestinations()}getDestination(vr){return this._transport.getDestination(vr)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(vr=!1){return this._transport.startCleanup(vr||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(vr,br,Pr,Er=!1){Vn(this,nr);Vn(this,tr,null);Vn(this,rr,!1);this._pageIndex=vr,this._pageInfo=br,this._transport=Pr,this._stats=Er?new _display_utils.StatTimer:null,this._pdfBug=Er,this.commonObjs=Pr.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:vr,rotation:br=this.rotate,offsetX:Pr=0,offsetY:Er=0,dontFlip:Rr=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:vr,rotation:br,offsetX:Pr,offsetY:Er,dontFlip:Rr})}getAnnotations({intent:vr="display"}={}){const br=this._transport.getRenderingIntent(vr);return this._transport.getAnnotations(this._pageIndex,br.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var vr;return((vr=this._transport._htmlForXfa)==null?void 0:vr.children[this._pageIndex])||null}render({canvasContext:vr,viewport:br,intent:Pr="display",annotationMode:Er=_util.AnnotationMode.ENABLE,transform:Rr=null,background:Ir=null,optionalContentConfigPromise:Qr=null,annotationCanvasMap:Ur=null,pageColors:Vr=null,printAnnotationStorage:Wr=null}){var Lr,Or;(Lr=this._stats)==null||Lr.time("Overall");const Hr=this._transport.getRenderingIntent(Pr,Er,Wr);On(this,rr,!1),Un(this,nr,Zp).call(this),Qr||(Qr=this._transport.getOptionalContentConfig());let $r=this._intentStates.get(Hr.cacheKey);$r||($r=Object.create(null),this._intentStates.set(Hr.cacheKey,$r)),$r.streamReaderCancelTimeout&&(clearTimeout($r.streamReaderCancelTimeout),$r.streamReaderCancelTimeout=null);const Xr=!!(Hr.renderingIntent&_util.RenderingIntentFlag.PRINT);$r.displayReadyCapability||($r.displayReadyCapability=new _util.PromiseCapability,$r.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Or=this._stats)==null||Or.time("Page Request"),this._pumpOperatorList(Hr));const pn=zr=>{var Gr,Yr;$r.renderTasks.delete(jr),(this._maybeCleanupAfterRender||Xr)&&On(this,rr,!0),Un(this,nr,Ku).call(this,!Xr),zr?(jr.capability.reject(zr),this._abortOperatorList({intentState:$r,reason:zr instanceof Error?zr:new Error(zr)})):jr.capability.resolve(),(Gr=this._stats)==null||Gr.timeEnd("Rendering"),(Yr=this._stats)==null||Yr.timeEnd("Overall")},jr=new InternalRenderTask({callback:pn,params:{canvasContext:vr,viewport:br,transform:Rr,background:Ir},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Ur,operatorList:$r.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Xr,pdfBug:this._pdfBug,pageColors:Vr});($r.renderTasks||($r.renderTasks=new Set)).add(jr);const Br=jr.task;return Promise.all([$r.displayReadyCapability.promise,Qr]).then(([zr,Gr])=>{var Yr;if(this.destroyed){pn();return}(Yr=this._stats)==null||Yr.time("Rendering"),jr.initializeGraphics({transparency:zr,optionalContentConfig:Gr}),jr.operatorListChanged()}).catch(pn),Br}getOperatorList({intent:vr="display",annotationMode:br=_util.AnnotationMode.ENABLE,printAnnotationStorage:Pr=null}={}){var Ur;function Er(){Ir.operatorList.lastChunk&&(Ir.opListReadCapability.resolve(Ir.operatorList),Ir.renderTasks.delete(Qr))}const Rr=this._transport.getRenderingIntent(vr,br,Pr,!0);let Ir=this._intentStates.get(Rr.cacheKey);Ir||(Ir=Object.create(null),this._intentStates.set(Rr.cacheKey,Ir));let Qr;return Ir.opListReadCapability||(Qr=Object.create(null),Qr.operatorListChanged=Er,Ir.opListReadCapability=new _util.PromiseCapability,(Ir.renderTasks||(Ir.renderTasks=new Set)).add(Qr),Ir.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Ur=this._stats)==null||Ur.time("Page Request"),this._pumpOperatorList(Rr)),Ir.opListReadCapability.promise}streamTextContent({includeMarkedContent:vr=!1,disableNormalization:br=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:vr===!0,disableNormalization:br===!0},{highWaterMark:100,size(Er){return Er.items.length}})}getTextContent(vr={}){if(this._transport._htmlForXfa)return this.getXfa().then(Pr=>_xfa_text.XfaText.textContent(Pr));const br=this.streamTextContent(vr);return new Promise(function(Pr,Er){function Rr(){Ir.read().then(function({value:Ur,done:Vr}){if(Vr){Pr(Qr);return}Object.assign(Qr.styles,Ur.styles),Qr.items.push(...Ur.items),Rr()},Er)}const Ir=br.getReader(),Qr={items:[],styles:Object.create(null)};Rr()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const vr=[];for(const br of this._intentStates.values())if(this._abortOperatorList({intentState:br,reason:new Error("Page was destroyed."),force:!0}),!br.opListReadCapability)for(const Pr of br.renderTasks)vr.push(Pr.completed),Pr.cancel();return this.objs.clear(),On(this,rr,!1),Un(this,nr,Zp).call(this),Promise.all(vr)}cleanup(vr=!1){On(this,rr,!0);const br=Un(this,nr,Ku).call(this,!1);return vr&&br&&this._stats&&(this._stats=new _display_utils.StatTimer),br}_startRenderPage(vr,br){var Er,Rr;const Pr=this._intentStates.get(br);Pr&&((Er=this._stats)==null||Er.timeEnd("Page Request"),(Rr=Pr.displayReadyCapability)==null||Rr.resolve(vr))}_renderPageChunk(vr,br){for(let Pr=0,Er=vr.length;Pr<Er;Pr++)br.operatorList.fnArray.push(vr.fnArray[Pr]),br.operatorList.argsArray.push(vr.argsArray[Pr]);br.operatorList.lastChunk=vr.lastChunk,br.operatorList.separateAnnots=vr.separateAnnots;for(const Pr of br.renderTasks)Pr.operatorListChanged();vr.lastChunk&&Un(this,nr,Ku).call(this,!0)}_pumpOperatorList({renderingIntent:vr,cacheKey:br,annotationStorageSerializable:Pr}){const{map:Er,transfers:Rr}=Pr,Qr=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:vr,cacheKey:br,annotationStorage:Er},Rr).getReader(),Ur=this._intentStates.get(br);Ur.streamReader=Qr;const Vr=()=>{Qr.read().then(({value:Wr,done:Hr})=>{if(Hr){Ur.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Wr,Ur),Vr())},Wr=>{if(Ur.streamReader=null,!this._transport.destroyed){if(Ur.operatorList){Ur.operatorList.lastChunk=!0;for(const Hr of Ur.renderTasks)Hr.operatorListChanged();Un(this,nr,Ku).call(this,!0)}if(Ur.displayReadyCapability)Ur.displayReadyCapability.reject(Wr);else if(Ur.opListReadCapability)Ur.opListReadCapability.reject(Wr);else throw Wr}})};Vr()}_abortOperatorList({intentState:vr,reason:br,force:Pr=!1}){if(vr.streamReader){if(vr.streamReaderCancelTimeout&&(clearTimeout(vr.streamReaderCancelTimeout),vr.streamReaderCancelTimeout=null),!Pr){if(vr.renderTasks.size>0)return;if(br instanceof _display_utils.RenderingCancelledException){let Er=RENDERING_CANCELLED_TIMEOUT;br.extraDelay>0&&br.extraDelay<1e3&&(Er+=br.extraDelay),vr.streamReaderCancelTimeout=setTimeout(()=>{vr.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:vr,reason:br,force:!0})},Er);return}}if(vr.streamReader.cancel(new _util.AbortException(br.message)).catch(()=>{}),vr.streamReader=null,!this._transport.destroyed){for(const[Er,Rr]of this._intentStates)if(Rr===vr){this._intentStates.delete(Er);break}this.cleanup()}}}get stats(){return this._stats}}tr=new WeakMap,rr=new WeakMap,nr=new WeakSet,Ku=function(vr=!1){if(Un(this,nr,Zp).call(this),!kr(this,rr)||this.destroyed)return!1;if(vr)return On(this,tr,setTimeout(()=>{On(this,tr,null),Un(this,nr,Ku).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:br,operatorList:Pr}of this._intentStates.values())if(br.size>0||!Pr.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),On(this,rr,!1),!0},Zp=function(){kr(this,tr)&&(clearTimeout(kr(this,tr)),On(this,tr,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Vn(this,or,new Set);Vn(this,ar,Promise.resolve())}postMessage(vr,br){const Pr={data:structuredClone(vr,br?{transfer:br}:null)};kr(this,ar).then(()=>{for(const Er of kr(this,or))Er.call(this,Pr)})}addEventListener(vr,br){kr(this,or).add(br)}removeEventListener(vr,br){kr(this,or).delete(br)}terminate(){kr(this,or).clear()}}or=new WeakMap,ar=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const _r=(lr=document==null?void 0:document.currentScript)==null?void 0:lr.src;_r&&(PDFWorkerUtil.fallbackWorkerSrc=_r.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(_r,vr){let br;try{if(br=new URL(_r),!br.origin||br.origin==="null")return!1}catch{return!1}const Pr=new URL(vr,br);return br.origin===Pr.origin},PDFWorkerUtil.createCDNWrapper=function(_r){const vr=`importScripts("${_r}");`;return URL.createObjectURL(new Blob([vr]))}}const _PDFWorker=class _PDFWorker{constructor({name:_r=null,port:vr=null,verbosity:br=(0,_util.getVerbosityLevel)()}={}){var Pr;if(this.name=_r,this.destroyed=!1,this.verbosity=br,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,vr){if((Pr=kr(_PDFWorker,cr))!=null&&Pr.has(vr))throw new Error("Cannot use more than one PDFWorker per port.");(kr(_PDFWorker,cr)||On(_PDFWorker,cr,new WeakMap)).set(vr,this),this._initializeFromPort(vr);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(_r){this._port=_r,this._messageHandler=new _message_handler.MessageHandler("main","worker",_r),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:_r}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,_r)||(_r=PDFWorkerUtil.createCDNWrapper(new URL(_r,window.location).href));const vr=new Worker(_r),br=new _message_handler.MessageHandler("main","worker",vr),Pr=()=>{vr.removeEventListener("error",Er),br.destroy(),vr.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Er=()=>{this._webWorker||Pr()};vr.addEventListener("error",Er),br.on("test",Ir=>{if(vr.removeEventListener("error",Er),this.destroyed){Pr();return}Ir?(this._messageHandler=br,this._port=vr,this._webWorker=vr,this._readyCapability.resolve(),br.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),br.destroy(),vr.terminate())}),br.on("ready",Ir=>{if(vr.removeEventListener("error",Er),this.destroyed){Pr();return}try{Rr()}catch{this._setupFakeWorker()}});const Rr=()=>{const Ir=new Uint8Array;br.send("test",Ir,[Ir.buffer])};Rr();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(_r=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const vr=new LoopbackPort;this._port=vr;const br=`fake${PDFWorkerUtil.fakeWorkerId++}`,Pr=new _message_handler.MessageHandler(br+"_worker",br,vr);_r.setup(Pr,vr);const Er=new _message_handler.MessageHandler(br,br+"_worker",vr);this._messageHandler=Er,this._readyCapability.resolve(),Er.send("configure",{verbosity:this.verbosity})}).catch(_r=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${_r.message}".`))})}destroy(){var _r;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(_r=kr(_PDFWorker,cr))==null||_r.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(_r){var br;if(!(_r!=null&&_r.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const vr=(br=kr(this,cr))==null?void 0:br.get(_r.port);if(vr){if(vr._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return vr}return new _PDFWorker(_r)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var _r;try{return((_r=globalThis.pdfjsWorker)==null?void 0:_r.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};cr=new WeakMap,Vn(_PDFWorker,cr);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(vr,br,Pr,Er,Rr){Vn(this,pr);Vn(this,Ar,new Map);Vn(this,ur,new Map);Vn(this,dr,new Map);Vn(this,mr,null);this.messageHandler=vr,this.loadingTask=br,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Er.ownerDocument,styleElement:Er.styleElement}),this._params=Er,this.canvasFactory=Rr.canvasFactory,this.filterFactory=Rr.filterFactory,this.cMapReaderFactory=Rr.cMapReaderFactory,this.standardFontDataFactory=Rr.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Pr,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(vr,br=_util.AnnotationMode.ENABLE,Pr=null,Er=!1){let Rr=_util.RenderingIntentFlag.DISPLAY,Ir=_annotation_storage.SerializableEmpty;switch(vr){case"any":Rr=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Rr=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${vr}`)}switch(br){case _util.AnnotationMode.DISABLE:Rr+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Rr+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Rr+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Ir=(Rr&_util.RenderingIntentFlag.PRINT&&Pr instanceof _annotation_storage.PrintAnnotationStorage?Pr:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${br}`)}return Er&&(Rr+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Rr,cacheKey:`${Rr}_${Ir.hash}`,annotationStorageSerializable:Ir}}destroy(){var Pr;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Pr=kr(this,mr))==null||Pr.reject(new Error("Worker was destroyed during onPassword callback"));const vr=[];for(const Er of kr(this,ur).values())vr.push(Er._destroy());kr(this,ur).clear(),kr(this,dr).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const br=this.messageHandler.sendWithPromise("Terminate",null);return vr.push(br),Promise.all(vr).then(()=>{var Er;this.commonObjs.clear(),this.fontLoader.clear(),kr(this,Ar).clear(),this.filterFactory.destroy(),(Er=this._networkStream)==null||Er.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:vr,loadingTask:br}=this;vr.on("GetReader",(Pr,Er)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Rr=>{this._lastProgress={loaded:Rr.loaded,total:Rr.total}},Er.onPull=()=>{this._fullReader.read().then(function({value:Rr,done:Ir}){if(Ir){Er.close();return}(0,_util.assert)(Rr instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Er.enqueue(new Uint8Array(Rr),1,[Rr])}).catch(Rr=>{Er.error(Rr)})},Er.onCancel=Rr=>{this._fullReader.cancel(Rr),Er.ready.catch(Ir=>{if(!this.destroyed)throw Ir})}}),vr.on("ReaderHeadersReady",Pr=>{const Er=new _util.PromiseCapability,Rr=this._fullReader;return Rr.headersReady.then(()=>{var Ir;(!Rr.isStreamingSupported||!Rr.isRangeSupported)&&(this._lastProgress&&((Ir=br.onProgress)==null||Ir.call(br,this._lastProgress)),Rr.onProgress=Qr=>{var Ur;(Ur=br.onProgress)==null||Ur.call(br,{loaded:Qr.loaded,total:Qr.total})}),Er.resolve({isStreamingSupported:Rr.isStreamingSupported,isRangeSupported:Rr.isRangeSupported,contentLength:Rr.contentLength})},Er.reject),Er.promise}),vr.on("GetRangeReader",(Pr,Er)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Rr=this._networkStream.getRangeReader(Pr.begin,Pr.end);if(!Rr){Er.close();return}Er.onPull=()=>{Rr.read().then(function({value:Ir,done:Qr}){if(Qr){Er.close();return}(0,_util.assert)(Ir instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Er.enqueue(new Uint8Array(Ir),1,[Ir])}).catch(Ir=>{Er.error(Ir)})},Er.onCancel=Ir=>{Rr.cancel(Ir),Er.ready.catch(Qr=>{if(!this.destroyed)throw Qr})}}),vr.on("GetDoc",({pdfInfo:Pr})=>{this._numPages=Pr.numPages,this._htmlForXfa=Pr.htmlForXfa,delete Pr.htmlForXfa,br._capability.resolve(new PDFDocumentProxy(Pr,this))}),vr.on("DocException",function(Pr){let Er;switch(Pr.name){case"PasswordException":Er=new _util.PasswordException(Pr.message,Pr.code);break;case"InvalidPDFException":Er=new _util.InvalidPDFException(Pr.message);break;case"MissingPDFException":Er=new _util.MissingPDFException(Pr.message);break;case"UnexpectedResponseException":Er=new _util.UnexpectedResponseException(Pr.message,Pr.status);break;case"UnknownErrorException":Er=new _util.UnknownErrorException(Pr.message,Pr.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}br._capability.reject(Er)}),vr.on("PasswordRequest",Pr=>{if(On(this,mr,new _util.PromiseCapability),br.onPassword){const Er=Rr=>{Rr instanceof Error?kr(this,mr).reject(Rr):kr(this,mr).resolve({password:Rr})};try{br.onPassword(Er,Pr.code)}catch(Rr){kr(this,mr).reject(Rr)}}else kr(this,mr).reject(new _util.PasswordException(Pr.message,Pr.code));return kr(this,mr).promise}),vr.on("DataLoaded",Pr=>{var Er;(Er=br.onProgress)==null||Er.call(br,{loaded:Pr.length,total:Pr.length}),this.downloadInfoCapability.resolve(Pr)}),vr.on("StartRenderPage",Pr=>{if(this.destroyed)return;kr(this,ur).get(Pr.pageIndex)._startRenderPage(Pr.transparency,Pr.cacheKey)}),vr.on("commonobj",([Pr,Er,Rr])=>{var Ir;if(!this.destroyed&&!this.commonObjs.has(Pr))switch(Er){case"Font":const Qr=this._params;if("error"in Rr){const Wr=Rr.error;(0,_util.warn)(`Error during font loading: ${Wr}`),this.commonObjs.resolve(Pr,Wr);break}const Ur=Qr.pdfBug&&((Ir=globalThis.FontInspector)!=null&&Ir.enabled)?(Wr,Hr)=>globalThis.FontInspector.fontAdded(Wr,Hr):null,Vr=new _font_loader.FontFaceObject(Rr,{isEvalSupported:Qr.isEvalSupported,disableFontFace:Qr.disableFontFace,ignoreErrors:Qr.ignoreErrors,inspectFont:Ur});this.fontLoader.bind(Vr).catch(Wr=>vr.sendWithPromise("FontFallback",{id:Pr})).finally(()=>{!Qr.fontExtraProperties&&Vr.data&&(Vr.data=null),this.commonObjs.resolve(Pr,Vr)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Pr,Rr);break;default:throw new Error(`Got unknown common object type ${Er}`)}}),vr.on("obj",([Pr,Er,Rr,Ir])=>{var Ur;if(this.destroyed)return;const Qr=kr(this,ur).get(Er);if(!Qr.objs.has(Pr))switch(Rr){case"Image":if(Qr.objs.resolve(Pr,Ir),Ir){let Vr;if(Ir.bitmap){const{width:Wr,height:Hr}=Ir;Vr=Wr*Hr*4}else Vr=((Ur=Ir.data)==null?void 0:Ur.length)||0;Vr>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Qr._maybeCleanupAfterRender=!0)}break;case"Pattern":Qr.objs.resolve(Pr,Ir);break;default:throw new Error(`Got unknown object type ${Rr}`)}}),vr.on("DocProgress",Pr=>{var Er;this.destroyed||(Er=br.onProgress)==null||Er.call(br,{loaded:Pr.loaded,total:Pr.total})}),vr.on("FetchBuiltInCMap",Pr=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Pr):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),vr.on("FetchStandardFontData",Pr=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Pr):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Pr;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:vr,transfers:br}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:vr,filename:((Pr=this._fullReader)==null?void 0:Pr.filename)??null},br).finally(()=>{this.annotationStorage.resetModified()})}getPage(vr){if(!Number.isInteger(vr)||vr<=0||vr>this._numPages)return Promise.reject(new Error("Invalid page request."));const br=vr-1,Pr=kr(this,dr).get(br);if(Pr)return Pr;const Er=this.messageHandler.sendWithPromise("GetPage",{pageIndex:br}).then(Rr=>{if(this.destroyed)throw new Error("Transport destroyed");const Ir=new PDFPageProxy(br,Rr,this,this._params.pdfBug);return kr(this,ur).set(br,Ir),Ir});return kr(this,dr).set(br,Er),Er}getPageIndex(vr){return typeof vr!="object"||vr===null||!Number.isInteger(vr.num)||vr.num<0||!Number.isInteger(vr.gen)||vr.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:vr.num,gen:vr.gen})}getAnnotations(vr,br){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:vr,intent:br})}getFieldObjects(){return Un(this,pr,em).call(this,"GetFieldObjects")}hasJSActions(){return Un(this,pr,em).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(vr){return typeof vr!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:vr})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Un(this,pr,em).call(this,"GetDocJSActions")}getPageJSActions(vr){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:vr})}getStructTree(vr){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:vr})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(vr=>new _optional_content_config.OptionalContentConfig(vr))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const vr="GetMetadata",br=kr(this,Ar).get(vr);if(br)return br;const Pr=this.messageHandler.sendWithPromise(vr,null).then(Er=>{var Rr,Ir;return{info:Er[0],metadata:Er[1]?new _metadata.Metadata(Er[1]):null,contentDispositionFilename:((Rr=this._fullReader)==null?void 0:Rr.filename)??null,contentLength:((Ir=this._fullReader)==null?void 0:Ir.contentLength)??null}});return kr(this,Ar).set(vr,Pr),Pr}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(vr=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const br of kr(this,ur).values())if(!br.cleanup())throw new Error(`startCleanup: Page ${br.pageNumber} is currently rendering.`);this.commonObjs.clear(),vr||this.fontLoader.clear(),kr(this,Ar).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:vr,enableXfa:br}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:vr,enableXfa:br})}}Ar=new WeakMap,ur=new WeakMap,dr=new WeakMap,mr=new WeakMap,pr=new WeakSet,em=function(vr,br=null){const Pr=kr(this,Ar).get(vr);if(Pr)return Pr;const Er=this.messageHandler.sendWithPromise(vr,br);return kr(this,Ar).set(vr,Er),Er};class PDFObjects{constructor(){Vn(this,gr);Vn(this,hr,Object.create(null))}get(vr,br=null){if(br){const Er=Un(this,gr,Nm).call(this,vr);return Er.capability.promise.then(()=>br(Er.data)),null}const Pr=kr(this,hr)[vr];if(!(Pr!=null&&Pr.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${vr}.`);return Pr.data}has(vr){const br=kr(this,hr)[vr];return(br==null?void 0:br.capability.settled)||!1}resolve(vr,br=null){const Pr=Un(this,gr,Nm).call(this,vr);Pr.data=br,Pr.capability.resolve()}clear(){var vr;for(const br in kr(this,hr)){const{data:Pr}=kr(this,hr)[br];(vr=Pr==null?void 0:Pr.bitmap)==null||vr.close()}On(this,hr,Object.create(null))}}hr=new WeakMap,gr=new WeakSet,Nm=function(vr){var br;return(br=kr(this,hr))[vr]||(br[vr]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(vr){Vn(this,Tr,null);On(this,Tr,vr),this.onContinue=null}get promise(){return kr(this,Tr).capability.promise}cancel(vr=0){kr(this,Tr).cancel(null,vr)}get separateAnnots(){const{separateAnnots:vr}=kr(this,Tr).operatorList;if(!vr)return!1;const{annotationCanvasMap:br}=kr(this,Tr);return vr.form||vr.canvas&&(br==null?void 0:br.size)>0}}Tr=new WeakMap,exports.RenderTask=RenderTask;const Nr=class Nr{constructor({callback:vr,params:br,objs:Pr,commonObjs:Er,annotationCanvasMap:Rr,operatorList:Ir,pageIndex:Qr,canvasFactory:Ur,filterFactory:Vr,useRequestAnimationFrame:Wr=!1,pdfBug:Hr=!1,pageColors:$r=null}){this.callback=vr,this.params=br,this.objs=Pr,this.commonObjs=Er,this.annotationCanvasMap=Rr,this.operatorListIdx=null,this.operatorList=Ir,this._pageIndex=Qr,this.canvasFactory=Ur,this.filterFactory=Vr,this._pdfBug=Hr,this.pageColors=$r,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Wr===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=br.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:vr=!1,optionalContentConfig:br}){var Qr,Ur;if(this.cancelled)return;if(this._canvas){if(kr(Nr,Sr).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");kr(Nr,Sr).add(this._canvas)}this._pdfBug&&((Qr=globalThis.StepperManager)!=null&&Qr.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Pr,viewport:Er,transform:Rr,background:Ir}=this.params;this.gfx=new _canvas.CanvasGraphics(Pr,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:br},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Rr,viewport:Er,transparency:vr,background:Ir}),this.operatorListIdx=0,this.graphicsReady=!0,(Ur=this.graphicsReadyCallback)==null||Ur.call(this)}cancel(vr=null,br=0){var Pr;this.running=!1,this.cancelled=!0,(Pr=this.gfx)==null||Pr.endDrawing(),kr(Nr,Sr).delete(this._canvas),this.callback(vr||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,br))}operatorListChanged(){var vr;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(vr=this.stepper)==null||vr.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),kr(Nr,Sr).delete(this._canvas),this.callback())))}};Sr=new WeakMap,Vn(Nr,Sr,new WeakSet);let InternalRenderTask=Nr;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(er,_e,tr)=>{var lr,cr,Ar,W0,dr;Object.defineProperty(_e,"__esModule",{value:!0}),_e.SerializableEmpty=_e.PrintAnnotationStorage=_e.AnnotationStorage=void 0;var rr=tr(1),nr=tr(4),sr=tr(8);const ir=Object.freeze({map:null,hash:"",transfers:void 0});_e.SerializableEmpty=ir;class or{constructor(){Vn(this,Ar);Vn(this,lr,!1);Vn(this,cr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(pr,yr){const hr=kr(this,cr).get(pr);return hr===void 0?yr:Object.assign(yr,hr)}getRawValue(pr){return kr(this,cr).get(pr)}remove(pr){if(kr(this,cr).delete(pr),kr(this,cr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const yr of kr(this,cr).values())if(yr instanceof nr.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(pr,yr){const hr=kr(this,cr).get(pr);let gr=!1;if(hr!==void 0)for(const[Cr,Tr]of Object.entries(yr))hr[Cr]!==Tr&&(gr=!0,hr[Cr]=Tr);else gr=!0,kr(this,cr).set(pr,yr);gr&&Un(this,Ar,W0).call(this),yr instanceof nr.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(yr.constructor._type)}has(pr){return kr(this,cr).has(pr)}getAll(){return kr(this,cr).size>0?(0,rr.objectFromMap)(kr(this,cr)):null}setAll(pr){for(const[yr,hr]of Object.entries(pr))this.setValue(yr,hr)}get size(){return kr(this,cr).size}resetModified(){kr(this,lr)&&(On(this,lr,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ar(this)}get serializable(){if(kr(this,cr).size===0)return ir;const pr=new Map,yr=new sr.MurmurHash3_64,hr=[],gr=Object.create(null);let Cr=!1;for(const[Tr,Sr]of kr(this,cr)){const Nr=Sr instanceof nr.AnnotationEditor?Sr.serialize(!1,gr):Sr;Nr&&(pr.set(Tr,Nr),yr.update(`${Tr}:${JSON.stringify(Nr)}`),Cr||(Cr=!!Nr.bitmap))}if(Cr)for(const Tr of pr.values())Tr.bitmap&&hr.push(Tr.bitmap);return pr.size>0?{map:pr,hash:yr.hexdigest(),transfers:hr}:ir}}lr=new WeakMap,cr=new WeakMap,Ar=new WeakSet,W0=function(){kr(this,lr)||(On(this,lr,!0),typeof this.onSetModified=="function"&&this.onSetModified())},_e.AnnotationStorage=or;class ar extends or{constructor(yr){super();Vn(this,dr);const{map:hr,hash:gr,transfers:Cr}=yr.serializable,Tr=structuredClone(hr,Cr?{transfer:Cr}:null);On(this,dr,{map:Tr,hash:gr,transfers:Cr})}get print(){(0,rr.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return kr(this,dr)}}dr=new WeakMap,_e.PrintAnnotationStorage=ar},(er,_e,tr)=>{var ar,lr,cr,Ar,ur,dr,mr,pr,yr,hr,gr,Cr,Tr,Sr,Nr,Fm,jm,br,Lm,km,q0,X0,Y0,Dm,J0;Object.defineProperty(_e,"__esModule",{value:!0}),_e.AnnotationEditor=void 0;var rr=tr(5),nr=tr(1),sr=tr(6);const Wr=class Wr{constructor($r){Vn(this,Nr);Vn(this,ar,"");Vn(this,lr,!1);Vn(this,cr,null);Vn(this,Ar,null);Vn(this,ur,null);Vn(this,dr,!1);Vn(this,mr,null);Vn(this,pr,this.focusin.bind(this));Vn(this,yr,this.focusout.bind(this));Vn(this,hr,!1);Vn(this,gr,!1);Vn(this,Cr,!1);oo(this,"_initialOptions",Object.create(null));oo(this,"_uiManager",null);oo(this,"_focusEventsAllowed",!0);oo(this,"_l10nPromise",null);Vn(this,Tr,!1);Vn(this,Sr,Wr._zIndex++);this.constructor===Wr&&(0,nr.unreachable)("Cannot initialize AnnotationEditor."),this.parent=$r.parent,this.id=$r.id,this.width=this.height=null,this.pageIndex=$r.parent.pageIndex,this.name=$r.name,this.div=null,this._uiManager=$r.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=$r.isCentered,this._structTreeParentId=null;const{rotation:Xr,rawDims:{pageWidth:pn,pageHeight:jr,pageX:Br,pageY:Lr}}=this.parent.viewport;this.rotation=Xr,this.pageRotation=(360+Xr-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[pn,jr],this.pageTranslation=[Br,Lr];const[Or,zr]=this.parentDimensions;this.x=$r.x/Or,this.y=$r.y/zr,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,nr.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement($r){const Xr=new or({id:$r.parent.getNextId(),parent:$r.parent,uiManager:$r._uiManager});Xr.annotationElementId=$r.annotationElementId,Xr.deleted=!0,Xr._uiManager.addToAnnotationStorage(Xr)}static initialize($r,Xr=null){if(Wr._l10nPromise||(Wr._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(jr=>[jr,$r.get(jr)]))),Xr!=null&&Xr.strings)for(const jr of Xr.strings)Wr._l10nPromise.set(jr,$r.get(jr));if(Wr._borderLineWidth!==-1)return;const pn=getComputedStyle(document.documentElement);Wr._borderLineWidth=parseFloat(pn.getPropertyValue("--outline-width"))||0}static updateDefaultParams($r,Xr){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting($r){return!1}static paste($r,Xr){(0,nr.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return kr(this,Tr)}set _isDraggable($r){var Xr;On(this,Tr,$r),(Xr=this.div)==null||Xr.classList.toggle("draggable",$r)}center(){const[$r,Xr]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Xr/($r*2),this.y+=this.width*$r/(Xr*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Xr/($r*2),this.y-=this.width*$r/(Xr*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands($r){this._uiManager.addCommands($r)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=kr(this,Sr)}setParent($r){$r!==null&&(this.pageIndex=$r.pageIndex,this.pageDimensions=$r.pageDimensions),this.parent=$r}focusin($r){this._focusEventsAllowed&&(kr(this,hr)?On(this,hr,!1):this.parent.setSelected(this))}focusout($r){var pn;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const Xr=$r.relatedTarget;Xr!=null&&Xr.closest(`#${this.id}`)||($r.preventDefault(),(pn=this.parent)!=null&&pn.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt($r,Xr,pn,jr){const[Br,Lr]=this.parentDimensions;[pn,jr]=this.screenToPageTranslation(pn,jr),this.x=($r+pn)/Br,this.y=(Xr+jr)/Lr,this.fixAndSetPosition()}translate($r,Xr){Un(this,Nr,Fm).call(this,this.parentDimensions,$r,Xr)}translateInPage($r,Xr){Un(this,Nr,Fm).call(this,this.pageDimensions,$r,Xr),this.div.scrollIntoView({block:"nearest"})}drag($r,Xr){const[pn,jr]=this.parentDimensions;if(this.x+=$r/pn,this.y+=Xr/jr,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Gr,y:Yr}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Gr,Yr)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Br,y:Lr}=this;const[Or,zr]=Un(this,Nr,jm).call(this);Br+=Or,Lr+=zr,this.div.style.left=`${(100*Br).toFixed(2)}%`,this.div.style.top=`${(100*Lr).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[$r,Xr]=this.pageDimensions;let{x:pn,y:jr,width:Br,height:Lr}=this;switch(Br*=$r,Lr*=Xr,pn*=$r,jr*=Xr,this.rotation){case 0:pn=Math.max(0,Math.min($r-Br,pn)),jr=Math.max(0,Math.min(Xr-Lr,jr));break;case 90:pn=Math.max(0,Math.min($r-Lr,pn)),jr=Math.min(Xr,Math.max(Br,jr));break;case 180:pn=Math.min($r,Math.max(Br,pn)),jr=Math.min(Xr,Math.max(Lr,jr));break;case 270:pn=Math.min($r,Math.max(Lr,pn)),jr=Math.max(0,Math.min(Xr-Br,jr));break}this.x=pn/=$r,this.y=jr/=Xr;const[Or,zr]=Un(this,Nr,jm).call(this);pn+=Or,jr+=zr;const{style:Gr}=this.div;Gr.left=`${(100*pn).toFixed(2)}%`,Gr.top=`${(100*jr).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation($r,Xr){var pn;return Un(pn=Wr,br,Lm).call(pn,$r,Xr,this.parentRotation)}pageTranslationToScreen($r,Xr){var pn;return Un(pn=Wr,br,Lm).call(pn,$r,Xr,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:$r,pageDimensions:[Xr,pn]}=this,jr=Xr*$r,Br=pn*$r;return nr.FeatureTest.isCSSRoundSupported?[Math.round(jr),Math.round(Br)]:[jr,Br]}setDims($r,Xr){var Br;const[pn,jr]=this.parentDimensions;this.div.style.width=`${(100*$r/pn).toFixed(2)}%`,kr(this,dr)||(this.div.style.height=`${(100*Xr/jr).toFixed(2)}%`),(Br=kr(this,cr))==null||Br.classList.toggle("small",$r<Wr.SMALL_EDITOR_SIZE||Xr<Wr.SMALL_EDITOR_SIZE)}fixDims(){const{style:$r}=this.div,{height:Xr,width:pn}=$r,jr=pn.endsWith("%"),Br=!kr(this,dr)&&Xr.endsWith("%");if(jr&&Br)return;const[Lr,Or]=this.parentDimensions;jr||($r.width=`${(100*parseFloat(pn)/Lr).toFixed(2)}%`),!kr(this,dr)&&!Br&&($r.height=`${(100*parseFloat(Xr)/Or).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(kr(this,cr))return;const $r=On(this,cr,document.createElement("button"));$r.className="altText";const Xr=await Wr._l10nPromise.get("editor_alt_text_button_label");$r.textContent=Xr,$r.setAttribute("aria-label",Xr),$r.tabIndex="0",$r.addEventListener("contextmenu",sr.noContextMenu),$r.addEventListener("pointerdown",pn=>pn.stopPropagation()),$r.addEventListener("click",pn=>{pn.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),$r.addEventListener("keydown",pn=>{pn.target===$r&&pn.key==="Enter"&&(pn.preventDefault(),this._uiManager.editAltText(this))}),Un(this,Nr,Dm).call(this),this.div.append($r),Wr.SMALL_EDITOR_SIZE||(Wr.SMALL_EDITOR_SIZE=Math.min(128,Math.round($r.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:kr(this,ar),decorative:kr(this,lr)}}set altTextData({altText:$r,decorative:Xr}){kr(this,ar)===$r&&kr(this,lr)===Xr||(On(this,ar,$r),On(this,lr,Xr),Un(this,Nr,Dm).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",kr(this,pr)),this.div.addEventListener("focusout",kr(this,yr));const[$r,Xr]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Xr/$r).toFixed(2)}%`,this.div.style.maxHeight=`${(100*$r/Xr).toFixed(2)}%`);const[pn,jr]=this.getInitialTranslation();return this.translate(pn,jr),(0,rr.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown($r){const{isMac:Xr}=nr.FeatureTest.platform;if($r.button!==0||$r.ctrlKey&&Xr){$r.preventDefault();return}On(this,hr,!0),Un(this,Nr,J0).call(this,$r)}moveInDOM(){var $r;($r=this.parent)==null||$r.moveEditorInDOM(this)}_setParentAndPosition($r,Xr,pn){$r.changeParent(this),this.x=Xr,this.y=pn,this.fixAndSetPosition()}getRect($r,Xr){const pn=this.parentScale,[jr,Br]=this.pageDimensions,[Lr,Or]=this.pageTranslation,zr=$r/pn,Gr=Xr/pn,Yr=this.x*jr,dn=this.y*Br,En=this.width*jr,Sn=this.height*Br;switch(this.rotation){case 0:return[Yr+zr+Lr,Br-dn-Gr-Sn+Or,Yr+zr+En+Lr,Br-dn-Gr+Or];case 90:return[Yr+Gr+Lr,Br-dn+zr+Or,Yr+Gr+Sn+Lr,Br-dn+zr+En+Or];case 180:return[Yr-zr-En+Lr,Br-dn+Gr+Or,Yr-zr+Lr,Br-dn+Gr+Sn+Or];case 270:return[Yr-Gr-Sn+Lr,Br-dn-zr-En+Or,Yr-Gr+Lr,Br-dn-zr+Or];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords($r,Xr){const[pn,jr,Br,Lr]=$r,Or=Br-pn,zr=Lr-jr;switch(this.rotation){case 0:return[pn,Xr-Lr,Or,zr];case 90:return[pn,Xr-jr,zr,Or];case 180:return[Br,Xr-jr,Or,zr];case 270:return[Br,Xr-Lr,zr,Or];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){On(this,Cr,!0)}disableEditMode(){On(this,Cr,!1)}isInEditMode(){return kr(this,Cr)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var $r,Xr;($r=this.div)==null||$r.addEventListener("focusin",kr(this,pr)),(Xr=this.div)==null||Xr.addEventListener("focusout",kr(this,yr))}serialize($r=!1,Xr=null){(0,nr.unreachable)("An editor must be serializable")}static deserialize($r,Xr,pn){const jr=new this.prototype.constructor({parent:Xr,id:Xr.getNextId(),uiManager:pn});jr.rotation=$r.rotation;const[Br,Lr]=jr.pageDimensions,[Or,zr,Gr,Yr]=jr.getRectInCurrentCoords($r.rect,Lr);return jr.x=Or/Br,jr.y=zr/Lr,jr.width=Gr/Br,jr.height=Yr/Lr,jr}remove(){var $r;this.div.removeEventListener("focusin",kr(this,pr)),this.div.removeEventListener("focusout",kr(this,yr)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),($r=kr(this,cr))==null||$r.remove(),On(this,cr,null),On(this,Ar,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Un(this,Nr,q0).call(this),kr(this,mr).classList.remove("hidden"))}select(){var $r;this.makeResizable(),($r=this.div)==null||$r.classList.add("selectedEditor")}unselect(){var $r,Xr,pn;($r=kr(this,mr))==null||$r.classList.add("hidden"),(Xr=this.div)==null||Xr.classList.remove("selectedEditor"),(pn=this.div)!=null&&pn.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams($r,Xr){}disableEditing(){kr(this,cr)&&(kr(this,cr).hidden=!0)}enableEditing(){kr(this,cr)&&(kr(this,cr).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return kr(this,gr)}set isEditing($r){On(this,gr,$r),this.parent&&($r?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio($r,Xr){On(this,dr,!0);const pn=$r/Xr,{style:jr}=this.div;jr.aspectRatio=pn,jr.height="auto"}static get MIN_SIZE(){return 16}};ar=new WeakMap,lr=new WeakMap,cr=new WeakMap,Ar=new WeakMap,ur=new WeakMap,dr=new WeakMap,mr=new WeakMap,pr=new WeakMap,yr=new WeakMap,hr=new WeakMap,gr=new WeakMap,Cr=new WeakMap,Tr=new WeakMap,Sr=new WeakMap,Nr=new WeakSet,Fm=function([$r,Xr],pn,jr){[pn,jr]=this.screenToPageTranslation(pn,jr),this.x+=pn/$r,this.y+=jr/Xr,this.fixAndSetPosition()},jm=function(){const[$r,Xr]=this.parentDimensions,{_borderLineWidth:pn}=Wr,jr=pn/$r,Br=pn/Xr;switch(this.rotation){case 90:return[-jr,Br];case 180:return[jr,Br];case 270:return[jr,-Br];default:return[-jr,-Br]}},br=new WeakSet,Lm=function($r,Xr,pn){switch(pn){case 90:return[Xr,-$r];case 180:return[-$r,-Xr];case 270:return[-Xr,$r];default:return[$r,Xr]}},km=function($r){switch($r){case 90:{const[Xr,pn]=this.pageDimensions;return[0,-Xr/pn,pn/Xr,0]}case 180:return[-1,0,0,-1];case 270:{const[Xr,pn]=this.pageDimensions;return[0,Xr/pn,-pn/Xr,0]}default:return[1,0,0,1]}},q0=function(){if(kr(this,mr))return;On(this,mr,document.createElement("div")),kr(this,mr).classList.add("resizers");const $r=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||$r.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Xr of $r){const pn=document.createElement("div");kr(this,mr).append(pn),pn.classList.add("resizer",Xr),pn.addEventListener("pointerdown",Un(this,Nr,X0).bind(this,Xr)),pn.addEventListener("contextmenu",sr.noContextMenu)}this.div.prepend(kr(this,mr))},X0=function($r,Xr){Xr.preventDefault();const{isMac:pn}=nr.FeatureTest.platform;if(Xr.button!==0||Xr.ctrlKey&&pn)return;const jr=Un(this,Nr,Y0).bind(this,$r),Br=this._isDraggable;this._isDraggable=!1;const Lr={passive:!0,capture:!0};window.addEventListener("pointermove",jr,Lr);const Or=this.x,zr=this.y,Gr=this.width,Yr=this.height,dn=this.parent.div.style.cursor,En=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Xr.target).cursor;const Sn=()=>{this._isDraggable=Br,window.removeEventListener("pointerup",Sn),window.removeEventListener("blur",Sn),window.removeEventListener("pointermove",jr,Lr),this.parent.div.style.cursor=dn,this.div.style.cursor=En;const Bn=this.x,kn=this.y,Kn=this.width,Cn=this.height;Bn===Or&&kn===zr&&Kn===Gr&&Cn===Yr||this.addCommands({cmd:()=>{this.width=Kn,this.height=Cn,this.x=Bn,this.y=kn;const[Jr,Fn]=this.parentDimensions;this.setDims(Jr*Kn,Fn*Cn),this.fixAndSetPosition()},undo:()=>{this.width=Gr,this.height=Yr,this.x=Or,this.y=zr;const[Jr,Fn]=this.parentDimensions;this.setDims(Jr*Gr,Fn*Yr),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Sn),window.addEventListener("blur",Sn)},Y0=function($r,Xr){const[pn,jr]=this.parentDimensions,Br=this.x,Lr=this.y,Or=this.width,zr=this.height,Gr=Wr.MIN_SIZE/pn,Yr=Wr.MIN_SIZE/jr,dn=ls=>Math.round(ls*1e4)/1e4,En=Un(this,Nr,km).call(this,this.rotation),Sn=(ls,Ts)=>[En[0]*ls+En[2]*Ts,En[1]*ls+En[3]*Ts],Bn=Un(this,Nr,km).call(this,360-this.rotation),kn=(ls,Ts)=>[Bn[0]*ls+Bn[2]*Ts,Bn[1]*ls+Bn[3]*Ts];let Kn,Cn,Jr=!1,Fn=!1;switch($r){case"topLeft":Jr=!0,Kn=(ls,Ts)=>[0,0],Cn=(ls,Ts)=>[ls,Ts];break;case"topMiddle":Kn=(ls,Ts)=>[ls/2,0],Cn=(ls,Ts)=>[ls/2,Ts];break;case"topRight":Jr=!0,Kn=(ls,Ts)=>[ls,0],Cn=(ls,Ts)=>[0,Ts];break;case"middleRight":Fn=!0,Kn=(ls,Ts)=>[ls,Ts/2],Cn=(ls,Ts)=>[0,Ts/2];break;case"bottomRight":Jr=!0,Kn=(ls,Ts)=>[ls,Ts],Cn=(ls,Ts)=>[0,0];break;case"bottomMiddle":Kn=(ls,Ts)=>[ls/2,Ts],Cn=(ls,Ts)=>[ls/2,0];break;case"bottomLeft":Jr=!0,Kn=(ls,Ts)=>[0,Ts],Cn=(ls,Ts)=>[ls,0];break;case"middleLeft":Fn=!0,Kn=(ls,Ts)=>[0,Ts/2],Cn=(ls,Ts)=>[ls,Ts/2];break}const Zr=Kn(Or,zr),hn=Cn(Or,zr);let bn=Sn(...hn);const In=dn(Br+bn[0]),jn=dn(Lr+bn[1]);let zn=1,qn=1,[Nn,ns]=this.screenToPageTranslation(Xr.movementX,Xr.movementY);if([Nn,ns]=kn(Nn/pn,ns/jr),Jr){const ls=Math.hypot(Or,zr);zn=qn=Math.max(Math.min(Math.hypot(hn[0]-Zr[0]-Nn,hn[1]-Zr[1]-ns)/ls,1/Or,1/zr),Gr/Or,Yr/zr)}else Fn?zn=Math.max(Gr,Math.min(1,Math.abs(hn[0]-Zr[0]-Nn)))/Or:qn=Math.max(Yr,Math.min(1,Math.abs(hn[1]-Zr[1]-ns)))/zr;const rs=dn(Or*zn),Is=dn(zr*qn);bn=Sn(...Cn(rs,Is));const ps=In-bn[0],Ps=jn-bn[1];this.width=rs,this.height=Is,this.x=ps,this.y=Ps,this.setDims(pn*rs,jr*Is),this.fixAndSetPosition()},Dm=async function(){var pn;const $r=kr(this,cr);if(!$r)return;if(!kr(this,ar)&&!kr(this,lr)){$r.classList.remove("done"),(pn=kr(this,Ar))==null||pn.remove();return}Wr._l10nPromise.get("editor_alt_text_edit_button_label").then(jr=>{$r.setAttribute("aria-label",jr)});let Xr=kr(this,Ar);if(!Xr){On(this,Ar,Xr=document.createElement("span")),Xr.className="tooltip",Xr.setAttribute("role","tooltip");const jr=Xr.id=`alt-text-tooltip-${this.id}`;$r.setAttribute("aria-describedby",jr);const Br=100;$r.addEventListener("mouseenter",()=>{On(this,ur,setTimeout(()=>{On(this,ur,null),kr(this,Ar).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},Br))}),$r.addEventListener("mouseleave",()=>{var Lr;clearTimeout(kr(this,ur)),On(this,ur,null),(Lr=kr(this,Ar))==null||Lr.classList.remove("show")})}$r.classList.add("done"),Xr.innerText=kr(this,lr)?await Wr._l10nPromise.get("editor_alt_text_decorative_tooltip"):kr(this,ar),Xr.parentNode||$r.append(Xr)},J0=function($r){if(!this._isDraggable)return;const Xr=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let pn,jr;Xr&&(pn={passive:!0,capture:!0},jr=Lr=>{const[Or,zr]=this.screenToPageTranslation(Lr.movementX,Lr.movementY);this._uiManager.dragSelectedEditors(Or,zr)},window.addEventListener("pointermove",jr,pn));const Br=()=>{if(window.removeEventListener("pointerup",Br),window.removeEventListener("blur",Br),Xr&&window.removeEventListener("pointermove",jr,pn),On(this,hr,!1),!this._uiManager.endDragSession()){const{isMac:Lr}=nr.FeatureTest.platform;$r.ctrlKey&&!Lr||$r.shiftKey||$r.metaKey&&Lr?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",Br),window.addEventListener("blur",Br)},Vn(Wr,br),oo(Wr,"_borderLineWidth",-1),oo(Wr,"_colorManager",new rr.ColorManager),oo(Wr,"_zIndex",1),oo(Wr,"SMALL_EDITOR_SIZE",0);let ir=Wr;_e.AnnotationEditor=ir;class or extends ir{constructor($r){super($r),this.annotationElementId=$r.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(er,_e,tr)=>{var dr,mr,pr,yr,hr,Um,Tr,Sr,Nr,_r,vr,Z0,Er,Rr,Ir,Qr,Ur,Vr,Wr,Hr,$r,Xr,pn,jr,Br,Lr,Or,zr,Gr,Yr,dn,En,Sn,Bn,kn,Kn,Cn,Jr,Fn,Zr,hn,bn,In,jn,zn,qn,Nn,ex,Om,Mm,tm,Qm,Vm,yl,vp,tx,rx,$m,Ep,Hm;Object.defineProperty(_e,"__esModule",{value:!0}),_e.KeyboardManager=_e.CommandManager=_e.ColorManager=_e.AnnotationEditorUIManager=void 0,_e.bindEvents=sr,_e.opacityToHex=ir;var rr=tr(1),nr=tr(6);function sr(bs,Rn,es){for(const ds of es)Rn.addEventListener(ds,bs[ds].bind(bs))}function ir(bs){return Math.round(Math.min(255,Math.max(1,255*bs))).toString(16).padStart(2,"0")}class or{constructor(){Vn(this,dr,0)}getId(){return`${rr.AnnotationEditorPrefix}${$A(this,dr)._++}`}}dr=new WeakMap;const Cr=class Cr{constructor(){Vn(this,hr);Vn(this,mr,(0,rr.getUuid)());Vn(this,pr,0);Vn(this,yr,null)}static get _isSVGFittingCanvas(){const Rn='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',ds=new OffscreenCanvas(1,3).getContext("2d"),fs=new Image;fs.src=Rn;const vs=fs.decode().then(()=>(ds.drawImage(fs,0,0,1,1,0,0,1,3),new Uint32Array(ds.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,rr.shadow)(this,"_isSVGFittingCanvas",vs)}async getFromFile(Rn){const{lastModified:es,name:ds,size:fs,type:vs}=Rn;return Un(this,hr,Um).call(this,`${es}_${ds}_${fs}_${vs}`,Rn)}async getFromUrl(Rn){return Un(this,hr,Um).call(this,Rn,Rn)}async getFromId(Rn){kr(this,yr)||On(this,yr,new Map);const es=kr(this,yr).get(Rn);return es?es.bitmap?(es.refCounter+=1,es):es.file?this.getFromFile(es.file):this.getFromUrl(es.url):null}getSvgUrl(Rn){const es=kr(this,yr).get(Rn);return es!=null&&es.isSvg?es.svgUrl:null}deleteId(Rn){kr(this,yr)||On(this,yr,new Map);const es=kr(this,yr).get(Rn);es&&(es.refCounter-=1,es.refCounter===0&&(es.bitmap=null))}isValidId(Rn){return Rn.startsWith(`image_${kr(this,mr)}_`)}};mr=new WeakMap,pr=new WeakMap,yr=new WeakMap,hr=new WeakSet,Um=async function(Rn,es){kr(this,yr)||On(this,yr,new Map);let ds=kr(this,yr).get(Rn);if(ds===null)return null;if(ds!=null&&ds.bitmap)return ds.refCounter+=1,ds;try{ds||(ds={bitmap:null,id:`image_${kr(this,mr)}_${$A(this,pr)._++}`,refCounter:0,isSvg:!1});let fs;if(typeof es=="string"){ds.url=es;const vs=await fetch(es);if(!vs.ok)throw new Error(vs.statusText);fs=await vs.blob()}else fs=ds.file=es;if(fs.type==="image/svg+xml"){const vs=Cr._isSVGFittingCanvas,Ss=new FileReader,wn=new Image,yn=new Promise((Ln,Dn)=>{wn.onload=()=>{ds.bitmap=wn,ds.isSvg=!0,Ln()},Ss.onload=async()=>{const Zn=ds.svgUrl=Ss.result;wn.src=await vs?`${Zn}#svgView(preserveAspectRatio(none))`:Zn},wn.onerror=Ss.onerror=Dn});Ss.readAsDataURL(fs),await yn}else ds.bitmap=await createImageBitmap(fs);ds.refCounter=1}catch(fs){console.error(fs),ds=null}return kr(this,yr).set(Rn,ds),ds&&kr(this,yr).set(ds.id,ds),ds};let ar=Cr;class lr{constructor(Rn=128){Vn(this,Tr,[]);Vn(this,Sr,!1);Vn(this,Nr);Vn(this,_r,-1);On(this,Nr,Rn)}add({cmd:Rn,undo:es,mustExec:ds,type:fs=NaN,overwriteIfSameType:vs=!1,keepUndo:Ss=!1}){if(ds&&Rn(),kr(this,Sr))return;const wn={cmd:Rn,undo:es,type:fs};if(kr(this,_r)===-1){kr(this,Tr).length>0&&(kr(this,Tr).length=0),On(this,_r,0),kr(this,Tr).push(wn);return}if(vs&&kr(this,Tr)[kr(this,_r)].type===fs){Ss&&(wn.undo=kr(this,Tr)[kr(this,_r)].undo),kr(this,Tr)[kr(this,_r)]=wn;return}const yn=kr(this,_r)+1;yn===kr(this,Nr)?kr(this,Tr).splice(0,1):(On(this,_r,yn),yn<kr(this,Tr).length&&kr(this,Tr).splice(yn)),kr(this,Tr).push(wn)}undo(){kr(this,_r)!==-1&&(On(this,Sr,!0),kr(this,Tr)[kr(this,_r)].undo(),On(this,Sr,!1),On(this,_r,kr(this,_r)-1))}redo(){kr(this,_r)<kr(this,Tr).length-1&&(On(this,_r,kr(this,_r)+1),On(this,Sr,!0),kr(this,Tr)[kr(this,_r)].cmd(),On(this,Sr,!1))}hasSomethingToUndo(){return kr(this,_r)!==-1}hasSomethingToRedo(){return kr(this,_r)<kr(this,Tr).length-1}destroy(){On(this,Tr,null)}}Tr=new WeakMap,Sr=new WeakMap,Nr=new WeakMap,_r=new WeakMap,_e.CommandManager=lr;class cr{constructor(Rn){Vn(this,vr);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:es}=rr.FeatureTest.platform;for(const[ds,fs,vs={}]of Rn)for(const Ss of ds){const wn=Ss.startsWith("mac+");es&&wn?(this.callbacks.set(Ss.slice(4),{callback:fs,options:vs}),this.allKeys.add(Ss.split("+").at(-1))):!es&&!wn&&(this.callbacks.set(Ss,{callback:fs,options:vs}),this.allKeys.add(Ss.split("+").at(-1)))}}exec(Rn,es){if(!this.allKeys.has(es.key))return;const ds=this.callbacks.get(Un(this,vr,Z0).call(this,es));if(!ds)return;const{callback:fs,options:{bubbles:vs=!1,args:Ss=[],checker:wn=null}}=ds;wn&&!wn(Rn,es)||(fs.bind(Rn,...Ss)(),vs||(es.stopPropagation(),es.preventDefault()))}}vr=new WeakSet,Z0=function(Rn){Rn.altKey&&this.buffer.push("alt"),Rn.ctrlKey&&this.buffer.push("ctrl"),Rn.metaKey&&this.buffer.push("meta"),Rn.shiftKey&&this.buffer.push("shift"),this.buffer.push(Rn.key);const es=this.buffer.join("+");return this.buffer.length=0,es},_e.KeyboardManager=cr;const Pr=class Pr{get _colors(){const Rn=new Map([["CanvasText",null],["Canvas",null]]);return(0,nr.getColorValues)(Rn),(0,rr.shadow)(this,"_colors",Rn)}convert(Rn){const es=(0,nr.getRGB)(Rn);if(!window.matchMedia("(forced-colors: active)").matches)return es;for(const[ds,fs]of this._colors)if(fs.every((vs,Ss)=>vs===es[Ss]))return Pr._colorsMapping.get(ds);return es}getHexCode(Rn){const es=this._colors.get(Rn);return es?rr.Util.makeHexColor(...es):Rn}};oo(Pr,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Ar=Pr;_e.ColorManager=Ar;const js=class js{constructor(Rn,es,ds,fs,vs,Ss){Vn(this,Nn);Vn(this,Er,null);Vn(this,Rr,new Map);Vn(this,Ir,new Map);Vn(this,Qr,null);Vn(this,Ur,null);Vn(this,Vr,new lr);Vn(this,Wr,0);Vn(this,Hr,new Set);Vn(this,$r,null);Vn(this,Xr,null);Vn(this,pn,new Set);Vn(this,jr,null);Vn(this,Br,new or);Vn(this,Lr,!1);Vn(this,Or,!1);Vn(this,zr,null);Vn(this,Gr,rr.AnnotationEditorType.NONE);Vn(this,Yr,new Set);Vn(this,dn,null);Vn(this,En,this.blur.bind(this));Vn(this,Sn,this.focus.bind(this));Vn(this,Bn,this.copy.bind(this));Vn(this,kn,this.cut.bind(this));Vn(this,Kn,this.paste.bind(this));Vn(this,Cn,this.keydown.bind(this));Vn(this,Jr,this.onEditingAction.bind(this));Vn(this,Fn,this.onPageChanging.bind(this));Vn(this,Zr,this.onScaleChanging.bind(this));Vn(this,hn,this.onRotationChanging.bind(this));Vn(this,bn,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Vn(this,In,[0,0]);Vn(this,jn,null);Vn(this,zn,null);Vn(this,qn,null);On(this,zn,Rn),On(this,qn,es),On(this,Qr,ds),this._eventBus=fs,this._eventBus._on("editingaction",kr(this,Jr)),this._eventBus._on("pagechanging",kr(this,Fn)),this._eventBus._on("scalechanging",kr(this,Zr)),this._eventBus._on("rotationchanging",kr(this,hn)),On(this,Ur,vs.annotationStorage),On(this,jr,vs.filterFactory),On(this,dn,Ss),this.viewParameters={realScale:nr.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Rn=js.prototype,es=vs=>{const{activeElement:Ss}=document;return Ss&&kr(vs,zn).contains(Ss)&&vs.hasSomethingToControl()},ds=this.TRANSLATE_SMALL,fs=this.TRANSLATE_BIG;return(0,rr.shadow)(this,"_keyboardManager",new cr([[["ctrl+a","mac+meta+a"],Rn.selectAll],[["ctrl+z","mac+meta+z"],Rn.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Rn.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Rn.delete],[["Escape","mac+Escape"],Rn.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Rn.translateSelectedEditors,{args:[-ds,0],checker:es}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Rn.translateSelectedEditors,{args:[-fs,0],checker:es}],[["ArrowRight","mac+ArrowRight"],Rn.translateSelectedEditors,{args:[ds,0],checker:es}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Rn.translateSelectedEditors,{args:[fs,0],checker:es}],[["ArrowUp","mac+ArrowUp"],Rn.translateSelectedEditors,{args:[0,-ds],checker:es}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Rn.translateSelectedEditors,{args:[0,-fs],checker:es}],[["ArrowDown","mac+ArrowDown"],Rn.translateSelectedEditors,{args:[0,ds],checker:es}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Rn.translateSelectedEditors,{args:[0,fs],checker:es}]]))}destroy(){Un(this,Nn,tm).call(this),Un(this,Nn,Om).call(this),this._eventBus._off("editingaction",kr(this,Jr)),this._eventBus._off("pagechanging",kr(this,Fn)),this._eventBus._off("scalechanging",kr(this,Zr)),this._eventBus._off("rotationchanging",kr(this,hn));for(const Rn of kr(this,Ir).values())Rn.destroy();kr(this,Ir).clear(),kr(this,Rr).clear(),kr(this,pn).clear(),On(this,Er,null),kr(this,Yr).clear(),kr(this,Vr).destroy(),kr(this,Qr).destroy()}get hcmFilter(){return(0,rr.shadow)(this,"hcmFilter",kr(this,dn)?kr(this,jr).addHCMFilter(kr(this,dn).foreground,kr(this,dn).background):"none")}get direction(){return(0,rr.shadow)(this,"direction",getComputedStyle(kr(this,zn)).direction)}editAltText(Rn){var es;(es=kr(this,Qr))==null||es.editAltText(this,Rn)}onPageChanging({pageNumber:Rn}){On(this,Wr,Rn-1)}focusMainContainer(){kr(this,zn).focus()}findParent(Rn,es){for(const ds of kr(this,Ir).values()){const{x:fs,y:vs,width:Ss,height:wn}=ds.div.getBoundingClientRect();if(Rn>=fs&&Rn<=fs+Ss&&es>=vs&&es<=vs+wn)return ds}return null}disableUserSelect(Rn=!1){kr(this,qn).classList.toggle("noUserSelect",Rn)}addShouldRescale(Rn){kr(this,pn).add(Rn)}removeShouldRescale(Rn){kr(this,pn).delete(Rn)}onScaleChanging({scale:Rn}){this.commitOrRemove(),this.viewParameters.realScale=Rn*nr.PixelsPerInch.PDF_TO_CSS_UNITS;for(const es of kr(this,pn))es.onScaleChanging()}onRotationChanging({pagesRotation:Rn}){this.commitOrRemove(),this.viewParameters.rotation=Rn}addToAnnotationStorage(Rn){!Rn.isEmpty()&&kr(this,Ur)&&!kr(this,Ur).has(Rn.id)&&kr(this,Ur).setValue(Rn.id,Rn)}blur(){if(!this.hasSelection)return;const{activeElement:Rn}=document;for(const es of kr(this,Yr))if(es.div.contains(Rn)){On(this,zr,[es,Rn]),es._focusEventsAllowed=!1;break}}focus(){if(!kr(this,zr))return;const[Rn,es]=kr(this,zr);On(this,zr,null),es.addEventListener("focusin",()=>{Rn._focusEventsAllowed=!0},{once:!0}),es.focus()}addEditListeners(){Un(this,Nn,Mm).call(this),Un(this,Nn,Qm).call(this)}removeEditListeners(){Un(this,Nn,tm).call(this),Un(this,Nn,Vm).call(this)}copy(Rn){var ds;if(Rn.preventDefault(),(ds=kr(this,Er))==null||ds.commitOrRemove(),!this.hasSelection)return;const es=[];for(const fs of kr(this,Yr)){const vs=fs.serialize(!0);vs&&es.push(vs)}es.length!==0&&Rn.clipboardData.setData("application/pdfjs",JSON.stringify(es))}cut(Rn){this.copy(Rn),this.delete()}paste(Rn){Rn.preventDefault();const{clipboardData:es}=Rn;for(const vs of es.items)for(const Ss of kr(this,Xr))if(Ss.isHandlingMimeForPasting(vs.type)){Ss.paste(vs,this.currentLayer);return}let ds=es.getData("application/pdfjs");if(!ds)return;try{ds=JSON.parse(ds)}catch(vs){(0,rr.warn)(`paste: "${vs.message}".`);return}if(!Array.isArray(ds))return;this.unselectAll();const fs=this.currentLayer;try{const vs=[];for(const yn of ds){const Ln=fs.deserialize(yn);if(!Ln)return;vs.push(Ln)}const Ss=()=>{for(const yn of vs)Un(this,Nn,$m).call(this,yn);Un(this,Nn,Hm).call(this,vs)},wn=()=>{for(const yn of vs)yn.remove()};this.addCommands({cmd:Ss,undo:wn,mustExec:!0})}catch(vs){(0,rr.warn)(`paste: "${vs.message}".`)}}keydown(Rn){var es;(es=this.getActive())!=null&&es.shouldGetKeyboardEvents()||js._keyboardManager.exec(this,Rn)}onEditingAction(Rn){["undo","redo","delete","selectAll"].includes(Rn.name)&&this[Rn.name]()}setEditingState(Rn){Rn?(Un(this,Nn,ex).call(this),Un(this,Nn,Mm).call(this),Un(this,Nn,Qm).call(this),Un(this,Nn,yl).call(this,{isEditing:kr(this,Gr)!==rr.AnnotationEditorType.NONE,isEmpty:Un(this,Nn,Ep).call(this),hasSomethingToUndo:kr(this,Vr).hasSomethingToUndo(),hasSomethingToRedo:kr(this,Vr).hasSomethingToRedo(),hasSelectedEditor:!1})):(Un(this,Nn,Om).call(this),Un(this,Nn,tm).call(this),Un(this,Nn,Vm).call(this),Un(this,Nn,yl).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Rn){if(!kr(this,Xr)){On(this,Xr,Rn);for(const es of kr(this,Xr))Un(this,Nn,vp).call(this,es.defaultPropertiesToUpdate)}}getId(){return kr(this,Br).getId()}get currentLayer(){return kr(this,Ir).get(kr(this,Wr))}getLayer(Rn){return kr(this,Ir).get(Rn)}get currentPageIndex(){return kr(this,Wr)}addLayer(Rn){kr(this,Ir).set(Rn.pageIndex,Rn),kr(this,Lr)?Rn.enable():Rn.disable()}removeLayer(Rn){kr(this,Ir).delete(Rn.pageIndex)}updateMode(Rn,es=null){if(kr(this,Gr)!==Rn){if(On(this,Gr,Rn),Rn===rr.AnnotationEditorType.NONE){this.setEditingState(!1),Un(this,Nn,rx).call(this);return}this.setEditingState(!0),Un(this,Nn,tx).call(this),this.unselectAll();for(const ds of kr(this,Ir).values())ds.updateMode(Rn);if(es){for(const ds of kr(this,Rr).values())if(ds.annotationElementId===es){this.setSelected(ds),ds.enterInEditMode();break}}}}updateToolbar(Rn){Rn!==kr(this,Gr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Rn})}updateParams(Rn,es){if(kr(this,Xr)){if(Rn===rr.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Rn);return}for(const ds of kr(this,Yr))ds.updateParams(Rn,es);for(const ds of kr(this,Xr))ds.updateDefaultParams(Rn,es)}}enableWaiting(Rn=!1){if(kr(this,Or)!==Rn){On(this,Or,Rn);for(const es of kr(this,Ir).values())Rn?es.disableClick():es.enableClick(),es.div.classList.toggle("waiting",Rn)}}getEditors(Rn){const es=[];for(const ds of kr(this,Rr).values())ds.pageIndex===Rn&&es.push(ds);return es}getEditor(Rn){return kr(this,Rr).get(Rn)}addEditor(Rn){kr(this,Rr).set(Rn.id,Rn)}removeEditor(Rn){var es;kr(this,Rr).delete(Rn.id),this.unselect(Rn),(!Rn.annotationElementId||!kr(this,Hr).has(Rn.annotationElementId))&&((es=kr(this,Ur))==null||es.remove(Rn.id))}addDeletedAnnotationElement(Rn){kr(this,Hr).add(Rn.annotationElementId),Rn.deleted=!0}isDeletedAnnotationElement(Rn){return kr(this,Hr).has(Rn)}removeDeletedAnnotationElement(Rn){kr(this,Hr).delete(Rn.annotationElementId),Rn.deleted=!1}setActiveEditor(Rn){kr(this,Er)!==Rn&&(On(this,Er,Rn),Rn&&Un(this,Nn,vp).call(this,Rn.propertiesToUpdate))}toggleSelected(Rn){if(kr(this,Yr).has(Rn)){kr(this,Yr).delete(Rn),Rn.unselect(),Un(this,Nn,yl).call(this,{hasSelectedEditor:this.hasSelection});return}kr(this,Yr).add(Rn),Rn.select(),Un(this,Nn,vp).call(this,Rn.propertiesToUpdate),Un(this,Nn,yl).call(this,{hasSelectedEditor:!0})}setSelected(Rn){for(const es of kr(this,Yr))es!==Rn&&es.unselect();kr(this,Yr).clear(),kr(this,Yr).add(Rn),Rn.select(),Un(this,Nn,vp).call(this,Rn.propertiesToUpdate),Un(this,Nn,yl).call(this,{hasSelectedEditor:!0})}isSelected(Rn){return kr(this,Yr).has(Rn)}unselect(Rn){Rn.unselect(),kr(this,Yr).delete(Rn),Un(this,Nn,yl).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return kr(this,Yr).size!==0}undo(){kr(this,Vr).undo(),Un(this,Nn,yl).call(this,{hasSomethingToUndo:kr(this,Vr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Un(this,Nn,Ep).call(this)})}redo(){kr(this,Vr).redo(),Un(this,Nn,yl).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:kr(this,Vr).hasSomethingToRedo(),isEmpty:Un(this,Nn,Ep).call(this)})}addCommands(Rn){kr(this,Vr).add(Rn),Un(this,Nn,yl).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Un(this,Nn,Ep).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Rn=[...kr(this,Yr)],es=()=>{for(const fs of Rn)fs.remove()},ds=()=>{for(const fs of Rn)Un(this,Nn,$m).call(this,fs)};this.addCommands({cmd:es,undo:ds,mustExec:!0})}commitOrRemove(){var Rn;(Rn=kr(this,Er))==null||Rn.commitOrRemove()}hasSomethingToControl(){return kr(this,Er)||this.hasSelection}selectAll(){for(const Rn of kr(this,Yr))Rn.commit();Un(this,Nn,Hm).call(this,kr(this,Rr).values())}unselectAll(){if(kr(this,Er)){kr(this,Er).commitOrRemove();return}if(this.hasSelection){for(const Rn of kr(this,Yr))Rn.unselect();kr(this,Yr).clear(),Un(this,Nn,yl).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Rn,es,ds=!1){if(ds||this.commitOrRemove(),!this.hasSelection)return;kr(this,In)[0]+=Rn,kr(this,In)[1]+=es;const[fs,vs]=kr(this,In),Ss=[...kr(this,Yr)],wn=1e3;kr(this,jn)&&clearTimeout(kr(this,jn)),On(this,jn,setTimeout(()=>{On(this,jn,null),kr(this,In)[0]=kr(this,In)[1]=0,this.addCommands({cmd:()=>{for(const yn of Ss)kr(this,Rr).has(yn.id)&&yn.translateInPage(fs,vs)},undo:()=>{for(const yn of Ss)kr(this,Rr).has(yn.id)&&yn.translateInPage(-fs,-vs)},mustExec:!1})},wn));for(const yn of Ss)yn.translateInPage(Rn,es)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),On(this,$r,new Map);for(const Rn of kr(this,Yr))kr(this,$r).set(Rn,{savedX:Rn.x,savedY:Rn.y,savedPageIndex:Rn.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!kr(this,$r))return!1;this.disableUserSelect(!1);const Rn=kr(this,$r);On(this,$r,null);let es=!1;for(const[{x:fs,y:vs,pageIndex:Ss},wn]of Rn)wn.newX=fs,wn.newY=vs,wn.newPageIndex=Ss,es||(es=fs!==wn.savedX||vs!==wn.savedY||Ss!==wn.savedPageIndex);if(!es)return!1;const ds=(fs,vs,Ss,wn)=>{if(kr(this,Rr).has(fs.id)){const yn=kr(this,Ir).get(wn);yn?fs._setParentAndPosition(yn,vs,Ss):(fs.pageIndex=wn,fs.x=vs,fs.y=Ss)}};return this.addCommands({cmd:()=>{for(const[fs,{newX:vs,newY:Ss,newPageIndex:wn}]of Rn)ds(fs,vs,Ss,wn)},undo:()=>{for(const[fs,{savedX:vs,savedY:Ss,savedPageIndex:wn}]of Rn)ds(fs,vs,Ss,wn)},mustExec:!0}),!0}dragSelectedEditors(Rn,es){if(kr(this,$r))for(const ds of kr(this,$r).keys())ds.drag(Rn,es)}rebuild(Rn){if(Rn.parent===null){const es=this.getLayer(Rn.pageIndex);es?(es.changeParent(Rn),es.addOrRebuild(Rn)):(this.addEditor(Rn),this.addToAnnotationStorage(Rn),Rn.rebuild())}else Rn.parent.addOrRebuild(Rn)}isActive(Rn){return kr(this,Er)===Rn}getActive(){return kr(this,Er)}getMode(){return kr(this,Gr)}get imageManager(){return(0,rr.shadow)(this,"imageManager",new ar)}};Er=new WeakMap,Rr=new WeakMap,Ir=new WeakMap,Qr=new WeakMap,Ur=new WeakMap,Vr=new WeakMap,Wr=new WeakMap,Hr=new WeakMap,$r=new WeakMap,Xr=new WeakMap,pn=new WeakMap,jr=new WeakMap,Br=new WeakMap,Lr=new WeakMap,Or=new WeakMap,zr=new WeakMap,Gr=new WeakMap,Yr=new WeakMap,dn=new WeakMap,En=new WeakMap,Sn=new WeakMap,Bn=new WeakMap,kn=new WeakMap,Kn=new WeakMap,Cn=new WeakMap,Jr=new WeakMap,Fn=new WeakMap,Zr=new WeakMap,hn=new WeakMap,bn=new WeakMap,In=new WeakMap,jn=new WeakMap,zn=new WeakMap,qn=new WeakMap,Nn=new WeakSet,ex=function(){window.addEventListener("focus",kr(this,Sn)),window.addEventListener("blur",kr(this,En))},Om=function(){window.removeEventListener("focus",kr(this,Sn)),window.removeEventListener("blur",kr(this,En))},Mm=function(){window.addEventListener("keydown",kr(this,Cn),{capture:!0})},tm=function(){window.removeEventListener("keydown",kr(this,Cn),{capture:!0})},Qm=function(){document.addEventListener("copy",kr(this,Bn)),document.addEventListener("cut",kr(this,kn)),document.addEventListener("paste",kr(this,Kn))},Vm=function(){document.removeEventListener("copy",kr(this,Bn)),document.removeEventListener("cut",kr(this,kn)),document.removeEventListener("paste",kr(this,Kn))},yl=function(Rn){Object.entries(Rn).some(([ds,fs])=>kr(this,bn)[ds]!==fs)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(kr(this,bn),Rn)})},vp=function(Rn){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Rn})},tx=function(){if(!kr(this,Lr)){On(this,Lr,!0);for(const Rn of kr(this,Ir).values())Rn.enable()}},rx=function(){if(this.unselectAll(),kr(this,Lr)){On(this,Lr,!1);for(const Rn of kr(this,Ir).values())Rn.disable()}},$m=function(Rn){const es=kr(this,Ir).get(Rn.pageIndex);es?es.addOrRebuild(Rn):this.addEditor(Rn)},Ep=function(){if(kr(this,Rr).size===0)return!0;if(kr(this,Rr).size===1)for(const Rn of kr(this,Rr).values())return Rn.isEmpty();return!1},Hm=function(Rn){kr(this,Yr).clear();for(const es of Rn)es.isEmpty()||(kr(this,Yr).add(es),es.select());Un(this,Nn,yl).call(this,{hasSelectedEditor:!0})},oo(js,"TRANSLATE_SMALL",1),oo(js,"TRANSLATE_BIG",10);let ur=js;_e.AnnotationEditorUIManager=ur},(er,_e,tr)=>{var Wr,Hr,$r,Xr,pn,jr,Br,Lr,Or,zr,Gr,Yr,zu,Gu,Km,rm,nm,_p,wp;Object.defineProperty(_e,"__esModule",{value:!0}),_e.StatTimer=_e.RenderingCancelledException=_e.PixelsPerInch=_e.PageViewport=_e.PDFDateString=_e.DOMStandardFontDataFactory=_e.DOMSVGFactory=_e.DOMFilterFactory=_e.DOMCanvasFactory=_e.DOMCMapReaderFactory=void 0,_e.deprecated=_r,_e.getColorValues=Rr,_e.getCurrentTransform=Ir,_e.getCurrentTransformInverse=Qr,_e.getFilenameFromUrl=hr,_e.getPdfFilenameFromUrl=gr,_e.getRGB=Er,_e.getXfaPageViewport=Pr,_e.isDataScheme=pr,_e.isPdfFile=yr,_e.isValidFetchUrl=Tr,_e.loadScript=Nr,_e.noContextMenu=Sr,_e.setLayerDimensions=Ur;var rr=tr(7),nr=tr(1);const sr="http://www.w3.org/2000/svg",Vr=class Vr{};oo(Vr,"CSS",96),oo(Vr,"PDF",72),oo(Vr,"PDF_TO_CSS_UNITS",Vr.CSS/Vr.PDF);let ir=Vr;_e.PixelsPerInch=ir;class or extends rr.BaseFilterFactory{constructor({docId:Zr,ownerDocument:hn=globalThis.document}={}){super();Vn(this,Yr);Vn(this,Wr);Vn(this,Hr);Vn(this,$r);Vn(this,Xr);Vn(this,pn);Vn(this,jr);Vn(this,Br);Vn(this,Lr);Vn(this,Or);Vn(this,zr);Vn(this,Gr,0);On(this,$r,Zr),On(this,Xr,hn)}addFilter(Zr){if(!Zr)return"none";let hn=kr(this,Yr,zu).get(Zr);if(hn)return hn;let bn,In,jn,zn;if(Zr.length===1){const rs=Zr[0],Is=new Array(256);for(let ps=0;ps<256;ps++)Is[ps]=rs[ps]/255;zn=bn=In=jn=Is.join(",")}else{const[rs,Is,ps]=Zr,Ps=new Array(256),ls=new Array(256),Ts=new Array(256);for(let Fs=0;Fs<256;Fs++)Ps[Fs]=rs[Fs]/255,ls[Fs]=Is[Fs]/255,Ts[Fs]=ps[Fs]/255;bn=Ps.join(","),In=ls.join(","),jn=Ts.join(","),zn=`${bn}${In}${jn}`}if(hn=kr(this,Yr,zu).get(zn),hn)return kr(this,Yr,zu).set(Zr,hn),hn;const qn=`g_${kr(this,$r)}_transfer_map_${$A(this,Gr)._++}`,Nn=`url(#${qn})`;kr(this,Yr,zu).set(Zr,Nn),kr(this,Yr,zu).set(zn,Nn);const ns=Un(this,Yr,rm).call(this,qn);return Un(this,Yr,_p).call(this,bn,In,jn,ns),Nn}addHCMFilter(Zr,hn){var Is;const bn=`${Zr}-${hn}`;if(kr(this,jr)===bn)return kr(this,Br);if(On(this,jr,bn),On(this,Br,"none"),(Is=kr(this,pn))==null||Is.remove(),!Zr||!hn)return kr(this,Br);const In=Un(this,Yr,wp).call(this,Zr);Zr=nr.Util.makeHexColor(...In);const jn=Un(this,Yr,wp).call(this,hn);if(hn=nr.Util.makeHexColor(...jn),kr(this,Yr,Gu).style.color="",Zr==="#000000"&&hn==="#ffffff"||Zr===hn)return kr(this,Br);const zn=new Array(256);for(let ps=0;ps<=255;ps++){const Ps=ps/255;zn[ps]=Ps<=.03928?Ps/12.92:((Ps+.055)/1.055)**2.4}const qn=zn.join(","),Nn=`g_${kr(this,$r)}_hcm_filter`,ns=On(this,Lr,Un(this,Yr,rm).call(this,Nn));Un(this,Yr,_p).call(this,qn,qn,qn,ns),Un(this,Yr,Km).call(this,ns);const rs=(ps,Ps)=>{const ls=In[ps]/255,Ts=jn[ps]/255,Fs=new Array(Ps+1);for(let Vs=0;Vs<=Ps;Vs++)Fs[Vs]=ls+Vs/Ps*(Ts-ls);return Fs.join(",")};return Un(this,Yr,_p).call(this,rs(0,5),rs(1,5),rs(2,5),ns),On(this,Br,`url(#${Nn})`),kr(this,Br)}addHighlightHCMFilter(Zr,hn,bn,In){var Ts;const jn=`${Zr}-${hn}-${bn}-${In}`;if(kr(this,Or)===jn)return kr(this,zr);if(On(this,Or,jn),On(this,zr,"none"),(Ts=kr(this,Lr))==null||Ts.remove(),!Zr||!hn)return kr(this,zr);const[zn,qn]=[Zr,hn].map(Un(this,Yr,wp).bind(this));let Nn=Math.round(.2126*zn[0]+.7152*zn[1]+.0722*zn[2]),ns=Math.round(.2126*qn[0]+.7152*qn[1]+.0722*qn[2]),[rs,Is]=[bn,In].map(Un(this,Yr,wp).bind(this));ns<Nn&&([Nn,ns,rs,Is]=[ns,Nn,Is,rs]),kr(this,Yr,Gu).style.color="";const ps=(Fs,Vs,ts)=>{const Mn=new Array(256),Gn=(ns-Nn)/ts,os=Fs/255,js=(Vs-Fs)/(255*ts);let bs=0;for(let Rn=0;Rn<=ts;Rn++){const es=Math.round(Nn+Rn*Gn),ds=os+Rn*js;for(let fs=bs;fs<=es;fs++)Mn[fs]=ds;bs=es+1}for(let Rn=bs;Rn<256;Rn++)Mn[Rn]=Mn[bs-1];return Mn.join(",")},Ps=`g_${kr(this,$r)}_hcm_highlight_filter`,ls=On(this,Lr,Un(this,Yr,rm).call(this,Ps));return Un(this,Yr,Km).call(this,ls),Un(this,Yr,_p).call(this,ps(rs[0],Is[0],5),ps(rs[1],Is[1],5),ps(rs[2],Is[2],5),ls),On(this,zr,`url(#${Ps})`),kr(this,zr)}destroy(Zr=!1){Zr&&(kr(this,Br)||kr(this,zr))||(kr(this,Hr)&&(kr(this,Hr).parentNode.parentNode.remove(),On(this,Hr,null)),kr(this,Wr)&&(kr(this,Wr).clear(),On(this,Wr,null)),On(this,Gr,0))}}Wr=new WeakMap,Hr=new WeakMap,$r=new WeakMap,Xr=new WeakMap,pn=new WeakMap,jr=new WeakMap,Br=new WeakMap,Lr=new WeakMap,Or=new WeakMap,zr=new WeakMap,Gr=new WeakMap,Yr=new WeakSet,zu=function(){return kr(this,Wr)||On(this,Wr,new Map)},Gu=function(){if(!kr(this,Hr)){const Zr=kr(this,Xr).createElement("div"),{style:hn}=Zr;hn.visibility="hidden",hn.contain="strict",hn.width=hn.height=0,hn.position="absolute",hn.top=hn.left=0,hn.zIndex=-1;const bn=kr(this,Xr).createElementNS(sr,"svg");bn.setAttribute("width",0),bn.setAttribute("height",0),On(this,Hr,kr(this,Xr).createElementNS(sr,"defs")),Zr.append(bn),bn.append(kr(this,Hr)),kr(this,Xr).body.append(Zr)}return kr(this,Hr)},Km=function(Zr){const hn=kr(this,Xr).createElementNS(sr,"feColorMatrix");hn.setAttribute("type","matrix"),hn.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Zr.append(hn)},rm=function(Zr){const hn=kr(this,Xr).createElementNS(sr,"filter");return hn.setAttribute("color-interpolation-filters","sRGB"),hn.setAttribute("id",Zr),kr(this,Yr,Gu).append(hn),hn},nm=function(Zr,hn,bn){const In=kr(this,Xr).createElementNS(sr,hn);In.setAttribute("type","discrete"),In.setAttribute("tableValues",bn),Zr.append(In)},_p=function(Zr,hn,bn,In){const jn=kr(this,Xr).createElementNS(sr,"feComponentTransfer");In.append(jn),Un(this,Yr,nm).call(this,jn,"feFuncR",Zr),Un(this,Yr,nm).call(this,jn,"feFuncG",hn),Un(this,Yr,nm).call(this,jn,"feFuncB",bn)},wp=function(Zr){return kr(this,Yr,Gu).style.color=Zr,Er(getComputedStyle(kr(this,Yr,Gu)).getPropertyValue("color"))},_e.DOMFilterFactory=or;class ar extends rr.BaseCanvasFactory{constructor({ownerDocument:Fn=globalThis.document}={}){super(),this._document=Fn}_createCanvas(Fn,Zr){const hn=this._document.createElement("canvas");return hn.width=Fn,hn.height=Zr,hn}}_e.DOMCanvasFactory=ar;async function lr(Jr,Fn=!1){if(Tr(Jr,document.baseURI)){const Zr=await fetch(Jr);if(!Zr.ok)throw new Error(Zr.statusText);return Fn?new Uint8Array(await Zr.arrayBuffer()):(0,nr.stringToBytes)(await Zr.text())}return new Promise((Zr,hn)=>{const bn=new XMLHttpRequest;bn.open("GET",Jr,!0),Fn&&(bn.responseType="arraybuffer"),bn.onreadystatechange=()=>{if(bn.readyState===XMLHttpRequest.DONE){if(bn.status===200||bn.status===0){let In;if(Fn&&bn.response?In=new Uint8Array(bn.response):!Fn&&bn.responseText&&(In=(0,nr.stringToBytes)(bn.responseText)),In){Zr(In);return}}hn(new Error(bn.statusText))}},bn.send(null)})}class cr extends rr.BaseCMapReaderFactory{_fetchData(Fn,Zr){return lr(Fn,this.isCompressed).then(hn=>({cMapData:hn,compressionType:Zr}))}}_e.DOMCMapReaderFactory=cr;class Ar extends rr.BaseStandardFontDataFactory{_fetchData(Fn){return lr(Fn,!0)}}_e.DOMStandardFontDataFactory=Ar;class ur extends rr.BaseSVGFactory{_createSVG(Fn){return document.createElementNS(sr,Fn)}}_e.DOMSVGFactory=ur;class dr{constructor({viewBox:Fn,scale:Zr,rotation:hn,offsetX:bn=0,offsetY:In=0,dontFlip:jn=!1}){this.viewBox=Fn,this.scale=Zr,this.rotation=hn,this.offsetX=bn,this.offsetY=In;const zn=(Fn[2]+Fn[0])/2,qn=(Fn[3]+Fn[1])/2;let Nn,ns,rs,Is;switch(hn%=360,hn<0&&(hn+=360),hn){case 180:Nn=-1,ns=0,rs=0,Is=1;break;case 90:Nn=0,ns=1,rs=1,Is=0;break;case 270:Nn=0,ns=-1,rs=-1,Is=0;break;case 0:Nn=1,ns=0,rs=0,Is=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}jn&&(rs=-rs,Is=-Is);let ps,Ps,ls,Ts;Nn===0?(ps=Math.abs(qn-Fn[1])*Zr+bn,Ps=Math.abs(zn-Fn[0])*Zr+In,ls=(Fn[3]-Fn[1])*Zr,Ts=(Fn[2]-Fn[0])*Zr):(ps=Math.abs(zn-Fn[0])*Zr+bn,Ps=Math.abs(qn-Fn[1])*Zr+In,ls=(Fn[2]-Fn[0])*Zr,Ts=(Fn[3]-Fn[1])*Zr),this.transform=[Nn*Zr,ns*Zr,rs*Zr,Is*Zr,ps-Nn*Zr*zn-rs*Zr*qn,Ps-ns*Zr*zn-Is*Zr*qn],this.width=ls,this.height=Ts}get rawDims(){const{viewBox:Fn}=this;return(0,nr.shadow)(this,"rawDims",{pageWidth:Fn[2]-Fn[0],pageHeight:Fn[3]-Fn[1],pageX:Fn[0],pageY:Fn[1]})}clone({scale:Fn=this.scale,rotation:Zr=this.rotation,offsetX:hn=this.offsetX,offsetY:bn=this.offsetY,dontFlip:In=!1}={}){return new dr({viewBox:this.viewBox.slice(),scale:Fn,rotation:Zr,offsetX:hn,offsetY:bn,dontFlip:In})}convertToViewportPoint(Fn,Zr){return nr.Util.applyTransform([Fn,Zr],this.transform)}convertToViewportRectangle(Fn){const Zr=nr.Util.applyTransform([Fn[0],Fn[1]],this.transform),hn=nr.Util.applyTransform([Fn[2],Fn[3]],this.transform);return[Zr[0],Zr[1],hn[0],hn[1]]}convertToPdfPoint(Fn,Zr){return nr.Util.applyInverseTransform([Fn,Zr],this.transform)}}_e.PageViewport=dr;class mr extends nr.BaseException{constructor(Fn,Zr=0){super(Fn,"RenderingCancelledException"),this.extraDelay=Zr}}_e.RenderingCancelledException=mr;function pr(Jr){const Fn=Jr.length;let Zr=0;for(;Zr<Fn&&Jr[Zr].trim()==="";)Zr++;return Jr.substring(Zr,Zr+5).toLowerCase()==="data:"}function yr(Jr){return typeof Jr=="string"&&/\.pdf$/i.test(Jr)}function hr(Jr,Fn=!1){return Fn||([Jr]=Jr.split(/[#?]/,1)),Jr.substring(Jr.lastIndexOf("/")+1)}function gr(Jr,Fn="document.pdf"){if(typeof Jr!="string")return Fn;if(pr(Jr))return(0,nr.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Fn;const Zr=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,hn=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,bn=Zr.exec(Jr);let In=hn.exec(bn[1])||hn.exec(bn[2])||hn.exec(bn[3]);if(In&&(In=In[0],In.includes("%")))try{In=hn.exec(decodeURIComponent(In))[0]}catch{}return In||Fn}class Cr{constructor(){oo(this,"started",Object.create(null));oo(this,"times",[])}time(Fn){Fn in this.started&&(0,nr.warn)(`Timer is already running for ${Fn}`),this.started[Fn]=Date.now()}timeEnd(Fn){Fn in this.started||(0,nr.warn)(`Timer has not been started for ${Fn}`),this.times.push({name:Fn,start:this.started[Fn],end:Date.now()}),delete this.started[Fn]}toString(){const Fn=[];let Zr=0;for(const{name:hn}of this.times)Zr=Math.max(hn.length,Zr);for(const{name:hn,start:bn,end:In}of this.times)Fn.push(`${hn.padEnd(Zr)} ${In-bn}ms
`);return Fn.join("")}}_e.StatTimer=Cr;function Tr(Jr,Fn){try{const{protocol:Zr}=Fn?new URL(Jr,Fn):new URL(Jr);return Zr==="http:"||Zr==="https:"}catch{return!1}}function Sr(Jr){Jr.preventDefault()}function Nr(Jr,Fn=!1){return new Promise((Zr,hn)=>{const bn=document.createElement("script");bn.src=Jr,bn.onload=function(In){Fn&&bn.remove(),Zr(In)},bn.onerror=function(){hn(new Error(`Cannot load script at: ${bn.src}`))},(document.head||document.documentElement).append(bn)})}function _r(Jr){console.log("Deprecated API usage: "+Jr)}let vr;class br{static toDateObject(Fn){if(!Fn||typeof Fn!="string")return null;vr||(vr=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Zr=vr.exec(Fn);if(!Zr)return null;const hn=parseInt(Zr[1],10);let bn=parseInt(Zr[2],10);bn=bn>=1&&bn<=12?bn-1:0;let In=parseInt(Zr[3],10);In=In>=1&&In<=31?In:1;let jn=parseInt(Zr[4],10);jn=jn>=0&&jn<=23?jn:0;let zn=parseInt(Zr[5],10);zn=zn>=0&&zn<=59?zn:0;let qn=parseInt(Zr[6],10);qn=qn>=0&&qn<=59?qn:0;const Nn=Zr[7]||"Z";let ns=parseInt(Zr[8],10);ns=ns>=0&&ns<=23?ns:0;let rs=parseInt(Zr[9],10)||0;return rs=rs>=0&&rs<=59?rs:0,Nn==="-"?(jn+=ns,zn+=rs):Nn==="+"&&(jn-=ns,zn-=rs),new Date(Date.UTC(hn,bn,In,jn,zn,qn))}}_e.PDFDateString=br;function Pr(Jr,{scale:Fn=1,rotation:Zr=0}){const{width:hn,height:bn}=Jr.attributes.style,In=[0,0,parseInt(hn),parseInt(bn)];return new dr({viewBox:In,scale:Fn,rotation:Zr})}function Er(Jr){if(Jr.startsWith("#")){const Fn=parseInt(Jr.slice(1),16);return[(Fn&16711680)>>16,(Fn&65280)>>8,Fn&255]}return Jr.startsWith("rgb(")?Jr.slice(4,-1).split(",").map(Fn=>parseInt(Fn)):Jr.startsWith("rgba(")?Jr.slice(5,-1).split(",").map(Fn=>parseInt(Fn)).slice(0,3):((0,nr.warn)(`Not a valid color format: "${Jr}"`),[0,0,0])}function Rr(Jr){const Fn=document.createElement("span");Fn.style.visibility="hidden",document.body.append(Fn);for(const Zr of Jr.keys()){Fn.style.color=Zr;const hn=window.getComputedStyle(Fn).color;Jr.set(Zr,Er(hn))}Fn.remove()}function Ir(Jr){const{a:Fn,b:Zr,c:hn,d:bn,e:In,f:jn}=Jr.getTransform();return[Fn,Zr,hn,bn,In,jn]}function Qr(Jr){const{a:Fn,b:Zr,c:hn,d:bn,e:In,f:jn}=Jr.getTransform().invertSelf();return[Fn,Zr,hn,bn,In,jn]}function Ur(Jr,Fn,Zr=!1,hn=!0){if(Fn instanceof dr){const{pageWidth:bn,pageHeight:In}=Fn.rawDims,{style:jn}=Jr,zn=nr.FeatureTest.isCSSRoundSupported,qn=`var(--scale-factor) * ${bn}px`,Nn=`var(--scale-factor) * ${In}px`,ns=zn?`round(${qn}, 1px)`:`calc(${qn})`,rs=zn?`round(${Nn}, 1px)`:`calc(${Nn})`;!Zr||Fn.rotation%180===0?(jn.width=ns,jn.height=rs):(jn.width=rs,jn.height=ns)}hn&&Jr.setAttribute("data-main-rotation",Fn.rotation)}},(er,_e,tr)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.BaseStandardFontDataFactory=_e.BaseSVGFactory=_e.BaseFilterFactory=_e.BaseCanvasFactory=_e.BaseCMapReaderFactory=void 0;var rr=tr(1);class nr{constructor(){this.constructor===nr&&(0,rr.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(cr){return"none"}addHCMFilter(cr,Ar){return"none"}addHighlightHCMFilter(cr,Ar,ur,dr){return"none"}destroy(cr=!1){}}_e.BaseFilterFactory=nr;class sr{constructor(){this.constructor===sr&&(0,rr.unreachable)("Cannot initialize BaseCanvasFactory.")}create(cr,Ar){if(cr<=0||Ar<=0)throw new Error("Invalid canvas size");const ur=this._createCanvas(cr,Ar);return{canvas:ur,context:ur.getContext("2d")}}reset(cr,Ar,ur){if(!cr.canvas)throw new Error("Canvas is not specified");if(Ar<=0||ur<=0)throw new Error("Invalid canvas size");cr.canvas.width=Ar,cr.canvas.height=ur}destroy(cr){if(!cr.canvas)throw new Error("Canvas is not specified");cr.canvas.width=0,cr.canvas.height=0,cr.canvas=null,cr.context=null}_createCanvas(cr,Ar){(0,rr.unreachable)("Abstract method `_createCanvas` called.")}}_e.BaseCanvasFactory=sr;class ir{constructor({baseUrl:cr=null,isCompressed:Ar=!0}){this.constructor===ir&&(0,rr.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=cr,this.isCompressed=Ar}async fetch({name:cr}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!cr)throw new Error("CMap name must be specified.");const Ar=this.baseUrl+cr+(this.isCompressed?".bcmap":""),ur=this.isCompressed?rr.CMapCompressionType.BINARY:rr.CMapCompressionType.NONE;return this._fetchData(Ar,ur).catch(dr=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${Ar}`)})}_fetchData(cr,Ar){(0,rr.unreachable)("Abstract method `_fetchData` called.")}}_e.BaseCMapReaderFactory=ir;class or{constructor({baseUrl:cr=null}){this.constructor===or&&(0,rr.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=cr}async fetch({filename:cr}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!cr)throw new Error("Font filename must be specified.");const Ar=`${this.baseUrl}${cr}`;return this._fetchData(Ar).catch(ur=>{throw new Error(`Unable to load font data at: ${Ar}`)})}_fetchData(cr){(0,rr.unreachable)("Abstract method `_fetchData` called.")}}_e.BaseStandardFontDataFactory=or;class ar{constructor(){this.constructor===ar&&(0,rr.unreachable)("Cannot initialize BaseSVGFactory.")}create(cr,Ar,ur=!1){if(cr<=0||Ar<=0)throw new Error("Invalid SVG dimensions");const dr=this._createSVG("svg:svg");return dr.setAttribute("version","1.1"),ur||(dr.setAttribute("width",`${cr}px`),dr.setAttribute("height",`${Ar}px`)),dr.setAttribute("preserveAspectRatio","none"),dr.setAttribute("viewBox",`0 0 ${cr} ${Ar}`),dr}createElement(cr){if(typeof cr!="string")throw new Error("Invalid SVG element type");return this._createSVG(cr)}_createSVG(cr){(0,rr.unreachable)("Abstract method `_createSVG` called.")}}_e.BaseSVGFactory=ar},(er,_e,tr)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.MurmurHash3_64=void 0;var rr=tr(1);const nr=3285377520,sr=4294901760,ir=65535;class or{constructor(lr){this.h1=lr?lr&4294967295:nr,this.h2=lr?lr&4294967295:nr}update(lr){let cr,Ar;if(typeof lr=="string"){cr=new Uint8Array(lr.length*2),Ar=0;for(let _r=0,vr=lr.length;_r<vr;_r++){const br=lr.charCodeAt(_r);br<=255?cr[Ar++]=br:(cr[Ar++]=br>>>8,cr[Ar++]=br&255)}}else if((0,rr.isArrayBuffer)(lr))cr=lr.slice(),Ar=cr.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const ur=Ar>>2,dr=Ar-ur*4,mr=new Uint32Array(cr.buffer,0,ur);let pr=0,yr=0,hr=this.h1,gr=this.h2;const Cr=3432918353,Tr=461845907,Sr=Cr&ir,Nr=Tr&ir;for(let _r=0;_r<ur;_r++)_r&1?(pr=mr[_r],pr=pr*Cr&sr|pr*Sr&ir,pr=pr<<15|pr>>>17,pr=pr*Tr&sr|pr*Nr&ir,hr^=pr,hr=hr<<13|hr>>>19,hr=hr*5+3864292196):(yr=mr[_r],yr=yr*Cr&sr|yr*Sr&ir,yr=yr<<15|yr>>>17,yr=yr*Tr&sr|yr*Nr&ir,gr^=yr,gr=gr<<13|gr>>>19,gr=gr*5+3864292196);switch(pr=0,dr){case 3:pr^=cr[ur*4+2]<<16;case 2:pr^=cr[ur*4+1]<<8;case 1:pr^=cr[ur*4],pr=pr*Cr&sr|pr*Sr&ir,pr=pr<<15|pr>>>17,pr=pr*Tr&sr|pr*Nr&ir,ur&1?hr^=pr:gr^=pr}this.h1=hr,this.h2=gr}hexdigest(){let lr=this.h1,cr=this.h2;return lr^=cr>>>1,lr=lr*3981806797&sr|lr*36045&ir,cr=cr*4283543511&sr|((cr<<16|lr>>>16)*2950163797&sr)>>>16,lr^=cr>>>1,lr=lr*444984403&sr|lr*60499&ir,cr=cr*3301882366&sr|((cr<<16|lr>>>16)*3120437893&sr)>>>16,lr^=cr>>>1,(lr>>>0).toString(16).padStart(8,"0")+(cr>>>0).toString(16).padStart(8,"0")}}_e.MurmurHash3_64=or},(er,_e,tr)=>{var ir;Object.defineProperty(_e,"__esModule",{value:!0}),_e.FontLoader=_e.FontFaceObject=void 0;var rr=tr(1);class nr{constructor({ownerDocument:ar=globalThis.document,styleElement:lr=null}){Vn(this,ir,new Set);this._document=ar,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(ar){this.nativeFontFaces.add(ar),this._document.fonts.add(ar)}removeNativeFontFace(ar){this.nativeFontFaces.delete(ar),this._document.fonts.delete(ar)}insertRule(ar){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const lr=this.styleElement.sheet;lr.insertRule(ar,lr.cssRules.length)}clear(){for(const ar of this.nativeFontFaces)this._document.fonts.delete(ar);this.nativeFontFaces.clear(),kr(this,ir).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(ar){if(!(!ar||kr(this,ir).has(ar.loadedName))){if((0,rr.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:lr,src:cr,style:Ar}=ar,ur=new FontFace(lr,cr,Ar);this.addNativeFontFace(ur);try{await ur.load(),kr(this,ir).add(lr)}catch{(0,rr.warn)(`Cannot load system font: ${ar.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(ur)}return}(0,rr.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(ar){if(ar.attached||ar.missingFile&&!ar.systemFontInfo)return;if(ar.attached=!0,ar.systemFontInfo){await this.loadSystemFont(ar.systemFontInfo);return}if(this.isFontLoadingAPISupported){const cr=ar.createNativeFontFace();if(cr){this.addNativeFontFace(cr);try{await cr.loaded}catch(Ar){throw(0,rr.warn)(`Failed to load font '${cr.family}': '${Ar}'.`),ar.disableFontFace=!0,Ar}}return}const lr=ar.createFontFaceRule();if(lr){if(this.insertRule(lr),this.isSyncFontLoadingSupported)return;await new Promise(cr=>{const Ar=this._queueLoadingCallback(cr);this._prepareFontLoadEvent(ar,Ar)})}}get isFontLoadingAPISupported(){var lr;const ar=!!((lr=this._document)!=null&&lr.fonts);return(0,rr.shadow)(this,"isFontLoadingAPISupported",ar)}get isSyncFontLoadingSupported(){let ar=!1;return(rr.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(ar=!0),(0,rr.shadow)(this,"isSyncFontLoadingSupported",ar)}_queueLoadingCallback(ar){function lr(){for((0,rr.assert)(!Ar.done,"completeRequest() cannot be called twice."),Ar.done=!0;cr.length>0&&cr[0].done;){const ur=cr.shift();setTimeout(ur.callback,0)}}const{loadingRequests:cr}=this,Ar={done:!1,complete:lr,callback:ar};return cr.push(Ar),Ar}get _loadTestFont(){const ar=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,rr.shadow)(this,"_loadTestFont",ar)}_prepareFontLoadEvent(ar,lr){function cr(Er,Rr){return Er.charCodeAt(Rr)<<24|Er.charCodeAt(Rr+1)<<16|Er.charCodeAt(Rr+2)<<8|Er.charCodeAt(Rr+3)&255}function Ar(Er,Rr,Ir,Qr){const Ur=Er.substring(0,Rr),Vr=Er.substring(Rr+Ir);return Ur+Qr+Vr}let ur,dr;const mr=this._document.createElement("canvas");mr.width=1,mr.height=1;const pr=mr.getContext("2d");let yr=0;function hr(Er,Rr){if(++yr>30){(0,rr.warn)("Load test font never loaded."),Rr();return}if(pr.font="30px "+Er,pr.fillText(".",0,20),pr.getImageData(0,0,1,1).data[3]>0){Rr();return}setTimeout(hr.bind(null,Er,Rr))}const gr=`lt${Date.now()}${this.loadTestFontId++}`;let Cr=this._loadTestFont;Cr=Ar(Cr,976,gr.length,gr);const Sr=16,Nr=1482184792;let _r=cr(Cr,Sr);for(ur=0,dr=gr.length-3;ur<dr;ur+=4)_r=_r-Nr+cr(gr,ur)|0;ur<gr.length&&(_r=_r-Nr+cr(gr+"XXX",ur)|0),Cr=Ar(Cr,Sr,4,(0,rr.string32)(_r));const vr=`url(data:font/opentype;base64,${btoa(Cr)});`,br=`@font-face {font-family:"${gr}";src:${vr}}`;this.insertRule(br);const Pr=this._document.createElement("div");Pr.style.visibility="hidden",Pr.style.width=Pr.style.height="10px",Pr.style.position="absolute",Pr.style.top=Pr.style.left="0px";for(const Er of[ar.loadedName,gr]){const Rr=this._document.createElement("span");Rr.textContent="Hi",Rr.style.fontFamily=Er,Pr.append(Rr)}this._document.body.append(Pr),hr(gr,()=>{Pr.remove(),lr.complete()})}}ir=new WeakMap,_e.FontLoader=nr;class sr{constructor(ar,{isEvalSupported:lr=!0,disableFontFace:cr=!1,ignoreErrors:Ar=!1,inspectFont:ur=null}){this.compiledGlyphs=Object.create(null);for(const dr in ar)this[dr]=ar[dr];this.isEvalSupported=lr!==!1,this.disableFontFace=cr===!0,this.ignoreErrors=Ar===!0,this._inspectFont=ur}createNativeFontFace(){var lr;if(!this.data||this.disableFontFace)return null;let ar;if(!this.cssFontInfo)ar=new FontFace(this.loadedName,this.data,{});else{const cr={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(cr.style=`oblique ${this.cssFontInfo.italicAngle}deg`),ar=new FontFace(this.cssFontInfo.fontFamily,this.data,cr)}return(lr=this._inspectFont)==null||lr.call(this,this),ar}createFontFaceRule(){var Ar;if(!this.data||this.disableFontFace)return null;const ar=(0,rr.bytesToString)(this.data),lr=`url(data:${this.mimetype};base64,${btoa(ar)});`;let cr;if(!this.cssFontInfo)cr=`@font-face {font-family:"${this.loadedName}";src:${lr}}`;else{let ur=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(ur+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),cr=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${ur}src:${lr}}`}return(Ar=this._inspectFont)==null||Ar.call(this,this,lr),cr}getPathGenerator(ar,lr){if(this.compiledGlyphs[lr]!==void 0)return this.compiledGlyphs[lr];let cr;try{cr=ar.get(this.loadedName+"_path_"+lr)}catch(Ar){if(!this.ignoreErrors)throw Ar;return(0,rr.warn)(`getPathGenerator - ignoring character: "${Ar}".`),this.compiledGlyphs[lr]=function(ur,dr){}}if(this.isEvalSupported&&rr.FeatureTest.isEvalSupported){const Ar=[];for(const ur of cr){const dr=ur.args!==void 0?ur.args.join(","):"";Ar.push("c.",ur.cmd,"(",dr,`);
`)}return this.compiledGlyphs[lr]=new Function("c","size",Ar.join(""))}return this.compiledGlyphs[lr]=function(Ar,ur){for(const dr of cr)dr.cmd==="scale"&&(dr.args=[ur,-ur]),Ar[dr.cmd].apply(Ar,dr.args)}}}_e.FontFaceObject=sr},(er,_e,tr)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.NodeStandardFontDataFactory=_e.NodeFilterFactory=_e.NodeCanvasFactory=_e.NodeCMapReaderFactory=void 0;var rr=tr(7);tr(1);const nr=function(lr){return new Promise((cr,Ar)=>{require$$5.readFile(lr,(dr,mr)=>{if(dr||!mr){Ar(new Error(dr));return}cr(new Uint8Array(mr))})})};class sr extends rr.BaseFilterFactory{}_e.NodeFilterFactory=sr;class ir extends rr.BaseCanvasFactory{_createCanvas(cr,Ar){return require$$5.createCanvas(cr,Ar)}}_e.NodeCanvasFactory=ir;class or extends rr.BaseCMapReaderFactory{_fetchData(cr,Ar){return nr(cr).then(ur=>({cMapData:ur,compressionType:Ar}))}}_e.NodeCMapReaderFactory=or;class ar extends rr.BaseStandardFontDataFactory{_fetchData(cr){return nr(cr)}}_e.NodeStandardFontDataFactory=ar},(er,_e,tr)=>{var Hr,zm,Gm;Object.defineProperty(_e,"__esModule",{value:!0}),_e.CanvasGraphics=void 0;var rr=tr(1),nr=tr(6),sr=tr(12),ir=tr(13);const or=16,ar=100,lr=4096,cr=15,Ar=10,ur=1e3,dr=16;function mr(jr,Br){if(jr._removeMirroring)throw new Error("Context is already forwarding operations.");jr.__originalSave=jr.save,jr.__originalRestore=jr.restore,jr.__originalRotate=jr.rotate,jr.__originalScale=jr.scale,jr.__originalTranslate=jr.translate,jr.__originalTransform=jr.transform,jr.__originalSetTransform=jr.setTransform,jr.__originalResetTransform=jr.resetTransform,jr.__originalClip=jr.clip,jr.__originalMoveTo=jr.moveTo,jr.__originalLineTo=jr.lineTo,jr.__originalBezierCurveTo=jr.bezierCurveTo,jr.__originalRect=jr.rect,jr.__originalClosePath=jr.closePath,jr.__originalBeginPath=jr.beginPath,jr._removeMirroring=()=>{jr.save=jr.__originalSave,jr.restore=jr.__originalRestore,jr.rotate=jr.__originalRotate,jr.scale=jr.__originalScale,jr.translate=jr.__originalTranslate,jr.transform=jr.__originalTransform,jr.setTransform=jr.__originalSetTransform,jr.resetTransform=jr.__originalResetTransform,jr.clip=jr.__originalClip,jr.moveTo=jr.__originalMoveTo,jr.lineTo=jr.__originalLineTo,jr.bezierCurveTo=jr.__originalBezierCurveTo,jr.rect=jr.__originalRect,jr.closePath=jr.__originalClosePath,jr.beginPath=jr.__originalBeginPath,delete jr._removeMirroring},jr.save=function(){Br.save(),this.__originalSave()},jr.restore=function(){Br.restore(),this.__originalRestore()},jr.translate=function(Or,zr){Br.translate(Or,zr),this.__originalTranslate(Or,zr)},jr.scale=function(Or,zr){Br.scale(Or,zr),this.__originalScale(Or,zr)},jr.transform=function(Or,zr,Gr,Yr,dn,En){Br.transform(Or,zr,Gr,Yr,dn,En),this.__originalTransform(Or,zr,Gr,Yr,dn,En)},jr.setTransform=function(Or,zr,Gr,Yr,dn,En){Br.setTransform(Or,zr,Gr,Yr,dn,En),this.__originalSetTransform(Or,zr,Gr,Yr,dn,En)},jr.resetTransform=function(){Br.resetTransform(),this.__originalResetTransform()},jr.rotate=function(Or){Br.rotate(Or),this.__originalRotate(Or)},jr.clip=function(Or){Br.clip(Or),this.__originalClip(Or)},jr.moveTo=function(Lr,Or){Br.moveTo(Lr,Or),this.__originalMoveTo(Lr,Or)},jr.lineTo=function(Lr,Or){Br.lineTo(Lr,Or),this.__originalLineTo(Lr,Or)},jr.bezierCurveTo=function(Lr,Or,zr,Gr,Yr,dn){Br.bezierCurveTo(Lr,Or,zr,Gr,Yr,dn),this.__originalBezierCurveTo(Lr,Or,zr,Gr,Yr,dn)},jr.rect=function(Lr,Or,zr,Gr){Br.rect(Lr,Or,zr,Gr),this.__originalRect(Lr,Or,zr,Gr)},jr.closePath=function(){Br.closePath(),this.__originalClosePath()},jr.beginPath=function(){Br.beginPath(),this.__originalBeginPath()}}class pr{constructor(Br){this.canvasFactory=Br,this.cache=Object.create(null)}getCanvas(Br,Lr,Or){let zr;return this.cache[Br]!==void 0?(zr=this.cache[Br],this.canvasFactory.reset(zr,Lr,Or)):(zr=this.canvasFactory.create(Lr,Or),this.cache[Br]=zr),zr}delete(Br){delete this.cache[Br]}clear(){for(const Br in this.cache){const Lr=this.cache[Br];this.canvasFactory.destroy(Lr),delete this.cache[Br]}}}function yr(jr,Br,Lr,Or,zr,Gr,Yr,dn,En,Sn){const[Bn,kn,Kn,Cn,Jr,Fn]=(0,nr.getCurrentTransform)(jr);if(kn===0&&Kn===0){const bn=Yr*Bn+Jr,In=Math.round(bn),jn=dn*Cn+Fn,zn=Math.round(jn),qn=(Yr+En)*Bn+Jr,Nn=Math.abs(Math.round(qn)-In)||1,ns=(dn+Sn)*Cn+Fn,rs=Math.abs(Math.round(ns)-zn)||1;return jr.setTransform(Math.sign(Bn),0,0,Math.sign(Cn),In,zn),jr.drawImage(Br,Lr,Or,zr,Gr,0,0,Nn,rs),jr.setTransform(Bn,kn,Kn,Cn,Jr,Fn),[Nn,rs]}if(Bn===0&&Cn===0){const bn=dn*Kn+Jr,In=Math.round(bn),jn=Yr*kn+Fn,zn=Math.round(jn),qn=(dn+Sn)*Kn+Jr,Nn=Math.abs(Math.round(qn)-In)||1,ns=(Yr+En)*kn+Fn,rs=Math.abs(Math.round(ns)-zn)||1;return jr.setTransform(0,Math.sign(kn),Math.sign(Kn),0,In,zn),jr.drawImage(Br,Lr,Or,zr,Gr,0,0,rs,Nn),jr.setTransform(Bn,kn,Kn,Cn,Jr,Fn),[rs,Nn]}jr.drawImage(Br,Lr,Or,zr,Gr,Yr,dn,En,Sn);const Zr=Math.hypot(Bn,kn),hn=Math.hypot(Kn,Cn);return[Zr*En,hn*Sn]}function hr(jr){const{width:Br,height:Lr}=jr;if(Br>ur||Lr>ur)return null;const Or=1e3,zr=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Gr=Br+1;let Yr=new Uint8Array(Gr*(Lr+1)),dn,En,Sn;const Bn=Br+7&-8;let kn=new Uint8Array(Bn*Lr),Kn=0;for(const hn of jr.data){let bn=128;for(;bn>0;)kn[Kn++]=hn&bn?0:255,bn>>=1}let Cn=0;for(Kn=0,kn[Kn]!==0&&(Yr[0]=1,++Cn),En=1;En<Br;En++)kn[Kn]!==kn[Kn+1]&&(Yr[En]=kn[Kn]?2:1,++Cn),Kn++;for(kn[Kn]!==0&&(Yr[En]=2,++Cn),dn=1;dn<Lr;dn++){Kn=dn*Bn,Sn=dn*Gr,kn[Kn-Bn]!==kn[Kn]&&(Yr[Sn]=kn[Kn]?1:8,++Cn);let hn=(kn[Kn]?4:0)+(kn[Kn-Bn]?8:0);for(En=1;En<Br;En++)hn=(hn>>2)+(kn[Kn+1]?4:0)+(kn[Kn-Bn+1]?8:0),zr[hn]&&(Yr[Sn+En]=zr[hn],++Cn),Kn++;if(kn[Kn-Bn]!==kn[Kn]&&(Yr[Sn+En]=kn[Kn]?2:4,++Cn),Cn>Or)return null}for(Kn=Bn*(Lr-1),Sn=dn*Gr,kn[Kn]!==0&&(Yr[Sn]=8,++Cn),En=1;En<Br;En++)kn[Kn]!==kn[Kn+1]&&(Yr[Sn+En]=kn[Kn]?4:8,++Cn),Kn++;if(kn[Kn]!==0&&(Yr[Sn+En]=4,++Cn),Cn>Or)return null;const Jr=new Int32Array([0,Gr,-1,0,-Gr,0,0,0,1]),Fn=new Path2D;for(dn=0;Cn&&dn<=Lr;dn++){let hn=dn*Gr;const bn=hn+Br;for(;hn<bn&&!Yr[hn];)hn++;if(hn===bn)continue;Fn.moveTo(hn%Gr,dn);const In=hn;let jn=Yr[hn];do{const zn=Jr[jn];do hn+=zn;while(!Yr[hn]);const qn=Yr[hn];qn!==5&&qn!==10?(jn=qn,Yr[hn]=0):(jn=qn&51*jn>>4,Yr[hn]&=jn>>2|jn<<2),Fn.lineTo(hn%Gr,hn/Gr|0),Yr[hn]||--Cn}while(In!==hn);--dn}return kn=null,Yr=null,function(hn){hn.save(),hn.scale(1/Br,-1/Lr),hn.translate(0,-Lr),hn.fill(Fn),hn.beginPath(),hn.restore()}}class gr{constructor(Br,Lr){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=rr.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=rr.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=rr.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,Br,Lr])}clone(){const Br=Object.create(this);return Br.clipBox=this.clipBox.slice(),Br}setCurrentPoint(Br,Lr){this.x=Br,this.y=Lr}updatePathMinMax(Br,Lr,Or){[Lr,Or]=rr.Util.applyTransform([Lr,Or],Br),this.minX=Math.min(this.minX,Lr),this.minY=Math.min(this.minY,Or),this.maxX=Math.max(this.maxX,Lr),this.maxY=Math.max(this.maxY,Or)}updateRectMinMax(Br,Lr){const Or=rr.Util.applyTransform(Lr,Br),zr=rr.Util.applyTransform(Lr.slice(2),Br);this.minX=Math.min(this.minX,Or[0],zr[0]),this.minY=Math.min(this.minY,Or[1],zr[1]),this.maxX=Math.max(this.maxX,Or[0],zr[0]),this.maxY=Math.max(this.maxY,Or[1],zr[1])}updateScalingPathMinMax(Br,Lr){rr.Util.scaleMinMax(Br,Lr),this.minX=Math.min(this.minX,Lr[0]),this.maxX=Math.max(this.maxX,Lr[1]),this.minY=Math.min(this.minY,Lr[2]),this.maxY=Math.max(this.maxY,Lr[3])}updateCurvePathMinMax(Br,Lr,Or,zr,Gr,Yr,dn,En,Sn,Bn){const kn=rr.Util.bezierBoundingBox(Lr,Or,zr,Gr,Yr,dn,En,Sn);if(Bn){Bn[0]=Math.min(Bn[0],kn[0],kn[2]),Bn[1]=Math.max(Bn[1],kn[0],kn[2]),Bn[2]=Math.min(Bn[2],kn[1],kn[3]),Bn[3]=Math.max(Bn[3],kn[1],kn[3]);return}this.updateRectMinMax(Br,kn)}getPathBoundingBox(Br=sr.PathType.FILL,Lr=null){const Or=[this.minX,this.minY,this.maxX,this.maxY];if(Br===sr.PathType.STROKE){Lr||(0,rr.unreachable)("Stroke bounding box must include transform.");const zr=rr.Util.singularValueDecompose2dScale(Lr),Gr=zr[0]*this.lineWidth/2,Yr=zr[1]*this.lineWidth/2;Or[0]-=Gr,Or[1]-=Yr,Or[2]+=Gr,Or[3]+=Yr}return Or}updateClipFromPath(){const Br=rr.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Br||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Br){this.clipBox=Br,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(Br=sr.PathType.FILL,Lr=null){return rr.Util.intersect(this.clipBox,this.getPathBoundingBox(Br,Lr))}}function Cr(jr,Br){if(typeof ImageData<"u"&&Br instanceof ImageData){jr.putImageData(Br,0,0);return}const Lr=Br.height,Or=Br.width,zr=Lr%dr,Gr=(Lr-zr)/dr,Yr=zr===0?Gr:Gr+1,dn=jr.createImageData(Or,dr);let En=0,Sn;const Bn=Br.data,kn=dn.data;let Kn,Cn,Jr,Fn;if(Br.kind===rr.ImageKind.GRAYSCALE_1BPP){const Zr=Bn.byteLength,hn=new Uint32Array(kn.buffer,0,kn.byteLength>>2),bn=hn.length,In=Or+7>>3,jn=4294967295,zn=rr.FeatureTest.isLittleEndian?4278190080:255;for(Kn=0;Kn<Yr;Kn++){for(Jr=Kn<Gr?dr:zr,Sn=0,Cn=0;Cn<Jr;Cn++){const qn=Zr-En;let Nn=0;const ns=qn>In?Or:qn*8-7,rs=ns&-8;let Is=0,ps=0;for(;Nn<rs;Nn+=8)ps=Bn[En++],hn[Sn++]=ps&128?jn:zn,hn[Sn++]=ps&64?jn:zn,hn[Sn++]=ps&32?jn:zn,hn[Sn++]=ps&16?jn:zn,hn[Sn++]=ps&8?jn:zn,hn[Sn++]=ps&4?jn:zn,hn[Sn++]=ps&2?jn:zn,hn[Sn++]=ps&1?jn:zn;for(;Nn<ns;Nn++)Is===0&&(ps=Bn[En++],Is=128),hn[Sn++]=ps&Is?jn:zn,Is>>=1}for(;Sn<bn;)hn[Sn++]=0;jr.putImageData(dn,0,Kn*dr)}}else if(Br.kind===rr.ImageKind.RGBA_32BPP){for(Cn=0,Fn=Or*dr*4,Kn=0;Kn<Gr;Kn++)kn.set(Bn.subarray(En,En+Fn)),En+=Fn,jr.putImageData(dn,0,Cn),Cn+=dr;Kn<Yr&&(Fn=Or*zr*4,kn.set(Bn.subarray(En,En+Fn)),jr.putImageData(dn,0,Cn))}else if(Br.kind===rr.ImageKind.RGB_24BPP)for(Jr=dr,Fn=Or*Jr,Kn=0;Kn<Yr;Kn++){for(Kn>=Gr&&(Jr=zr,Fn=Or*Jr),Sn=0,Cn=Fn;Cn--;)kn[Sn++]=Bn[En++],kn[Sn++]=Bn[En++],kn[Sn++]=Bn[En++],kn[Sn++]=255;jr.putImageData(dn,0,Kn*dr)}else throw new Error(`bad image kind: ${Br.kind}`)}function Tr(jr,Br){if(Br.bitmap){jr.drawImage(Br.bitmap,0,0);return}const Lr=Br.height,Or=Br.width,zr=Lr%dr,Gr=(Lr-zr)/dr,Yr=zr===0?Gr:Gr+1,dn=jr.createImageData(Or,dr);let En=0;const Sn=Br.data,Bn=dn.data;for(let kn=0;kn<Yr;kn++){const Kn=kn<Gr?dr:zr;({srcPos:En}=(0,ir.convertBlackAndWhiteToRGBA)({src:Sn,srcPos:En,dest:Bn,width:Or,height:Kn,nonBlackColor:0})),jr.putImageData(dn,0,kn*dr)}}function Sr(jr,Br){const Lr=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const Or of Lr)jr[Or]!==void 0&&(Br[Or]=jr[Or]);jr.setLineDash!==void 0&&(Br.setLineDash(jr.getLineDash()),Br.lineDashOffset=jr.lineDashOffset)}function Nr(jr){if(jr.strokeStyle=jr.fillStyle="#000000",jr.fillRule="nonzero",jr.globalAlpha=1,jr.lineWidth=1,jr.lineCap="butt",jr.lineJoin="miter",jr.miterLimit=10,jr.globalCompositeOperation="source-over",jr.font="10px sans-serif",jr.setLineDash!==void 0&&(jr.setLineDash([]),jr.lineDashOffset=0),!rr.isNodeJS){const{filter:Br}=jr;Br!=="none"&&Br!==""&&(jr.filter="none")}}function _r(jr,Br,Lr,Or){const zr=jr.length;for(let Gr=3;Gr<zr;Gr+=4){const Yr=jr[Gr];if(Yr===0)jr[Gr-3]=Br,jr[Gr-2]=Lr,jr[Gr-1]=Or;else if(Yr<255){const dn=255-Yr;jr[Gr-3]=jr[Gr-3]*Yr+Br*dn>>8,jr[Gr-2]=jr[Gr-2]*Yr+Lr*dn>>8,jr[Gr-1]=jr[Gr-1]*Yr+Or*dn>>8}}}function vr(jr,Br,Lr){const Or=jr.length,zr=1/255;for(let Gr=3;Gr<Or;Gr+=4){const Yr=Lr?Lr[jr[Gr]]:jr[Gr];Br[Gr]=Br[Gr]*Yr*zr|0}}function br(jr,Br,Lr){const Or=jr.length;for(let zr=3;zr<Or;zr+=4){const Gr=jr[zr-3]*77+jr[zr-2]*152+jr[zr-1]*28;Br[zr]=Lr?Br[zr]*Lr[Gr>>8]>>8:Br[zr]*Gr>>16}}function Pr(jr,Br,Lr,Or,zr,Gr,Yr,dn,En,Sn,Bn){const kn=!!Gr,Kn=kn?Gr[0]:0,Cn=kn?Gr[1]:0,Jr=kn?Gr[2]:0,Fn=zr==="Luminosity"?br:vr,hn=Math.min(Or,Math.ceil(1048576/Lr));for(let bn=0;bn<Or;bn+=hn){const In=Math.min(hn,Or-bn),jn=jr.getImageData(dn-Sn,bn+(En-Bn),Lr,In),zn=Br.getImageData(dn,bn+En,Lr,In);kn&&_r(jn.data,Kn,Cn,Jr),Fn(jn.data,zn.data,Yr),Br.putImageData(zn,dn,bn+En)}}function Er(jr,Br,Lr,Or){const zr=Or[0],Gr=Or[1],Yr=Or[2]-zr,dn=Or[3]-Gr;Yr===0||dn===0||(Pr(Br.context,Lr,Yr,dn,Br.subtype,Br.backdrop,Br.transferMap,zr,Gr,Br.offsetX,Br.offsetY),jr.save(),jr.globalAlpha=1,jr.globalCompositeOperation="source-over",jr.setTransform(1,0,0,1,0,0),jr.drawImage(Lr.canvas,0,0),jr.restore())}function Rr(jr,Br){const Lr=rr.Util.singularValueDecompose2dScale(jr);Lr[0]=Math.fround(Lr[0]),Lr[1]=Math.fround(Lr[1]);const Or=Math.fround((globalThis.devicePixelRatio||1)*nr.PixelsPerInch.PDF_TO_CSS_UNITS);return Br!==void 0?Br:Lr[0]<=Or||Lr[1]<=Or}const Ir=["butt","round","square"],Qr=["miter","round","bevel"],Ur={},Vr={},pn=class pn{constructor(Br,Lr,Or,zr,Gr,{optionalContentConfig:Yr,markedContentStack:dn=null},En,Sn){Vn(this,Hr);this.ctx=Br,this.current=new gr(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Lr,this.objs=Or,this.canvasFactory=zr,this.filterFactory=Gr,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=dn||[],this.optionalContentConfig=Yr,this.cachedCanvases=new pr(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=En,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Sn,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Br,Lr=null){return typeof Br=="string"?Br.startsWith("g_")?this.commonObjs.get(Br):this.objs.get(Br):Lr}beginDrawing({transform:Br,viewport:Lr,transparency:Or=!1,background:zr=null}){const Gr=this.ctx.canvas.width,Yr=this.ctx.canvas.height,dn=this.ctx.fillStyle;if(this.ctx.fillStyle=zr||"#ffffff",this.ctx.fillRect(0,0,Gr,Yr),this.ctx.fillStyle=dn,Or){const En=this.cachedCanvases.getCanvas("transparent",Gr,Yr);this.compositeCtx=this.ctx,this.transparentCanvas=En.canvas,this.ctx=En.context,this.ctx.save(),this.ctx.transform(...(0,nr.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Nr(this.ctx),Br&&(this.ctx.transform(...Br),this.outputScaleX=Br[0],this.outputScaleY=Br[0]),this.ctx.transform(...Lr.transform),this.viewportScale=Lr.scale,this.baseTransform=(0,nr.getCurrentTransform)(this.ctx)}executeOperatorList(Br,Lr,Or,zr){const Gr=Br.argsArray,Yr=Br.fnArray;let dn=Lr||0;const En=Gr.length;if(En===dn)return dn;const Sn=En-dn>Ar&&typeof Or=="function",Bn=Sn?Date.now()+cr:0;let kn=0;const Kn=this.commonObjs,Cn=this.objs;let Jr;for(;;){if(zr!==void 0&&dn===zr.nextBreakPoint)return zr.breakIt(dn,Or),dn;if(Jr=Yr[dn],Jr!==rr.OPS.dependency)this[Jr].apply(this,Gr[dn]);else for(const Fn of Gr[dn]){const Zr=Fn.startsWith("g_")?Kn:Cn;if(!Zr.has(Fn))return Zr.get(Fn,Or),dn}if(dn++,dn===En)return dn;if(Sn&&++kn>Ar){if(Date.now()>Bn)return Or(),dn;kn=0}}}endDrawing(){Un(this,Hr,zm).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const Br of this._cachedBitmapsMap.values()){for(const Lr of Br.values())typeof HTMLCanvasElement<"u"&&Lr instanceof HTMLCanvasElement&&(Lr.width=Lr.height=0);Br.clear()}this._cachedBitmapsMap.clear(),Un(this,Hr,Gm).call(this)}_scaleImage(Br,Lr){const Or=Br.width,zr=Br.height;let Gr=Math.max(Math.hypot(Lr[0],Lr[1]),1),Yr=Math.max(Math.hypot(Lr[2],Lr[3]),1),dn=Or,En=zr,Sn="prescale1",Bn,kn;for(;Gr>2&&dn>1||Yr>2&&En>1;){let Kn=dn,Cn=En;Gr>2&&dn>1&&(Kn=dn>=16384?Math.floor(dn/2)-1||1:Math.ceil(dn/2),Gr/=dn/Kn),Yr>2&&En>1&&(Cn=En>=16384?Math.floor(En/2)-1||1:Math.ceil(En)/2,Yr/=En/Cn),Bn=this.cachedCanvases.getCanvas(Sn,Kn,Cn),kn=Bn.context,kn.clearRect(0,0,Kn,Cn),kn.drawImage(Br,0,0,dn,En,0,0,Kn,Cn),Br=Bn.canvas,dn=Kn,En=Cn,Sn=Sn==="prescale1"?"prescale2":"prescale1"}return{img:Br,paintWidth:dn,paintHeight:En}}_createMaskCanvas(Br){const Lr=this.ctx,{width:Or,height:zr}=Br,Gr=this.current.fillColor,Yr=this.current.patternFill,dn=(0,nr.getCurrentTransform)(Lr);let En,Sn,Bn,kn;if((Br.bitmap||Br.data)&&Br.count>1){const Nn=Br.bitmap||Br.data.buffer;Sn=JSON.stringify(Yr?dn:[dn.slice(0,4),Gr]),En=this._cachedBitmapsMap.get(Nn),En||(En=new Map,this._cachedBitmapsMap.set(Nn,En));const ns=En.get(Sn);if(ns&&!Yr){const rs=Math.round(Math.min(dn[0],dn[2])+dn[4]),Is=Math.round(Math.min(dn[1],dn[3])+dn[5]);return{canvas:ns,offsetX:rs,offsetY:Is}}Bn=ns}Bn||(kn=this.cachedCanvases.getCanvas("maskCanvas",Or,zr),Tr(kn.context,Br));let Kn=rr.Util.transform(dn,[1/Or,0,0,-1/zr,0,0]);Kn=rr.Util.transform(Kn,[1,0,0,1,0,-zr]);const Cn=rr.Util.applyTransform([0,0],Kn),Jr=rr.Util.applyTransform([Or,zr],Kn),Fn=rr.Util.normalizeRect([Cn[0],Cn[1],Jr[0],Jr[1]]),Zr=Math.round(Fn[2]-Fn[0])||1,hn=Math.round(Fn[3]-Fn[1])||1,bn=this.cachedCanvases.getCanvas("fillCanvas",Zr,hn),In=bn.context,jn=Math.min(Cn[0],Jr[0]),zn=Math.min(Cn[1],Jr[1]);In.translate(-jn,-zn),In.transform(...Kn),Bn||(Bn=this._scaleImage(kn.canvas,(0,nr.getCurrentTransformInverse)(In)),Bn=Bn.img,En&&Yr&&En.set(Sn,Bn)),In.imageSmoothingEnabled=Rr((0,nr.getCurrentTransform)(In),Br.interpolate),yr(In,Bn,0,0,Bn.width,Bn.height,0,0,Or,zr),In.globalCompositeOperation="source-in";const qn=rr.Util.transform((0,nr.getCurrentTransformInverse)(In),[1,0,0,1,-jn,-zn]);return In.fillStyle=Yr?Gr.getPattern(Lr,this,qn,sr.PathType.FILL):Gr,In.fillRect(0,0,Or,zr),En&&!Yr&&(this.cachedCanvases.delete("fillCanvas"),En.set(Sn,bn.canvas)),{canvas:bn.canvas,offsetX:Math.round(jn),offsetY:Math.round(zn)}}setLineWidth(Br){Br!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=Br,this.ctx.lineWidth=Br}setLineCap(Br){this.ctx.lineCap=Ir[Br]}setLineJoin(Br){this.ctx.lineJoin=Qr[Br]}setMiterLimit(Br){this.ctx.miterLimit=Br}setDash(Br,Lr){const Or=this.ctx;Or.setLineDash!==void 0&&(Or.setLineDash(Br),Or.lineDashOffset=Lr)}setRenderingIntent(Br){}setFlatness(Br){}setGState(Br){for(const[Lr,Or]of Br)switch(Lr){case"LW":this.setLineWidth(Or);break;case"LC":this.setLineCap(Or);break;case"LJ":this.setLineJoin(Or);break;case"ML":this.setMiterLimit(Or);break;case"D":this.setDash(Or[0],Or[1]);break;case"RI":this.setRenderingIntent(Or);break;case"FL":this.setFlatness(Or);break;case"Font":this.setFont(Or[0],Or[1]);break;case"CA":this.current.strokeAlpha=Or;break;case"ca":this.current.fillAlpha=Or,this.ctx.globalAlpha=Or;break;case"BM":this.ctx.globalCompositeOperation=Or;break;case"SMask":this.current.activeSMask=Or?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(Or);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const Br=this.inSMaskMode;this.current.activeSMask&&!Br?this.beginSMaskMode():!this.current.activeSMask&&Br&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const Br=this.ctx.canvas.width,Lr=this.ctx.canvas.height,Or="smaskGroupAt"+this.groupLevel,zr=this.cachedCanvases.getCanvas(Or,Br,Lr);this.suspendedCtx=this.ctx,this.ctx=zr.context;const Gr=this.ctx;Gr.setTransform(...(0,nr.getCurrentTransform)(this.suspendedCtx)),Sr(this.suspendedCtx,Gr),mr(Gr,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Sr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Br){if(!this.current.activeSMask)return;Br?(Br[0]=Math.floor(Br[0]),Br[1]=Math.floor(Br[1]),Br[2]=Math.ceil(Br[2]),Br[3]=Math.ceil(Br[3])):Br=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Lr=this.current.activeSMask,Or=this.suspendedCtx;Er(Or,Lr,this.ctx,Br),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Sr(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const Br=this.current;this.stateStack.push(Br),this.current=Br.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Sr(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(Br,Lr,Or,zr,Gr,Yr){this.ctx.transform(Br,Lr,Or,zr,Gr,Yr),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(Br,Lr,Or){const zr=this.ctx,Gr=this.current;let Yr=Gr.x,dn=Gr.y,En,Sn;const Bn=(0,nr.getCurrentTransform)(zr),kn=Bn[0]===0&&Bn[3]===0||Bn[1]===0&&Bn[2]===0,Kn=kn?Or.slice(0):null;for(let Cn=0,Jr=0,Fn=Br.length;Cn<Fn;Cn++)switch(Br[Cn]|0){case rr.OPS.rectangle:Yr=Lr[Jr++],dn=Lr[Jr++];const Zr=Lr[Jr++],hn=Lr[Jr++],bn=Yr+Zr,In=dn+hn;zr.moveTo(Yr,dn),Zr===0||hn===0?zr.lineTo(bn,In):(zr.lineTo(bn,dn),zr.lineTo(bn,In),zr.lineTo(Yr,In)),kn||Gr.updateRectMinMax(Bn,[Yr,dn,bn,In]),zr.closePath();break;case rr.OPS.moveTo:Yr=Lr[Jr++],dn=Lr[Jr++],zr.moveTo(Yr,dn),kn||Gr.updatePathMinMax(Bn,Yr,dn);break;case rr.OPS.lineTo:Yr=Lr[Jr++],dn=Lr[Jr++],zr.lineTo(Yr,dn),kn||Gr.updatePathMinMax(Bn,Yr,dn);break;case rr.OPS.curveTo:En=Yr,Sn=dn,Yr=Lr[Jr+4],dn=Lr[Jr+5],zr.bezierCurveTo(Lr[Jr],Lr[Jr+1],Lr[Jr+2],Lr[Jr+3],Yr,dn),Gr.updateCurvePathMinMax(Bn,En,Sn,Lr[Jr],Lr[Jr+1],Lr[Jr+2],Lr[Jr+3],Yr,dn,Kn),Jr+=6;break;case rr.OPS.curveTo2:En=Yr,Sn=dn,zr.bezierCurveTo(Yr,dn,Lr[Jr],Lr[Jr+1],Lr[Jr+2],Lr[Jr+3]),Gr.updateCurvePathMinMax(Bn,En,Sn,Yr,dn,Lr[Jr],Lr[Jr+1],Lr[Jr+2],Lr[Jr+3],Kn),Yr=Lr[Jr+2],dn=Lr[Jr+3],Jr+=4;break;case rr.OPS.curveTo3:En=Yr,Sn=dn,Yr=Lr[Jr+2],dn=Lr[Jr+3],zr.bezierCurveTo(Lr[Jr],Lr[Jr+1],Yr,dn,Yr,dn),Gr.updateCurvePathMinMax(Bn,En,Sn,Lr[Jr],Lr[Jr+1],Yr,dn,Yr,dn,Kn),Jr+=4;break;case rr.OPS.closePath:zr.closePath();break}kn&&Gr.updateScalingPathMinMax(Bn,Kn),Gr.setCurrentPoint(Yr,dn)}closePath(){this.ctx.closePath()}stroke(Br=!0){const Lr=this.ctx,Or=this.current.strokeColor;Lr.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Or=="object"&&(Or!=null&&Or.getPattern)?(Lr.save(),Lr.strokeStyle=Or.getPattern(Lr,this,(0,nr.getCurrentTransformInverse)(Lr),sr.PathType.STROKE),this.rescaleAndStroke(!1),Lr.restore()):this.rescaleAndStroke(!0)),Br&&this.consumePath(this.current.getClippedPathBoundingBox()),Lr.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Br=!0){const Lr=this.ctx,Or=this.current.fillColor,zr=this.current.patternFill;let Gr=!1;zr&&(Lr.save(),Lr.fillStyle=Or.getPattern(Lr,this,(0,nr.getCurrentTransformInverse)(Lr),sr.PathType.FILL),Gr=!0);const Yr=this.current.getClippedPathBoundingBox();this.contentVisible&&Yr!==null&&(this.pendingEOFill?(Lr.fill("evenodd"),this.pendingEOFill=!1):Lr.fill()),Gr&&Lr.restore(),Br&&this.consumePath(Yr)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Ur}eoClip(){this.pendingClip=Vr}beginText(){this.current.textMatrix=rr.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const Br=this.pendingTextPaths,Lr=this.ctx;if(Br===void 0){Lr.beginPath();return}Lr.save(),Lr.beginPath();for(const Or of Br)Lr.setTransform(...Or.transform),Lr.translate(Or.x,Or.y),Or.addToPath(Lr,Or.fontSize);Lr.restore(),Lr.clip(),Lr.beginPath(),delete this.pendingTextPaths}setCharSpacing(Br){this.current.charSpacing=Br}setWordSpacing(Br){this.current.wordSpacing=Br}setHScale(Br){this.current.textHScale=Br/100}setLeading(Br){this.current.leading=-Br}setFont(Br,Lr){var Bn;const Or=this.commonObjs.get(Br),zr=this.current;if(!Or)throw new Error(`Can't find font for ${Br}`);if(zr.fontMatrix=Or.fontMatrix||rr.FONT_IDENTITY_MATRIX,(zr.fontMatrix[0]===0||zr.fontMatrix[3]===0)&&(0,rr.warn)("Invalid font matrix for font "+Br),Lr<0?(Lr=-Lr,zr.fontDirection=-1):zr.fontDirection=1,this.current.font=Or,this.current.fontSize=Lr,Or.isType3Font)return;const Gr=Or.loadedName||"sans-serif",Yr=((Bn=Or.systemFontInfo)==null?void 0:Bn.css)||`"${Gr}", ${Or.fallbackName}`;let dn="normal";Or.black?dn="900":Or.bold&&(dn="bold");const En=Or.italic?"italic":"normal";let Sn=Lr;Lr<or?Sn=or:Lr>ar&&(Sn=ar),this.current.fontSizeScale=Lr/Sn,this.ctx.font=`${En} ${dn} ${Sn}px ${Yr}`}setTextRenderingMode(Br){this.current.textRenderingMode=Br}setTextRise(Br){this.current.textRise=Br}moveText(Br,Lr){this.current.x=this.current.lineX+=Br,this.current.y=this.current.lineY+=Lr}setLeadingMoveText(Br,Lr){this.setLeading(-Lr),this.moveText(Br,Lr)}setTextMatrix(Br,Lr,Or,zr,Gr,Yr){this.current.textMatrix=[Br,Lr,Or,zr,Gr,Yr],this.current.textMatrixScale=Math.hypot(Br,Lr),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Br,Lr,Or,zr){const Gr=this.ctx,Yr=this.current,dn=Yr.font,En=Yr.textRenderingMode,Sn=Yr.fontSize/Yr.fontSizeScale,Bn=En&rr.TextRenderingMode.FILL_STROKE_MASK,kn=!!(En&rr.TextRenderingMode.ADD_TO_PATH_FLAG),Kn=Yr.patternFill&&!dn.missingFile;let Cn;(dn.disableFontFace||kn||Kn)&&(Cn=dn.getPathGenerator(this.commonObjs,Br)),dn.disableFontFace||Kn?(Gr.save(),Gr.translate(Lr,Or),Gr.beginPath(),Cn(Gr,Sn),zr&&Gr.setTransform(...zr),(Bn===rr.TextRenderingMode.FILL||Bn===rr.TextRenderingMode.FILL_STROKE)&&Gr.fill(),(Bn===rr.TextRenderingMode.STROKE||Bn===rr.TextRenderingMode.FILL_STROKE)&&Gr.stroke(),Gr.restore()):((Bn===rr.TextRenderingMode.FILL||Bn===rr.TextRenderingMode.FILL_STROKE)&&Gr.fillText(Br,Lr,Or),(Bn===rr.TextRenderingMode.STROKE||Bn===rr.TextRenderingMode.FILL_STROKE)&&Gr.strokeText(Br,Lr,Or)),kn&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,nr.getCurrentTransform)(Gr),x:Lr,y:Or,fontSize:Sn,addToPath:Cn})}get isFontSubpixelAAEnabled(){const{context:Br}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Br.scale(1.5,1),Br.fillText("I",0,10);const Lr=Br.getImageData(0,0,10,10).data;let Or=!1;for(let zr=3;zr<Lr.length;zr+=4)if(Lr[zr]>0&&Lr[zr]<255){Or=!0;break}return(0,rr.shadow)(this,"isFontSubpixelAAEnabled",Or)}showText(Br){const Lr=this.current,Or=Lr.font;if(Or.isType3Font)return this.showType3Text(Br);const zr=Lr.fontSize;if(zr===0)return;const Gr=this.ctx,Yr=Lr.fontSizeScale,dn=Lr.charSpacing,En=Lr.wordSpacing,Sn=Lr.fontDirection,Bn=Lr.textHScale*Sn,kn=Br.length,Kn=Or.vertical,Cn=Kn?1:-1,Jr=Or.defaultVMetrics,Fn=zr*Lr.fontMatrix[0],Zr=Lr.textRenderingMode===rr.TextRenderingMode.FILL&&!Or.disableFontFace&&!Lr.patternFill;Gr.save(),Gr.transform(...Lr.textMatrix),Gr.translate(Lr.x,Lr.y+Lr.textRise),Sn>0?Gr.scale(Bn,-1):Gr.scale(Bn,1);let hn;if(Lr.patternFill){Gr.save();const qn=Lr.fillColor.getPattern(Gr,this,(0,nr.getCurrentTransformInverse)(Gr),sr.PathType.FILL);hn=(0,nr.getCurrentTransform)(Gr),Gr.restore(),Gr.fillStyle=qn}let bn=Lr.lineWidth;const In=Lr.textMatrixScale;if(In===0||bn===0){const qn=Lr.textRenderingMode&rr.TextRenderingMode.FILL_STROKE_MASK;(qn===rr.TextRenderingMode.STROKE||qn===rr.TextRenderingMode.FILL_STROKE)&&(bn=this.getSinglePixelWidth())}else bn/=In;if(Yr!==1&&(Gr.scale(Yr,Yr),bn/=Yr),Gr.lineWidth=bn,Or.isInvalidPDFjsFont){const qn=[];let Nn=0;for(const ns of Br)qn.push(ns.unicode),Nn+=ns.width;Gr.fillText(qn.join(""),0,0),Lr.x+=Nn*Fn*Bn,Gr.restore(),this.compose();return}let jn=0,zn;for(zn=0;zn<kn;++zn){const qn=Br[zn];if(typeof qn=="number"){jn+=Cn*qn*zr/1e3;continue}let Nn=!1;const ns=(qn.isSpace?En:0)+dn,rs=qn.fontChar,Is=qn.accent;let ps,Ps,ls=qn.width;if(Kn){const Fs=qn.vmetric||Jr,Vs=-(qn.vmetric?Fs[1]:ls*.5)*Fn,ts=Fs[2]*Fn;ls=Fs?-Fs[0]:ls,ps=Vs/Yr,Ps=(jn+ts)/Yr}else ps=jn/Yr,Ps=0;if(Or.remeasure&&ls>0){const Fs=Gr.measureText(rs).width*1e3/zr*Yr;if(ls<Fs&&this.isFontSubpixelAAEnabled){const Vs=ls/Fs;Nn=!0,Gr.save(),Gr.scale(Vs,1),ps/=Vs}else ls!==Fs&&(ps+=(ls-Fs)/2e3*zr/Yr)}if(this.contentVisible&&(qn.isInFont||Or.missingFile)){if(Zr&&!Is)Gr.fillText(rs,ps,Ps);else if(this.paintChar(rs,ps,Ps,hn),Is){const Fs=ps+zr*Is.offset.x/Yr,Vs=Ps-zr*Is.offset.y/Yr;this.paintChar(Is.fontChar,Fs,Vs,hn)}}const Ts=Kn?ls*Fn-ns*Sn:ls*Fn+ns*Sn;jn+=Ts,Nn&&Gr.restore()}Kn?Lr.y-=jn:Lr.x+=jn*Bn,Gr.restore(),this.compose()}showType3Text(Br){const Lr=this.ctx,Or=this.current,zr=Or.font,Gr=Or.fontSize,Yr=Or.fontDirection,dn=zr.vertical?1:-1,En=Or.charSpacing,Sn=Or.wordSpacing,Bn=Or.textHScale*Yr,kn=Or.fontMatrix||rr.FONT_IDENTITY_MATRIX,Kn=Br.length,Cn=Or.textRenderingMode===rr.TextRenderingMode.INVISIBLE;let Jr,Fn,Zr,hn;if(!(Cn||Gr===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,Lr.save(),Lr.transform(...Or.textMatrix),Lr.translate(Or.x,Or.y),Lr.scale(Bn,Yr),Jr=0;Jr<Kn;++Jr){if(Fn=Br[Jr],typeof Fn=="number"){hn=dn*Fn*Gr/1e3,this.ctx.translate(hn,0),Or.x+=hn*Bn;continue}const bn=(Fn.isSpace?Sn:0)+En,In=zr.charProcOperatorList[Fn.operatorListId];if(!In){(0,rr.warn)(`Type3 character "${Fn.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Fn,this.save(),Lr.scale(Gr,Gr),Lr.transform(...kn),this.executeOperatorList(In),this.restore()),Zr=rr.Util.applyTransform([Fn.width,0],kn)[0]*Gr+bn,Lr.translate(Zr,0),Or.x+=Zr*Bn}Lr.restore(),this.processingType3=null}}setCharWidth(Br,Lr){}setCharWidthAndBounds(Br,Lr,Or,zr,Gr,Yr){this.ctx.rect(Or,zr,Gr-Or,Yr-zr),this.ctx.clip(),this.endPath()}getColorN_Pattern(Br){let Lr;if(Br[0]==="TilingPattern"){const Or=Br[1],zr=this.baseTransform||(0,nr.getCurrentTransform)(this.ctx),Gr={createCanvasGraphics:Yr=>new pn(Yr,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Lr=new sr.TilingPattern(Br,Or,this.ctx,Gr,zr)}else Lr=this._getPattern(Br[1],Br[2]);return Lr}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Br,Lr,Or){const zr=rr.Util.makeHexColor(Br,Lr,Or);this.ctx.strokeStyle=zr,this.current.strokeColor=zr}setFillRGBColor(Br,Lr,Or){const zr=rr.Util.makeHexColor(Br,Lr,Or);this.ctx.fillStyle=zr,this.current.fillColor=zr,this.current.patternFill=!1}_getPattern(Br,Lr=null){let Or;return this.cachedPatterns.has(Br)?Or=this.cachedPatterns.get(Br):(Or=(0,sr.getShadingPattern)(this.getObject(Br)),this.cachedPatterns.set(Br,Or)),Lr&&(Or.matrix=Lr),Or}shadingFill(Br){if(!this.contentVisible)return;const Lr=this.ctx;this.save();const Or=this._getPattern(Br);Lr.fillStyle=Or.getPattern(Lr,this,(0,nr.getCurrentTransformInverse)(Lr),sr.PathType.SHADING);const zr=(0,nr.getCurrentTransformInverse)(Lr);if(zr){const{width:Gr,height:Yr}=Lr.canvas,[dn,En,Sn,Bn]=rr.Util.getAxialAlignedBoundingBox([0,0,Gr,Yr],zr);this.ctx.fillRect(dn,En,Sn-dn,Bn-En)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,rr.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,rr.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Br,Lr){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Br)&&Br.length===6&&this.transform(...Br),this.baseTransform=(0,nr.getCurrentTransform)(this.ctx),Lr)){const Or=Lr[2]-Lr[0],zr=Lr[3]-Lr[1];this.ctx.rect(Lr[0],Lr[1],Or,zr),this.current.updateRectMinMax((0,nr.getCurrentTransform)(this.ctx),Lr),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Br){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Lr=this.ctx;Br.isolated||(0,rr.info)("TODO: Support non-isolated groups."),Br.knockout&&(0,rr.warn)("Knockout groups not supported.");const Or=(0,nr.getCurrentTransform)(Lr);if(Br.matrix&&Lr.transform(...Br.matrix),!Br.bbox)throw new Error("Bounding box is required.");let zr=rr.Util.getAxialAlignedBoundingBox(Br.bbox,(0,nr.getCurrentTransform)(Lr));const Gr=[0,0,Lr.canvas.width,Lr.canvas.height];zr=rr.Util.intersect(zr,Gr)||[0,0,0,0];const Yr=Math.floor(zr[0]),dn=Math.floor(zr[1]);let En=Math.max(Math.ceil(zr[2])-Yr,1),Sn=Math.max(Math.ceil(zr[3])-dn,1),Bn=1,kn=1;En>lr&&(Bn=En/lr,En=lr),Sn>lr&&(kn=Sn/lr,Sn=lr),this.current.startNewPathAndClipBox([0,0,En,Sn]);let Kn="groupAt"+this.groupLevel;Br.smask&&(Kn+="_smask_"+this.smaskCounter++%2);const Cn=this.cachedCanvases.getCanvas(Kn,En,Sn),Jr=Cn.context;Jr.scale(1/Bn,1/kn),Jr.translate(-Yr,-dn),Jr.transform(...Or),Br.smask?this.smaskStack.push({canvas:Cn.canvas,context:Jr,offsetX:Yr,offsetY:dn,scaleX:Bn,scaleY:kn,subtype:Br.smask.subtype,backdrop:Br.smask.backdrop,transferMap:Br.smask.transferMap||null,startTransformInverse:null}):(Lr.setTransform(1,0,0,1,0,0),Lr.translate(Yr,dn),Lr.scale(Bn,kn),Lr.save()),Sr(Lr,Jr),this.ctx=Jr,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Lr),this.groupLevel++}endGroup(Br){if(!this.contentVisible)return;this.groupLevel--;const Lr=this.ctx,Or=this.groupStack.pop();if(this.ctx=Or,this.ctx.imageSmoothingEnabled=!1,Br.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const zr=(0,nr.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...zr);const Gr=rr.Util.getAxialAlignedBoundingBox([0,0,Lr.canvas.width,Lr.canvas.height],zr);this.ctx.drawImage(Lr.canvas,0,0),this.ctx.restore(),this.compose(Gr)}}beginAnnotation(Br,Lr,Or,zr,Gr){if(Un(this,Hr,zm).call(this),Nr(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Lr)&&Lr.length===4){const Yr=Lr[2]-Lr[0],dn=Lr[3]-Lr[1];if(Gr&&this.annotationCanvasMap){Or=Or.slice(),Or[4]-=Lr[0],Or[5]-=Lr[1],Lr=Lr.slice(),Lr[0]=Lr[1]=0,Lr[2]=Yr,Lr[3]=dn;const[En,Sn]=rr.Util.singularValueDecompose2dScale((0,nr.getCurrentTransform)(this.ctx)),{viewportScale:Bn}=this,kn=Math.ceil(Yr*this.outputScaleX*Bn),Kn=Math.ceil(dn*this.outputScaleY*Bn);this.annotationCanvas=this.canvasFactory.create(kn,Kn);const{canvas:Cn,context:Jr}=this.annotationCanvas;this.annotationCanvasMap.set(Br,Cn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Jr,this.ctx.save(),this.ctx.setTransform(En,0,0,-Sn,0,dn*Sn),Nr(this.ctx)}else Nr(this.ctx),this.ctx.rect(Lr[0],Lr[1],Yr,dn),this.ctx.clip(),this.endPath()}this.current=new gr(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...Or),this.transform(...zr)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Un(this,Hr,Gm).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Br){if(!this.contentVisible)return;const Lr=Br.count;Br=this.getObject(Br.data,Br),Br.count=Lr;const Or=this.ctx,zr=this.processingType3;if(zr&&(zr.compiled===void 0&&(zr.compiled=hr(Br)),zr.compiled)){zr.compiled(Or);return}const Gr=this._createMaskCanvas(Br),Yr=Gr.canvas;Or.save(),Or.setTransform(1,0,0,1,0,0),Or.drawImage(Yr,Gr.offsetX,Gr.offsetY),Or.restore(),this.compose()}paintImageMaskXObjectRepeat(Br,Lr,Or=0,zr=0,Gr,Yr){if(!this.contentVisible)return;Br=this.getObject(Br.data,Br);const dn=this.ctx;dn.save();const En=(0,nr.getCurrentTransform)(dn);dn.transform(Lr,Or,zr,Gr,0,0);const Sn=this._createMaskCanvas(Br);dn.setTransform(1,0,0,1,Sn.offsetX-En[4],Sn.offsetY-En[5]);for(let Bn=0,kn=Yr.length;Bn<kn;Bn+=2){const Kn=rr.Util.transform(En,[Lr,Or,zr,Gr,Yr[Bn],Yr[Bn+1]]),[Cn,Jr]=rr.Util.applyTransform([0,0],Kn);dn.drawImage(Sn.canvas,Cn,Jr)}dn.restore(),this.compose()}paintImageMaskXObjectGroup(Br){if(!this.contentVisible)return;const Lr=this.ctx,Or=this.current.fillColor,zr=this.current.patternFill;for(const Gr of Br){const{data:Yr,width:dn,height:En,transform:Sn}=Gr,Bn=this.cachedCanvases.getCanvas("maskCanvas",dn,En),kn=Bn.context;kn.save();const Kn=this.getObject(Yr,Gr);Tr(kn,Kn),kn.globalCompositeOperation="source-in",kn.fillStyle=zr?Or.getPattern(kn,this,(0,nr.getCurrentTransformInverse)(Lr),sr.PathType.FILL):Or,kn.fillRect(0,0,dn,En),kn.restore(),Lr.save(),Lr.transform(...Sn),Lr.scale(1,-1),yr(Lr,Bn.canvas,0,0,dn,En,0,-1,1,1),Lr.restore()}this.compose()}paintImageXObject(Br){if(!this.contentVisible)return;const Lr=this.getObject(Br);if(!Lr){(0,rr.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Lr)}paintImageXObjectRepeat(Br,Lr,Or,zr){if(!this.contentVisible)return;const Gr=this.getObject(Br);if(!Gr){(0,rr.warn)("Dependent image isn't ready yet");return}const Yr=Gr.width,dn=Gr.height,En=[];for(let Sn=0,Bn=zr.length;Sn<Bn;Sn+=2)En.push({transform:[Lr,0,0,Or,zr[Sn],zr[Sn+1]],x:0,y:0,w:Yr,h:dn});this.paintInlineImageXObjectGroup(Gr,En)}applyTransferMapsToCanvas(Br){return this.current.transferMaps!=="none"&&(Br.filter=this.current.transferMaps,Br.drawImage(Br.canvas,0,0),Br.filter="none"),Br.canvas}applyTransferMapsToBitmap(Br){if(this.current.transferMaps==="none")return Br.bitmap;const{bitmap:Lr,width:Or,height:zr}=Br,Gr=this.cachedCanvases.getCanvas("inlineImage",Or,zr),Yr=Gr.context;return Yr.filter=this.current.transferMaps,Yr.drawImage(Lr,0,0),Yr.filter="none",Gr.canvas}paintInlineImageXObject(Br){if(!this.contentVisible)return;const Lr=Br.width,Or=Br.height,zr=this.ctx;if(this.save(),!rr.isNodeJS){const{filter:dn}=zr;dn!=="none"&&dn!==""&&(zr.filter="none")}zr.scale(1/Lr,-1/Or);let Gr;if(Br.bitmap)Gr=this.applyTransferMapsToBitmap(Br);else if(typeof HTMLElement=="function"&&Br instanceof HTMLElement||!Br.data)Gr=Br;else{const En=this.cachedCanvases.getCanvas("inlineImage",Lr,Or).context;Cr(En,Br),Gr=this.applyTransferMapsToCanvas(En)}const Yr=this._scaleImage(Gr,(0,nr.getCurrentTransformInverse)(zr));zr.imageSmoothingEnabled=Rr((0,nr.getCurrentTransform)(zr),Br.interpolate),yr(zr,Yr.img,0,0,Yr.paintWidth,Yr.paintHeight,0,-Or,Lr,Or),this.compose(),this.restore()}paintInlineImageXObjectGroup(Br,Lr){if(!this.contentVisible)return;const Or=this.ctx;let zr;if(Br.bitmap)zr=Br.bitmap;else{const Gr=Br.width,Yr=Br.height,En=this.cachedCanvases.getCanvas("inlineImage",Gr,Yr).context;Cr(En,Br),zr=this.applyTransferMapsToCanvas(En)}for(const Gr of Lr)Or.save(),Or.transform(...Gr.transform),Or.scale(1,-1),yr(Or,zr,Gr.x,Gr.y,Gr.w,Gr.h,0,-1,1,1),Or.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Br){}markPointProps(Br,Lr){}beginMarkedContent(Br){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Br,Lr){Br==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Lr)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Br){const Lr=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(Br);const Or=this.ctx;this.pendingClip&&(Lr||(this.pendingClip===Vr?Or.clip("evenodd"):Or.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Or.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const Br=(0,nr.getCurrentTransform)(this.ctx);if(Br[1]===0&&Br[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Br[0]),Math.abs(Br[3]));else{const Lr=Math.abs(Br[0]*Br[3]-Br[2]*Br[1]),Or=Math.hypot(Br[0],Br[2]),zr=Math.hypot(Br[1],Br[3]);this._cachedGetSinglePixelWidth=Math.max(Or,zr)/Lr}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:Br}=this.current,{a:Lr,b:Or,c:zr,d:Gr}=this.ctx.getTransform();let Yr,dn;if(Or===0&&zr===0){const En=Math.abs(Lr),Sn=Math.abs(Gr);if(En===Sn)if(Br===0)Yr=dn=1/En;else{const Bn=En*Br;Yr=dn=Bn<1?1/Bn:1}else if(Br===0)Yr=1/En,dn=1/Sn;else{const Bn=En*Br,kn=Sn*Br;Yr=Bn<1?1/Bn:1,dn=kn<1?1/kn:1}}else{const En=Math.abs(Lr*Gr-Or*zr),Sn=Math.hypot(Lr,Or),Bn=Math.hypot(zr,Gr);if(Br===0)Yr=Bn/En,dn=Sn/En;else{const kn=Br*En;Yr=Bn>kn?Bn/kn:1,dn=Sn>kn?Sn/kn:1}}this._cachedScaleForStroking[0]=Yr,this._cachedScaleForStroking[1]=dn}return this._cachedScaleForStroking}rescaleAndStroke(Br){const{ctx:Lr}=this,{lineWidth:Or}=this.current,[zr,Gr]=this.getScaleForStroking();if(Lr.lineWidth=Or||1,zr===1&&Gr===1){Lr.stroke();return}const Yr=Lr.getLineDash();if(Br&&Lr.save(),Lr.scale(zr,Gr),Yr.length>0){const dn=Math.max(zr,Gr);Lr.setLineDash(Yr.map(En=>En/dn)),Lr.lineDashOffset/=dn}Lr.stroke(),Br&&Lr.restore()}isContentVisible(){for(let Br=this.markedContentStack.length-1;Br>=0;Br--)if(!this.markedContentStack[Br].visible)return!1;return!0}};Hr=new WeakSet,zm=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Gm=function(){if(this.pageColors){const Br=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(Br!=="none"){const Lr=this.ctx.filter;this.ctx.filter=Br,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=Lr}}};let Wr=pn;_e.CanvasGraphics=Wr;for(const jr in rr.OPS)Wr.prototype[jr]!==void 0&&(Wr.prototype[rr.OPS[jr]]=Wr.prototype[jr])},(er,_e,tr)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.TilingPattern=_e.PathType=void 0,_e.getShadingPattern=dr;var rr=tr(1),nr=tr(6);const sr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};_e.PathType=sr;function ir(hr,gr){if(!gr)return;const Cr=gr[2]-gr[0],Tr=gr[3]-gr[1],Sr=new Path2D;Sr.rect(gr[0],gr[1],Cr,Tr),hr.clip(Sr)}class or{constructor(){this.constructor===or&&(0,rr.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,rr.unreachable)("Abstract method `getPattern` called.")}}class ar extends or{constructor(gr){super(),this._type=gr[1],this._bbox=gr[2],this._colorStops=gr[3],this._p0=gr[4],this._p1=gr[5],this._r0=gr[6],this._r1=gr[7],this.matrix=null}_createGradient(gr){let Cr;this._type==="axial"?Cr=gr.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(Cr=gr.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const Tr of this._colorStops)Cr.addColorStop(Tr[0],Tr[1]);return Cr}getPattern(gr,Cr,Tr,Sr){let Nr;if(Sr===sr.STROKE||Sr===sr.FILL){const _r=Cr.current.getClippedPathBoundingBox(Sr,(0,nr.getCurrentTransform)(gr))||[0,0,0,0],vr=Math.ceil(_r[2]-_r[0])||1,br=Math.ceil(_r[3]-_r[1])||1,Pr=Cr.cachedCanvases.getCanvas("pattern",vr,br,!0),Er=Pr.context;Er.clearRect(0,0,Er.canvas.width,Er.canvas.height),Er.beginPath(),Er.rect(0,0,Er.canvas.width,Er.canvas.height),Er.translate(-_r[0],-_r[1]),Tr=rr.Util.transform(Tr,[1,0,0,1,_r[0],_r[1]]),Er.transform(...Cr.baseTransform),this.matrix&&Er.transform(...this.matrix),ir(Er,this._bbox),Er.fillStyle=this._createGradient(Er),Er.fill(),Nr=gr.createPattern(Pr.canvas,"no-repeat");const Rr=new DOMMatrix(Tr);Nr.setTransform(Rr)}else ir(gr,this._bbox),Nr=this._createGradient(gr);return Nr}}function lr(hr,gr,Cr,Tr,Sr,Nr,_r,vr){const br=gr.coords,Pr=gr.colors,Er=hr.data,Rr=hr.width*4;let Ir;br[Cr+1]>br[Tr+1]&&(Ir=Cr,Cr=Tr,Tr=Ir,Ir=Nr,Nr=_r,_r=Ir),br[Tr+1]>br[Sr+1]&&(Ir=Tr,Tr=Sr,Sr=Ir,Ir=_r,_r=vr,vr=Ir),br[Cr+1]>br[Tr+1]&&(Ir=Cr,Cr=Tr,Tr=Ir,Ir=Nr,Nr=_r,_r=Ir);const Qr=(br[Cr]+gr.offsetX)*gr.scaleX,Ur=(br[Cr+1]+gr.offsetY)*gr.scaleY,Vr=(br[Tr]+gr.offsetX)*gr.scaleX,Wr=(br[Tr+1]+gr.offsetY)*gr.scaleY,Hr=(br[Sr]+gr.offsetX)*gr.scaleX,$r=(br[Sr+1]+gr.offsetY)*gr.scaleY;if(Ur>=$r)return;const Xr=Pr[Nr],pn=Pr[Nr+1],jr=Pr[Nr+2],Br=Pr[_r],Lr=Pr[_r+1],Or=Pr[_r+2],zr=Pr[vr],Gr=Pr[vr+1],Yr=Pr[vr+2],dn=Math.round(Ur),En=Math.round($r);let Sn,Bn,kn,Kn,Cn,Jr,Fn,Zr;for(let hn=dn;hn<=En;hn++){if(hn<Wr){const qn=hn<Ur?0:(Ur-hn)/(Ur-Wr);Sn=Qr-(Qr-Vr)*qn,Bn=Xr-(Xr-Br)*qn,kn=pn-(pn-Lr)*qn,Kn=jr-(jr-Or)*qn}else{let qn;hn>$r?qn=1:Wr===$r?qn=0:qn=(Wr-hn)/(Wr-$r),Sn=Vr-(Vr-Hr)*qn,Bn=Br-(Br-zr)*qn,kn=Lr-(Lr-Gr)*qn,Kn=Or-(Or-Yr)*qn}let bn;hn<Ur?bn=0:hn>$r?bn=1:bn=(Ur-hn)/(Ur-$r),Cn=Qr-(Qr-Hr)*bn,Jr=Xr-(Xr-zr)*bn,Fn=pn-(pn-Gr)*bn,Zr=jr-(jr-Yr)*bn;const In=Math.round(Math.min(Sn,Cn)),jn=Math.round(Math.max(Sn,Cn));let zn=Rr*hn+In*4;for(let qn=In;qn<=jn;qn++)bn=(Sn-qn)/(Sn-Cn),bn<0?bn=0:bn>1&&(bn=1),Er[zn++]=Bn-(Bn-Jr)*bn|0,Er[zn++]=kn-(kn-Fn)*bn|0,Er[zn++]=Kn-(Kn-Zr)*bn|0,Er[zn++]=255}}function cr(hr,gr,Cr){const Tr=gr.coords,Sr=gr.colors;let Nr,_r;switch(gr.type){case"lattice":const vr=gr.verticesPerRow,br=Math.floor(Tr.length/vr)-1,Pr=vr-1;for(Nr=0;Nr<br;Nr++){let Er=Nr*vr;for(let Rr=0;Rr<Pr;Rr++,Er++)lr(hr,Cr,Tr[Er],Tr[Er+1],Tr[Er+vr],Sr[Er],Sr[Er+1],Sr[Er+vr]),lr(hr,Cr,Tr[Er+vr+1],Tr[Er+1],Tr[Er+vr],Sr[Er+vr+1],Sr[Er+1],Sr[Er+vr])}break;case"triangles":for(Nr=0,_r=Tr.length;Nr<_r;Nr+=3)lr(hr,Cr,Tr[Nr],Tr[Nr+1],Tr[Nr+2],Sr[Nr],Sr[Nr+1],Sr[Nr+2]);break;default:throw new Error("illegal figure")}}class Ar extends or{constructor(gr){super(),this._coords=gr[2],this._colors=gr[3],this._figures=gr[4],this._bounds=gr[5],this._bbox=gr[7],this._background=gr[8],this.matrix=null}_createMeshCanvas(gr,Cr,Tr){const vr=Math.floor(this._bounds[0]),br=Math.floor(this._bounds[1]),Pr=Math.ceil(this._bounds[2])-vr,Er=Math.ceil(this._bounds[3])-br,Rr=Math.min(Math.ceil(Math.abs(Pr*gr[0]*1.1)),3e3),Ir=Math.min(Math.ceil(Math.abs(Er*gr[1]*1.1)),3e3),Qr=Pr/Rr,Ur=Er/Ir,Vr={coords:this._coords,colors:this._colors,offsetX:-vr,offsetY:-br,scaleX:1/Qr,scaleY:1/Ur},Wr=Rr+2*2,Hr=Ir+2*2,$r=Tr.getCanvas("mesh",Wr,Hr,!1),Xr=$r.context,pn=Xr.createImageData(Rr,Ir);if(Cr){const Br=pn.data;for(let Lr=0,Or=Br.length;Lr<Or;Lr+=4)Br[Lr]=Cr[0],Br[Lr+1]=Cr[1],Br[Lr+2]=Cr[2],Br[Lr+3]=255}for(const Br of this._figures)cr(pn,Br,Vr);return Xr.putImageData(pn,2,2),{canvas:$r.canvas,offsetX:vr-2*Qr,offsetY:br-2*Ur,scaleX:Qr,scaleY:Ur}}getPattern(gr,Cr,Tr,Sr){ir(gr,this._bbox);let Nr;if(Sr===sr.SHADING)Nr=rr.Util.singularValueDecompose2dScale((0,nr.getCurrentTransform)(gr));else if(Nr=rr.Util.singularValueDecompose2dScale(Cr.baseTransform),this.matrix){const vr=rr.Util.singularValueDecompose2dScale(this.matrix);Nr=[Nr[0]*vr[0],Nr[1]*vr[1]]}const _r=this._createMeshCanvas(Nr,Sr===sr.SHADING?null:this._background,Cr.cachedCanvases);return Sr!==sr.SHADING&&(gr.setTransform(...Cr.baseTransform),this.matrix&&gr.transform(...this.matrix)),gr.translate(_r.offsetX,_r.offsetY),gr.scale(_r.scaleX,_r.scaleY),gr.createPattern(_r.canvas,"no-repeat")}}class ur extends or{getPattern(){return"hotpink"}}function dr(hr){switch(hr[0]){case"RadialAxial":return new ar(hr);case"Mesh":return new Ar(hr);case"Dummy":return new ur}throw new Error(`Unknown IR type: ${hr[0]}`)}const mr={COLORED:1,UNCOLORED:2},yr=class yr{constructor(gr,Cr,Tr,Sr,Nr){this.operatorList=gr[2],this.matrix=gr[3]||[1,0,0,1,0,0],this.bbox=gr[4],this.xstep=gr[5],this.ystep=gr[6],this.paintType=gr[7],this.tilingType=gr[8],this.color=Cr,this.ctx=Tr,this.canvasGraphicsFactory=Sr,this.baseTransform=Nr}createPatternCanvas(gr){const Cr=this.operatorList,Tr=this.bbox,Sr=this.xstep,Nr=this.ystep,_r=this.paintType,vr=this.tilingType,br=this.color,Pr=this.canvasGraphicsFactory;(0,rr.info)("TilingType: "+vr);const Er=Tr[0],Rr=Tr[1],Ir=Tr[2],Qr=Tr[3],Ur=rr.Util.singularValueDecompose2dScale(this.matrix),Vr=rr.Util.singularValueDecompose2dScale(this.baseTransform),Wr=[Ur[0]*Vr[0],Ur[1]*Vr[1]],Hr=this.getSizeAndScale(Sr,this.ctx.canvas.width,Wr[0]),$r=this.getSizeAndScale(Nr,this.ctx.canvas.height,Wr[1]),Xr=gr.cachedCanvases.getCanvas("pattern",Hr.size,$r.size,!0),pn=Xr.context,jr=Pr.createCanvasGraphics(pn);jr.groupLevel=gr.groupLevel,this.setFillAndStrokeStyleToContext(jr,_r,br);let Br=Er,Lr=Rr,Or=Ir,zr=Qr;return Er<0&&(Br=0,Or+=Math.abs(Er)),Rr<0&&(Lr=0,zr+=Math.abs(Rr)),pn.translate(-(Hr.scale*Br),-($r.scale*Lr)),jr.transform(Hr.scale,0,0,$r.scale,0,0),pn.save(),this.clipBbox(jr,Br,Lr,Or,zr),jr.baseTransform=(0,nr.getCurrentTransform)(jr.ctx),jr.executeOperatorList(Cr),jr.endDrawing(),{canvas:Xr.canvas,scaleX:Hr.scale,scaleY:$r.scale,offsetX:Br,offsetY:Lr}}getSizeAndScale(gr,Cr,Tr){gr=Math.abs(gr);const Sr=Math.max(yr.MAX_PATTERN_SIZE,Cr);let Nr=Math.ceil(gr*Tr);return Nr>=Sr?Nr=Sr:Tr=Nr/gr,{scale:Tr,size:Nr}}clipBbox(gr,Cr,Tr,Sr,Nr){const _r=Sr-Cr,vr=Nr-Tr;gr.ctx.rect(Cr,Tr,_r,vr),gr.current.updateRectMinMax((0,nr.getCurrentTransform)(gr.ctx),[Cr,Tr,Sr,Nr]),gr.clip(),gr.endPath()}setFillAndStrokeStyleToContext(gr,Cr,Tr){const Sr=gr.ctx,Nr=gr.current;switch(Cr){case mr.COLORED:const _r=this.ctx;Sr.fillStyle=_r.fillStyle,Sr.strokeStyle=_r.strokeStyle,Nr.fillColor=_r.fillStyle,Nr.strokeColor=_r.strokeStyle;break;case mr.UNCOLORED:const vr=rr.Util.makeHexColor(Tr[0],Tr[1],Tr[2]);Sr.fillStyle=vr,Sr.strokeStyle=vr,Nr.fillColor=vr,Nr.strokeColor=vr;break;default:throw new rr.FormatError(`Unsupported paint type: ${Cr}`)}}getPattern(gr,Cr,Tr,Sr){let Nr=Tr;Sr!==sr.SHADING&&(Nr=rr.Util.transform(Nr,Cr.baseTransform),this.matrix&&(Nr=rr.Util.transform(Nr,this.matrix)));const _r=this.createPatternCanvas(Cr);let vr=new DOMMatrix(Nr);vr=vr.translate(_r.offsetX,_r.offsetY),vr=vr.scale(1/_r.scaleX,1/_r.scaleY);const br=gr.createPattern(_r.canvas,"repeat");return br.setTransform(vr),br}};oo(yr,"MAX_PATTERN_SIZE",3e3);let pr=yr;_e.TilingPattern=pr},(er,_e,tr)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.convertBlackAndWhiteToRGBA=sr,_e.convertToRGBA=nr,_e.grayToRGBA=or;var rr=tr(1);function nr(ar){switch(ar.kind){case rr.ImageKind.GRAYSCALE_1BPP:return sr(ar);case rr.ImageKind.RGB_24BPP:return ir(ar)}return null}function sr({src:ar,srcPos:lr=0,dest:cr,width:Ar,height:ur,nonBlackColor:dr=4294967295,inverseDecode:mr=!1}){const pr=rr.FeatureTest.isLittleEndian?4278190080:255,[yr,hr]=mr?[dr,pr]:[pr,dr],gr=Ar>>3,Cr=Ar&7,Tr=ar.length;cr=new Uint32Array(cr.buffer);let Sr=0;for(let Nr=0;Nr<ur;Nr++){for(const vr=lr+gr;lr<vr;lr++){const br=lr<Tr?ar[lr]:255;cr[Sr++]=br&128?hr:yr,cr[Sr++]=br&64?hr:yr,cr[Sr++]=br&32?hr:yr,cr[Sr++]=br&16?hr:yr,cr[Sr++]=br&8?hr:yr,cr[Sr++]=br&4?hr:yr,cr[Sr++]=br&2?hr:yr,cr[Sr++]=br&1?hr:yr}if(Cr===0)continue;const _r=lr<Tr?ar[lr++]:255;for(let vr=0;vr<Cr;vr++)cr[Sr++]=_r&1<<7-vr?hr:yr}return{srcPos:lr,destPos:Sr}}function ir({src:ar,srcPos:lr=0,dest:cr,destPos:Ar=0,width:ur,height:dr}){let mr=0;const pr=ar.length>>2,yr=new Uint32Array(ar.buffer,lr,pr);if(rr.FeatureTest.isLittleEndian){for(;mr<pr-2;mr+=3,Ar+=4){const hr=yr[mr],gr=yr[mr+1],Cr=yr[mr+2];cr[Ar]=hr|4278190080,cr[Ar+1]=hr>>>24|gr<<8|4278190080,cr[Ar+2]=gr>>>16|Cr<<16|4278190080,cr[Ar+3]=Cr>>>8|4278190080}for(let hr=mr*4,gr=ar.length;hr<gr;hr+=3)cr[Ar++]=ar[hr]|ar[hr+1]<<8|ar[hr+2]<<16|4278190080}else{for(;mr<pr-2;mr+=3,Ar+=4){const hr=yr[mr],gr=yr[mr+1],Cr=yr[mr+2];cr[Ar]=hr|255,cr[Ar+1]=hr<<24|gr>>>8|255,cr[Ar+2]=gr<<16|Cr>>>16|255,cr[Ar+3]=Cr<<8|255}for(let hr=mr*4,gr=ar.length;hr<gr;hr+=3)cr[Ar++]=ar[hr]<<24|ar[hr+1]<<16|ar[hr+2]<<8|255}return{srcPos:lr,destPos:Ar}}function or(ar,lr){if(rr.FeatureTest.isLittleEndian)for(let cr=0,Ar=ar.length;cr<Ar;cr++)lr[cr]=ar[cr]*65793|4278190080;else for(let cr=0,Ar=ar.length;cr<Ar;cr++)lr[cr]=ar[cr]*16843008|255}},(er,_e)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.GlobalWorkerOptions=void 0;const tr=Object.create(null);_e.GlobalWorkerOptions=tr,tr.workerPort=null,tr.workerSrc=""},(er,_e,tr)=>{var ar,nx,sx,sm;Object.defineProperty(_e,"__esModule",{value:!0}),_e.MessageHandler=void 0;var rr=tr(1);const nr={UNKNOWN:0,DATA:1,ERROR:2},sr={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ir(ur){switch(ur instanceof Error||typeof ur=="object"&&ur!==null||(0,rr.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),ur.name){case"AbortException":return new rr.AbortException(ur.message);case"MissingPDFException":return new rr.MissingPDFException(ur.message);case"PasswordException":return new rr.PasswordException(ur.message,ur.code);case"UnexpectedResponseException":return new rr.UnexpectedResponseException(ur.message,ur.status);case"UnknownErrorException":return new rr.UnknownErrorException(ur.message,ur.details);default:return new rr.UnknownErrorException(ur.message,ur.toString())}}class or{constructor(dr,mr,pr){Vn(this,ar);this.sourceName=dr,this.targetName=mr,this.comObj=pr,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=yr=>{const hr=yr.data;if(hr.targetName!==this.sourceName)return;if(hr.stream){Un(this,ar,sx).call(this,hr);return}if(hr.callback){const Cr=hr.callbackId,Tr=this.callbackCapabilities[Cr];if(!Tr)throw new Error(`Cannot resolve callback ${Cr}`);if(delete this.callbackCapabilities[Cr],hr.callback===nr.DATA)Tr.resolve(hr.data);else if(hr.callback===nr.ERROR)Tr.reject(ir(hr.reason));else throw new Error("Unexpected callback case");return}const gr=this.actionHandler[hr.action];if(!gr)throw new Error(`Unknown action from worker: ${hr.action}`);if(hr.callbackId){const Cr=this.sourceName,Tr=hr.sourceName;new Promise(function(Sr){Sr(gr(hr.data))}).then(function(Sr){pr.postMessage({sourceName:Cr,targetName:Tr,callback:nr.DATA,callbackId:hr.callbackId,data:Sr})},function(Sr){pr.postMessage({sourceName:Cr,targetName:Tr,callback:nr.ERROR,callbackId:hr.callbackId,reason:ir(Sr)})});return}if(hr.streamId){Un(this,ar,nx).call(this,hr);return}gr(hr.data)},pr.addEventListener("message",this._onComObjOnMessage)}on(dr,mr){const pr=this.actionHandler;if(pr[dr])throw new Error(`There is already an actionName called "${dr}"`);pr[dr]=mr}send(dr,mr,pr){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:dr,data:mr},pr)}sendWithPromise(dr,mr,pr){const yr=this.callbackId++,hr=new rr.PromiseCapability;this.callbackCapabilities[yr]=hr;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:dr,callbackId:yr,data:mr},pr)}catch(gr){hr.reject(gr)}return hr.promise}sendWithStream(dr,mr,pr,yr){const hr=this.streamId++,gr=this.sourceName,Cr=this.targetName,Tr=this.comObj;return new ReadableStream({start:Sr=>{const Nr=new rr.PromiseCapability;return this.streamControllers[hr]={controller:Sr,startCall:Nr,pullCall:null,cancelCall:null,isClosed:!1},Tr.postMessage({sourceName:gr,targetName:Cr,action:dr,streamId:hr,data:mr,desiredSize:Sr.desiredSize},yr),Nr.promise},pull:Sr=>{const Nr=new rr.PromiseCapability;return this.streamControllers[hr].pullCall=Nr,Tr.postMessage({sourceName:gr,targetName:Cr,stream:sr.PULL,streamId:hr,desiredSize:Sr.desiredSize}),Nr.promise},cancel:Sr=>{(0,rr.assert)(Sr instanceof Error,"cancel must have a valid reason");const Nr=new rr.PromiseCapability;return this.streamControllers[hr].cancelCall=Nr,this.streamControllers[hr].isClosed=!0,Tr.postMessage({sourceName:gr,targetName:Cr,stream:sr.CANCEL,streamId:hr,reason:ir(Sr)}),Nr.promise}},pr)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}ar=new WeakSet,nx=function(dr){const mr=dr.streamId,pr=this.sourceName,yr=dr.sourceName,hr=this.comObj,gr=this,Cr=this.actionHandler[dr.action],Tr={enqueue(Sr,Nr=1,_r){if(this.isCancelled)return;const vr=this.desiredSize;this.desiredSize-=Nr,vr>0&&this.desiredSize<=0&&(this.sinkCapability=new rr.PromiseCapability,this.ready=this.sinkCapability.promise),hr.postMessage({sourceName:pr,targetName:yr,stream:sr.ENQUEUE,streamId:mr,chunk:Sr},_r)},close(){this.isCancelled||(this.isCancelled=!0,hr.postMessage({sourceName:pr,targetName:yr,stream:sr.CLOSE,streamId:mr}),delete gr.streamSinks[mr])},error(Sr){(0,rr.assert)(Sr instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,hr.postMessage({sourceName:pr,targetName:yr,stream:sr.ERROR,streamId:mr,reason:ir(Sr)}))},sinkCapability:new rr.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:dr.desiredSize,ready:null};Tr.sinkCapability.resolve(),Tr.ready=Tr.sinkCapability.promise,this.streamSinks[mr]=Tr,new Promise(function(Sr){Sr(Cr(dr.data,Tr))}).then(function(){hr.postMessage({sourceName:pr,targetName:yr,stream:sr.START_COMPLETE,streamId:mr,success:!0})},function(Sr){hr.postMessage({sourceName:pr,targetName:yr,stream:sr.START_COMPLETE,streamId:mr,reason:ir(Sr)})})},sx=function(dr){const mr=dr.streamId,pr=this.sourceName,yr=dr.sourceName,hr=this.comObj,gr=this.streamControllers[mr],Cr=this.streamSinks[mr];switch(dr.stream){case sr.START_COMPLETE:dr.success?gr.startCall.resolve():gr.startCall.reject(ir(dr.reason));break;case sr.PULL_COMPLETE:dr.success?gr.pullCall.resolve():gr.pullCall.reject(ir(dr.reason));break;case sr.PULL:if(!Cr){hr.postMessage({sourceName:pr,targetName:yr,stream:sr.PULL_COMPLETE,streamId:mr,success:!0});break}Cr.desiredSize<=0&&dr.desiredSize>0&&Cr.sinkCapability.resolve(),Cr.desiredSize=dr.desiredSize,new Promise(function(Tr){var Sr;Tr((Sr=Cr.onPull)==null?void 0:Sr.call(Cr))}).then(function(){hr.postMessage({sourceName:pr,targetName:yr,stream:sr.PULL_COMPLETE,streamId:mr,success:!0})},function(Tr){hr.postMessage({sourceName:pr,targetName:yr,stream:sr.PULL_COMPLETE,streamId:mr,reason:ir(Tr)})});break;case sr.ENQUEUE:if((0,rr.assert)(gr,"enqueue should have stream controller"),gr.isClosed)break;gr.controller.enqueue(dr.chunk);break;case sr.CLOSE:if((0,rr.assert)(gr,"close should have stream controller"),gr.isClosed)break;gr.isClosed=!0,gr.controller.close(),Un(this,ar,sm).call(this,gr,mr);break;case sr.ERROR:(0,rr.assert)(gr,"error should have stream controller"),gr.controller.error(ir(dr.reason)),Un(this,ar,sm).call(this,gr,mr);break;case sr.CANCEL_COMPLETE:dr.success?gr.cancelCall.resolve():gr.cancelCall.reject(ir(dr.reason)),Un(this,ar,sm).call(this,gr,mr);break;case sr.CANCEL:if(!Cr)break;new Promise(function(Tr){var Sr;Tr((Sr=Cr.onCancel)==null?void 0:Sr.call(Cr,ir(dr.reason)))}).then(function(){hr.postMessage({sourceName:pr,targetName:yr,stream:sr.CANCEL_COMPLETE,streamId:mr,success:!0})},function(Tr){hr.postMessage({sourceName:pr,targetName:yr,stream:sr.CANCEL_COMPLETE,streamId:mr,reason:ir(Tr)})}),Cr.sinkCapability.reject(ir(dr.reason)),Cr.isCancelled=!0,delete this.streamSinks[mr];break;default:throw new Error("Unexpected stream case")}},sm=async function(dr,mr){var pr,yr,hr;await Promise.allSettled([(pr=dr.startCall)==null?void 0:pr.promise,(yr=dr.pullCall)==null?void 0:yr.promise,(hr=dr.cancelCall)==null?void 0:hr.promise]),delete this.streamControllers[mr]},_e.MessageHandler=or},(er,_e,tr)=>{var sr,ir;Object.defineProperty(_e,"__esModule",{value:!0}),_e.Metadata=void 0;var rr=tr(1);class nr{constructor({parsedData:ar,rawData:lr}){Vn(this,sr);Vn(this,ir);On(this,sr,ar),On(this,ir,lr)}getRaw(){return kr(this,ir)}get(ar){return kr(this,sr).get(ar)??null}getAll(){return(0,rr.objectFromMap)(kr(this,sr))}has(ar){return kr(this,sr).has(ar)}}sr=new WeakMap,ir=new WeakMap,_e.Metadata=nr},(er,_e,tr)=>{var ar,lr,cr,Ar,ur,dr,Wm;Object.defineProperty(_e,"__esModule",{value:!0}),_e.OptionalContentConfig=void 0;var rr=tr(1),nr=tr(8);const sr=Symbol("INTERNAL");class ir{constructor(yr,hr){Vn(this,ar,!0);this.name=yr,this.intent=hr}get visible(){return kr(this,ar)}_setVisible(yr,hr){yr!==sr&&(0,rr.unreachable)("Internal method `_setVisible` called."),On(this,ar,hr)}}ar=new WeakMap;class or{constructor(yr){Vn(this,dr);Vn(this,lr,null);Vn(this,cr,new Map);Vn(this,Ar,null);Vn(this,ur,null);if(this.name=null,this.creator=null,yr!==null){this.name=yr.name,this.creator=yr.creator,On(this,ur,yr.order);for(const hr of yr.groups)kr(this,cr).set(hr.id,new ir(hr.name,hr.intent));if(yr.baseState==="OFF")for(const hr of kr(this,cr).values())hr._setVisible(sr,!1);for(const hr of yr.on)kr(this,cr).get(hr)._setVisible(sr,!0);for(const hr of yr.off)kr(this,cr).get(hr)._setVisible(sr,!1);On(this,Ar,this.getHash())}}isVisible(yr){if(kr(this,cr).size===0)return!0;if(!yr)return(0,rr.warn)("Optional content group not defined."),!0;if(yr.type==="OCG")return kr(this,cr).has(yr.id)?kr(this,cr).get(yr.id).visible:((0,rr.warn)(`Optional content group not found: ${yr.id}`),!0);if(yr.type==="OCMD"){if(yr.expression)return Un(this,dr,Wm).call(this,yr.expression);if(!yr.policy||yr.policy==="AnyOn"){for(const hr of yr.ids){if(!kr(this,cr).has(hr))return(0,rr.warn)(`Optional content group not found: ${hr}`),!0;if(kr(this,cr).get(hr).visible)return!0}return!1}else if(yr.policy==="AllOn"){for(const hr of yr.ids){if(!kr(this,cr).has(hr))return(0,rr.warn)(`Optional content group not found: ${hr}`),!0;if(!kr(this,cr).get(hr).visible)return!1}return!0}else if(yr.policy==="AnyOff"){for(const hr of yr.ids){if(!kr(this,cr).has(hr))return(0,rr.warn)(`Optional content group not found: ${hr}`),!0;if(!kr(this,cr).get(hr).visible)return!0}return!1}else if(yr.policy==="AllOff"){for(const hr of yr.ids){if(!kr(this,cr).has(hr))return(0,rr.warn)(`Optional content group not found: ${hr}`),!0;if(kr(this,cr).get(hr).visible)return!1}return!0}return(0,rr.warn)(`Unknown optional content policy ${yr.policy}.`),!0}return(0,rr.warn)(`Unknown group type ${yr.type}.`),!0}setVisibility(yr,hr=!0){if(!kr(this,cr).has(yr)){(0,rr.warn)(`Optional content group not found: ${yr}`);return}kr(this,cr).get(yr)._setVisible(sr,!!hr),On(this,lr,null)}get hasInitialVisibility(){return kr(this,Ar)===null||this.getHash()===kr(this,Ar)}getOrder(){return kr(this,cr).size?kr(this,ur)?kr(this,ur).slice():[...kr(this,cr).keys()]:null}getGroups(){return kr(this,cr).size>0?(0,rr.objectFromMap)(kr(this,cr)):null}getGroup(yr){return kr(this,cr).get(yr)||null}getHash(){if(kr(this,lr)!==null)return kr(this,lr);const yr=new nr.MurmurHash3_64;for(const[hr,gr]of kr(this,cr))yr.update(`${hr}:${gr.visible}`);return On(this,lr,yr.hexdigest())}}lr=new WeakMap,cr=new WeakMap,Ar=new WeakMap,ur=new WeakMap,dr=new WeakSet,Wm=function(yr){const hr=yr.length;if(hr<2)return!0;const gr=yr[0];for(let Cr=1;Cr<hr;Cr++){const Tr=yr[Cr];let Sr;if(Array.isArray(Tr))Sr=Un(this,dr,Wm).call(this,Tr);else if(kr(this,cr).has(Tr))Sr=kr(this,cr).get(Tr).visible;else return(0,rr.warn)(`Optional content group not found: ${Tr}`),!0;switch(gr){case"And":if(!Sr)return!1;break;case"Or":if(Sr)return!0;break;case"Not":return!Sr;default:return!0}}return gr==="And"},_e.OptionalContentConfig=or},(er,_e,tr)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.PDFDataTransportStream=void 0;var rr=tr(1),nr=tr(6);class sr{constructor({length:lr,initialData:cr,progressiveDone:Ar=!1,contentDispositionFilename:ur=null,disableRange:dr=!1,disableStream:mr=!1},pr){if((0,rr.assert)(pr,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=Ar,this._contentDispositionFilename=ur,(cr==null?void 0:cr.length)>0){const yr=cr instanceof Uint8Array&&cr.byteLength===cr.buffer.byteLength?cr.buffer:new Uint8Array(cr).buffer;this._queuedChunks.push(yr)}this._pdfDataRangeTransport=pr,this._isStreamingSupported=!mr,this._isRangeSupported=!dr,this._contentLength=lr,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((yr,hr)=>{this._onReceiveData({begin:yr,chunk:hr})}),this._pdfDataRangeTransport.addProgressListener((yr,hr)=>{this._onProgress({loaded:yr,total:hr})}),this._pdfDataRangeTransport.addProgressiveReadListener(yr=>{this._onReceiveData({chunk:yr})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:lr,chunk:cr}){const Ar=cr instanceof Uint8Array&&cr.byteLength===cr.buffer.byteLength?cr.buffer:new Uint8Array(cr).buffer;if(lr===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(Ar):this._queuedChunks.push(Ar);else{const ur=this._rangeReaders.some(function(dr){return dr._begin!==lr?!1:(dr._enqueue(Ar),!0)});(0,rr.assert)(ur,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var lr;return((lr=this._fullRequestReader)==null?void 0:lr._loaded)??0}_onProgress(lr){var cr,Ar,ur,dr;lr.total===void 0?(Ar=(cr=this._rangeReaders[0])==null?void 0:cr.onProgress)==null||Ar.call(cr,{loaded:lr.loaded}):(dr=(ur=this._fullRequestReader)==null?void 0:ur.onProgress)==null||dr.call(ur,{loaded:lr.loaded,total:lr.total})}_onProgressiveDone(){var lr;(lr=this._fullRequestReader)==null||lr.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(lr){const cr=this._rangeReaders.indexOf(lr);cr>=0&&this._rangeReaders.splice(cr,1)}getFullReader(){(0,rr.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const lr=this._queuedChunks;return this._queuedChunks=null,new ir(this,lr,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(lr,cr){if(cr<=this._progressiveDataLength)return null;const Ar=new or(this,lr,cr);return this._pdfDataRangeTransport.requestDataRange(lr,cr),this._rangeReaders.push(Ar),Ar}cancelAllRequests(lr){var cr;(cr=this._fullRequestReader)==null||cr.cancel(lr);for(const Ar of this._rangeReaders.slice(0))Ar.cancel(lr);this._pdfDataRangeTransport.abort()}}_e.PDFDataTransportStream=sr;class ir{constructor(lr,cr,Ar=!1,ur=null){this._stream=lr,this._done=Ar||!1,this._filename=(0,nr.isPdfFile)(ur)?ur:null,this._queuedChunks=cr||[],this._loaded=0;for(const dr of this._queuedChunks)this._loaded+=dr.byteLength;this._requests=[],this._headersReady=Promise.resolve(),lr._fullRequestReader=this,this.onProgress=null}_enqueue(lr){this._done||(this._requests.length>0?this._requests.shift().resolve({value:lr,done:!1}):this._queuedChunks.push(lr),this._loaded+=lr.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const lr=new rr.PromiseCapability;return this._requests.push(lr),lr.promise}cancel(lr){this._done=!0;for(const cr of this._requests)cr.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class or{constructor(lr,cr,Ar){this._stream=lr,this._begin=cr,this._end=Ar,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(lr){if(!this._done){if(this._requests.length===0)this._queuedChunk=lr;else{this._requests.shift().resolve({value:lr,done:!1});for(const Ar of this._requests)Ar.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const cr=this._queuedChunk;return this._queuedChunk=null,{value:cr,done:!1}}if(this._done)return{value:void 0,done:!0};const lr=new rr.PromiseCapability;return this._requests.push(lr),lr.promise}cancel(lr){this._done=!0;for(const cr of this._requests)cr.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(er,_e,tr)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.PDFFetchStream=void 0;var rr=tr(1),nr=tr(20);function sr(Ar,ur,dr){return{method:"GET",headers:Ar,signal:dr.signal,mode:"cors",credentials:ur?"include":"same-origin",redirect:"follow"}}function ir(Ar){const ur=new Headers;for(const dr in Ar){const mr=Ar[dr];mr!==void 0&&ur.append(dr,mr)}return ur}function or(Ar){return Ar instanceof Uint8Array?Ar.buffer:Ar instanceof ArrayBuffer?Ar:((0,rr.warn)(`getArrayBuffer - unexpected data format: ${Ar}`),new Uint8Array(Ar).buffer)}class ar{constructor(ur){this.source=ur,this.isHttp=/^https?:/i.test(ur.url),this.httpHeaders=this.isHttp&&ur.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var ur;return((ur=this._fullRequestReader)==null?void 0:ur._loaded)??0}getFullReader(){return(0,rr.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new lr(this),this._fullRequestReader}getRangeReader(ur,dr){if(dr<=this._progressiveDataLength)return null;const mr=new cr(this,ur,dr);return this._rangeRequestReaders.push(mr),mr}cancelAllRequests(ur){var dr;(dr=this._fullRequestReader)==null||dr.cancel(ur);for(const mr of this._rangeRequestReaders.slice(0))mr.cancel(ur)}}_e.PDFFetchStream=ar;class lr{constructor(ur){this._stream=ur,this._reader=null,this._loaded=0,this._filename=null;const dr=ur.source;this._withCredentials=dr.withCredentials||!1,this._contentLength=dr.length,this._headersCapability=new rr.PromiseCapability,this._disableRange=dr.disableRange||!1,this._rangeChunkSize=dr.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!dr.disableStream,this._isRangeSupported=!dr.disableRange,this._headers=ir(this._stream.httpHeaders);const mr=dr.url;fetch(mr,sr(this._headers,this._withCredentials,this._abortController)).then(pr=>{if(!(0,nr.validateResponseStatus)(pr.status))throw(0,nr.createResponseStatusError)(pr.status,mr);this._reader=pr.body.getReader(),this._headersCapability.resolve();const yr=Cr=>pr.headers.get(Cr),{allowRangeRequests:hr,suggestedLength:gr}=(0,nr.validateRangeRequestCapabilities)({getResponseHeader:yr,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=hr,this._contentLength=gr||this._contentLength,this._filename=(0,nr.extractFilenameFromHeader)(yr),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new rr.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var mr;await this._headersCapability.promise;const{value:ur,done:dr}=await this._reader.read();return dr?{value:ur,done:dr}:(this._loaded+=ur.byteLength,(mr=this.onProgress)==null||mr.call(this,{loaded:this._loaded,total:this._contentLength}),{value:or(ur),done:!1})}cancel(ur){var dr;(dr=this._reader)==null||dr.cancel(ur),this._abortController.abort()}}class cr{constructor(ur,dr,mr){this._stream=ur,this._reader=null,this._loaded=0;const pr=ur.source;this._withCredentials=pr.withCredentials||!1,this._readCapability=new rr.PromiseCapability,this._isStreamingSupported=!pr.disableStream,this._abortController=new AbortController,this._headers=ir(this._stream.httpHeaders),this._headers.append("Range",`bytes=${dr}-${mr-1}`);const yr=pr.url;fetch(yr,sr(this._headers,this._withCredentials,this._abortController)).then(hr=>{if(!(0,nr.validateResponseStatus)(hr.status))throw(0,nr.createResponseStatusError)(hr.status,yr);this._readCapability.resolve(),this._reader=hr.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var mr;await this._readCapability.promise;const{value:ur,done:dr}=await this._reader.read();return dr?{value:ur,done:dr}:(this._loaded+=ur.byteLength,(mr=this.onProgress)==null||mr.call(this,{loaded:this._loaded}),{value:or(ur),done:!1})}cancel(ur){var dr;(dr=this._reader)==null||dr.cancel(ur),this._abortController.abort()}}},(er,_e,tr)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.createResponseStatusError=ar,_e.extractFilenameFromHeader=or,_e.validateRangeRequestCapabilities=ir,_e.validateResponseStatus=lr;var rr=tr(1),nr=tr(21),sr=tr(6);function ir({getResponseHeader:cr,isHttp:Ar,rangeChunkSize:ur,disableRange:dr}){const mr={allowRangeRequests:!1,suggestedLength:void 0},pr=parseInt(cr("Content-Length"),10);return!Number.isInteger(pr)||(mr.suggestedLength=pr,pr<=2*ur)||dr||!Ar||cr("Accept-Ranges")!=="bytes"||(cr("Content-Encoding")||"identity")!=="identity"||(mr.allowRangeRequests=!0),mr}function or(cr){const Ar=cr("Content-Disposition");if(Ar){let ur=(0,nr.getFilenameFromContentDispositionHeader)(Ar);if(ur.includes("%"))try{ur=decodeURIComponent(ur)}catch{}if((0,sr.isPdfFile)(ur))return ur}return null}function ar(cr,Ar){return cr===404||cr===0&&Ar.startsWith("file:")?new rr.MissingPDFException('Missing PDF "'+Ar+'".'):new rr.UnexpectedResponseException(`Unexpected server response (${cr}) while retrieving PDF "${Ar}".`,cr)}function lr(cr){return cr===200||cr===206}},(er,_e,tr)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.getFilenameFromContentDispositionHeader=nr;var rr=tr(1);function nr(sr){let ir=!0,or=ar("filename\\*","i").exec(sr);if(or){or=or[1];let pr=ur(or);return pr=unescape(pr),pr=dr(pr),pr=mr(pr),cr(pr)}if(or=Ar(sr),or){const pr=mr(or);return cr(pr)}if(or=ar("filename","i").exec(sr),or){or=or[1];let pr=ur(or);return pr=mr(pr),cr(pr)}function ar(pr,yr){return new RegExp("(?:^|;)\\s*"+pr+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',yr)}function lr(pr,yr){if(pr){if(!/^[\x00-\xFF]+$/.test(yr))return yr;try{const hr=new TextDecoder(pr,{fatal:!0}),gr=(0,rr.stringToBytes)(yr);yr=hr.decode(gr),ir=!1}catch{}}return yr}function cr(pr){return ir&&/[\x80-\xff]/.test(pr)&&(pr=lr("utf-8",pr),ir&&(pr=lr("iso-8859-1",pr))),pr}function Ar(pr){const yr=[];let hr;const gr=ar("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(hr=gr.exec(pr))!==null;){let[,Tr,Sr,Nr]=hr;if(Tr=parseInt(Tr,10),Tr in yr){if(Tr===0)break;continue}yr[Tr]=[Sr,Nr]}const Cr=[];for(let Tr=0;Tr<yr.length&&Tr in yr;++Tr){let[Sr,Nr]=yr[Tr];Nr=ur(Nr),Sr&&(Nr=unescape(Nr),Tr===0&&(Nr=dr(Nr))),Cr.push(Nr)}return Cr.join("")}function ur(pr){if(pr.startsWith('"')){const yr=pr.slice(1).split('\\"');for(let hr=0;hr<yr.length;++hr){const gr=yr[hr].indexOf('"');gr!==-1&&(yr[hr]=yr[hr].slice(0,gr),yr.length=hr+1),yr[hr]=yr[hr].replaceAll(/\\(.)/g,"$1")}pr=yr.join('"')}return pr}function dr(pr){const yr=pr.indexOf("'");if(yr===-1)return pr;const hr=pr.slice(0,yr),Cr=pr.slice(yr+1).replace(/^[^']*'/,"");return lr(hr,Cr)}function mr(pr){return!pr.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(pr)?pr:pr.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(yr,hr,gr,Cr){if(gr==="q"||gr==="Q")return Cr=Cr.replaceAll("_"," "),Cr=Cr.replaceAll(/=([0-9a-fA-F]{2})/g,function(Tr,Sr){return String.fromCharCode(parseInt(Sr,16))}),lr(hr,Cr);try{Cr=atob(Cr)}catch{}return lr(hr,Cr)})}return""}},(er,_e,tr)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.PDFNetworkStream=void 0;var rr=tr(1),nr=tr(20);const sr=200,ir=206;function or(ur){const dr=ur.response;return typeof dr!="string"?dr:(0,rr.stringToBytes)(dr).buffer}class ar{constructor(dr,mr={}){this.url=dr,this.isHttp=/^https?:/i.test(dr),this.httpHeaders=this.isHttp&&mr.httpHeaders||Object.create(null),this.withCredentials=mr.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(dr,mr,pr){const yr={begin:dr,end:mr};for(const hr in pr)yr[hr]=pr[hr];return this.request(yr)}requestFull(dr){return this.request(dr)}request(dr){const mr=new XMLHttpRequest,pr=this.currXhrId++,yr=this.pendingRequests[pr]={xhr:mr};mr.open("GET",this.url),mr.withCredentials=this.withCredentials;for(const hr in this.httpHeaders){const gr=this.httpHeaders[hr];gr!==void 0&&mr.setRequestHeader(hr,gr)}return this.isHttp&&"begin"in dr&&"end"in dr?(mr.setRequestHeader("Range",`bytes=${dr.begin}-${dr.end-1}`),yr.expectedStatus=ir):yr.expectedStatus=sr,mr.responseType="arraybuffer",dr.onError&&(mr.onerror=function(hr){dr.onError(mr.status)}),mr.onreadystatechange=this.onStateChange.bind(this,pr),mr.onprogress=this.onProgress.bind(this,pr),yr.onHeadersReceived=dr.onHeadersReceived,yr.onDone=dr.onDone,yr.onError=dr.onError,yr.onProgress=dr.onProgress,mr.send(null),pr}onProgress(dr,mr){var yr;const pr=this.pendingRequests[dr];pr&&((yr=pr.onProgress)==null||yr.call(pr,mr))}onStateChange(dr,mr){var Tr,Sr,Nr;const pr=this.pendingRequests[dr];if(!pr)return;const yr=pr.xhr;if(yr.readyState>=2&&pr.onHeadersReceived&&(pr.onHeadersReceived(),delete pr.onHeadersReceived),yr.readyState!==4||!(dr in this.pendingRequests))return;if(delete this.pendingRequests[dr],yr.status===0&&this.isHttp){(Tr=pr.onError)==null||Tr.call(pr,yr.status);return}const hr=yr.status||sr;if(!(hr===sr&&pr.expectedStatus===ir)&&hr!==pr.expectedStatus){(Sr=pr.onError)==null||Sr.call(pr,yr.status);return}const Cr=or(yr);if(hr===ir){const _r=yr.getResponseHeader("Content-Range"),vr=/bytes (\d+)-(\d+)\/(\d+)/.exec(_r);pr.onDone({begin:parseInt(vr[1],10),chunk:Cr})}else Cr?pr.onDone({begin:0,chunk:Cr}):(Nr=pr.onError)==null||Nr.call(pr,yr.status)}getRequestXhr(dr){return this.pendingRequests[dr].xhr}isPendingRequest(dr){return dr in this.pendingRequests}abortRequest(dr){const mr=this.pendingRequests[dr].xhr;delete this.pendingRequests[dr],mr.abort()}}class lr{constructor(dr){this._source=dr,this._manager=new ar(dr.url,{httpHeaders:dr.httpHeaders,withCredentials:dr.withCredentials}),this._rangeChunkSize=dr.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(dr){const mr=this._rangeRequestReaders.indexOf(dr);mr>=0&&this._rangeRequestReaders.splice(mr,1)}getFullReader(){return(0,rr.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new cr(this._manager,this._source),this._fullRequestReader}getRangeReader(dr,mr){const pr=new Ar(this._manager,dr,mr);return pr.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(pr),pr}cancelAllRequests(dr){var mr;(mr=this._fullRequestReader)==null||mr.cancel(dr);for(const pr of this._rangeRequestReaders.slice(0))pr.cancel(dr)}}_e.PDFNetworkStream=lr;class cr{constructor(dr,mr){this._manager=dr;const pr={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=mr.url,this._fullRequestId=dr.requestFull(pr),this._headersReceivedCapability=new rr.PromiseCapability,this._disableRange=mr.disableRange||!1,this._contentLength=mr.length,this._rangeChunkSize=mr.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const dr=this._fullRequestId,mr=this._manager.getRequestXhr(dr),pr=gr=>mr.getResponseHeader(gr),{allowRangeRequests:yr,suggestedLength:hr}=(0,nr.validateRangeRequestCapabilities)({getResponseHeader:pr,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});yr&&(this._isRangeSupported=!0),this._contentLength=hr||this._contentLength,this._filename=(0,nr.extractFilenameFromHeader)(pr),this._isRangeSupported&&this._manager.abortRequest(dr),this._headersReceivedCapability.resolve()}_onDone(dr){if(dr&&(this._requests.length>0?this._requests.shift().resolve({value:dr.chunk,done:!1}):this._cachedChunks.push(dr.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const mr of this._requests)mr.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(dr){this._storedError=(0,nr.createResponseStatusError)(dr,this._url),this._headersReceivedCapability.reject(this._storedError);for(const mr of this._requests)mr.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(dr){var mr;(mr=this.onProgress)==null||mr.call(this,{loaded:dr.loaded,total:dr.lengthComputable?dr.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const dr=new rr.PromiseCapability;return this._requests.push(dr),dr.promise}cancel(dr){this._done=!0,this._headersReceivedCapability.reject(dr);for(const mr of this._requests)mr.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Ar{constructor(dr,mr,pr){this._manager=dr;const yr={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=dr.url,this._requestId=dr.requestRange(mr,pr,yr),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var dr;(dr=this.onClosed)==null||dr.call(this,this)}_onDone(dr){const mr=dr.chunk;this._requests.length>0?this._requests.shift().resolve({value:mr,done:!1}):this._queuedChunk=mr,this._done=!0;for(const pr of this._requests)pr.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(dr){this._storedError=(0,nr.createResponseStatusError)(dr,this._url);for(const mr of this._requests)mr.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(dr){var mr;this.isStreamingSupported||(mr=this.onProgress)==null||mr.call(this,{loaded:dr.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const mr=this._queuedChunk;return this._queuedChunk=null,{value:mr,done:!1}}if(this._done)return{value:void 0,done:!0};const dr=new rr.PromiseCapability;return this._requests.push(dr),dr.promise}cancel(dr){this._done=!0;for(const mr of this._requests)mr.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(er,_e,tr)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.PDFNodeStream=void 0;var rr=tr(1),nr=tr(20);const sr=/^file:\/\/\/[a-zA-Z]:\//;function ir(pr){const yr=require$$5,hr=yr.parse(pr);return hr.protocol==="file:"||hr.host?hr:/^[a-z]:[/\\]/i.test(pr)?yr.parse(`file:///${pr}`):(hr.host||(hr.protocol="file:"),hr)}class or{constructor(yr){this.source=yr,this.url=ir(yr.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&yr.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var yr;return((yr=this._fullRequestReader)==null?void 0:yr._loaded)??0}getFullReader(){return(0,rr.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new dr(this):new Ar(this),this._fullRequestReader}getRangeReader(yr,hr){if(hr<=this._progressiveDataLength)return null;const gr=this.isFsUrl?new mr(this,yr,hr):new ur(this,yr,hr);return this._rangeRequestReaders.push(gr),gr}cancelAllRequests(yr){var hr;(hr=this._fullRequestReader)==null||hr.cancel(yr);for(const gr of this._rangeRequestReaders.slice(0))gr.cancel(yr)}}_e.PDFNodeStream=or;class ar{constructor(yr){this._url=yr.url,this._done=!1,this._storedError=null,this.onProgress=null;const hr=yr.source;this._contentLength=hr.length,this._loaded=0,this._filename=null,this._disableRange=hr.disableRange||!1,this._rangeChunkSize=hr.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!hr.disableStream,this._isRangeSupported=!hr.disableRange,this._readableStream=null,this._readCapability=new rr.PromiseCapability,this._headersCapability=new rr.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var gr;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const yr=this._readableStream.read();return yr===null?(this._readCapability=new rr.PromiseCapability,this.read()):(this._loaded+=yr.length,(gr=this.onProgress)==null||gr.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(yr).buffer,done:!1})}cancel(yr){if(!this._readableStream){this._error(yr);return}this._readableStream.destroy(yr)}_error(yr){this._storedError=yr,this._readCapability.resolve()}_setReadableStream(yr){this._readableStream=yr,yr.on("readable",()=>{this._readCapability.resolve()}),yr.on("end",()=>{yr.destroy(),this._done=!0,this._readCapability.resolve()}),yr.on("error",hr=>{this._error(hr)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new rr.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class lr{constructor(yr){this._url=yr.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new rr.PromiseCapability;const hr=yr.source;this._isStreamingSupported=!hr.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var gr;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const yr=this._readableStream.read();return yr===null?(this._readCapability=new rr.PromiseCapability,this.read()):(this._loaded+=yr.length,(gr=this.onProgress)==null||gr.call(this,{loaded:this._loaded}),{value:new Uint8Array(yr).buffer,done:!1})}cancel(yr){if(!this._readableStream){this._error(yr);return}this._readableStream.destroy(yr)}_error(yr){this._storedError=yr,this._readCapability.resolve()}_setReadableStream(yr){this._readableStream=yr,yr.on("readable",()=>{this._readCapability.resolve()}),yr.on("end",()=>{yr.destroy(),this._done=!0,this._readCapability.resolve()}),yr.on("error",hr=>{this._error(hr)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function cr(pr,yr){return{protocol:pr.protocol,auth:pr.auth,host:pr.hostname,port:pr.port,path:pr.path,method:"GET",headers:yr}}class Ar extends ar{constructor(yr){super(yr);const hr=gr=>{if(gr.statusCode===404){const Nr=new rr.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Nr,this._headersCapability.reject(Nr);return}this._headersCapability.resolve(),this._setReadableStream(gr);const Cr=Nr=>this._readableStream.headers[Nr.toLowerCase()],{allowRangeRequests:Tr,suggestedLength:Sr}=(0,nr.validateRangeRequestCapabilities)({getResponseHeader:Cr,isHttp:yr.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Tr,this._contentLength=Sr||this._contentLength,this._filename=(0,nr.extractFilenameFromHeader)(Cr)};if(this._request=null,this._url.protocol==="http:"){const gr=require$$5;this._request=gr.request(cr(this._url,yr.httpHeaders),hr)}else{const gr=require$$5;this._request=gr.request(cr(this._url,yr.httpHeaders),hr)}this._request.on("error",gr=>{this._storedError=gr,this._headersCapability.reject(gr)}),this._request.end()}}class ur extends lr{constructor(yr,hr,gr){super(yr),this._httpHeaders={};for(const Tr in yr.httpHeaders){const Sr=yr.httpHeaders[Tr];Sr!==void 0&&(this._httpHeaders[Tr]=Sr)}this._httpHeaders.Range=`bytes=${hr}-${gr-1}`;const Cr=Tr=>{if(Tr.statusCode===404){const Sr=new rr.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Sr;return}this._setReadableStream(Tr)};if(this._request=null,this._url.protocol==="http:"){const Tr=require$$5;this._request=Tr.request(cr(this._url,this._httpHeaders),Cr)}else{const Tr=require$$5;this._request=Tr.request(cr(this._url,this._httpHeaders),Cr)}this._request.on("error",Tr=>{this._storedError=Tr}),this._request.end()}}class dr extends ar{constructor(yr){super(yr);let hr=decodeURIComponent(this._url.path);sr.test(this._url.href)&&(hr=hr.replace(/^\//,""));const gr=require$$5;gr.lstat(hr,(Cr,Tr)=>{if(Cr){Cr.code==="ENOENT"&&(Cr=new rr.MissingPDFException(`Missing PDF "${hr}".`)),this._storedError=Cr,this._headersCapability.reject(Cr);return}this._contentLength=Tr.size,this._setReadableStream(gr.createReadStream(hr)),this._headersCapability.resolve()})}}class mr extends lr{constructor(yr,hr,gr){super(yr);let Cr=decodeURIComponent(this._url.path);sr.test(this._url.href)&&(Cr=Cr.replace(/^\//,""));const Tr=require$$5;this._setReadableStream(Tr.createReadStream(Cr,{start:hr,end:gr-1}))}}},(er,_e,tr)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.SVGGraphics=void 0;var rr=tr(6),nr=tr(1);const sr={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},ir="http://www.w3.org/XML/1998/namespace",or="http://www.w3.org/1999/xlink",ar=["butt","round","square"],lr=["miter","round","bevel"],cr=function(Tr,Sr="",Nr=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!Nr)return URL.createObjectURL(new Blob([Tr],{type:Sr}));const _r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let vr=`data:${Sr};base64,`;for(let br=0,Pr=Tr.length;br<Pr;br+=3){const Er=Tr[br]&255,Rr=Tr[br+1]&255,Ir=Tr[br+2]&255,Qr=Er>>2,Ur=(Er&3)<<4|Rr>>4,Vr=br+1<Pr?(Rr&15)<<2|Ir>>6:64,Wr=br+2<Pr?Ir&63:64;vr+=_r[Qr]+_r[Ur]+_r[Vr]+_r[Wr]}return vr},Ar=function(){const Tr=new Uint8Array([137,80,78,71,13,10,26,10]),Sr=12,Nr=new Int32Array(256);for(let Ir=0;Ir<256;Ir++){let Qr=Ir;for(let Ur=0;Ur<8;Ur++)Qr=Qr&1?3988292384^Qr>>1&2147483647:Qr>>1&2147483647;Nr[Ir]=Qr}function _r(Ir,Qr,Ur){let Vr=-1;for(let Wr=Qr;Wr<Ur;Wr++){const Hr=(Vr^Ir[Wr])&255,$r=Nr[Hr];Vr=Vr>>>8^$r}return Vr^-1}function vr(Ir,Qr,Ur,Vr){let Wr=Vr;const Hr=Qr.length;Ur[Wr]=Hr>>24&255,Ur[Wr+1]=Hr>>16&255,Ur[Wr+2]=Hr>>8&255,Ur[Wr+3]=Hr&255,Wr+=4,Ur[Wr]=Ir.charCodeAt(0)&255,Ur[Wr+1]=Ir.charCodeAt(1)&255,Ur[Wr+2]=Ir.charCodeAt(2)&255,Ur[Wr+3]=Ir.charCodeAt(3)&255,Wr+=4,Ur.set(Qr,Wr),Wr+=Qr.length;const $r=_r(Ur,Vr+4,Wr);Ur[Wr]=$r>>24&255,Ur[Wr+1]=$r>>16&255,Ur[Wr+2]=$r>>8&255,Ur[Wr+3]=$r&255}function br(Ir,Qr,Ur){let Vr=1,Wr=0;for(let Hr=Qr;Hr<Ur;++Hr)Vr=(Vr+(Ir[Hr]&255))%65521,Wr=(Wr+Vr)%65521;return Wr<<16|Vr}function Pr(Ir){if(!nr.isNodeJS)return Er(Ir);try{const Qr=parseInt(process.versions.node)>=8?Ir:Buffer.from(Ir),Ur=require$$5.deflateSync(Qr,{level:9});return Ur instanceof Uint8Array?Ur:new Uint8Array(Ur)}catch(Qr){(0,nr.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Qr)}return Er(Ir)}function Er(Ir){let Qr=Ir.length;const Ur=65535,Vr=Math.ceil(Qr/Ur),Wr=new Uint8Array(2+Qr+Vr*5+4);let Hr=0;Wr[Hr++]=120,Wr[Hr++]=156;let $r=0;for(;Qr>Ur;)Wr[Hr++]=0,Wr[Hr++]=255,Wr[Hr++]=255,Wr[Hr++]=0,Wr[Hr++]=0,Wr.set(Ir.subarray($r,$r+Ur),Hr),Hr+=Ur,$r+=Ur,Qr-=Ur;Wr[Hr++]=1,Wr[Hr++]=Qr&255,Wr[Hr++]=Qr>>8&255,Wr[Hr++]=~Qr&65535&255,Wr[Hr++]=(~Qr&65535)>>8&255,Wr.set(Ir.subarray($r),Hr),Hr+=Ir.length-$r;const Xr=br(Ir,0,Ir.length);return Wr[Hr++]=Xr>>24&255,Wr[Hr++]=Xr>>16&255,Wr[Hr++]=Xr>>8&255,Wr[Hr++]=Xr&255,Wr}function Rr(Ir,Qr,Ur,Vr){const Wr=Ir.width,Hr=Ir.height;let $r,Xr,pn;const jr=Ir.data;switch(Qr){case nr.ImageKind.GRAYSCALE_1BPP:Xr=0,$r=1,pn=Wr+7>>3;break;case nr.ImageKind.RGB_24BPP:Xr=2,$r=8,pn=Wr*3;break;case nr.ImageKind.RGBA_32BPP:Xr=6,$r=8,pn=Wr*4;break;default:throw new Error("invalid format")}const Br=new Uint8Array((1+pn)*Hr);let Lr=0,Or=0;for(let Sn=0;Sn<Hr;++Sn)Br[Lr++]=0,Br.set(jr.subarray(Or,Or+pn),Lr),Or+=pn,Lr+=pn;if(Qr===nr.ImageKind.GRAYSCALE_1BPP&&Vr){Lr=0;for(let Sn=0;Sn<Hr;Sn++){Lr++;for(let Bn=0;Bn<pn;Bn++)Br[Lr++]^=255}}const zr=new Uint8Array([Wr>>24&255,Wr>>16&255,Wr>>8&255,Wr&255,Hr>>24&255,Hr>>16&255,Hr>>8&255,Hr&255,$r,Xr,0,0,0]),Gr=Pr(Br),Yr=Tr.length+Sr*3+zr.length+Gr.length,dn=new Uint8Array(Yr);let En=0;return dn.set(Tr,En),En+=Tr.length,vr("IHDR",zr,dn,En),En+=Sr+zr.length,vr("IDATA",Gr,dn,En),En+=Sr+Gr.length,vr("IEND",new Uint8Array(0),dn,En),cr(dn,"image/png",Ur)}return function(Qr,Ur,Vr){const Wr=Qr.kind===void 0?nr.ImageKind.GRAYSCALE_1BPP:Qr.kind;return Rr(Qr,Wr,Ur,Vr)}}();class ur{constructor(){this.fontSizeScale=1,this.fontWeight=sr.fontWeight,this.fontSize=0,this.textMatrix=nr.IDENTITY_MATRIX,this.fontMatrix=nr.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=nr.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=sr.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(Sr,Nr){this.x=Sr,this.y=Nr}}function dr(Tr){let Sr=[];const Nr=[];for(const _r of Tr){if(_r.fn==="save"){Sr.push({fnId:92,fn:"group",items:[]}),Nr.push(Sr),Sr=Sr.at(-1).items;continue}_r.fn==="restore"?Sr=Nr.pop():Sr.push(_r)}return Sr}function mr(Tr){if(Number.isInteger(Tr))return Tr.toString();const Sr=Tr.toFixed(10);let Nr=Sr.length-1;if(Sr[Nr]!=="0")return Sr;do Nr--;while(Sr[Nr]==="0");return Sr.substring(0,Sr[Nr]==="."?Nr:Nr+1)}function pr(Tr){if(Tr[4]===0&&Tr[5]===0){if(Tr[1]===0&&Tr[2]===0)return Tr[0]===1&&Tr[3]===1?"":`scale(${mr(Tr[0])} ${mr(Tr[3])})`;if(Tr[0]===Tr[3]&&Tr[1]===-Tr[2]){const Sr=Math.acos(Tr[0])*180/Math.PI;return`rotate(${mr(Sr)})`}}else if(Tr[0]===1&&Tr[1]===0&&Tr[2]===0&&Tr[3]===1)return`translate(${mr(Tr[4])} ${mr(Tr[5])})`;return`matrix(${mr(Tr[0])} ${mr(Tr[1])} ${mr(Tr[2])} ${mr(Tr[3])} ${mr(Tr[4])} ${mr(Tr[5])})`}let yr=0,hr=0,gr=0;class Cr{constructor(Sr,Nr,_r=!1){(0,rr.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new rr.DOMSVGFactory,this.current=new ur,this.transformMatrix=nr.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=Sr,this.objs=Nr,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!_r,this._operatorIdMapping=[];for(const vr in nr.OPS)this._operatorIdMapping[nr.OPS[vr]]=vr}getObject(Sr,Nr=null){return typeof Sr=="string"?Sr.startsWith("g_")?this.commonObjs.get(Sr):this.objs.get(Sr):Nr}save(){this.transformStack.push(this.transformMatrix);const Sr=this.current;this.extraStack.push(Sr),this.current=Sr.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(Sr){this.save(),this.executeOpTree(Sr),this.restore()}loadDependencies(Sr){const Nr=Sr.fnArray,_r=Sr.argsArray;for(let vr=0,br=Nr.length;vr<br;vr++)if(Nr[vr]===nr.OPS.dependency)for(const Pr of _r[vr]){const Er=Pr.startsWith("g_")?this.commonObjs:this.objs,Rr=new Promise(Ir=>{Er.get(Pr,Ir)});this.current.dependencies.push(Rr)}return Promise.all(this.current.dependencies)}transform(Sr,Nr,_r,vr,br,Pr){const Er=[Sr,Nr,_r,vr,br,Pr];this.transformMatrix=nr.Util.transform(this.transformMatrix,Er),this.tgrp=null}getSVG(Sr,Nr){this.viewport=Nr;const _r=this._initialize(Nr);return this.loadDependencies(Sr).then(()=>(this.transformMatrix=nr.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(Sr)),_r))}convertOpList(Sr){const Nr=this._operatorIdMapping,_r=Sr.argsArray,vr=Sr.fnArray,br=[];for(let Pr=0,Er=vr.length;Pr<Er;Pr++){const Rr=vr[Pr];br.push({fnId:Rr,fn:Nr[Rr],args:_r[Pr]})}return dr(br)}executeOpTree(Sr){for(const Nr of Sr){const _r=Nr.fn,vr=Nr.fnId,br=Nr.args;switch(vr|0){case nr.OPS.beginText:this.beginText();break;case nr.OPS.dependency:break;case nr.OPS.setLeading:this.setLeading(br);break;case nr.OPS.setLeadingMoveText:this.setLeadingMoveText(br[0],br[1]);break;case nr.OPS.setFont:this.setFont(br);break;case nr.OPS.showText:this.showText(br[0]);break;case nr.OPS.showSpacedText:this.showText(br[0]);break;case nr.OPS.endText:this.endText();break;case nr.OPS.moveText:this.moveText(br[0],br[1]);break;case nr.OPS.setCharSpacing:this.setCharSpacing(br[0]);break;case nr.OPS.setWordSpacing:this.setWordSpacing(br[0]);break;case nr.OPS.setHScale:this.setHScale(br[0]);break;case nr.OPS.setTextMatrix:this.setTextMatrix(br[0],br[1],br[2],br[3],br[4],br[5]);break;case nr.OPS.setTextRise:this.setTextRise(br[0]);break;case nr.OPS.setTextRenderingMode:this.setTextRenderingMode(br[0]);break;case nr.OPS.setLineWidth:this.setLineWidth(br[0]);break;case nr.OPS.setLineJoin:this.setLineJoin(br[0]);break;case nr.OPS.setLineCap:this.setLineCap(br[0]);break;case nr.OPS.setMiterLimit:this.setMiterLimit(br[0]);break;case nr.OPS.setFillRGBColor:this.setFillRGBColor(br[0],br[1],br[2]);break;case nr.OPS.setStrokeRGBColor:this.setStrokeRGBColor(br[0],br[1],br[2]);break;case nr.OPS.setStrokeColorN:this.setStrokeColorN(br);break;case nr.OPS.setFillColorN:this.setFillColorN(br);break;case nr.OPS.shadingFill:this.shadingFill(br[0]);break;case nr.OPS.setDash:this.setDash(br[0],br[1]);break;case nr.OPS.setRenderingIntent:this.setRenderingIntent(br[0]);break;case nr.OPS.setFlatness:this.setFlatness(br[0]);break;case nr.OPS.setGState:this.setGState(br[0]);break;case nr.OPS.fill:this.fill();break;case nr.OPS.eoFill:this.eoFill();break;case nr.OPS.stroke:this.stroke();break;case nr.OPS.fillStroke:this.fillStroke();break;case nr.OPS.eoFillStroke:this.eoFillStroke();break;case nr.OPS.clip:this.clip("nonzero");break;case nr.OPS.eoClip:this.clip("evenodd");break;case nr.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case nr.OPS.paintImageXObject:this.paintImageXObject(br[0]);break;case nr.OPS.paintInlineImageXObject:this.paintInlineImageXObject(br[0]);break;case nr.OPS.paintImageMaskXObject:this.paintImageMaskXObject(br[0]);break;case nr.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(br[0],br[1]);break;case nr.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case nr.OPS.closePath:this.closePath();break;case nr.OPS.closeStroke:this.closeStroke();break;case nr.OPS.closeFillStroke:this.closeFillStroke();break;case nr.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case nr.OPS.nextLine:this.nextLine();break;case nr.OPS.transform:this.transform(br[0],br[1],br[2],br[3],br[4],br[5]);break;case nr.OPS.constructPath:this.constructPath(br[0],br[1]);break;case nr.OPS.endPath:this.endPath();break;case 92:this.group(Nr.items);break;default:(0,nr.warn)(`Unimplemented operator ${_r}`);break}}}setWordSpacing(Sr){this.current.wordSpacing=Sr}setCharSpacing(Sr){this.current.charSpacing=Sr}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(Sr,Nr,_r,vr,br,Pr){const Er=this.current;Er.textMatrix=Er.lineMatrix=[Sr,Nr,_r,vr,br,Pr],Er.textMatrixScale=Math.hypot(Sr,Nr),Er.x=Er.lineX=0,Er.y=Er.lineY=0,Er.xcoords=[],Er.ycoords=[],Er.tspan=this.svgFactory.createElement("svg:tspan"),Er.tspan.setAttributeNS(null,"font-family",Er.fontFamily),Er.tspan.setAttributeNS(null,"font-size",`${mr(Er.fontSize)}px`),Er.tspan.setAttributeNS(null,"y",mr(-Er.y)),Er.txtElement=this.svgFactory.createElement("svg:text"),Er.txtElement.append(Er.tspan)}beginText(){const Sr=this.current;Sr.x=Sr.lineX=0,Sr.y=Sr.lineY=0,Sr.textMatrix=nr.IDENTITY_MATRIX,Sr.lineMatrix=nr.IDENTITY_MATRIX,Sr.textMatrixScale=1,Sr.tspan=this.svgFactory.createElement("svg:tspan"),Sr.txtElement=this.svgFactory.createElement("svg:text"),Sr.txtgrp=this.svgFactory.createElement("svg:g"),Sr.xcoords=[],Sr.ycoords=[]}moveText(Sr,Nr){const _r=this.current;_r.x=_r.lineX+=Sr,_r.y=_r.lineY+=Nr,_r.xcoords=[],_r.ycoords=[],_r.tspan=this.svgFactory.createElement("svg:tspan"),_r.tspan.setAttributeNS(null,"font-family",_r.fontFamily),_r.tspan.setAttributeNS(null,"font-size",`${mr(_r.fontSize)}px`),_r.tspan.setAttributeNS(null,"y",mr(-_r.y))}showText(Sr){const Nr=this.current,_r=Nr.font,vr=Nr.fontSize;if(vr===0)return;const br=Nr.fontSizeScale,Pr=Nr.charSpacing,Er=Nr.wordSpacing,Rr=Nr.fontDirection,Ir=Nr.textHScale*Rr,Qr=_r.vertical,Ur=Qr?1:-1,Vr=_r.defaultVMetrics,Wr=vr*Nr.fontMatrix[0];let Hr=0;for(const pn of Sr){if(pn===null){Hr+=Rr*Er;continue}else if(typeof pn=="number"){Hr+=Ur*pn*vr/1e3;continue}const jr=(pn.isSpace?Er:0)+Pr,Br=pn.fontChar;let Lr,Or,zr=pn.width;if(Qr){let Yr;const dn=pn.vmetric||Vr;Yr=pn.vmetric?dn[1]:zr*.5,Yr=-Yr*Wr;const En=dn[2]*Wr;zr=dn?-dn[0]:zr,Lr=Yr/br,Or=(Hr+En)/br}else Lr=Hr/br,Or=0;(pn.isInFont||_r.missingFile)&&(Nr.xcoords.push(Nr.x+Lr),Qr&&Nr.ycoords.push(-Nr.y+Or),Nr.tspan.textContent+=Br);const Gr=Qr?zr*Wr-jr*Rr:zr*Wr+jr*Rr;Hr+=Gr}Nr.tspan.setAttributeNS(null,"x",Nr.xcoords.map(mr).join(" ")),Qr?Nr.tspan.setAttributeNS(null,"y",Nr.ycoords.map(mr).join(" ")):Nr.tspan.setAttributeNS(null,"y",mr(-Nr.y)),Qr?Nr.y-=Hr:Nr.x+=Hr*Ir,Nr.tspan.setAttributeNS(null,"font-family",Nr.fontFamily),Nr.tspan.setAttributeNS(null,"font-size",`${mr(Nr.fontSize)}px`),Nr.fontStyle!==sr.fontStyle&&Nr.tspan.setAttributeNS(null,"font-style",Nr.fontStyle),Nr.fontWeight!==sr.fontWeight&&Nr.tspan.setAttributeNS(null,"font-weight",Nr.fontWeight);const $r=Nr.textRenderingMode&nr.TextRenderingMode.FILL_STROKE_MASK;if($r===nr.TextRenderingMode.FILL||$r===nr.TextRenderingMode.FILL_STROKE?(Nr.fillColor!==sr.fillColor&&Nr.tspan.setAttributeNS(null,"fill",Nr.fillColor),Nr.fillAlpha<1&&Nr.tspan.setAttributeNS(null,"fill-opacity",Nr.fillAlpha)):Nr.textRenderingMode===nr.TextRenderingMode.ADD_TO_PATH?Nr.tspan.setAttributeNS(null,"fill","transparent"):Nr.tspan.setAttributeNS(null,"fill","none"),$r===nr.TextRenderingMode.STROKE||$r===nr.TextRenderingMode.FILL_STROKE){const pn=1/(Nr.textMatrixScale||1);this._setStrokeAttributes(Nr.tspan,pn)}let Xr=Nr.textMatrix;Nr.textRise!==0&&(Xr=Xr.slice(),Xr[5]+=Nr.textRise),Nr.txtElement.setAttributeNS(null,"transform",`${pr(Xr)} scale(${mr(Ir)}, -1)`),Nr.txtElement.setAttributeNS(ir,"xml:space","preserve"),Nr.txtElement.append(Nr.tspan),Nr.txtgrp.append(Nr.txtElement),this._ensureTransformGroup().append(Nr.txtElement)}setLeadingMoveText(Sr,Nr){this.setLeading(-Nr),this.moveText(Sr,Nr)}addFontStyle(Sr){if(!Sr.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const Nr=cr(Sr.data,Sr.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${Sr.loadedName}"; src: url(${Nr}); }
`}setFont(Sr){const Nr=this.current,_r=this.commonObjs.get(Sr[0]);let vr=Sr[1];Nr.font=_r,this.embedFonts&&!_r.missingFile&&!this.embeddedFonts[_r.loadedName]&&(this.addFontStyle(_r),this.embeddedFonts[_r.loadedName]=_r),Nr.fontMatrix=_r.fontMatrix||nr.FONT_IDENTITY_MATRIX;let br="normal";_r.black?br="900":_r.bold&&(br="bold");const Pr=_r.italic?"italic":"normal";vr<0?(vr=-vr,Nr.fontDirection=-1):Nr.fontDirection=1,Nr.fontSize=vr,Nr.fontFamily=_r.loadedName,Nr.fontWeight=br,Nr.fontStyle=Pr,Nr.tspan=this.svgFactory.createElement("svg:tspan"),Nr.tspan.setAttributeNS(null,"y",mr(-Nr.y)),Nr.xcoords=[],Nr.ycoords=[]}endText(){var Nr;const Sr=this.current;Sr.textRenderingMode&nr.TextRenderingMode.ADD_TO_PATH_FLAG&&((Nr=Sr.txtElement)!=null&&Nr.hasChildNodes())&&(Sr.element=Sr.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(Sr){Sr>0&&(this.current.lineWidth=Sr)}setLineCap(Sr){this.current.lineCap=ar[Sr]}setLineJoin(Sr){this.current.lineJoin=lr[Sr]}setMiterLimit(Sr){this.current.miterLimit=Sr}setStrokeAlpha(Sr){this.current.strokeAlpha=Sr}setStrokeRGBColor(Sr,Nr,_r){this.current.strokeColor=nr.Util.makeHexColor(Sr,Nr,_r)}setFillAlpha(Sr){this.current.fillAlpha=Sr}setFillRGBColor(Sr,Nr,_r){this.current.fillColor=nr.Util.makeHexColor(Sr,Nr,_r),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(Sr){this.current.strokeColor=this._makeColorN_Pattern(Sr)}setFillColorN(Sr){this.current.fillColor=this._makeColorN_Pattern(Sr)}shadingFill(Sr){const{width:Nr,height:_r}=this.viewport,vr=nr.Util.inverseTransform(this.transformMatrix),[br,Pr,Er,Rr]=nr.Util.getAxialAlignedBoundingBox([0,0,Nr,_r],vr),Ir=this.svgFactory.createElement("svg:rect");Ir.setAttributeNS(null,"x",br),Ir.setAttributeNS(null,"y",Pr),Ir.setAttributeNS(null,"width",Er-br),Ir.setAttributeNS(null,"height",Rr-Pr),Ir.setAttributeNS(null,"fill",this._makeShadingPattern(Sr)),this.current.fillAlpha<1&&Ir.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Ir)}_makeColorN_Pattern(Sr){return Sr[0]==="TilingPattern"?this._makeTilingPattern(Sr):this._makeShadingPattern(Sr)}_makeTilingPattern(Sr){const Nr=Sr[1],_r=Sr[2],vr=Sr[3]||nr.IDENTITY_MATRIX,[br,Pr,Er,Rr]=Sr[4],Ir=Sr[5],Qr=Sr[6],Ur=Sr[7],Vr=`shading${gr++}`,[Wr,Hr,$r,Xr]=nr.Util.normalizeRect([...nr.Util.applyTransform([br,Pr],vr),...nr.Util.applyTransform([Er,Rr],vr)]),[pn,jr]=nr.Util.singularValueDecompose2dScale(vr),Br=Ir*pn,Lr=Qr*jr,Or=this.svgFactory.createElement("svg:pattern");Or.setAttributeNS(null,"id",Vr),Or.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Or.setAttributeNS(null,"width",Br),Or.setAttributeNS(null,"height",Lr),Or.setAttributeNS(null,"x",`${Wr}`),Or.setAttributeNS(null,"y",`${Hr}`);const zr=this.svg,Gr=this.transformMatrix,Yr=this.current.fillColor,dn=this.current.strokeColor,En=this.svgFactory.create($r-Wr,Xr-Hr);if(this.svg=En,this.transformMatrix=vr,Ur===2){const Sn=nr.Util.makeHexColor(...Nr);this.current.fillColor=Sn,this.current.strokeColor=Sn}return this.executeOpTree(this.convertOpList(_r)),this.svg=zr,this.transformMatrix=Gr,this.current.fillColor=Yr,this.current.strokeColor=dn,Or.append(En.childNodes[0]),this.defs.append(Or),`url(#${Vr})`}_makeShadingPattern(Sr){switch(typeof Sr=="string"&&(Sr=this.objs.get(Sr)),Sr[0]){case"RadialAxial":const Nr=`shading${gr++}`,_r=Sr[3];let vr;switch(Sr[1]){case"axial":const br=Sr[4],Pr=Sr[5];vr=this.svgFactory.createElement("svg:linearGradient"),vr.setAttributeNS(null,"id",Nr),vr.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),vr.setAttributeNS(null,"x1",br[0]),vr.setAttributeNS(null,"y1",br[1]),vr.setAttributeNS(null,"x2",Pr[0]),vr.setAttributeNS(null,"y2",Pr[1]);break;case"radial":const Er=Sr[4],Rr=Sr[5],Ir=Sr[6],Qr=Sr[7];vr=this.svgFactory.createElement("svg:radialGradient"),vr.setAttributeNS(null,"id",Nr),vr.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),vr.setAttributeNS(null,"cx",Rr[0]),vr.setAttributeNS(null,"cy",Rr[1]),vr.setAttributeNS(null,"r",Qr),vr.setAttributeNS(null,"fx",Er[0]),vr.setAttributeNS(null,"fy",Er[1]),vr.setAttributeNS(null,"fr",Ir);break;default:throw new Error(`Unknown RadialAxial type: ${Sr[1]}`)}for(const br of _r){const Pr=this.svgFactory.createElement("svg:stop");Pr.setAttributeNS(null,"offset",br[0]),Pr.setAttributeNS(null,"stop-color",br[1]),vr.append(Pr)}return this.defs.append(vr),`url(#${Nr})`;case"Mesh":return(0,nr.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${Sr[0]}`)}}setDash(Sr,Nr){this.current.dashArray=Sr,this.current.dashPhase=Nr}constructPath(Sr,Nr){const _r=this.current;let vr=_r.x,br=_r.y,Pr=[],Er=0;for(const Rr of Sr)switch(Rr|0){case nr.OPS.rectangle:vr=Nr[Er++],br=Nr[Er++];const Ir=Nr[Er++],Qr=Nr[Er++],Ur=vr+Ir,Vr=br+Qr;Pr.push("M",mr(vr),mr(br),"L",mr(Ur),mr(br),"L",mr(Ur),mr(Vr),"L",mr(vr),mr(Vr),"Z");break;case nr.OPS.moveTo:vr=Nr[Er++],br=Nr[Er++],Pr.push("M",mr(vr),mr(br));break;case nr.OPS.lineTo:vr=Nr[Er++],br=Nr[Er++],Pr.push("L",mr(vr),mr(br));break;case nr.OPS.curveTo:vr=Nr[Er+4],br=Nr[Er+5],Pr.push("C",mr(Nr[Er]),mr(Nr[Er+1]),mr(Nr[Er+2]),mr(Nr[Er+3]),mr(vr),mr(br)),Er+=6;break;case nr.OPS.curveTo2:Pr.push("C",mr(vr),mr(br),mr(Nr[Er]),mr(Nr[Er+1]),mr(Nr[Er+2]),mr(Nr[Er+3])),vr=Nr[Er+2],br=Nr[Er+3],Er+=4;break;case nr.OPS.curveTo3:vr=Nr[Er+2],br=Nr[Er+3],Pr.push("C",mr(Nr[Er]),mr(Nr[Er+1]),mr(vr),mr(br),mr(vr),mr(br)),Er+=4;break;case nr.OPS.closePath:Pr.push("Z");break}Pr=Pr.join(" "),_r.path&&Sr.length>0&&Sr[0]!==nr.OPS.rectangle&&Sr[0]!==nr.OPS.moveTo?Pr=_r.path.getAttributeNS(null,"d")+Pr:(_r.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(_r.path)),_r.path.setAttributeNS(null,"d",Pr),_r.path.setAttributeNS(null,"fill","none"),_r.element=_r.path,_r.setCurrentPoint(vr,br)}endPath(){const Sr=this.current;if(Sr.path=null,!this.pendingClip)return;if(!Sr.element){this.pendingClip=null;return}const Nr=`clippath${yr++}`,_r=this.svgFactory.createElement("svg:clipPath");_r.setAttributeNS(null,"id",Nr),_r.setAttributeNS(null,"transform",pr(this.transformMatrix));const vr=Sr.element.cloneNode(!0);if(this.pendingClip==="evenodd"?vr.setAttributeNS(null,"clip-rule","evenodd"):vr.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,_r.append(vr),this.defs.append(_r),Sr.activeClipUrl){Sr.clipGroup=null;for(const br of this.extraStack)br.clipGroup=null;_r.setAttributeNS(null,"clip-path",Sr.activeClipUrl)}Sr.activeClipUrl=`url(#${Nr})`,this.tgrp=null}clip(Sr){this.pendingClip=Sr}closePath(){const Sr=this.current;if(Sr.path){const Nr=`${Sr.path.getAttributeNS(null,"d")}Z`;Sr.path.setAttributeNS(null,"d",Nr)}}setLeading(Sr){this.current.leading=-Sr}setTextRise(Sr){this.current.textRise=Sr}setTextRenderingMode(Sr){this.current.textRenderingMode=Sr}setHScale(Sr){this.current.textHScale=Sr/100}setRenderingIntent(Sr){}setFlatness(Sr){}setGState(Sr){for(const[Nr,_r]of Sr)switch(Nr){case"LW":this.setLineWidth(_r);break;case"LC":this.setLineCap(_r);break;case"LJ":this.setLineJoin(_r);break;case"ML":this.setMiterLimit(_r);break;case"D":this.setDash(_r[0],_r[1]);break;case"RI":this.setRenderingIntent(_r);break;case"FL":this.setFlatness(_r);break;case"Font":this.setFont(_r);break;case"CA":this.setStrokeAlpha(_r);break;case"ca":this.setFillAlpha(_r);break;default:(0,nr.warn)(`Unimplemented graphic state operator ${Nr}`);break}}fill(){const Sr=this.current;Sr.element&&(Sr.element.setAttributeNS(null,"fill",Sr.fillColor),Sr.element.setAttributeNS(null,"fill-opacity",Sr.fillAlpha),this.endPath())}stroke(){const Sr=this.current;Sr.element&&(this._setStrokeAttributes(Sr.element),Sr.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(Sr,Nr=1){const _r=this.current;let vr=_r.dashArray;Nr!==1&&vr.length>0&&(vr=vr.map(function(br){return Nr*br})),Sr.setAttributeNS(null,"stroke",_r.strokeColor),Sr.setAttributeNS(null,"stroke-opacity",_r.strokeAlpha),Sr.setAttributeNS(null,"stroke-miterlimit",mr(_r.miterLimit)),Sr.setAttributeNS(null,"stroke-linecap",_r.lineCap),Sr.setAttributeNS(null,"stroke-linejoin",_r.lineJoin),Sr.setAttributeNS(null,"stroke-width",mr(Nr*_r.lineWidth)+"px"),Sr.setAttributeNS(null,"stroke-dasharray",vr.map(mr).join(" ")),Sr.setAttributeNS(null,"stroke-dashoffset",mr(Nr*_r.dashPhase)+"px")}eoFill(){var Sr;(Sr=this.current.element)==null||Sr.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var Sr;(Sr=this.current.element)==null||Sr.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const Sr=this.svgFactory.createElement("svg:rect");Sr.setAttributeNS(null,"x","0"),Sr.setAttributeNS(null,"y","0"),Sr.setAttributeNS(null,"width","1px"),Sr.setAttributeNS(null,"height","1px"),Sr.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(Sr)}paintImageXObject(Sr){const Nr=this.getObject(Sr);if(!Nr){(0,nr.warn)(`Dependent image with object ID ${Sr} is not ready yet`);return}this.paintInlineImageXObject(Nr)}paintInlineImageXObject(Sr,Nr){const _r=Sr.width,vr=Sr.height,br=Ar(Sr,this.forceDataSchema,!!Nr),Pr=this.svgFactory.createElement("svg:rect");Pr.setAttributeNS(null,"x","0"),Pr.setAttributeNS(null,"y","0"),Pr.setAttributeNS(null,"width",mr(_r)),Pr.setAttributeNS(null,"height",mr(vr)),this.current.element=Pr,this.clip("nonzero");const Er=this.svgFactory.createElement("svg:image");Er.setAttributeNS(or,"xlink:href",br),Er.setAttributeNS(null,"x","0"),Er.setAttributeNS(null,"y",mr(-vr)),Er.setAttributeNS(null,"width",mr(_r)+"px"),Er.setAttributeNS(null,"height",mr(vr)+"px"),Er.setAttributeNS(null,"transform",`scale(${mr(1/_r)} ${mr(-1/vr)})`),Nr?Nr.append(Er):this._ensureTransformGroup().append(Er)}paintImageMaskXObject(Sr){const Nr=this.getObject(Sr.data,Sr);if(Nr.bitmap){(0,nr.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const _r=this.current,vr=Nr.width,br=Nr.height,Pr=_r.fillColor;_r.maskId=`mask${hr++}`;const Er=this.svgFactory.createElement("svg:mask");Er.setAttributeNS(null,"id",_r.maskId);const Rr=this.svgFactory.createElement("svg:rect");Rr.setAttributeNS(null,"x","0"),Rr.setAttributeNS(null,"y","0"),Rr.setAttributeNS(null,"width",mr(vr)),Rr.setAttributeNS(null,"height",mr(br)),Rr.setAttributeNS(null,"fill",Pr),Rr.setAttributeNS(null,"mask",`url(#${_r.maskId})`),this.defs.append(Er),this._ensureTransformGroup().append(Rr),this.paintInlineImageXObject(Nr,Er)}paintFormXObjectBegin(Sr,Nr){if(Array.isArray(Sr)&&Sr.length===6&&this.transform(Sr[0],Sr[1],Sr[2],Sr[3],Sr[4],Sr[5]),Nr){const _r=Nr[2]-Nr[0],vr=Nr[3]-Nr[1],br=this.svgFactory.createElement("svg:rect");br.setAttributeNS(null,"x",Nr[0]),br.setAttributeNS(null,"y",Nr[1]),br.setAttributeNS(null,"width",mr(_r)),br.setAttributeNS(null,"height",mr(vr)),this.current.element=br,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(Sr){const Nr=this.svgFactory.create(Sr.width,Sr.height),_r=this.svgFactory.createElement("svg:defs");Nr.append(_r),this.defs=_r;const vr=this.svgFactory.createElement("svg:g");return vr.setAttributeNS(null,"transform",pr(Sr.transform)),Nr.append(vr),this.svg=vr,Nr}_ensureClipGroup(){if(!this.current.clipGroup){const Sr=this.svgFactory.createElement("svg:g");Sr.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(Sr),this.current.clipGroup=Sr}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",pr(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}_e.SVGGraphics=Cr},(er,_e)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.XfaText=void 0;class tr{static textContent(nr){const sr=[],ir={items:sr,styles:Object.create(null)};function or(ar){var Ar;if(!ar)return;let lr=null;const cr=ar.name;if(cr==="#text")lr=ar.value;else if(tr.shouldBuildText(cr))(Ar=ar==null?void 0:ar.attributes)!=null&&Ar.textContent?lr=ar.attributes.textContent:ar.value&&(lr=ar.value);else return;if(lr!==null&&sr.push({str:lr}),!!ar.children)for(const ur of ar.children)or(ur)}return or(nr),ir}static shouldBuildText(nr){return!(nr==="textarea"||nr==="input"||nr==="option"||nr==="select")}}_e.XfaText=tr},(er,_e,tr)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.TextLayerRenderTask=void 0,_e.renderTextLayer=pr,_e.updateTextLayer=yr;var rr=tr(1),nr=tr(6);const sr=1e5,ir=30,or=.8,ar=new Map;function lr(hr,gr){let Cr;if(gr&&rr.FeatureTest.isOffscreenCanvasSupported)Cr=new OffscreenCanvas(hr,hr).getContext("2d",{alpha:!1});else{const Tr=document.createElement("canvas");Tr.width=Tr.height=hr,Cr=Tr.getContext("2d",{alpha:!1})}return Cr}function cr(hr,gr){const Cr=ar.get(hr);if(Cr)return Cr;const Tr=lr(ir,gr);Tr.font=`${ir}px ${hr}`;const Sr=Tr.measureText("");let Nr=Sr.fontBoundingBoxAscent,_r=Math.abs(Sr.fontBoundingBoxDescent);if(Nr){const br=Nr/(Nr+_r);return ar.set(hr,br),Tr.canvas.width=Tr.canvas.height=0,br}Tr.strokeStyle="red",Tr.clearRect(0,0,ir,ir),Tr.strokeText("g",0,0);let vr=Tr.getImageData(0,0,ir,ir).data;_r=0;for(let br=vr.length-1-3;br>=0;br-=4)if(vr[br]>0){_r=Math.ceil(br/4/ir);break}Tr.clearRect(0,0,ir,ir),Tr.strokeText("A",0,ir),vr=Tr.getImageData(0,0,ir,ir).data,Nr=0;for(let br=0,Pr=vr.length;br<Pr;br+=4)if(vr[br]>0){Nr=ir-Math.floor(br/4/ir);break}if(Tr.canvas.width=Tr.canvas.height=0,Nr){const br=Nr/(Nr+_r);return ar.set(hr,br),br}return ar.set(hr,or),or}function Ar(hr,gr,Cr){const Tr=document.createElement("span"),Sr={angle:0,canvasWidth:0,hasText:gr.str!=="",hasEOL:gr.hasEOL,fontSize:0};hr._textDivs.push(Tr);const Nr=rr.Util.transform(hr._transform,gr.transform);let _r=Math.atan2(Nr[1],Nr[0]);const vr=Cr[gr.fontName];vr.vertical&&(_r+=Math.PI/2);const br=Math.hypot(Nr[2],Nr[3]),Pr=br*cr(vr.fontFamily,hr._isOffscreenCanvasSupported);let Er,Rr;_r===0?(Er=Nr[4],Rr=Nr[5]-Pr):(Er=Nr[4]+Pr*Math.sin(_r),Rr=Nr[5]-Pr*Math.cos(_r));const Ir="calc(var(--scale-factor)*",Qr=Tr.style;hr._container===hr._rootContainer?(Qr.left=`${(100*Er/hr._pageWidth).toFixed(2)}%`,Qr.top=`${(100*Rr/hr._pageHeight).toFixed(2)}%`):(Qr.left=`${Ir}${Er.toFixed(2)}px)`,Qr.top=`${Ir}${Rr.toFixed(2)}px)`),Qr.fontSize=`${Ir}${br.toFixed(2)}px)`,Qr.fontFamily=vr.fontFamily,Sr.fontSize=br,Tr.setAttribute("role","presentation"),Tr.textContent=gr.str,Tr.dir=gr.dir,hr._fontInspectorEnabled&&(Tr.dataset.fontName=gr.fontName),_r!==0&&(Sr.angle=_r*(180/Math.PI));let Ur=!1;if(gr.str.length>1)Ur=!0;else if(gr.str!==" "&&gr.transform[0]!==gr.transform[3]){const Vr=Math.abs(gr.transform[0]),Wr=Math.abs(gr.transform[3]);Vr!==Wr&&Math.max(Vr,Wr)/Math.min(Vr,Wr)>1.5&&(Ur=!0)}Ur&&(Sr.canvasWidth=vr.vertical?gr.height:gr.width),hr._textDivProperties.set(Tr,Sr),hr._isReadableStream&&hr._layoutText(Tr)}function ur(hr){const{div:gr,scale:Cr,properties:Tr,ctx:Sr,prevFontSize:Nr,prevFontFamily:_r}=hr,{style:vr}=gr;let br="";if(Tr.canvasWidth!==0&&Tr.hasText){const{fontFamily:Pr}=vr,{canvasWidth:Er,fontSize:Rr}=Tr;(Nr!==Rr||_r!==Pr)&&(Sr.font=`${Rr*Cr}px ${Pr}`,hr.prevFontSize=Rr,hr.prevFontFamily=Pr);const{width:Ir}=Sr.measureText(gr.textContent);Ir>0&&(br=`scaleX(${Er*Cr/Ir})`)}Tr.angle!==0&&(br=`rotate(${Tr.angle}deg) ${br}`),br.length>0&&(vr.transform=br)}function dr(hr){if(hr._canceled)return;const gr=hr._textDivs,Cr=hr._capability;if(gr.length>sr){Cr.resolve();return}if(!hr._isReadableStream)for(const Sr of gr)hr._layoutText(Sr);Cr.resolve()}class mr{constructor({textContentSource:gr,container:Cr,viewport:Tr,textDivs:Sr,textDivProperties:Nr,textContentItemsStr:_r,isOffscreenCanvasSupported:vr}){var Ir;this._textContentSource=gr,this._isReadableStream=gr instanceof ReadableStream,this._container=this._rootContainer=Cr,this._textDivs=Sr||[],this._textContentItemsStr=_r||[],this._isOffscreenCanvasSupported=vr,this._fontInspectorEnabled=!!((Ir=globalThis.FontInspector)!=null&&Ir.enabled),this._reader=null,this._textDivProperties=Nr||new WeakMap,this._canceled=!1,this._capability=new rr.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:Tr.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:lr(0,vr)};const{pageWidth:br,pageHeight:Pr,pageX:Er,pageY:Rr}=Tr.rawDims;this._transform=[1,0,0,-1,-Er,Rr+Pr],this._pageWidth=br,this._pageHeight=Pr,(0,nr.setLayerDimensions)(Cr,Tr),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new rr.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new rr.AbortException("TextLayer task cancelled."))}_processItems(gr,Cr){for(const Tr of gr){if(Tr.str===void 0){if(Tr.type==="beginMarkedContentProps"||Tr.type==="beginMarkedContent"){const Sr=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),Tr.id!==null&&this._container.setAttribute("id",`${Tr.id}`),Sr.append(this._container)}else Tr.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(Tr.str),Ar(this,Tr,Cr)}}_layoutText(gr){const Cr=this._layoutTextParams.properties=this._textDivProperties.get(gr);if(this._layoutTextParams.div=gr,ur(this._layoutTextParams),Cr.hasText&&this._container.append(gr),Cr.hasEOL){const Tr=document.createElement("br");Tr.setAttribute("role","presentation"),this._container.append(Tr)}}_render(){const gr=new rr.PromiseCapability;let Cr=Object.create(null);if(this._isReadableStream){const Tr=()=>{this._reader.read().then(({value:Sr,done:Nr})=>{if(Nr){gr.resolve();return}Object.assign(Cr,Sr.styles),this._processItems(Sr.items,Cr),Tr()},gr.reject)};this._reader=this._textContentSource.getReader(),Tr()}else if(this._textContentSource){const{items:Tr,styles:Sr}=this._textContentSource;this._processItems(Tr,Sr),gr.resolve()}else throw new Error('No "textContentSource" parameter specified.');gr.promise.then(()=>{Cr=null,dr(this)},this._capability.reject)}}_e.TextLayerRenderTask=mr;function pr(hr){!hr.textContentSource&&(hr.textContent||hr.textContentStream)&&((0,nr.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),hr.textContentSource=hr.textContent||hr.textContentStream);const{container:gr,viewport:Cr}=hr,Tr=getComputedStyle(gr),Sr=Tr.getPropertyValue("visibility"),Nr=parseFloat(Tr.getPropertyValue("--scale-factor"));Sr==="visible"&&(!Nr||Math.abs(Nr-Cr.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const _r=new mr(hr);return _r._render(),_r}function yr({container:hr,viewport:gr,textDivs:Cr,textDivProperties:Tr,isOffscreenCanvasSupported:Sr,mustRotate:Nr=!0,mustRescale:_r=!0}){if(Nr&&(0,nr.setLayerDimensions)(hr,{rotation:gr.rotation}),_r){const vr=lr(0,Sr),Pr={prevFontSize:null,prevFontFamily:null,div:null,scale:gr.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:vr};for(const Er of Cr)Pr.properties=Tr.get(Er),Pr.div=Er,ur(Pr)}}},(er,_e,tr)=>{var cr,Ar,ur,dr,mr,pr,yr,hr,gr,Cr,Tr,qm,im,Xm,Ym;Object.defineProperty(_e,"__esModule",{value:!0}),_e.AnnotationEditorLayer=void 0;var rr=tr(1),nr=tr(4),sr=tr(28),ir=tr(33),or=tr(6),ar=tr(34);const br=class br{constructor({uiManager:Er,pageIndex:Rr,div:Ir,accessibilityManager:Qr,annotationLayer:Ur,viewport:Vr,l10n:Wr}){Vn(this,Tr);Vn(this,cr);Vn(this,Ar,!1);Vn(this,ur,null);Vn(this,dr,this.pointerup.bind(this));Vn(this,mr,this.pointerdown.bind(this));Vn(this,pr,new Map);Vn(this,yr,!1);Vn(this,hr,!1);Vn(this,gr,!1);Vn(this,Cr);const Hr=[sr.FreeTextEditor,ir.InkEditor,ar.StampEditor];if(!br._initialized){br._initialized=!0;for(const $r of Hr)$r.initialize(Wr)}Er.registerEditorTypes(Hr),On(this,Cr,Er),this.pageIndex=Rr,this.div=Ir,On(this,cr,Qr),On(this,ur,Ur),this.viewport=Vr,kr(this,Cr).addLayer(this)}get isEmpty(){return kr(this,pr).size===0}updateToolbar(Er){kr(this,Cr).updateToolbar(Er)}updateMode(Er=kr(this,Cr).getMode()){Un(this,Tr,Ym).call(this),Er===rr.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),Er!==rr.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",Er===rr.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",Er===rr.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",Er===rr.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(Er){if(!Er&&kr(this,Cr).getMode()!==rr.AnnotationEditorType.INK)return;if(!Er){for(const Ir of kr(this,pr).values())if(Ir.isEmpty()){Ir.setInBackground();return}}Un(this,Tr,im).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(Er){kr(this,Cr).setEditingState(Er)}addCommands(Er){kr(this,Cr).addCommands(Er)}enable(){this.div.style.pointerEvents="auto";const Er=new Set;for(const Ir of kr(this,pr).values())Ir.enableEditing(),Ir.annotationElementId&&Er.add(Ir.annotationElementId);if(!kr(this,ur))return;const Rr=kr(this,ur).getEditableAnnotations();for(const Ir of Rr){if(Ir.hide(),kr(this,Cr).isDeletedAnnotationElement(Ir.data.id)||Er.has(Ir.data.id))continue;const Qr=this.deserialize(Ir);Qr&&(this.addOrRebuild(Qr),Qr.enableEditing())}}disable(){var Rr;On(this,gr,!0),this.div.style.pointerEvents="none";const Er=new Set;for(const Ir of kr(this,pr).values()){if(Ir.disableEditing(),!Ir.annotationElementId||Ir.serialize()!==null){Er.add(Ir.annotationElementId);continue}(Rr=this.getEditableAnnotation(Ir.annotationElementId))==null||Rr.show(),Ir.remove()}if(kr(this,ur)){const Ir=kr(this,ur).getEditableAnnotations();for(const Qr of Ir){const{id:Ur}=Qr.data;Er.has(Ur)||kr(this,Cr).isDeletedAnnotationElement(Ur)||Qr.show()}}Un(this,Tr,Ym).call(this),this.isEmpty&&(this.div.hidden=!0),On(this,gr,!1)}getEditableAnnotation(Er){var Rr;return((Rr=kr(this,ur))==null?void 0:Rr.getEditableAnnotation(Er))||null}setActiveEditor(Er){kr(this,Cr).getActive()!==Er&&kr(this,Cr).setActiveEditor(Er)}enableClick(){this.div.addEventListener("pointerdown",kr(this,mr)),this.div.addEventListener("pointerup",kr(this,dr))}disableClick(){this.div.removeEventListener("pointerdown",kr(this,mr)),this.div.removeEventListener("pointerup",kr(this,dr))}attach(Er){kr(this,pr).set(Er.id,Er);const{annotationElementId:Rr}=Er;Rr&&kr(this,Cr).isDeletedAnnotationElement(Rr)&&kr(this,Cr).removeDeletedAnnotationElement(Er)}detach(Er){var Rr;kr(this,pr).delete(Er.id),(Rr=kr(this,cr))==null||Rr.removePointerInTextLayer(Er.contentDiv),!kr(this,gr)&&Er.annotationElementId&&kr(this,Cr).addDeletedAnnotationElement(Er)}remove(Er){this.detach(Er),kr(this,Cr).removeEditor(Er),Er.div.contains(document.activeElement)&&setTimeout(()=>{kr(this,Cr).focusMainContainer()},0),Er.div.remove(),Er.isAttachedToDOM=!1,kr(this,hr)||this.addInkEditorIfNeeded(!1)}changeParent(Er){var Rr;Er.parent!==this&&(Er.annotationElementId&&(kr(this,Cr).addDeletedAnnotationElement(Er.annotationElementId),nr.AnnotationEditor.deleteAnnotationElement(Er),Er.annotationElementId=null),this.attach(Er),(Rr=Er.parent)==null||Rr.detach(Er),Er.setParent(this),Er.div&&Er.isAttachedToDOM&&(Er.div.remove(),this.div.append(Er.div)))}add(Er){if(this.changeParent(Er),kr(this,Cr).addEditor(Er),this.attach(Er),!Er.isAttachedToDOM){const Rr=Er.render();this.div.append(Rr),Er.isAttachedToDOM=!0}Er.fixAndSetPosition(),Er.onceAdded(),kr(this,Cr).addToAnnotationStorage(Er)}moveEditorInDOM(Er){var Ir;if(!Er.isAttachedToDOM)return;const{activeElement:Rr}=document;Er.div.contains(Rr)&&(Er._focusEventsAllowed=!1,setTimeout(()=>{Er.div.contains(document.activeElement)?Er._focusEventsAllowed=!0:(Er.div.addEventListener("focusin",()=>{Er._focusEventsAllowed=!0},{once:!0}),Rr.focus())},0)),Er._structTreeParentId=(Ir=kr(this,cr))==null?void 0:Ir.moveElementInDOM(this.div,Er.div,Er.contentDiv,!0)}addOrRebuild(Er){Er.needsToBeRebuilt()?Er.rebuild():this.add(Er)}addUndoableEditor(Er){const Rr=()=>Er._uiManager.rebuild(Er),Ir=()=>{Er.remove()};this.addCommands({cmd:Rr,undo:Ir,mustExec:!1})}getNextId(){return kr(this,Cr).getId()}pasteEditor(Er,Rr){kr(this,Cr).updateToolbar(Er),kr(this,Cr).updateMode(Er);const{offsetX:Ir,offsetY:Qr}=Un(this,Tr,Xm).call(this),Ur=this.getNextId(),Vr=Un(this,Tr,qm).call(this,{parent:this,id:Ur,x:Ir,y:Qr,uiManager:kr(this,Cr),isCentered:!0,...Rr});Vr&&this.add(Vr)}deserialize(Er){switch(Er.annotationType??Er.annotationEditorType){case rr.AnnotationEditorType.FREETEXT:return sr.FreeTextEditor.deserialize(Er,this,kr(this,Cr));case rr.AnnotationEditorType.INK:return ir.InkEditor.deserialize(Er,this,kr(this,Cr));case rr.AnnotationEditorType.STAMP:return ar.StampEditor.deserialize(Er,this,kr(this,Cr))}return null}addNewEditor(){Un(this,Tr,im).call(this,Un(this,Tr,Xm).call(this),!0)}setSelected(Er){kr(this,Cr).setSelected(Er)}toggleSelected(Er){kr(this,Cr).toggleSelected(Er)}isSelected(Er){return kr(this,Cr).isSelected(Er)}unselect(Er){kr(this,Cr).unselect(Er)}pointerup(Er){const{isMac:Rr}=rr.FeatureTest.platform;if(!(Er.button!==0||Er.ctrlKey&&Rr)&&Er.target===this.div&&kr(this,yr)){if(On(this,yr,!1),!kr(this,Ar)){On(this,Ar,!0);return}if(kr(this,Cr).getMode()===rr.AnnotationEditorType.STAMP){kr(this,Cr).unselectAll();return}Un(this,Tr,im).call(this,Er,!1)}}pointerdown(Er){if(kr(this,yr)){On(this,yr,!1);return}const{isMac:Rr}=rr.FeatureTest.platform;if(Er.button!==0||Er.ctrlKey&&Rr||Er.target!==this.div)return;On(this,yr,!0);const Ir=kr(this,Cr).getActive();On(this,Ar,!Ir||Ir.isEmpty())}findNewParent(Er,Rr,Ir){const Qr=kr(this,Cr).findParent(Rr,Ir);return Qr===null||Qr===this?!1:(Qr.changeParent(Er),!0)}destroy(){var Er,Rr;((Er=kr(this,Cr).getActive())==null?void 0:Er.parent)===this&&(kr(this,Cr).commitOrRemove(),kr(this,Cr).setActiveEditor(null));for(const Ir of kr(this,pr).values())(Rr=kr(this,cr))==null||Rr.removePointerInTextLayer(Ir.contentDiv),Ir.setParent(null),Ir.isAttachedToDOM=!1,Ir.div.remove();this.div=null,kr(this,pr).clear(),kr(this,Cr).removeLayer(this)}render({viewport:Er}){this.viewport=Er,(0,or.setLayerDimensions)(this.div,Er);for(const Rr of kr(this,Cr).getEditors(this.pageIndex))this.add(Rr);this.updateMode()}update({viewport:Er}){kr(this,Cr).commitOrRemove(),this.viewport=Er,(0,or.setLayerDimensions)(this.div,{rotation:Er.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:Er,pageHeight:Rr}=this.viewport.rawDims;return[Er,Rr]}};cr=new WeakMap,Ar=new WeakMap,ur=new WeakMap,dr=new WeakMap,mr=new WeakMap,pr=new WeakMap,yr=new WeakMap,hr=new WeakMap,gr=new WeakMap,Cr=new WeakMap,Tr=new WeakSet,qm=function(Er){switch(kr(this,Cr).getMode()){case rr.AnnotationEditorType.FREETEXT:return new sr.FreeTextEditor(Er);case rr.AnnotationEditorType.INK:return new ir.InkEditor(Er);case rr.AnnotationEditorType.STAMP:return new ar.StampEditor(Er)}return null},im=function(Er,Rr){const Ir=this.getNextId(),Qr=Un(this,Tr,qm).call(this,{parent:this,id:Ir,x:Er.offsetX,y:Er.offsetY,uiManager:kr(this,Cr),isCentered:Rr});return Qr&&this.add(Qr),Qr},Xm=function(){const{x:Er,y:Rr,width:Ir,height:Qr}=this.div.getBoundingClientRect(),Ur=Math.max(0,Er),Vr=Math.max(0,Rr),Wr=Math.min(window.innerWidth,Er+Ir),Hr=Math.min(window.innerHeight,Rr+Qr),$r=(Ur+Wr)/2-Er,Xr=(Vr+Hr)/2-Rr,[pn,jr]=this.viewport.rotation%180===0?[$r,Xr]:[Xr,$r];return{offsetX:pn,offsetY:jr}},Ym=function(){On(this,hr,!0);for(const Er of kr(this,pr).values())Er.isEmpty()&&Er.remove();On(this,hr,!1)},oo(br,"_initialized",!1);let lr=br;_e.AnnotationEditorLayer=lr},(er,_e,tr)=>{var ar,lr,cr,Ar,ur,dr,mr,pr,yr,hr,ix,ox,ax,bp,Jm,lx,Zm;Object.defineProperty(_e,"__esModule",{value:!0}),_e.FreeTextEditor=void 0;var rr=tr(1),nr=tr(5),sr=tr(4),ir=tr(29);const br=class br extends sr.AnnotationEditor{constructor(Rr){super({...Rr,name:"freeTextEditor"});Vn(this,hr);Vn(this,ar,this.editorDivBlur.bind(this));Vn(this,lr,this.editorDivFocus.bind(this));Vn(this,cr,this.editorDivInput.bind(this));Vn(this,Ar,this.editorDivKeydown.bind(this));Vn(this,ur);Vn(this,dr,"");Vn(this,mr,`${this.id}-editor`);Vn(this,pr);Vn(this,yr,null);On(this,ur,Rr.color||br._defaultColor||sr.AnnotationEditor._defaultLineColor),On(this,pr,Rr.fontSize||br._defaultFontSize)}static get _keyboardManager(){const Rr=br.prototype,Ir=Vr=>Vr.isEmpty(),Qr=nr.AnnotationEditorUIManager.TRANSLATE_SMALL,Ur=nr.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,rr.shadow)(this,"_keyboardManager",new nr.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Rr.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Rr.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Rr._translateEmpty,{args:[-Qr,0],checker:Ir}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Rr._translateEmpty,{args:[-Ur,0],checker:Ir}],[["ArrowRight","mac+ArrowRight"],Rr._translateEmpty,{args:[Qr,0],checker:Ir}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Rr._translateEmpty,{args:[Ur,0],checker:Ir}],[["ArrowUp","mac+ArrowUp"],Rr._translateEmpty,{args:[0,-Qr],checker:Ir}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Rr._translateEmpty,{args:[0,-Ur],checker:Ir}],[["ArrowDown","mac+ArrowDown"],Rr._translateEmpty,{args:[0,Qr],checker:Ir}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Rr._translateEmpty,{args:[0,Ur],checker:Ir}]]))}static initialize(Rr){sr.AnnotationEditor.initialize(Rr,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Ir=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Ir.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Rr,Ir){switch(Rr){case rr.AnnotationEditorParamsType.FREETEXT_SIZE:br._defaultFontSize=Ir;break;case rr.AnnotationEditorParamsType.FREETEXT_COLOR:br._defaultColor=Ir;break}}updateParams(Rr,Ir){switch(Rr){case rr.AnnotationEditorParamsType.FREETEXT_SIZE:Un(this,hr,ix).call(this,Ir);break;case rr.AnnotationEditorParamsType.FREETEXT_COLOR:Un(this,hr,ox).call(this,Ir);break}}static get defaultPropertiesToUpdate(){return[[rr.AnnotationEditorParamsType.FREETEXT_SIZE,br._defaultFontSize],[rr.AnnotationEditorParamsType.FREETEXT_COLOR,br._defaultColor||sr.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[rr.AnnotationEditorParamsType.FREETEXT_SIZE,kr(this,pr)],[rr.AnnotationEditorParamsType.FREETEXT_COLOR,kr(this,ur)]]}_translateEmpty(Rr,Ir){this._uiManager.translateSelectedEditors(Rr,Ir,!0)}getInitialTranslation(){const Rr=this.parentScale;return[-br._internalPadding*Rr,-(br._internalPadding+kr(this,pr))*Rr]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(rr.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",kr(this,Ar)),this.editorDiv.addEventListener("focus",kr(this,lr)),this.editorDiv.addEventListener("blur",kr(this,ar)),this.editorDiv.addEventListener("input",kr(this,cr)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",kr(this,mr)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",kr(this,Ar)),this.editorDiv.removeEventListener("focus",kr(this,lr)),this.editorDiv.removeEventListener("blur",kr(this,ar)),this.editorDiv.removeEventListener("input",kr(this,cr)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Rr){this._focusEventsAllowed&&(super.focusin(Rr),Rr.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Rr;if(this.width){Un(this,hr,Zm).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Rr=this._initialOptions)!=null&&Rr.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Rr=kr(this,dr),Ir=On(this,dr,Un(this,hr,ax).call(this).trimEnd());if(Rr===Ir)return;const Qr=Ur=>{if(On(this,dr,Ur),!Ur){this.remove();return}Un(this,hr,Jm).call(this),this._uiManager.rebuild(this),Un(this,hr,bp).call(this)};this.addCommands({cmd:()=>{Qr(Ir)},undo:()=>{Qr(Rr)},mustExec:!1}),Un(this,hr,bp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Rr){this.enterInEditMode()}keydown(Rr){Rr.target===this.div&&Rr.key==="Enter"&&(this.enterInEditMode(),Rr.preventDefault())}editorDivKeydown(Rr){br._keyboardManager.exec(this,Rr)}editorDivFocus(Rr){this.isEditing=!0}editorDivBlur(Rr){this.isEditing=!1}editorDivInput(Rr){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Rr,Ir;this.width&&(Rr=this.x,Ir=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",kr(this,mr)),this.enableEditing(),sr.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Ur=>{var Vr;return(Vr=this.editorDiv)==null?void 0:Vr.setAttribute("aria-label",Ur)}),sr.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Ur=>{var Vr;return(Vr=this.editorDiv)==null?void 0:Vr.setAttribute("default-content",Ur)}),this.editorDiv.contentEditable=!0;const{style:Qr}=this.editorDiv;if(Qr.fontSize=`calc(${kr(this,pr)}px * var(--scale-factor))`,Qr.color=kr(this,ur),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,nr.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Ur,Vr]=this.parentDimensions;if(this.annotationElementId){const{position:Wr}=kr(this,yr);let[Hr,$r]=this.getInitialTranslation();[Hr,$r]=this.pageTranslationToScreen(Hr,$r);const[Xr,pn]=this.pageDimensions,[jr,Br]=this.pageTranslation;let Lr,Or;switch(this.rotation){case 0:Lr=Rr+(Wr[0]-jr)/Xr,Or=Ir+this.height-(Wr[1]-Br)/pn;break;case 90:Lr=Rr+(Wr[0]-jr)/Xr,Or=Ir-(Wr[1]-Br)/pn,[Hr,$r]=[$r,-Hr];break;case 180:Lr=Rr-this.width+(Wr[0]-jr)/Xr,Or=Ir-(Wr[1]-Br)/pn,[Hr,$r]=[-Hr,-$r];break;case 270:Lr=Rr+(Wr[0]-jr-this.height*pn)/Xr,Or=Ir+(Wr[1]-Br-this.width*Xr)/pn,[Hr,$r]=[-$r,Hr];break}this.setAt(Lr*Ur,Or*Vr,Hr,$r)}else this.setAt(Rr*Ur,Ir*Vr,this.width*Ur,this.height*Vr);Un(this,hr,Jm).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Rr,Ir,Qr){let Ur=null;if(Rr instanceof ir.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Wr,fontColor:Hr},rect:$r,rotation:Xr,id:pn},textContent:jr,textPosition:Br,parent:{page:{pageNumber:Lr}}}=Rr;if(!jr||jr.length===0)return null;Ur=Rr={annotationType:rr.AnnotationEditorType.FREETEXT,color:Array.from(Hr),fontSize:Wr,value:jr.join(`
`),position:Br,pageIndex:Lr-1,rect:$r,rotation:Xr,id:pn,deleted:!1}}const Vr=super.deserialize(Rr,Ir,Qr);return On(Vr,pr,Rr.fontSize),On(Vr,ur,rr.Util.makeHexColor(...Rr.color)),On(Vr,dr,Rr.value),Vr.annotationElementId=Rr.id||null,On(Vr,yr,Ur),Vr}serialize(Rr=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Ir=br._internalPadding*this.parentScale,Qr=this.getRect(Ir,Ir),Ur=sr.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:kr(this,ur)),Vr={annotationType:rr.AnnotationEditorType.FREETEXT,color:Ur,fontSize:kr(this,pr),value:kr(this,dr),pageIndex:this.pageIndex,rect:Qr,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Rr?Vr:this.annotationElementId&&!Un(this,hr,lx).call(this,Vr)?null:(Vr.id=this.annotationElementId,Vr)}};ar=new WeakMap,lr=new WeakMap,cr=new WeakMap,Ar=new WeakMap,ur=new WeakMap,dr=new WeakMap,mr=new WeakMap,pr=new WeakMap,yr=new WeakMap,hr=new WeakSet,ix=function(Rr){const Ir=Ur=>{this.editorDiv.style.fontSize=`calc(${Ur}px * var(--scale-factor))`,this.translate(0,-(Ur-kr(this,pr))*this.parentScale),On(this,pr,Ur),Un(this,hr,bp).call(this)},Qr=kr(this,pr);this.addCommands({cmd:()=>{Ir(Rr)},undo:()=>{Ir(Qr)},mustExec:!0,type:rr.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},ox=function(Rr){const Ir=kr(this,ur);this.addCommands({cmd:()=>{On(this,ur,this.editorDiv.style.color=Rr)},undo:()=>{On(this,ur,this.editorDiv.style.color=Ir)},mustExec:!0,type:rr.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ax=function(){const Rr=this.editorDiv.getElementsByTagName("div");if(Rr.length===0)return this.editorDiv.innerText;const Ir=[];for(const Qr of Rr)Ir.push(Qr.innerText.replace(/\r\n?|\n/,""));return Ir.join(`
`)},bp=function(){const[Rr,Ir]=this.parentDimensions;let Qr;if(this.isAttachedToDOM)Qr=this.div.getBoundingClientRect();else{const{currentLayer:Ur,div:Vr}=this,Wr=Vr.style.display;Vr.style.display="hidden",Ur.div.append(this.div),Qr=Vr.getBoundingClientRect(),Vr.remove(),Vr.style.display=Wr}this.rotation%180===this.parentRotation%180?(this.width=Qr.width/Rr,this.height=Qr.height/Ir):(this.width=Qr.height/Rr,this.height=Qr.width/Ir),this.fixAndSetPosition()},Jm=function(){if(this.editorDiv.replaceChildren(),!!kr(this,dr))for(const Rr of kr(this,dr).split(`
`)){const Ir=document.createElement("div");Ir.append(Rr?document.createTextNode(Rr):document.createElement("br")),this.editorDiv.append(Ir)}},lx=function(Rr){const{value:Ir,fontSize:Qr,color:Ur,rect:Vr,pageIndex:Wr}=kr(this,yr);return Rr.value!==Ir||Rr.fontSize!==Qr||Rr.rect.some((Hr,$r)=>Math.abs(Hr-Vr[$r])>=1)||Rr.color.some((Hr,$r)=>Hr!==Ur[$r])||Rr.pageIndex!==Wr},Zm=function(Rr=!1){if(!this.annotationElementId)return;if(Un(this,hr,bp).call(this),!Rr&&(this.width===0||this.height===0)){setTimeout(()=>Un(this,hr,Zm).call(this,!0),0);return}const Ir=br._internalPadding*this.parentScale;kr(this,yr).rect=this.getRect(Ir,Ir)},oo(br,"_freeTextDefaultContent",""),oo(br,"_internalPadding",0),oo(br,"_defaultColor",null),oo(br,"_defaultFontSize",10),oo(br,"_type","freetext");let or=br;_e.FreeTextEditor=or},(er,_e,tr)=>{var Or,Gr,mu,Ax,En,Sn,Bn,kn,Kn,Cn,Jr,Fn,Zr,hn,bn,In,jn,zn,qn,Nn,ns,rs,ux,om,_g,e0,Ts,Fs,Vs,ts,Mn,Gn,os,t0,bs,Rn,es,ds,dx,r0;Object.defineProperty(_e,"__esModule",{value:!0}),_e.StampAnnotationElement=_e.InkAnnotationElement=_e.FreeTextAnnotationElement=_e.AnnotationLayer=void 0;var rr=tr(1),nr=tr(6),sr=tr(3),ir=tr(30),or=tr(31),ar=tr(32);const lr=1e3,cr=9,Ar=new WeakSet;function ur(Ss){return{width:Ss[2]-Ss[0],height:Ss[3]-Ss[1]}}class dr{static create(wn){switch(wn.data.annotationType){case rr.AnnotationType.LINK:return new pr(wn);case rr.AnnotationType.TEXT:return new yr(wn);case rr.AnnotationType.WIDGET:switch(wn.data.fieldType){case"Tx":return new gr(wn);case"Btn":return wn.data.radioButton?new Sr(wn):wn.data.checkBox?new Tr(wn):new Nr(wn);case"Ch":return new _r(wn);case"Sig":return new Cr(wn)}return new hr(wn);case rr.AnnotationType.POPUP:return new vr(wn);case rr.AnnotationType.FREETEXT:return new Pr(wn);case rr.AnnotationType.LINE:return new Er(wn);case rr.AnnotationType.SQUARE:return new Rr(wn);case rr.AnnotationType.CIRCLE:return new Ir(wn);case rr.AnnotationType.POLYLINE:return new Qr(wn);case rr.AnnotationType.CARET:return new Vr(wn);case rr.AnnotationType.INK:return new Wr(wn);case rr.AnnotationType.POLYGON:return new Ur(wn);case rr.AnnotationType.HIGHLIGHT:return new Hr(wn);case rr.AnnotationType.UNDERLINE:return new $r(wn);case rr.AnnotationType.SQUIGGLY:return new Xr(wn);case rr.AnnotationType.STRIKEOUT:return new pn(wn);case rr.AnnotationType.STAMP:return new jr(wn);case rr.AnnotationType.FILEATTACHMENT:return new Br(wn);default:return new mr(wn)}}}const zr=class zr{constructor(wn,{isRenderable:yn=!1,ignoreBorder:Ln=!1,createQuadrilaterals:Dn=!1}={}){Vn(this,Or,!1);this.isRenderable=yn,this.data=wn.data,this.layer=wn.layer,this.linkService=wn.linkService,this.downloadManager=wn.downloadManager,this.imageResourcesPath=wn.imageResourcesPath,this.renderForms=wn.renderForms,this.svgFactory=wn.svgFactory,this.annotationStorage=wn.annotationStorage,this.enableScripting=wn.enableScripting,this.hasJSActions=wn.hasJSActions,this._fieldObjects=wn.fieldObjects,this.parent=wn.parent,yn&&(this.container=this._createContainer(Ln)),Dn&&this._createQuadrilaterals()}static _hasPopupData({titleObj:wn,contentsObj:yn,richText:Ln}){return!!(wn!=null&&wn.str||yn!=null&&yn.str||Ln!=null&&Ln.str)}get hasPopupData(){return zr._hasPopupData(this.data)}_createContainer(wn){const{data:yn,parent:{page:Ln,viewport:Dn}}=this,Zn=document.createElement("section");Zn.setAttribute("data-annotation-id",yn.id),this instanceof hr||(Zn.tabIndex=lr),Zn.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Zn.setAttribute("aria-haspopup","dialog"),yn.noRotate&&Zn.classList.add("norotate");const{pageWidth:cs,pageHeight:As,pageX:Rs,pageY:Cs}=Dn.rawDims;if(!yn.rect||this instanceof vr){const{rotation:Us}=yn;return!yn.hasOwnCanvas&&Us!==0&&this.setRotation(Us,Zn),Zn}const{width:gs,height:Qs}=ur(yn.rect),Ns=rr.Util.normalizeRect([yn.rect[0],Ln.view[3]-yn.rect[1]+Ln.view[1],yn.rect[2],Ln.view[3]-yn.rect[3]+Ln.view[1]]);if(!wn&&yn.borderStyle.width>0){Zn.style.borderWidth=`${yn.borderStyle.width}px`;const Us=yn.borderStyle.horizontalCornerRadius,Ms=yn.borderStyle.verticalCornerRadius;if(Us>0||Ms>0){const Hs=`calc(${Us}px * var(--scale-factor)) / calc(${Ms}px * var(--scale-factor))`;Zn.style.borderRadius=Hs}else if(this instanceof Sr){const Hs=`calc(${gs}px * var(--scale-factor)) / calc(${Qs}px * var(--scale-factor))`;Zn.style.borderRadius=Hs}switch(yn.borderStyle.style){case rr.AnnotationBorderStyleType.SOLID:Zn.style.borderStyle="solid";break;case rr.AnnotationBorderStyleType.DASHED:Zn.style.borderStyle="dashed";break;case rr.AnnotationBorderStyleType.BEVELED:(0,rr.warn)("Unimplemented border style: beveled");break;case rr.AnnotationBorderStyleType.INSET:(0,rr.warn)("Unimplemented border style: inset");break;case rr.AnnotationBorderStyleType.UNDERLINE:Zn.style.borderBottomStyle="solid";break}const $s=yn.borderColor||null;$s?(On(this,Or,!0),Zn.style.borderColor=rr.Util.makeHexColor($s[0]|0,$s[1]|0,$s[2]|0)):Zn.style.borderWidth=0}Zn.style.left=`${100*(Ns[0]-Rs)/cs}%`,Zn.style.top=`${100*(Ns[1]-Cs)/As}%`;const{rotation:Bs}=yn;return yn.hasOwnCanvas||Bs===0?(Zn.style.width=`${100*gs/cs}%`,Zn.style.height=`${100*Qs/As}%`):this.setRotation(Bs,Zn),Zn}setRotation(wn,yn=this.container){if(!this.data.rect)return;const{pageWidth:Ln,pageHeight:Dn}=this.parent.viewport.rawDims,{width:Zn,height:cs}=ur(this.data.rect);let As,Rs;wn%180===0?(As=100*Zn/Ln,Rs=100*cs/Dn):(As=100*cs/Ln,Rs=100*Zn/Dn),yn.style.width=`${As}%`,yn.style.height=`${Rs}%`,yn.setAttribute("data-main-rotation",(360-wn)%360)}get _commonActions(){const wn=(yn,Ln,Dn)=>{const Zn=Dn.detail[yn],cs=Zn[0],As=Zn.slice(1);Dn.target.style[Ln]=ir.ColorConverters[`${cs}_HTML`](As),this.annotationStorage.setValue(this.data.id,{[Ln]:ir.ColorConverters[`${cs}_rgb`](As)})};return(0,rr.shadow)(this,"_commonActions",{display:yn=>{const{display:Ln}=yn.detail,Dn=Ln%2===1;this.container.style.visibility=Dn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Dn,noPrint:Ln===1||Ln===2})},print:yn=>{this.annotationStorage.setValue(this.data.id,{noPrint:!yn.detail.print})},hidden:yn=>{const{hidden:Ln}=yn.detail;this.container.style.visibility=Ln?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Ln,noView:Ln})},focus:yn=>{setTimeout(()=>yn.target.focus({preventScroll:!1}),0)},userName:yn=>{yn.target.title=yn.detail.userName},readonly:yn=>{yn.target.disabled=yn.detail.readonly},required:yn=>{this._setRequired(yn.target,yn.detail.required)},bgColor:yn=>{wn("bgColor","backgroundColor",yn)},fillColor:yn=>{wn("fillColor","backgroundColor",yn)},fgColor:yn=>{wn("fgColor","color",yn)},textColor:yn=>{wn("textColor","color",yn)},borderColor:yn=>{wn("borderColor","borderColor",yn)},strokeColor:yn=>{wn("strokeColor","borderColor",yn)},rotation:yn=>{const Ln=yn.detail.rotation;this.setRotation(Ln),this.annotationStorage.setValue(this.data.id,{rotation:Ln})}})}_dispatchEventFromSandbox(wn,yn){const Ln=this._commonActions;for(const Dn of Object.keys(yn.detail)){const Zn=wn[Dn]||Ln[Dn];Zn==null||Zn(yn)}}_setDefaultPropertiesFromJS(wn){if(!this.enableScripting)return;const yn=this.annotationStorage.getRawValue(this.data.id);if(!yn)return;const Ln=this._commonActions;for(const[Dn,Zn]of Object.entries(yn)){const cs=Ln[Dn];if(cs){const As={detail:{[Dn]:Zn},target:wn};cs(As),delete yn[Dn]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:wn}=this.data;if(!wn)return;const[yn,Ln,Dn,Zn]=this.data.rect;if(wn.length===1){const[,{x:Ms,y:$s},{x:Hs,y:_i}]=wn[0];if(Dn===Ms&&Zn===$s&&yn===Hs&&Ln===_i)return}const{style:cs}=this.container;let As;if(kr(this,Or)){const{borderColor:Ms,borderWidth:$s}=cs;cs.borderWidth=0,As=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ms}" stroke-width="${$s}">`],this.container.classList.add("hasBorder")}const Rs=Dn-yn,Cs=Zn-Ln,{svgFactory:gs}=this,Qs=gs.createElement("svg");Qs.classList.add("quadrilateralsContainer"),Qs.setAttribute("width",0),Qs.setAttribute("height",0);const Ns=gs.createElement("defs");Qs.append(Ns);const Bs=gs.createElement("clipPath"),Us=`clippath_${this.data.id}`;Bs.setAttribute("id",Us),Bs.setAttribute("clipPathUnits","objectBoundingBox"),Ns.append(Bs);for(const[,{x:Ms,y:$s},{x:Hs,y:_i}]of wn){const Js=gs.createElement("rect"),vo=(Hs-yn)/Rs,wo=(Zn-$s)/Cs,Ro=(Ms-Hs)/Rs,Jo=($s-_i)/Cs;Js.setAttribute("x",vo),Js.setAttribute("y",wo),Js.setAttribute("width",Ro),Js.setAttribute("height",Jo),Bs.append(Js),As==null||As.push(`<rect vector-effect="non-scaling-stroke" x="${vo}" y="${wo}" width="${Ro}" height="${Jo}"/>`)}kr(this,Or)&&(As.push("</g></svg>')"),cs.backgroundImage=As.join("")),this.container.append(Qs),this.container.style.clipPath=`url(#${Us})`}_createPopup(){const{container:wn,data:yn}=this;wn.setAttribute("aria-haspopup","dialog");const Ln=new vr({data:{color:yn.color,titleObj:yn.titleObj,modificationDate:yn.modificationDate,contentsObj:yn.contentsObj,richText:yn.richText,parentRect:yn.rect,borderStyle:0,id:`popup_${yn.id}`,rotation:yn.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Ln.render())}render(){(0,rr.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(wn,yn=null){const Ln=[];if(this._fieldObjects){const Dn=this._fieldObjects[wn];if(Dn)for(const{page:Zn,id:cs,exportValues:As}of Dn){if(Zn===-1||cs===yn)continue;const Rs=typeof As=="string"?As:null,Cs=document.querySelector(`[data-element-id="${cs}"]`);if(Cs&&!Ar.has(Cs)){(0,rr.warn)(`_getElementsByName - element not allowed: ${cs}`);continue}Ln.push({id:cs,exportValue:Rs,domElement:Cs})}return Ln}for(const Dn of document.getElementsByName(wn)){const{exportValue:Zn}=Dn,cs=Dn.getAttribute("data-element-id");cs!==yn&&Ar.has(Dn)&&Ln.push({id:cs,exportValue:Zn,domElement:Dn})}return Ln}show(){var wn;this.container&&(this.container.hidden=!1),(wn=this.popup)==null||wn.maybeShow()}hide(){var wn;this.container&&(this.container.hidden=!0),(wn=this.popup)==null||wn.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const wn=this.getElementsToTriggerPopup();if(Array.isArray(wn))for(const yn of wn)yn.classList.add("highlightArea");else wn.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:wn,data:{id:yn}}=this;this.container.addEventListener("dblclick",()=>{var Ln;(Ln=this.linkService.eventBus)==null||Ln.dispatch("switchannotationeditormode",{source:this,mode:wn,editId:yn})})}};Or=new WeakMap;let mr=zr;class pr extends mr{constructor(yn,Ln=null){super(yn,{isRenderable:!0,ignoreBorder:!!(Ln!=null&&Ln.ignoreBorder),createQuadrilaterals:!0});Vn(this,Gr);this.isTooltipOnly=yn.data.isTooltipOnly}render(){const{data:yn,linkService:Ln}=this,Dn=document.createElement("a");Dn.setAttribute("data-element-id",yn.id);let Zn=!1;return yn.url?(Ln.addLinkAttributes(Dn,yn.url,yn.newWindow),Zn=!0):yn.action?(this._bindNamedAction(Dn,yn.action),Zn=!0):yn.attachment?(this._bindAttachment(Dn,yn.attachment),Zn=!0):yn.setOCGState?(Un(this,Gr,Ax).call(this,Dn,yn.setOCGState),Zn=!0):yn.dest?(this._bindLink(Dn,yn.dest),Zn=!0):(yn.actions&&(yn.actions.Action||yn.actions["Mouse Up"]||yn.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Dn,yn),Zn=!0),yn.resetForm?(this._bindResetFormAction(Dn,yn.resetForm),Zn=!0):this.isTooltipOnly&&!Zn&&(this._bindLink(Dn,""),Zn=!0)),this.container.classList.add("linkAnnotation"),Zn&&this.container.append(Dn),this.container}_bindLink(yn,Ln){yn.href=this.linkService.getDestinationHash(Ln),yn.onclick=()=>(Ln&&this.linkService.goToDestination(Ln),!1),(Ln||Ln==="")&&Un(this,Gr,mu).call(this)}_bindNamedAction(yn,Ln){yn.href=this.linkService.getAnchorUrl(""),yn.onclick=()=>(this.linkService.executeNamedAction(Ln),!1),Un(this,Gr,mu).call(this)}_bindAttachment(yn,Ln){yn.href=this.linkService.getAnchorUrl(""),yn.onclick=()=>{var Dn;return(Dn=this.downloadManager)==null||Dn.openOrDownloadData(this.container,Ln.content,Ln.filename),!1},Un(this,Gr,mu).call(this)}_bindJSAction(yn,Ln){yn.href=this.linkService.getAnchorUrl("");const Dn=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Zn of Object.keys(Ln.actions)){const cs=Dn.get(Zn);cs&&(yn[cs]=()=>{var As;return(As=this.linkService.eventBus)==null||As.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ln.id,name:Zn}}),!1})}yn.onclick||(yn.onclick=()=>!1),Un(this,Gr,mu).call(this)}_bindResetFormAction(yn,Ln){const Dn=yn.onclick;if(Dn||(yn.href=this.linkService.getAnchorUrl("")),Un(this,Gr,mu).call(this),!this._fieldObjects){(0,rr.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Dn||(yn.onclick=()=>!1);return}yn.onclick=()=>{var Qs;Dn==null||Dn();const{fields:Zn,refs:cs,include:As}=Ln,Rs=[];if(Zn.length!==0||cs.length!==0){const Ns=new Set(cs);for(const Bs of Zn){const Us=this._fieldObjects[Bs]||[];for(const{id:Ms}of Us)Ns.add(Ms)}for(const Bs of Object.values(this._fieldObjects))for(const Us of Bs)Ns.has(Us.id)===As&&Rs.push(Us)}else for(const Ns of Object.values(this._fieldObjects))Rs.push(...Ns);const Cs=this.annotationStorage,gs=[];for(const Ns of Rs){const{id:Bs}=Ns;switch(gs.push(Bs),Ns.type){case"text":{const Ms=Ns.defaultValue||"";Cs.setValue(Bs,{value:Ms});break}case"checkbox":case"radiobutton":{const Ms=Ns.defaultValue===Ns.exportValues;Cs.setValue(Bs,{value:Ms});break}case"combobox":case"listbox":{const Ms=Ns.defaultValue||"";Cs.setValue(Bs,{value:Ms});break}default:continue}const Us=document.querySelector(`[data-element-id="${Bs}"]`);if(Us){if(!Ar.has(Us)){(0,rr.warn)(`_bindResetFormAction - element not allowed: ${Bs}`);continue}}else continue;Us.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Qs=this.linkService.eventBus)==null||Qs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:gs,name:"ResetForm"}})),!1}}}Gr=new WeakSet,mu=function(){this.container.setAttribute("data-internal-link","")},Ax=function(yn,Ln){yn.href=this.linkService.getAnchorUrl(""),yn.onclick=()=>(this.linkService.executeSetOCGState(Ln),!1),Un(this,Gr,mu).call(this)};class yr extends mr{constructor(wn){super(wn,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const wn=document.createElement("img");return wn.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",wn.alt="[{{type}} Annotation]",wn.dataset.l10nId="text_annotation_type",wn.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(wn),this.container}}class hr extends mr{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(wn){var yn;this.data.hasOwnCanvas&&(((yn=wn.previousSibling)==null?void 0:yn.nodeName)==="CANVAS"&&(wn.previousSibling.hidden=!0),wn.hidden=!1)}_getKeyModifier(wn){const{isWin:yn,isMac:Ln}=rr.FeatureTest.platform;return yn&&wn.ctrlKey||Ln&&wn.metaKey}_setEventListener(wn,yn,Ln,Dn,Zn){Ln.includes("mouse")?wn.addEventListener(Ln,cs=>{var As;(As=this.linkService.eventBus)==null||As.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Dn,value:Zn(cs),shift:cs.shiftKey,modifier:this._getKeyModifier(cs)}})}):wn.addEventListener(Ln,cs=>{var As;if(Ln==="blur"){if(!yn.focused||!cs.relatedTarget)return;yn.focused=!1}else if(Ln==="focus"){if(yn.focused)return;yn.focused=!0}Zn&&((As=this.linkService.eventBus)==null||As.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Dn,value:Zn(cs)}}))})}_setEventListeners(wn,yn,Ln,Dn){var Zn,cs,As;for(const[Rs,Cs]of Ln)(Cs==="Action"||(Zn=this.data.actions)!=null&&Zn[Cs])&&((Cs==="Focus"||Cs==="Blur")&&(yn||(yn={focused:!1})),this._setEventListener(wn,yn,Rs,Cs,Dn),Cs==="Focus"&&!((cs=this.data.actions)!=null&&cs.Blur)?this._setEventListener(wn,yn,"blur","Blur",null):Cs==="Blur"&&!((As=this.data.actions)!=null&&As.Focus)&&this._setEventListener(wn,yn,"focus","Focus",null))}_setBackgroundColor(wn){const yn=this.data.backgroundColor||null;wn.style.backgroundColor=yn===null?"transparent":rr.Util.makeHexColor(yn[0],yn[1],yn[2])}_setTextStyle(wn){const yn=["left","center","right"],{fontColor:Ln}=this.data.defaultAppearanceData,Dn=this.data.defaultAppearanceData.fontSize||cr,Zn=wn.style;let cs;const As=2,Rs=Cs=>Math.round(10*Cs)/10;if(this.data.multiLine){const Cs=Math.abs(this.data.rect[3]-this.data.rect[1]-As),gs=Math.round(Cs/(rr.LINE_FACTOR*Dn))||1,Qs=Cs/gs;cs=Math.min(Dn,Rs(Qs/rr.LINE_FACTOR))}else{const Cs=Math.abs(this.data.rect[3]-this.data.rect[1]-As);cs=Math.min(Dn,Rs(Cs/rr.LINE_FACTOR))}Zn.fontSize=`calc(${cs}px * var(--scale-factor))`,Zn.color=rr.Util.makeHexColor(Ln[0],Ln[1],Ln[2]),this.data.textAlignment!==null&&(Zn.textAlign=yn[this.data.textAlignment])}_setRequired(wn,yn){yn?wn.setAttribute("required",!0):wn.removeAttribute("required"),wn.setAttribute("aria-required",yn)}}class gr extends hr{constructor(wn){const yn=wn.renderForms||!wn.data.hasAppearance&&!!wn.data.fieldValue;super(wn,{isRenderable:yn})}setPropertyOnSiblings(wn,yn,Ln,Dn){const Zn=this.annotationStorage;for(const cs of this._getElementsByName(wn.name,wn.id))cs.domElement&&(cs.domElement[yn]=Ln),Zn.setValue(cs.id,{[Dn]:Ln})}render(){var Dn,Zn;const wn=this.annotationStorage,yn=this.data.id;this.container.classList.add("textWidgetAnnotation");let Ln=null;if(this.renderForms){const cs=wn.getValue(yn,{value:this.data.fieldValue});let As=cs.value||"";const Rs=wn.getValue(yn,{charLimit:this.data.maxLen}).charLimit;Rs&&As.length>Rs&&(As=As.slice(0,Rs));let Cs=cs.formattedValue||((Dn=this.data.textContent)==null?void 0:Dn.join(`
`))||null;Cs&&this.data.comb&&(Cs=Cs.replaceAll(/\s+/g,""));const gs={userValue:As,formattedValue:Cs,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Ln=document.createElement("textarea"),Ln.textContent=Cs??As,this.data.doNotScroll&&(Ln.style.overflowY="hidden")):(Ln=document.createElement("input"),Ln.type="text",Ln.setAttribute("value",Cs??As),this.data.doNotScroll&&(Ln.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Ln.hidden=!0),Ar.add(Ln),Ln.setAttribute("data-element-id",yn),Ln.disabled=this.data.readOnly,Ln.name=this.data.fieldName,Ln.tabIndex=lr,this._setRequired(Ln,this.data.required),Rs&&(Ln.maxLength=Rs),Ln.addEventListener("input",Ns=>{wn.setValue(yn,{value:Ns.target.value}),this.setPropertyOnSiblings(Ln,"value",Ns.target.value,"value"),gs.formattedValue=null}),Ln.addEventListener("resetform",Ns=>{const Bs=this.data.defaultFieldValue??"";Ln.value=gs.userValue=Bs,gs.formattedValue=null});let Qs=Ns=>{const{formattedValue:Bs}=gs;Bs!=null&&(Ns.target.value=Bs),Ns.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Ln.addEventListener("focus",Bs=>{if(gs.focused)return;const{target:Us}=Bs;gs.userValue&&(Us.value=gs.userValue),gs.lastCommittedValue=Us.value,gs.commitKey=1,gs.focused=!0}),Ln.addEventListener("updatefromsandbox",Bs=>{this.showElementAndHideCanvas(Bs.target);const Us={value(Ms){gs.userValue=Ms.detail.value??"",wn.setValue(yn,{value:gs.userValue.toString()}),Ms.target.value=gs.userValue},formattedValue(Ms){const{formattedValue:$s}=Ms.detail;gs.formattedValue=$s,$s!=null&&Ms.target!==document.activeElement&&(Ms.target.value=$s),wn.setValue(yn,{formattedValue:$s})},selRange(Ms){Ms.target.setSelectionRange(...Ms.detail.selRange)},charLimit:Ms=>{var Js;const{charLimit:$s}=Ms.detail,{target:Hs}=Ms;if($s===0){Hs.removeAttribute("maxLength");return}Hs.setAttribute("maxLength",$s);let _i=gs.userValue;!_i||_i.length<=$s||(_i=_i.slice(0,$s),Hs.value=gs.userValue=_i,wn.setValue(yn,{value:_i}),(Js=this.linkService.eventBus)==null||Js.dispatch("dispatcheventinsandbox",{source:this,detail:{id:yn,name:"Keystroke",value:_i,willCommit:!0,commitKey:1,selStart:Hs.selectionStart,selEnd:Hs.selectionEnd}}))}};this._dispatchEventFromSandbox(Us,Bs)}),Ln.addEventListener("keydown",Bs=>{var $s;gs.commitKey=1;let Us=-1;if(Bs.key==="Escape"?Us=0:Bs.key==="Enter"&&!this.data.multiLine?Us=2:Bs.key==="Tab"&&(gs.commitKey=3),Us===-1)return;const{value:Ms}=Bs.target;gs.lastCommittedValue!==Ms&&(gs.lastCommittedValue=Ms,gs.userValue=Ms,($s=this.linkService.eventBus)==null||$s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:yn,name:"Keystroke",value:Ms,willCommit:!0,commitKey:Us,selStart:Bs.target.selectionStart,selEnd:Bs.target.selectionEnd}}))});const Ns=Qs;Qs=null,Ln.addEventListener("blur",Bs=>{var Ms;if(!gs.focused||!Bs.relatedTarget)return;gs.focused=!1;const{value:Us}=Bs.target;gs.userValue=Us,gs.lastCommittedValue!==Us&&((Ms=this.linkService.eventBus)==null||Ms.dispatch("dispatcheventinsandbox",{source:this,detail:{id:yn,name:"Keystroke",value:Us,willCommit:!0,commitKey:gs.commitKey,selStart:Bs.target.selectionStart,selEnd:Bs.target.selectionEnd}})),Ns(Bs)}),(Zn=this.data.actions)!=null&&Zn.Keystroke&&Ln.addEventListener("beforeinput",Bs=>{var wo;gs.lastCommittedValue=null;const{data:Us,target:Ms}=Bs,{value:$s,selectionStart:Hs,selectionEnd:_i}=Ms;let Js=Hs,vo=_i;switch(Bs.inputType){case"deleteWordBackward":{const Ro=$s.substring(0,Hs).match(/\w*[^\w]*$/);Ro&&(Js-=Ro[0].length);break}case"deleteWordForward":{const Ro=$s.substring(Hs).match(/^[^\w]*\w*/);Ro&&(vo+=Ro[0].length);break}case"deleteContentBackward":Hs===_i&&(Js-=1);break;case"deleteContentForward":Hs===_i&&(vo+=1);break}Bs.preventDefault(),(wo=this.linkService.eventBus)==null||wo.dispatch("dispatcheventinsandbox",{source:this,detail:{id:yn,name:"Keystroke",value:$s,change:Us||"",willCommit:!1,selStart:Js,selEnd:vo}})}),this._setEventListeners(Ln,gs,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Bs=>Bs.target.value)}if(Qs&&Ln.addEventListener("blur",Qs),this.data.comb){const Bs=(this.data.rect[2]-this.data.rect[0])/Rs;Ln.classList.add("comb"),Ln.style.letterSpacing=`calc(${Bs}px * var(--scale-factor) - 1ch)`}}else Ln=document.createElement("div"),Ln.textContent=this.data.fieldValue,Ln.style.verticalAlign="middle",Ln.style.display="table-cell";return this._setTextStyle(Ln),this._setBackgroundColor(Ln),this._setDefaultPropertiesFromJS(Ln),this.container.append(Ln),this.container}}class Cr extends hr{constructor(wn){super(wn,{isRenderable:!!wn.data.hasOwnCanvas})}}class Tr extends hr{constructor(wn){super(wn,{isRenderable:wn.renderForms})}render(){const wn=this.annotationStorage,yn=this.data,Ln=yn.id;let Dn=wn.getValue(Ln,{value:yn.exportValue===yn.fieldValue}).value;typeof Dn=="string"&&(Dn=Dn!=="Off",wn.setValue(Ln,{value:Dn})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Zn=document.createElement("input");return Ar.add(Zn),Zn.setAttribute("data-element-id",Ln),Zn.disabled=yn.readOnly,this._setRequired(Zn,this.data.required),Zn.type="checkbox",Zn.name=yn.fieldName,Dn&&Zn.setAttribute("checked",!0),Zn.setAttribute("exportValue",yn.exportValue),Zn.tabIndex=lr,Zn.addEventListener("change",cs=>{const{name:As,checked:Rs}=cs.target;for(const Cs of this._getElementsByName(As,Ln)){const gs=Rs&&Cs.exportValue===yn.exportValue;Cs.domElement&&(Cs.domElement.checked=gs),wn.setValue(Cs.id,{value:gs})}wn.setValue(Ln,{value:Rs})}),Zn.addEventListener("resetform",cs=>{const As=yn.defaultFieldValue||"Off";cs.target.checked=As===yn.exportValue}),this.enableScripting&&this.hasJSActions&&(Zn.addEventListener("updatefromsandbox",cs=>{const As={value(Rs){Rs.target.checked=Rs.detail.value!=="Off",wn.setValue(Ln,{value:Rs.target.checked})}};this._dispatchEventFromSandbox(As,cs)}),this._setEventListeners(Zn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],cs=>cs.target.checked)),this._setBackgroundColor(Zn),this._setDefaultPropertiesFromJS(Zn),this.container.append(Zn),this.container}}class Sr extends hr{constructor(wn){super(wn,{isRenderable:wn.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const wn=this.annotationStorage,yn=this.data,Ln=yn.id;let Dn=wn.getValue(Ln,{value:yn.fieldValue===yn.buttonValue}).value;typeof Dn=="string"&&(Dn=Dn!==yn.buttonValue,wn.setValue(Ln,{value:Dn}));const Zn=document.createElement("input");if(Ar.add(Zn),Zn.setAttribute("data-element-id",Ln),Zn.disabled=yn.readOnly,this._setRequired(Zn,this.data.required),Zn.type="radio",Zn.name=yn.fieldName,Dn&&Zn.setAttribute("checked",!0),Zn.tabIndex=lr,Zn.addEventListener("change",cs=>{const{name:As,checked:Rs}=cs.target;for(const Cs of this._getElementsByName(As,Ln))wn.setValue(Cs.id,{value:!1});wn.setValue(Ln,{value:Rs})}),Zn.addEventListener("resetform",cs=>{const As=yn.defaultFieldValue;cs.target.checked=As!=null&&As===yn.buttonValue}),this.enableScripting&&this.hasJSActions){const cs=yn.buttonValue;Zn.addEventListener("updatefromsandbox",As=>{const Rs={value:Cs=>{const gs=cs===Cs.detail.value;for(const Qs of this._getElementsByName(Cs.target.name)){const Ns=gs&&Qs.id===Ln;Qs.domElement&&(Qs.domElement.checked=Ns),wn.setValue(Qs.id,{value:Ns})}}};this._dispatchEventFromSandbox(Rs,As)}),this._setEventListeners(Zn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],As=>As.target.checked)}return this._setBackgroundColor(Zn),this._setDefaultPropertiesFromJS(Zn),this.container.append(Zn),this.container}}class Nr extends pr{constructor(wn){super(wn,{ignoreBorder:wn.data.hasAppearance})}render(){const wn=super.render();wn.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(wn.title=this.data.alternativeText);const yn=wn.lastChild;return this.enableScripting&&this.hasJSActions&&yn&&(this._setDefaultPropertiesFromJS(yn),yn.addEventListener("updatefromsandbox",Ln=>{this._dispatchEventFromSandbox({},Ln)})),wn}}class _r extends hr{constructor(wn){super(wn,{isRenderable:wn.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const wn=this.annotationStorage,yn=this.data.id,Ln=wn.getValue(yn,{value:this.data.fieldValue}),Dn=document.createElement("select");Ar.add(Dn),Dn.setAttribute("data-element-id",yn),Dn.disabled=this.data.readOnly,this._setRequired(Dn,this.data.required),Dn.name=this.data.fieldName,Dn.tabIndex=lr;let Zn=this.data.combo&&this.data.options.length>0;this.data.combo||(Dn.size=this.data.options.length,this.data.multiSelect&&(Dn.multiple=!0)),Dn.addEventListener("resetform",gs=>{const Qs=this.data.defaultFieldValue;for(const Ns of Dn.options)Ns.selected=Ns.value===Qs});for(const gs of this.data.options){const Qs=document.createElement("option");Qs.textContent=gs.displayValue,Qs.value=gs.exportValue,Ln.value.includes(gs.exportValue)&&(Qs.setAttribute("selected",!0),Zn=!1),Dn.append(Qs)}let cs=null;if(Zn){const gs=document.createElement("option");gs.value=" ",gs.setAttribute("hidden",!0),gs.setAttribute("selected",!0),Dn.prepend(gs),cs=()=>{gs.remove(),Dn.removeEventListener("input",cs),cs=null},Dn.addEventListener("input",cs)}const As=gs=>{const Qs=gs?"value":"textContent",{options:Ns,multiple:Bs}=Dn;return Bs?Array.prototype.filter.call(Ns,Us=>Us.selected).map(Us=>Us[Qs]):Ns.selectedIndex===-1?null:Ns[Ns.selectedIndex][Qs]};let Rs=As(!1);const Cs=gs=>{const Qs=gs.target.options;return Array.prototype.map.call(Qs,Ns=>({displayValue:Ns.textContent,exportValue:Ns.value}))};return this.enableScripting&&this.hasJSActions?(Dn.addEventListener("updatefromsandbox",gs=>{const Qs={value(Ns){cs==null||cs();const Bs=Ns.detail.value,Us=new Set(Array.isArray(Bs)?Bs:[Bs]);for(const Ms of Dn.options)Ms.selected=Us.has(Ms.value);wn.setValue(yn,{value:As(!0)}),Rs=As(!1)},multipleSelection(Ns){Dn.multiple=!0},remove(Ns){const Bs=Dn.options,Us=Ns.detail.remove;Bs[Us].selected=!1,Dn.remove(Us),Bs.length>0&&Array.prototype.findIndex.call(Bs,$s=>$s.selected)===-1&&(Bs[0].selected=!0),wn.setValue(yn,{value:As(!0),items:Cs(Ns)}),Rs=As(!1)},clear(Ns){for(;Dn.length!==0;)Dn.remove(0);wn.setValue(yn,{value:null,items:[]}),Rs=As(!1)},insert(Ns){const{index:Bs,displayValue:Us,exportValue:Ms}=Ns.detail.insert,$s=Dn.children[Bs],Hs=document.createElement("option");Hs.textContent=Us,Hs.value=Ms,$s?$s.before(Hs):Dn.append(Hs),wn.setValue(yn,{value:As(!0),items:Cs(Ns)}),Rs=As(!1)},items(Ns){const{items:Bs}=Ns.detail;for(;Dn.length!==0;)Dn.remove(0);for(const Us of Bs){const{displayValue:Ms,exportValue:$s}=Us,Hs=document.createElement("option");Hs.textContent=Ms,Hs.value=$s,Dn.append(Hs)}Dn.options.length>0&&(Dn.options[0].selected=!0),wn.setValue(yn,{value:As(!0),items:Cs(Ns)}),Rs=As(!1)},indices(Ns){const Bs=new Set(Ns.detail.indices);for(const Us of Ns.target.options)Us.selected=Bs.has(Us.index);wn.setValue(yn,{value:As(!0)}),Rs=As(!1)},editable(Ns){Ns.target.disabled=!Ns.detail.editable}};this._dispatchEventFromSandbox(Qs,gs)}),Dn.addEventListener("input",gs=>{var Ns;const Qs=As(!0);wn.setValue(yn,{value:Qs}),gs.preventDefault(),(Ns=this.linkService.eventBus)==null||Ns.dispatch("dispatcheventinsandbox",{source:this,detail:{id:yn,name:"Keystroke",value:Rs,changeEx:Qs,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Dn,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],gs=>gs.target.value)):Dn.addEventListener("input",function(gs){wn.setValue(yn,{value:As(!0)})}),this.data.combo&&this._setTextStyle(Dn),this._setBackgroundColor(Dn),this._setDefaultPropertiesFromJS(Dn),this.container.append(Dn),this.container}}class vr extends mr{constructor(wn){const{data:yn,elements:Ln}=wn;super(wn,{isRenderable:mr._hasPopupData(yn)}),this.elements=Ln}render(){this.container.classList.add("popupAnnotation");const wn=new br({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),yn=[];for(const Ln of this.elements)Ln.popup=wn,yn.push(Ln.data.id),Ln.addHighlightArea();return this.container.setAttribute("aria-controls",yn.map(Ln=>`${rr.AnnotationPrefix}${Ln}`).join(",")),this.container}}class br{constructor({container:wn,color:yn,elements:Ln,titleObj:Dn,modificationDate:Zn,contentsObj:cs,richText:As,parent:Rs,rect:Cs,parentRect:gs,open:Qs}){Vn(this,rs);Vn(this,En,null);Vn(this,Sn,Un(this,rs,ux).bind(this));Vn(this,Bn,Un(this,rs,e0).bind(this));Vn(this,kn,Un(this,rs,_g).bind(this));Vn(this,Kn,Un(this,rs,om).bind(this));Vn(this,Cn,null);Vn(this,Jr,null);Vn(this,Fn,null);Vn(this,Zr,null);Vn(this,hn,null);Vn(this,bn,null);Vn(this,In,!1);Vn(this,jn,null);Vn(this,zn,null);Vn(this,qn,null);Vn(this,Nn,null);Vn(this,ns,!1);var Bs;On(this,Jr,wn),On(this,Nn,Dn),On(this,Fn,cs),On(this,qn,As),On(this,hn,Rs),On(this,Cn,yn),On(this,zn,Cs),On(this,bn,gs),On(this,Zr,Ln);const Ns=nr.PDFDateString.toDateObject(Zn);Ns&&On(this,En,Rs.l10n.get("annotation_date_string",{date:Ns.toLocaleDateString(),time:Ns.toLocaleTimeString()})),this.trigger=Ln.flatMap(Us=>Us.getElementsToTriggerPopup());for(const Us of this.trigger)Us.addEventListener("click",kr(this,Kn)),Us.addEventListener("mouseenter",kr(this,kn)),Us.addEventListener("mouseleave",kr(this,Bn)),Us.classList.add("popupTriggerArea");for(const Us of Ln)(Bs=Us.container)==null||Bs.addEventListener("keydown",kr(this,Sn));kr(this,Jr).hidden=!0,Qs&&Un(this,rs,om).call(this)}render(){if(kr(this,jn))return;const{page:{view:wn},viewport:{rawDims:{pageWidth:yn,pageHeight:Ln,pageX:Dn,pageY:Zn}}}=kr(this,hn),cs=On(this,jn,document.createElement("div"));if(cs.className="popup",kr(this,Cn)){const Js=cs.style.outlineColor=rr.Util.makeHexColor(...kr(this,Cn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?cs.style.backgroundColor=`color-mix(in srgb, ${Js} 30%, white)`:cs.style.backgroundColor=rr.Util.makeHexColor(...kr(this,Cn).map(wo=>Math.floor(.7*(255-wo)+wo)))}const As=document.createElement("span");As.className="header";const Rs=document.createElement("h1");if(As.append(Rs),{dir:Rs.dir,str:Rs.textContent}=kr(this,Nn),cs.append(As),kr(this,En)){const Js=document.createElement("span");Js.classList.add("popupDate"),kr(this,En).then(vo=>{Js.textContent=vo}),As.append(Js)}const Cs=kr(this,Fn),gs=kr(this,qn);if(gs!=null&&gs.str&&(!(Cs!=null&&Cs.str)||Cs.str===gs.str))ar.XfaLayer.render({xfaHtml:gs.html,intent:"richText",div:cs}),cs.lastChild.classList.add("richText","popupContent");else{const Js=this._formatContents(Cs);cs.append(Js)}let Qs=!!kr(this,bn),Ns=Qs?kr(this,bn):kr(this,zn);for(const Js of kr(this,Zr))if(!Ns||rr.Util.intersect(Js.data.rect,Ns)!==null){Ns=Js.data.rect,Qs=!0;break}const Bs=rr.Util.normalizeRect([Ns[0],wn[3]-Ns[1]+wn[1],Ns[2],wn[3]-Ns[3]+wn[1]]),Ms=Qs?Ns[2]-Ns[0]+5:0,$s=Bs[0]+Ms,Hs=Bs[1],{style:_i}=kr(this,Jr);_i.left=`${100*($s-Dn)/yn}%`,_i.top=`${100*(Hs-Zn)/Ln}%`,kr(this,Jr).append(cs)}_formatContents({str:wn,dir:yn}){const Ln=document.createElement("p");Ln.classList.add("popupContent"),Ln.dir=yn;const Dn=wn.split(/(?:\r\n?|\n)/);for(let Zn=0,cs=Dn.length;Zn<cs;++Zn){const As=Dn[Zn];Ln.append(document.createTextNode(As)),Zn<cs-1&&Ln.append(document.createElement("br"))}return Ln}forceHide(){On(this,ns,this.isVisible),kr(this,ns)&&(kr(this,Jr).hidden=!0)}maybeShow(){kr(this,ns)&&(On(this,ns,!1),kr(this,Jr).hidden=!1)}get isVisible(){return kr(this,Jr).hidden===!1}}En=new WeakMap,Sn=new WeakMap,Bn=new WeakMap,kn=new WeakMap,Kn=new WeakMap,Cn=new WeakMap,Jr=new WeakMap,Fn=new WeakMap,Zr=new WeakMap,hn=new WeakMap,bn=new WeakMap,In=new WeakMap,jn=new WeakMap,zn=new WeakMap,qn=new WeakMap,Nn=new WeakMap,ns=new WeakMap,rs=new WeakSet,ux=function(wn){wn.altKey||wn.shiftKey||wn.ctrlKey||wn.metaKey||(wn.key==="Enter"||wn.key==="Escape"&&kr(this,In))&&Un(this,rs,om).call(this)},om=function(){On(this,In,!kr(this,In)),kr(this,In)?(Un(this,rs,_g).call(this),kr(this,Jr).addEventListener("click",kr(this,Kn)),kr(this,Jr).addEventListener("keydown",kr(this,Sn))):(Un(this,rs,e0).call(this),kr(this,Jr).removeEventListener("click",kr(this,Kn)),kr(this,Jr).removeEventListener("keydown",kr(this,Sn)))},_g=function(){kr(this,jn)||this.render(),this.isVisible?kr(this,In)&&kr(this,Jr).classList.add("focused"):(kr(this,Jr).hidden=!1,kr(this,Jr).style.zIndex=parseInt(kr(this,Jr).style.zIndex)+1e3)},e0=function(){kr(this,Jr).classList.remove("focused"),!(kr(this,In)||!this.isVisible)&&(kr(this,Jr).hidden=!0,kr(this,Jr).style.zIndex=parseInt(kr(this,Jr).style.zIndex)-1e3)};class Pr extends mr{constructor(wn){super(wn,{isRenderable:!0,ignoreBorder:!0}),this.textContent=wn.data.textContent,this.textPosition=wn.data.textPosition,this.annotationEditorType=rr.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const wn=document.createElement("div");wn.classList.add("annotationTextContent"),wn.setAttribute("role","comment");for(const yn of this.textContent){const Ln=document.createElement("span");Ln.textContent=yn,wn.append(Ln)}this.container.append(wn)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}_e.FreeTextAnnotationElement=Pr;class Er extends mr{constructor(yn){super(yn,{isRenderable:!0,ignoreBorder:!0});Vn(this,Ts,null)}render(){this.container.classList.add("lineAnnotation");const yn=this.data,{width:Ln,height:Dn}=ur(yn.rect),Zn=this.svgFactory.create(Ln,Dn,!0),cs=On(this,Ts,this.svgFactory.createElement("svg:line"));return cs.setAttribute("x1",yn.rect[2]-yn.lineCoordinates[0]),cs.setAttribute("y1",yn.rect[3]-yn.lineCoordinates[1]),cs.setAttribute("x2",yn.rect[2]-yn.lineCoordinates[2]),cs.setAttribute("y2",yn.rect[3]-yn.lineCoordinates[3]),cs.setAttribute("stroke-width",yn.borderStyle.width||1),cs.setAttribute("stroke","transparent"),cs.setAttribute("fill","transparent"),Zn.append(cs),this.container.append(Zn),!yn.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return kr(this,Ts)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ts=new WeakMap;class Rr extends mr{constructor(yn){super(yn,{isRenderable:!0,ignoreBorder:!0});Vn(this,Fs,null)}render(){this.container.classList.add("squareAnnotation");const yn=this.data,{width:Ln,height:Dn}=ur(yn.rect),Zn=this.svgFactory.create(Ln,Dn,!0),cs=yn.borderStyle.width,As=On(this,Fs,this.svgFactory.createElement("svg:rect"));return As.setAttribute("x",cs/2),As.setAttribute("y",cs/2),As.setAttribute("width",Ln-cs),As.setAttribute("height",Dn-cs),As.setAttribute("stroke-width",cs||1),As.setAttribute("stroke","transparent"),As.setAttribute("fill","transparent"),Zn.append(As),this.container.append(Zn),!yn.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return kr(this,Fs)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fs=new WeakMap;class Ir extends mr{constructor(yn){super(yn,{isRenderable:!0,ignoreBorder:!0});Vn(this,Vs,null)}render(){this.container.classList.add("circleAnnotation");const yn=this.data,{width:Ln,height:Dn}=ur(yn.rect),Zn=this.svgFactory.create(Ln,Dn,!0),cs=yn.borderStyle.width,As=On(this,Vs,this.svgFactory.createElement("svg:ellipse"));return As.setAttribute("cx",Ln/2),As.setAttribute("cy",Dn/2),As.setAttribute("rx",Ln/2-cs/2),As.setAttribute("ry",Dn/2-cs/2),As.setAttribute("stroke-width",cs||1),As.setAttribute("stroke","transparent"),As.setAttribute("fill","transparent"),Zn.append(As),this.container.append(Zn),!yn.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return kr(this,Vs)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vs=new WeakMap;class Qr extends mr{constructor(yn){super(yn,{isRenderable:!0,ignoreBorder:!0});Vn(this,ts,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const yn=this.data,{width:Ln,height:Dn}=ur(yn.rect),Zn=this.svgFactory.create(Ln,Dn,!0);let cs=[];for(const Rs of yn.vertices){const Cs=Rs.x-yn.rect[0],gs=yn.rect[3]-Rs.y;cs.push(Cs+","+gs)}cs=cs.join(" ");const As=On(this,ts,this.svgFactory.createElement(this.svgElementName));return As.setAttribute("points",cs),As.setAttribute("stroke-width",yn.borderStyle.width||1),As.setAttribute("stroke","transparent"),As.setAttribute("fill","transparent"),Zn.append(As),this.container.append(Zn),!yn.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return kr(this,ts)}addHighlightArea(){this.container.classList.add("highlightArea")}}ts=new WeakMap;class Ur extends Qr{constructor(wn){super(wn),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Vr extends mr{constructor(wn){super(wn,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Wr extends mr{constructor(yn){super(yn,{isRenderable:!0,ignoreBorder:!0});Vn(this,Mn,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=rr.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const yn=this.data,{width:Ln,height:Dn}=ur(yn.rect),Zn=this.svgFactory.create(Ln,Dn,!0);for(const cs of yn.inkLists){let As=[];for(const Cs of cs){const gs=Cs.x-yn.rect[0],Qs=yn.rect[3]-Cs.y;As.push(`${gs},${Qs}`)}As=As.join(" ");const Rs=this.svgFactory.createElement(this.svgElementName);kr(this,Mn).push(Rs),Rs.setAttribute("points",As),Rs.setAttribute("stroke-width",yn.borderStyle.width||1),Rs.setAttribute("stroke","transparent"),Rs.setAttribute("fill","transparent"),!yn.popupRef&&this.hasPopupData&&this._createPopup(),Zn.append(Rs)}return this.container.append(Zn),this.container}getElementsToTriggerPopup(){return kr(this,Mn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mn=new WeakMap,_e.InkAnnotationElement=Wr;class Hr extends mr{constructor(wn){super(wn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class $r extends mr{constructor(wn){super(wn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Xr extends mr{constructor(wn){super(wn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class pn extends mr{constructor(wn){super(wn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class jr extends mr{constructor(wn){super(wn,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}_e.StampAnnotationElement=jr;class Br extends mr{constructor(yn){var Zn;super(yn,{isRenderable:!0});Vn(this,os);Vn(this,Gn,null);const{filename:Ln,content:Dn}=this.data.file;this.filename=(0,nr.getFilenameFromUrl)(Ln,!0),this.content=Dn,(Zn=this.linkService.eventBus)==null||Zn.dispatch("fileattachmentannotation",{source:this,filename:Ln,content:Dn})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:yn,data:Ln}=this;let Dn;Ln.hasAppearance||Ln.fillAlpha===0?Dn=document.createElement("div"):(Dn=document.createElement("img"),Dn.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Ln.name)?"paperclip":"pushpin"}.svg`,Ln.fillAlpha&&Ln.fillAlpha<1&&(Dn.style=`filter: opacity(${Math.round(Ln.fillAlpha*100)}%);`)),Dn.addEventListener("dblclick",Un(this,os,t0).bind(this)),On(this,Gn,Dn);const{isMac:Zn}=rr.FeatureTest.platform;return yn.addEventListener("keydown",cs=>{cs.key==="Enter"&&(Zn?cs.metaKey:cs.ctrlKey)&&Un(this,os,t0).call(this)}),!Ln.popupRef&&this.hasPopupData?this._createPopup():Dn.classList.add("popupTriggerArea"),yn.append(Dn),yn}getElementsToTriggerPopup(){return kr(this,Gn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gn=new WeakMap,os=new WeakSet,t0=function(){var yn;(yn=this.downloadManager)==null||yn.openOrDownloadData(this.container,this.content,this.filename)};class Lr{constructor({div:wn,accessibilityManager:yn,annotationCanvasMap:Ln,l10n:Dn,page:Zn,viewport:cs}){Vn(this,ds);Vn(this,bs,null);Vn(this,Rn,null);Vn(this,es,new Map);this.div=wn,On(this,bs,yn),On(this,Rn,Ln),this.l10n=Dn,this.page=Zn,this.viewport=cs,this.zIndex=0,this.l10n||(this.l10n=or.NullL10n)}async render(wn){const{annotations:yn}=wn,Ln=this.div;(0,nr.setLayerDimensions)(Ln,this.viewport);const Dn=new Map,Zn={data:null,layer:Ln,linkService:wn.linkService,downloadManager:wn.downloadManager,imageResourcesPath:wn.imageResourcesPath||"",renderForms:wn.renderForms!==!1,svgFactory:new nr.DOMSVGFactory,annotationStorage:wn.annotationStorage||new sr.AnnotationStorage,enableScripting:wn.enableScripting===!0,hasJSActions:wn.hasJSActions,fieldObjects:wn.fieldObjects,parent:this,elements:null};for(const cs of yn){if(cs.noHTML)continue;const As=cs.annotationType===rr.AnnotationType.POPUP;if(As){const gs=Dn.get(cs.id);if(!gs)continue;Zn.elements=gs}else{const{width:gs,height:Qs}=ur(cs.rect);if(gs<=0||Qs<=0)continue}Zn.data=cs;const Rs=dr.create(Zn);if(!Rs.isRenderable)continue;if(!As&&cs.popupRef){const gs=Dn.get(cs.popupRef);gs?gs.push(Rs):Dn.set(cs.popupRef,[Rs])}Rs.annotationEditorType>0&&kr(this,es).set(Rs.data.id,Rs);const Cs=Rs.render();cs.hidden&&(Cs.style.visibility="hidden"),Un(this,ds,dx).call(this,Cs,cs.id)}Un(this,ds,r0).call(this),await this.l10n.translate(Ln)}update({viewport:wn}){const yn=this.div;this.viewport=wn,(0,nr.setLayerDimensions)(yn,{rotation:wn.rotation}),Un(this,ds,r0).call(this),yn.hidden=!1}getEditableAnnotations(){return Array.from(kr(this,es).values())}getEditableAnnotation(wn){return kr(this,es).get(wn)}}bs=new WeakMap,Rn=new WeakMap,es=new WeakMap,ds=new WeakSet,dx=function(wn,yn){var Dn;const Ln=wn.firstChild||wn;Ln.id=`${rr.AnnotationPrefix}${yn}`,this.div.append(wn),(Dn=kr(this,bs))==null||Dn.moveElementInDOM(this.div,wn,Ln,!1)},r0=function(){if(!kr(this,Rn))return;const wn=this.div;for(const[yn,Ln]of kr(this,Rn)){const Dn=wn.querySelector(`[data-annotation-id="${yn}"]`);if(!Dn)continue;const{firstChild:Zn}=Dn;Zn?Zn.nodeName==="CANVAS"?Zn.replaceWith(Ln):Zn.before(Ln):Dn.append(Ln)}kr(this,Rn).clear()},_e.AnnotationLayer=Lr},(er,_e)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.ColorConverters=void 0;function tr(sr){return Math.floor(Math.max(0,Math.min(1,sr))*255).toString(16).padStart(2,"0")}function rr(sr){return Math.max(0,Math.min(255,255*sr))}class nr{static CMYK_G([ir,or,ar,lr]){return["G",1-Math.min(1,.3*ir+.59*ar+.11*or+lr)]}static G_CMYK([ir]){return["CMYK",0,0,0,1-ir]}static G_RGB([ir]){return["RGB",ir,ir,ir]}static G_rgb([ir]){return ir=rr(ir),[ir,ir,ir]}static G_HTML([ir]){const or=tr(ir);return`#${or}${or}${or}`}static RGB_G([ir,or,ar]){return["G",.3*ir+.59*or+.11*ar]}static RGB_rgb(ir){return ir.map(rr)}static RGB_HTML(ir){return`#${ir.map(tr).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([ir,or,ar,lr]){return["RGB",1-Math.min(1,ir+lr),1-Math.min(1,ar+lr),1-Math.min(1,or+lr)]}static CMYK_rgb([ir,or,ar,lr]){return[rr(1-Math.min(1,ir+lr)),rr(1-Math.min(1,ar+lr)),rr(1-Math.min(1,or+lr))]}static CMYK_HTML(ir){const or=this.CMYK_RGB(ir).slice(1);return this.RGB_HTML(or)}static RGB_CMYK([ir,or,ar]){const lr=1-ir,cr=1-or,Ar=1-ar,ur=Math.min(lr,cr,Ar);return["CMYK",lr,cr,Ar,ur]}}_e.ColorConverters=nr},(er,_e)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.NullL10n=void 0,_e.getL10nFallback=rr;const tr={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};tr.print_progress_percent="{{progress}}%";function rr(ir,or){switch(ir){case"find_match_count":ir=`find_match_count[${or.total===1?"one":"other"}]`;break;case"find_match_count_limit":ir=`find_match_count_limit[${or.limit===1?"one":"other"}]`;break}return tr[ir]||""}function nr(ir,or){return or?ir.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(ar,lr)=>lr in or?or[lr]:"{{"+lr+"}}"):ir}const sr={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(ir,or=null,ar=rr(ir,or)){return nr(ar,or)},async translate(ir){}};_e.NullL10n=sr},(er,_e,tr)=>{Object.defineProperty(_e,"__esModule",{value:!0}),_e.XfaLayer=void 0;var rr=tr(25);class nr{static setupStorage(ir,or,ar,lr,cr){const Ar=lr.getValue(or,{value:null});switch(ar.name){case"textarea":if(Ar.value!==null&&(ir.textContent=Ar.value),cr==="print")break;ir.addEventListener("input",ur=>{lr.setValue(or,{value:ur.target.value})});break;case"input":if(ar.attributes.type==="radio"||ar.attributes.type==="checkbox"){if(Ar.value===ar.attributes.xfaOn?ir.setAttribute("checked",!0):Ar.value===ar.attributes.xfaOff&&ir.removeAttribute("checked"),cr==="print")break;ir.addEventListener("change",ur=>{lr.setValue(or,{value:ur.target.checked?ur.target.getAttribute("xfaOn"):ur.target.getAttribute("xfaOff")})})}else{if(Ar.value!==null&&ir.setAttribute("value",Ar.value),cr==="print")break;ir.addEventListener("input",ur=>{lr.setValue(or,{value:ur.target.value})})}break;case"select":if(Ar.value!==null){ir.setAttribute("value",Ar.value);for(const ur of ar.children)ur.attributes.value===Ar.value?ur.attributes.selected=!0:ur.attributes.hasOwnProperty("selected")&&delete ur.attributes.selected}ir.addEventListener("input",ur=>{const dr=ur.target.options,mr=dr.selectedIndex===-1?"":dr[dr.selectedIndex].value;lr.setValue(or,{value:mr})});break}}static setAttributes({html:ir,element:or,storage:ar=null,intent:lr,linkService:cr}){const{attributes:Ar}=or,ur=ir instanceof HTMLAnchorElement;Ar.type==="radio"&&(Ar.name=`${Ar.name}-${lr}`);for(const[dr,mr]of Object.entries(Ar))if(mr!=null)switch(dr){case"class":mr.length&&ir.setAttribute(dr,mr.join(" "));break;case"dataId":break;case"id":ir.setAttribute("data-element-id",mr);break;case"style":Object.assign(ir.style,mr);break;case"textContent":ir.textContent=mr;break;default:(!ur||dr!=="href"&&dr!=="newWindow")&&ir.setAttribute(dr,mr)}ur&&cr.addLinkAttributes(ir,Ar.href,Ar.newWindow),ar&&Ar.dataId&&this.setupStorage(ir,Ar.dataId,or,ar)}static render(ir){var pr;const or=ir.annotationStorage,ar=ir.linkService,lr=ir.xfaHtml,cr=ir.intent||"display",Ar=document.createElement(lr.name);lr.attributes&&this.setAttributes({html:Ar,element:lr,intent:cr,linkService:ar});const ur=[[lr,-1,Ar]],dr=ir.div;if(dr.append(Ar),ir.viewport){const yr=`matrix(${ir.viewport.transform.join(",")})`;dr.style.transform=yr}cr!=="richText"&&dr.setAttribute("class","xfaLayer xfaFont");const mr=[];for(;ur.length>0;){const[yr,hr,gr]=ur.at(-1);if(hr+1===yr.children.length){ur.pop();continue}const Cr=yr.children[++ur.at(-1)[1]];if(Cr===null)continue;const{name:Tr}=Cr;if(Tr==="#text"){const Nr=document.createTextNode(Cr.value);mr.push(Nr),gr.append(Nr);continue}const Sr=(pr=Cr==null?void 0:Cr.attributes)!=null&&pr.xmlns?document.createElementNS(Cr.attributes.xmlns,Tr):document.createElement(Tr);if(gr.append(Sr),Cr.attributes&&this.setAttributes({html:Sr,element:Cr,storage:or,intent:cr,linkService:ar}),Cr.children&&Cr.children.length>0)ur.push([Cr,-1,Sr]);else if(Cr.value){const Nr=document.createTextNode(Cr.value);rr.XfaText.shouldBuildText(Tr)&&mr.push(Nr),Sr.append(Nr)}}for(const yr of dr.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))yr.setAttribute("readOnly",!0);return{textDivs:mr}}static update(ir){const or=`matrix(${ir.viewport.transform.join(",")})`;ir.div.style.transform=or,ir.div.hidden=!1}}_e.XfaLayer=nr},(er,_e,tr)=>{var lr,cr,Ar,ur,dr,mr,pr,yr,hr,gr,Cr,Tr,Sr,Nr,_r,hx,fx,px,mx,n0,gx,s0,xx,yx,vx,Ex,_x,dA,i0,am,lm,Wu,o0,cm,Gr,wx,a0,bx,Cx,l0,Am,qu;Object.defineProperty(_e,"__esModule",{value:!0}),_e.InkEditor=void 0;var rr=tr(1),nr=tr(4),sr=tr(29),ir=tr(6),or=tr(5);const Cn=class Cn extends nr.AnnotationEditor{constructor(Zr){super({...Zr,name:"inkEditor"});Vn(this,_r);Vn(this,lr,0);Vn(this,cr,0);Vn(this,Ar,this.canvasPointermove.bind(this));Vn(this,ur,this.canvasPointerleave.bind(this));Vn(this,dr,this.canvasPointerup.bind(this));Vn(this,mr,this.canvasPointerdown.bind(this));Vn(this,pr,new Path2D);Vn(this,yr,!1);Vn(this,hr,!1);Vn(this,gr,!1);Vn(this,Cr,null);Vn(this,Tr,0);Vn(this,Sr,0);Vn(this,Nr,null);this.color=Zr.color||null,this.thickness=Zr.thickness||null,this.opacity=Zr.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Zr){nr.AnnotationEditor.initialize(Zr,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Zr,hn){switch(Zr){case rr.AnnotationEditorParamsType.INK_THICKNESS:Cn._defaultThickness=hn;break;case rr.AnnotationEditorParamsType.INK_COLOR:Cn._defaultColor=hn;break;case rr.AnnotationEditorParamsType.INK_OPACITY:Cn._defaultOpacity=hn/100;break}}updateParams(Zr,hn){switch(Zr){case rr.AnnotationEditorParamsType.INK_THICKNESS:Un(this,_r,hx).call(this,hn);break;case rr.AnnotationEditorParamsType.INK_COLOR:Un(this,_r,fx).call(this,hn);break;case rr.AnnotationEditorParamsType.INK_OPACITY:Un(this,_r,px).call(this,hn);break}}static get defaultPropertiesToUpdate(){return[[rr.AnnotationEditorParamsType.INK_THICKNESS,Cn._defaultThickness],[rr.AnnotationEditorParamsType.INK_COLOR,Cn._defaultColor||nr.AnnotationEditor._defaultLineColor],[rr.AnnotationEditorParamsType.INK_OPACITY,Math.round(Cn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[rr.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Cn._defaultThickness],[rr.AnnotationEditorParamsType.INK_COLOR,this.color||Cn._defaultColor||nr.AnnotationEditor._defaultLineColor],[rr.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Cn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Un(this,_r,am).call(this),Un(this,_r,lm).call(this)),this.isAttachedToDOM||(this.parent.add(this),Un(this,_r,Wu).call(this)),Un(this,_r,qu).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,kr(this,Cr).disconnect(),On(this,Cr,null),super.remove())}setParent(Zr){!this.parent&&Zr?this._uiManager.removeShouldRescale(this):this.parent&&Zr===null&&this._uiManager.addShouldRescale(this),super.setParent(Zr)}onScaleChanging(){const[Zr,hn]=this.parentDimensions,bn=this.width*Zr,In=this.height*hn;this.setDimensions(bn,In)}enableEditMode(){kr(this,yr)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",kr(this,mr)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",kr(this,mr)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){kr(this,yr)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),On(this,yr,!0),this.div.classList.add("disabled"),Un(this,_r,qu).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Zr){this._focusEventsAllowed&&(super.focusin(Zr),this.enableEditMode())}canvasPointerdown(Zr){Zr.button!==0||!this.isInEditMode()||kr(this,yr)||(this.setInForeground(),Zr.preventDefault(),Zr.type!=="mouse"&&this.div.focus(),Un(this,_r,gx).call(this,Zr.offsetX,Zr.offsetY))}canvasPointermove(Zr){Zr.preventDefault(),Un(this,_r,s0).call(this,Zr.offsetX,Zr.offsetY)}canvasPointerup(Zr){Zr.preventDefault(),Un(this,_r,i0).call(this,Zr)}canvasPointerleave(Zr){Un(this,_r,i0).call(this,Zr)}get isResizable(){return!this.isEmpty()&&kr(this,yr)}render(){if(this.div)return this.div;let Zr,hn;this.width&&(Zr=this.x,hn=this.y),super.render(),nr.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(qn=>{var Nn;return(Nn=this.div)==null?void 0:Nn.setAttribute("aria-label",qn)});const[bn,In,jn,zn]=Un(this,_r,mx).call(this);if(this.setAt(bn,In,0,0),this.setDims(jn,zn),Un(this,_r,am).call(this),this.width){const[qn,Nn]=this.parentDimensions;this.setAspectRatio(this.width*qn,this.height*Nn),this.setAt(Zr*qn,hn*Nn,this.width*qn,this.height*Nn),On(this,gr,!0),Un(this,_r,Wu).call(this),this.setDims(this.width*qn,this.height*Nn),Un(this,_r,dA).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Un(this,_r,lm).call(this),this.div}setDimensions(Zr,hn){const bn=Math.round(Zr),In=Math.round(hn);if(kr(this,Tr)===bn&&kr(this,Sr)===In)return;On(this,Tr,bn),On(this,Sr,In),this.canvas.style.visibility="hidden";const[jn,zn]=this.parentDimensions;this.width=Zr/jn,this.height=hn/zn,this.fixAndSetPosition(),kr(this,yr)&&Un(this,_r,o0).call(this,Zr,hn),Un(this,_r,Wu).call(this),Un(this,_r,dA).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Zr,hn,bn){var Ts,Fs,Vs;if(Zr instanceof sr.InkAnnotationElement)return null;const In=super.deserialize(Zr,hn,bn);In.thickness=Zr.thickness,In.color=rr.Util.makeHexColor(...Zr.color),In.opacity=Zr.opacity;const[jn,zn]=In.pageDimensions,qn=In.width*jn,Nn=In.height*zn,ns=In.parentScale,rs=Zr.thickness/2;On(In,yr,!0),On(In,Tr,Math.round(qn)),On(In,Sr,Math.round(Nn));const{paths:Is,rect:ps,rotation:Ps}=Zr;for(let{bezier:ts}of Is){ts=Un(Ts=Cn,Gr,bx).call(Ts,ts,ps,Ps);const Mn=[];In.paths.push(Mn);let Gn=ns*(ts[0]-rs),os=ns*(ts[1]-rs);for(let bs=2,Rn=ts.length;bs<Rn;bs+=6){const es=ns*(ts[bs]-rs),ds=ns*(ts[bs+1]-rs),fs=ns*(ts[bs+2]-rs),vs=ns*(ts[bs+3]-rs),Ss=ns*(ts[bs+4]-rs),wn=ns*(ts[bs+5]-rs);Mn.push([[Gn,os],[es,ds],[fs,vs],[Ss,wn]]),Gn=Ss,os=wn}const js=Un(this,Gr,wx).call(this,Mn);In.bezierPath2D.push(js)}const ls=Un(Fs=In,_r,l0).call(Fs);return On(In,cr,Math.max(nr.AnnotationEditor.MIN_SIZE,ls[2]-ls[0])),On(In,lr,Math.max(nr.AnnotationEditor.MIN_SIZE,ls[3]-ls[1])),Un(Vs=In,_r,o0).call(Vs,qn,Nn),In}serialize(){if(this.isEmpty())return null;const Zr=this.getRect(0,0),hn=nr.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:rr.AnnotationEditorType.INK,color:hn,thickness:this.thickness,opacity:this.opacity,paths:Un(this,_r,Cx).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Zr),pageIndex:this.pageIndex,rect:Zr,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};lr=new WeakMap,cr=new WeakMap,Ar=new WeakMap,ur=new WeakMap,dr=new WeakMap,mr=new WeakMap,pr=new WeakMap,yr=new WeakMap,hr=new WeakMap,gr=new WeakMap,Cr=new WeakMap,Tr=new WeakMap,Sr=new WeakMap,Nr=new WeakMap,_r=new WeakSet,hx=function(Zr){const hn=this.thickness;this.addCommands({cmd:()=>{this.thickness=Zr,Un(this,_r,qu).call(this)},undo:()=>{this.thickness=hn,Un(this,_r,qu).call(this)},mustExec:!0,type:rr.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},fx=function(Zr){const hn=this.color;this.addCommands({cmd:()=>{this.color=Zr,Un(this,_r,dA).call(this)},undo:()=>{this.color=hn,Un(this,_r,dA).call(this)},mustExec:!0,type:rr.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},px=function(Zr){Zr/=100;const hn=this.opacity;this.addCommands({cmd:()=>{this.opacity=Zr,Un(this,_r,dA).call(this)},undo:()=>{this.opacity=hn,Un(this,_r,dA).call(this)},mustExec:!0,type:rr.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},mx=function(){const{parentRotation:Zr,parentDimensions:[hn,bn]}=this;switch(Zr){case 90:return[0,bn,bn,hn];case 180:return[hn,bn,hn,bn];case 270:return[hn,0,bn,hn];default:return[0,0,hn,bn]}},n0=function(){const{ctx:Zr,color:hn,opacity:bn,thickness:In,parentScale:jn,scaleFactor:zn}=this;Zr.lineWidth=In*jn/zn,Zr.lineCap="round",Zr.lineJoin="round",Zr.miterLimit=10,Zr.strokeStyle=`${hn}${(0,or.opacityToHex)(bn)}`},gx=function(Zr,hn){this.canvas.addEventListener("contextmenu",ir.noContextMenu),this.canvas.addEventListener("pointerleave",kr(this,ur)),this.canvas.addEventListener("pointermove",kr(this,Ar)),this.canvas.addEventListener("pointerup",kr(this,dr)),this.canvas.removeEventListener("pointerdown",kr(this,mr)),this.isEditing=!0,kr(this,gr)||(On(this,gr,!0),Un(this,_r,Wu).call(this),this.thickness||(this.thickness=Cn._defaultThickness),this.color||(this.color=Cn._defaultColor||nr.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Cn._defaultOpacity)),this.currentPath.push([Zr,hn]),On(this,hr,!1),Un(this,_r,n0).call(this),On(this,Nr,()=>{Un(this,_r,vx).call(this),kr(this,Nr)&&window.requestAnimationFrame(kr(this,Nr))}),window.requestAnimationFrame(kr(this,Nr))},s0=function(Zr,hn){const[bn,In]=this.currentPath.at(-1);if(this.currentPath.length>1&&Zr===bn&&hn===In)return;const jn=this.currentPath;let zn=kr(this,pr);if(jn.push([Zr,hn]),On(this,hr,!0),jn.length<=2){zn.moveTo(...jn[0]),zn.lineTo(Zr,hn);return}jn.length===3&&(On(this,pr,zn=new Path2D),zn.moveTo(...jn[0])),Un(this,_r,Ex).call(this,zn,...jn.at(-3),...jn.at(-2),Zr,hn)},xx=function(){if(this.currentPath.length===0)return;const Zr=this.currentPath.at(-1);kr(this,pr).lineTo(...Zr)},yx=function(Zr,hn){On(this,Nr,null),Zr=Math.min(Math.max(Zr,0),this.canvas.width),hn=Math.min(Math.max(hn,0),this.canvas.height),Un(this,_r,s0).call(this,Zr,hn),Un(this,_r,xx).call(this);let bn;if(this.currentPath.length!==1)bn=Un(this,_r,_x).call(this);else{const Nn=[Zr,hn];bn=[[Nn,Nn.slice(),Nn.slice(),Nn]]}const In=kr(this,pr),jn=this.currentPath;this.currentPath=[],On(this,pr,new Path2D);const zn=()=>{this.allRawPaths.push(jn),this.paths.push(bn),this.bezierPath2D.push(In),this.rebuild()},qn=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Un(this,_r,am).call(this),Un(this,_r,lm).call(this)),Un(this,_r,qu).call(this))};this.addCommands({cmd:zn,undo:qn,mustExec:!0})},vx=function(){if(!kr(this,hr))return;On(this,hr,!1);const Zr=Math.ceil(this.thickness*this.parentScale),hn=this.currentPath.slice(-3),bn=hn.map(zn=>zn[0]),In=hn.map(zn=>zn[1]);Math.min(...bn)-Zr,Math.max(...bn)+Zr,Math.min(...In)-Zr,Math.max(...In)+Zr;const{ctx:jn}=this;jn.save(),jn.clearRect(0,0,this.canvas.width,this.canvas.height);for(const zn of this.bezierPath2D)jn.stroke(zn);jn.stroke(kr(this,pr)),jn.restore()},Ex=function(Zr,hn,bn,In,jn,zn,qn){const Nn=(hn+In)/2,ns=(bn+jn)/2,rs=(In+zn)/2,Is=(jn+qn)/2;Zr.bezierCurveTo(Nn+2*(In-Nn)/3,ns+2*(jn-ns)/3,rs+2*(In-rs)/3,Is+2*(jn-Is)/3,rs,Is)},_x=function(){const Zr=this.currentPath;if(Zr.length<=2)return[[Zr[0],Zr[0],Zr.at(-1),Zr.at(-1)]];const hn=[];let bn,[In,jn]=Zr[0];for(bn=1;bn<Zr.length-2;bn++){const[ps,Ps]=Zr[bn],[ls,Ts]=Zr[bn+1],Fs=(ps+ls)/2,Vs=(Ps+Ts)/2,ts=[In+2*(ps-In)/3,jn+2*(Ps-jn)/3],Mn=[Fs+2*(ps-Fs)/3,Vs+2*(Ps-Vs)/3];hn.push([[In,jn],ts,Mn,[Fs,Vs]]),[In,jn]=[Fs,Vs]}const[zn,qn]=Zr[bn],[Nn,ns]=Zr[bn+1],rs=[In+2*(zn-In)/3,jn+2*(qn-jn)/3],Is=[Nn+2*(zn-Nn)/3,ns+2*(qn-ns)/3];return hn.push([[In,jn],rs,Is,[Nn,ns]]),hn},dA=function(){if(this.isEmpty()){Un(this,_r,cm).call(this);return}Un(this,_r,n0).call(this);const{canvas:Zr,ctx:hn}=this;hn.setTransform(1,0,0,1,0,0),hn.clearRect(0,0,Zr.width,Zr.height),Un(this,_r,cm).call(this);for(const bn of this.bezierPath2D)hn.stroke(bn)},i0=function(Zr){this.canvas.removeEventListener("pointerleave",kr(this,ur)),this.canvas.removeEventListener("pointermove",kr(this,Ar)),this.canvas.removeEventListener("pointerup",kr(this,dr)),this.canvas.addEventListener("pointerdown",kr(this,mr)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",ir.noContextMenu)},10),Un(this,_r,yx).call(this,Zr.offsetX,Zr.offsetY),this.addToAnnotationStorage(),this.setInBackground()},am=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",nr.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Zr=>{var hn;return(hn=this.canvas)==null?void 0:hn.setAttribute("aria-label",Zr)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},lm=function(){On(this,Cr,new ResizeObserver(Zr=>{const hn=Zr[0].contentRect;hn.width&&hn.height&&this.setDimensions(hn.width,hn.height)})),kr(this,Cr).observe(this.div)},Wu=function(){if(!kr(this,gr))return;const[Zr,hn]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Zr),this.canvas.height=Math.ceil(this.height*hn),Un(this,_r,cm).call(this)},o0=function(Zr,hn){const bn=Un(this,_r,Am).call(this),In=(Zr-bn)/kr(this,cr),jn=(hn-bn)/kr(this,lr);this.scaleFactor=Math.min(In,jn)},cm=function(){const Zr=Un(this,_r,Am).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Zr,this.translationY*this.scaleFactor+Zr)},Gr=new WeakSet,wx=function(Zr){const hn=new Path2D;for(let bn=0,In=Zr.length;bn<In;bn++){const[jn,zn,qn,Nn]=Zr[bn];bn===0&&hn.moveTo(...jn),hn.bezierCurveTo(zn[0],zn[1],qn[0],qn[1],Nn[0],Nn[1])}return hn},a0=function(Zr,hn,bn){const[In,jn,zn,qn]=hn;switch(bn){case 0:for(let Nn=0,ns=Zr.length;Nn<ns;Nn+=2)Zr[Nn]+=In,Zr[Nn+1]=qn-Zr[Nn+1];break;case 90:for(let Nn=0,ns=Zr.length;Nn<ns;Nn+=2){const rs=Zr[Nn];Zr[Nn]=Zr[Nn+1]+In,Zr[Nn+1]=rs+jn}break;case 180:for(let Nn=0,ns=Zr.length;Nn<ns;Nn+=2)Zr[Nn]=zn-Zr[Nn],Zr[Nn+1]+=jn;break;case 270:for(let Nn=0,ns=Zr.length;Nn<ns;Nn+=2){const rs=Zr[Nn];Zr[Nn]=zn-Zr[Nn+1],Zr[Nn+1]=qn-rs}break;default:throw new Error("Invalid rotation")}return Zr},bx=function(Zr,hn,bn){const[In,jn,zn,qn]=hn;switch(bn){case 0:for(let Nn=0,ns=Zr.length;Nn<ns;Nn+=2)Zr[Nn]-=In,Zr[Nn+1]=qn-Zr[Nn+1];break;case 90:for(let Nn=0,ns=Zr.length;Nn<ns;Nn+=2){const rs=Zr[Nn];Zr[Nn]=Zr[Nn+1]-jn,Zr[Nn+1]=rs-In}break;case 180:for(let Nn=0,ns=Zr.length;Nn<ns;Nn+=2)Zr[Nn]=zn-Zr[Nn],Zr[Nn+1]-=jn;break;case 270:for(let Nn=0,ns=Zr.length;Nn<ns;Nn+=2){const rs=Zr[Nn];Zr[Nn]=qn-Zr[Nn+1],Zr[Nn+1]=zn-rs}break;default:throw new Error("Invalid rotation")}return Zr},Cx=function(Zr,hn,bn,In){var ns,rs;const jn=[],zn=this.thickness/2,qn=Zr*hn+zn,Nn=Zr*bn+zn;for(const Is of this.paths){const ps=[],Ps=[];for(let ls=0,Ts=Is.length;ls<Ts;ls++){const[Fs,Vs,ts,Mn]=Is[ls],Gn=Zr*Fs[0]+qn,os=Zr*Fs[1]+Nn,js=Zr*Vs[0]+qn,bs=Zr*Vs[1]+Nn,Rn=Zr*ts[0]+qn,es=Zr*ts[1]+Nn,ds=Zr*Mn[0]+qn,fs=Zr*Mn[1]+Nn;ls===0&&(ps.push(Gn,os),Ps.push(Gn,os)),ps.push(js,bs,Rn,es,ds,fs),Ps.push(js,bs),ls===Ts-1&&Ps.push(ds,fs)}jn.push({bezier:Un(ns=Cn,Gr,a0).call(ns,ps,In,this.rotation),points:Un(rs=Cn,Gr,a0).call(rs,Ps,In,this.rotation)})}return jn},l0=function(){let Zr=1/0,hn=-1/0,bn=1/0,In=-1/0;for(const jn of this.paths)for(const[zn,qn,Nn,ns]of jn){const rs=rr.Util.bezierBoundingBox(...zn,...qn,...Nn,...ns);Zr=Math.min(Zr,rs[0]),bn=Math.min(bn,rs[1]),hn=Math.max(hn,rs[2]),In=Math.max(In,rs[3])}return[Zr,bn,hn,In]},Am=function(){return kr(this,yr)?Math.ceil(this.thickness*this.parentScale):0},qu=function(Zr=!1){if(this.isEmpty())return;if(!kr(this,yr)){Un(this,_r,dA).call(this);return}const hn=Un(this,_r,l0).call(this),bn=Un(this,_r,Am).call(this);On(this,cr,Math.max(nr.AnnotationEditor.MIN_SIZE,hn[2]-hn[0])),On(this,lr,Math.max(nr.AnnotationEditor.MIN_SIZE,hn[3]-hn[1]));const In=Math.ceil(bn+kr(this,cr)*this.scaleFactor),jn=Math.ceil(bn+kr(this,lr)*this.scaleFactor),[zn,qn]=this.parentDimensions;this.width=In/zn,this.height=jn/qn,this.setAspectRatio(In,jn);const Nn=this.translationX,ns=this.translationY;this.translationX=-hn[0],this.translationY=-hn[1],Un(this,_r,Wu).call(this),Un(this,_r,dA).call(this),On(this,Tr,In),On(this,Sr,jn),this.setDims(In,jn);const rs=Zr?bn/this.scaleFactor/2:0;this.translate(Nn-this.translationX-rs,ns-this.translationY-rs)},Vn(Cn,Gr),oo(Cn,"_defaultColor",null),oo(Cn,"_defaultOpacity",1),oo(Cn,"_defaultThickness",1),oo(Cn,"_type","ink");let ar=Cn;_e.InkEditor=ar},(er,_e,tr)=>{var ar,lr,cr,Ar,ur,dr,mr,pr,yr,hr,gr,Cp,Rp,um,c0,Rx,Sx,A0,dm,Tx;Object.defineProperty(_e,"__esModule",{value:!0}),_e.StampEditor=void 0;var rr=tr(1),nr=tr(4),sr=tr(6),ir=tr(29);const Rr=class Rr extends nr.AnnotationEditor{constructor(Ur){super({...Ur,name:"stampEditor"});Vn(this,gr);Vn(this,ar,null);Vn(this,lr,null);Vn(this,cr,null);Vn(this,Ar,null);Vn(this,ur,null);Vn(this,dr,null);Vn(this,mr,null);Vn(this,pr,null);Vn(this,yr,!1);Vn(this,hr,!1);On(this,Ar,Ur.bitmapUrl),On(this,ur,Ur.bitmapFile)}static initialize(Ur){nr.AnnotationEditor.initialize(Ur)}static get supportedTypes(){const Ur=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,rr.shadow)(this,"supportedTypes",Ur.map(Vr=>`image/${Vr}`))}static get supportedTypesStr(){return(0,rr.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Ur){return this.supportedTypes.includes(Ur)}static paste(Ur,Vr){Vr.pasteEditor(rr.AnnotationEditorType.STAMP,{bitmapFile:Ur.getAsFile()})}remove(){var Ur,Vr;kr(this,lr)&&(On(this,ar,null),this._uiManager.imageManager.deleteId(kr(this,lr)),(Ur=kr(this,dr))==null||Ur.remove(),On(this,dr,null),(Vr=kr(this,mr))==null||Vr.disconnect(),On(this,mr,null)),super.remove()}rebuild(){if(!this.parent){kr(this,lr)&&Un(this,gr,um).call(this);return}super.rebuild(),this.div!==null&&(kr(this,lr)&&Un(this,gr,um).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(kr(this,cr)||kr(this,ar)||kr(this,Ar)||kr(this,ur))}get isResizable(){return!0}render(){if(this.div)return this.div;let Ur,Vr;if(this.width&&(Ur=this.x,Vr=this.y),super.render(),this.div.hidden=!0,kr(this,ar)?Un(this,gr,c0).call(this):Un(this,gr,um).call(this),this.width){const[Wr,Hr]=this.parentDimensions;this.setAt(Ur*Wr,Vr*Hr,this.width*Wr,this.height*Hr)}return this.div}static deserialize(Ur,Vr,Wr){if(Ur instanceof ir.StampAnnotationElement)return null;const Hr=super.deserialize(Ur,Vr,Wr),{rect:$r,bitmapUrl:Xr,bitmapId:pn,isSvg:jr,accessibilityData:Br}=Ur;pn&&Wr.imageManager.isValidId(pn)?On(Hr,lr,pn):On(Hr,Ar,Xr),On(Hr,yr,jr);const[Lr,Or]=Hr.pageDimensions;return Hr.width=($r[2]-$r[0])/Lr,Hr.height=($r[3]-$r[1])/Or,Br&&(Hr.altTextData=Br),Hr}serialize(Ur=!1,Vr=null){if(this.isEmpty())return null;const Wr={annotationType:rr.AnnotationEditorType.STAMP,bitmapId:kr(this,lr),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:kr(this,yr),structTreeParentId:this._structTreeParentId};if(Ur)return Wr.bitmapUrl=Un(this,gr,dm).call(this,!0),Wr.accessibilityData=this.altTextData,Wr;const{decorative:Hr,altText:$r}=this.altTextData;if(!Hr&&$r&&(Wr.accessibilityData={type:"Figure",alt:$r}),Vr===null)return Wr;Vr.stamps||(Vr.stamps=new Map);const Xr=kr(this,yr)?(Wr.rect[2]-Wr.rect[0])*(Wr.rect[3]-Wr.rect[1]):null;if(!Vr.stamps.has(kr(this,lr)))Vr.stamps.set(kr(this,lr),{area:Xr,serialized:Wr}),Wr.bitmap=Un(this,gr,dm).call(this,!1);else if(kr(this,yr)){const pn=Vr.stamps.get(kr(this,lr));Xr>pn.area&&(pn.area=Xr,pn.serialized.bitmap.close(),pn.serialized.bitmap=Un(this,gr,dm).call(this,!1))}return Wr}};ar=new WeakMap,lr=new WeakMap,cr=new WeakMap,Ar=new WeakMap,ur=new WeakMap,dr=new WeakMap,mr=new WeakMap,pr=new WeakMap,yr=new WeakMap,hr=new WeakMap,gr=new WeakSet,Cp=function(Ur,Vr=!1){if(!Ur){this.remove();return}On(this,ar,Ur.bitmap),Vr||(On(this,lr,Ur.id),On(this,yr,Ur.isSvg)),Un(this,gr,c0).call(this)},Rp=function(){On(this,cr,null),this._uiManager.enableWaiting(!1),kr(this,dr)&&this.div.focus()},um=function(){if(kr(this,lr)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(kr(this,lr)).then(Vr=>Un(this,gr,Cp).call(this,Vr,!0)).finally(()=>Un(this,gr,Rp).call(this));return}if(kr(this,Ar)){const Vr=kr(this,Ar);On(this,Ar,null),this._uiManager.enableWaiting(!0),On(this,cr,this._uiManager.imageManager.getFromUrl(Vr).then(Wr=>Un(this,gr,Cp).call(this,Wr)).finally(()=>Un(this,gr,Rp).call(this)));return}if(kr(this,ur)){const Vr=kr(this,ur);On(this,ur,null),this._uiManager.enableWaiting(!0),On(this,cr,this._uiManager.imageManager.getFromFile(Vr).then(Wr=>Un(this,gr,Cp).call(this,Wr)).finally(()=>Un(this,gr,Rp).call(this)));return}const Ur=document.createElement("input");Ur.type="file",Ur.accept=Rr.supportedTypesStr,On(this,cr,new Promise(Vr=>{Ur.addEventListener("change",async()=>{if(!Ur.files||Ur.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Wr=await this._uiManager.imageManager.getFromFile(Ur.files[0]);Un(this,gr,Cp).call(this,Wr)}Vr()}),Ur.addEventListener("cancel",()=>{this.remove(),Vr()})}).finally(()=>Un(this,gr,Rp).call(this))),Ur.click()},c0=function(){const{div:Ur}=this;let{width:Vr,height:Wr}=kr(this,ar);const[Hr,$r]=this.pageDimensions,Xr=.75;if(this.width)Vr=this.width*Hr,Wr=this.height*$r;else if(Vr>Xr*Hr||Wr>Xr*$r){const Lr=Math.min(Xr*Hr/Vr,Xr*$r/Wr);Vr*=Lr,Wr*=Lr}const[pn,jr]=this.parentDimensions;this.setDims(Vr*pn/Hr,Wr*jr/$r),this._uiManager.enableWaiting(!1);const Br=On(this,dr,document.createElement("canvas"));Ur.append(Br),Ur.hidden=!1,Un(this,gr,A0).call(this,Vr,Wr),Un(this,gr,Tx).call(this),kr(this,hr)||(this.parent.addUndoableEditor(this),On(this,hr,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Rx=function(Ur,Vr){var Xr;const[Wr,Hr]=this.parentDimensions;this.width=Ur/Wr,this.height=Vr/Hr,this.setDims(Ur,Vr),(Xr=this._initialOptions)!=null&&Xr.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,kr(this,pr)!==null&&clearTimeout(kr(this,pr)),On(this,pr,setTimeout(()=>{On(this,pr,null),Un(this,gr,A0).call(this,Ur,Vr)},200))},Sx=function(Ur,Vr){const{width:Wr,height:Hr}=kr(this,ar);let $r=Wr,Xr=Hr,pn=kr(this,ar);for(;$r>2*Ur||Xr>2*Vr;){const jr=$r,Br=Xr;$r>2*Ur&&($r=$r>=16384?Math.floor($r/2)-1:Math.ceil($r/2)),Xr>2*Vr&&(Xr=Xr>=16384?Math.floor(Xr/2)-1:Math.ceil(Xr/2));const Lr=new OffscreenCanvas($r,Xr);Lr.getContext("2d").drawImage(pn,0,0,jr,Br,0,0,$r,Xr),pn=Lr.transferToImageBitmap()}return pn},A0=function(Ur,Vr){Ur=Math.ceil(Ur),Vr=Math.ceil(Vr);const Wr=kr(this,dr);if(!Wr||Wr.width===Ur&&Wr.height===Vr)return;Wr.width=Ur,Wr.height=Vr;const Hr=kr(this,yr)?kr(this,ar):Un(this,gr,Sx).call(this,Ur,Vr),$r=Wr.getContext("2d");$r.filter=this._uiManager.hcmFilter,$r.drawImage(Hr,0,0,Hr.width,Hr.height,0,0,Ur,Vr)},dm=function(Ur){if(Ur){if(kr(this,yr)){const Hr=this._uiManager.imageManager.getSvgUrl(kr(this,lr));if(Hr)return Hr}const Vr=document.createElement("canvas");return{width:Vr.width,height:Vr.height}=kr(this,ar),Vr.getContext("2d").drawImage(kr(this,ar),0,0),Vr.toDataURL()}if(kr(this,yr)){const[Vr,Wr]=this.pageDimensions,Hr=Math.round(this.width*Vr*sr.PixelsPerInch.PDF_TO_CSS_UNITS),$r=Math.round(this.height*Wr*sr.PixelsPerInch.PDF_TO_CSS_UNITS),Xr=new OffscreenCanvas(Hr,$r);return Xr.getContext("2d").drawImage(kr(this,ar),0,0,kr(this,ar).width,kr(this,ar).height,0,0,Hr,$r),Xr.transferToImageBitmap()}return structuredClone(kr(this,ar))},Tx=function(){On(this,mr,new ResizeObserver(Ur=>{const Vr=Ur[0].contentRect;Vr.width&&Vr.height&&Un(this,gr,Rx).call(this,Vr.width,Vr.height)})),kr(this,mr).observe(this.div)},oo(Rr,"_type","stamp");let or=Rr;_e.StampEditor=or}],__webpack_module_cache__={};function __w_pdfjs_require__(er){var _e=__webpack_module_cache__[er];if(_e!==void 0)return _e.exports;var tr=__webpack_module_cache__[er]={exports:{}};return __webpack_modules__[er](tr,tr.exports,__w_pdfjs_require__),tr.exports}var __webpack_exports__={};return(()=>{var er=__webpack_exports__;Object.defineProperty(er,"__esModule",{value:!0}),Object.defineProperty(er,"AbortException",{enumerable:!0,get:function(){return _e.AbortException}}),Object.defineProperty(er,"AnnotationEditorLayer",{enumerable:!0,get:function(){return sr.AnnotationEditorLayer}}),Object.defineProperty(er,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return _e.AnnotationEditorParamsType}}),Object.defineProperty(er,"AnnotationEditorType",{enumerable:!0,get:function(){return _e.AnnotationEditorType}}),Object.defineProperty(er,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return ir.AnnotationEditorUIManager}}),Object.defineProperty(er,"AnnotationLayer",{enumerable:!0,get:function(){return or.AnnotationLayer}}),Object.defineProperty(er,"AnnotationMode",{enumerable:!0,get:function(){return _e.AnnotationMode}}),Object.defineProperty(er,"CMapCompressionType",{enumerable:!0,get:function(){return _e.CMapCompressionType}}),Object.defineProperty(er,"DOMSVGFactory",{enumerable:!0,get:function(){return rr.DOMSVGFactory}}),Object.defineProperty(er,"FeatureTest",{enumerable:!0,get:function(){return _e.FeatureTest}}),Object.defineProperty(er,"GlobalWorkerOptions",{enumerable:!0,get:function(){return ar.GlobalWorkerOptions}}),Object.defineProperty(er,"ImageKind",{enumerable:!0,get:function(){return _e.ImageKind}}),Object.defineProperty(er,"InvalidPDFException",{enumerable:!0,get:function(){return _e.InvalidPDFException}}),Object.defineProperty(er,"MissingPDFException",{enumerable:!0,get:function(){return _e.MissingPDFException}}),Object.defineProperty(er,"OPS",{enumerable:!0,get:function(){return _e.OPS}}),Object.defineProperty(er,"PDFDataRangeTransport",{enumerable:!0,get:function(){return tr.PDFDataRangeTransport}}),Object.defineProperty(er,"PDFDateString",{enumerable:!0,get:function(){return rr.PDFDateString}}),Object.defineProperty(er,"PDFWorker",{enumerable:!0,get:function(){return tr.PDFWorker}}),Object.defineProperty(er,"PasswordResponses",{enumerable:!0,get:function(){return _e.PasswordResponses}}),Object.defineProperty(er,"PermissionFlag",{enumerable:!0,get:function(){return _e.PermissionFlag}}),Object.defineProperty(er,"PixelsPerInch",{enumerable:!0,get:function(){return rr.PixelsPerInch}}),Object.defineProperty(er,"PromiseCapability",{enumerable:!0,get:function(){return _e.PromiseCapability}}),Object.defineProperty(er,"RenderingCancelledException",{enumerable:!0,get:function(){return rr.RenderingCancelledException}}),Object.defineProperty(er,"SVGGraphics",{enumerable:!0,get:function(){return tr.SVGGraphics}}),Object.defineProperty(er,"UnexpectedResponseException",{enumerable:!0,get:function(){return _e.UnexpectedResponseException}}),Object.defineProperty(er,"Util",{enumerable:!0,get:function(){return _e.Util}}),Object.defineProperty(er,"VerbosityLevel",{enumerable:!0,get:function(){return _e.VerbosityLevel}}),Object.defineProperty(er,"XfaLayer",{enumerable:!0,get:function(){return lr.XfaLayer}}),Object.defineProperty(er,"build",{enumerable:!0,get:function(){return tr.build}}),Object.defineProperty(er,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return _e.createValidAbsoluteUrl}}),Object.defineProperty(er,"getDocument",{enumerable:!0,get:function(){return tr.getDocument}}),Object.defineProperty(er,"getFilenameFromUrl",{enumerable:!0,get:function(){return rr.getFilenameFromUrl}}),Object.defineProperty(er,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return rr.getPdfFilenameFromUrl}}),Object.defineProperty(er,"getXfaPageViewport",{enumerable:!0,get:function(){return rr.getXfaPageViewport}}),Object.defineProperty(er,"isDataScheme",{enumerable:!0,get:function(){return rr.isDataScheme}}),Object.defineProperty(er,"isPdfFile",{enumerable:!0,get:function(){return rr.isPdfFile}}),Object.defineProperty(er,"loadScript",{enumerable:!0,get:function(){return rr.loadScript}}),Object.defineProperty(er,"noContextMenu",{enumerable:!0,get:function(){return rr.noContextMenu}}),Object.defineProperty(er,"normalizeUnicode",{enumerable:!0,get:function(){return _e.normalizeUnicode}}),Object.defineProperty(er,"renderTextLayer",{enumerable:!0,get:function(){return nr.renderTextLayer}}),Object.defineProperty(er,"setLayerDimensions",{enumerable:!0,get:function(){return rr.setLayerDimensions}}),Object.defineProperty(er,"shadow",{enumerable:!0,get:function(){return _e.shadow}}),Object.defineProperty(er,"updateTextLayer",{enumerable:!0,get:function(){return nr.updateTextLayer}}),Object.defineProperty(er,"version",{enumerable:!0,get:function(){return tr.version}});var _e=__w_pdfjs_require__(1),tr=__w_pdfjs_require__(2),rr=__w_pdfjs_require__(6),nr=__w_pdfjs_require__(26),sr=__w_pdfjs_require__(27),ir=__w_pdfjs_require__(5),or=__w_pdfjs_require__(29),ar=__w_pdfjs_require__(14),lr=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;pdfExports.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";const findTotalPagesFromOcr=er=>{const _e=/==End of OCR for page (\d+)==/g;let tr=0;const rr=er.matchAll(_e);for(const nr of rr){const sr=parseInt(nr[1],10);sr>tr&&(tr=sr)}return tr},extractPageRangeFromOcr=(er,_e,tr)=>{const rr=[];for(let nr=_e;nr<=tr;nr++){const sr=`==Start of OCR for page ${nr}==`,ir=`==End of OCR for page ${nr}==`,or=er.indexOf(sr),ar=er.indexOf(ir);if(or!==-1&&ar!==-1){const lr=er.substring(or+sr.length,ar).trim();rr.push(lr)}}return rr.join(`

`)},extractTextFromPdfPage=async(er,_e)=>{try{const tr=await er.arrayBuffer();return(await(await(await pdfExports.getDocument(tr).promise).getPage(_e)).getTextContent()).items.map(ir=>ir.str).join(" ")}catch(tr){return console.error("Error extracting text from PDF page:",tr),""}},extractAllPdfText=async er=>{try{const _e=await er.arrayBuffer(),tr=await pdfExports.getDocument(_e).promise,rr=tr.numPages;let nr="";for(let sr=1;sr<=rr;sr++){const ar=(await(await tr.getPage(sr)).getTextContent()).items.map(lr=>lr.str).join(" ");nr+=`==Start of OCR for page ${sr}==
${ar}
==End of OCR for page ${sr}==

`}return nr}catch(_e){return console.error("Error extracting all PDF text:",_e),""}},parseQuestionPaperOcr=async er=>{try{const _e=splitIntoQuestionBlocks(er),tr=[];for(const nr of _e){const sr=parseQuestionBlock(nr);sr&&tr.push(sr)}console.log(`[Parser] Successfully parsed ${tr.length} questions from OCR text.`);const rr=validateQuestionData(tr);return console.log(`[Parser] After validation, ${rr.length} questions remain.`),rr}catch(_e){return console.error("[Parser] A critical error occurred during parsing:",_e),[]}};function splitIntoQuestionBlocks(er){const _e=/(?:\n|^)\s*(\d+)\s*[.)]/g,tr=[];let rr;const nr=[];for(;(rr=_e.exec(er))!==null;)nr.push(rr.index);if(nr.length===0)return console.warn("[Parser] No question start markers (e.g., '1.', '2.') found. The document format may be unsupported."),[];for(let sr=0;sr<nr.length;sr++){const ir=nr[sr],or=sr+1<nr.length?nr[sr+1]:er.length,ar=er.substring(ir,or).trim();ar.length>20&&tr.push(ar)}return console.log(`[Parser] Split OCR text into ${tr.length} potential question blocks.`),tr}function parseQuestionBlock(er){const _e=findOptions(er,/[A-D][.)]/g),tr=findOptions(er,/[-][.)]/g);if(_e.options.length<2)return null;const rr=_e.firstOptionIndex,nr=er.substring(0,rr).trim(),sr=extractQuestionText(nr,"english"),ir=extractQuestionText(nr,"tamil"),or=findCorrectAnswer(er);return!sr||_e.options.length<2||!or?null:{question:sr,options:_e.options,answer:or,type:"mcq",difficulty:"medium",tnpscGroup:"Group 1",explanation:"",tamilQuestion:ir||void 0,tamilOptions:tr.options.length>0?tr.options:void 0}}function findOptions(er,_e){const tr=[],rr=[];let nr=er.length,sr;for(;(sr=_e.exec(er))!==null;)rr.push(sr),sr.index<nr&&(nr=sr.index);for(let ir=0;ir<rr.length;ir++){const or=rr[ir],ar=ir+1<rr.length?rr[ir+1]:null,lr=ar?ar.index:er.length;let cr=er.substring(sr.index,lr).replace(or[0],"").replace(/[\n\r]/g," ").trim();cr=cr.replace(/[]/g,"").trim(),cr&&tr.push(cr)}return{options:tr,firstOptionIndex:nr}}function extractQuestionText(er,_e){const tr=/[a-zA-Z]/,rr=/[\u0B80-\u0BFF]/,sr=er.split(`
`).filter(ir=>{const or=_e==="english"?tr:rr,ar=_e==="english"?rr:tr;return or.test(ir)&&!ar.test(ir)}).join(" ").replace(/^\d+\s*[.)]/,"").trim();return sr.length>5?sr:null}function findCorrectAnswer(er){const _e=/\s*\(?([A-D])\)?\s*.*[]/,tr=er.split(`
`);for(const sr of tr){const ir=sr.match(_e);if(ir&&ir[1])return ir[1].toUpperCase()}const rr=/(?:Answer|Ans|)\s*[:]?\s*\(?([A-D])\)?/i,nr=er.match(rr);return nr&&nr[1]?nr[1].toUpperCase():null}const validateQuestionData=er=>er.filter(_e=>_e.question&&_e.question.length>=10&&_e.options&&_e.options.length>=2&&_e.answer&&["A","B","C","D"].includes(_e.answer)),GEMINI_API_KEY="AIzaSyDQcwO_13vP_dXB3OXBuTDvYfMcLXQIfkM",API_CONFIG={primaryModel:"gemini-2.5-flash",fallbackModels:["gemini-1.5-flash-001","gemini-pro-vision"],apiVersion:"v1beta",baseUrl:"https://generativelanguage.googleapis.com"},getApiUrl=er=>`${API_CONFIG.baseUrl}/${API_CONFIG.apiVersion}/models/${er}:generateContent?key=${GEMINI_API_KEY}`,analyzeTextContent=async(er,_e)=>{const rr=`
Analyze this text content for TNPSC (Tamil Nadu Public Service Commission) exam preparation.

${_e==="tamil"?"Please provide all responses in Tamil language. Use Tamil script for all content.":"Please provide all responses in English language."}

Content: ${er.substring(0,8e3)}

CRITICAL INSTRUCTIONS:
- Extract ONLY specific, factual, and concrete information directly from the content
- DO NOT include generic statements about importance or what needs to be studied
- Focus on actual facts: names, dates, events, definitions, processes, figures, laws, etc.
- **VERY CRITICAL: All content, especially 'description' and 'memoryTip', must be concise to avoid token overflow.**
- **Limit the total number of studyPoints to a maximum of 10.**

Please provide a comprehensive analysis in the following JSON format:
{
  "mainTopic": "Main topic of the content",
  "studyPoints": [
    {
      "title": "Key point title (Very Concise)",
      "description": "Detailed description (Max 3 concise sentences)",
      "importance": "high/medium/low",
      // FIX: Memory tip optimized for TNPSC review
      "memoryTip": "A single, highly useful, concise phrase or bulleted list of 2-3 critical keywords/facts from the point for rapid TNPSC review (e.g., '42 Amend-76, 51A, 10 duties')."
    }
  ],
  "summary": "Overall summary of the content (Max 3 concise sentences)",
  "tnpscRelevance": "How this content is relevant for TNPSC exams (concise)",
  "tnpscCategories": ["Category1", "Category2", ...],
  "difficulty": "easy/medium/hard"
}

Focus on:
- TNPSC Group 1, 2, 4 exam relevance
- Extracting specific facts, figures, names, dates, and definitions
- Make key points factual and specific from the actual content

MEMORY TIP GUIDELINES:
- **CRITICAL: The tip must synthesize the point into a very short, memorable TNPSC-relevant summary (keywords, dates, articles).**
`,nr=await fetch(getApiUrl(API_CONFIG.primaryModel),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:rr}]}],generationConfig:{temperature:.7,maxOutputTokens:4096,response_mime_type:"application/json"}})});if(!nr.ok){const ir=await nr.text();throw console.error("Gemini API Text Analysis error response:",ir),new Error(`Gemini API Text Analysis error (${nr.status}): ${ir.substring(0,200)}...`)}return await nr.json()},analyzeImage=async(er,_e="english")=>{const tr=await convertToBase64(er);try{const nr=`
Analyze this image for TNPSC (Tamil Nadu Public Service Commission) exam preparation.

${_e==="tamil"?"Please provide all responses in Tamil language. Use Tamil script for all content.":"Please provide all responses in English language."}

Content: (The image)

CRITICAL INSTRUCTIONS:
- Extract ONLY specific, factual, and concrete information directly from the content
- DO NOT include generic statements about importance or what needs to be studied
- Focus on actual facts: names, dates, events, definitions, processes, figures, laws, etc.
- Provide practical memory tips for each study point to help with retention
- **VERY CRITICAL: All content, especially 'description' and 'memoryTip', must be concise to avoid token overflow.**
- **Limit the total number of studyPoints to a maximum of 10.**

Please provide a comprehensive analysis in the following JSON format:
{
  "mainTopic": "Main topic of the content",
  "studyPoints": [
    {
      "title": "Key point title (Very Concise)",
      "description": "Detailed description (Max 3 concise sentences)",
      "importance": "high/medium/low",
      // FIX: Memory tip optimized for TNPSC review
      "memoryTip": "A single, highly useful, concise phrase or bulleted list of 2-3 critical keywords/facts from the point for rapid TNPSC review (e.g., '42 Amend-76, 51A, 10 duties')."
    }
  ],
  "summary": "Overall summary of the content (Max 3 concise sentences)",
  "tnpscRelevance": "How this content is relevant for TNPSC exams (concise)",
  "tnpscCategories": ["Category1", "Category2", ...],
  "difficulty": "easy/medium/hard"
}

Focus on:
- TNPSC Group 1, 2, 4 exam relevance
- Extracting specific facts, figures, names, dates, and definitions
- Make key points factual and specific from the actual content

MEMORY TIP GUIDELINES:
- **CRITICAL: The tip must synthesize the point into a very short, memorable TNPSC-relevant summary (keywords, dates, articles).**
`,sr=await fetch(getApiUrl(API_CONFIG.primaryModel),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:nr},{inlineData:{mime_type:er.type,data:tr.split(",")[1]}}]}],generationConfig:{temperature:.7,maxOutputTokens:4096,response_mime_type:"application/json"}})});if(!sr.ok){const ar=await sr.text();throw console.error("Gemini API error response (Direct Image Analysis):",ar),sr.status===404?new Error(`Model not found. The API model '${API_CONFIG.primaryModel}' is not available. Please check your API configuration or try updating the app.`):new Error(`Gemini API error (${sr.status}): ${ar.substring(0,200)}...`)}const ir=await sr.json();return processGeminiResponse(ir)}catch(rr){const nr=rr.message;if(nr.includes("MAX_TOKENS")||nr.includes("Output truncated or malformed")){console.warn("Direct image analysis failed with MAX_TOKENS or truncation. Falling back to OCR -> Analysis.");try{const sr=await extractRawTextFromImage(er);if(!sr.trim())throw new Error("Fallback failed: Could not extract any text from the image.");const ir=await analyzeTextContent(sr,_e);return processGeminiResponse(ir)}catch(sr){throw console.error("Error during OCR/Text Analysis Fallback:",sr),new Error(`Analysis failed after fallback: ${sr.message}`)}}throw console.error("Error analyzing image:",rr),rr}},processGeminiResponse=er=>{var ar,lr,cr;const _e=er.candidates;if(!_e||_e.length===0){const Ar=er.promptFeedback;let ur="No content or candidates received from Gemini API.";throw Ar&&(Ar.blockReason==="SAFETY"?ur=`Request blocked due to safety settings. Please check the image content. Safety Ratings: ${JSON.stringify(Ar.safetyRatings,null,2)}`:Ar.blockReason==="OTHER"&&(ur=`Request blocked due to policy reasons. Block Reason: ${Ar.blockReason}`)),console.error("Gemini API returned no candidates or was blocked:",er),new Error(ur)}const tr=_e[0],rr=(cr=(lr=(ar=tr.content)==null?void 0:ar.parts)==null?void 0:lr[0])==null?void 0:cr.text,nr=tr.finishReason;if(!rr){if(nr==="SAFETY"){const Ar=`Candidate blocked due to safety settings. Please modify the image or prompt. Safety Ratings: ${JSON.stringify(tr.safetyRatings,null,2)}`;throw console.error(Ar,tr.safetyRatings),new Error(Ar)}throw new Error(`No final content received from Gemini API. Finish reason: ${nr||"UNKNOWN"}`)}console.log("Raw Gemini response:",rr);const sr=rr.replace(/```json\n?|\n?```/g,"").trim();if(!sr.startsWith("{")||!sr.endsWith("}"))throw console.error("Raw content is not valid JSON:",sr),new Error(`Gemini API returned non-JSON data. Output truncated or malformed (Finish Reason: ${nr||"N/A"}): ${sr.substring(0,200)}...`);const ir=JSON.parse(sr),or=(ir.studyPoints||[]).map(Ar=>Ar.title+(Ar.description?": "+Ar.description:""));return{studyPoints:ir.studyPoints||[],summary:ir.summary||"",tnpscRelevance:ir.tnpscRelevance||"",tnpscCategories:ir.tnpscCategories||[],keyPoints:or,mainTopic:ir.mainTopic||""}},extractRawTextFromImage=async er=>{var _e,tr,rr,nr,sr,ir,or;try{const ar=await convertToBase64(er),cr=await fetch(getApiUrl(API_CONFIG.primaryModel),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:"Extract all text from this image. Provide only the raw, unformatted text content exactly as it appears. Do not add any formatting, analysis, or extra characters."},{inlineData:{mime_type:er.type,data:ar.split(",")[1]}}]}],generationConfig:{temperature:.1,maxOutputTokens:4096}})});if(!cr.ok){const dr=await cr.text();throw console.error("Gemini API error response:",dr),cr.status===404?new Error(`Model not found. The API model '${API_CONFIG.primaryModel}' is not available. Please check your API configuration or try updating the app.`):new Error(`Gemini API error (${cr.status}): ${dr.substring(0,200)}...`)}const Ar=await cr.json(),ur=(sr=(nr=(rr=(tr=(_e=Ar.candidates)==null?void 0:_e[0])==null?void 0:tr.content)==null?void 0:rr.parts)==null?void 0:nr[0])==null?void 0:sr.text;if(!ur){const dr=(or=(ir=Ar.candidates)==null?void 0:ir[0])==null?void 0:or.finishReason;throw new Error(`No content received from Gemini API during text extraction. Finish reason: ${dr||"UNKNOWN"}`)}return console.log("Raw OCR text extracted (first 200 chars):",ur.substring(0,200)+"..."),ur.trim()}catch(ar){throw console.error("Error extracting raw text from image:",ar),ar}},extractQuestionsFromText=async(er,_e)=>{var ar,lr,cr,Ar,ur;const rr=`
You are a highly accurate question paper extractor and parser.
Extract all questions, their options, and identify the correct answer key (A, B, C, or D) from the following raw OCR text.

${_e==="tamil"?"Please provide all questions, options, and explanations in Tamil language. Use Tamil script.":"Please provide all content in English language."}

OCR Text to Parse:
---
${er}
---

CRITICAL INSTRUCTIONS:
- You MUST return a JSON array containing ONLY the extracted question objects.
- Do NOT add any extra commentary or text outside the JSON block.
- For each question, infer the correct answer (A, B, C, or D) based on common knowledge/context.
- You MUST provide a short explanation for the correct answer.
- Assign a difficulty level and TNPSC Group based on the content.

Return as a JSON array with this exact structure (max 15 questions):
[
  {
    "question": "Question text here (both English and Tamil if available)",
    "options": ["Option A", "Option B", "Option C", "Option D"],
    "answer": "A", // MUST be A, B, C, or D
    "type": "mcq",
    "difficulty": "medium",
    "tnpscGroup": "Group 1",
    "explanation": "Brief explanation of the answer"
  }
]
`,nr=await fetch(getApiUrl(API_CONFIG.primaryModel),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:rr}]}],generationConfig:{temperature:.3,maxOutputTokens:4096,response_mime_type:"application/json"}})});if(!nr.ok){const dr=await nr.text();throw console.error("Gemini API Extraction error response:",dr),new Error(`Gemini API Extraction error (${nr.status}): ${dr.substring(0,200)}...`)}const ir=(ur=(Ar=(cr=(lr=(ar=(await nr.json()).candidates)==null?void 0:ar[0])==null?void 0:lr.content)==null?void 0:cr.parts)==null?void 0:Ar[0])==null?void 0:ur.text;if(!ir)throw new Error("No content received from Gemini API during structured extraction.");const or=ir.replace(/```json\n?|\n?```/g,"").trim();return JSON.parse(or)},generateQuestions=async(er,_e="medium",tr="english",rr)=>{var nr,sr,ir,or,ar;try{if(rr){console.log("Starting Step 1: Extracting questions from OCR text (Client-side parser)...");let yr=await parseQuestionPaperOcr(rr);if(console.log(`Extraction complete. Found ${yr.length} questions.`),(!yr||yr.length===0)&&(console.warn("Client-side parser failed. Falling back to Gemini for structured question extraction."),yr=await extractQuestionsFromText(rr,tr),console.log(`Gemini Extraction complete. Found ${yr.length} questions.`),!yr||yr.length===0))throw new Error("Extraction resulted in zero questions. The document might not be a question paper or the text is unreadable.");const hr=yr.map(gr=>({...gr,type:gr.type||"mcq",difficulty:gr.difficulty||"medium",explanation:gr.explanation||"",tnpscGroup:gr.tnpscGroup||"Group 1"}));return{questions:hr,summary:`Extracted and structured ${hr.length} questions from the provided document.`,keyPoints:[],difficulty:_e,totalQuestions:hr.length}}console.log("No OCR text provided. Generating new questions from analysis results...");const lr=er.map(yr=>({keyPoints:yr.keyPoints.join(`
`),summary:yr.summary,tnpscRelevance:yr.tnpscRelevance})),cr=tr==="tamil"?"Please provide all questions and answers in Tamil language.":"Please provide all questions and answers in English language.",Ar=`
Based on the following TNPSC study content, generate 15-20 comprehensive questions:

Content Analysis:
${lr.map((yr,hr)=>`
Analysis ${hr+1}:
Key Points: ${yr.keyPoints}
Summary: ${yr.summary}
TNPSC Relevance: ${yr.tnpscRelevance}
`).join(`
`)}

Difficulty Level: ${_e}
${cr}

Return as a JSON array with this exact structure:
[
  {
    "question": "Question text here",
    "options": ["Option A", "Option B", "Option C", "Option D"],
    "answer": "A",
    "type": "mcq",
    "difficulty": "${_e}",
    "tnpscGroup": "Group 1",
    "explanation": "Brief explanation of the answer"
  }
]
CRITICAL: The "answer" field MUST contain only the single capital letter of the correct option (A, B, C, or D).
`,ur=await fetch(getApiUrl(API_CONFIG.primaryModel),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:Ar}]}],generationConfig:{temperature:.7,maxOutputTokens:3e3,response_mime_type:"application/json"}})});if(!ur.ok){const yr=await ur.text();throw console.error("Gemini API error response:",yr),ur.status===404?new Error(`Model not found. The API model '${API_CONFIG.primaryModel}' is not available. Please check your API configuration or try updating the app.`):new Error(`Gemini API error (${ur.status}): ${yr.substring(0,200)}...`)}const mr=(ar=(or=(ir=(sr=(nr=(await ur.json()).candidates)==null?void 0:nr[0])==null?void 0:sr.content)==null?void 0:ir.parts)==null?void 0:or[0])==null?void 0:ar.text;if(!mr)throw new Error("No content received from Gemini API during question generation");const pr=JSON.parse(mr);return{questions:pr,summary:lr.map(yr=>yr.summary).join(" "),keyPoints:er.flatMap(yr=>yr.keyPoints),difficulty:_e,totalQuestions:pr.length}}catch(lr){return console.error("Error in generateQuestions:",lr),{questions:[],summary:"An error occurred during question generation.",keyPoints:[],difficulty:_e,totalQuestions:0,error:lr.message}}},analyzePdfContent=async(er,_e="english")=>{var tr,rr,nr,sr,ir;try{const ar=`
Analyze this PDF text content for TNPSC (Tamil Nadu Public Service Commission) exam preparation:

${_e==="tamil"?"Please provide all responses in Tamil language. Use Tamil script for all content.":"Please provide all responses in English language."}

Content: ${er.substring(0,8e3)}

Please provide a comprehensive analysis in the following JSON format:
{
CRITICAL INSTRUCTIONS:
- Extract ONLY specific, factual, and concrete information directly from the content
- DO NOT include generic statements about importance or what needs to be studied
- Focus on actual facts: names, dates, events, definitions, processes, figures, laws, etc.
- Provide practical memory tips for each study point to help with retention

  "mainTopic": "Main topic of the content",
  "studyPoints": [
    {
      "title": "Key point title",
      "description": "Detailed description",
      "importance": "high/medium/low",
      "memoryTip": "Creative and memorable tip using mnemonics, visual associations, stories, or patterns"
    }
  ],
  "keyPoints": ["Specific factual point 1", "Specific factual point 2", ...],
  "summary": "Overall summary of the content",
  "tnpscRelevance": "How this content is relevant for TNPSC exams",
  "tnpscCategories": ["Category1", "Category2", ...],
  "difficulty": "easy/medium/hard"
}

Focus on:
- TNPSC Group 1, 2, 4 exam relevance
- Extracting specific facts, figures, names, dates, and definitions
- Important dates, names, places
- Conceptual understanding
- Application in exam context
- Make key points factual and specific from the actual content
- Provide creative memory tips using mnemonics, associations, or patterns

MEMORY TIP GUIDELINES:
- Use acronyms, rhymes, visual imagery, or story-based associations
- Connect facts to familiar concepts or create memorable patterns
- Use number patterns, word associations, or logical sequences
- Make tips fun, quirky, and unforgettable
- Examples: "Remember VIBGYOR for rainbow colors" or "My Very Educated Mother Just Served Us Nachos for planets"
`,lr=await fetch(getApiUrl(API_CONFIG.primaryModel),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:ar}]}],generationConfig:{temperature:.7,maxOutputTokens:2048,response_mime_type:"application/json"}})});if(!lr.ok){const mr=await lr.text();throw console.error("Gemini API error response:",mr),lr.status===404?new Error(`Model not found. The API model '${API_CONFIG.primaryModel}' is not available. Please check your API configuration or try updating the app.`):new Error(`Gemini API error (${lr.status}): ${mr.substring(0,200)}...`)}const Ar=(ir=(sr=(nr=(rr=(tr=(await lr.json()).candidates)==null?void 0:tr[0])==null?void 0:rr.content)==null?void 0:nr.parts)==null?void 0:sr[0])==null?void 0:ir.text;if(!Ar)throw new Error("No content received from Gemini API");console.log("Raw PDF analysis response:",Ar);const ur=Ar.replace(/```json\n?|\n?```/g,"").trim(),dr=JSON.parse(ur);return{keyPoints:dr.keyPoints||[],summary:dr.summary||"",tnpscRelevance:dr.tnpscRelevance||"",studyPoints:dr.studyPoints||[],tnpscCategories:dr.tnpscCategories||[]}}catch(or){throw console.error("Error analyzing PDF content:",or),or}},analyzeIndividualPage=async(er,_e,tr="english")=>{var rr,nr,sr,ir,or;try{const lr=`
Analyze this individual PDF page content for TNPSC exam preparation:

${tr==="tamil"?"Please provide all responses in Tamil language.":"Please provide all responses in English language."}

Page ${_e} Content: ${er.substring(0,4e3)}

Please provide detailed analysis in JSON format:
{
  "keyPoints": ["Specific factual point 1", "Specific factual point 2", "Specific factual point 3", "Specific factual point 4", "Specific factual point 5", "Specific factual point 6", "Specific factual point 7", "Specific factual point 8"],
  "studyPoints": [
    {
      "title": "Study point title",
      "description": "Detailed description",
      "importance": "high/medium/low",
      "memoryTip": "Creative and memorable tip using mnemonics, visual associations, stories, or patterns"
    }
  ],
  "summary": "Brief summary of the page content",
  "tnpscRelevance": "How this content relates to TNPSC exams"
}

Focus on:
- Extract at least 8 specific factual key points per page from the actual content
- Detailed study points with TNPSC relevance
- Specific facts, names, dates, and concrete information
- Key information for study
- Make key points factual and specific from the actual content
- Provide excellent memory tips for each study point

MEMORY TIP GUIDELINES:
- Use acronyms, rhymes, visual imagery, or story-based associations
- Connect facts to familiar concepts or create memorable patterns
- Use number patterns, word associations, or logical sequences
- Make tips fun, quirky, and unforgettable
- Definitions and explanations
- Statistical data and figures
- Historical context and significance
- Provide creative memory tips using mnemonics, associations, or patterns

MEMORY TIP GUIDELINES:
- Use acronyms, rhymes, visual imagery, or story-based associations
- Connect facts to familiar concepts or create memorable patterns
- Use number patterns, word associations, or logical sequences
- Make tips fun, quirky, and unforgettable
- Examples: "Remember VIBGYOR for rainbow colors" or "My Very Educated Mother Just Served Us Nachos for planets"
`,cr=await fetch(getApiUrl(API_CONFIG.primaryModel),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:lr}]}],generationConfig:{temperature:.7,maxOutputTokens:3e3,response_mime_type:"application/json"}})});if(!cr.ok){const pr=await cr.text();throw console.error("Gemini API error response:",pr),cr.status===404?new Error(`Model not found. The API model '${API_CONFIG.primaryModel}' is not available. Please check your API configuration or try updating the app.`):new Error(`Gemini API error (${cr.status}): ${pr.substring(0,200)}...`)}const ur=(or=(ir=(sr=(nr=(rr=(await cr.json()).candidates)==null?void 0:rr[0])==null?void 0:nr.content)==null?void 0:sr.parts)==null?void 0:ir[0])==null?void 0:or.text;if(!ur)throw new Error("No content received from Gemini API");const dr=ur.replace(/```json\n?|\n?```/g,"").trim(),mr=JSON.parse(dr);return{pageNumber:_e,keyPoints:mr.keyPoints||[],studyPoints:mr.studyPoints||[],summary:mr.summary||"",tnpscRelevance:mr.tnpscRelevance||""}}catch(ar){throw console.error(`Error analyzing page ${_e}:`,ar),ar}},convertToBase64=er=>new Promise((_e,tr)=>{const rr=new FileReader;rr.readAsDataURL(er),rr.onload=()=>_e(rr.result),rr.onerror=nr=>tr(nr)});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(er,_e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tr,rr){tr.__proto__=rr}||function(tr,rr){for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])},extendStatics(er,_e)};function __extends(er,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Class extends value "+String(_e)+" is not a constructor or null");extendStatics(er,_e);function tr(){this.constructor=er}er.prototype=_e===null?Object.create(_e):(tr.prototype=_e.prototype,new tr)}var __assign=function(){return __assign=Object.assign||function(_e){for(var tr,rr=1,nr=arguments.length;rr<nr;rr++){tr=arguments[rr];for(var sr in tr)Object.prototype.hasOwnProperty.call(tr,sr)&&(_e[sr]=tr[sr])}return _e},__assign.apply(this,arguments)};function __awaiter(er,_e,tr,rr){function nr(sr){return sr instanceof tr?sr:new tr(function(ir){ir(sr)})}return new(tr||(tr=Promise))(function(sr,ir){function or(cr){try{lr(rr.next(cr))}catch(Ar){ir(Ar)}}function ar(cr){try{lr(rr.throw(cr))}catch(Ar){ir(Ar)}}function lr(cr){cr.done?sr(cr.value):nr(cr.value).then(or,ar)}lr((rr=rr.apply(er,[])).next())})}function __generator(er,_e){var tr={label:0,sent:function(){if(sr[0]&1)throw sr[1];return sr[1]},trys:[],ops:[]},rr,nr,sr,ir;return ir={next:or(0),throw:or(1),return:or(2)},typeof Symbol=="function"&&(ir[Symbol.iterator]=function(){return this}),ir;function or(lr){return function(cr){return ar([lr,cr])}}function ar(lr){if(rr)throw new TypeError("Generator is already executing.");for(;tr;)try{if(rr=1,nr&&(sr=lr[0]&2?nr.return:lr[0]?nr.throw||((sr=nr.return)&&sr.call(nr),0):nr.next)&&!(sr=sr.call(nr,lr[1])).done)return sr;switch(nr=0,sr&&(lr=[lr[0]&2,sr.value]),lr[0]){case 0:case 1:sr=lr;break;case 4:return tr.label++,{value:lr[1],done:!1};case 5:tr.label++,nr=lr[1],lr=[0];continue;case 7:lr=tr.ops.pop(),tr.trys.pop();continue;default:if(sr=tr.trys,!(sr=sr.length>0&&sr[sr.length-1])&&(lr[0]===6||lr[0]===2)){tr=0;continue}if(lr[0]===3&&(!sr||lr[1]>sr[0]&&lr[1]<sr[3])){tr.label=lr[1];break}if(lr[0]===6&&tr.label<sr[1]){tr.label=sr[1],sr=lr;break}if(sr&&tr.label<sr[2]){tr.label=sr[2],tr.ops.push(lr);break}sr[2]&&tr.ops.pop(),tr.trys.pop();continue}lr=_e.call(er,tr)}catch(cr){lr=[6,cr],nr=0}finally{rr=sr=0}if(lr[0]&5)throw lr[1];return{value:lr[0]?lr[1]:void 0,done:!0}}}function __spreadArray(er,_e,tr){if(arguments.length===2)for(var rr=0,nr=_e.length,sr;rr<nr;rr++)(sr||!(rr in _e))&&(sr||(sr=Array.prototype.slice.call(_e,0,rr)),sr[rr]=_e[rr]);return er.concat(sr||_e)}var Bounds=function(){function er(_e,tr,rr,nr){this.left=_e,this.top=tr,this.width=rr,this.height=nr}return er.prototype.add=function(_e,tr,rr,nr){return new er(this.left+_e,this.top+tr,this.width+rr,this.height+nr)},er.fromClientRect=function(_e,tr){return new er(tr.left+_e.windowBounds.left,tr.top+_e.windowBounds.top,tr.width,tr.height)},er.fromDOMRectList=function(_e,tr){var rr=Array.from(tr).find(function(nr){return nr.width!==0});return rr?new er(rr.left+_e.windowBounds.left,rr.top+_e.windowBounds.top,rr.width,rr.height):er.EMPTY},er.EMPTY=new er(0,0,0,0),er}(),parseBounds=function(er,_e){return Bounds.fromClientRect(er,_e.getBoundingClientRect())},parseDocumentSize=function(er){var _e=er.body,tr=er.documentElement;if(!_e||!tr)throw new Error("Unable to get document size");var rr=Math.max(Math.max(_e.scrollWidth,tr.scrollWidth),Math.max(_e.offsetWidth,tr.offsetWidth),Math.max(_e.clientWidth,tr.clientWidth)),nr=Math.max(Math.max(_e.scrollHeight,tr.scrollHeight),Math.max(_e.offsetHeight,tr.offsetHeight),Math.max(_e.clientHeight,tr.clientHeight));return new Bounds(0,0,rr,nr)},toCodePoints$1=function(er){for(var _e=[],tr=0,rr=er.length;tr<rr;){var nr=er.charCodeAt(tr++);if(nr>=55296&&nr<=56319&&tr<rr){var sr=er.charCodeAt(tr++);(sr&64512)===56320?_e.push(((nr&1023)<<10)+(sr&1023)+65536):(_e.push(nr),tr--)}else _e.push(nr)}return _e},fromCodePoint$1=function(){for(var er=[],_e=0;_e<arguments.length;_e++)er[_e]=arguments[_e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,er);var tr=er.length;if(!tr)return"";for(var rr=[],nr=-1,sr="";++nr<tr;){var ir=er[nr];ir<=65535?rr.push(ir):(ir-=65536,rr.push((ir>>10)+55296,ir%1024+56320)),(nr+1===tr||rr.length>16384)&&(sr+=String.fromCharCode.apply(String,rr),rr.length=0)}return sr},chars$2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$2=0;i$2<chars$2.length;i$2++)lookup$2[chars$2.charCodeAt(i$2)]=i$2;var chars$1$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1$1=0;i$1$1<chars$1$1.length;i$1$1++)lookup$1$1[chars$1$1.charCodeAt(i$1$1)]=i$1$1;var decode$1=function(er){var _e=er.length*.75,tr=er.length,rr,nr=0,sr,ir,or,ar;er[er.length-1]==="="&&(_e--,er[er.length-2]==="="&&_e--);var lr=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(_e):new Array(_e),cr=Array.isArray(lr)?lr:new Uint8Array(lr);for(rr=0;rr<tr;rr+=4)sr=lookup$1$1[er.charCodeAt(rr)],ir=lookup$1$1[er.charCodeAt(rr+1)],or=lookup$1$1[er.charCodeAt(rr+2)],ar=lookup$1$1[er.charCodeAt(rr+3)],cr[nr++]=sr<<2|ir>>4,cr[nr++]=(ir&15)<<4|or>>2,cr[nr++]=(or&3)<<6|ar&63;return lr},polyUint16Array$1=function(er){for(var _e=er.length,tr=[],rr=0;rr<_e;rr+=2)tr.push(er[rr+1]<<8|er[rr]);return tr},polyUint32Array$1=function(er){for(var _e=er.length,tr=[],rr=0;rr<_e;rr+=4)tr.push(er[rr+3]<<24|er[rr+2]<<16|er[rr+1]<<8|er[rr]);return tr},UTRIE2_SHIFT_2$1=5,UTRIE2_SHIFT_1$1=11,UTRIE2_INDEX_SHIFT$1=2,UTRIE2_SHIFT_1_2$1=UTRIE2_SHIFT_1$1-UTRIE2_SHIFT_2$1,UTRIE2_LSCP_INDEX_2_OFFSET$1=65536>>UTRIE2_SHIFT_2$1,UTRIE2_DATA_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_2$1,UTRIE2_DATA_MASK$1=UTRIE2_DATA_BLOCK_LENGTH$1-1,UTRIE2_LSCP_INDEX_2_LENGTH$1=1024>>UTRIE2_SHIFT_2$1,UTRIE2_INDEX_2_BMP_LENGTH$1=UTRIE2_LSCP_INDEX_2_OFFSET$1+UTRIE2_LSCP_INDEX_2_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_OFFSET$1=UTRIE2_INDEX_2_BMP_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_LENGTH$1=32,UTRIE2_INDEX_1_OFFSET$1=UTRIE2_UTF8_2B_INDEX_2_OFFSET$1+UTRIE2_UTF8_2B_INDEX_2_LENGTH$1,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1=65536>>UTRIE2_SHIFT_1$1,UTRIE2_INDEX_2_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_1_2$1,UTRIE2_INDEX_2_MASK$1=UTRIE2_INDEX_2_BLOCK_LENGTH$1-1,slice16$1=function(er,_e,tr){return er.slice?er.slice(_e,tr):new Uint16Array(Array.prototype.slice.call(er,_e,tr))},slice32$1=function(er,_e,tr){return er.slice?er.slice(_e,tr):new Uint32Array(Array.prototype.slice.call(er,_e,tr))},createTrieFromBase64$1=function(er,_e){var tr=decode$1(er),rr=Array.isArray(tr)?polyUint32Array$1(tr):new Uint32Array(tr),nr=Array.isArray(tr)?polyUint16Array$1(tr):new Uint16Array(tr),sr=24,ir=slice16$1(nr,sr/2,rr[4]/2),or=rr[5]===2?slice16$1(nr,(sr+rr[4])/2):slice32$1(rr,Math.ceil((sr+rr[4])/4));return new Trie$1(rr[0],rr[1],rr[2],rr[3],ir,or)},Trie$1=function(){function er(_e,tr,rr,nr,sr,ir){this.initialValue=_e,this.errorValue=tr,this.highStart=rr,this.highValueIndex=nr,this.index=sr,this.data=ir}return er.prototype.get=function(_e){var tr;if(_e>=0){if(_e<55296||_e>56319&&_e<=65535)return tr=this.index[_e>>UTRIE2_SHIFT_2$1],tr=(tr<<UTRIE2_INDEX_SHIFT$1)+(_e&UTRIE2_DATA_MASK$1),this.data[tr];if(_e<=65535)return tr=this.index[UTRIE2_LSCP_INDEX_2_OFFSET$1+(_e-55296>>UTRIE2_SHIFT_2$1)],tr=(tr<<UTRIE2_INDEX_SHIFT$1)+(_e&UTRIE2_DATA_MASK$1),this.data[tr];if(_e<this.highStart)return tr=UTRIE2_INDEX_1_OFFSET$1-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1+(_e>>UTRIE2_SHIFT_1$1),tr=this.index[tr],tr+=_e>>UTRIE2_SHIFT_2$1&UTRIE2_INDEX_2_MASK$1,tr=this.index[tr],tr=(tr<<UTRIE2_INDEX_SHIFT$1)+(_e&UTRIE2_DATA_MASK$1),this.data[tr];if(_e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},er}(),chars$3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$3=0;i$3<chars$3.length;i$3++)lookup$3[chars$3.charCodeAt(i$3)]=i$3;var base64$1="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",LETTER_NUMBER_MODIFIER=50,BK=1,CR$1=2,LF$1=3,CM=4,NL=5,WJ=7,ZW=8,GL=9,SP=10,ZWJ$1=11,B2=12,BA=13,BB=14,HY=15,CB=16,CL=17,CP=18,EX=19,IN=20,NS=21,OP=22,QU=23,IS=24,NU=25,PO=26,PR=27,SY=28,AI=29,AL=30,CJ=31,EB=32,EM=33,H2=34,H3=35,HL=36,ID=37,JL=38,JV=39,JT=40,RI$1=41,SA=42,XX=43,ea_OP=[9001,65288],BREAK_MANDATORY="!",BREAK_NOT_ALLOWED$1="",BREAK_ALLOWED$1="",UnicodeTrie$1=createTrieFromBase64$1(base64$1),ALPHABETICS=[AL,HL],HARD_LINE_BREAKS=[BK,CR$1,LF$1,NL],SPACE$1=[SP,ZW],PREFIX_POSTFIX=[PR,PO],LINE_BREAKS=HARD_LINE_BREAKS.concat(SPACE$1),KOREAN_SYLLABLE_BLOCK=[JL,JV,JT,H2,H3],HYPHEN=[HY,BA],codePointsToCharacterClasses=function(er,_e){_e===void 0&&(_e="strict");var tr=[],rr=[],nr=[];return er.forEach(function(sr,ir){var or=UnicodeTrie$1.get(sr);if(or>LETTER_NUMBER_MODIFIER?(nr.push(!0),or-=LETTER_NUMBER_MODIFIER):nr.push(!1),["normal","auto","loose"].indexOf(_e)!==-1&&[8208,8211,12316,12448].indexOf(sr)!==-1)return rr.push(ir),tr.push(CB);if(or===CM||or===ZWJ$1){if(ir===0)return rr.push(ir),tr.push(AL);var ar=tr[ir-1];return LINE_BREAKS.indexOf(ar)===-1?(rr.push(rr[ir-1]),tr.push(ar)):(rr.push(ir),tr.push(AL))}if(rr.push(ir),or===CJ)return tr.push(_e==="strict"?NS:ID);if(or===SA||or===AI)return tr.push(AL);if(or===XX)return sr>=131072&&sr<=196605||sr>=196608&&sr<=262141?tr.push(ID):tr.push(AL);tr.push(or)}),[rr,tr,nr]},isAdjacentWithSpaceIgnored=function(er,_e,tr,rr){var nr=rr[tr];if(Array.isArray(er)?er.indexOf(nr)!==-1:er===nr)for(var sr=tr;sr<=rr.length;){sr++;var ir=rr[sr];if(ir===_e)return!0;if(ir!==SP)break}if(nr===SP)for(var sr=tr;sr>0;){sr--;var or=rr[sr];if(Array.isArray(er)?er.indexOf(or)!==-1:er===or)for(var ar=tr;ar<=rr.length;){ar++;var ir=rr[ar];if(ir===_e)return!0;if(ir!==SP)break}if(or!==SP)break}return!1},previousNonSpaceClassType=function(er,_e){for(var tr=er;tr>=0;){var rr=_e[tr];if(rr===SP)tr--;else return rr}return 0},_lineBreakAtIndex=function(er,_e,tr,rr,nr){if(tr[rr]===0)return BREAK_NOT_ALLOWED$1;var sr=rr-1;if(Array.isArray(nr)&&nr[sr]===!0)return BREAK_NOT_ALLOWED$1;var ir=sr-1,or=sr+1,ar=_e[sr],lr=ir>=0?_e[ir]:0,cr=_e[or];if(ar===CR$1&&cr===LF$1)return BREAK_NOT_ALLOWED$1;if(HARD_LINE_BREAKS.indexOf(ar)!==-1)return BREAK_MANDATORY;if(HARD_LINE_BREAKS.indexOf(cr)!==-1||SPACE$1.indexOf(cr)!==-1)return BREAK_NOT_ALLOWED$1;if(previousNonSpaceClassType(sr,_e)===ZW)return BREAK_ALLOWED$1;if(UnicodeTrie$1.get(er[sr])===ZWJ$1||(ar===EB||ar===EM)&&UnicodeTrie$1.get(er[or])===ZWJ$1||ar===WJ||cr===WJ||ar===GL||[SP,BA,HY].indexOf(ar)===-1&&cr===GL||[CL,CP,EX,IS,SY].indexOf(cr)!==-1||previousNonSpaceClassType(sr,_e)===OP||isAdjacentWithSpaceIgnored(QU,OP,sr,_e)||isAdjacentWithSpaceIgnored([CL,CP],NS,sr,_e)||isAdjacentWithSpaceIgnored(B2,B2,sr,_e))return BREAK_NOT_ALLOWED$1;if(ar===SP)return BREAK_ALLOWED$1;if(ar===QU||cr===QU)return BREAK_NOT_ALLOWED$1;if(cr===CB||ar===CB)return BREAK_ALLOWED$1;if([BA,HY,NS].indexOf(cr)!==-1||ar===BB||lr===HL&&HYPHEN.indexOf(ar)!==-1||ar===SY&&cr===HL||cr===IN||ALPHABETICS.indexOf(cr)!==-1&&ar===NU||ALPHABETICS.indexOf(ar)!==-1&&cr===NU||ar===PR&&[ID,EB,EM].indexOf(cr)!==-1||[ID,EB,EM].indexOf(ar)!==-1&&cr===PO||ALPHABETICS.indexOf(ar)!==-1&&PREFIX_POSTFIX.indexOf(cr)!==-1||PREFIX_POSTFIX.indexOf(ar)!==-1&&ALPHABETICS.indexOf(cr)!==-1||[PR,PO].indexOf(ar)!==-1&&(cr===NU||[OP,HY].indexOf(cr)!==-1&&_e[or+1]===NU)||[OP,HY].indexOf(ar)!==-1&&cr===NU||ar===NU&&[NU,SY,IS].indexOf(cr)!==-1)return BREAK_NOT_ALLOWED$1;if([NU,SY,IS,CL,CP].indexOf(cr)!==-1)for(var Ar=sr;Ar>=0;){var ur=_e[Ar];if(ur===NU)return BREAK_NOT_ALLOWED$1;if([SY,IS].indexOf(ur)!==-1)Ar--;else break}if([PR,PO].indexOf(cr)!==-1)for(var Ar=[CL,CP].indexOf(ar)!==-1?ir:sr;Ar>=0;){var ur=_e[Ar];if(ur===NU)return BREAK_NOT_ALLOWED$1;if([SY,IS].indexOf(ur)!==-1)Ar--;else break}if(JL===ar&&[JL,JV,H2,H3].indexOf(cr)!==-1||[JV,H2].indexOf(ar)!==-1&&[JV,JT].indexOf(cr)!==-1||[JT,H3].indexOf(ar)!==-1&&cr===JT||KOREAN_SYLLABLE_BLOCK.indexOf(ar)!==-1&&[IN,PO].indexOf(cr)!==-1||KOREAN_SYLLABLE_BLOCK.indexOf(cr)!==-1&&ar===PR||ALPHABETICS.indexOf(ar)!==-1&&ALPHABETICS.indexOf(cr)!==-1||ar===IS&&ALPHABETICS.indexOf(cr)!==-1||ALPHABETICS.concat(NU).indexOf(ar)!==-1&&cr===OP&&ea_OP.indexOf(er[or])===-1||ALPHABETICS.concat(NU).indexOf(cr)!==-1&&ar===CP)return BREAK_NOT_ALLOWED$1;if(ar===RI$1&&cr===RI$1){for(var dr=tr[sr],mr=1;dr>0&&(dr--,_e[dr]===RI$1);)mr++;if(mr%2!==0)return BREAK_NOT_ALLOWED$1}return ar===EB&&cr===EM?BREAK_NOT_ALLOWED$1:BREAK_ALLOWED$1},cssFormattedClasses=function(er,_e){_e||(_e={lineBreak:"normal",wordBreak:"normal"});var tr=codePointsToCharacterClasses(er,_e.lineBreak),rr=tr[0],nr=tr[1],sr=tr[2];(_e.wordBreak==="break-all"||_e.wordBreak==="break-word")&&(nr=nr.map(function(or){return[NU,AL,SA].indexOf(or)!==-1?ID:or}));var ir=_e.wordBreak==="keep-all"?sr.map(function(or,ar){return or&&er[ar]>=19968&&er[ar]<=40959}):void 0;return[rr,nr,ir]},Break=function(){function er(_e,tr,rr,nr){this.codePoints=_e,this.required=tr===BREAK_MANDATORY,this.start=rr,this.end=nr}return er.prototype.slice=function(){return fromCodePoint$1.apply(void 0,this.codePoints.slice(this.start,this.end))},er}(),LineBreaker=function(er,_e){var tr=toCodePoints$1(er),rr=cssFormattedClasses(tr,_e),nr=rr[0],sr=rr[1],ir=rr[2],or=tr.length,ar=0,lr=0;return{next:function(){if(lr>=or)return{done:!0,value:null};for(var cr=BREAK_NOT_ALLOWED$1;lr<or&&(cr=_lineBreakAtIndex(tr,sr,nr,++lr,ir))===BREAK_NOT_ALLOWED$1;);if(cr!==BREAK_NOT_ALLOWED$1||lr===or){var Ar=new Break(tr,cr,ar,lr);return ar=lr,{value:Ar,done:!1}}return{done:!0,value:null}}}},FLAG_UNRESTRICTED=1,FLAG_ID=2,FLAG_INTEGER=4,FLAG_NUMBER=8,LINE_FEED=10,SOLIDUS=47,REVERSE_SOLIDUS=92,CHARACTER_TABULATION=9,SPACE=32,QUOTATION_MARK=34,EQUALS_SIGN=61,NUMBER_SIGN=35,DOLLAR_SIGN=36,PERCENTAGE_SIGN=37,APOSTROPHE=39,LEFT_PARENTHESIS=40,RIGHT_PARENTHESIS=41,LOW_LINE=95,HYPHEN_MINUS=45,EXCLAMATION_MARK=33,LESS_THAN_SIGN=60,GREATER_THAN_SIGN=62,COMMERCIAL_AT=64,LEFT_SQUARE_BRACKET=91,RIGHT_SQUARE_BRACKET=93,CIRCUMFLEX_ACCENT=61,LEFT_CURLY_BRACKET=123,QUESTION_MARK=63,RIGHT_CURLY_BRACKET=125,VERTICAL_LINE=124,TILDE=126,CONTROL=128,REPLACEMENT_CHARACTER=65533,ASTERISK=42,PLUS_SIGN=43,COMMA=44,COLON=58,SEMICOLON=59,FULL_STOP=46,NULL=0,BACKSPACE=8,LINE_TABULATION=11,SHIFT_OUT=14,INFORMATION_SEPARATOR_ONE=31,DELETE=127,EOF=-1,ZERO=48,a$1=97,e=101,f$1=102,u$1=117,z$1=122,A$1=65,E$1=69,F$1=70,U$1=85,Z$1=90,isDigit=function(er){return er>=ZERO&&er<=57},isSurrogateCodePoint=function(er){return er>=55296&&er<=57343},isHex=function(er){return isDigit(er)||er>=A$1&&er<=F$1||er>=a$1&&er<=f$1},isLowerCaseLetter=function(er){return er>=a$1&&er<=z$1},isUpperCaseLetter=function(er){return er>=A$1&&er<=Z$1},isLetter=function(er){return isLowerCaseLetter(er)||isUpperCaseLetter(er)},isNonASCIICodePoint=function(er){return er>=CONTROL},isWhiteSpace=function(er){return er===LINE_FEED||er===CHARACTER_TABULATION||er===SPACE},isNameStartCodePoint=function(er){return isLetter(er)||isNonASCIICodePoint(er)||er===LOW_LINE},isNameCodePoint=function(er){return isNameStartCodePoint(er)||isDigit(er)||er===HYPHEN_MINUS},isNonPrintableCodePoint=function(er){return er>=NULL&&er<=BACKSPACE||er===LINE_TABULATION||er>=SHIFT_OUT&&er<=INFORMATION_SEPARATOR_ONE||er===DELETE},isValidEscape=function(er,_e){return er!==REVERSE_SOLIDUS?!1:_e!==LINE_FEED},isIdentifierStart=function(er,_e,tr){return er===HYPHEN_MINUS?isNameStartCodePoint(_e)||isValidEscape(_e,tr):isNameStartCodePoint(er)?!0:!!(er===REVERSE_SOLIDUS&&isValidEscape(er,_e))},isNumberStart=function(er,_e,tr){return er===PLUS_SIGN||er===HYPHEN_MINUS?isDigit(_e)?!0:_e===FULL_STOP&&isDigit(tr):isDigit(er===FULL_STOP?_e:er)},stringToNumber=function(er){var _e=0,tr=1;(er[_e]===PLUS_SIGN||er[_e]===HYPHEN_MINUS)&&(er[_e]===HYPHEN_MINUS&&(tr=-1),_e++);for(var rr=[];isDigit(er[_e]);)rr.push(er[_e++]);var nr=rr.length?parseInt(fromCodePoint$1.apply(void 0,rr),10):0;er[_e]===FULL_STOP&&_e++;for(var sr=[];isDigit(er[_e]);)sr.push(er[_e++]);var ir=sr.length,or=ir?parseInt(fromCodePoint$1.apply(void 0,sr),10):0;(er[_e]===E$1||er[_e]===e)&&_e++;var ar=1;(er[_e]===PLUS_SIGN||er[_e]===HYPHEN_MINUS)&&(er[_e]===HYPHEN_MINUS&&(ar=-1),_e++);for(var lr=[];isDigit(er[_e]);)lr.push(er[_e++]);var cr=lr.length?parseInt(fromCodePoint$1.apply(void 0,lr),10):0;return tr*(nr+or*Math.pow(10,-ir))*Math.pow(10,ar*cr)},LEFT_PARENTHESIS_TOKEN={type:2},RIGHT_PARENTHESIS_TOKEN={type:3},COMMA_TOKEN={type:4},SUFFIX_MATCH_TOKEN={type:13},PREFIX_MATCH_TOKEN={type:8},COLUMN_TOKEN={type:21},DASH_MATCH_TOKEN={type:9},INCLUDE_MATCH_TOKEN={type:10},LEFT_CURLY_BRACKET_TOKEN={type:11},RIGHT_CURLY_BRACKET_TOKEN={type:12},SUBSTRING_MATCH_TOKEN={type:14},BAD_URL_TOKEN={type:23},BAD_STRING_TOKEN={type:1},CDO_TOKEN={type:25},CDC_TOKEN={type:24},COLON_TOKEN={type:26},SEMICOLON_TOKEN={type:27},LEFT_SQUARE_BRACKET_TOKEN={type:28},RIGHT_SQUARE_BRACKET_TOKEN={type:29},WHITESPACE_TOKEN={type:31},EOF_TOKEN={type:32},Tokenizer=function(){function er(){this._value=[]}return er.prototype.write=function(_e){this._value=this._value.concat(toCodePoints$1(_e))},er.prototype.read=function(){for(var _e=[],tr=this.consumeToken();tr!==EOF_TOKEN;)_e.push(tr),tr=this.consumeToken();return _e},er.prototype.consumeToken=function(){var _e=this.consumeCodePoint();switch(_e){case QUOTATION_MARK:return this.consumeStringToken(QUOTATION_MARK);case NUMBER_SIGN:var tr=this.peekCodePoint(0),rr=this.peekCodePoint(1),nr=this.peekCodePoint(2);if(isNameCodePoint(tr)||isValidEscape(rr,nr)){var sr=isIdentifierStart(tr,rr,nr)?FLAG_ID:FLAG_UNRESTRICTED,ir=this.consumeName();return{type:5,value:ir,flags:sr}}break;case DOLLAR_SIGN:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUFFIX_MATCH_TOKEN;break;case APOSTROPHE:return this.consumeStringToken(APOSTROPHE);case LEFT_PARENTHESIS:return LEFT_PARENTHESIS_TOKEN;case RIGHT_PARENTHESIS:return RIGHT_PARENTHESIS_TOKEN;case ASTERISK:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUBSTRING_MATCH_TOKEN;break;case PLUS_SIGN:if(isNumberStart(_e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(_e),this.consumeNumericToken();break;case COMMA:return COMMA_TOKEN;case HYPHEN_MINUS:var or=_e,ar=this.peekCodePoint(0),lr=this.peekCodePoint(1);if(isNumberStart(or,ar,lr))return this.reconsumeCodePoint(_e),this.consumeNumericToken();if(isIdentifierStart(or,ar,lr))return this.reconsumeCodePoint(_e),this.consumeIdentLikeToken();if(ar===HYPHEN_MINUS&&lr===GREATER_THAN_SIGN)return this.consumeCodePoint(),this.consumeCodePoint(),CDC_TOKEN;break;case FULL_STOP:if(isNumberStart(_e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(_e),this.consumeNumericToken();break;case SOLIDUS:if(this.peekCodePoint(0)===ASTERISK)for(this.consumeCodePoint();;){var cr=this.consumeCodePoint();if(cr===ASTERISK&&(cr=this.consumeCodePoint(),cr===SOLIDUS))return this.consumeToken();if(cr===EOF)return this.consumeToken()}break;case COLON:return COLON_TOKEN;case SEMICOLON:return SEMICOLON_TOKEN;case LESS_THAN_SIGN:if(this.peekCodePoint(0)===EXCLAMATION_MARK&&this.peekCodePoint(1)===HYPHEN_MINUS&&this.peekCodePoint(2)===HYPHEN_MINUS)return this.consumeCodePoint(),this.consumeCodePoint(),CDO_TOKEN;break;case COMMERCIAL_AT:var Ar=this.peekCodePoint(0),ur=this.peekCodePoint(1),dr=this.peekCodePoint(2);if(isIdentifierStart(Ar,ur,dr)){var ir=this.consumeName();return{type:7,value:ir}}break;case LEFT_SQUARE_BRACKET:return LEFT_SQUARE_BRACKET_TOKEN;case REVERSE_SOLIDUS:if(isValidEscape(_e,this.peekCodePoint(0)))return this.reconsumeCodePoint(_e),this.consumeIdentLikeToken();break;case RIGHT_SQUARE_BRACKET:return RIGHT_SQUARE_BRACKET_TOKEN;case CIRCUMFLEX_ACCENT:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),PREFIX_MATCH_TOKEN;break;case LEFT_CURLY_BRACKET:return LEFT_CURLY_BRACKET_TOKEN;case RIGHT_CURLY_BRACKET:return RIGHT_CURLY_BRACKET_TOKEN;case u$1:case U$1:var mr=this.peekCodePoint(0),pr=this.peekCodePoint(1);return mr===PLUS_SIGN&&(isHex(pr)||pr===QUESTION_MARK)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(_e),this.consumeIdentLikeToken();case VERTICAL_LINE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),DASH_MATCH_TOKEN;if(this.peekCodePoint(0)===VERTICAL_LINE)return this.consumeCodePoint(),COLUMN_TOKEN;break;case TILDE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),INCLUDE_MATCH_TOKEN;break;case EOF:return EOF_TOKEN}return isWhiteSpace(_e)?(this.consumeWhiteSpace(),WHITESPACE_TOKEN):isDigit(_e)?(this.reconsumeCodePoint(_e),this.consumeNumericToken()):isNameStartCodePoint(_e)?(this.reconsumeCodePoint(_e),this.consumeIdentLikeToken()):{type:6,value:fromCodePoint$1(_e)}},er.prototype.consumeCodePoint=function(){var _e=this._value.shift();return typeof _e>"u"?-1:_e},er.prototype.reconsumeCodePoint=function(_e){this._value.unshift(_e)},er.prototype.peekCodePoint=function(_e){return _e>=this._value.length?-1:this._value[_e]},er.prototype.consumeUnicodeRangeToken=function(){for(var _e=[],tr=this.consumeCodePoint();isHex(tr)&&_e.length<6;)_e.push(tr),tr=this.consumeCodePoint();for(var rr=!1;tr===QUESTION_MARK&&_e.length<6;)_e.push(tr),tr=this.consumeCodePoint(),rr=!0;if(rr){var nr=parseInt(fromCodePoint$1.apply(void 0,_e.map(function(ar){return ar===QUESTION_MARK?ZERO:ar})),16),sr=parseInt(fromCodePoint$1.apply(void 0,_e.map(function(ar){return ar===QUESTION_MARK?F$1:ar})),16);return{type:30,start:nr,end:sr}}var ir=parseInt(fromCodePoint$1.apply(void 0,_e),16);if(this.peekCodePoint(0)===HYPHEN_MINUS&&isHex(this.peekCodePoint(1))){this.consumeCodePoint(),tr=this.consumeCodePoint();for(var or=[];isHex(tr)&&or.length<6;)or.push(tr),tr=this.consumeCodePoint();var sr=parseInt(fromCodePoint$1.apply(void 0,or),16);return{type:30,start:ir,end:sr}}else return{type:30,start:ir,end:ir}},er.prototype.consumeIdentLikeToken=function(){var _e=this.consumeName();return _e.toLowerCase()==="url"&&this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),{type:19,value:_e}):{type:20,value:_e}},er.prototype.consumeUrlToken=function(){var _e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF)return{type:22,value:""};var tr=this.peekCodePoint(0);if(tr===APOSTROPHE||tr===QUOTATION_MARK){var rr=this.consumeStringToken(this.consumeCodePoint());return rr.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS)?(this.consumeCodePoint(),{type:22,value:rr.value}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN)}for(;;){var nr=this.consumeCodePoint();if(nr===EOF||nr===RIGHT_PARENTHESIS)return{type:22,value:fromCodePoint$1.apply(void 0,_e)};if(isWhiteSpace(nr))return this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS?(this.consumeCodePoint(),{type:22,value:fromCodePoint$1.apply(void 0,_e)}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN);if(nr===QUOTATION_MARK||nr===APOSTROPHE||nr===LEFT_PARENTHESIS||isNonPrintableCodePoint(nr))return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;if(nr===REVERSE_SOLIDUS)if(isValidEscape(nr,this.peekCodePoint(0)))_e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;else _e.push(nr)}},er.prototype.consumeWhiteSpace=function(){for(;isWhiteSpace(this.peekCodePoint(0));)this.consumeCodePoint()},er.prototype.consumeBadUrlRemnants=function(){for(;;){var _e=this.consumeCodePoint();if(_e===RIGHT_PARENTHESIS||_e===EOF)return;isValidEscape(_e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},er.prototype.consumeStringSlice=function(_e){for(var tr=5e4,rr="";_e>0;){var nr=Math.min(tr,_e);rr+=fromCodePoint$1.apply(void 0,this._value.splice(0,nr)),_e-=nr}return this._value.shift(),rr},er.prototype.consumeStringToken=function(_e){var tr="",rr=0;do{var nr=this._value[rr];if(nr===EOF||nr===void 0||nr===_e)return tr+=this.consumeStringSlice(rr),{type:0,value:tr};if(nr===LINE_FEED)return this._value.splice(0,rr),BAD_STRING_TOKEN;if(nr===REVERSE_SOLIDUS){var sr=this._value[rr+1];sr!==EOF&&sr!==void 0&&(sr===LINE_FEED?(tr+=this.consumeStringSlice(rr),rr=-1,this._value.shift()):isValidEscape(nr,sr)&&(tr+=this.consumeStringSlice(rr),tr+=fromCodePoint$1(this.consumeEscapedCodePoint()),rr=-1))}rr++}while(!0)},er.prototype.consumeNumber=function(){var _e=[],tr=FLAG_INTEGER,rr=this.peekCodePoint(0);for((rr===PLUS_SIGN||rr===HYPHEN_MINUS)&&_e.push(this.consumeCodePoint());isDigit(this.peekCodePoint(0));)_e.push(this.consumeCodePoint());rr=this.peekCodePoint(0);var nr=this.peekCodePoint(1);if(rr===FULL_STOP&&isDigit(nr))for(_e.push(this.consumeCodePoint(),this.consumeCodePoint()),tr=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)_e.push(this.consumeCodePoint());rr=this.peekCodePoint(0),nr=this.peekCodePoint(1);var sr=this.peekCodePoint(2);if((rr===E$1||rr===e)&&((nr===PLUS_SIGN||nr===HYPHEN_MINUS)&&isDigit(sr)||isDigit(nr)))for(_e.push(this.consumeCodePoint(),this.consumeCodePoint()),tr=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)_e.push(this.consumeCodePoint());return[stringToNumber(_e),tr]},er.prototype.consumeNumericToken=function(){var _e=this.consumeNumber(),tr=_e[0],rr=_e[1],nr=this.peekCodePoint(0),sr=this.peekCodePoint(1),ir=this.peekCodePoint(2);if(isIdentifierStart(nr,sr,ir)){var or=this.consumeName();return{type:15,number:tr,flags:rr,unit:or}}return nr===PERCENTAGE_SIGN?(this.consumeCodePoint(),{type:16,number:tr,flags:rr}):{type:17,number:tr,flags:rr}},er.prototype.consumeEscapedCodePoint=function(){var _e=this.consumeCodePoint();if(isHex(_e)){for(var tr=fromCodePoint$1(_e);isHex(this.peekCodePoint(0))&&tr.length<6;)tr+=fromCodePoint$1(this.consumeCodePoint());isWhiteSpace(this.peekCodePoint(0))&&this.consumeCodePoint();var rr=parseInt(tr,16);return rr===0||isSurrogateCodePoint(rr)||rr>1114111?REPLACEMENT_CHARACTER:rr}return _e===EOF?REPLACEMENT_CHARACTER:_e},er.prototype.consumeName=function(){for(var _e="";;){var tr=this.consumeCodePoint();if(isNameCodePoint(tr))_e+=fromCodePoint$1(tr);else if(isValidEscape(tr,this.peekCodePoint(0)))_e+=fromCodePoint$1(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(tr),_e}},er}(),Parser=function(){function er(_e){this._tokens=_e}return er.create=function(_e){var tr=new Tokenizer;return tr.write(_e),new er(tr.read())},er.parseValue=function(_e){return er.create(_e).parseComponentValue()},er.parseValues=function(_e){return er.create(_e).parseComponentValues()},er.prototype.parseComponentValue=function(){for(var _e=this.consumeToken();_e.type===31;)_e=this.consumeToken();if(_e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(_e);var tr=this.consumeComponentValue();do _e=this.consumeToken();while(_e.type===31);if(_e.type===32)return tr;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},er.prototype.parseComponentValues=function(){for(var _e=[];;){var tr=this.consumeComponentValue();if(tr.type===32)return _e;_e.push(tr),_e.push()}},er.prototype.consumeComponentValue=function(){var _e=this.consumeToken();switch(_e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(_e.type);case 19:return this.consumeFunction(_e)}return _e},er.prototype.consumeSimpleBlock=function(_e){for(var tr={type:_e,values:[]},rr=this.consumeToken();;){if(rr.type===32||isEndingTokenFor(rr,_e))return tr;this.reconsumeToken(rr),tr.values.push(this.consumeComponentValue()),rr=this.consumeToken()}},er.prototype.consumeFunction=function(_e){for(var tr={name:_e.value,values:[],type:18};;){var rr=this.consumeToken();if(rr.type===32||rr.type===3)return tr;this.reconsumeToken(rr),tr.values.push(this.consumeComponentValue())}},er.prototype.consumeToken=function(){var _e=this._tokens.shift();return typeof _e>"u"?EOF_TOKEN:_e},er.prototype.reconsumeToken=function(_e){this._tokens.unshift(_e)},er}(),isDimensionToken=function(er){return er.type===15},isNumberToken=function(er){return er.type===17},isIdentToken=function(er){return er.type===20},isStringToken=function(er){return er.type===0},isIdentWithValue=function(er,_e){return isIdentToken(er)&&er.value===_e},nonWhiteSpace=function(er){return er.type!==31},nonFunctionArgSeparator=function(er){return er.type!==31&&er.type!==4},parseFunctionArgs=function(er){var _e=[],tr=[];return er.forEach(function(rr){if(rr.type===4){if(tr.length===0)throw new Error("Error parsing function args, zero tokens for arg");_e.push(tr),tr=[];return}rr.type!==31&&tr.push(rr)}),tr.length&&_e.push(tr),_e},isEndingTokenFor=function(er,_e){return _e===11&&er.type===12||_e===28&&er.type===29?!0:_e===2&&er.type===3},isLength=function(er){return er.type===17||er.type===15},isLengthPercentage=function(er){return er.type===16||isLength(er)},parseLengthPercentageTuple=function(er){return er.length>1?[er[0],er[1]]:[er[0]]},ZERO_LENGTH={type:17,number:0,flags:FLAG_INTEGER},FIFTY_PERCENT={type:16,number:50,flags:FLAG_INTEGER},HUNDRED_PERCENT={type:16,number:100,flags:FLAG_INTEGER},getAbsoluteValueForTuple=function(er,_e,tr){var rr=er[0],nr=er[1];return[getAbsoluteValue(rr,_e),getAbsoluteValue(typeof nr<"u"?nr:rr,tr)]},getAbsoluteValue=function(er,_e){if(er.type===16)return er.number/100*_e;if(isDimensionToken(er))switch(er.unit){case"rem":case"em":return 16*er.number;case"px":default:return er.number}return er.number},DEG="deg",GRAD="grad",RAD="rad",TURN="turn",angle={name:"angle",parse:function(er,_e){if(_e.type===15)switch(_e.unit){case DEG:return Math.PI*_e.number/180;case GRAD:return Math.PI/200*_e.number;case RAD:return _e.number;case TURN:return Math.PI*2*_e.number}throw new Error("Unsupported angle type")}},isAngle=function(er){return er.type===15&&(er.unit===DEG||er.unit===GRAD||er.unit===RAD||er.unit===TURN)},parseNamedSide=function(er){var _e=er.filter(isIdentToken).map(function(tr){return tr.value}).join(" ");switch(_e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ZERO_LENGTH,ZERO_LENGTH];case"to top":case"bottom":return deg(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ZERO_LENGTH,HUNDRED_PERCENT];case"to right":case"left":return deg(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[HUNDRED_PERCENT,HUNDRED_PERCENT];case"to bottom":case"top":return deg(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[HUNDRED_PERCENT,ZERO_LENGTH];case"to left":case"right":return deg(270)}return 0},deg=function(er){return Math.PI*er/180},color$1={name:"color",parse:function(er,_e){if(_e.type===18){var tr=SUPPORTED_COLOR_FUNCTIONS[_e.name];if(typeof tr>"u")throw new Error('Attempting to parse an unsupported color function "'+_e.name+'"');return tr(er,_e.values)}if(_e.type===5){if(_e.value.length===3){var rr=_e.value.substring(0,1),nr=_e.value.substring(1,2),sr=_e.value.substring(2,3);return pack(parseInt(rr+rr,16),parseInt(nr+nr,16),parseInt(sr+sr,16),1)}if(_e.value.length===4){var rr=_e.value.substring(0,1),nr=_e.value.substring(1,2),sr=_e.value.substring(2,3),ir=_e.value.substring(3,4);return pack(parseInt(rr+rr,16),parseInt(nr+nr,16),parseInt(sr+sr,16),parseInt(ir+ir,16)/255)}if(_e.value.length===6){var rr=_e.value.substring(0,2),nr=_e.value.substring(2,4),sr=_e.value.substring(4,6);return pack(parseInt(rr,16),parseInt(nr,16),parseInt(sr,16),1)}if(_e.value.length===8){var rr=_e.value.substring(0,2),nr=_e.value.substring(2,4),sr=_e.value.substring(4,6),ir=_e.value.substring(6,8);return pack(parseInt(rr,16),parseInt(nr,16),parseInt(sr,16),parseInt(ir,16)/255)}}if(_e.type===20){var or=COLORS[_e.value.toUpperCase()];if(typeof or<"u")return or}return COLORS.TRANSPARENT}},isTransparent=function(er){return(255&er)===0},asString=function(er){var _e=255&er,tr=255&er>>8,rr=255&er>>16,nr=255&er>>24;return _e<255?"rgba("+nr+","+rr+","+tr+","+_e/255+")":"rgb("+nr+","+rr+","+tr+")"},pack=function(er,_e,tr,rr){return(er<<24|_e<<16|tr<<8|Math.round(rr*255)<<0)>>>0},getTokenColorValue=function(er,_e){if(er.type===17)return er.number;if(er.type===16){var tr=_e===3?1:255;return _e===3?er.number/100*tr:Math.round(er.number/100*tr)}return 0},rgb=function(er,_e){var tr=_e.filter(nonFunctionArgSeparator);if(tr.length===3){var rr=tr.map(getTokenColorValue),nr=rr[0],sr=rr[1],ir=rr[2];return pack(nr,sr,ir,1)}if(tr.length===4){var or=tr.map(getTokenColorValue),nr=or[0],sr=or[1],ir=or[2],ar=or[3];return pack(nr,sr,ir,ar)}return 0};function hue2rgb(er,_e,tr){return tr<0&&(tr+=1),tr>=1&&(tr-=1),tr<1/6?(_e-er)*tr*6+er:tr<1/2?_e:tr<2/3?(_e-er)*6*(2/3-tr)+er:er}var hsl=function(er,_e){var tr=_e.filter(nonFunctionArgSeparator),rr=tr[0],nr=tr[1],sr=tr[2],ir=tr[3],or=(rr.type===17?deg(rr.number):angle.parse(er,rr))/(Math.PI*2),ar=isLengthPercentage(nr)?nr.number/100:0,lr=isLengthPercentage(sr)?sr.number/100:0,cr=typeof ir<"u"&&isLengthPercentage(ir)?getAbsoluteValue(ir,1):1;if(ar===0)return pack(lr*255,lr*255,lr*255,1);var Ar=lr<=.5?lr*(ar+1):lr+ar-lr*ar,ur=lr*2-Ar,dr=hue2rgb(ur,Ar,or+1/3),mr=hue2rgb(ur,Ar,or),pr=hue2rgb(ur,Ar,or-1/3);return pack(dr*255,mr*255,pr*255,cr)},SUPPORTED_COLOR_FUNCTIONS={hsl,hsla:hsl,rgb,rgba:rgb},parseColor=function(er,_e){return color$1.parse(er,Parser.create(_e).parseComponentValue())},COLORS={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},backgroundClip={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(er,_e){return _e.map(function(tr){if(isIdentToken(tr))switch(tr.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundColor={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},parseColorStop=function(er,_e){var tr=color$1.parse(er,_e[0]),rr=_e[1];return rr&&isLengthPercentage(rr)?{color:tr,stop:rr}:{color:tr,stop:null}},processColorStops=function(er,_e){var tr=er[0],rr=er[er.length-1];tr.stop===null&&(tr.stop=ZERO_LENGTH),rr.stop===null&&(rr.stop=HUNDRED_PERCENT);for(var nr=[],sr=0,ir=0;ir<er.length;ir++){var or=er[ir].stop;if(or!==null){var ar=getAbsoluteValue(or,_e);ar>sr?nr.push(ar):nr.push(sr),sr=ar}else nr.push(null)}for(var lr=null,ir=0;ir<nr.length;ir++){var cr=nr[ir];if(cr===null)lr===null&&(lr=ir);else if(lr!==null){for(var Ar=ir-lr,ur=nr[lr-1],dr=(cr-ur)/(Ar+1),mr=1;mr<=Ar;mr++)nr[lr+mr-1]=dr*mr;lr=null}}return er.map(function(pr,yr){var hr=pr.color;return{color:hr,stop:Math.max(Math.min(1,nr[yr]/_e),0)}})},getAngleFromCorner=function(er,_e,tr){var rr=_e/2,nr=tr/2,sr=getAbsoluteValue(er[0],_e)-rr,ir=nr-getAbsoluteValue(er[1],tr);return(Math.atan2(ir,sr)+Math.PI*2)%(Math.PI*2)},calculateGradientDirection=function(er,_e,tr){var rr=typeof er=="number"?er:getAngleFromCorner(er,_e,tr),nr=Math.abs(_e*Math.sin(rr))+Math.abs(tr*Math.cos(rr)),sr=_e/2,ir=tr/2,or=nr/2,ar=Math.sin(rr-Math.PI/2)*or,lr=Math.cos(rr-Math.PI/2)*or;return[nr,sr-lr,sr+lr,ir-ar,ir+ar]},distance=function(er,_e){return Math.sqrt(er*er+_e*_e)},findCorner=function(er,_e,tr,rr,nr){var sr=[[0,0],[0,_e],[er,0],[er,_e]];return sr.reduce(function(ir,or){var ar=or[0],lr=or[1],cr=distance(tr-ar,rr-lr);return(nr?cr<ir.optimumDistance:cr>ir.optimumDistance)?{optimumCorner:or,optimumDistance:cr}:ir},{optimumDistance:nr?1/0:-1/0,optimumCorner:null}).optimumCorner},calculateRadius=function(er,_e,tr,rr,nr){var sr=0,ir=0;switch(er.size){case 0:er.shape===0?sr=ir=Math.min(Math.abs(_e),Math.abs(_e-rr),Math.abs(tr),Math.abs(tr-nr)):er.shape===1&&(sr=Math.min(Math.abs(_e),Math.abs(_e-rr)),ir=Math.min(Math.abs(tr),Math.abs(tr-nr)));break;case 2:if(er.shape===0)sr=ir=Math.min(distance(_e,tr),distance(_e,tr-nr),distance(_e-rr,tr),distance(_e-rr,tr-nr));else if(er.shape===1){var or=Math.min(Math.abs(tr),Math.abs(tr-nr))/Math.min(Math.abs(_e),Math.abs(_e-rr)),ar=findCorner(rr,nr,_e,tr,!0),lr=ar[0],cr=ar[1];sr=distance(lr-_e,(cr-tr)/or),ir=or*sr}break;case 1:er.shape===0?sr=ir=Math.max(Math.abs(_e),Math.abs(_e-rr),Math.abs(tr),Math.abs(tr-nr)):er.shape===1&&(sr=Math.max(Math.abs(_e),Math.abs(_e-rr)),ir=Math.max(Math.abs(tr),Math.abs(tr-nr)));break;case 3:if(er.shape===0)sr=ir=Math.max(distance(_e,tr),distance(_e,tr-nr),distance(_e-rr,tr),distance(_e-rr,tr-nr));else if(er.shape===1){var or=Math.max(Math.abs(tr),Math.abs(tr-nr))/Math.max(Math.abs(_e),Math.abs(_e-rr)),Ar=findCorner(rr,nr,_e,tr,!1),lr=Ar[0],cr=Ar[1];sr=distance(lr-_e,(cr-tr)/or),ir=or*sr}break}return Array.isArray(er.size)&&(sr=getAbsoluteValue(er.size[0],rr),ir=er.size.length===2?getAbsoluteValue(er.size[1],nr):sr),[sr,ir]},linearGradient=function(er,_e){var tr=deg(180),rr=[];return parseFunctionArgs(_e).forEach(function(nr,sr){if(sr===0){var ir=nr[0];if(ir.type===20&&ir.value==="to"){tr=parseNamedSide(nr);return}else if(isAngle(ir)){tr=angle.parse(er,ir);return}}var or=parseColorStop(er,nr);rr.push(or)}),{angle:tr,stops:rr,type:1}},prefixLinearGradient=function(er,_e){var tr=deg(180),rr=[];return parseFunctionArgs(_e).forEach(function(nr,sr){if(sr===0){var ir=nr[0];if(ir.type===20&&["top","left","right","bottom"].indexOf(ir.value)!==-1){tr=parseNamedSide(nr);return}else if(isAngle(ir)){tr=(angle.parse(er,ir)+deg(270))%deg(360);return}}var or=parseColorStop(er,nr);rr.push(or)}),{angle:tr,stops:rr,type:1}},webkitGradient=function(er,_e){var tr=deg(180),rr=[],nr=1,sr=0,ir=3,or=[];return parseFunctionArgs(_e).forEach(function(ar,lr){var cr=ar[0];if(lr===0){if(isIdentToken(cr)&&cr.value==="linear"){nr=1;return}else if(isIdentToken(cr)&&cr.value==="radial"){nr=2;return}}if(cr.type===18){if(cr.name==="from"){var Ar=color$1.parse(er,cr.values[0]);rr.push({stop:ZERO_LENGTH,color:Ar})}else if(cr.name==="to"){var Ar=color$1.parse(er,cr.values[0]);rr.push({stop:HUNDRED_PERCENT,color:Ar})}else if(cr.name==="color-stop"){var ur=cr.values.filter(nonFunctionArgSeparator);if(ur.length===2){var Ar=color$1.parse(er,ur[1]),dr=ur[0];isNumberToken(dr)&&rr.push({stop:{type:16,number:dr.number*100,flags:dr.flags},color:Ar})}}}}),nr===1?{angle:(tr+deg(180))%deg(360),stops:rr,type:nr}:{size:ir,shape:sr,stops:rr,position:or,type:nr}},CLOSEST_SIDE="closest-side",FARTHEST_SIDE="farthest-side",CLOSEST_CORNER="closest-corner",FARTHEST_CORNER="farthest-corner",CIRCLE="circle",ELLIPSE="ellipse",COVER="cover",CONTAIN="contain",radialGradient=function(er,_e){var tr=0,rr=3,nr=[],sr=[];return parseFunctionArgs(_e).forEach(function(ir,or){var ar=!0;if(or===0){var lr=!1;ar=ir.reduce(function(Ar,ur){if(lr)if(isIdentToken(ur))switch(ur.value){case"center":return sr.push(FIFTY_PERCENT),Ar;case"top":case"left":return sr.push(ZERO_LENGTH),Ar;case"right":case"bottom":return sr.push(HUNDRED_PERCENT),Ar}else(isLengthPercentage(ur)||isLength(ur))&&sr.push(ur);else if(isIdentToken(ur))switch(ur.value){case CIRCLE:return tr=0,!1;case ELLIPSE:return tr=1,!1;case"at":return lr=!0,!1;case CLOSEST_SIDE:return rr=0,!1;case COVER:case FARTHEST_SIDE:return rr=1,!1;case CONTAIN:case CLOSEST_CORNER:return rr=2,!1;case FARTHEST_CORNER:return rr=3,!1}else if(isLength(ur)||isLengthPercentage(ur))return Array.isArray(rr)||(rr=[]),rr.push(ur),!1;return Ar},ar)}if(ar){var cr=parseColorStop(er,ir);nr.push(cr)}}),{size:rr,shape:tr,stops:nr,position:sr,type:2}},prefixRadialGradient=function(er,_e){var tr=0,rr=3,nr=[],sr=[];return parseFunctionArgs(_e).forEach(function(ir,or){var ar=!0;if(or===0?ar=ir.reduce(function(cr,Ar){if(isIdentToken(Ar))switch(Ar.value){case"center":return sr.push(FIFTY_PERCENT),!1;case"top":case"left":return sr.push(ZERO_LENGTH),!1;case"right":case"bottom":return sr.push(HUNDRED_PERCENT),!1}else if(isLengthPercentage(Ar)||isLength(Ar))return sr.push(Ar),!1;return cr},ar):or===1&&(ar=ir.reduce(function(cr,Ar){if(isIdentToken(Ar))switch(Ar.value){case CIRCLE:return tr=0,!1;case ELLIPSE:return tr=1,!1;case CONTAIN:case CLOSEST_SIDE:return rr=0,!1;case FARTHEST_SIDE:return rr=1,!1;case CLOSEST_CORNER:return rr=2,!1;case COVER:case FARTHEST_CORNER:return rr=3,!1}else if(isLength(Ar)||isLengthPercentage(Ar))return Array.isArray(rr)||(rr=[]),rr.push(Ar),!1;return cr},ar)),ar){var lr=parseColorStop(er,ir);nr.push(lr)}}),{size:rr,shape:tr,stops:nr,position:sr,type:2}},isLinearGradient=function(er){return er.type===1},isRadialGradient=function(er){return er.type===2},image={name:"image",parse:function(er,_e){if(_e.type===22){var tr={url:_e.value,type:0};return er.cache.addImage(_e.value),tr}if(_e.type===18){var rr=SUPPORTED_IMAGE_FUNCTIONS[_e.name];if(typeof rr>"u")throw new Error('Attempting to parse an unsupported image function "'+_e.name+'"');return rr(er,_e.values)}throw new Error("Unsupported image type "+_e.type)}};function isSupportedImage(er){return!(er.type===20&&er.value==="none")&&(er.type!==18||!!SUPPORTED_IMAGE_FUNCTIONS[er.name])}var SUPPORTED_IMAGE_FUNCTIONS={"linear-gradient":linearGradient,"-moz-linear-gradient":prefixLinearGradient,"-ms-linear-gradient":prefixLinearGradient,"-o-linear-gradient":prefixLinearGradient,"-webkit-linear-gradient":prefixLinearGradient,"radial-gradient":radialGradient,"-moz-radial-gradient":prefixRadialGradient,"-ms-radial-gradient":prefixRadialGradient,"-o-radial-gradient":prefixRadialGradient,"-webkit-radial-gradient":prefixRadialGradient,"-webkit-gradient":webkitGradient},backgroundImage={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(er,_e){if(_e.length===0)return[];var tr=_e[0];return tr.type===20&&tr.value==="none"?[]:_e.filter(function(rr){return nonFunctionArgSeparator(rr)&&isSupportedImage(rr)}).map(function(rr){return image.parse(er,rr)})}},backgroundOrigin={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(er,_e){return _e.map(function(tr){if(isIdentToken(tr))switch(tr.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundPosition={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(er,_e){return parseFunctionArgs(_e).map(function(tr){return tr.filter(isLengthPercentage)}).map(parseLengthPercentageTuple)}},backgroundRepeat={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(er,_e){return parseFunctionArgs(_e).map(function(tr){return tr.filter(isIdentToken).map(function(rr){return rr.value}).join(" ")}).map(parseBackgroundRepeat)}},parseBackgroundRepeat=function(er){switch(er){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},BACKGROUND_SIZE;(function(er){er.AUTO="auto",er.CONTAIN="contain",er.COVER="cover"})(BACKGROUND_SIZE||(BACKGROUND_SIZE={}));var backgroundSize={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(er,_e){return parseFunctionArgs(_e).map(function(tr){return tr.filter(isBackgroundSizeInfoToken)})}},isBackgroundSizeInfoToken=function(er){return isIdentToken(er)||isLengthPercentage(er)},borderColorForSide=function(er){return{name:"border-"+er+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},borderTopColor=borderColorForSide("top"),borderRightColor=borderColorForSide("right"),borderBottomColor=borderColorForSide("bottom"),borderLeftColor=borderColorForSide("left"),borderRadiusForSide=function(er){return{name:"border-radius-"+er,initialValue:"0 0",prefix:!1,type:1,parse:function(_e,tr){return parseLengthPercentageTuple(tr.filter(isLengthPercentage))}}},borderTopLeftRadius=borderRadiusForSide("top-left"),borderTopRightRadius=borderRadiusForSide("top-right"),borderBottomRightRadius=borderRadiusForSide("bottom-right"),borderBottomLeftRadius=borderRadiusForSide("bottom-left"),borderStyleForSide=function(er){return{name:"border-"+er+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(_e,tr){switch(tr){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},borderTopStyle=borderStyleForSide("top"),borderRightStyle=borderStyleForSide("right"),borderBottomStyle=borderStyleForSide("bottom"),borderLeftStyle=borderStyleForSide("left"),borderWidthForSide=function(er){return{name:"border-"+er+"-width",initialValue:"0",type:0,prefix:!1,parse:function(_e,tr){return isDimensionToken(tr)?tr.number:0}}},borderTopWidth=borderWidthForSide("top"),borderRightWidth=borderWidthForSide("right"),borderBottomWidth=borderWidthForSide("bottom"),borderLeftWidth=borderWidthForSide("left"),color={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},direction={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(er,_e){switch(_e){case"rtl":return 1;case"ltr":default:return 0}}},display={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(er,_e){return _e.filter(isIdentToken).reduce(function(tr,rr){return tr|parseDisplayValue(rr.value)},0)}},parseDisplayValue=function(er){switch(er){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},float={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(er,_e){switch(_e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},letterSpacing={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(er,_e){return _e.type===20&&_e.value==="normal"?0:_e.type===17||_e.type===15?_e.number:0}},LINE_BREAK;(function(er){er.NORMAL="normal",er.STRICT="strict"})(LINE_BREAK||(LINE_BREAK={}));var lineBreak={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(er,_e){switch(_e){case"strict":return LINE_BREAK.STRICT;case"normal":default:return LINE_BREAK.NORMAL}}},lineHeight={name:"line-height",initialValue:"normal",prefix:!1,type:4},computeLineHeight=function(er,_e){return isIdentToken(er)&&er.value==="normal"?1.2*_e:er.type===17?_e*er.number:isLengthPercentage(er)?getAbsoluteValue(er,_e):_e},listStyleImage={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(er,_e){return _e.type===20&&_e.value==="none"?null:image.parse(er,_e)}},listStylePosition={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(er,_e){switch(_e){case"inside":return 0;case"outside":default:return 1}}},listStyleType={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(er,_e){switch(_e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},marginForSide=function(er){return{name:"margin-"+er,initialValue:"0",prefix:!1,type:4}},marginTop=marginForSide("top"),marginRight=marginForSide("right"),marginBottom=marginForSide("bottom"),marginLeft=marginForSide("left"),overflow={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(er,_e){return _e.filter(isIdentToken).map(function(tr){switch(tr.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},overflowWrap={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(er,_e){switch(_e){case"break-word":return"break-word";case"normal":default:return"normal"}}},paddingForSide=function(er){return{name:"padding-"+er,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},paddingTop=paddingForSide("top"),paddingRight=paddingForSide("right"),paddingBottom=paddingForSide("bottom"),paddingLeft=paddingForSide("left"),textAlign={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(er,_e){switch(_e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},position={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(er,_e){switch(_e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},textShadow={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(er,_e){return _e.length===1&&isIdentWithValue(_e[0],"none")?[]:parseFunctionArgs(_e).map(function(tr){for(var rr={color:COLORS.TRANSPARENT,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH},nr=0,sr=0;sr<tr.length;sr++){var ir=tr[sr];isLength(ir)?(nr===0?rr.offsetX=ir:nr===1?rr.offsetY=ir:rr.blur=ir,nr++):rr.color=color$1.parse(er,ir)}return rr})}},textTransform={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(er,_e){switch(_e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},transform$1={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(er,_e){if(_e.type===20&&_e.value==="none")return null;if(_e.type===18){var tr=SUPPORTED_TRANSFORM_FUNCTIONS[_e.name];if(typeof tr>"u")throw new Error('Attempting to parse an unsupported transform function "'+_e.name+'"');return tr(_e.values)}return null}},matrix=function(er){var _e=er.filter(function(tr){return tr.type===17}).map(function(tr){return tr.number});return _e.length===6?_e:null},matrix3d=function(er){var _e=er.filter(function(ar){return ar.type===17}).map(function(ar){return ar.number}),tr=_e[0],rr=_e[1];_e[2],_e[3];var nr=_e[4],sr=_e[5];_e[6],_e[7],_e[8],_e[9],_e[10],_e[11];var ir=_e[12],or=_e[13];return _e[14],_e[15],_e.length===16?[tr,rr,nr,sr,ir,or]:null},SUPPORTED_TRANSFORM_FUNCTIONS={matrix,matrix3d},DEFAULT_VALUE={type:16,number:50,flags:FLAG_INTEGER},DEFAULT=[DEFAULT_VALUE,DEFAULT_VALUE],transformOrigin={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(er,_e){var tr=_e.filter(isLengthPercentage);return tr.length!==2?DEFAULT:[tr[0],tr[1]]}},visibility={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(er,_e){switch(_e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},WORD_BREAK;(function(er){er.NORMAL="normal",er.BREAK_ALL="break-all",er.KEEP_ALL="keep-all"})(WORD_BREAK||(WORD_BREAK={}));var wordBreak={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(er,_e){switch(_e){case"break-all":return WORD_BREAK.BREAK_ALL;case"keep-all":return WORD_BREAK.KEEP_ALL;case"normal":default:return WORD_BREAK.NORMAL}}},zIndex={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(er,_e){if(_e.type===20)return{auto:!0,order:0};if(isNumberToken(_e))return{auto:!1,order:_e.number};throw new Error("Invalid z-index number parsed")}},time={name:"time",parse:function(er,_e){if(_e.type===15)switch(_e.unit.toLowerCase()){case"s":return 1e3*_e.number;case"ms":return _e.number}throw new Error("Unsupported time type")}},opacity={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(er,_e){return isNumberToken(_e)?_e.number:1}},textDecorationColor={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},textDecorationLine={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(er,_e){return _e.filter(isIdentToken).map(function(tr){switch(tr.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(tr){return tr!==0})}},fontFamily={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(er,_e){var tr=[],rr=[];return _e.forEach(function(nr){switch(nr.type){case 20:case 0:tr.push(nr.value);break;case 17:tr.push(nr.number.toString());break;case 4:rr.push(tr.join(" ")),tr.length=0;break}}),tr.length&&rr.push(tr.join(" ")),rr.map(function(nr){return nr.indexOf(" ")===-1?nr:"'"+nr+"'"})}},fontSize={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},fontWeight={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(er,_e){if(isNumberToken(_e))return _e.number;if(isIdentToken(_e))switch(_e.value){case"bold":return 700;case"normal":default:return 400}return 400}},fontVariant={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(er,_e){return _e.filter(isIdentToken).map(function(tr){return tr.value})}},fontStyle={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(er,_e){switch(_e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},contains=function(er,_e){return(er&_e)!==0},content={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(er,_e){if(_e.length===0)return[];var tr=_e[0];return tr.type===20&&tr.value==="none"?[]:_e}},counterIncrement={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(er,_e){if(_e.length===0)return null;var tr=_e[0];if(tr.type===20&&tr.value==="none")return null;for(var rr=[],nr=_e.filter(nonWhiteSpace),sr=0;sr<nr.length;sr++){var ir=nr[sr],or=nr[sr+1];if(ir.type===20){var ar=or&&isNumberToken(or)?or.number:1;rr.push({counter:ir.value,increment:ar})}}return rr}},counterReset={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(er,_e){if(_e.length===0)return[];for(var tr=[],rr=_e.filter(nonWhiteSpace),nr=0;nr<rr.length;nr++){var sr=rr[nr],ir=rr[nr+1];if(isIdentToken(sr)&&sr.value!=="none"){var or=ir&&isNumberToken(ir)?ir.number:0;tr.push({counter:sr.value,reset:or})}}return tr}},duration={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(er,_e){return _e.filter(isDimensionToken).map(function(tr){return time.parse(er,tr)})}},quotes={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(er,_e){if(_e.length===0)return null;var tr=_e[0];if(tr.type===20&&tr.value==="none")return null;var rr=[],nr=_e.filter(isStringToken);if(nr.length%2!==0)return null;for(var sr=0;sr<nr.length;sr+=2){var ir=nr[sr].value,or=nr[sr+1].value;rr.push({open:ir,close:or})}return rr}},getQuote=function(er,_e,tr){if(!er)return"";var rr=er[Math.min(_e,er.length-1)];return rr?tr?rr.open:rr.close:""},boxShadow={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(er,_e){return _e.length===1&&isIdentWithValue(_e[0],"none")?[]:parseFunctionArgs(_e).map(function(tr){for(var rr={color:255,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH,spread:ZERO_LENGTH,inset:!1},nr=0,sr=0;sr<tr.length;sr++){var ir=tr[sr];isIdentWithValue(ir,"inset")?rr.inset=!0:isLength(ir)?(nr===0?rr.offsetX=ir:nr===1?rr.offsetY=ir:nr===2?rr.blur=ir:rr.spread=ir,nr++):rr.color=color$1.parse(er,ir)}return rr})}},paintOrder={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(er,_e){var tr=[0,1,2],rr=[];return _e.filter(isIdentToken).forEach(function(nr){switch(nr.value){case"stroke":rr.push(1);break;case"fill":rr.push(0);break;case"markers":rr.push(2);break}}),tr.forEach(function(nr){rr.indexOf(nr)===-1&&rr.push(nr)}),rr}},webkitTextStrokeColor={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},webkitTextStrokeWidth={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(er,_e){return isDimensionToken(_e)?_e.number:0}},CSSParsedDeclaration=function(){function er(_e,tr){var rr,nr;this.animationDuration=parse(_e,duration,tr.animationDuration),this.backgroundClip=parse(_e,backgroundClip,tr.backgroundClip),this.backgroundColor=parse(_e,backgroundColor,tr.backgroundColor),this.backgroundImage=parse(_e,backgroundImage,tr.backgroundImage),this.backgroundOrigin=parse(_e,backgroundOrigin,tr.backgroundOrigin),this.backgroundPosition=parse(_e,backgroundPosition,tr.backgroundPosition),this.backgroundRepeat=parse(_e,backgroundRepeat,tr.backgroundRepeat),this.backgroundSize=parse(_e,backgroundSize,tr.backgroundSize),this.borderTopColor=parse(_e,borderTopColor,tr.borderTopColor),this.borderRightColor=parse(_e,borderRightColor,tr.borderRightColor),this.borderBottomColor=parse(_e,borderBottomColor,tr.borderBottomColor),this.borderLeftColor=parse(_e,borderLeftColor,tr.borderLeftColor),this.borderTopLeftRadius=parse(_e,borderTopLeftRadius,tr.borderTopLeftRadius),this.borderTopRightRadius=parse(_e,borderTopRightRadius,tr.borderTopRightRadius),this.borderBottomRightRadius=parse(_e,borderBottomRightRadius,tr.borderBottomRightRadius),this.borderBottomLeftRadius=parse(_e,borderBottomLeftRadius,tr.borderBottomLeftRadius),this.borderTopStyle=parse(_e,borderTopStyle,tr.borderTopStyle),this.borderRightStyle=parse(_e,borderRightStyle,tr.borderRightStyle),this.borderBottomStyle=parse(_e,borderBottomStyle,tr.borderBottomStyle),this.borderLeftStyle=parse(_e,borderLeftStyle,tr.borderLeftStyle),this.borderTopWidth=parse(_e,borderTopWidth,tr.borderTopWidth),this.borderRightWidth=parse(_e,borderRightWidth,tr.borderRightWidth),this.borderBottomWidth=parse(_e,borderBottomWidth,tr.borderBottomWidth),this.borderLeftWidth=parse(_e,borderLeftWidth,tr.borderLeftWidth),this.boxShadow=parse(_e,boxShadow,tr.boxShadow),this.color=parse(_e,color,tr.color),this.direction=parse(_e,direction,tr.direction),this.display=parse(_e,display,tr.display),this.float=parse(_e,float,tr.cssFloat),this.fontFamily=parse(_e,fontFamily,tr.fontFamily),this.fontSize=parse(_e,fontSize,tr.fontSize),this.fontStyle=parse(_e,fontStyle,tr.fontStyle),this.fontVariant=parse(_e,fontVariant,tr.fontVariant),this.fontWeight=parse(_e,fontWeight,tr.fontWeight),this.letterSpacing=parse(_e,letterSpacing,tr.letterSpacing),this.lineBreak=parse(_e,lineBreak,tr.lineBreak),this.lineHeight=parse(_e,lineHeight,tr.lineHeight),this.listStyleImage=parse(_e,listStyleImage,tr.listStyleImage),this.listStylePosition=parse(_e,listStylePosition,tr.listStylePosition),this.listStyleType=parse(_e,listStyleType,tr.listStyleType),this.marginTop=parse(_e,marginTop,tr.marginTop),this.marginRight=parse(_e,marginRight,tr.marginRight),this.marginBottom=parse(_e,marginBottom,tr.marginBottom),this.marginLeft=parse(_e,marginLeft,tr.marginLeft),this.opacity=parse(_e,opacity,tr.opacity);var sr=parse(_e,overflow,tr.overflow);this.overflowX=sr[0],this.overflowY=sr[sr.length>1?1:0],this.overflowWrap=parse(_e,overflowWrap,tr.overflowWrap),this.paddingTop=parse(_e,paddingTop,tr.paddingTop),this.paddingRight=parse(_e,paddingRight,tr.paddingRight),this.paddingBottom=parse(_e,paddingBottom,tr.paddingBottom),this.paddingLeft=parse(_e,paddingLeft,tr.paddingLeft),this.paintOrder=parse(_e,paintOrder,tr.paintOrder),this.position=parse(_e,position,tr.position),this.textAlign=parse(_e,textAlign,tr.textAlign),this.textDecorationColor=parse(_e,textDecorationColor,(rr=tr.textDecorationColor)!==null&&rr!==void 0?rr:tr.color),this.textDecorationLine=parse(_e,textDecorationLine,(nr=tr.textDecorationLine)!==null&&nr!==void 0?nr:tr.textDecoration),this.textShadow=parse(_e,textShadow,tr.textShadow),this.textTransform=parse(_e,textTransform,tr.textTransform),this.transform=parse(_e,transform$1,tr.transform),this.transformOrigin=parse(_e,transformOrigin,tr.transformOrigin),this.visibility=parse(_e,visibility,tr.visibility),this.webkitTextStrokeColor=parse(_e,webkitTextStrokeColor,tr.webkitTextStrokeColor),this.webkitTextStrokeWidth=parse(_e,webkitTextStrokeWidth,tr.webkitTextStrokeWidth),this.wordBreak=parse(_e,wordBreak,tr.wordBreak),this.zIndex=parse(_e,zIndex,tr.zIndex)}return er.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},er.prototype.isTransparent=function(){return isTransparent(this.backgroundColor)},er.prototype.isTransformed=function(){return this.transform!==null},er.prototype.isPositioned=function(){return this.position!==0},er.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},er.prototype.isFloating=function(){return this.float!==0},er.prototype.isInlineLevel=function(){return contains(this.display,4)||contains(this.display,33554432)||contains(this.display,268435456)||contains(this.display,536870912)||contains(this.display,67108864)||contains(this.display,134217728)},er}(),CSSParsedPseudoDeclaration=function(){function er(_e,tr){this.content=parse(_e,content,tr.content),this.quotes=parse(_e,quotes,tr.quotes)}return er}(),CSSParsedCounterDeclaration=function(){function er(_e,tr){this.counterIncrement=parse(_e,counterIncrement,tr.counterIncrement),this.counterReset=parse(_e,counterReset,tr.counterReset)}return er}(),parse=function(er,_e,tr){var rr=new Tokenizer,nr=tr!==null&&typeof tr<"u"?tr.toString():_e.initialValue;rr.write(nr);var sr=new Parser(rr.read());switch(_e.type){case 2:var ir=sr.parseComponentValue();return _e.parse(er,isIdentToken(ir)?ir.value:_e.initialValue);case 0:return _e.parse(er,sr.parseComponentValue());case 1:return _e.parse(er,sr.parseComponentValues());case 4:return sr.parseComponentValue();case 3:switch(_e.format){case"angle":return angle.parse(er,sr.parseComponentValue());case"color":return color$1.parse(er,sr.parseComponentValue());case"image":return image.parse(er,sr.parseComponentValue());case"length":var or=sr.parseComponentValue();return isLength(or)?or:ZERO_LENGTH;case"length-percentage":var ar=sr.parseComponentValue();return isLengthPercentage(ar)?ar:ZERO_LENGTH;case"time":return time.parse(er,sr.parseComponentValue())}break}},elementDebuggerAttribute="data-html2canvas-debug",getElementDebugType=function(er){var _e=er.getAttribute(elementDebuggerAttribute);switch(_e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},isDebugging=function(er,_e){var tr=getElementDebugType(er);return tr===1||_e===tr},ElementContainer=function(){function er(_e,tr){if(this.context=_e,this.textNodes=[],this.elements=[],this.flags=0,isDebugging(tr,3))debugger;this.styles=new CSSParsedDeclaration(_e,window.getComputedStyle(tr,null)),isHTMLElementNode(tr)&&(this.styles.animationDuration.some(function(rr){return rr>0})&&(tr.style.animationDuration="0s"),this.styles.transform!==null&&(tr.style.transform="none")),this.bounds=parseBounds(this.context,tr),isDebugging(tr,4)&&(this.flags|=16)}return er}(),base64="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",chars$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1$2=0;i$1$2<chars$1.length;i$1$2++)lookup$1[chars$1.charCodeAt(i$1$2)]=i$1$2;var decode=function(er){var _e=er.length*.75,tr=er.length,rr,nr=0,sr,ir,or,ar;er[er.length-1]==="="&&(_e--,er[er.length-2]==="="&&_e--);var lr=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(_e):new Array(_e),cr=Array.isArray(lr)?lr:new Uint8Array(lr);for(rr=0;rr<tr;rr+=4)sr=lookup$1[er.charCodeAt(rr)],ir=lookup$1[er.charCodeAt(rr+1)],or=lookup$1[er.charCodeAt(rr+2)],ar=lookup$1[er.charCodeAt(rr+3)],cr[nr++]=sr<<2|ir>>4,cr[nr++]=(ir&15)<<4|or>>2,cr[nr++]=(or&3)<<6|ar&63;return lr},polyUint16Array=function(er){for(var _e=er.length,tr=[],rr=0;rr<_e;rr+=2)tr.push(er[rr+1]<<8|er[rr]);return tr},polyUint32Array=function(er){for(var _e=er.length,tr=[],rr=0;rr<_e;rr+=4)tr.push(er[rr+3]<<24|er[rr+2]<<16|er[rr+1]<<8|er[rr]);return tr},UTRIE2_SHIFT_2=5,UTRIE2_SHIFT_1=11,UTRIE2_INDEX_SHIFT=2,UTRIE2_SHIFT_1_2=UTRIE2_SHIFT_1-UTRIE2_SHIFT_2,UTRIE2_LSCP_INDEX_2_OFFSET=65536>>UTRIE2_SHIFT_2,UTRIE2_DATA_BLOCK_LENGTH=1<<UTRIE2_SHIFT_2,UTRIE2_DATA_MASK=UTRIE2_DATA_BLOCK_LENGTH-1,UTRIE2_LSCP_INDEX_2_LENGTH=1024>>UTRIE2_SHIFT_2,UTRIE2_INDEX_2_BMP_LENGTH=UTRIE2_LSCP_INDEX_2_OFFSET+UTRIE2_LSCP_INDEX_2_LENGTH,UTRIE2_UTF8_2B_INDEX_2_OFFSET=UTRIE2_INDEX_2_BMP_LENGTH,UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,UTRIE2_INDEX_1_OFFSET=UTRIE2_UTF8_2B_INDEX_2_OFFSET+UTRIE2_UTF8_2B_INDEX_2_LENGTH,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>UTRIE2_SHIFT_1,UTRIE2_INDEX_2_BLOCK_LENGTH=1<<UTRIE2_SHIFT_1_2,UTRIE2_INDEX_2_MASK=UTRIE2_INDEX_2_BLOCK_LENGTH-1,slice16=function(er,_e,tr){return er.slice?er.slice(_e,tr):new Uint16Array(Array.prototype.slice.call(er,_e,tr))},slice32=function(er,_e,tr){return er.slice?er.slice(_e,tr):new Uint32Array(Array.prototype.slice.call(er,_e,tr))},createTrieFromBase64=function(er,_e){var tr=decode(er),rr=Array.isArray(tr)?polyUint32Array(tr):new Uint32Array(tr),nr=Array.isArray(tr)?polyUint16Array(tr):new Uint16Array(tr),sr=24,ir=slice16(nr,sr/2,rr[4]/2),or=rr[5]===2?slice16(nr,(sr+rr[4])/2):slice32(rr,Math.ceil((sr+rr[4])/4));return new Trie(rr[0],rr[1],rr[2],rr[3],ir,or)},Trie=function(){function er(_e,tr,rr,nr,sr,ir){this.initialValue=_e,this.errorValue=tr,this.highStart=rr,this.highValueIndex=nr,this.index=sr,this.data=ir}return er.prototype.get=function(_e){var tr;if(_e>=0){if(_e<55296||_e>56319&&_e<=65535)return tr=this.index[_e>>UTRIE2_SHIFT_2],tr=(tr<<UTRIE2_INDEX_SHIFT)+(_e&UTRIE2_DATA_MASK),this.data[tr];if(_e<=65535)return tr=this.index[UTRIE2_LSCP_INDEX_2_OFFSET+(_e-55296>>UTRIE2_SHIFT_2)],tr=(tr<<UTRIE2_INDEX_SHIFT)+(_e&UTRIE2_DATA_MASK),this.data[tr];if(_e<this.highStart)return tr=UTRIE2_INDEX_1_OFFSET-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH+(_e>>UTRIE2_SHIFT_1),tr=this.index[tr],tr+=_e>>UTRIE2_SHIFT_2&UTRIE2_INDEX_2_MASK,tr=this.index[tr],tr=(tr<<UTRIE2_INDEX_SHIFT)+(_e&UTRIE2_DATA_MASK),this.data[tr];if(_e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},er}(),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$4=0;i$4<chars.length;i$4++)lookup[chars.charCodeAt(i$4)]=i$4;var Prepend=1,CR=2,LF=3,Control=4,Extend=5,SpacingMark=7,L$1=8,V$1=9,T$1=10,LV=11,LVT=12,ZWJ=13,Extended_Pictographic=14,RI=15,toCodePoints=function(er){for(var _e=[],tr=0,rr=er.length;tr<rr;){var nr=er.charCodeAt(tr++);if(nr>=55296&&nr<=56319&&tr<rr){var sr=er.charCodeAt(tr++);(sr&64512)===56320?_e.push(((nr&1023)<<10)+(sr&1023)+65536):(_e.push(nr),tr--)}else _e.push(nr)}return _e},fromCodePoint=function(){for(var er=[],_e=0;_e<arguments.length;_e++)er[_e]=arguments[_e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,er);var tr=er.length;if(!tr)return"";for(var rr=[],nr=-1,sr="";++nr<tr;){var ir=er[nr];ir<=65535?rr.push(ir):(ir-=65536,rr.push((ir>>10)+55296,ir%1024+56320)),(nr+1===tr||rr.length>16384)&&(sr+=String.fromCharCode.apply(String,rr),rr.length=0)}return sr},UnicodeTrie=createTrieFromBase64(base64),BREAK_NOT_ALLOWED="",BREAK_ALLOWED="",codePointToClass=function(er){return UnicodeTrie.get(er)},_graphemeBreakAtIndex=function(er,_e,tr){var rr=tr-2,nr=_e[rr],sr=_e[tr-1],ir=_e[tr];if(sr===CR&&ir===LF)return BREAK_NOT_ALLOWED;if(sr===CR||sr===LF||sr===Control||ir===CR||ir===LF||ir===Control)return BREAK_ALLOWED;if(sr===L$1&&[L$1,V$1,LV,LVT].indexOf(ir)!==-1||(sr===LV||sr===V$1)&&(ir===V$1||ir===T$1)||(sr===LVT||sr===T$1)&&ir===T$1||ir===ZWJ||ir===Extend||ir===SpacingMark||sr===Prepend)return BREAK_NOT_ALLOWED;if(sr===ZWJ&&ir===Extended_Pictographic){for(;nr===Extend;)nr=_e[--rr];if(nr===Extended_Pictographic)return BREAK_NOT_ALLOWED}if(sr===RI&&ir===RI){for(var or=0;nr===RI;)or++,nr=_e[--rr];if(or%2===0)return BREAK_NOT_ALLOWED}return BREAK_ALLOWED},GraphemeBreaker=function(er){var _e=toCodePoints(er),tr=_e.length,rr=0,nr=0,sr=_e.map(codePointToClass);return{next:function(){if(rr>=tr)return{done:!0,value:null};for(var ir=BREAK_NOT_ALLOWED;rr<tr&&(ir=_graphemeBreakAtIndex(_e,sr,++rr))===BREAK_NOT_ALLOWED;);if(ir!==BREAK_NOT_ALLOWED||rr===tr){var or=fromCodePoint.apply(null,_e.slice(nr,rr));return nr=rr,{value:or,done:!1}}return{done:!0,value:null}}}},splitGraphemes=function(er){for(var _e=GraphemeBreaker(er),tr=[],rr;!(rr=_e.next()).done;)rr.value&&tr.push(rr.value.slice());return tr},testRangeBounds=function(er){var _e=123;if(er.createRange){var tr=er.createRange();if(tr.getBoundingClientRect){var rr=er.createElement("boundtest");rr.style.height=_e+"px",rr.style.display="block",er.body.appendChild(rr),tr.selectNode(rr);var nr=tr.getBoundingClientRect(),sr=Math.round(nr.height);if(er.body.removeChild(rr),sr===_e)return!0}}return!1},testIOSLineBreak=function(er){var _e=er.createElement("boundtest");_e.style.width="50px",_e.style.display="block",_e.style.fontSize="12px",_e.style.letterSpacing="0px",_e.style.wordSpacing="0px",er.body.appendChild(_e);var tr=er.createRange();_e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var rr=_e.firstChild,nr=toCodePoints$1(rr.data).map(function(ar){return fromCodePoint$1(ar)}),sr=0,ir={},or=nr.every(function(ar,lr){tr.setStart(rr,sr),tr.setEnd(rr,sr+ar.length);var cr=tr.getBoundingClientRect();sr+=ar.length;var Ar=cr.x>ir.x||cr.y>ir.y;return ir=cr,lr===0?!0:Ar});return er.body.removeChild(_e),or},testCORS=function(){return typeof new Image().crossOrigin<"u"},testResponseType=function(){return typeof new XMLHttpRequest().responseType=="string"},testSVG=function(er){var _e=new Image,tr=er.createElement("canvas"),rr=tr.getContext("2d");if(!rr)return!1;_e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{rr.drawImage(_e,0,0),tr.toDataURL()}catch{return!1}return!0},isGreenPixel=function(er){return er[0]===0&&er[1]===255&&er[2]===0&&er[3]===255},testForeignObject=function(er){var _e=er.createElement("canvas"),tr=100;_e.width=tr,_e.height=tr;var rr=_e.getContext("2d");if(!rr)return Promise.reject(!1);rr.fillStyle="rgb(0, 255, 0)",rr.fillRect(0,0,tr,tr);var nr=new Image,sr=_e.toDataURL();nr.src=sr;var ir=createForeignObjectSVG(tr,tr,0,0,nr);return rr.fillStyle="red",rr.fillRect(0,0,tr,tr),loadSerializedSVG$1(ir).then(function(or){rr.drawImage(or,0,0);var ar=rr.getImageData(0,0,tr,tr).data;rr.fillStyle="red",rr.fillRect(0,0,tr,tr);var lr=er.createElement("div");return lr.style.backgroundImage="url("+sr+")",lr.style.height=tr+"px",isGreenPixel(ar)?loadSerializedSVG$1(createForeignObjectSVG(tr,tr,0,0,lr)):Promise.reject(!1)}).then(function(or){return rr.drawImage(or,0,0),isGreenPixel(rr.getImageData(0,0,tr,tr).data)}).catch(function(){return!1})},createForeignObjectSVG=function(er,_e,tr,rr,nr){var sr="http://www.w3.org/2000/svg",ir=document.createElementNS(sr,"svg"),or=document.createElementNS(sr,"foreignObject");return ir.setAttributeNS(null,"width",er.toString()),ir.setAttributeNS(null,"height",_e.toString()),or.setAttributeNS(null,"width","100%"),or.setAttributeNS(null,"height","100%"),or.setAttributeNS(null,"x",tr.toString()),or.setAttributeNS(null,"y",rr.toString()),or.setAttributeNS(null,"externalResourcesRequired","true"),ir.appendChild(or),or.appendChild(nr),ir},loadSerializedSVG$1=function(er){return new Promise(function(_e,tr){var rr=new Image;rr.onload=function(){return _e(rr)},rr.onerror=tr,rr.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(er))})},FEATURES={get SUPPORT_RANGE_BOUNDS(){var er=testRangeBounds(document);return Object.defineProperty(FEATURES,"SUPPORT_RANGE_BOUNDS",{value:er}),er},get SUPPORT_WORD_BREAKING(){var er=FEATURES.SUPPORT_RANGE_BOUNDS&&testIOSLineBreak(document);return Object.defineProperty(FEATURES,"SUPPORT_WORD_BREAKING",{value:er}),er},get SUPPORT_SVG_DRAWING(){var er=testSVG(document);return Object.defineProperty(FEATURES,"SUPPORT_SVG_DRAWING",{value:er}),er},get SUPPORT_FOREIGNOBJECT_DRAWING(){var er=typeof Array.from=="function"&&typeof window.fetch=="function"?testForeignObject(document):Promise.resolve(!1);return Object.defineProperty(FEATURES,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:er}),er},get SUPPORT_CORS_IMAGES(){var er=testCORS();return Object.defineProperty(FEATURES,"SUPPORT_CORS_IMAGES",{value:er}),er},get SUPPORT_RESPONSE_TYPE(){var er=testResponseType();return Object.defineProperty(FEATURES,"SUPPORT_RESPONSE_TYPE",{value:er}),er},get SUPPORT_CORS_XHR(){var er="withCredentials"in new XMLHttpRequest;return Object.defineProperty(FEATURES,"SUPPORT_CORS_XHR",{value:er}),er},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var er=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(FEATURES,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:er}),er}},TextBounds=function(){function er(_e,tr){this.text=_e,this.bounds=tr}return er}(),parseTextBounds=function(er,_e,tr,rr){var nr=breakText(_e,tr),sr=[],ir=0;return nr.forEach(function(or){if(tr.textDecorationLine.length||or.trim().length>0)if(FEATURES.SUPPORT_RANGE_BOUNDS){var ar=createRange(rr,ir,or.length).getClientRects();if(ar.length>1){var lr=segmentGraphemes(or),cr=0;lr.forEach(function(ur){sr.push(new TextBounds(ur,Bounds.fromDOMRectList(er,createRange(rr,cr+ir,ur.length).getClientRects()))),cr+=ur.length})}else sr.push(new TextBounds(or,Bounds.fromDOMRectList(er,ar)))}else{var Ar=rr.splitText(or.length);sr.push(new TextBounds(or,getWrapperBounds(er,rr))),rr=Ar}else FEATURES.SUPPORT_RANGE_BOUNDS||(rr=rr.splitText(or.length));ir+=or.length}),sr},getWrapperBounds=function(er,_e){var tr=_e.ownerDocument;if(tr){var rr=tr.createElement("html2canvaswrapper");rr.appendChild(_e.cloneNode(!0));var nr=_e.parentNode;if(nr){nr.replaceChild(rr,_e);var sr=parseBounds(er,rr);return rr.firstChild&&nr.replaceChild(rr.firstChild,rr),sr}}return Bounds.EMPTY},createRange=function(er,_e,tr){var rr=er.ownerDocument;if(!rr)throw new Error("Node has no owner document");var nr=rr.createRange();return nr.setStart(er,_e),nr.setEnd(er,_e+tr),nr},segmentGraphemes=function(er){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var _e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(_e.segment(er)).map(function(tr){return tr.segment})}return splitGraphemes(er)},segmentWords=function(er,_e){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var tr=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(tr.segment(er)).map(function(rr){return rr.segment})}return breakWords(er,_e)},breakText=function(er,_e){return _e.letterSpacing!==0?segmentGraphemes(er):segmentWords(er,_e)},wordSeparators=[32,160,4961,65792,65793,4153,4241],breakWords=function(er,_e){for(var tr=LineBreaker(er,{lineBreak:_e.lineBreak,wordBreak:_e.overflowWrap==="break-word"?"break-word":_e.wordBreak}),rr=[],nr,sr=function(){if(nr.value){var ir=nr.value.slice(),or=toCodePoints$1(ir),ar="";or.forEach(function(lr){wordSeparators.indexOf(lr)===-1?ar+=fromCodePoint$1(lr):(ar.length&&rr.push(ar),rr.push(fromCodePoint$1(lr)),ar="")}),ar.length&&rr.push(ar)}};!(nr=tr.next()).done;)sr();return rr},TextContainer=function(){function er(_e,tr,rr){this.text=transform(tr.data,rr.textTransform),this.textBounds=parseTextBounds(_e,this.text,rr,tr)}return er}(),transform=function(er,_e){switch(_e){case 1:return er.toLowerCase();case 3:return er.replace(CAPITALIZE,capitalize);case 2:return er.toUpperCase();default:return er}},CAPITALIZE=/(^|\s|:|-|\(|\))([a-z])/g,capitalize=function(er,_e,tr){return er.length>0?_e+tr.toUpperCase():er},ImageElementContainer=function(er){__extends(_e,er);function _e(tr,rr){var nr=er.call(this,tr,rr)||this;return nr.src=rr.currentSrc||rr.src,nr.intrinsicWidth=rr.naturalWidth,nr.intrinsicHeight=rr.naturalHeight,nr.context.cache.addImage(nr.src),nr}return _e}(ElementContainer),CanvasElementContainer=function(er){__extends(_e,er);function _e(tr,rr){var nr=er.call(this,tr,rr)||this;return nr.canvas=rr,nr.intrinsicWidth=rr.width,nr.intrinsicHeight=rr.height,nr}return _e}(ElementContainer),SVGElementContainer=function(er){__extends(_e,er);function _e(tr,rr){var nr=er.call(this,tr,rr)||this,sr=new XMLSerializer,ir=parseBounds(tr,rr);return rr.setAttribute("width",ir.width+"px"),rr.setAttribute("height",ir.height+"px"),nr.svg="data:image/svg+xml,"+encodeURIComponent(sr.serializeToString(rr)),nr.intrinsicWidth=rr.width.baseVal.value,nr.intrinsicHeight=rr.height.baseVal.value,nr.context.cache.addImage(nr.svg),nr}return _e}(ElementContainer),LIElementContainer=function(er){__extends(_e,er);function _e(tr,rr){var nr=er.call(this,tr,rr)||this;return nr.value=rr.value,nr}return _e}(ElementContainer),OLElementContainer=function(er){__extends(_e,er);function _e(tr,rr){var nr=er.call(this,tr,rr)||this;return nr.start=rr.start,nr.reversed=typeof rr.reversed=="boolean"&&rr.reversed===!0,nr}return _e}(ElementContainer),CHECKBOX_BORDER_RADIUS=[{type:15,flags:0,unit:"px",number:3}],RADIO_BORDER_RADIUS=[{type:16,flags:0,number:50}],reformatInputBounds=function(er){return er.width>er.height?new Bounds(er.left+(er.width-er.height)/2,er.top,er.height,er.height):er.width<er.height?new Bounds(er.left,er.top+(er.height-er.width)/2,er.width,er.width):er},getInputValue=function(er){var _e=er.type===PASSWORD?new Array(er.value.length+1).join(""):er.value;return _e.length===0?er.placeholder||"":_e},CHECKBOX="checkbox",RADIO="radio",PASSWORD="password",INPUT_COLOR=707406591,InputElementContainer=function(er){__extends(_e,er);function _e(tr,rr){var nr=er.call(this,tr,rr)||this;switch(nr.type=rr.type.toLowerCase(),nr.checked=rr.checked,nr.value=getInputValue(rr),(nr.type===CHECKBOX||nr.type===RADIO)&&(nr.styles.backgroundColor=3739148031,nr.styles.borderTopColor=nr.styles.borderRightColor=nr.styles.borderBottomColor=nr.styles.borderLeftColor=2779096575,nr.styles.borderTopWidth=nr.styles.borderRightWidth=nr.styles.borderBottomWidth=nr.styles.borderLeftWidth=1,nr.styles.borderTopStyle=nr.styles.borderRightStyle=nr.styles.borderBottomStyle=nr.styles.borderLeftStyle=1,nr.styles.backgroundClip=[0],nr.styles.backgroundOrigin=[0],nr.bounds=reformatInputBounds(nr.bounds)),nr.type){case CHECKBOX:nr.styles.borderTopRightRadius=nr.styles.borderTopLeftRadius=nr.styles.borderBottomRightRadius=nr.styles.borderBottomLeftRadius=CHECKBOX_BORDER_RADIUS;break;case RADIO:nr.styles.borderTopRightRadius=nr.styles.borderTopLeftRadius=nr.styles.borderBottomRightRadius=nr.styles.borderBottomLeftRadius=RADIO_BORDER_RADIUS;break}return nr}return _e}(ElementContainer),SelectElementContainer=function(er){__extends(_e,er);function _e(tr,rr){var nr=er.call(this,tr,rr)||this,sr=rr.options[rr.selectedIndex||0];return nr.value=sr&&sr.text||"",nr}return _e}(ElementContainer),TextareaElementContainer=function(er){__extends(_e,er);function _e(tr,rr){var nr=er.call(this,tr,rr)||this;return nr.value=rr.value,nr}return _e}(ElementContainer),IFrameElementContainer=function(er){__extends(_e,er);function _e(tr,rr){var nr=er.call(this,tr,rr)||this;nr.src=rr.src,nr.width=parseInt(rr.width,10)||0,nr.height=parseInt(rr.height,10)||0,nr.backgroundColor=nr.styles.backgroundColor;try{if(rr.contentWindow&&rr.contentWindow.document&&rr.contentWindow.document.documentElement){nr.tree=parseTree(tr,rr.contentWindow.document.documentElement);var sr=rr.contentWindow.document.documentElement?parseColor(tr,getComputedStyle(rr.contentWindow.document.documentElement).backgroundColor):COLORS.TRANSPARENT,ir=rr.contentWindow.document.body?parseColor(tr,getComputedStyle(rr.contentWindow.document.body).backgroundColor):COLORS.TRANSPARENT;nr.backgroundColor=isTransparent(sr)?isTransparent(ir)?nr.styles.backgroundColor:ir:sr}}catch{}return nr}return _e}(ElementContainer),LIST_OWNERS=["OL","UL","MENU"],parseNodeTree=function(er,_e,tr,rr){for(var nr=_e.firstChild,sr=void 0;nr;nr=sr)if(sr=nr.nextSibling,isTextNode(nr)&&nr.data.trim().length>0)tr.textNodes.push(new TextContainer(er,nr,tr.styles));else if(isElementNode(nr))if(isSlotElement(nr)&&nr.assignedNodes)nr.assignedNodes().forEach(function(or){return parseNodeTree(er,or,tr,rr)});else{var ir=createContainer(er,nr);ir.styles.isVisible()&&(createsRealStackingContext(nr,ir,rr)?ir.flags|=4:createsStackingContext(ir.styles)&&(ir.flags|=2),LIST_OWNERS.indexOf(nr.tagName)!==-1&&(ir.flags|=8),tr.elements.push(ir),nr.slot,nr.shadowRoot?parseNodeTree(er,nr.shadowRoot,ir,rr):!isTextareaElement(nr)&&!isSVGElement(nr)&&!isSelectElement(nr)&&parseNodeTree(er,nr,ir,rr))}},createContainer=function(er,_e){return isImageElement(_e)?new ImageElementContainer(er,_e):isCanvasElement(_e)?new CanvasElementContainer(er,_e):isSVGElement(_e)?new SVGElementContainer(er,_e):isLIElement(_e)?new LIElementContainer(er,_e):isOLElement(_e)?new OLElementContainer(er,_e):isInputElement(_e)?new InputElementContainer(er,_e):isSelectElement(_e)?new SelectElementContainer(er,_e):isTextareaElement(_e)?new TextareaElementContainer(er,_e):isIFrameElement(_e)?new IFrameElementContainer(er,_e):new ElementContainer(er,_e)},parseTree=function(er,_e){var tr=createContainer(er,_e);return tr.flags|=4,parseNodeTree(er,_e,tr,tr),tr},createsRealStackingContext=function(er,_e,tr){return _e.styles.isPositionedWithZIndex()||_e.styles.opacity<1||_e.styles.isTransformed()||isBodyElement(er)&&tr.styles.isTransparent()},createsStackingContext=function(er){return er.isPositioned()||er.isFloating()},isTextNode=function(er){return er.nodeType===Node.TEXT_NODE},isElementNode=function(er){return er.nodeType===Node.ELEMENT_NODE},isHTMLElementNode=function(er){return isElementNode(er)&&typeof er.style<"u"&&!isSVGElementNode(er)},isSVGElementNode=function(er){return typeof er.className=="object"},isLIElement=function(er){return er.tagName==="LI"},isOLElement=function(er){return er.tagName==="OL"},isInputElement=function(er){return er.tagName==="INPUT"},isHTMLElement=function(er){return er.tagName==="HTML"},isSVGElement=function(er){return er.tagName==="svg"},isBodyElement=function(er){return er.tagName==="BODY"},isCanvasElement=function(er){return er.tagName==="CANVAS"},isVideoElement=function(er){return er.tagName==="VIDEO"},isImageElement=function(er){return er.tagName==="IMG"},isIFrameElement=function(er){return er.tagName==="IFRAME"},isStyleElement=function(er){return er.tagName==="STYLE"},isScriptElement=function(er){return er.tagName==="SCRIPT"},isTextareaElement=function(er){return er.tagName==="TEXTAREA"},isSelectElement=function(er){return er.tagName==="SELECT"},isSlotElement=function(er){return er.tagName==="SLOT"},isCustomElement=function(er){return er.tagName.indexOf("-")>0},CounterState=function(){function er(){this.counters={}}return er.prototype.getCounterValue=function(_e){var tr=this.counters[_e];return tr&&tr.length?tr[tr.length-1]:1},er.prototype.getCounterValues=function(_e){var tr=this.counters[_e];return tr||[]},er.prototype.pop=function(_e){var tr=this;_e.forEach(function(rr){return tr.counters[rr].pop()})},er.prototype.parse=function(_e){var tr=this,rr=_e.counterIncrement,nr=_e.counterReset,sr=!0;rr!==null&&rr.forEach(function(or){var ar=tr.counters[or.counter];ar&&or.increment!==0&&(sr=!1,ar.length||ar.push(1),ar[Math.max(0,ar.length-1)]+=or.increment)});var ir=[];return sr&&nr.forEach(function(or){var ar=tr.counters[or.counter];ir.push(or.counter),ar||(ar=tr.counters[or.counter]=[]),ar.push(or.reset)}),ir},er}(),ROMAN_UPPER={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ARMENIAN={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},HEBREW={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},GEORGIAN={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},createAdditiveCounter=function(er,_e,tr,rr,nr,sr){return er<_e||er>tr?createCounterText(er,nr,sr.length>0):rr.integers.reduce(function(ir,or,ar){for(;er>=or;)er-=or,ir+=rr.values[ar];return ir},"")+sr},createCounterStyleWithSymbolResolver=function(er,_e,tr,rr){var nr="";do tr||er--,nr=rr(er)+nr,er/=_e;while(er*_e>=_e);return nr},createCounterStyleFromRange=function(er,_e,tr,rr,nr){var sr=tr-_e+1;return(er<0?"-":"")+(createCounterStyleWithSymbolResolver(Math.abs(er),sr,rr,function(ir){return fromCodePoint$1(Math.floor(ir%sr)+_e)})+nr)},createCounterStyleFromSymbols=function(er,_e,tr){tr===void 0&&(tr=". ");var rr=_e.length;return createCounterStyleWithSymbolResolver(Math.abs(er),rr,!1,function(nr){return _e[Math.floor(nr%rr)]})+tr},CJK_ZEROS=1,CJK_TEN_COEFFICIENTS=2,CJK_TEN_HIGH_COEFFICIENTS=4,CJK_HUNDRED_COEFFICIENTS=8,createCJKCounter=function(er,_e,tr,rr,nr,sr){if(er<-9999||er>9999)return createCounterText(er,4,nr.length>0);var ir=Math.abs(er),or=nr;if(ir===0)return _e[0]+or;for(var ar=0;ir>0&&ar<=4;ar++){var lr=ir%10;lr===0&&contains(sr,CJK_ZEROS)&&or!==""?or=_e[lr]+or:lr>1||lr===1&&ar===0||lr===1&&ar===1&&contains(sr,CJK_TEN_COEFFICIENTS)||lr===1&&ar===1&&contains(sr,CJK_TEN_HIGH_COEFFICIENTS)&&er>100||lr===1&&ar>1&&contains(sr,CJK_HUNDRED_COEFFICIENTS)?or=_e[lr]+(ar>0?tr[ar-1]:"")+or:lr===1&&ar>0&&(or=tr[ar-1]+or),ir=Math.floor(ir/10)}return(er<0?rr:"")+or},CHINESE_INFORMAL_MULTIPLIERS="",CHINESE_FORMAL_MULTIPLIERS="",JAPANESE_NEGATIVE="",KOREAN_NEGATIVE="",createCounterText=function(er,_e,tr){var rr=tr?". ":"",nr=tr?"":"",sr=tr?", ":"",ir=tr?" ":"";switch(_e){case 0:return""+ir;case 1:return""+ir;case 2:return""+ir;case 5:var or=createCounterStyleFromRange(er,48,57,!0,rr);return or.length<4?"0"+or:or;case 4:return createCounterStyleFromSymbols(er,"",nr);case 6:return createAdditiveCounter(er,1,3999,ROMAN_UPPER,3,rr).toLowerCase();case 7:return createAdditiveCounter(er,1,3999,ROMAN_UPPER,3,rr);case 8:return createCounterStyleFromRange(er,945,969,!1,rr);case 9:return createCounterStyleFromRange(er,97,122,!1,rr);case 10:return createCounterStyleFromRange(er,65,90,!1,rr);case 11:return createCounterStyleFromRange(er,1632,1641,!0,rr);case 12:case 49:return createAdditiveCounter(er,1,9999,ARMENIAN,3,rr);case 35:return createAdditiveCounter(er,1,9999,ARMENIAN,3,rr).toLowerCase();case 13:return createCounterStyleFromRange(er,2534,2543,!0,rr);case 14:case 30:return createCounterStyleFromRange(er,6112,6121,!0,rr);case 15:return createCounterStyleFromSymbols(er,"",nr);case 16:return createCounterStyleFromSymbols(er,"",nr);case 17:case 48:return createCJKCounter(er,"",CHINESE_INFORMAL_MULTIPLIERS,"",nr,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 47:return createCJKCounter(er,"",CHINESE_FORMAL_MULTIPLIERS,"",nr,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 42:return createCJKCounter(er,"",CHINESE_INFORMAL_MULTIPLIERS,"",nr,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 41:return createCJKCounter(er,"",CHINESE_FORMAL_MULTIPLIERS,"",nr,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 26:return createCJKCounter(er,"","",JAPANESE_NEGATIVE,nr,0);case 25:return createCJKCounter(er,"","",JAPANESE_NEGATIVE,nr,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 31:return createCJKCounter(er,"","",KOREAN_NEGATIVE,sr,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 33:return createCJKCounter(er,"","",KOREAN_NEGATIVE,sr,0);case 32:return createCJKCounter(er,"","",KOREAN_NEGATIVE,sr,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 18:return createCounterStyleFromRange(er,2406,2415,!0,rr);case 20:return createAdditiveCounter(er,1,19999,GEORGIAN,3,rr);case 21:return createCounterStyleFromRange(er,2790,2799,!0,rr);case 22:return createCounterStyleFromRange(er,2662,2671,!0,rr);case 22:return createAdditiveCounter(er,1,10999,HEBREW,3,rr);case 23:return createCounterStyleFromSymbols(er,"");case 24:return createCounterStyleFromSymbols(er,"");case 27:return createCounterStyleFromRange(er,3302,3311,!0,rr);case 28:return createCounterStyleFromSymbols(er,"",nr);case 29:return createCounterStyleFromSymbols(er,"",nr);case 34:return createCounterStyleFromRange(er,3792,3801,!0,rr);case 37:return createCounterStyleFromRange(er,6160,6169,!0,rr);case 38:return createCounterStyleFromRange(er,4160,4169,!0,rr);case 39:return createCounterStyleFromRange(er,2918,2927,!0,rr);case 40:return createCounterStyleFromRange(er,1776,1785,!0,rr);case 43:return createCounterStyleFromRange(er,3046,3055,!0,rr);case 44:return createCounterStyleFromRange(er,3174,3183,!0,rr);case 45:return createCounterStyleFromRange(er,3664,3673,!0,rr);case 46:return createCounterStyleFromRange(er,3872,3881,!0,rr);case 3:default:return createCounterStyleFromRange(er,48,57,!0,rr)}},IGNORE_ATTRIBUTE="data-html2canvas-ignore",DocumentCloner=function(){function er(_e,tr,rr){if(this.context=_e,this.options=rr,this.scrolledElements=[],this.referenceElement=tr,this.counters=new CounterState,this.quoteDepth=0,!tr.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(tr.ownerDocument.documentElement,!1)}return er.prototype.toIFrame=function(_e,tr){var rr=this,nr=createIFrameContainer(_e,tr);if(!nr.contentWindow)return Promise.reject("Unable to find iframe window");var sr=_e.defaultView.pageXOffset,ir=_e.defaultView.pageYOffset,or=nr.contentWindow,ar=or.document,lr=iframeLoader(nr).then(function(){return __awaiter(rr,void 0,void 0,function(){var cr,Ar;return __generator(this,function(ur){switch(ur.label){case 0:return this.scrolledElements.forEach(restoreNodeScroll),or&&(or.scrollTo(tr.left,tr.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(or.scrollY!==tr.top||or.scrollX!==tr.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(or.scrollX-tr.left,or.scrollY-tr.top,0,0))),cr=this.options.onclone,Ar=this.clonedReferenceElement,typeof Ar>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:ar.fonts&&ar.fonts.ready?[4,ar.fonts.ready]:[3,2];case 1:ur.sent(),ur.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,imagesReady(ar)]:[3,4];case 3:ur.sent(),ur.label=4;case 4:return typeof cr=="function"?[2,Promise.resolve().then(function(){return cr(ar,Ar)}).then(function(){return nr})]:[2,nr]}})})});return ar.open(),ar.write(serializeDoctype(document.doctype)+"<html></html>"),restoreOwnerScroll(this.referenceElement.ownerDocument,sr,ir),ar.replaceChild(ar.adoptNode(this.documentElement),ar.documentElement),ar.close(),lr},er.prototype.createElementClone=function(_e){if(isDebugging(_e,2))debugger;if(isCanvasElement(_e))return this.createCanvasClone(_e);if(isVideoElement(_e))return this.createVideoClone(_e);if(isStyleElement(_e))return this.createStyleClone(_e);var tr=_e.cloneNode(!1);return isImageElement(tr)&&(isImageElement(_e)&&_e.currentSrc&&_e.currentSrc!==_e.src&&(tr.src=_e.currentSrc,tr.srcset=""),tr.loading==="lazy"&&(tr.loading="eager")),isCustomElement(tr)?this.createCustomElementClone(tr):tr},er.prototype.createCustomElementClone=function(_e){var tr=document.createElement("html2canvascustomelement");return copyCSSStyles(_e.style,tr),tr},er.prototype.createStyleClone=function(_e){try{var tr=_e.sheet;if(tr&&tr.cssRules){var rr=[].slice.call(tr.cssRules,0).reduce(function(sr,ir){return ir&&typeof ir.cssText=="string"?sr+ir.cssText:sr},""),nr=_e.cloneNode(!1);return nr.textContent=rr,nr}}catch(sr){if(this.context.logger.error("Unable to access cssRules property",sr),sr.name!=="SecurityError")throw sr}return _e.cloneNode(!1)},er.prototype.createCanvasClone=function(_e){var tr;if(this.options.inlineImages&&_e.ownerDocument){var rr=_e.ownerDocument.createElement("img");try{return rr.src=_e.toDataURL(),rr}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",_e)}}var nr=_e.cloneNode(!1);try{nr.width=_e.width,nr.height=_e.height;var sr=_e.getContext("2d"),ir=nr.getContext("2d");if(ir)if(!this.options.allowTaint&&sr)ir.putImageData(sr.getImageData(0,0,_e.width,_e.height),0,0);else{var or=(tr=_e.getContext("webgl2"))!==null&&tr!==void 0?tr:_e.getContext("webgl");if(or){var ar=or.getContextAttributes();(ar==null?void 0:ar.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",_e)}ir.drawImage(_e,0,0)}return nr}catch{this.context.logger.info("Unable to clone canvas as it is tainted",_e)}return nr},er.prototype.createVideoClone=function(_e){var tr=_e.ownerDocument.createElement("canvas");tr.width=_e.offsetWidth,tr.height=_e.offsetHeight;var rr=tr.getContext("2d");try{return rr&&(rr.drawImage(_e,0,0,tr.width,tr.height),this.options.allowTaint||rr.getImageData(0,0,tr.width,tr.height)),tr}catch{this.context.logger.info("Unable to clone video as it is tainted",_e)}var nr=_e.ownerDocument.createElement("canvas");return nr.width=_e.offsetWidth,nr.height=_e.offsetHeight,nr},er.prototype.appendChildNode=function(_e,tr,rr){(!isElementNode(tr)||!isScriptElement(tr)&&!tr.hasAttribute(IGNORE_ATTRIBUTE)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(tr)))&&(!this.options.copyStyles||!isElementNode(tr)||!isStyleElement(tr))&&_e.appendChild(this.cloneNode(tr,rr))},er.prototype.cloneChildNodes=function(_e,tr,rr){for(var nr=this,sr=_e.shadowRoot?_e.shadowRoot.firstChild:_e.firstChild;sr;sr=sr.nextSibling)if(isElementNode(sr)&&isSlotElement(sr)&&typeof sr.assignedNodes=="function"){var ir=sr.assignedNodes();ir.length&&ir.forEach(function(or){return nr.appendChildNode(tr,or,rr)})}else this.appendChildNode(tr,sr,rr)},er.prototype.cloneNode=function(_e,tr){if(isTextNode(_e))return document.createTextNode(_e.data);if(!_e.ownerDocument)return _e.cloneNode(!1);var rr=_e.ownerDocument.defaultView;if(rr&&isElementNode(_e)&&(isHTMLElementNode(_e)||isSVGElementNode(_e))){var nr=this.createElementClone(_e);nr.style.transitionProperty="none";var sr=rr.getComputedStyle(_e),ir=rr.getComputedStyle(_e,":before"),or=rr.getComputedStyle(_e,":after");this.referenceElement===_e&&isHTMLElementNode(nr)&&(this.clonedReferenceElement=nr),isBodyElement(nr)&&createPseudoHideStyles(nr);var ar=this.counters.parse(new CSSParsedCounterDeclaration(this.context,sr)),lr=this.resolvePseudoContent(_e,nr,ir,PseudoElementType.BEFORE);isCustomElement(_e)&&(tr=!0),isVideoElement(_e)||this.cloneChildNodes(_e,nr,tr),lr&&nr.insertBefore(lr,nr.firstChild);var cr=this.resolvePseudoContent(_e,nr,or,PseudoElementType.AFTER);return cr&&nr.appendChild(cr),this.counters.pop(ar),(sr&&(this.options.copyStyles||isSVGElementNode(_e))&&!isIFrameElement(_e)||tr)&&copyCSSStyles(sr,nr),(_e.scrollTop!==0||_e.scrollLeft!==0)&&this.scrolledElements.push([nr,_e.scrollLeft,_e.scrollTop]),(isTextareaElement(_e)||isSelectElement(_e))&&(isTextareaElement(nr)||isSelectElement(nr))&&(nr.value=_e.value),nr}return _e.cloneNode(!1)},er.prototype.resolvePseudoContent=function(_e,tr,rr,nr){var sr=this;if(rr){var ir=rr.content,or=tr.ownerDocument;if(!(!or||!ir||ir==="none"||ir==="-moz-alt-content"||rr.display==="none")){this.counters.parse(new CSSParsedCounterDeclaration(this.context,rr));var ar=new CSSParsedPseudoDeclaration(this.context,rr),lr=or.createElement("html2canvaspseudoelement");copyCSSStyles(rr,lr),ar.content.forEach(function(Ar){if(Ar.type===0)lr.appendChild(or.createTextNode(Ar.value));else if(Ar.type===22){var ur=or.createElement("img");ur.src=Ar.value,ur.style.opacity="1",lr.appendChild(ur)}else if(Ar.type===18){if(Ar.name==="attr"){var dr=Ar.values.filter(isIdentToken);dr.length&&lr.appendChild(or.createTextNode(_e.getAttribute(dr[0].value)||""))}else if(Ar.name==="counter"){var mr=Ar.values.filter(nonFunctionArgSeparator),pr=mr[0],yr=mr[1];if(pr&&isIdentToken(pr)){var hr=sr.counters.getCounterValue(pr.value),gr=yr&&isIdentToken(yr)?listStyleType.parse(sr.context,yr.value):3;lr.appendChild(or.createTextNode(createCounterText(hr,gr,!1)))}}else if(Ar.name==="counters"){var Cr=Ar.values.filter(nonFunctionArgSeparator),pr=Cr[0],Tr=Cr[1],yr=Cr[2];if(pr&&isIdentToken(pr)){var Sr=sr.counters.getCounterValues(pr.value),Nr=yr&&isIdentToken(yr)?listStyleType.parse(sr.context,yr.value):3,_r=Tr&&Tr.type===0?Tr.value:"",vr=Sr.map(function(Er){return createCounterText(Er,Nr,!1)}).join(_r);lr.appendChild(or.createTextNode(vr))}}}else if(Ar.type===20)switch(Ar.value){case"open-quote":lr.appendChild(or.createTextNode(getQuote(ar.quotes,sr.quoteDepth++,!0)));break;case"close-quote":lr.appendChild(or.createTextNode(getQuote(ar.quotes,--sr.quoteDepth,!1)));break;default:lr.appendChild(or.createTextNode(Ar.value))}}),lr.className=PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;var cr=nr===PseudoElementType.BEFORE?" "+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE:" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;return isSVGElementNode(tr)?tr.className.baseValue+=cr:tr.className+=cr,lr}}},er.destroy=function(_e){return _e.parentNode?(_e.parentNode.removeChild(_e),!0):!1},er}(),PseudoElementType;(function(er){er[er.BEFORE=0]="BEFORE",er[er.AFTER=1]="AFTER"})(PseudoElementType||(PseudoElementType={}));var createIFrameContainer=function(er,_e){var tr=er.createElement("iframe");return tr.className="html2canvas-container",tr.style.visibility="hidden",tr.style.position="fixed",tr.style.left="-10000px",tr.style.top="0px",tr.style.border="0",tr.width=_e.width.toString(),tr.height=_e.height.toString(),tr.scrolling="no",tr.setAttribute(IGNORE_ATTRIBUTE,"true"),er.body.appendChild(tr),tr},imageReady=function(er){return new Promise(function(_e){if(er.complete){_e();return}if(!er.src){_e();return}er.onload=_e,er.onerror=_e})},imagesReady=function(er){return Promise.all([].slice.call(er.images,0).map(imageReady))},iframeLoader=function(er){return new Promise(function(_e,tr){var rr=er.contentWindow;if(!rr)return tr("No window assigned for iframe");var nr=rr.document;rr.onload=er.onload=function(){rr.onload=er.onload=null;var sr=setInterval(function(){nr.body.childNodes.length>0&&nr.readyState==="complete"&&(clearInterval(sr),_e(er))},50)}})},ignoredStyleProperties=["all","d","content"],copyCSSStyles=function(er,_e){for(var tr=er.length-1;tr>=0;tr--){var rr=er.item(tr);ignoredStyleProperties.indexOf(rr)===-1&&_e.style.setProperty(rr,er.getPropertyValue(rr))}return _e},serializeDoctype=function(er){var _e="";return er&&(_e+="<!DOCTYPE ",er.name&&(_e+=er.name),er.internalSubset&&(_e+=er.internalSubset),er.publicId&&(_e+='"'+er.publicId+'"'),er.systemId&&(_e+='"'+er.systemId+'"'),_e+=">"),_e},restoreOwnerScroll=function(er,_e,tr){er&&er.defaultView&&(_e!==er.defaultView.pageXOffset||tr!==er.defaultView.pageYOffset)&&er.defaultView.scrollTo(_e,tr)},restoreNodeScroll=function(er){var _e=er[0],tr=er[1],rr=er[2];_e.scrollLeft=tr,_e.scrollTop=rr},PSEUDO_BEFORE=":before",PSEUDO_AFTER=":after",PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",PSEUDO_HIDE_ELEMENT_STYLE=`{
    content: "" !important;
    display: none !important;
}`,createPseudoHideStyles=function(er){createStyles(er,"."+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+PSEUDO_BEFORE+PSEUDO_HIDE_ELEMENT_STYLE+`
         .`+PSEUDO_HIDE_ELEMENT_CLASS_AFTER+PSEUDO_AFTER+PSEUDO_HIDE_ELEMENT_STYLE)},createStyles=function(er,_e){var tr=er.ownerDocument;if(tr){var rr=tr.createElement("style");rr.textContent=_e,er.appendChild(rr)}},CacheStorage=function(){function er(){}return er.getOrigin=function(_e){var tr=er._link;return tr?(tr.href=_e,tr.href=tr.href,tr.protocol+tr.hostname+tr.port):"about:blank"},er.isSameOrigin=function(_e){return er.getOrigin(_e)===er._origin},er.setContext=function(_e){er._link=_e.document.createElement("a"),er._origin=er.getOrigin(_e.location.href)},er._origin="about:blank",er}(),Cache=function(){function er(_e,tr){this.context=_e,this._options=tr,this._cache={}}return er.prototype.addImage=function(_e){var tr=Promise.resolve();return this.has(_e)||(isBlobImage(_e)||isRenderable(_e))&&(this._cache[_e]=this.loadImage(_e)).catch(function(){}),tr},er.prototype.match=function(_e){return this._cache[_e]},er.prototype.loadImage=function(_e){return __awaiter(this,void 0,void 0,function(){var tr,rr,nr,sr,ir=this;return __generator(this,function(or){switch(or.label){case 0:return tr=CacheStorage.isSameOrigin(_e),rr=!isInlineImage(_e)&&this._options.useCORS===!0&&FEATURES.SUPPORT_CORS_IMAGES&&!tr,nr=!isInlineImage(_e)&&!tr&&!isBlobImage(_e)&&typeof this._options.proxy=="string"&&FEATURES.SUPPORT_CORS_XHR&&!rr,!tr&&this._options.allowTaint===!1&&!isInlineImage(_e)&&!isBlobImage(_e)&&!nr&&!rr?[2]:(sr=_e,nr?[4,this.proxy(sr)]:[3,2]);case 1:sr=or.sent(),or.label=2;case 2:return this.context.logger.debug("Added image "+_e.substring(0,256)),[4,new Promise(function(ar,lr){var cr=new Image;cr.onload=function(){return ar(cr)},cr.onerror=lr,(isInlineBase64Image(sr)||rr)&&(cr.crossOrigin="anonymous"),cr.src=sr,cr.complete===!0&&setTimeout(function(){return ar(cr)},500),ir._options.imageTimeout>0&&setTimeout(function(){return lr("Timed out ("+ir._options.imageTimeout+"ms) loading image")},ir._options.imageTimeout)})];case 3:return[2,or.sent()]}})})},er.prototype.has=function(_e){return typeof this._cache[_e]<"u"},er.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},er.prototype.proxy=function(_e){var tr=this,rr=this._options.proxy;if(!rr)throw new Error("No proxy defined");var nr=_e.substring(0,256);return new Promise(function(sr,ir){var or=FEATURES.SUPPORT_RESPONSE_TYPE?"blob":"text",ar=new XMLHttpRequest;ar.onload=function(){if(ar.status===200)if(or==="text")sr(ar.response);else{var Ar=new FileReader;Ar.addEventListener("load",function(){return sr(Ar.result)},!1),Ar.addEventListener("error",function(ur){return ir(ur)},!1),Ar.readAsDataURL(ar.response)}else ir("Failed to proxy resource "+nr+" with status code "+ar.status)},ar.onerror=ir;var lr=rr.indexOf("?")>-1?"&":"?";if(ar.open("GET",""+rr+lr+"url="+encodeURIComponent(_e)+"&responseType="+or),or!=="text"&&ar instanceof XMLHttpRequest&&(ar.responseType=or),tr._options.imageTimeout){var cr=tr._options.imageTimeout;ar.timeout=cr,ar.ontimeout=function(){return ir("Timed out ("+cr+"ms) proxying "+nr)}}ar.send()})},er}(),INLINE_SVG=/^data:image\/svg\+xml/i,INLINE_BASE64=/^data:image\/.*;base64,/i,INLINE_IMG=/^data:image\/.*/i,isRenderable=function(er){return FEATURES.SUPPORT_SVG_DRAWING||!isSVG(er)},isInlineImage=function(er){return INLINE_IMG.test(er)},isInlineBase64Image=function(er){return INLINE_BASE64.test(er)},isBlobImage=function(er){return er.substr(0,4)==="blob"},isSVG=function(er){return er.substr(-3).toLowerCase()==="svg"||INLINE_SVG.test(er)},Vector=function(){function er(_e,tr){this.type=0,this.x=_e,this.y=tr}return er.prototype.add=function(_e,tr){return new er(this.x+_e,this.y+tr)},er}(),lerp=function(er,_e,tr){return new Vector(er.x+(_e.x-er.x)*tr,er.y+(_e.y-er.y)*tr)},BezierCurve=function(){function er(_e,tr,rr,nr){this.type=1,this.start=_e,this.startControl=tr,this.endControl=rr,this.end=nr}return er.prototype.subdivide=function(_e,tr){var rr=lerp(this.start,this.startControl,_e),nr=lerp(this.startControl,this.endControl,_e),sr=lerp(this.endControl,this.end,_e),ir=lerp(rr,nr,_e),or=lerp(nr,sr,_e),ar=lerp(ir,or,_e);return tr?new er(this.start,rr,ir,ar):new er(ar,or,sr,this.end)},er.prototype.add=function(_e,tr){return new er(this.start.add(_e,tr),this.startControl.add(_e,tr),this.endControl.add(_e,tr),this.end.add(_e,tr))},er.prototype.reverse=function(){return new er(this.end,this.endControl,this.startControl,this.start)},er}(),isBezierCurve=function(er){return er.type===1},BoundCurves=function(){function er(_e){var tr=_e.styles,rr=_e.bounds,nr=getAbsoluteValueForTuple(tr.borderTopLeftRadius,rr.width,rr.height),sr=nr[0],ir=nr[1],or=getAbsoluteValueForTuple(tr.borderTopRightRadius,rr.width,rr.height),ar=or[0],lr=or[1],cr=getAbsoluteValueForTuple(tr.borderBottomRightRadius,rr.width,rr.height),Ar=cr[0],ur=cr[1],dr=getAbsoluteValueForTuple(tr.borderBottomLeftRadius,rr.width,rr.height),mr=dr[0],pr=dr[1],yr=[];yr.push((sr+ar)/rr.width),yr.push((mr+Ar)/rr.width),yr.push((ir+pr)/rr.height),yr.push((lr+ur)/rr.height);var hr=Math.max.apply(Math,yr);hr>1&&(sr/=hr,ir/=hr,ar/=hr,lr/=hr,Ar/=hr,ur/=hr,mr/=hr,pr/=hr);var gr=rr.width-ar,Cr=rr.height-ur,Tr=rr.width-Ar,Sr=rr.height-pr,Nr=tr.borderTopWidth,_r=tr.borderRightWidth,vr=tr.borderBottomWidth,br=tr.borderLeftWidth,Pr=getAbsoluteValue(tr.paddingTop,_e.bounds.width),Er=getAbsoluteValue(tr.paddingRight,_e.bounds.width),Rr=getAbsoluteValue(tr.paddingBottom,_e.bounds.width),Ir=getAbsoluteValue(tr.paddingLeft,_e.bounds.width);this.topLeftBorderDoubleOuterBox=sr>0||ir>0?getCurvePoints(rr.left+br/3,rr.top+Nr/3,sr-br/3,ir-Nr/3,CORNER.TOP_LEFT):new Vector(rr.left+br/3,rr.top+Nr/3),this.topRightBorderDoubleOuterBox=sr>0||ir>0?getCurvePoints(rr.left+gr,rr.top+Nr/3,ar-_r/3,lr-Nr/3,CORNER.TOP_RIGHT):new Vector(rr.left+rr.width-_r/3,rr.top+Nr/3),this.bottomRightBorderDoubleOuterBox=Ar>0||ur>0?getCurvePoints(rr.left+Tr,rr.top+Cr,Ar-_r/3,ur-vr/3,CORNER.BOTTOM_RIGHT):new Vector(rr.left+rr.width-_r/3,rr.top+rr.height-vr/3),this.bottomLeftBorderDoubleOuterBox=mr>0||pr>0?getCurvePoints(rr.left+br/3,rr.top+Sr,mr-br/3,pr-vr/3,CORNER.BOTTOM_LEFT):new Vector(rr.left+br/3,rr.top+rr.height-vr/3),this.topLeftBorderDoubleInnerBox=sr>0||ir>0?getCurvePoints(rr.left+br*2/3,rr.top+Nr*2/3,sr-br*2/3,ir-Nr*2/3,CORNER.TOP_LEFT):new Vector(rr.left+br*2/3,rr.top+Nr*2/3),this.topRightBorderDoubleInnerBox=sr>0||ir>0?getCurvePoints(rr.left+gr,rr.top+Nr*2/3,ar-_r*2/3,lr-Nr*2/3,CORNER.TOP_RIGHT):new Vector(rr.left+rr.width-_r*2/3,rr.top+Nr*2/3),this.bottomRightBorderDoubleInnerBox=Ar>0||ur>0?getCurvePoints(rr.left+Tr,rr.top+Cr,Ar-_r*2/3,ur-vr*2/3,CORNER.BOTTOM_RIGHT):new Vector(rr.left+rr.width-_r*2/3,rr.top+rr.height-vr*2/3),this.bottomLeftBorderDoubleInnerBox=mr>0||pr>0?getCurvePoints(rr.left+br*2/3,rr.top+Sr,mr-br*2/3,pr-vr*2/3,CORNER.BOTTOM_LEFT):new Vector(rr.left+br*2/3,rr.top+rr.height-vr*2/3),this.topLeftBorderStroke=sr>0||ir>0?getCurvePoints(rr.left+br/2,rr.top+Nr/2,sr-br/2,ir-Nr/2,CORNER.TOP_LEFT):new Vector(rr.left+br/2,rr.top+Nr/2),this.topRightBorderStroke=sr>0||ir>0?getCurvePoints(rr.left+gr,rr.top+Nr/2,ar-_r/2,lr-Nr/2,CORNER.TOP_RIGHT):new Vector(rr.left+rr.width-_r/2,rr.top+Nr/2),this.bottomRightBorderStroke=Ar>0||ur>0?getCurvePoints(rr.left+Tr,rr.top+Cr,Ar-_r/2,ur-vr/2,CORNER.BOTTOM_RIGHT):new Vector(rr.left+rr.width-_r/2,rr.top+rr.height-vr/2),this.bottomLeftBorderStroke=mr>0||pr>0?getCurvePoints(rr.left+br/2,rr.top+Sr,mr-br/2,pr-vr/2,CORNER.BOTTOM_LEFT):new Vector(rr.left+br/2,rr.top+rr.height-vr/2),this.topLeftBorderBox=sr>0||ir>0?getCurvePoints(rr.left,rr.top,sr,ir,CORNER.TOP_LEFT):new Vector(rr.left,rr.top),this.topRightBorderBox=ar>0||lr>0?getCurvePoints(rr.left+gr,rr.top,ar,lr,CORNER.TOP_RIGHT):new Vector(rr.left+rr.width,rr.top),this.bottomRightBorderBox=Ar>0||ur>0?getCurvePoints(rr.left+Tr,rr.top+Cr,Ar,ur,CORNER.BOTTOM_RIGHT):new Vector(rr.left+rr.width,rr.top+rr.height),this.bottomLeftBorderBox=mr>0||pr>0?getCurvePoints(rr.left,rr.top+Sr,mr,pr,CORNER.BOTTOM_LEFT):new Vector(rr.left,rr.top+rr.height),this.topLeftPaddingBox=sr>0||ir>0?getCurvePoints(rr.left+br,rr.top+Nr,Math.max(0,sr-br),Math.max(0,ir-Nr),CORNER.TOP_LEFT):new Vector(rr.left+br,rr.top+Nr),this.topRightPaddingBox=ar>0||lr>0?getCurvePoints(rr.left+Math.min(gr,rr.width-_r),rr.top+Nr,gr>rr.width+_r?0:Math.max(0,ar-_r),Math.max(0,lr-Nr),CORNER.TOP_RIGHT):new Vector(rr.left+rr.width-_r,rr.top+Nr),this.bottomRightPaddingBox=Ar>0||ur>0?getCurvePoints(rr.left+Math.min(Tr,rr.width-br),rr.top+Math.min(Cr,rr.height-vr),Math.max(0,Ar-_r),Math.max(0,ur-vr),CORNER.BOTTOM_RIGHT):new Vector(rr.left+rr.width-_r,rr.top+rr.height-vr),this.bottomLeftPaddingBox=mr>0||pr>0?getCurvePoints(rr.left+br,rr.top+Math.min(Sr,rr.height-vr),Math.max(0,mr-br),Math.max(0,pr-vr),CORNER.BOTTOM_LEFT):new Vector(rr.left+br,rr.top+rr.height-vr),this.topLeftContentBox=sr>0||ir>0?getCurvePoints(rr.left+br+Ir,rr.top+Nr+Pr,Math.max(0,sr-(br+Ir)),Math.max(0,ir-(Nr+Pr)),CORNER.TOP_LEFT):new Vector(rr.left+br+Ir,rr.top+Nr+Pr),this.topRightContentBox=ar>0||lr>0?getCurvePoints(rr.left+Math.min(gr,rr.width+br+Ir),rr.top+Nr+Pr,gr>rr.width+br+Ir?0:ar-br+Ir,lr-(Nr+Pr),CORNER.TOP_RIGHT):new Vector(rr.left+rr.width-(_r+Er),rr.top+Nr+Pr),this.bottomRightContentBox=Ar>0||ur>0?getCurvePoints(rr.left+Math.min(Tr,rr.width-(br+Ir)),rr.top+Math.min(Cr,rr.height+Nr+Pr),Math.max(0,Ar-(_r+Er)),ur-(vr+Rr),CORNER.BOTTOM_RIGHT):new Vector(rr.left+rr.width-(_r+Er),rr.top+rr.height-(vr+Rr)),this.bottomLeftContentBox=mr>0||pr>0?getCurvePoints(rr.left+br+Ir,rr.top+Sr,Math.max(0,mr-(br+Ir)),pr-(vr+Rr),CORNER.BOTTOM_LEFT):new Vector(rr.left+br+Ir,rr.top+rr.height-(vr+Rr))}return er}(),CORNER;(function(er){er[er.TOP_LEFT=0]="TOP_LEFT",er[er.TOP_RIGHT=1]="TOP_RIGHT",er[er.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",er[er.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(CORNER||(CORNER={}));var getCurvePoints=function(er,_e,tr,rr,nr){var sr=4*((Math.sqrt(2)-1)/3),ir=tr*sr,or=rr*sr,ar=er+tr,lr=_e+rr;switch(nr){case CORNER.TOP_LEFT:return new BezierCurve(new Vector(er,lr),new Vector(er,lr-or),new Vector(ar-ir,_e),new Vector(ar,_e));case CORNER.TOP_RIGHT:return new BezierCurve(new Vector(er,_e),new Vector(er+ir,_e),new Vector(ar,lr-or),new Vector(ar,lr));case CORNER.BOTTOM_RIGHT:return new BezierCurve(new Vector(ar,_e),new Vector(ar,_e+or),new Vector(er+ir,lr),new Vector(er,lr));case CORNER.BOTTOM_LEFT:default:return new BezierCurve(new Vector(ar,lr),new Vector(ar-ir,lr),new Vector(er,_e+or),new Vector(er,_e))}},calculateBorderBoxPath=function(er){return[er.topLeftBorderBox,er.topRightBorderBox,er.bottomRightBorderBox,er.bottomLeftBorderBox]},calculateContentBoxPath=function(er){return[er.topLeftContentBox,er.topRightContentBox,er.bottomRightContentBox,er.bottomLeftContentBox]},calculatePaddingBoxPath=function(er){return[er.topLeftPaddingBox,er.topRightPaddingBox,er.bottomRightPaddingBox,er.bottomLeftPaddingBox]},TransformEffect=function(){function er(_e,tr,rr){this.offsetX=_e,this.offsetY=tr,this.matrix=rr,this.type=0,this.target=6}return er}(),ClipEffect=function(){function er(_e,tr){this.path=_e,this.target=tr,this.type=1}return er}(),OpacityEffect=function(){function er(_e){this.opacity=_e,this.type=2,this.target=6}return er}(),isTransformEffect=function(er){return er.type===0},isClipEffect=function(er){return er.type===1},isOpacityEffect=function(er){return er.type===2},equalPath=function(er,_e){return er.length===_e.length?er.some(function(tr,rr){return tr===_e[rr]}):!1},transformPath=function(er,_e,tr,rr,nr){return er.map(function(sr,ir){switch(ir){case 0:return sr.add(_e,tr);case 1:return sr.add(_e+rr,tr);case 2:return sr.add(_e+rr,tr+nr);case 3:return sr.add(_e,tr+nr)}return sr})},StackingContext=function(){function er(_e){this.element=_e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return er}(),ElementPaint=function(){function er(_e,tr){if(this.container=_e,this.parent=tr,this.effects=[],this.curves=new BoundCurves(this.container),this.container.styles.opacity<1&&this.effects.push(new OpacityEffect(this.container.styles.opacity)),this.container.styles.transform!==null){var rr=this.container.bounds.left+this.container.styles.transformOrigin[0].number,nr=this.container.bounds.top+this.container.styles.transformOrigin[1].number,sr=this.container.styles.transform;this.effects.push(new TransformEffect(rr,nr,sr))}if(this.container.styles.overflowX!==0){var ir=calculateBorderBoxPath(this.curves),or=calculatePaddingBoxPath(this.curves);equalPath(ir,or)?this.effects.push(new ClipEffect(ir,6)):(this.effects.push(new ClipEffect(ir,2)),this.effects.push(new ClipEffect(or,4)))}}return er.prototype.getEffects=function(_e){for(var tr=[2,3].indexOf(this.container.styles.position)===-1,rr=this.parent,nr=this.effects.slice(0);rr;){var sr=rr.effects.filter(function(ar){return!isClipEffect(ar)});if(tr||rr.container.styles.position!==0||!rr.parent){if(nr.unshift.apply(nr,sr),tr=[2,3].indexOf(rr.container.styles.position)===-1,rr.container.styles.overflowX!==0){var ir=calculateBorderBoxPath(rr.curves),or=calculatePaddingBoxPath(rr.curves);equalPath(ir,or)||nr.unshift(new ClipEffect(or,6))}}else nr.unshift.apply(nr,sr);rr=rr.parent}return nr.filter(function(ar){return contains(ar.target,_e)})},er}(),parseStackTree=function(er,_e,tr,rr){er.container.elements.forEach(function(nr){var sr=contains(nr.flags,4),ir=contains(nr.flags,2),or=new ElementPaint(nr,er);contains(nr.styles.display,2048)&&rr.push(or);var ar=contains(nr.flags,8)?[]:rr;if(sr||ir){var lr=sr||nr.styles.isPositioned()?tr:_e,cr=new StackingContext(or);if(nr.styles.isPositioned()||nr.styles.opacity<1||nr.styles.isTransformed()){var Ar=nr.styles.zIndex.order;if(Ar<0){var ur=0;lr.negativeZIndex.some(function(mr,pr){return Ar>mr.element.container.styles.zIndex.order?(ur=pr,!1):ur>0}),lr.negativeZIndex.splice(ur,0,cr)}else if(Ar>0){var dr=0;lr.positiveZIndex.some(function(mr,pr){return Ar>=mr.element.container.styles.zIndex.order?(dr=pr+1,!1):dr>0}),lr.positiveZIndex.splice(dr,0,cr)}else lr.zeroOrAutoZIndexOrTransformedOrOpacity.push(cr)}else nr.styles.isFloating()?lr.nonPositionedFloats.push(cr):lr.nonPositionedInlineLevel.push(cr);parseStackTree(or,cr,sr?cr:tr,ar)}else nr.styles.isInlineLevel()?_e.inlineLevel.push(or):_e.nonInlineLevel.push(or),parseStackTree(or,_e,tr,ar);contains(nr.flags,8)&&processListItems(nr,ar)})},processListItems=function(er,_e){for(var tr=er instanceof OLElementContainer?er.start:1,rr=er instanceof OLElementContainer?er.reversed:!1,nr=0;nr<_e.length;nr++){var sr=_e[nr];sr.container instanceof LIElementContainer&&typeof sr.container.value=="number"&&sr.container.value!==0&&(tr=sr.container.value),sr.listValue=createCounterText(tr,sr.container.styles.listStyleType,!0),tr+=rr?-1:1}},parseStackingContexts=function(er){var _e=new ElementPaint(er,null),tr=new StackingContext(_e),rr=[];return parseStackTree(_e,tr,tr,rr),processListItems(_e.container,rr),tr},parsePathForBorder=function(er,_e){switch(_e){case 0:return createPathFromCurves(er.topLeftBorderBox,er.topLeftPaddingBox,er.topRightBorderBox,er.topRightPaddingBox);case 1:return createPathFromCurves(er.topRightBorderBox,er.topRightPaddingBox,er.bottomRightBorderBox,er.bottomRightPaddingBox);case 2:return createPathFromCurves(er.bottomRightBorderBox,er.bottomRightPaddingBox,er.bottomLeftBorderBox,er.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(er.bottomLeftBorderBox,er.bottomLeftPaddingBox,er.topLeftBorderBox,er.topLeftPaddingBox)}},parsePathForBorderDoubleOuter=function(er,_e){switch(_e){case 0:return createPathFromCurves(er.topLeftBorderBox,er.topLeftBorderDoubleOuterBox,er.topRightBorderBox,er.topRightBorderDoubleOuterBox);case 1:return createPathFromCurves(er.topRightBorderBox,er.topRightBorderDoubleOuterBox,er.bottomRightBorderBox,er.bottomRightBorderDoubleOuterBox);case 2:return createPathFromCurves(er.bottomRightBorderBox,er.bottomRightBorderDoubleOuterBox,er.bottomLeftBorderBox,er.bottomLeftBorderDoubleOuterBox);case 3:default:return createPathFromCurves(er.bottomLeftBorderBox,er.bottomLeftBorderDoubleOuterBox,er.topLeftBorderBox,er.topLeftBorderDoubleOuterBox)}},parsePathForBorderDoubleInner=function(er,_e){switch(_e){case 0:return createPathFromCurves(er.topLeftBorderDoubleInnerBox,er.topLeftPaddingBox,er.topRightBorderDoubleInnerBox,er.topRightPaddingBox);case 1:return createPathFromCurves(er.topRightBorderDoubleInnerBox,er.topRightPaddingBox,er.bottomRightBorderDoubleInnerBox,er.bottomRightPaddingBox);case 2:return createPathFromCurves(er.bottomRightBorderDoubleInnerBox,er.bottomRightPaddingBox,er.bottomLeftBorderDoubleInnerBox,er.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(er.bottomLeftBorderDoubleInnerBox,er.bottomLeftPaddingBox,er.topLeftBorderDoubleInnerBox,er.topLeftPaddingBox)}},parsePathForBorderStroke=function(er,_e){switch(_e){case 0:return createStrokePathFromCurves(er.topLeftBorderStroke,er.topRightBorderStroke);case 1:return createStrokePathFromCurves(er.topRightBorderStroke,er.bottomRightBorderStroke);case 2:return createStrokePathFromCurves(er.bottomRightBorderStroke,er.bottomLeftBorderStroke);case 3:default:return createStrokePathFromCurves(er.bottomLeftBorderStroke,er.topLeftBorderStroke)}},createStrokePathFromCurves=function(er,_e){var tr=[];return isBezierCurve(er)?tr.push(er.subdivide(.5,!1)):tr.push(er),isBezierCurve(_e)?tr.push(_e.subdivide(.5,!0)):tr.push(_e),tr},createPathFromCurves=function(er,_e,tr,rr){var nr=[];return isBezierCurve(er)?nr.push(er.subdivide(.5,!1)):nr.push(er),isBezierCurve(tr)?nr.push(tr.subdivide(.5,!0)):nr.push(tr),isBezierCurve(rr)?nr.push(rr.subdivide(.5,!0).reverse()):nr.push(rr),isBezierCurve(_e)?nr.push(_e.subdivide(.5,!1).reverse()):nr.push(_e),nr},paddingBox=function(er){var _e=er.bounds,tr=er.styles;return _e.add(tr.borderLeftWidth,tr.borderTopWidth,-(tr.borderRightWidth+tr.borderLeftWidth),-(tr.borderTopWidth+tr.borderBottomWidth))},contentBox=function(er){var _e=er.styles,tr=er.bounds,rr=getAbsoluteValue(_e.paddingLeft,tr.width),nr=getAbsoluteValue(_e.paddingRight,tr.width),sr=getAbsoluteValue(_e.paddingTop,tr.width),ir=getAbsoluteValue(_e.paddingBottom,tr.width);return tr.add(rr+_e.borderLeftWidth,sr+_e.borderTopWidth,-(_e.borderRightWidth+_e.borderLeftWidth+rr+nr),-(_e.borderTopWidth+_e.borderBottomWidth+sr+ir))},calculateBackgroundPositioningArea=function(er,_e){return er===0?_e.bounds:er===2?contentBox(_e):paddingBox(_e)},calculateBackgroundPaintingArea=function(er,_e){return er===0?_e.bounds:er===2?contentBox(_e):paddingBox(_e)},calculateBackgroundRendering=function(er,_e,tr){var rr=calculateBackgroundPositioningArea(getBackgroundValueForIndex(er.styles.backgroundOrigin,_e),er),nr=calculateBackgroundPaintingArea(getBackgroundValueForIndex(er.styles.backgroundClip,_e),er),sr=calculateBackgroundSize(getBackgroundValueForIndex(er.styles.backgroundSize,_e),tr,rr),ir=sr[0],or=sr[1],ar=getAbsoluteValueForTuple(getBackgroundValueForIndex(er.styles.backgroundPosition,_e),rr.width-ir,rr.height-or),lr=calculateBackgroundRepeatPath(getBackgroundValueForIndex(er.styles.backgroundRepeat,_e),ar,sr,rr,nr),cr=Math.round(rr.left+ar[0]),Ar=Math.round(rr.top+ar[1]);return[lr,cr,Ar,ir,or]},isAuto=function(er){return isIdentToken(er)&&er.value===BACKGROUND_SIZE.AUTO},hasIntrinsicValue=function(er){return typeof er=="number"},calculateBackgroundSize=function(er,_e,tr){var rr=_e[0],nr=_e[1],sr=_e[2],ir=er[0],or=er[1];if(!ir)return[0,0];if(isLengthPercentage(ir)&&or&&isLengthPercentage(or))return[getAbsoluteValue(ir,tr.width),getAbsoluteValue(or,tr.height)];var ar=hasIntrinsicValue(sr);if(isIdentToken(ir)&&(ir.value===BACKGROUND_SIZE.CONTAIN||ir.value===BACKGROUND_SIZE.COVER)){if(hasIntrinsicValue(sr)){var lr=tr.width/tr.height;return lr<sr!=(ir.value===BACKGROUND_SIZE.COVER)?[tr.width,tr.width/sr]:[tr.height*sr,tr.height]}return[tr.width,tr.height]}var cr=hasIntrinsicValue(rr),Ar=hasIntrinsicValue(nr),ur=cr||Ar;if(isAuto(ir)&&(!or||isAuto(or))){if(cr&&Ar)return[rr,nr];if(!ar&&!ur)return[tr.width,tr.height];if(ur&&ar){var dr=cr?rr:nr*sr,mr=Ar?nr:rr/sr;return[dr,mr]}var pr=cr?rr:tr.width,yr=Ar?nr:tr.height;return[pr,yr]}if(ar){var hr=0,gr=0;return isLengthPercentage(ir)?hr=getAbsoluteValue(ir,tr.width):isLengthPercentage(or)&&(gr=getAbsoluteValue(or,tr.height)),isAuto(ir)?hr=gr*sr:(!or||isAuto(or))&&(gr=hr/sr),[hr,gr]}var Cr=null,Tr=null;if(isLengthPercentage(ir)?Cr=getAbsoluteValue(ir,tr.width):or&&isLengthPercentage(or)&&(Tr=getAbsoluteValue(or,tr.height)),Cr!==null&&(!or||isAuto(or))&&(Tr=cr&&Ar?Cr/rr*nr:tr.height),Tr!==null&&isAuto(ir)&&(Cr=cr&&Ar?Tr/nr*rr:tr.width),Cr!==null&&Tr!==null)return[Cr,Tr];throw new Error("Unable to calculate background-size for element")},getBackgroundValueForIndex=function(er,_e){var tr=er[_e];return typeof tr>"u"?er[0]:tr},calculateBackgroundRepeatPath=function(er,_e,tr,rr,nr){var sr=_e[0],ir=_e[1],or=tr[0],ar=tr[1];switch(er){case 2:return[new Vector(Math.round(rr.left),Math.round(rr.top+ir)),new Vector(Math.round(rr.left+rr.width),Math.round(rr.top+ir)),new Vector(Math.round(rr.left+rr.width),Math.round(ar+rr.top+ir)),new Vector(Math.round(rr.left),Math.round(ar+rr.top+ir))];case 3:return[new Vector(Math.round(rr.left+sr),Math.round(rr.top)),new Vector(Math.round(rr.left+sr+or),Math.round(rr.top)),new Vector(Math.round(rr.left+sr+or),Math.round(rr.height+rr.top)),new Vector(Math.round(rr.left+sr),Math.round(rr.height+rr.top))];case 1:return[new Vector(Math.round(rr.left+sr),Math.round(rr.top+ir)),new Vector(Math.round(rr.left+sr+or),Math.round(rr.top+ir)),new Vector(Math.round(rr.left+sr+or),Math.round(rr.top+ir+ar)),new Vector(Math.round(rr.left+sr),Math.round(rr.top+ir+ar))];default:return[new Vector(Math.round(nr.left),Math.round(nr.top)),new Vector(Math.round(nr.left+nr.width),Math.round(nr.top)),new Vector(Math.round(nr.left+nr.width),Math.round(nr.height+nr.top)),new Vector(Math.round(nr.left),Math.round(nr.height+nr.top))]}},SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",SAMPLE_TEXT="Hidden Text",FontMetrics=function(){function er(_e){this._data={},this._document=_e}return er.prototype.parseMetrics=function(_e,tr){var rr=this._document.createElement("div"),nr=this._document.createElement("img"),sr=this._document.createElement("span"),ir=this._document.body;rr.style.visibility="hidden",rr.style.fontFamily=_e,rr.style.fontSize=tr,rr.style.margin="0",rr.style.padding="0",rr.style.whiteSpace="nowrap",ir.appendChild(rr),nr.src=SMALL_IMAGE,nr.width=1,nr.height=1,nr.style.margin="0",nr.style.padding="0",nr.style.verticalAlign="baseline",sr.style.fontFamily=_e,sr.style.fontSize=tr,sr.style.margin="0",sr.style.padding="0",sr.appendChild(this._document.createTextNode(SAMPLE_TEXT)),rr.appendChild(sr),rr.appendChild(nr);var or=nr.offsetTop-sr.offsetTop+2;rr.removeChild(sr),rr.appendChild(this._document.createTextNode(SAMPLE_TEXT)),rr.style.lineHeight="normal",nr.style.verticalAlign="super";var ar=nr.offsetTop-rr.offsetTop+2;return ir.removeChild(rr),{baseline:or,middle:ar}},er.prototype.getMetrics=function(_e,tr){var rr=_e+" "+tr;return typeof this._data[rr]>"u"&&(this._data[rr]=this.parseMetrics(_e,tr)),this._data[rr]},er}(),Renderer=function(){function er(_e,tr){this.context=_e,this.options=tr}return er}(),MASK_OFFSET=1e4,CanvasRenderer=function(er){__extends(_e,er);function _e(tr,rr){var nr=er.call(this,tr,rr)||this;return nr._activeEffects=[],nr.canvas=rr.canvas?rr.canvas:document.createElement("canvas"),nr.ctx=nr.canvas.getContext("2d"),rr.canvas||(nr.canvas.width=Math.floor(rr.width*rr.scale),nr.canvas.height=Math.floor(rr.height*rr.scale),nr.canvas.style.width=rr.width+"px",nr.canvas.style.height=rr.height+"px"),nr.fontMetrics=new FontMetrics(document),nr.ctx.scale(nr.options.scale,nr.options.scale),nr.ctx.translate(-rr.x,-rr.y),nr.ctx.textBaseline="bottom",nr._activeEffects=[],nr.context.logger.debug("Canvas renderer initialized ("+rr.width+"x"+rr.height+") with scale "+rr.scale),nr}return _e.prototype.applyEffects=function(tr){for(var rr=this;this._activeEffects.length;)this.popEffect();tr.forEach(function(nr){return rr.applyEffect(nr)})},_e.prototype.applyEffect=function(tr){this.ctx.save(),isOpacityEffect(tr)&&(this.ctx.globalAlpha=tr.opacity),isTransformEffect(tr)&&(this.ctx.translate(tr.offsetX,tr.offsetY),this.ctx.transform(tr.matrix[0],tr.matrix[1],tr.matrix[2],tr.matrix[3],tr.matrix[4],tr.matrix[5]),this.ctx.translate(-tr.offsetX,-tr.offsetY)),isClipEffect(tr)&&(this.path(tr.path),this.ctx.clip()),this._activeEffects.push(tr)},_e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},_e.prototype.renderStack=function(tr){return __awaiter(this,void 0,void 0,function(){var rr;return __generator(this,function(nr){switch(nr.label){case 0:return rr=tr.element.container.styles,rr.isVisible()?[4,this.renderStackContent(tr)]:[3,2];case 1:nr.sent(),nr.label=2;case 2:return[2]}})})},_e.prototype.renderNode=function(tr){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(rr){switch(rr.label){case 0:if(contains(tr.container.flags,16))debugger;return tr.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(tr)]:[3,3];case 1:return rr.sent(),[4,this.renderNodeContent(tr)];case 2:rr.sent(),rr.label=3;case 3:return[2]}})})},_e.prototype.renderTextWithLetterSpacing=function(tr,rr,nr){var sr=this;if(rr===0)this.ctx.fillText(tr.text,tr.bounds.left,tr.bounds.top+nr);else{var ir=segmentGraphemes(tr.text);ir.reduce(function(or,ar){return sr.ctx.fillText(ar,or,tr.bounds.top+nr),or+sr.ctx.measureText(ar).width},tr.bounds.left)}},_e.prototype.createFontStyle=function(tr){var rr=tr.fontVariant.filter(function(ir){return ir==="normal"||ir==="small-caps"}).join(""),nr=fixIOSSystemFonts(tr.fontFamily).join(", "),sr=isDimensionToken(tr.fontSize)?""+tr.fontSize.number+tr.fontSize.unit:tr.fontSize.number+"px";return[[tr.fontStyle,rr,tr.fontWeight,sr,nr].join(" "),nr,sr]},_e.prototype.renderTextNode=function(tr,rr){return __awaiter(this,void 0,void 0,function(){var nr,sr,ir,or,ar,lr,cr,Ar,ur=this;return __generator(this,function(dr){return nr=this.createFontStyle(rr),sr=nr[0],ir=nr[1],or=nr[2],this.ctx.font=sr,this.ctx.direction=rr.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",ar=this.fontMetrics.getMetrics(ir,or),lr=ar.baseline,cr=ar.middle,Ar=rr.paintOrder,tr.textBounds.forEach(function(mr){Ar.forEach(function(pr){switch(pr){case 0:ur.ctx.fillStyle=asString(rr.color),ur.renderTextWithLetterSpacing(mr,rr.letterSpacing,lr);var yr=rr.textShadow;yr.length&&mr.text.trim().length&&(yr.slice(0).reverse().forEach(function(hr){ur.ctx.shadowColor=asString(hr.color),ur.ctx.shadowOffsetX=hr.offsetX.number*ur.options.scale,ur.ctx.shadowOffsetY=hr.offsetY.number*ur.options.scale,ur.ctx.shadowBlur=hr.blur.number,ur.renderTextWithLetterSpacing(mr,rr.letterSpacing,lr)}),ur.ctx.shadowColor="",ur.ctx.shadowOffsetX=0,ur.ctx.shadowOffsetY=0,ur.ctx.shadowBlur=0),rr.textDecorationLine.length&&(ur.ctx.fillStyle=asString(rr.textDecorationColor||rr.color),rr.textDecorationLine.forEach(function(hr){switch(hr){case 1:ur.ctx.fillRect(mr.bounds.left,Math.round(mr.bounds.top+lr),mr.bounds.width,1);break;case 2:ur.ctx.fillRect(mr.bounds.left,Math.round(mr.bounds.top),mr.bounds.width,1);break;case 3:ur.ctx.fillRect(mr.bounds.left,Math.ceil(mr.bounds.top+cr),mr.bounds.width,1);break}}));break;case 1:rr.webkitTextStrokeWidth&&mr.text.trim().length&&(ur.ctx.strokeStyle=asString(rr.webkitTextStrokeColor),ur.ctx.lineWidth=rr.webkitTextStrokeWidth,ur.ctx.lineJoin=window.chrome?"miter":"round",ur.ctx.strokeText(mr.text,mr.bounds.left,mr.bounds.top+lr)),ur.ctx.strokeStyle="",ur.ctx.lineWidth=0,ur.ctx.lineJoin="miter";break}})}),[2]})})},_e.prototype.renderReplacedElement=function(tr,rr,nr){if(nr&&tr.intrinsicWidth>0&&tr.intrinsicHeight>0){var sr=contentBox(tr),ir=calculatePaddingBoxPath(rr);this.path(ir),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(nr,0,0,tr.intrinsicWidth,tr.intrinsicHeight,sr.left,sr.top,sr.width,sr.height),this.ctx.restore()}},_e.prototype.renderNodeContent=function(tr){return __awaiter(this,void 0,void 0,function(){var rr,nr,sr,ir,or,ar,gr,gr,lr,cr,Ar,ur,Tr,dr,mr,Sr,pr,yr,hr,gr,Cr,Tr,Sr;return __generator(this,function(Nr){switch(Nr.label){case 0:this.applyEffects(tr.getEffects(4)),rr=tr.container,nr=tr.curves,sr=rr.styles,ir=0,or=rr.textNodes,Nr.label=1;case 1:return ir<or.length?(ar=or[ir],[4,this.renderTextNode(ar,sr)]):[3,4];case 2:Nr.sent(),Nr.label=3;case 3:return ir++,[3,1];case 4:if(!(rr instanceof ImageElementContainer))return[3,8];Nr.label=5;case 5:return Nr.trys.push([5,7,,8]),[4,this.context.cache.match(rr.src)];case 6:return gr=Nr.sent(),this.renderReplacedElement(rr,nr,gr),[3,8];case 7:return Nr.sent(),this.context.logger.error("Error loading image "+rr.src),[3,8];case 8:if(rr instanceof CanvasElementContainer&&this.renderReplacedElement(rr,nr,rr.canvas),!(rr instanceof SVGElementContainer))return[3,12];Nr.label=9;case 9:return Nr.trys.push([9,11,,12]),[4,this.context.cache.match(rr.svg)];case 10:return gr=Nr.sent(),this.renderReplacedElement(rr,nr,gr),[3,12];case 11:return Nr.sent(),this.context.logger.error("Error loading svg "+rr.svg.substring(0,255)),[3,12];case 12:return rr instanceof IFrameElementContainer&&rr.tree?(lr=new _e(this.context,{scale:this.options.scale,backgroundColor:rr.backgroundColor,x:0,y:0,width:rr.width,height:rr.height}),[4,lr.render(rr.tree)]):[3,14];case 13:cr=Nr.sent(),rr.width&&rr.height&&this.ctx.drawImage(cr,0,0,rr.width,rr.height,rr.bounds.left,rr.bounds.top,rr.bounds.width,rr.bounds.height),Nr.label=14;case 14:if(rr instanceof InputElementContainer&&(Ar=Math.min(rr.bounds.width,rr.bounds.height),rr.type===CHECKBOX?rr.checked&&(this.ctx.save(),this.path([new Vector(rr.bounds.left+Ar*.39363,rr.bounds.top+Ar*.79),new Vector(rr.bounds.left+Ar*.16,rr.bounds.top+Ar*.5549),new Vector(rr.bounds.left+Ar*.27347,rr.bounds.top+Ar*.44071),new Vector(rr.bounds.left+Ar*.39694,rr.bounds.top+Ar*.5649),new Vector(rr.bounds.left+Ar*.72983,rr.bounds.top+Ar*.23),new Vector(rr.bounds.left+Ar*.84,rr.bounds.top+Ar*.34085),new Vector(rr.bounds.left+Ar*.39363,rr.bounds.top+Ar*.79)]),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore()):rr.type===RADIO&&rr.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(rr.bounds.left+Ar/2,rr.bounds.top+Ar/2,Ar/4,0,Math.PI*2,!0),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore())),isTextInputElement(rr)&&rr.value.length){switch(ur=this.createFontStyle(sr),Tr=ur[0],dr=ur[1],mr=this.fontMetrics.getMetrics(Tr,dr).baseline,this.ctx.font=Tr,this.ctx.fillStyle=asString(sr.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=canvasTextAlign(rr.styles.textAlign),Sr=contentBox(rr),pr=0,rr.styles.textAlign){case 1:pr+=Sr.width/2;break;case 2:pr+=Sr.width;break}yr=Sr.add(pr,0,0,-Sr.height/2+1),this.ctx.save(),this.path([new Vector(Sr.left,Sr.top),new Vector(Sr.left+Sr.width,Sr.top),new Vector(Sr.left+Sr.width,Sr.top+Sr.height),new Vector(Sr.left,Sr.top+Sr.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new TextBounds(rr.value,yr),sr.letterSpacing,mr),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!contains(rr.styles.display,2048))return[3,20];if(rr.styles.listStyleImage===null)return[3,19];if(hr=rr.styles.listStyleImage,hr.type!==0)return[3,18];gr=void 0,Cr=hr.url,Nr.label=15;case 15:return Nr.trys.push([15,17,,18]),[4,this.context.cache.match(Cr)];case 16:return gr=Nr.sent(),this.ctx.drawImage(gr,rr.bounds.left-(gr.width+10),rr.bounds.top),[3,18];case 17:return Nr.sent(),this.context.logger.error("Error loading list-style-image "+Cr),[3,18];case 18:return[3,20];case 19:tr.listValue&&rr.styles.listStyleType!==-1&&(Tr=this.createFontStyle(sr)[0],this.ctx.font=Tr,this.ctx.fillStyle=asString(sr.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Sr=new Bounds(rr.bounds.left,rr.bounds.top+getAbsoluteValue(rr.styles.paddingTop,rr.bounds.width),rr.bounds.width,computeLineHeight(sr.lineHeight,sr.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new TextBounds(tr.listValue,Sr),sr.letterSpacing,computeLineHeight(sr.lineHeight,sr.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Nr.label=20;case 20:return[2]}})})},_e.prototype.renderStackContent=function(tr){return __awaiter(this,void 0,void 0,function(){var rr,nr,hr,sr,ir,hr,or,ar,hr,lr,cr,hr,Ar,ur,hr,dr,mr,hr,pr,yr,hr;return __generator(this,function(gr){switch(gr.label){case 0:if(contains(tr.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(tr.element)];case 1:gr.sent(),rr=0,nr=tr.negativeZIndex,gr.label=2;case 2:return rr<nr.length?(hr=nr[rr],[4,this.renderStack(hr)]):[3,5];case 3:gr.sent(),gr.label=4;case 4:return rr++,[3,2];case 5:return[4,this.renderNodeContent(tr.element)];case 6:gr.sent(),sr=0,ir=tr.nonInlineLevel,gr.label=7;case 7:return sr<ir.length?(hr=ir[sr],[4,this.renderNode(hr)]):[3,10];case 8:gr.sent(),gr.label=9;case 9:return sr++,[3,7];case 10:or=0,ar=tr.nonPositionedFloats,gr.label=11;case 11:return or<ar.length?(hr=ar[or],[4,this.renderStack(hr)]):[3,14];case 12:gr.sent(),gr.label=13;case 13:return or++,[3,11];case 14:lr=0,cr=tr.nonPositionedInlineLevel,gr.label=15;case 15:return lr<cr.length?(hr=cr[lr],[4,this.renderStack(hr)]):[3,18];case 16:gr.sent(),gr.label=17;case 17:return lr++,[3,15];case 18:Ar=0,ur=tr.inlineLevel,gr.label=19;case 19:return Ar<ur.length?(hr=ur[Ar],[4,this.renderNode(hr)]):[3,22];case 20:gr.sent(),gr.label=21;case 21:return Ar++,[3,19];case 22:dr=0,mr=tr.zeroOrAutoZIndexOrTransformedOrOpacity,gr.label=23;case 23:return dr<mr.length?(hr=mr[dr],[4,this.renderStack(hr)]):[3,26];case 24:gr.sent(),gr.label=25;case 25:return dr++,[3,23];case 26:pr=0,yr=tr.positiveZIndex,gr.label=27;case 27:return pr<yr.length?(hr=yr[pr],[4,this.renderStack(hr)]):[3,30];case 28:gr.sent(),gr.label=29;case 29:return pr++,[3,27];case 30:return[2]}})})},_e.prototype.mask=function(tr){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(tr.slice(0).reverse()),this.ctx.closePath()},_e.prototype.path=function(tr){this.ctx.beginPath(),this.formatPath(tr),this.ctx.closePath()},_e.prototype.formatPath=function(tr){var rr=this;tr.forEach(function(nr,sr){var ir=isBezierCurve(nr)?nr.start:nr;sr===0?rr.ctx.moveTo(ir.x,ir.y):rr.ctx.lineTo(ir.x,ir.y),isBezierCurve(nr)&&rr.ctx.bezierCurveTo(nr.startControl.x,nr.startControl.y,nr.endControl.x,nr.endControl.y,nr.end.x,nr.end.y)})},_e.prototype.renderRepeat=function(tr,rr,nr,sr){this.path(tr),this.ctx.fillStyle=rr,this.ctx.translate(nr,sr),this.ctx.fill(),this.ctx.translate(-nr,-sr)},_e.prototype.resizeImage=function(tr,rr,nr){var sr;if(tr.width===rr&&tr.height===nr)return tr;var ir=(sr=this.canvas.ownerDocument)!==null&&sr!==void 0?sr:document,or=ir.createElement("canvas");or.width=Math.max(1,rr),or.height=Math.max(1,nr);var ar=or.getContext("2d");return ar.drawImage(tr,0,0,tr.width,tr.height,0,0,rr,nr),or},_e.prototype.renderBackgroundImage=function(tr){return __awaiter(this,void 0,void 0,function(){var rr,nr,sr,ir,or,ar;return __generator(this,function(lr){switch(lr.label){case 0:rr=tr.styles.backgroundImage.length-1,nr=function(cr){var Ar,ur,dr,Pr,Vr,Wr,Ir,Qr,vr,mr,Pr,Vr,Wr,Ir,Qr,pr,yr,hr,gr,Cr,Tr,Sr,Nr,_r,vr,br,Pr,Er,Rr,Ir,Qr,Ur,Vr,Wr,Hr,$r,Xr,pn,jr,Br,Lr,Or;return __generator(this,function(zr){switch(zr.label){case 0:if(cr.type!==0)return[3,5];Ar=void 0,ur=cr.url,zr.label=1;case 1:return zr.trys.push([1,3,,4]),[4,sr.context.cache.match(ur)];case 2:return Ar=zr.sent(),[3,4];case 3:return zr.sent(),sr.context.logger.error("Error loading background-image "+ur),[3,4];case 4:return Ar&&(dr=calculateBackgroundRendering(tr,rr,[Ar.width,Ar.height,Ar.width/Ar.height]),Pr=dr[0],Vr=dr[1],Wr=dr[2],Ir=dr[3],Qr=dr[4],vr=sr.ctx.createPattern(sr.resizeImage(Ar,Ir,Qr),"repeat"),sr.renderRepeat(Pr,vr,Vr,Wr)),[3,6];case 5:isLinearGradient(cr)?(mr=calculateBackgroundRendering(tr,rr,[null,null,null]),Pr=mr[0],Vr=mr[1],Wr=mr[2],Ir=mr[3],Qr=mr[4],pr=calculateGradientDirection(cr.angle,Ir,Qr),yr=pr[0],hr=pr[1],gr=pr[2],Cr=pr[3],Tr=pr[4],Sr=document.createElement("canvas"),Sr.width=Ir,Sr.height=Qr,Nr=Sr.getContext("2d"),_r=Nr.createLinearGradient(hr,Cr,gr,Tr),processColorStops(cr.stops,yr).forEach(function(Gr){return _r.addColorStop(Gr.stop,asString(Gr.color))}),Nr.fillStyle=_r,Nr.fillRect(0,0,Ir,Qr),Ir>0&&Qr>0&&(vr=sr.ctx.createPattern(Sr,"repeat"),sr.renderRepeat(Pr,vr,Vr,Wr))):isRadialGradient(cr)&&(br=calculateBackgroundRendering(tr,rr,[null,null,null]),Pr=br[0],Er=br[1],Rr=br[2],Ir=br[3],Qr=br[4],Ur=cr.position.length===0?[FIFTY_PERCENT]:cr.position,Vr=getAbsoluteValue(Ur[0],Ir),Wr=getAbsoluteValue(Ur[Ur.length-1],Qr),Hr=calculateRadius(cr,Vr,Wr,Ir,Qr),$r=Hr[0],Xr=Hr[1],$r>0&&Xr>0&&(pn=sr.ctx.createRadialGradient(Er+Vr,Rr+Wr,0,Er+Vr,Rr+Wr,$r),processColorStops(cr.stops,$r*2).forEach(function(Gr){return pn.addColorStop(Gr.stop,asString(Gr.color))}),sr.path(Pr),sr.ctx.fillStyle=pn,$r!==Xr?(jr=tr.bounds.left+.5*tr.bounds.width,Br=tr.bounds.top+.5*tr.bounds.height,Lr=Xr/$r,Or=1/Lr,sr.ctx.save(),sr.ctx.translate(jr,Br),sr.ctx.transform(1,0,0,Lr,0,0),sr.ctx.translate(-jr,-Br),sr.ctx.fillRect(Er,Or*(Rr-Br)+Br,Ir,Qr*Or),sr.ctx.restore()):sr.ctx.fill())),zr.label=6;case 6:return rr--,[2]}})},sr=this,ir=0,or=tr.styles.backgroundImage.slice(0).reverse(),lr.label=1;case 1:return ir<or.length?(ar=or[ir],[5,nr(ar)]):[3,4];case 2:lr.sent(),lr.label=3;case 3:return ir++,[3,1];case 4:return[2]}})})},_e.prototype.renderSolidBorder=function(tr,rr,nr){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(sr){return this.path(parsePathForBorder(nr,rr)),this.ctx.fillStyle=asString(tr),this.ctx.fill(),[2]})})},_e.prototype.renderDoubleBorder=function(tr,rr,nr,sr){return __awaiter(this,void 0,void 0,function(){var ir,or;return __generator(this,function(ar){switch(ar.label){case 0:return rr<3?[4,this.renderSolidBorder(tr,nr,sr)]:[3,2];case 1:return ar.sent(),[2];case 2:return ir=parsePathForBorderDoubleOuter(sr,nr),this.path(ir),this.ctx.fillStyle=asString(tr),this.ctx.fill(),or=parsePathForBorderDoubleInner(sr,nr),this.path(or),this.ctx.fill(),[2]}})})},_e.prototype.renderNodeBackgroundAndBorders=function(tr){return __awaiter(this,void 0,void 0,function(){var rr,nr,sr,ir,or,ar,lr,cr,Ar=this;return __generator(this,function(ur){switch(ur.label){case 0:return this.applyEffects(tr.getEffects(2)),rr=tr.container.styles,nr=!isTransparent(rr.backgroundColor)||rr.backgroundImage.length,sr=[{style:rr.borderTopStyle,color:rr.borderTopColor,width:rr.borderTopWidth},{style:rr.borderRightStyle,color:rr.borderRightColor,width:rr.borderRightWidth},{style:rr.borderBottomStyle,color:rr.borderBottomColor,width:rr.borderBottomWidth},{style:rr.borderLeftStyle,color:rr.borderLeftColor,width:rr.borderLeftWidth}],ir=calculateBackgroundCurvedPaintingArea(getBackgroundValueForIndex(rr.backgroundClip,0),tr.curves),nr||rr.boxShadow.length?(this.ctx.save(),this.path(ir),this.ctx.clip(),isTransparent(rr.backgroundColor)||(this.ctx.fillStyle=asString(rr.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(tr.container)]):[3,2];case 1:ur.sent(),this.ctx.restore(),rr.boxShadow.slice(0).reverse().forEach(function(dr){Ar.ctx.save();var mr=calculateBorderBoxPath(tr.curves),pr=dr.inset?0:MASK_OFFSET,yr=transformPath(mr,-pr+(dr.inset?1:-1)*dr.spread.number,(dr.inset?1:-1)*dr.spread.number,dr.spread.number*(dr.inset?-2:2),dr.spread.number*(dr.inset?-2:2));dr.inset?(Ar.path(mr),Ar.ctx.clip(),Ar.mask(yr)):(Ar.mask(mr),Ar.ctx.clip(),Ar.path(yr)),Ar.ctx.shadowOffsetX=dr.offsetX.number+pr,Ar.ctx.shadowOffsetY=dr.offsetY.number,Ar.ctx.shadowColor=asString(dr.color),Ar.ctx.shadowBlur=dr.blur.number,Ar.ctx.fillStyle=dr.inset?asString(dr.color):"rgba(0,0,0,1)",Ar.ctx.fill(),Ar.ctx.restore()}),ur.label=2;case 2:or=0,ar=0,lr=sr,ur.label=3;case 3:return ar<lr.length?(cr=lr[ar],cr.style!==0&&!isTransparent(cr.color)&&cr.width>0?cr.style!==2?[3,5]:[4,this.renderDashedDottedBorder(cr.color,cr.width,or,tr.curves,2)]:[3,11]):[3,13];case 4:return ur.sent(),[3,11];case 5:return cr.style!==3?[3,7]:[4,this.renderDashedDottedBorder(cr.color,cr.width,or,tr.curves,3)];case 6:return ur.sent(),[3,11];case 7:return cr.style!==4?[3,9]:[4,this.renderDoubleBorder(cr.color,cr.width,or,tr.curves)];case 8:return ur.sent(),[3,11];case 9:return[4,this.renderSolidBorder(cr.color,or,tr.curves)];case 10:ur.sent(),ur.label=11;case 11:or++,ur.label=12;case 12:return ar++,[3,3];case 13:return[2]}})})},_e.prototype.renderDashedDottedBorder=function(tr,rr,nr,sr,ir){return __awaiter(this,void 0,void 0,function(){var or,ar,lr,cr,Ar,ur,dr,mr,pr,yr,hr,gr,Cr,Tr,Sr,Nr,Sr,Nr;return __generator(this,function(_r){return this.ctx.save(),or=parsePathForBorderStroke(sr,nr),ar=parsePathForBorder(sr,nr),ir===2&&(this.path(ar),this.ctx.clip()),isBezierCurve(ar[0])?(lr=ar[0].start.x,cr=ar[0].start.y):(lr=ar[0].x,cr=ar[0].y),isBezierCurve(ar[1])?(Ar=ar[1].end.x,ur=ar[1].end.y):(Ar=ar[1].x,ur=ar[1].y),nr===0||nr===2?dr=Math.abs(lr-Ar):dr=Math.abs(cr-ur),this.ctx.beginPath(),ir===3?this.formatPath(or):this.formatPath(ar.slice(0,2)),mr=rr<3?rr*3:rr*2,pr=rr<3?rr*2:rr,ir===3&&(mr=rr,pr=rr),yr=!0,dr<=mr*2?yr=!1:dr<=mr*2+pr?(hr=dr/(2*mr+pr),mr*=hr,pr*=hr):(gr=Math.floor((dr+pr)/(mr+pr)),Cr=(dr-gr*mr)/(gr-1),Tr=(dr-(gr+1)*mr)/gr,pr=Tr<=0||Math.abs(pr-Cr)<Math.abs(pr-Tr)?Cr:Tr),yr&&(ir===3?this.ctx.setLineDash([0,mr+pr]):this.ctx.setLineDash([mr,pr])),ir===3?(this.ctx.lineCap="round",this.ctx.lineWidth=rr):this.ctx.lineWidth=rr*2+1.1,this.ctx.strokeStyle=asString(tr),this.ctx.stroke(),this.ctx.setLineDash([]),ir===2&&(isBezierCurve(ar[0])&&(Sr=ar[3],Nr=ar[0],this.ctx.beginPath(),this.formatPath([new Vector(Sr.end.x,Sr.end.y),new Vector(Nr.start.x,Nr.start.y)]),this.ctx.stroke()),isBezierCurve(ar[1])&&(Sr=ar[1],Nr=ar[2],this.ctx.beginPath(),this.formatPath([new Vector(Sr.end.x,Sr.end.y),new Vector(Nr.start.x,Nr.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},_e.prototype.render=function(tr){return __awaiter(this,void 0,void 0,function(){var rr;return __generator(this,function(nr){switch(nr.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),rr=parseStackingContexts(tr),[4,this.renderStack(rr)];case 1:return nr.sent(),this.applyEffects([]),[2,this.canvas]}})})},_e}(Renderer),isTextInputElement=function(er){return er instanceof TextareaElementContainer||er instanceof SelectElementContainer?!0:er instanceof InputElementContainer&&er.type!==RADIO&&er.type!==CHECKBOX},calculateBackgroundCurvedPaintingArea=function(er,_e){switch(er){case 0:return calculateBorderBoxPath(_e);case 2:return calculateContentBoxPath(_e);case 1:default:return calculatePaddingBoxPath(_e)}},canvasTextAlign=function(er){switch(er){case 1:return"center";case 2:return"right";case 0:default:return"left"}},iOSBrokenFonts=["-apple-system","system-ui"],fixIOSSystemFonts=function(er){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?er.filter(function(_e){return iOSBrokenFonts.indexOf(_e)===-1}):er},ForeignObjectRenderer=function(er){__extends(_e,er);function _e(tr,rr){var nr=er.call(this,tr,rr)||this;return nr.canvas=rr.canvas?rr.canvas:document.createElement("canvas"),nr.ctx=nr.canvas.getContext("2d"),nr.options=rr,nr.canvas.width=Math.floor(rr.width*rr.scale),nr.canvas.height=Math.floor(rr.height*rr.scale),nr.canvas.style.width=rr.width+"px",nr.canvas.style.height=rr.height+"px",nr.ctx.scale(nr.options.scale,nr.options.scale),nr.ctx.translate(-rr.x,-rr.y),nr.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+rr.width+"x"+rr.height+" at "+rr.x+","+rr.y+") with scale "+rr.scale),nr}return _e.prototype.render=function(tr){return __awaiter(this,void 0,void 0,function(){var rr,nr;return __generator(this,function(sr){switch(sr.label){case 0:return rr=createForeignObjectSVG(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,tr),[4,loadSerializedSVG(rr)];case 1:return nr=sr.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(nr,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},_e}(Renderer),loadSerializedSVG=function(er){return new Promise(function(_e,tr){var rr=new Image;rr.onload=function(){_e(rr)},rr.onerror=tr,rr.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(er))})},Logger=function(){function er(_e){var tr=_e.id,rr=_e.enabled;this.id=tr,this.enabled=rr,this.start=Date.now()}return er.prototype.debug=function(){for(var _e=[],tr=0;tr<arguments.length;tr++)_e[tr]=arguments[tr];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,__spreadArray([this.id,this.getTime()+"ms"],_e)):this.info.apply(this,_e))},er.prototype.getTime=function(){return Date.now()-this.start},er.prototype.info=function(){for(var _e=[],tr=0;tr<arguments.length;tr++)_e[tr]=arguments[tr];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,__spreadArray([this.id,this.getTime()+"ms"],_e))},er.prototype.warn=function(){for(var _e=[],tr=0;tr<arguments.length;tr++)_e[tr]=arguments[tr];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,__spreadArray([this.id,this.getTime()+"ms"],_e)):this.info.apply(this,_e))},er.prototype.error=function(){for(var _e=[],tr=0;tr<arguments.length;tr++)_e[tr]=arguments[tr];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,__spreadArray([this.id,this.getTime()+"ms"],_e)):this.info.apply(this,_e))},er.instances={},er}(),Context=function(){function er(_e,tr){var rr;this.windowBounds=tr,this.instanceName="#"+er.instanceCount++,this.logger=new Logger({id:this.instanceName,enabled:_e.logging}),this.cache=(rr=_e.cache)!==null&&rr!==void 0?rr:new Cache(this,_e)}return er.instanceCount=1,er}(),html2canvas=function(er,_e){return _e===void 0&&(_e={}),renderElement(er,_e)};typeof window<"u"&&CacheStorage.setContext(window);var renderElement=function(er,_e){return __awaiter(void 0,void 0,void 0,function(){var tr,rr,nr,sr,ir,or,ar,lr,cr,Ar,ur,dr,mr,pr,yr,hr,gr,Cr,Tr,Sr,_r,Nr,_r,vr,br,Pr,Er,Rr,Ir,Qr,Ur,Vr,Wr,Hr,$r,Xr,pn,jr,Br,Lr;return __generator(this,function(Or){switch(Or.label){case 0:if(!er||typeof er!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(tr=er.ownerDocument,!tr)throw new Error("Element is not attached to a Document");if(rr=tr.defaultView,!rr)throw new Error("Document is not attached to a Window");return nr={allowTaint:(vr=_e.allowTaint)!==null&&vr!==void 0?vr:!1,imageTimeout:(br=_e.imageTimeout)!==null&&br!==void 0?br:15e3,proxy:_e.proxy,useCORS:(Pr=_e.useCORS)!==null&&Pr!==void 0?Pr:!1},sr=__assign({logging:(Er=_e.logging)!==null&&Er!==void 0?Er:!0,cache:_e.cache},nr),ir={windowWidth:(Rr=_e.windowWidth)!==null&&Rr!==void 0?Rr:rr.innerWidth,windowHeight:(Ir=_e.windowHeight)!==null&&Ir!==void 0?Ir:rr.innerHeight,scrollX:(Qr=_e.scrollX)!==null&&Qr!==void 0?Qr:rr.pageXOffset,scrollY:(Ur=_e.scrollY)!==null&&Ur!==void 0?Ur:rr.pageYOffset},or=new Bounds(ir.scrollX,ir.scrollY,ir.windowWidth,ir.windowHeight),ar=new Context(sr,or),lr=(Vr=_e.foreignObjectRendering)!==null&&Vr!==void 0?Vr:!1,cr={allowTaint:(Wr=_e.allowTaint)!==null&&Wr!==void 0?Wr:!1,onclone:_e.onclone,ignoreElements:_e.ignoreElements,inlineImages:lr,copyStyles:lr},ar.logger.debug("Starting document clone with size "+or.width+"x"+or.height+" scrolled to "+-or.left+","+-or.top),Ar=new DocumentCloner(ar,er,cr),ur=Ar.clonedReferenceElement,ur?[4,Ar.toIFrame(tr,or)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return dr=Or.sent(),mr=isBodyElement(ur)||isHTMLElement(ur)?parseDocumentSize(ur.ownerDocument):parseBounds(ar,ur),pr=mr.width,yr=mr.height,hr=mr.left,gr=mr.top,Cr=parseBackgroundColor(ar,ur,_e.backgroundColor),Tr={canvas:_e.canvas,backgroundColor:Cr,scale:($r=(Hr=_e.scale)!==null&&Hr!==void 0?Hr:rr.devicePixelRatio)!==null&&$r!==void 0?$r:1,x:((Xr=_e.x)!==null&&Xr!==void 0?Xr:0)+hr,y:((pn=_e.y)!==null&&pn!==void 0?pn:0)+gr,width:(jr=_e.width)!==null&&jr!==void 0?jr:Math.ceil(pr),height:(Br=_e.height)!==null&&Br!==void 0?Br:Math.ceil(yr)},lr?(ar.logger.debug("Document cloned, using foreign object rendering"),_r=new ForeignObjectRenderer(ar,Tr),[4,_r.render(ur)]):[3,3];case 2:return Sr=Or.sent(),[3,5];case 3:return ar.logger.debug("Document cloned, element located at "+hr+","+gr+" with size "+pr+"x"+yr+" using computed rendering"),ar.logger.debug("Starting DOM parsing"),Nr=parseTree(ar,ur),Cr===Nr.styles.backgroundColor&&(Nr.styles.backgroundColor=COLORS.TRANSPARENT),ar.logger.debug("Starting renderer for element at "+Tr.x+","+Tr.y+" with size "+Tr.width+"x"+Tr.height),_r=new CanvasRenderer(ar,Tr),[4,_r.render(Nr)];case 4:Sr=Or.sent(),Or.label=5;case 5:return(!((Lr=_e.removeContainer)!==null&&Lr!==void 0)||Lr)&&(DocumentCloner.destroy(dr)||ar.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),ar.logger.debug("Finished rendering"),[2,Sr]}})})},parseBackgroundColor=function(er,_e,tr){var rr=_e.ownerDocument,nr=rr.documentElement?parseColor(er,getComputedStyle(rr.documentElement).backgroundColor):COLORS.TRANSPARENT,sr=rr.body?parseColor(er,getComputedStyle(rr.body).backgroundColor):COLORS.TRANSPARENT,ir=typeof tr=="string"?parseColor(er,tr):tr===null?COLORS.TRANSPARENT:4294967295;return _e===rr.documentElement?isTransparent(nr)?isTransparent(sr)?ir:sr:nr:ir};const html2canvas_esm=Object.freeze(Object.defineProperty({__proto__:null,default:html2canvas},Symbol.toStringTag,{value:"Module"})),scriptRel="modulepreload",assetsURL=function(er){return"/"+er},seen={},__vitePreload=function er(_e,tr,rr){let nr=Promise.resolve();if(tr&&tr.length>0){document.getElementsByTagName("link");const ir=document.querySelector("meta[property=csp-nonce]"),or=(ir==null?void 0:ir.nonce)||(ir==null?void 0:ir.getAttribute("nonce"));nr=Promise.allSettled(tr.map(ar=>{if(ar=assetsURL(ar),ar in seen)return;seen[ar]=!0;const lr=ar.endsWith(".css"),cr=lr?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${ar}"]${cr}`))return;const Ar=document.createElement("link");if(Ar.rel=lr?"stylesheet":scriptRel,lr||(Ar.as="script"),Ar.crossOrigin="",Ar.href=ar,or&&Ar.setAttribute("nonce",or),document.head.appendChild(Ar),lr)return new Promise((ur,dr)=>{Ar.addEventListener("load",ur),Ar.addEventListener("error",()=>dr(new Error(`Unable to preload CSS for ${ar}`)))})}))}function sr(ir){const or=new Event("vite:preloadError",{cancelable:!0});if(or.payload=ir,window.dispatchEvent(or),!or.defaultPrevented)throw ir}return nr.then(ir=>{for(const or of ir||[])or.status==="rejected"&&sr(or.reason);return _e().catch(sr)})};function _typeof(er){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_e){return typeof _e}:function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},_typeof(er)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(er,_e){for(var tr=new u16(31),rr=0;rr<31;++rr)tr[rr]=_e+=1<<er[rr-1];for(var nr=new i32(tr[30]),rr=1;rr<30;++rr)for(var sr=tr[rr];sr<tr[rr+1];++sr)nr[sr]=sr-tr[rr]<<5|rr;return{b:tr,r:nr}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(er,_e,tr){for(var rr=er.length,nr=0,sr=new u16(_e);nr<rr;++nr)er[nr]&&++sr[er[nr]-1];var ir=new u16(_e);for(nr=1;nr<_e;++nr)ir[nr]=ir[nr-1]+sr[nr-1]<<1;var or;if(tr){or=new u16(1<<_e);var ar=15-_e;for(nr=0;nr<rr;++nr)if(er[nr])for(var lr=nr<<4|er[nr],cr=_e-er[nr],Ar=ir[er[nr]-1]++<<cr,ur=Ar|(1<<cr)-1;Ar<=ur;++Ar)or[rev[Ar]>>ar]=lr}else for(or=new u16(rr),nr=0;nr<rr;++nr)er[nr]&&(or[nr]=rev[ir[er[nr]-1]++]>>15-er[nr]);return or},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(er){for(var _e=er[0],tr=1;tr<er.length;++tr)er[tr]>_e&&(_e=er[tr]);return _e},bits=function(er,_e,tr){var rr=_e/8|0;return(er[rr]|er[rr+1]<<8)>>(_e&7)&tr},bits16=function(er,_e){var tr=_e/8|0;return(er[tr]|er[tr+1]<<8|er[tr+2]<<16)>>(_e&7)},shft=function(er){return(er+7)/8|0},slc=function(er,_e,tr){return(tr==null||tr>er.length)&&(tr=er.length),new u8(er.subarray(_e,tr))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(er,_e,tr){var rr=new Error(_e||ec[er]);if(rr.code=er,Error.captureStackTrace&&Error.captureStackTrace(rr,err),!tr)throw rr;return rr},inflt=function(er,_e,tr,rr){var nr=er.length,sr=0;if(!nr||_e.f&&!_e.l)return tr||new u8(0);var ir=!tr,or=ir||_e.i!=2,ar=_e.i;ir&&(tr=new u8(nr*3));var lr=function(Sn){var Bn=tr.length;if(Sn>Bn){var kn=new u8(Math.max(Bn*2,Sn));kn.set(tr),tr=kn}},cr=_e.f||0,Ar=_e.p||0,ur=_e.b||0,dr=_e.l,mr=_e.d,pr=_e.m,yr=_e.n,hr=nr*8;do{if(!dr){cr=bits(er,Ar,1);var gr=bits(er,Ar+1,3);if(Ar+=3,gr)if(gr==1)dr=flrm,mr=fdrm,pr=9,yr=5;else if(gr==2){var Nr=bits(er,Ar,31)+257,_r=bits(er,Ar+10,15)+4,vr=Nr+bits(er,Ar+5,31)+1;Ar+=14;for(var br=new u8(vr),Pr=new u8(19),Er=0;Er<_r;++Er)Pr[clim[Er]]=bits(er,Ar+Er*3,7);Ar+=_r*3;for(var Rr=max(Pr),Ir=(1<<Rr)-1,Qr=hMap(Pr,Rr,1),Er=0;Er<vr;){var Ur=Qr[bits(er,Ar,Ir)];Ar+=Ur&15;var Cr=Ur>>4;if(Cr<16)br[Er++]=Cr;else{var Vr=0,Wr=0;for(Cr==16?(Wr=3+bits(er,Ar,3),Ar+=2,Vr=br[Er-1]):Cr==17?(Wr=3+bits(er,Ar,7),Ar+=3):Cr==18&&(Wr=11+bits(er,Ar,127),Ar+=7);Wr--;)br[Er++]=Vr}}var Hr=br.subarray(0,Nr),$r=br.subarray(Nr);pr=max(Hr),yr=max($r),dr=hMap(Hr,pr,1),mr=hMap($r,yr,1)}else err(1);else{var Cr=shft(Ar)+4,Tr=er[Cr-4]|er[Cr-3]<<8,Sr=Cr+Tr;if(Sr>nr){ar&&err(0);break}or&&lr(ur+Tr),tr.set(er.subarray(Cr,Sr),ur),_e.b=ur+=Tr,_e.p=Ar=Sr*8,_e.f=cr;continue}if(Ar>hr){ar&&err(0);break}}or&&lr(ur+131072);for(var Xr=(1<<pr)-1,pn=(1<<yr)-1,jr=Ar;;jr=Ar){var Vr=dr[bits16(er,Ar)&Xr],Br=Vr>>4;if(Ar+=Vr&15,Ar>hr){ar&&err(0);break}if(Vr||err(2),Br<256)tr[ur++]=Br;else if(Br==256){jr=Ar,dr=null;break}else{var Lr=Br-254;if(Br>264){var Er=Br-257,Or=fleb[Er];Lr=bits(er,Ar,(1<<Or)-1)+fl[Er],Ar+=Or}var zr=mr[bits16(er,Ar)&pn],Gr=zr>>4;zr||err(3),Ar+=zr&15;var $r=fd[Gr];if(Gr>3){var Or=fdeb[Gr];$r+=bits16(er,Ar)&(1<<Or)-1,Ar+=Or}if(Ar>hr){ar&&err(0);break}or&&lr(ur+131072);var Yr=ur+Lr;if(ur<$r){var dn=sr-$r,En=Math.min($r,Yr);for(dn+ur<0&&err(3);ur<En;++ur)tr[ur]=rr[dn+ur]}for(;ur<Yr;++ur)tr[ur]=tr[ur-$r]}}_e.l=dr,_e.p=jr,_e.b=ur,_e.f=cr,dr&&(cr=1,_e.m=pr,_e.d=mr,_e.n=yr)}while(!cr);return ur!=tr.length&&ir?slc(tr,0,ur):tr.subarray(0,ur)},wbits=function(er,_e,tr){tr<<=_e&7;var rr=_e/8|0;er[rr]|=tr,er[rr+1]|=tr>>8},wbits16=function(er,_e,tr){tr<<=_e&7;var rr=_e/8|0;er[rr]|=tr,er[rr+1]|=tr>>8,er[rr+2]|=tr>>16},hTree=function(er,_e){for(var tr=[],rr=0;rr<er.length;++rr)er[rr]&&tr.push({s:rr,f:er[rr]});var nr=tr.length,sr=tr.slice();if(!nr)return{t:et$1,l:0};if(nr==1){var ir=new u8(tr[0].s+1);return ir[tr[0].s]=1,{t:ir,l:1}}tr.sort(function(Sr,Nr){return Sr.f-Nr.f}),tr.push({s:-1,f:25001});var or=tr[0],ar=tr[1],lr=0,cr=1,Ar=2;for(tr[0]={s:-1,f:or.f+ar.f,l:or,r:ar};cr!=nr-1;)or=tr[tr[lr].f<tr[Ar].f?lr++:Ar++],ar=tr[lr!=cr&&tr[lr].f<tr[Ar].f?lr++:Ar++],tr[cr++]={s:-1,f:or.f+ar.f,l:or,r:ar};for(var ur=sr[0].s,rr=1;rr<nr;++rr)sr[rr].s>ur&&(ur=sr[rr].s);var dr=new u16(ur+1),mr=ln(tr[cr-1],dr,0);if(mr>_e){var rr=0,pr=0,yr=mr-_e,hr=1<<yr;for(sr.sort(function(Nr,_r){return dr[_r.s]-dr[Nr.s]||Nr.f-_r.f});rr<nr;++rr){var gr=sr[rr].s;if(dr[gr]>_e)pr+=hr-(1<<mr-dr[gr]),dr[gr]=_e;else break}for(pr>>=yr;pr>0;){var Cr=sr[rr].s;dr[Cr]<_e?pr-=1<<_e-dr[Cr]++-1:++rr}for(;rr>=0&&pr;--rr){var Tr=sr[rr].s;dr[Tr]==_e&&(--dr[Tr],++pr)}mr=_e}return{t:new u8(dr),l:mr}},ln=function(er,_e,tr){return er.s==-1?Math.max(ln(er.l,_e,tr+1),ln(er.r,_e,tr+1)):_e[er.s]=tr},lc=function(er){for(var _e=er.length;_e&&!er[--_e];);for(var tr=new u16(++_e),rr=0,nr=er[0],sr=1,ir=function(ar){tr[rr++]=ar},or=1;or<=_e;++or)if(er[or]==nr&&or!=_e)++sr;else{if(!nr&&sr>2){for(;sr>138;sr-=138)ir(32754);sr>2&&(ir(sr>10?sr-11<<5|28690:sr-3<<5|12305),sr=0)}else if(sr>3){for(ir(nr),--sr;sr>6;sr-=6)ir(8304);sr>2&&(ir(sr-3<<5|8208),sr=0)}for(;sr--;)ir(nr);sr=1,nr=er[or]}return{c:tr.subarray(0,rr),n:_e}},clen=function(er,_e){for(var tr=0,rr=0;rr<_e.length;++rr)tr+=er[rr]*_e[rr];return tr},wfblk=function(er,_e,tr){var rr=tr.length,nr=shft(_e+2);er[nr]=rr&255,er[nr+1]=rr>>8,er[nr+2]=er[nr]^255,er[nr+3]=er[nr+1]^255;for(var sr=0;sr<rr;++sr)er[nr+sr+4]=tr[sr];return(nr+4+rr)*8},wblk=function(er,_e,tr,rr,nr,sr,ir,or,ar,lr,cr){wbits(_e,cr++,tr),++nr[256];for(var Ar=hTree(nr,15),ur=Ar.t,dr=Ar.l,mr=hTree(sr,15),pr=mr.t,yr=mr.l,hr=lc(ur),gr=hr.c,Cr=hr.n,Tr=lc(pr),Sr=Tr.c,Nr=Tr.n,_r=new u16(19),vr=0;vr<gr.length;++vr)++_r[gr[vr]&31];for(var vr=0;vr<Sr.length;++vr)++_r[Sr[vr]&31];for(var br=hTree(_r,7),Pr=br.t,Er=br.l,Rr=19;Rr>4&&!Pr[clim[Rr-1]];--Rr);var Ir=lr+5<<3,Qr=clen(nr,flt)+clen(sr,fdt)+ir,Ur=clen(nr,ur)+clen(sr,pr)+ir+14+3*Rr+clen(_r,Pr)+2*_r[16]+3*_r[17]+7*_r[18];if(ar>=0&&Ir<=Qr&&Ir<=Ur)return wfblk(_e,cr,er.subarray(ar,ar+lr));var Vr,Wr,Hr,$r;if(wbits(_e,cr,1+(Ur<Qr)),cr+=2,Ur<Qr){Vr=hMap(ur,dr,0),Wr=ur,Hr=hMap(pr,yr,0),$r=pr;var Xr=hMap(Pr,Er,0);wbits(_e,cr,Cr-257),wbits(_e,cr+5,Nr-1),wbits(_e,cr+10,Rr-4),cr+=14;for(var vr=0;vr<Rr;++vr)wbits(_e,cr+3*vr,Pr[clim[vr]]);cr+=3*Rr;for(var pn=[gr,Sr],jr=0;jr<2;++jr)for(var Br=pn[jr],vr=0;vr<Br.length;++vr){var Lr=Br[vr]&31;wbits(_e,cr,Xr[Lr]),cr+=Pr[Lr],Lr>15&&(wbits(_e,cr,Br[vr]>>5&127),cr+=Br[vr]>>12)}}else Vr=flm,Wr=flt,Hr=fdm,$r=fdt;for(var vr=0;vr<or;++vr){var Or=rr[vr];if(Or>255){var Lr=Or>>18&31;wbits16(_e,cr,Vr[Lr+257]),cr+=Wr[Lr+257],Lr>7&&(wbits(_e,cr,Or>>23&31),cr+=fleb[Lr]);var zr=Or&31;wbits16(_e,cr,Hr[zr]),cr+=$r[zr],zr>3&&(wbits16(_e,cr,Or>>5&8191),cr+=fdeb[zr])}else wbits16(_e,cr,Vr[Or]),cr+=Wr[Or]}return wbits16(_e,cr,Vr[256]),cr+Wr[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(er,_e,tr,rr,nr,sr){var ir=sr.z||er.length,or=new u8(rr+ir+5*(1+Math.ceil(ir/7e3))+nr),ar=or.subarray(rr,or.length-nr),lr=sr.l,cr=(sr.r||0)&7;if(_e){cr&&(ar[0]=sr.r>>3);for(var Ar=deo[_e-1],ur=Ar>>13,dr=Ar&8191,mr=(1<<tr)-1,pr=sr.p||new u16(32768),yr=sr.h||new u16(mr+1),hr=Math.ceil(tr/3),gr=2*hr,Cr=function(Kn){return(er[Kn]^er[Kn+1]<<hr^er[Kn+2]<<gr)&mr},Tr=new i32(25e3),Sr=new u16(288),Nr=new u16(32),_r=0,vr=0,br=sr.i||0,Pr=0,Er=sr.w||0,Rr=0;br+2<ir;++br){var Ir=Cr(br),Qr=br&32767,Ur=yr[Ir];if(pr[Qr]=Ur,yr[Ir]=Qr,Er<=br){var Vr=ir-br;if((_r>7e3||Pr>24576)&&(Vr>423||!lr)){cr=wblk(er,ar,0,Tr,Sr,Nr,vr,Pr,Rr,br-Rr,cr),Pr=_r=vr=0,Rr=br;for(var Wr=0;Wr<286;++Wr)Sr[Wr]=0;for(var Wr=0;Wr<30;++Wr)Nr[Wr]=0}var Hr=2,$r=0,Xr=dr,pn=Qr-Ur&32767;if(Vr>2&&Ir==Cr(br-pn))for(var jr=Math.min(ur,Vr)-1,Br=Math.min(32767,br),Lr=Math.min(258,Vr);pn<=Br&&--Xr&&Qr!=Ur;){if(er[br+Hr]==er[br+Hr-pn]){for(var Or=0;Or<Lr&&er[br+Or]==er[br+Or-pn];++Or);if(Or>Hr){if(Hr=Or,$r=pn,Or>jr)break;for(var zr=Math.min(pn,Or-2),Gr=0,Wr=0;Wr<zr;++Wr){var Yr=br-pn+Wr&32767,dn=pr[Yr],En=Yr-dn&32767;En>Gr&&(Gr=En,Ur=Yr)}}}Qr=Ur,Ur=pr[Qr],pn+=Qr-Ur&32767}if($r){Tr[Pr++]=268435456|revfl[Hr]<<18|revfd[$r];var Sn=revfl[Hr]&31,Bn=revfd[$r]&31;vr+=fleb[Sn]+fdeb[Bn],++Sr[257+Sn],++Nr[Bn],Er=br+Hr,++_r}else Tr[Pr++]=er[br],++Sr[er[br]]}}for(br=Math.max(br,Er);br<ir;++br)Tr[Pr++]=er[br],++Sr[er[br]];cr=wblk(er,ar,lr,Tr,Sr,Nr,vr,Pr,Rr,br-Rr,cr),lr||(sr.r=cr&7|ar[cr/8|0]<<3,cr-=7,sr.h=yr,sr.p=pr,sr.i=br,sr.w=Er)}else{for(var br=sr.w||0;br<ir+lr;br+=65535){var kn=br+65535;kn>=ir&&(ar[cr/8|0]=lr,kn=ir),cr=wfblk(ar,cr+1,er.subarray(br,kn))}sr.i=ir}return slc(or,0,rr+shft(cr)+nr)},adler=function(){var er=1,_e=0;return{p:function(tr){for(var rr=er,nr=_e,sr=tr.length|0,ir=0;ir!=sr;){for(var or=Math.min(ir+2655,sr);ir<or;++ir)nr+=rr+=tr[ir];rr=(rr&65535)+15*(rr>>16),nr=(nr&65535)+15*(nr>>16)}er=rr,_e=nr},d:function(){return er%=65521,_e%=65521,(er&255)<<24|(er&65280)<<8|(_e&255)<<8|_e>>8}}},dopt=function(er,_e,tr,rr,nr){if(!nr&&(nr={l:1},_e.dictionary)){var sr=_e.dictionary.subarray(-32768),ir=new u8(sr.length+er.length);ir.set(sr),ir.set(er,sr.length),er=ir,nr.w=sr.length}return dflt(er,_e.level==null?6:_e.level,_e.mem==null?nr.l?Math.ceil(Math.max(8,Math.min(13,Math.log(er.length)))*1.5):20:12+_e.mem,tr,rr,nr)},wbytes=function(er,_e,tr){for(;tr;++_e)er[_e]=tr,tr>>>=8},zlh=function(er,_e){var tr=_e.level,rr=tr==0?0:tr<6?1:tr==9?3:2;if(er[0]=120,er[1]=rr<<6|(_e.dictionary&&32),er[1]|=31-(er[0]<<8|er[1])%31,_e.dictionary){var nr=adler();nr.p(_e.dictionary),wbytes(er,2,nr.d())}},zls=function(er,_e){return((er[0]&15)!=8||er[0]>>4>7||(er[0]<<8|er[1])%31)&&err(6,"invalid zlib data"),(er[1]>>5&1)==+!_e&&err(6,"invalid zlib data: "+(er[1]&32?"need":"unexpected")+" dictionary"),(er[1]>>3&4)+2};function zlibSync(er,_e){_e||(_e={});var tr=adler();tr.p(er);var rr=dopt(er,_e,_e.dictionary?6:2,4);return zlh(rr,_e),wbytes(rr,rr.length-4,tr.d()),rr}function unzlibSync(er,_e){return inflt(er.subarray(zls(er,_e),-4),{i:2},_e,_e)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch(er){}var n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(er){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(er){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(er))}};function o(er,_e,tr){var rr=new XMLHttpRequest;rr.open("GET",er),rr.responseType="blob",rr.onload=function(){l(rr.response,_e,tr)},rr.onerror=function(){a.error("could not download file")},rr.send()}function s(er){var _e=new XMLHttpRequest;_e.open("HEAD",er,!1);try{_e.send()}catch{}return _e.status>=200&&_e.status<=299}function c(er){try{er.dispatchEvent(new MouseEvent("click"))}catch{var _e=document.createEvent("MouseEvents");_e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),er.dispatchEvent(_e)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(er,_e,tr){var rr=n.URL||n.webkitURL,nr=document.createElement("a");_e=_e||er.name||"download",nr.download=_e,nr.rel="noopener",typeof er=="string"?(nr.href=er,nr.origin!==location.origin?s(nr.href)?o(er,_e,tr):c(nr,nr.target="_blank"):c(nr)):(nr.href=rr.createObjectURL(er),setTimeout(function(){rr.revokeObjectURL(nr.href)},4e4),setTimeout(function(){c(nr)},0))}:"msSaveOrOpenBlob"in navigator?function(er,_e,tr){if(_e=_e||er.name||"download",typeof er=="string")if(s(er))o(er,_e,tr);else{var rr=document.createElement("a");rr.href=er,rr.target="_blank",setTimeout(function(){c(rr)})}else navigator.msSaveOrOpenBlob(function(nr,sr){return sr===void 0?sr={autoBom:!1}:_typeof(sr)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),sr={autoBom:!sr}),sr.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(nr.type)?new Blob(["\uFEFF",nr],{type:nr.type}):nr}(er,tr),_e)}:function(er,_e,tr,rr){if((rr=rr||open("","_blank"))&&(rr.document.title=rr.document.body.innerText="downloading..."),typeof er=="string")return o(er,_e,tr);var nr=er.type==="application/octet-stream",sr=/constructor/i.test(n.HTMLElement)||n.safari,ir=/CriOS\/[\d]+/.test(navigator.userAgent);if((ir||nr&&sr)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var or=new FileReader;or.onloadend=function(){var cr=or.result;cr=ir?cr:cr.replace(/^data:[^;]*;/,"data:attachment/file;"),rr?rr.location.href=cr:location=cr,rr=null},or.readAsDataURL(er)}else{var ar=n.URL||n.webkitURL,lr=ar.createObjectURL(er);rr?rr.location=lr:location.href=lr,rr=null,setTimeout(function(){ar.revokeObjectURL(lr)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(er){var _e;er=er||"",this.ok=!1,er.charAt(0)=="#"&&(er=er.substr(1,6)),er={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[er=(er=er.replace(/ /g,"")).toLowerCase()]||er;for(var tr=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(or){return[parseInt(or[1]),parseInt(or[2]),parseInt(or[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(or){return[parseInt(or[1],16),parseInt(or[2],16),parseInt(or[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(or){return[parseInt(or[1]+or[1],16),parseInt(or[2]+or[2],16),parseInt(or[3]+or[3],16)]}}],rr=0;rr<tr.length;rr++){var nr=tr[rr].re,sr=tr[rr].process,ir=nr.exec(er);ir&&(_e=sr(ir),this.r=_e[0],this.g=_e[1],this.b=_e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var or=this.r.toString(16),ar=this.g.toString(16),lr=this.b.toString(16);return or.length==1&&(or="0"+or),ar.length==1&&(ar="0"+ar),lr.length==1&&(lr="0"+lr),"#"+or+ar+lr}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(er,_e){var tr=er[0],rr=er[1],nr=er[2],sr=er[3];tr=g(tr,rr,nr,sr,_e[0],7,-680876936),sr=g(sr,tr,rr,nr,_e[1],12,-389564586),nr=g(nr,sr,tr,rr,_e[2],17,606105819),rr=g(rr,nr,sr,tr,_e[3],22,-1044525330),tr=g(tr,rr,nr,sr,_e[4],7,-176418897),sr=g(sr,tr,rr,nr,_e[5],12,1200080426),nr=g(nr,sr,tr,rr,_e[6],17,-1473231341),rr=g(rr,nr,sr,tr,_e[7],22,-45705983),tr=g(tr,rr,nr,sr,_e[8],7,1770035416),sr=g(sr,tr,rr,nr,_e[9],12,-1958414417),nr=g(nr,sr,tr,rr,_e[10],17,-42063),rr=g(rr,nr,sr,tr,_e[11],22,-1990404162),tr=g(tr,rr,nr,sr,_e[12],7,1804603682),sr=g(sr,tr,rr,nr,_e[13],12,-40341101),nr=g(nr,sr,tr,rr,_e[14],17,-1502002290),tr=m(tr,rr=g(rr,nr,sr,tr,_e[15],22,1236535329),nr,sr,_e[1],5,-165796510),sr=m(sr,tr,rr,nr,_e[6],9,-1069501632),nr=m(nr,sr,tr,rr,_e[11],14,643717713),rr=m(rr,nr,sr,tr,_e[0],20,-373897302),tr=m(tr,rr,nr,sr,_e[5],5,-701558691),sr=m(sr,tr,rr,nr,_e[10],9,38016083),nr=m(nr,sr,tr,rr,_e[15],14,-660478335),rr=m(rr,nr,sr,tr,_e[4],20,-405537848),tr=m(tr,rr,nr,sr,_e[9],5,568446438),sr=m(sr,tr,rr,nr,_e[14],9,-1019803690),nr=m(nr,sr,tr,rr,_e[3],14,-187363961),rr=m(rr,nr,sr,tr,_e[8],20,1163531501),tr=m(tr,rr,nr,sr,_e[13],5,-1444681467),sr=m(sr,tr,rr,nr,_e[2],9,-51403784),nr=m(nr,sr,tr,rr,_e[7],14,1735328473),tr=v(tr,rr=m(rr,nr,sr,tr,_e[12],20,-1926607734),nr,sr,_e[5],4,-378558),sr=v(sr,tr,rr,nr,_e[8],11,-2022574463),nr=v(nr,sr,tr,rr,_e[11],16,1839030562),rr=v(rr,nr,sr,tr,_e[14],23,-35309556),tr=v(tr,rr,nr,sr,_e[1],4,-1530992060),sr=v(sr,tr,rr,nr,_e[4],11,1272893353),nr=v(nr,sr,tr,rr,_e[7],16,-155497632),rr=v(rr,nr,sr,tr,_e[10],23,-1094730640),tr=v(tr,rr,nr,sr,_e[13],4,681279174),sr=v(sr,tr,rr,nr,_e[0],11,-358537222),nr=v(nr,sr,tr,rr,_e[3],16,-722521979),rr=v(rr,nr,sr,tr,_e[6],23,76029189),tr=v(tr,rr,nr,sr,_e[9],4,-640364487),sr=v(sr,tr,rr,nr,_e[12],11,-421815835),nr=v(nr,sr,tr,rr,_e[15],16,530742520),tr=b(tr,rr=v(rr,nr,sr,tr,_e[2],23,-995338651),nr,sr,_e[0],6,-198630844),sr=b(sr,tr,rr,nr,_e[7],10,1126891415),nr=b(nr,sr,tr,rr,_e[14],15,-1416354905),rr=b(rr,nr,sr,tr,_e[5],21,-57434055),tr=b(tr,rr,nr,sr,_e[12],6,1700485571),sr=b(sr,tr,rr,nr,_e[3],10,-1894986606),nr=b(nr,sr,tr,rr,_e[10],15,-1051523),rr=b(rr,nr,sr,tr,_e[1],21,-2054922799),tr=b(tr,rr,nr,sr,_e[8],6,1873313359),sr=b(sr,tr,rr,nr,_e[15],10,-30611744),nr=b(nr,sr,tr,rr,_e[6],15,-1560198380),rr=b(rr,nr,sr,tr,_e[13],21,1309151649),tr=b(tr,rr,nr,sr,_e[4],6,-145523070),sr=b(sr,tr,rr,nr,_e[11],10,-1120210379),nr=b(nr,sr,tr,rr,_e[2],15,718787259),rr=b(rr,nr,sr,tr,_e[9],21,-343485551),er[0]=_(tr,er[0]),er[1]=_(rr,er[1]),er[2]=_(nr,er[2]),er[3]=_(sr,er[3])}function p(er,_e,tr,rr,nr,sr){return _e=_(_(_e,er),_(rr,sr)),_(_e<<nr|_e>>>32-nr,tr)}function g(er,_e,tr,rr,nr,sr,ir){return p(_e&tr|~_e&rr,er,_e,nr,sr,ir)}function m(er,_e,tr,rr,nr,sr,ir){return p(_e&rr|tr&~rr,er,_e,nr,sr,ir)}function v(er,_e,tr,rr,nr,sr,ir){return p(_e^tr^rr,er,_e,nr,sr,ir)}function b(er,_e,tr,rr,nr,sr,ir){return p(tr^(_e|~rr),er,_e,nr,sr,ir)}function y(er){var _e,tr=er.length,rr=[1732584193,-271733879,-1732584194,271733878];for(_e=64;_e<=er.length;_e+=64)d(rr,w(er.substring(_e-64,_e)));er=er.substring(_e-64);var nr=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(_e=0;_e<er.length;_e++)nr[_e>>2]|=er.charCodeAt(_e)<<(_e%4<<3);if(nr[_e>>2]|=128<<(_e%4<<3),_e>55)for(d(rr,nr),_e=0;_e<16;_e++)nr[_e]=0;return nr[14]=8*tr,d(rr,nr),rr}function w(er){var _e,tr=[];for(_e=0;_e<64;_e+=4)tr[_e>>2]=er.charCodeAt(_e)+(er.charCodeAt(_e+1)<<8)+(er.charCodeAt(_e+2)<<16)+(er.charCodeAt(_e+3)<<24);return tr}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(er){for(var _e="",tr=0;tr<4;tr++)_e+=N[er>>8*tr+4&15]+N[er>>8*tr&15];return _e}function A(er){return String.fromCharCode((255&er)>>0,(65280&er)>>8,(16711680&er)>>16,(4278190080&er)>>24)}function x(er){return y(er).map(A).join("")}var S=function(er){for(var _e=0;_e<er.length;_e++)er[_e]=L(er[_e]);return er.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(er,_e){if(S){var tr=(65535&er)+(65535&_e);return(er>>16)+(_e>>16)+(tr>>16)<<16|65535&tr}return er+_e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(er,_e){var tr,rr,nr,sr;if(er!==tr){for(var ir=(nr=er,sr=1+(256/er.length>>0),new Array(sr+1).join(nr)),or=[],ar=0;ar<256;ar++)or[ar]=ar;var lr=0;for(ar=0;ar<256;ar++){var cr=or[ar];lr=(lr+cr+ir.charCodeAt(ar))%256,or[ar]=or[lr],or[lr]=cr}tr=er,rr=or}else or=rr;var Ar=_e.length,ur=0,dr=0,mr="";for(ar=0;ar<Ar;ar++)dr=(dr+(cr=or[ur=(ur+1)%256]))%256,or[ur]=or[dr],or[dr]=cr,ir=or[(or[ur]+or[dr])%256],mr+=String.fromCharCode(_e.charCodeAt(ar)^ir);return mr}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(er,_e,tr,rr){this.v=1,this.r=2;var nr=192;er.forEach(function(or){if(k.perm!==void 0)throw new Error("Invalid permission: "+or);nr+=k[or]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var sr=(_e+this.padding).substr(0,32),ir=(tr+this.padding).substr(0,32);this.O=this.processOwnerPassword(sr,ir),this.P=-(1+(255^nr)),this.encryptionKey=x(sr+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(rr)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(er){if(/[^\u0000-\u00ff]/.test(er))throw new Error("Invalid PDF Name Object: "+er+", Only accept ASCII characters.");for(var _e="",tr=er.length,rr=0;rr<tr;rr++){var nr=er.charCodeAt(rr);nr<33||nr===35||nr===37||nr===40||nr===41||nr===47||nr===60||nr===62||nr===91||nr===93||nr===123||nr===125||nr>126?_e+="#"+("0"+nr.toString(16)).slice(-2):_e+=er[rr]}return _e}function C(er){if(_typeof(er)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var _e={};this.subscribe=function(tr,rr,nr){if(nr=nr||!1,typeof tr!="string"||typeof rr!="function"||typeof nr!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");_e.hasOwnProperty(tr)||(_e[tr]={});var sr=Math.random().toString(35);return _e[tr][sr]=[rr,!!nr],sr},this.unsubscribe=function(tr){for(var rr in _e)if(_e[rr][tr])return delete _e[rr][tr],Object.keys(_e[rr]).length===0&&delete _e[rr],!0;return!1},this.publish=function(tr){if(_e.hasOwnProperty(tr)){var rr=Array.prototype.slice.call(arguments,1),nr=[];for(var sr in _e[tr]){var ir=_e[tr][sr];try{ir[0].apply(er,rr)}catch(or){n.console&&a.error("jsPDF PubSub Error",or.message,or)}ir[1]&&nr.push(sr)}nr.length&&nr.forEach(this.unsubscribe)}},this.getTopics=function(){return _e}}function j(er){if(!(this instanceof j))return new j(er);var _e="opacity,stroke-opacity".split(",");for(var tr in er)er.hasOwnProperty(tr)&&_e.indexOf(tr)>=0&&(this[tr]=er[tr]);this.id="",this.objectNumber=-1}function O(er,_e){this.gState=er,this.matrix=_e,this.id="",this.objectNumber=-1}function B(er,_e,tr,rr,nr){if(!(this instanceof B))return new B(er,_e,tr,rr,nr);this.type=er==="axial"?2:3,this.coords=_e,this.colors=tr,O.call(this,rr,nr)}function M(er,_e,tr,rr,nr){if(!(this instanceof M))return new M(er,_e,tr,rr,nr);this.boundingBox=er,this.xStep=_e,this.yStep=tr,this.stream="",this.cloneIndex=0,O.call(this,rr,nr)}function E(er){var _e,tr=typeof arguments[0]=="string"?arguments[0]:"p",rr=arguments[1],nr=arguments[2],sr=arguments[3],ir=[],or=1,ar=16,lr="S",cr=null;_typeof(er=er||{})==="object"&&(tr=er.orientation,rr=er.unit||rr,nr=er.format||nr,sr=er.compress||er.compressPdf||sr,(cr=er.encryption||null)!==null&&(cr.userPassword=cr.userPassword||"",cr.ownerPassword=cr.ownerPassword||"",cr.userPermissions=cr.userPermissions||[]),or=typeof er.userUnit=="number"?Math.abs(er.userUnit):1,er.precision!==void 0&&(_e=er.precision),er.floatPrecision!==void 0&&(ar=er.floatPrecision),lr=er.defaultPathOperation||"S"),ir=er.filters||(sr===!0?["FlateEncode"]:ir),rr=rr||"mm",tr=(""+(tr||"P")).toLowerCase();var Ar=er.putOnlyUsedFonts||!1,ur={},dr={internal:{},__private__:{}};dr.__private__.PubSub=C;var mr="1.3",pr=dr.__private__.getPdfVersion=function(){return mr};dr.__private__.setPdfVersion=function(Fr){mr=Fr};var yr={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};dr.__private__.getPageFormats=function(){return yr};var hr=dr.__private__.getPageFormat=function(Fr){return yr[Fr]};nr=nr||"a4";var gr={COMPAT:"compat",ADVANCED:"advanced"},Cr=gr.COMPAT;function Tr(){this.saveGraphicsState(),Jr(new Dn(ls,0,0,-ls,0,Fo()*ls).toString()+" cm"),this.setFontSize(this.getFontSize()/ls),lr="n",Cr=gr.ADVANCED}function Sr(){this.restoreGraphicsState(),lr="S",Cr=gr.COMPAT}var Nr=dr.__private__.combineFontStyleAndFontWeight=function(Fr,An){if(Fr=="bold"&&An=="normal"||Fr=="bold"&&An==400||Fr=="normal"&&An=="italic"||Fr=="bold"&&An=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return An&&(Fr=An==400||An==="normal"?Fr==="italic"?"italic":"normal":An!=700&&An!=="bold"||Fr!=="normal"?(An==700?"bold":An)+""+Fr:"bold"),Fr};dr.advancedAPI=function(Fr){var An=Cr===gr.COMPAT;return An&&Tr.call(this),typeof Fr!="function"||(Fr(this),An&&Sr.call(this)),this},dr.compatAPI=function(Fr){var An=Cr===gr.ADVANCED;return An&&Sr.call(this),typeof Fr!="function"||(Fr(this),An&&Tr.call(this)),this},dr.isAdvancedAPI=function(){return Cr===gr.ADVANCED};var _r,vr=function(Fr){if(Cr!==gr.ADVANCED)throw new Error(Fr+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},br=dr.roundToPrecision=dr.__private__.roundToPrecision=function(Fr,An){var Pn=_e||An;if(isNaN(Fr)||isNaN(Pn))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Fr.toFixed(Pn).replace(/0+$/,"")};_r=dr.hpf=dr.__private__.hpf=typeof ar=="number"?function(Fr){if(isNaN(Fr))throw new Error("Invalid argument passed to jsPDF.hpf");return br(Fr,ar)}:ar==="smart"?function(Fr){if(isNaN(Fr))throw new Error("Invalid argument passed to jsPDF.hpf");return br(Fr,Fr>-1&&Fr<1?16:5)}:function(Fr){if(isNaN(Fr))throw new Error("Invalid argument passed to jsPDF.hpf");return br(Fr,16)};var Pr=dr.f2=dr.__private__.f2=function(Fr){if(isNaN(Fr))throw new Error("Invalid argument passed to jsPDF.f2");return br(Fr,2)},Er=dr.__private__.f3=function(Fr){if(isNaN(Fr))throw new Error("Invalid argument passed to jsPDF.f3");return br(Fr,3)},Rr=dr.scale=dr.__private__.scale=function(Fr){if(isNaN(Fr))throw new Error("Invalid argument passed to jsPDF.scale");return Cr===gr.COMPAT?Fr*ls:Cr===gr.ADVANCED?Fr:void 0},Ir=function(Fr){return Cr===gr.COMPAT?Fo()-Fr:Cr===gr.ADVANCED?Fr:void 0},Qr=function(Fr){return Rr(Ir(Fr))};dr.__private__.setPrecision=dr.setPrecision=function(Fr){typeof parseInt(Fr,10)=="number"&&(_e=parseInt(Fr,10))};var Ur,Vr="00000000000000000000000000000000",Wr=dr.__private__.getFileId=function(){return Vr},Hr=dr.__private__.setFileId=function(Fr){return Vr=Fr!==void 0&&/^[a-fA-F0-9]{32}$/.test(Fr)?Fr.toUpperCase():Vr.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),cr!==null&&(fo=new I(cr.userPermissions,cr.userPassword,cr.ownerPassword,Vr)),Vr};dr.setFileId=function(Fr){return Hr(Fr),this},dr.getFileId=function(){return Wr()};var $r=dr.__private__.convertDateToPDFDate=function(Fr){var An=Fr.getTimezoneOffset(),Pn=An<0?"+":"-",Qn=Math.floor(Math.abs(An/60)),Yn=Math.abs(An%60),hs=[Pn,Lr(Qn),"'",Lr(Yn),"'"].join("");return["D:",Fr.getFullYear(),Lr(Fr.getMonth()+1),Lr(Fr.getDate()),Lr(Fr.getHours()),Lr(Fr.getMinutes()),Lr(Fr.getSeconds()),hs].join("")},Xr=dr.__private__.convertPDFDateToDate=function(Fr){var An=parseInt(Fr.substr(2,4),10),Pn=parseInt(Fr.substr(6,2),10)-1,Qn=parseInt(Fr.substr(8,2),10),Yn=parseInt(Fr.substr(10,2),10),hs=parseInt(Fr.substr(12,2),10),_s=parseInt(Fr.substr(14,2),10);return new Date(An,Pn,Qn,Yn,hs,_s,0)},pn=dr.__private__.setCreationDate=function(Fr){var An;if(Fr===void 0&&(Fr=new Date),Fr instanceof Date)An=$r(Fr);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Fr))throw new Error("Invalid argument passed to jsPDF.setCreationDate");An=Fr}return Ur=An},jr=dr.__private__.getCreationDate=function(Fr){var An=Ur;return Fr==="jsDate"&&(An=Xr(Ur)),An};dr.setCreationDate=function(Fr){return pn(Fr),this},dr.getCreationDate=function(Fr){return jr(Fr)};var Br,Lr=dr.__private__.padd2=function(Fr){return("0"+parseInt(Fr)).slice(-2)},Or=dr.__private__.padd2Hex=function(Fr){return("00"+(Fr=Fr.toString())).substr(Fr.length)},zr=0,Gr=[],Yr=[],dn=0,En=[],Sn=[],Bn=!1,kn=Yr,Kn=function(){zr=0,dn=0,Yr=[],Gr=[],En=[],Ns=Cs(),Bs=Cs()};dr.__private__.setCustomOutputDestination=function(Fr){Bn=!0,kn=Fr};var Cn=function(Fr){Bn||(kn=Fr)};dr.__private__.resetCustomOutputDestination=function(){Bn=!1,kn=Yr};var Jr=dr.__private__.out=function(Fr){return Fr=Fr.toString(),dn+=Fr.length+1,kn.push(Fr),kn},Fn=dr.__private__.write=function(Fr){return Jr(arguments.length===1?Fr.toString():Array.prototype.join.call(arguments," "))},Zr=dr.__private__.getArrayBuffer=function(Fr){for(var An=Fr.length,Pn=new ArrayBuffer(An),Qn=new Uint8Array(Pn);An--;)Qn[An]=Fr.charCodeAt(An);return Pn},hn=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];dr.__private__.getStandardFonts=function(){return hn};var bn=er.fontSize||16;dr.__private__.setFontSize=dr.setFontSize=function(Fr){return bn=Cr===gr.ADVANCED?Fr/ls:Fr,this};var In,jn=dr.__private__.getFontSize=dr.getFontSize=function(){return Cr===gr.COMPAT?bn:bn*ls},zn=er.R2L||!1;dr.__private__.setR2L=dr.setR2L=function(Fr){return zn=Fr,this},dr.__private__.getR2L=dr.getR2L=function(){return zn};var qn,Nn=dr.__private__.setZoomMode=function(Fr){var An=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Fr))In=Fr;else if(isNaN(Fr)){if(An.indexOf(Fr)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Fr+'" is not recognized.');In=Fr}else In=parseInt(Fr,10)};dr.__private__.getZoomMode=function(){return In};var ns,rs=dr.__private__.setPageMode=function(Fr){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Fr)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Fr+'" is not recognized.');qn=Fr};dr.__private__.getPageMode=function(){return qn};var Is=dr.__private__.setLayoutMode=function(Fr){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Fr)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Fr+'" is not recognized.');ns=Fr};dr.__private__.getLayoutMode=function(){return ns},dr.__private__.setDisplayMode=dr.setDisplayMode=function(Fr,An,Pn){return Nn(Fr),Is(An),rs(Pn),this};var ps={title:"",subject:"",author:"",keywords:"",creator:""};dr.__private__.getDocumentProperty=function(Fr){if(Object.keys(ps).indexOf(Fr)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ps[Fr]},dr.__private__.getDocumentProperties=function(){return ps},dr.__private__.setDocumentProperties=dr.setProperties=dr.setDocumentProperties=function(Fr){for(var An in ps)ps.hasOwnProperty(An)&&Fr[An]&&(ps[An]=Fr[An]);return this},dr.__private__.setDocumentProperty=function(Fr,An){if(Object.keys(ps).indexOf(Fr)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ps[Fr]=An};var Ps,ls,Ts,Fs,Vs,ts={},Mn={},Gn=[],os={},js={},bs={},Rn={},es=null,ds=0,fs=[],vs=new C(dr),Ss=er.hotfixes||[],wn={},yn={},Ln=[],Dn=function Fr(An,Pn,Qn,Yn,hs,_s){if(!(this instanceof Fr))return new Fr(An,Pn,Qn,Yn,hs,_s);isNaN(An)&&(An=1),isNaN(Pn)&&(Pn=0),isNaN(Qn)&&(Qn=0),isNaN(Yn)&&(Yn=1),isNaN(hs)&&(hs=0),isNaN(_s)&&(_s=0),this._matrix=[An,Pn,Qn,Yn,hs,_s]};Object.defineProperty(Dn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Fr){this._matrix[0]=Fr}}),Object.defineProperty(Dn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Fr){this._matrix[1]=Fr}}),Object.defineProperty(Dn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Fr){this._matrix[2]=Fr}}),Object.defineProperty(Dn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Fr){this._matrix[3]=Fr}}),Object.defineProperty(Dn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Fr){this._matrix[4]=Fr}}),Object.defineProperty(Dn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Fr){this._matrix[5]=Fr}}),Object.defineProperty(Dn.prototype,"a",{get:function(){return this._matrix[0]},set:function(Fr){this._matrix[0]=Fr}}),Object.defineProperty(Dn.prototype,"b",{get:function(){return this._matrix[1]},set:function(Fr){this._matrix[1]=Fr}}),Object.defineProperty(Dn.prototype,"c",{get:function(){return this._matrix[2]},set:function(Fr){this._matrix[2]=Fr}}),Object.defineProperty(Dn.prototype,"d",{get:function(){return this._matrix[3]},set:function(Fr){this._matrix[3]=Fr}}),Object.defineProperty(Dn.prototype,"e",{get:function(){return this._matrix[4]},set:function(Fr){this._matrix[4]=Fr}}),Object.defineProperty(Dn.prototype,"f",{get:function(){return this._matrix[5]},set:function(Fr){this._matrix[5]=Fr}}),Object.defineProperty(Dn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Dn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Dn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Dn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Dn.prototype.join=function(Fr){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_r).join(Fr)},Dn.prototype.multiply=function(Fr){var An=Fr.sx*this.sx+Fr.shy*this.shx,Pn=Fr.sx*this.shy+Fr.shy*this.sy,Qn=Fr.shx*this.sx+Fr.sy*this.shx,Yn=Fr.shx*this.shy+Fr.sy*this.sy,hs=Fr.tx*this.sx+Fr.ty*this.shx+this.tx,_s=Fr.tx*this.shy+Fr.ty*this.sy+this.ty;return new Dn(An,Pn,Qn,Yn,hs,_s)},Dn.prototype.decompose=function(){var Fr=this.sx,An=this.shy,Pn=this.shx,Qn=this.sy,Yn=this.tx,hs=this.ty,_s=Math.sqrt(Fr*Fr+An*An),ks=(Fr/=_s)*Pn+(An/=_s)*Qn;Pn-=Fr*ks,Qn-=An*ks;var xr=Math.sqrt(Pn*Pn+Qn*Qn);return ks/=xr,Fr*(Qn/=xr)<An*(Pn/=xr)&&(Fr=-Fr,An=-An,ks=-ks,_s=-_s),{scale:new Dn(_s,0,0,xr,0,0),translate:new Dn(1,0,0,1,Yn,hs),rotate:new Dn(Fr,An,-An,Fr,0,0),skew:new Dn(1,0,ks,1,0,0)}},Dn.prototype.toString=function(Fr){return this.join(" ")},Dn.prototype.inversed=function(){var Fr=this.sx,An=this.shy,Pn=this.shx,Qn=this.sy,Yn=this.tx,hs=this.ty,_s=1/(Fr*Qn-An*Pn),ks=Qn*_s,xr=-An*_s,Mr=-Pn*_s,qr=Fr*_s;return new Dn(ks,xr,Mr,qr,-ks*Yn-Mr*hs,-xr*Yn-qr*hs)},Dn.prototype.applyToPoint=function(Fr){var An=Fr.x*this.sx+Fr.y*this.shx+this.tx,Pn=Fr.x*this.shy+Fr.y*this.sy+this.ty;return new rA(An,Pn)},Dn.prototype.applyToRectangle=function(Fr){var An=this.applyToPoint(Fr),Pn=this.applyToPoint(new rA(Fr.x+Fr.w,Fr.y+Fr.h));return new RA(An.x,An.y,Pn.x-An.x,Pn.y-An.y)},Dn.prototype.clone=function(){var Fr=this.sx,An=this.shy,Pn=this.shx,Qn=this.sy,Yn=this.tx,hs=this.ty;return new Dn(Fr,An,Pn,Qn,Yn,hs)},dr.Matrix=Dn;var Zn=dr.matrixMult=function(Fr,An){return An.multiply(Fr)},cs=new Dn(1,0,0,1,0,0);dr.unitMatrix=dr.identityMatrix=cs;var As=function(Fr,An){if(!js[Fr]){var Pn=(An instanceof B?"Sh":"P")+(Object.keys(os).length+1).toString(10);An.id=Pn,js[Fr]=Pn,os[Pn]=An,vs.publish("addPattern",An)}};dr.ShadingPattern=B,dr.TilingPattern=M,dr.addShadingPattern=function(Fr,An){return vr("addShadingPattern()"),As(Fr,An),this},dr.beginTilingPattern=function(Fr){vr("beginTilingPattern()"),TA(Fr.boundingBox[0],Fr.boundingBox[1],Fr.boundingBox[2]-Fr.boundingBox[0],Fr.boundingBox[3]-Fr.boundingBox[1],Fr.matrix)},dr.endTilingPattern=function(Fr,An){vr("endTilingPattern()"),An.stream=Sn[Br].join(`
`),As(Fr,An),vs.publish("endTilingPattern",An),Ln.pop().restore()};var Rs=dr.__private__.newObject=function(){var Fr=Cs();return gs(Fr,!0),Fr},Cs=dr.__private__.newObjectDeferred=function(){return zr++,Gr[zr]=function(){return dn},zr},gs=function(Fr,An){return An=typeof An=="boolean"&&An,Gr[Fr]=dn,An&&Jr(Fr+" 0 obj"),Fr},Qs=dr.__private__.newAdditionalObject=function(){var Fr={objId:Cs(),content:""};return En.push(Fr),Fr},Ns=Cs(),Bs=Cs(),Us=dr.__private__.decodeColorString=function(Fr){var An=Fr.split(" ");if(An.length!==2||An[1]!=="g"&&An[1]!=="G")An.length===5&&(An[4]==="k"||An[4]==="K")&&(An=[(1-An[0])*(1-An[3]),(1-An[1])*(1-An[3]),(1-An[2])*(1-An[3]),"r"]);else{var Pn=parseFloat(An[0]);An=[Pn,Pn,Pn,"r"]}for(var Qn="#",Yn=0;Yn<3;Yn++)Qn+=("0"+Math.floor(255*parseFloat(An[Yn])).toString(16)).slice(-2);return Qn},Ms=dr.__private__.encodeColorString=function(Fr){var An;typeof Fr=="string"&&(Fr={ch1:Fr});var Pn=Fr.ch1,Qn=Fr.ch2,Yn=Fr.ch3,hs=Fr.ch4,_s=Fr.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Pn=="string"&&Pn.charAt(0)!=="#"){var ks=new f(Pn);if(ks.ok)Pn=ks.toHex();else if(!/^\d*\.?\d*$/.test(Pn))throw new Error('Invalid color "'+Pn+'" passed to jsPDF.encodeColorString.')}if(typeof Pn=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Pn)&&(Pn="#"+Pn[1]+Pn[1]+Pn[2]+Pn[2]+Pn[3]+Pn[3]),typeof Pn=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Pn)){var xr=parseInt(Pn.substr(1),16);Pn=xr>>16&255,Qn=xr>>8&255,Yn=255&xr}if(Qn===void 0||hs===void 0&&Pn===Qn&&Qn===Yn)if(typeof Pn=="string")An=Pn+" "+_s[0];else switch(Fr.precision){case 2:An=Pr(Pn/255)+" "+_s[0];break;case 3:default:An=Er(Pn/255)+" "+_s[0]}else if(hs===void 0||_typeof(hs)==="object"){if(hs&&!isNaN(hs.a)&&hs.a===0)return An=["1.","1.","1.",_s[1]].join(" ");if(typeof Pn=="string")An=[Pn,Qn,Yn,_s[1]].join(" ");else switch(Fr.precision){case 2:An=[Pr(Pn/255),Pr(Qn/255),Pr(Yn/255),_s[1]].join(" ");break;default:case 3:An=[Er(Pn/255),Er(Qn/255),Er(Yn/255),_s[1]].join(" ")}}else if(typeof Pn=="string")An=[Pn,Qn,Yn,hs,_s[2]].join(" ");else switch(Fr.precision){case 2:An=[Pr(Pn),Pr(Qn),Pr(Yn),Pr(hs),_s[2]].join(" ");break;case 3:default:An=[Er(Pn),Er(Qn),Er(Yn),Er(hs),_s[2]].join(" ")}return An},$s=dr.__private__.getFilters=function(){return ir},Hs=dr.__private__.putStream=function(Fr){var An=(Fr=Fr||{}).data||"",Pn=Fr.filters||$s(),Qn=Fr.alreadyAppliedFilters||[],Yn=Fr.addLength1||!1,hs=An.length,_s=Fr.objectId,ks=function(Gs){return Gs};if(cr!==null&&_s===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");cr!==null&&(ks=fo.encryptor(_s,0));var xr={};Pn===!0&&(Pn=["FlateEncode"]);var Mr=Fr.additionalKeyValues||[],qr=(xr=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(An,Pn):{data:An,reverseChain:[]}).reverseChain+(Array.isArray(Qn)?Qn.join(" "):Qn.toString());if(xr.data.length!==0&&(Mr.push({key:"Length",value:xr.data.length}),Yn===!0&&Mr.push({key:"Length1",value:hs})),qr.length!=0)if(qr.split("/").length-1==1)Mr.push({key:"Filter",value:qr});else{Mr.push({key:"Filter",value:"["+qr+"]"});for(var gn=0;gn<Mr.length;gn+=1)if(Mr[gn].key==="DecodeParms"){for(var Xn=[],as=0;as<xr.reverseChain.split("/").length-1;as+=1)Xn.push("null");Xn.push(Mr[gn].value),Mr[gn].value="["+Xn.join(" ")+"]"}}Jr("<<");for(var ws=0;ws<Mr.length;ws++)Jr("/"+Mr[ws].key+" "+Mr[ws].value);Jr(">>"),xr.data.length!==0&&(Jr("stream"),Jr(ks(xr.data)),Jr("endstream"))},_i=dr.__private__.putPage=function(Fr){var An=Fr.number,Pn=Fr.data,Qn=Fr.objId,Yn=Fr.contentsObjId;gs(Qn,!0),Jr("<</Type /Page"),Jr("/Parent "+Fr.rootDictionaryObjId+" 0 R"),Jr("/Resources "+Fr.resourceDictionaryObjId+" 0 R"),Jr("/MediaBox ["+parseFloat(_r(Fr.mediaBox.bottomLeftX))+" "+parseFloat(_r(Fr.mediaBox.bottomLeftY))+" "+_r(Fr.mediaBox.topRightX)+" "+_r(Fr.mediaBox.topRightY)+"]"),Fr.cropBox!==null&&Jr("/CropBox ["+_r(Fr.cropBox.bottomLeftX)+" "+_r(Fr.cropBox.bottomLeftY)+" "+_r(Fr.cropBox.topRightX)+" "+_r(Fr.cropBox.topRightY)+"]"),Fr.bleedBox!==null&&Jr("/BleedBox ["+_r(Fr.bleedBox.bottomLeftX)+" "+_r(Fr.bleedBox.bottomLeftY)+" "+_r(Fr.bleedBox.topRightX)+" "+_r(Fr.bleedBox.topRightY)+"]"),Fr.trimBox!==null&&Jr("/TrimBox ["+_r(Fr.trimBox.bottomLeftX)+" "+_r(Fr.trimBox.bottomLeftY)+" "+_r(Fr.trimBox.topRightX)+" "+_r(Fr.trimBox.topRightY)+"]"),Fr.artBox!==null&&Jr("/ArtBox ["+_r(Fr.artBox.bottomLeftX)+" "+_r(Fr.artBox.bottomLeftY)+" "+_r(Fr.artBox.topRightX)+" "+_r(Fr.artBox.topRightY)+"]"),typeof Fr.userUnit=="number"&&Fr.userUnit!==1&&Jr("/UserUnit "+Fr.userUnit),vs.publish("putPage",{objId:Qn,pageContext:fs[An],pageNumber:An,page:Pn}),Jr("/Contents "+Yn+" 0 R"),Jr(">>"),Jr("endobj");var hs=Pn.join(`
`);return Cr===gr.ADVANCED&&(hs+=`
Q`),gs(Yn,!0),Hs({data:hs,filters:$s(),objectId:Yn}),Jr("endobj"),Qn},Js=dr.__private__.putPages=function(){var Fr,An,Pn=[];for(Fr=1;Fr<=ds;Fr++)fs[Fr].objId=Cs(),fs[Fr].contentsObjId=Cs();for(Fr=1;Fr<=ds;Fr++)Pn.push(_i({number:Fr,data:Sn[Fr],objId:fs[Fr].objId,contentsObjId:fs[Fr].contentsObjId,mediaBox:fs[Fr].mediaBox,cropBox:fs[Fr].cropBox,bleedBox:fs[Fr].bleedBox,trimBox:fs[Fr].trimBox,artBox:fs[Fr].artBox,userUnit:fs[Fr].userUnit,rootDictionaryObjId:Ns,resourceDictionaryObjId:Bs}));gs(Ns,!0),Jr("<</Type /Pages");var Qn="/Kids [";for(An=0;An<ds;An++)Qn+=Pn[An]+" 0 R ";Jr(Qn+"]"),Jr("/Count "+ds),Jr(">>"),Jr("endobj"),vs.publish("postPutPages")},vo=function(Fr){vs.publish("putFont",{font:Fr,out:Jr,newObject:Rs,putStream:Hs}),Fr.isAlreadyPutted!==!0&&(Fr.objectNumber=Rs(),Jr("<<"),Jr("/Type /Font"),Jr("/BaseFont /"+F(Fr.postScriptName)),Jr("/Subtype /Type1"),typeof Fr.encoding=="string"&&Jr("/Encoding /"+Fr.encoding),Jr("/FirstChar 32"),Jr("/LastChar 255"),Jr(">>"),Jr("endobj"))},wo=function(){for(var Fr in ts)ts.hasOwnProperty(Fr)&&(Ar===!1||Ar===!0&&ur.hasOwnProperty(Fr))&&vo(ts[Fr])},Ro=function(Fr){Fr.objectNumber=Rs();var An=[];An.push({key:"Type",value:"/XObject"}),An.push({key:"Subtype",value:"/Form"}),An.push({key:"BBox",value:"["+[_r(Fr.x),_r(Fr.y),_r(Fr.x+Fr.width),_r(Fr.y+Fr.height)].join(" ")+"]"}),An.push({key:"Matrix",value:"["+Fr.matrix.toString()+"]"});var Pn=Fr.pages[1].join(`
`);Hs({data:Pn,additionalKeyValues:An,objectId:Fr.objectNumber}),Jr("endobj")},Jo=function(){for(var Fr in wn)wn.hasOwnProperty(Fr)&&Ro(wn[Fr])},Eu=function(Fr,An){var Pn,Qn=[],Yn=1/(An-1);for(Pn=0;Pn<1;Pn+=Yn)Qn.push(Pn);if(Qn.push(1),Fr[0].offset!=0){var hs={offset:0,color:Fr[0].color};Fr.unshift(hs)}if(Fr[Fr.length-1].offset!=1){var _s={offset:1,color:Fr[Fr.length-1].color};Fr.push(_s)}for(var ks="",xr=0,Mr=0;Mr<Qn.length;Mr++){for(Pn=Qn[Mr];Pn>Fr[xr+1].offset;)xr++;var qr=Fr[xr].offset,gn=(Pn-qr)/(Fr[xr+1].offset-qr),Xn=Fr[xr].color,as=Fr[xr+1].color;ks+=Or(Math.round((1-gn)*Xn[0]+gn*as[0]).toString(16))+Or(Math.round((1-gn)*Xn[1]+gn*as[1]).toString(16))+Or(Math.round((1-gn)*Xn[2]+gn*as[2]).toString(16))}return ks.trim()},hA=function(Fr,An){An||(An=21);var Pn=Rs(),Qn=Eu(Fr.colors,An),Yn=[];Yn.push({key:"FunctionType",value:"0"}),Yn.push({key:"Domain",value:"[0.0 1.0]"}),Yn.push({key:"Size",value:"["+An+"]"}),Yn.push({key:"BitsPerSample",value:"8"}),Yn.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Yn.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Hs({data:Qn,additionalKeyValues:Yn,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Pn}),Jr("endobj"),Fr.objectNumber=Rs(),Jr("<< /ShadingType "+Fr.type),Jr("/ColorSpace /DeviceRGB");var hs="/Coords ["+_r(parseFloat(Fr.coords[0]))+" "+_r(parseFloat(Fr.coords[1]))+" ";Fr.type===2?hs+=_r(parseFloat(Fr.coords[2]))+" "+_r(parseFloat(Fr.coords[3])):hs+=_r(parseFloat(Fr.coords[2]))+" "+_r(parseFloat(Fr.coords[3]))+" "+_r(parseFloat(Fr.coords[4]))+" "+_r(parseFloat(Fr.coords[5])),Jr(hs+="]"),Fr.matrix&&Jr("/Matrix ["+Fr.matrix.toString()+"]"),Jr("/Function "+Pn+" 0 R"),Jr("/Extend [true true]"),Jr(">>"),Jr("endobj")},_u=function(Fr,An){var Pn=Cs(),Qn=Rs();An.push({resourcesOid:Pn,objectOid:Qn}),Fr.objectNumber=Qn;var Yn=[];Yn.push({key:"Type",value:"/Pattern"}),Yn.push({key:"PatternType",value:"1"}),Yn.push({key:"PaintType",value:"1"}),Yn.push({key:"TilingType",value:"1"}),Yn.push({key:"BBox",value:"["+Fr.boundingBox.map(_r).join(" ")+"]"}),Yn.push({key:"XStep",value:_r(Fr.xStep)}),Yn.push({key:"YStep",value:_r(Fr.yStep)}),Yn.push({key:"Resources",value:Pn+" 0 R"}),Fr.matrix&&Yn.push({key:"Matrix",value:"["+Fr.matrix.toString()+"]"}),Hs({data:Fr.stream,additionalKeyValues:Yn,objectId:Fr.objectNumber}),Jr("endobj")},Ll=function(Fr){var An;for(An in os)os.hasOwnProperty(An)&&(os[An]instanceof B?hA(os[An]):os[An]instanceof M&&_u(os[An],Fr))},Dl=function(Fr){for(var An in Fr.objectNumber=Rs(),Jr("<<"),Fr)switch(An){case"opacity":Jr("/ca "+Pr(Fr[An]));break;case"stroke-opacity":Jr("/CA "+Pr(Fr[An]))}Jr(">>"),Jr("endobj")},_l=function(){var Fr;for(Fr in bs)bs.hasOwnProperty(Fr)&&Dl(bs[Fr])},Xl=function(){for(var Fr in Jr("/XObject <<"),wn)wn.hasOwnProperty(Fr)&&wn[Fr].objectNumber>=0&&Jr("/"+Fr+" "+wn[Fr].objectNumber+" 0 R");vs.publish("putXobjectDict"),Jr(">>")},rp=function(){fo.oid=Rs(),Jr("<<"),Jr("/Filter /Standard"),Jr("/V "+fo.v),Jr("/R "+fo.r),Jr("/U <"+fo.toHexString(fo.U)+">"),Jr("/O <"+fo.toHexString(fo.O)+">"),Jr("/P "+fo.P),Jr(">>"),Jr("endobj")},XA=function(){for(var Fr in Jr("/Font <<"),ts)ts.hasOwnProperty(Fr)&&(Ar===!1||Ar===!0&&ur.hasOwnProperty(Fr))&&Jr("/"+Fr+" "+ts[Fr].objectNumber+" 0 R");Jr(">>")},wu=function(){if(Object.keys(os).length>0){for(var Fr in Jr("/Shading <<"),os)os.hasOwnProperty(Fr)&&os[Fr]instanceof B&&os[Fr].objectNumber>=0&&Jr("/"+Fr+" "+os[Fr].objectNumber+" 0 R");vs.publish("putShadingPatternDict"),Jr(">>")}},Yl=function(Fr){if(Object.keys(os).length>0){for(var An in Jr("/Pattern <<"),os)os.hasOwnProperty(An)&&os[An]instanceof dr.TilingPattern&&os[An].objectNumber>=0&&os[An].objectNumber<Fr&&Jr("/"+An+" "+os[An].objectNumber+" 0 R");vs.publish("putTilingPatternDict"),Jr(">>")}},YA=function(){if(Object.keys(bs).length>0){var Fr;for(Fr in Jr("/ExtGState <<"),bs)bs.hasOwnProperty(Fr)&&bs[Fr].objectNumber>=0&&Jr("/"+Fr+" "+bs[Fr].objectNumber+" 0 R");vs.publish("putGStateDict"),Jr(">>")}},ho=function(Fr){gs(Fr.resourcesOid,!0),Jr("<<"),Jr("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),XA(),wu(),Yl(Fr.objectOid),YA(),Xl(),Jr(">>"),Jr("endobj")},JA=function(){var Fr=[];wo(),_l(),Jo(),Ll(Fr),vs.publish("putResources"),Fr.forEach(ho),ho({resourcesOid:Bs,objectOid:Number.MAX_SAFE_INTEGER}),vs.publish("postPutResources")},ZA=function(){vs.publish("putAdditionalObjects");for(var Fr=0;Fr<En.length;Fr++){var An=En[Fr];gs(An.objId,!0),Jr(An.content),Jr("endobj")}vs.publish("postPutAdditionalObjects")},bu=function(Fr){Mn[Fr.fontName]=Mn[Fr.fontName]||{},Mn[Fr.fontName][Fr.fontStyle]=Fr.id},eu=function(Fr,An,Pn,Qn,Yn){var hs={id:"F"+(Object.keys(ts).length+1).toString(10),postScriptName:Fr,fontName:An,fontStyle:Pn,encoding:Qn,isStandardFont:Yn||!1,metadata:{}};return vs.publish("addFont",{font:hs,instance:this}),ts[hs.id]=hs,bu(hs),hs.id},Cu=function(Fr){for(var An=0,Pn=hn.length;An<Pn;An++){var Qn=eu.call(this,Fr[An][0],Fr[An][1],Fr[An][2],hn[An][3],!0);Ar===!1&&(ur[Qn]=!0);var Yn=Fr[An][0].split("-");bu({id:Qn,fontName:Yn[0],fontStyle:Yn[1]||""})}vs.publish("addFonts",{fonts:ts,dictionary:Mn})},Mo=function(Fr){return Fr.foo=function(){try{return Fr.apply(this,arguments)}catch(Qn){var An=Qn.stack||"";~An.indexOf(" at ")&&(An=An.split(" at ")[1]);var Pn="Error in function "+An.split(`
`)[0].split("<")[0]+": "+Qn.message;if(!n.console)throw new Error(Pn);n.console.error(Pn,Qn),n.alert&&alert(Pn)}},Fr.foo.bar=Fr,Fr.foo},fA=function(Fr,An){var Pn,Qn,Yn,hs,_s,ks,xr,Mr,qr;if(Yn=(An=An||{}).sourceEncoding||"Unicode",_s=An.outputEncoding,(An.autoencode||_s)&&ts[Ps].metadata&&ts[Ps].metadata[Yn]&&ts[Ps].metadata[Yn].encoding&&(hs=ts[Ps].metadata[Yn].encoding,!_s&&ts[Ps].encoding&&(_s=ts[Ps].encoding),!_s&&hs.codePages&&(_s=hs.codePages[0]),typeof _s=="string"&&(_s=hs[_s]),_s)){for(xr=!1,ks=[],Pn=0,Qn=Fr.length;Pn<Qn;Pn++)(Mr=_s[Fr.charCodeAt(Pn)])?ks.push(String.fromCharCode(Mr)):ks.push(Fr[Pn]),ks[Pn].charCodeAt(0)>>8&&(xr=!0);Fr=ks.join("")}for(Pn=Fr.length;xr===void 0&&Pn!==0;)Fr.charCodeAt(Pn-1)>>8&&(xr=!0),Pn--;if(!xr)return Fr;for(ks=An.noBOM?[]:[254,255],Pn=0,Qn=Fr.length;Pn<Qn;Pn++){if((qr=(Mr=Fr.charCodeAt(Pn))>>8)>>8)throw new Error("Character at position "+Pn+" of string '"+Fr+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ks.push(qr),ks.push(Mr-(qr<<8))}return String.fromCharCode.apply(void 0,ks)},po=dr.__private__.pdfEscape=dr.pdfEscape=function(Fr,An){return fA(Fr,An).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Lo=dr.__private__.beginPage=function(Fr){Sn[++ds]=[],fs[ds]={objId:0,contentsObjId:0,userUnit:Number(or),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Fr[0]),topRightY:Number(Fr[1])}},tu(ds),Cn(Sn[Br])},Jl=function(Fr,An){var Pn,Qn,Yn;switch(tr=An||tr,typeof Fr=="string"&&(Pn=hr(Fr.toLowerCase()),Array.isArray(Pn)&&(Qn=Pn[0],Yn=Pn[1])),Array.isArray(Fr)&&(Qn=Fr[0]*ls,Yn=Fr[1]*ls),isNaN(Qn)&&(Qn=nr[0],Yn=nr[1]),(Qn>14400||Yn>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Qn=Math.min(14400,Qn),Yn=Math.min(14400,Yn)),nr=[Qn,Yn],tr.substr(0,1)){case"l":Yn>Qn&&(nr=[Yn,Qn]);break;case"p":Qn>Yn&&(nr=[Yn,Qn])}Lo(nr),ou(iu),Jr(Io),cu!==0&&Jr(cu+" J"),CA!==0&&Jr(CA+" j"),vs.publish("addPage",{pageNumber:ds})},pA=function(Fr){Fr>0&&Fr<=ds&&(Sn.splice(Fr,1),fs.splice(Fr,1),ds--,Br>ds&&(Br=ds),this.setPage(Br))},tu=function(Fr){Fr>0&&Fr<=ds&&(Br=Fr)},no=dr.__private__.getNumberOfPages=dr.getNumberOfPages=function(){return Sn.length-1},Zl=function(Fr,An,Pn){var Qn,Yn=void 0;return Pn=Pn||{},Fr=Fr!==void 0?Fr:ts[Ps].fontName,An=An!==void 0?An:ts[Ps].fontStyle,Qn=Fr.toLowerCase(),Mn[Qn]!==void 0&&Mn[Qn][An]!==void 0?Yn=Mn[Qn][An]:Mn[Fr]!==void 0&&Mn[Fr][An]!==void 0?Yn=Mn[Fr][An]:Pn.disableWarning===!1&&a.warn("Unable to look up font label for font '"+Fr+"', '"+An+"'. Refer to getFontList() for available fonts."),Yn||Pn.noFallback||(Yn=Mn.times[An])==null&&(Yn=Mn.times.normal),Yn},_c=dr.__private__.putInfo=function(){var Fr=Rs(),An=function(Qn){return Qn};for(var Pn in cr!==null&&(An=fo.encryptor(Fr,0)),Jr("<<"),Jr("/Producer ("+po(An("jsPDF "+E.version))+")"),ps)ps.hasOwnProperty(Pn)&&ps[Pn]&&Jr("/"+Pn.substr(0,1).toUpperCase()+Pn.substr(1)+" ("+po(An(ps[Pn]))+")");Jr("/CreationDate ("+po(An(Ur))+")"),Jr(">>"),Jr("endobj")},wl=dr.__private__.putCatalog=function(Fr){var An=(Fr=Fr||{}).rootDictionaryObjId||Ns;switch(Rs(),Jr("<<"),Jr("/Type /Catalog"),Jr("/Pages "+An+" 0 R"),In||(In="fullwidth"),In){case"fullwidth":Jr("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Jr("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Jr("/OpenAction [3 0 R /Fit]");break;case"original":Jr("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Pn=""+In;Pn.substr(Pn.length-1)==="%"&&(In=parseInt(In)/100),typeof In=="number"&&Jr("/OpenAction [3 0 R /XYZ null null "+Pr(In)+"]")}switch(ns||(ns="continuous"),ns){case"continuous":Jr("/PageLayout /OneColumn");break;case"single":Jr("/PageLayout /SinglePage");break;case"two":case"twoleft":Jr("/PageLayout /TwoColumnLeft");break;case"tworight":Jr("/PageLayout /TwoColumnRight")}qn&&Jr("/PageMode /"+qn),vs.publish("putCatalog"),Jr(">>"),Jr("endobj")},np=dr.__private__.putTrailer=function(){Jr("trailer"),Jr("<<"),Jr("/Size "+(zr+1)),Jr("/Root "+zr+" 0 R"),Jr("/Info "+(zr-1)+" 0 R"),cr!==null&&Jr("/Encrypt "+fo.oid+" 0 R"),Jr("/ID [ <"+Vr+"> <"+Vr+"> ]"),Jr(">>")},Ru=dr.__private__.putHeader=function(){Jr("%PDF-"+mr),Jr("%")},sp=dr.__private__.putXRef=function(){var Fr="0000000000";Jr("xref"),Jr("0 "+(zr+1)),Jr("0000000000 65535 f ");for(var An=1;An<=zr;An++)typeof Gr[An]=="function"?Jr((Fr+Gr[An]()).slice(-10)+" 00000 n "):Gr[An]!==void 0?Jr((Fr+Gr[An]).slice(-10)+" 00000 n "):Jr("0000000000 00000 n ")},Cl=dr.__private__.buildDocument=function(){Kn(),Cn(Yr),vs.publish("buildDocument"),Ru(),Js(),ZA(),JA(),cr!==null&&rp(),_c(),wl();var Fr=dn;return sp(),np(),Jr("startxref"),Jr(""+Fr),Jr("%%EOF"),Cn(Sn[Br]),Yr.join(`
`)},mA=dr.__private__.getBlob=function(Fr){return new Blob([Zr(Fr)],{type:"application/pdf"})},gA=dr.output=dr.__private__.output=Mo(function(Fr,An){switch(typeof(An=An||{})=="string"?An={filename:An}:An.filename=An.filename||"generated.pdf",Fr){case void 0:return Cl();case"save":dr.save(An.filename);break;case"arraybuffer":return Zr(Cl());case"blob":return mA(Cl());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(mA(Cl()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Pn="",Qn=Cl();try{Pn=h(Qn)}catch{Pn=h(unescape(encodeURIComponent(Qn)))}return"data:application/pdf;filename="+An.filename+";base64,"+Pn;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var Yn="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",hs=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';An.pdfObjectUrl&&(Yn=An.pdfObjectUrl,hs="");var _s='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Yn+'"'+hs+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(An)+");<\/script></body></html>",ks=n.open();return ks!==null&&ks.document.write(_s),ks}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var xr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(An.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+An.filename+'" width="500px" height="400px" /></body></html>',Mr=n.open();if(Mr!==null){Mr.document.write(xr);var qr=this;Mr.document.documentElement.querySelector("#pdfViewer").onload=function(){Mr.document.title=An.filename,Mr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(qr.output("bloburl"))}}return Mr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var gn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",An)+'"></iframe></body></html>',Xn=n.open();if(Xn!==null&&(Xn.document.write(gn),Xn.document.title=An.filename),Xn||typeof safari>"u")return Xn;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",An);default:return null}}),Ul=function(Fr){return Array.isArray(Ss)===!0&&Ss.indexOf(Fr)>-1};switch(rr){case"pt":ls=1;break;case"mm":ls=72/25.4;break;case"cm":ls=72/2.54;break;case"in":ls=72;break;case"px":ls=Ul("px_scaling")==1?.75:96/72;break;case"pc":case"em":ls=12;break;case"ex":ls=6;break;default:if(typeof rr!="number")throw new Error("Invalid unit: "+rr);ls=rr}var fo=null;pn(),Hr();var Su=function(Fr){return cr!==null?fo.encryptor(Fr,0):function(An){return An}},ru=dr.__private__.getPageInfo=dr.getPageInfo=function(Fr){if(isNaN(Fr)||Fr%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:fs[Fr].objId,pageNumber:Fr,pageContext:fs[Fr]}},zs=dr.__private__.getPageInfoByObjId=function(Fr){if(isNaN(Fr)||Fr%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var An in fs)if(fs[An].objId===Fr)break;return ru(An)},Ol=dr.__private__.getCurrentPageInfo=dr.getCurrentPageInfo=function(){return{objId:fs[Br].objId,pageNumber:Br,pageContext:fs[Br]}};dr.addPage=function(){return Jl.apply(this,arguments),this},dr.setPage=function(){return tu.apply(this,arguments),Cn.call(this,Sn[Br]),this},dr.insertPage=function(Fr){return this.addPage(),this.movePage(Br,Fr),this},dr.movePage=function(Fr,An){var Pn,Qn;if(Fr>An){Pn=Sn[Fr],Qn=fs[Fr];for(var Yn=Fr;Yn>An;Yn--)Sn[Yn]=Sn[Yn-1],fs[Yn]=fs[Yn-1];Sn[An]=Pn,fs[An]=Qn,this.setPage(An)}else if(Fr<An){Pn=Sn[Fr],Qn=fs[Fr];for(var hs=Fr;hs<An;hs++)Sn[hs]=Sn[hs+1],fs[hs]=fs[hs+1];Sn[An]=Pn,fs[An]=Qn,this.setPage(An)}return this},dr.deletePage=function(){return pA.apply(this,arguments),this},dr.__private__.text=dr.text=function(Fr,An,Pn,Qn,Yn){var hs,_s,ks,xr,Mr,qr,gn,Xn,as,ws=(Qn=Qn||{}).scope||this;if(typeof Fr=="number"&&typeof An=="number"&&(typeof Pn=="string"||Array.isArray(Pn))){var Gs=Pn;Pn=An,An=Fr,Fr=Gs}if(arguments[3]instanceof Dn?(vr("The transform parameter of text() with a Matrix value"),as=Yn):(ks=arguments[4],xr=arguments[5],_typeof(gn=arguments[3])==="object"&&gn!==null||(typeof ks=="string"&&(xr=ks,ks=null),typeof gn=="string"&&(xr=gn,gn=null),typeof gn=="number"&&(ks=gn,gn=null),Qn={flags:gn,angle:ks,align:xr})),isNaN(An)||isNaN(Pn)||Fr==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Fr.length===0)return ws;var Xs="",Ws=!1,ro=typeof Qn.lineHeightFactor=="number"?Qn.lineHeightFactor:to,lo=ws.internal.scaleFactor;function Bl(Ao){return Ao=Ao.split("	").join(Array(Qn.TabLen||9).join(" ")),po(Ao,gn)}function Bo(Ao){for(var uo,yo=Ao.concat(),Co=[],aA=yo.length;aA--;)typeof(uo=yo.shift())=="string"?Co.push(uo):Array.isArray(Ao)&&(uo.length===1||uo[1]===void 0&&uo[2]===void 0)?Co.push(uo[0]):Co.push([uo[0],uo[1],uo[2]]);return Co}function $l(Ao,uo){var yo;if(typeof Ao=="string")yo=uo(Ao)[0];else if(Array.isArray(Ao)){for(var Co,aA,hp=Ao.concat(),Mu=[],Fp=hp.length;Fp--;)typeof(Co=hp.shift())=="string"?Mu.push(uo(Co)[0]):Array.isArray(Co)&&typeof Co[0]=="string"&&(aA=uo(Co[0],Co[1],Co[2]),Mu.push([aA[0],aA[1],aA[2]]));yo=Mu}return yo}var Hl=!1,op=!0;if(typeof Fr=="string")Hl=!0;else if(Array.isArray(Fr)){var ap=Fr.concat();_s=[];for(var Nu,Po=ap.length;Po--;)(typeof(Nu=ap.shift())!="string"||Array.isArray(Nu)&&typeof Nu[0]!="string")&&(op=!1);Hl=op}if(Hl===!1)throw new Error('Type of text must be string or Array. "'+Fr+'" is not recognized.');typeof Fr=="string"&&(Fr=Fr.match(/[\r?\n]/)?Fr.split(/\r\n|\r|\n/g):[Fr]);var Fu=bn/ws.internal.scaleFactor,ju=Fu*(ro-1);switch(Qn.baseline){case"bottom":Pn-=ju;break;case"top":Pn+=Fu-ju;break;case"hanging":Pn+=Fu-2*ju;break;case"middle":Pn+=Fu/2-ju}if((qr=Qn.maxWidth||0)>0&&(typeof Fr=="string"?Fr=ws.splitTextToSize(Fr,qr):Object.prototype.toString.call(Fr)==="[object Array]"&&(Fr=Fr.reduce(function(Ao,uo){return Ao.concat(ws.splitTextToSize(uo,qr))},[]))),hs={text:Fr,x:An,y:Pn,options:Qn,mutex:{pdfEscape:po,activeFontKey:Ps,fonts:ts,activeFontSize:bn}},vs.publish("preProcessText",hs),Fr=hs.text,ks=(Qn=hs.options).angle,!(as instanceof Dn)&&ks&&typeof ks=="number"){ks*=Math.PI/180,Qn.rotationDirection===0&&(ks=-ks),Cr===gr.ADVANCED&&(ks=-ks);var Lu=Math.cos(ks),lp=Math.sin(ks);as=new Dn(Lu,lp,-lp,Lu,0,0)}else ks&&ks instanceof Dn&&(as=ks);Cr!==gr.ADVANCED||as||(as=cs),(Mr=Qn.charSpace||tA)!==void 0&&(Xs+=_r(Rr(Mr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Xn=Qn.horizontalScale)!==void 0&&(Xs+=_r(100*Xn)+` Tz
`),Qn.lang;var Qo=-1,hm=Qn.renderingMode!==void 0?Qn.renderingMode:Qn.stroke,cp=ws.internal.getCurrentPageInfo().pageContext;switch(hm){case 0:case!1:case"fill":Qo=0;break;case 1:case!0:case"stroke":Qo=1;break;case 2:case"fillThenStroke":Qo=2;break;case 3:case"invisible":Qo=3;break;case 4:case"fillAndAddForClipping":Qo=4;break;case 5:case"strokeAndAddPathForClipping":Qo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Qo=6;break;case 7:case"addToPathForClipping":Qo=7}var Ip=cp.usedRenderingMode!==void 0?cp.usedRenderingMode:-1;Qo!==-1?Xs+=Qo+` Tr
`:Ip!==-1&&(Xs+=`0 Tr
`),Qo!==-1&&(cp.usedRenderingMode=Qo),xr=Qn.align||"left";var na,ku=bn*ro,Bp=ws.internal.pageSize.getWidth(),Pp=ts[Ps];Mr=Qn.charSpace||tA,qr=Qn.maxWidth||0,gn=Object.assign({autoencode:!0,noBOM:!0},Qn.flags);var NA=[],Au=function(Ao){return ws.getStringUnitWidth(Ao,{font:Pp,charSpace:Mr,fontSize:bn,doKerning:!1})*bn/lo};if(Object.prototype.toString.call(Fr)==="[object Array]"){var Vo;_s=Bo(Fr),xr!=="left"&&(na=_s.map(Au));var ko,FA=0;if(xr==="right"){An-=na[0],Fr=[],Po=_s.length;for(var sA=0;sA<Po;sA++)sA===0?(ko=Go(An),Vo=bo(Pn)):(ko=Rr(FA-na[sA]),Vo=-ku),Fr.push([_s[sA],ko,Vo]),FA=na[sA]}else if(xr==="center"){An-=na[0]/2,Fr=[],Po=_s.length;for(var iA=0;iA<Po;iA++)iA===0?(ko=Go(An),Vo=bo(Pn)):(ko=Rr((FA-na[iA])/2),Vo=-ku),Fr.push([_s[iA],ko,Vo]),FA=na[iA]}else if(xr==="left"){Fr=[],Po=_s.length;for(var Du=0;Du<Po;Du++)Fr.push(_s[Du])}else if(xr==="justify"&&Pp.encoding==="Identity-H"){Fr=[],Po=_s.length,qr=qr!==0?qr:Bp;for(var oA=0,xo=0;xo<Po;xo++)if(Vo=xo===0?bo(Pn):-ku,ko=xo===0?Go(An):oA,xo<Po-1){var Ap=Rr((qr-na[xo])/(_s[xo].split(" ").length-1)),Do=_s[xo].split(" ");Fr.push([Do[0]+" ",ko,Vo]),oA=0;for(var ga=1;ga<Do.length;ga++){var Uu=(Au(Do[ga-1]+" "+Do[ga])-Au(Do[ga]))*lo+Ap;ga==Do.length-1?Fr.push([Do[ga],Uu,0]):Fr.push([Do[ga]+" ",Uu,0]),oA-=Uu}}else Fr.push([_s[xo],ko,Vo]);Fr.push(["",oA,0])}else{if(xr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Fr=[],Po=_s.length,qr=qr!==0?qr:Bp,xo=0;xo<Po;xo++)Vo=xo===0?bo(Pn):-ku,ko=xo===0?Go(An):0,xo<Po-1?NA.push(_r(Rr((qr-na[xo])/(_s[xo].split(" ").length-1)))):NA.push(0),Fr.push([_s[xo],ko,Vo])}}var Np=typeof Qn.R2L=="boolean"?Qn.R2L:zn;Np===!0&&(Fr=$l(Fr,function(Ao,uo,yo){return[Ao.split("").reverse().join(""),uo,yo]})),hs={text:Fr,x:An,y:Pn,options:Qn,mutex:{pdfEscape:po,activeFontKey:Ps,fonts:ts,activeFontSize:bn}},vs.publish("postProcessText",hs),Fr=hs.text,Ws=hs.mutex.isHex||!1;var up=ts[Ps].encoding;up!=="WinAnsiEncoding"&&up!=="StandardEncoding"||(Fr=$l(Fr,function(Ao,uo,yo){return[Bl(Ao),uo,yo]})),_s=Bo(Fr),Fr=[];for(var uu,du,jA,hu=0,Ou=1,fu=Array.isArray(_s[0])?Ou:hu,LA="",dp=function(Ao,uo,yo){var Co="";return yo instanceof Dn?(yo=typeof Qn.angle=="number"?Zn(yo,new Dn(1,0,0,1,Ao,uo)):Zn(new Dn(1,0,0,1,Ao,uo),yo),Cr===gr.ADVANCED&&(yo=Zn(new Dn(1,0,0,-1,0,0),yo)),Co=yo.join(" ")+` Tm
`):Co=_r(Ao)+" "+_r(uo)+` Td
`,Co},xa=0;xa<_s.length;xa++){switch(LA="",fu){case Ou:jA=(Ws?"<":"(")+_s[xa][0]+(Ws?">":")"),uu=parseFloat(_s[xa][1]),du=parseFloat(_s[xa][2]);break;case hu:jA=(Ws?"<":"(")+_s[xa]+(Ws?">":")"),uu=Go(An),du=bo(Pn)}NA!==void 0&&NA[xa]!==void 0&&(LA=NA[xa]+` Tw
`),xa===0?Fr.push(LA+dp(uu,du,as)+jA):fu===hu?Fr.push(LA+jA):fu===Ou&&Fr.push(LA+dp(uu,du,as)+jA)}Fr=fu===hu?Fr.join(` Tj
T* `):Fr.join(` Tj
`),Fr+=` Tj
`;var ba=`BT
/`;return ba+=Ps+" "+bn+` Tf
`,ba+=_r(bn*ro)+` TL
`,ba+=Tl+`
`,ba+=Xs,ba+=Fr,Jr(ba+="ET"),ur[Ps]=!0,ws};var ip=dr.__private__.clip=dr.clip=function(Fr){return Jr(Fr==="evenodd"?"W*":"W"),this};dr.clipEvenOdd=function(){return ip("evenodd")},dr.__private__.discardPath=dr.discardPath=function(){return Jr("n"),this};var Zo=dr.__private__.isValidStyle=function(Fr){var An=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Fr)!==-1&&(An=!0),An};dr.__private__.setDefaultPathOperation=dr.setDefaultPathOperation=function(Fr){return Zo(Fr)&&(lr=Fr),this};var Tu=dr.__private__.getStyle=dr.getStyle=function(Fr){var An=lr;switch(Fr){case"D":case"S":An="S";break;case"F":An="f";break;case"FD":case"DF":An="B";break;case"f":case"f*":case"B":case"B*":An=Fr}return An},Ko=dr.close=function(){return Jr("h"),this};dr.stroke=function(){return Jr("S"),this},dr.fill=function(Fr){return xA("f",Fr),this},dr.fillEvenOdd=function(Fr){return xA("f*",Fr),this},dr.fillStroke=function(Fr){return xA("B",Fr),this},dr.fillStrokeEvenOdd=function(Fr){return xA("B*",Fr),this};var xA=function(Fr,An){_typeof(An)==="object"?vA(An,Fr):Jr(Fr)},nu=function(Fr){Fr===null||Cr===gr.ADVANCED&&Fr===void 0||(Fr=Tu(Fr),Jr(Fr))};function yA(Fr,An,Pn,Qn,Yn){var hs=new M(An||this.boundingBox,Pn||this.xStep,Qn||this.yStep,this.gState,Yn||this.matrix);hs.stream=this.stream;var _s=Fr+"$$"+this.cloneIndex+++"$$";return As(_s,hs),hs}var vA=function(Fr,An){var Pn=js[Fr.key],Qn=os[Pn];if(Qn instanceof B)Jr("q"),Jr(Iu(An)),Qn.gState&&dr.setGState(Qn.gState),Jr(Fr.matrix.toString()+" cm"),Jr("/"+Pn+" sh"),Jr("Q");else if(Qn instanceof M){var Yn=new Dn(1,0,0,-1,0,Fo());Fr.matrix&&(Yn=Yn.multiply(Fr.matrix||cs),Pn=yA.call(Qn,Fr.key,Fr.boundingBox,Fr.xStep,Fr.yStep,Yn).id),Jr("q"),Jr("/Pattern cs"),Jr("/"+Pn+" scn"),Qn.gState&&dr.setGState(Qn.gState),Jr(An),Jr("Q")}},Iu=function(Fr){switch(Fr){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Rl=dr.moveTo=function(Fr,An){return Jr(_r(Rr(Fr))+" "+_r(Qr(An))+" m"),this},zo=dr.lineTo=function(Fr,An){return Jr(_r(Rr(Fr))+" "+_r(Qr(An))+" l"),this},Sl=dr.curveTo=function(Fr,An,Pn,Qn,Yn,hs){return Jr([_r(Rr(Fr)),_r(Qr(An)),_r(Rr(Pn)),_r(Qr(Qn)),_r(Rr(Yn)),_r(Qr(hs)),"c"].join(" ")),this};dr.__private__.line=dr.line=function(Fr,An,Pn,Qn,Yn){if(isNaN(Fr)||isNaN(An)||isNaN(Pn)||isNaN(Qn)||!Zo(Yn))throw new Error("Invalid arguments passed to jsPDF.line");return Cr===gr.COMPAT?this.lines([[Pn-Fr,Qn-An]],Fr,An,[1,1],Yn||"S"):this.lines([[Pn-Fr,Qn-An]],Fr,An,[1,1]).stroke()},dr.__private__.lines=dr.lines=function(Fr,An,Pn,Qn,Yn,hs){var _s,ks,xr,Mr,qr,gn,Xn,as,ws,Gs,Xs,Ws;if(typeof Fr=="number"&&(Ws=Pn,Pn=An,An=Fr,Fr=Ws),Qn=Qn||[1,1],hs=hs||!1,isNaN(An)||isNaN(Pn)||!Array.isArray(Fr)||!Array.isArray(Qn)||!Zo(Yn)||typeof hs!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Rl(An,Pn),_s=Qn[0],ks=Qn[1],Mr=Fr.length,Gs=An,Xs=Pn,xr=0;xr<Mr;xr++)(qr=Fr[xr]).length===2?(Gs=qr[0]*_s+Gs,Xs=qr[1]*ks+Xs,zo(Gs,Xs)):(gn=qr[0]*_s+Gs,Xn=qr[1]*ks+Xs,as=qr[2]*_s+Gs,ws=qr[3]*ks+Xs,Gs=qr[4]*_s+Gs,Xs=qr[5]*ks+Xs,Sl(gn,Xn,as,ws,Gs,Xs));return hs&&Ko(),nu(Yn),this},dr.path=function(Fr){for(var An=0;An<Fr.length;An++){var Pn=Fr[An],Qn=Pn.c;switch(Pn.op){case"m":Rl(Qn[0],Qn[1]);break;case"l":zo(Qn[0],Qn[1]);break;case"c":Sl.apply(this,Qn);break;case"h":Ko()}}return this},dr.__private__.rect=dr.rect=function(Fr,An,Pn,Qn,Yn){if(isNaN(Fr)||isNaN(An)||isNaN(Pn)||isNaN(Qn)||!Zo(Yn))throw new Error("Invalid arguments passed to jsPDF.rect");return Cr===gr.COMPAT&&(Qn=-Qn),Jr([_r(Rr(Fr)),_r(Qr(An)),_r(Rr(Pn)),_r(Rr(Qn)),"re"].join(" ")),nu(Yn),this},dr.__private__.triangle=dr.triangle=function(Fr,An,Pn,Qn,Yn,hs,_s){if(isNaN(Fr)||isNaN(An)||isNaN(Pn)||isNaN(Qn)||isNaN(Yn)||isNaN(hs)||!Zo(_s))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Pn-Fr,Qn-An],[Yn-Pn,hs-Qn],[Fr-Yn,An-hs]],Fr,An,[1,1],_s,!0),this},dr.__private__.roundedRect=dr.roundedRect=function(Fr,An,Pn,Qn,Yn,hs,_s){if(isNaN(Fr)||isNaN(An)||isNaN(Pn)||isNaN(Qn)||isNaN(Yn)||isNaN(hs)||!Zo(_s))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ks=4/3*(Math.SQRT2-1);return Yn=Math.min(Yn,.5*Pn),hs=Math.min(hs,.5*Qn),this.lines([[Pn-2*Yn,0],[Yn*ks,0,Yn,hs-hs*ks,Yn,hs],[0,Qn-2*hs],[0,hs*ks,-Yn*ks,hs,-Yn,hs],[2*Yn-Pn,0],[-Yn*ks,0,-Yn,-hs*ks,-Yn,-hs],[0,2*hs-Qn],[0,-hs*ks,Yn*ks,-hs,Yn,-hs]],Fr+Yn,An,[1,1],_s,!0),this},dr.__private__.ellipse=dr.ellipse=function(Fr,An,Pn,Qn,Yn){if(isNaN(Fr)||isNaN(An)||isNaN(Pn)||isNaN(Qn)||!Zo(Yn))throw new Error("Invalid arguments passed to jsPDF.ellipse");var hs=4/3*(Math.SQRT2-1)*Pn,_s=4/3*(Math.SQRT2-1)*Qn;return Rl(Fr+Pn,An),Sl(Fr+Pn,An-_s,Fr+hs,An-Qn,Fr,An-Qn),Sl(Fr-hs,An-Qn,Fr-Pn,An-_s,Fr-Pn,An),Sl(Fr-Pn,An+_s,Fr-hs,An+Qn,Fr,An+Qn),Sl(Fr+hs,An+Qn,Fr+Pn,An+_s,Fr+Pn,An),nu(Yn),this},dr.__private__.circle=dr.circle=function(Fr,An,Pn,Qn){if(isNaN(Fr)||isNaN(An)||isNaN(Pn)||!Zo(Qn))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Fr,An,Pn,Pn,Qn)},dr.setFont=function(Fr,An,Pn){return Pn&&(An=Nr(An,Pn)),Ps=Zl(Fr,An,{disableWarning:!1}),this};var su=dr.__private__.getFont=dr.getFont=function(){return ts[Zl.apply(dr,arguments)]};dr.__private__.getFontList=dr.getFontList=function(){var Fr,An,Pn={};for(Fr in Mn)if(Mn.hasOwnProperty(Fr))for(An in Pn[Fr]=[],Mn[Fr])Mn[Fr].hasOwnProperty(An)&&Pn[Fr].push(An);return Pn},dr.addFont=function(Fr,An,Pn,Qn,Yn){var hs=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&hs.indexOf(arguments[3])!==-1?Yn=arguments[3]:arguments[3]&&hs.indexOf(arguments[3])==-1&&(Pn=Nr(Pn,Qn)),Yn=Yn||"Identity-H",eu.call(this,Fr,An,Pn,Yn)};var to,iu=er.lineWidth||.200025,EA=dr.__private__.getLineWidth=dr.getLineWidth=function(){return iu},ou=dr.__private__.setLineWidth=dr.setLineWidth=function(Fr){return iu=Fr,Jr(_r(Rr(Fr))+" w"),this};dr.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(Fr,An){if(Fr=Fr||[],An=An||0,isNaN(An)||!Array.isArray(Fr))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Fr=Fr.map(function(Pn){return _r(Rr(Pn))}).join(" "),An=_r(Rr(An)),Jr("["+Fr+"] "+An+" d"),this};var au=dr.__private__.getLineHeight=dr.getLineHeight=function(){return bn*to};dr.__private__.getLineHeight=dr.getLineHeight=function(){return bn*to};var lu=dr.__private__.setLineHeightFactor=dr.setLineHeightFactor=function(Fr){return typeof(Fr=Fr||1.15)=="number"&&(to=Fr),this},eA=dr.__private__.getLineHeightFactor=dr.getLineHeightFactor=function(){return to};lu(er.lineHeight);var Go=dr.__private__.getHorizontalCoordinate=function(Fr){return Rr(Fr)},bo=dr.__private__.getVerticalCoordinate=function(Fr){return Cr===gr.ADVANCED?Fr:fs[Br].mediaBox.topRightY-fs[Br].mediaBox.bottomLeftY-Rr(Fr)},Bu=dr.__private__.getHorizontalCoordinateString=dr.getHorizontalCoordinateString=function(Fr){return _r(Go(Fr))},Ml=dr.__private__.getVerticalCoordinateString=dr.getVerticalCoordinateString=function(Fr){return _r(bo(Fr))},Io=er.strokeColor||"0 G";dr.__private__.getStrokeColor=dr.getDrawColor=function(){return Us(Io)},dr.__private__.setStrokeColor=dr.setDrawColor=function(Fr,An,Pn,Qn){return Io=Ms({ch1:Fr,ch2:An,ch3:Pn,ch4:Qn,pdfColorType:"draw",precision:2}),Jr(Io),this};var _A=er.fillColor||"0 g";dr.__private__.getFillColor=dr.getFillColor=function(){return Us(_A)},dr.__private__.setFillColor=dr.setFillColor=function(Fr,An,Pn,Qn){return _A=Ms({ch1:Fr,ch2:An,ch3:Pn,ch4:Qn,pdfColorType:"fill",precision:2}),Jr(_A),this};var Tl=er.textColor||"0 g",wA=dr.__private__.getTextColor=dr.getTextColor=function(){return Us(Tl)};dr.__private__.setTextColor=dr.setTextColor=function(Fr,An,Pn,Qn){return Tl=Ms({ch1:Fr,ch2:An,ch3:Pn,ch4:Qn,pdfColorType:"text",precision:3}),this};var tA=er.charSpace,bA=dr.__private__.getCharSpace=dr.getCharSpace=function(){return parseFloat(tA||0)};dr.__private__.setCharSpace=dr.setCharSpace=function(Fr){if(isNaN(Fr))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return tA=Fr,this};var cu=0;dr.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},dr.__private__.setLineCap=dr.setLineCap=function(Fr){var An=dr.CapJoinStyles[Fr];if(An===void 0)throw new Error("Line cap style of '"+Fr+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return cu=An,Jr(An+" J"),this};var CA=0;dr.__private__.setLineJoin=dr.setLineJoin=function(Fr){var An=dr.CapJoinStyles[Fr];if(An===void 0)throw new Error("Line join style of '"+Fr+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return CA=An,Jr(An+" j"),this},dr.__private__.setLineMiterLimit=dr.__private__.setMiterLimit=dr.setLineMiterLimit=dr.setMiterLimit=function(Fr){if(Fr=Fr||0,isNaN(Fr))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Jr(_r(Rr(Fr))+" M"),this},dr.GState=j,dr.setGState=function(Fr){(Fr=typeof Fr=="string"?bs[Rn[Fr]]:Ql(null,Fr)).equals(es)||(Jr("/"+Fr.id+" gs"),es=Fr)};var Ql=function(Fr,An){if(!Fr||!Rn[Fr]){var Pn=!1;for(var Qn in bs)if(bs.hasOwnProperty(Qn)&&bs[Qn].equals(An)){Pn=!0;break}if(Pn)An=bs[Qn];else{var Yn="GS"+(Object.keys(bs).length+1).toString(10);bs[Yn]=An,An.id=Yn}return Fr&&(Rn[Fr]=An.id),vs.publish("addGState",An),An}};dr.addGState=function(Fr,An){return Ql(Fr,An),this},dr.saveGraphicsState=function(){return Jr("q"),Gn.push({key:Ps,size:bn,color:Tl}),this},dr.restoreGraphicsState=function(){Jr("Q");var Fr=Gn.pop();return Ps=Fr.key,bn=Fr.size,Tl=Fr.color,es=null,this},dr.setCurrentTransformationMatrix=function(Fr){return Jr(Fr.toString()+" cm"),this},dr.comment=function(Fr){return Jr("#"+Fr),this};var rA=function(Fr,An){var Pn=Fr||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Pn},set:function(hs){isNaN(hs)||(Pn=parseFloat(hs))}});var Qn=An||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Qn},set:function(hs){isNaN(hs)||(Qn=parseFloat(hs))}});var Yn="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Yn},set:function(hs){Yn=hs.toString()}}),this},RA=function(Fr,An,Pn,Qn){rA.call(this,Fr,An),this.type="rect";var Yn=Pn||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Yn},set:function(_s){isNaN(_s)||(Yn=parseFloat(_s))}});var hs=Qn||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return hs},set:function(_s){isNaN(_s)||(hs=parseFloat(_s))}}),this},nA=function(){this.page=ds,this.currentPage=Br,this.pages=Sn.slice(0),this.pagesContext=fs.slice(0),this.x=Ts,this.y=Fs,this.matrix=Vs,this.width=Vl(Br),this.height=Fo(Br),this.outputDestination=kn,this.id="",this.objectNumber=-1};nA.prototype.restore=function(){ds=this.page,Br=this.currentPage,fs=this.pagesContext,Sn=this.pages,Ts=this.x,Fs=this.y,Vs=this.matrix,IA(Br,this.width),PA(Br,this.height),kn=this.outputDestination};var TA=function(Fr,An,Pn,Qn,Yn){Ln.push(new nA),ds=Br=0,Sn=[],Ts=Fr,Fs=An,Vs=Yn,Lo([Pn,Qn])},Pu=function(Fr){if(yn[Fr])Ln.pop().restore();else{var An=new nA,Pn="Xo"+(Object.keys(wn).length+1).toString(10);An.id=Pn,yn[Fr]=Pn,wn[Pn]=An,vs.publish("addFormObject",An),Ln.pop().restore()}};for(var Il in dr.beginFormObject=function(Fr,An,Pn,Qn,Yn){return TA(Fr,An,Pn,Qn,Yn),this},dr.endFormObject=function(Fr){return Pu(Fr),this},dr.doFormObject=function(Fr,An){var Pn=wn[yn[Fr]];return Jr("q"),Jr(An.toString()+" cm"),Jr("/"+Pn.id+" Do"),Jr("Q"),this},dr.getFormObject=function(Fr){var An=wn[yn[Fr]];return{x:An.x,y:An.y,width:An.width,height:An.height,matrix:An.matrix}},dr.save=function(Fr,An){return Fr=Fr||"generated.pdf",(An=An||{}).returnPromise=An.returnPromise||!1,An.returnPromise===!1?(l(mA(Cl()),Fr),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(Pn,Qn){try{var Yn=l(mA(Cl()),Fr);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),Pn(Yn)}catch(hs){Qn(hs.message)}})},E.API)E.API.hasOwnProperty(Il)&&(Il==="events"&&E.API.events.length?function(Fr,An){var Pn,Qn,Yn;for(Yn=An.length-1;Yn!==-1;Yn--)Pn=An[Yn][0],Qn=An[Yn][1],Fr.subscribe.apply(Fr,[Pn].concat(typeof Qn=="function"?[Qn]:Qn))}(vs,E.API.events):dr[Il]=E.API[Il]);var Vl=dr.getPageWidth=function(Fr){return(fs[Fr=Fr||Br].mediaBox.topRightX-fs[Fr].mediaBox.bottomLeftX)/ls},IA=dr.setPageWidth=function(Fr,An){fs[Fr].mediaBox.topRightX=An*ls+fs[Fr].mediaBox.bottomLeftX},Fo=dr.getPageHeight=function(Fr){return(fs[Fr=Fr||Br].mediaBox.topRightY-fs[Fr].mediaBox.bottomLeftY)/ls},PA=dr.setPageHeight=function(Fr,An){fs[Fr].mediaBox.topRightY=An*ls+fs[Fr].mediaBox.bottomLeftY};return dr.internal={pdfEscape:po,getStyle:Tu,getFont:su,getFontSize:jn,getCharSpace:bA,getTextColor:wA,getLineHeight:au,getLineHeightFactor:eA,getLineWidth:EA,write:Fn,getHorizontalCoordinate:Go,getVerticalCoordinate:bo,getCoordinateString:Bu,getVerticalCoordinateString:Ml,collections:{},newObject:Rs,newAdditionalObject:Qs,newObjectDeferred:Cs,newObjectDeferredBegin:gs,getFilters:$s,putStream:Hs,events:vs,scaleFactor:ls,pageSize:{getWidth:function(){return Vl(Br)},setWidth:function(Fr){IA(Br,Fr)},getHeight:function(){return Fo(Br)},setHeight:function(Fr){PA(Br,Fr)}},encryptionOptions:cr,encryption:fo,getEncryptor:Su,output:gA,getNumberOfPages:no,pages:Sn,out:Jr,f2:Pr,f3:Er,getPageInfo:ru,getPageInfoByObjId:zs,getCurrentPageInfo:Ol,getPDFVersion:pr,Point:rA,Rectangle:RA,Matrix:Dn,hasHotfix:Ul},Object.defineProperty(dr.internal.pageSize,"width",{get:function(){return Vl(Br)},set:function(Fr){IA(Br,Fr)},enumerable:!0,configurable:!0}),Object.defineProperty(dr.internal.pageSize,"height",{get:function(){return Fo(Br)},set:function(Fr){PA(Br,Fr)},enumerable:!0,configurable:!0}),Cu.call(dr,hn),Ps="F1",Jl(nr,tr),vs.publish("initialized"),dr}I.prototype.lsbFirstWord=function(er){return String.fromCharCode(er>>0&255,er>>8&255,er>>16&255,er>>24&255)},I.prototype.toHexString=function(er){return er.split("").map(function(_e){return("0"+(255&_e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(er){for(var _e=[],tr=0;tr<er.length;tr+=2)_e.push(String.fromCharCode(parseInt(er.substr(tr,2),16)));return _e.join("")},I.prototype.processOwnerPassword=function(er,_e){return P(x(_e).substr(0,5),er)},I.prototype.encryptor=function(er,_e){var tr=x(this.encryptionKey+String.fromCharCode(255&er,er>>8&255,er>>16&255,255&_e,_e>>8&255)).substr(0,10);return function(rr){return P(tr,rr)}},j.prototype.equals=function(er){var _e,tr="id,objectNumber,equals";if(!er||_typeof(er)!==_typeof(this))return!1;var rr=0;for(_e in this)if(!(tr.indexOf(_e)>=0)){if(this.hasOwnProperty(_e)&&!er.hasOwnProperty(_e)||this[_e]!==er[_e])return!1;rr++}for(_e in er)er.hasOwnProperty(_e)&&tr.indexOf(_e)<0&&rr--;return rr===0},E.API={events:[]},E.version="3.0.1";var q=E.API,D=1,R=function(er){return er.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(er){return er.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(er){return er.toFixed(2)},z=function(er){return er.toFixed(5)};q.__acroform__={};var H=function(er,_e){er.prototype=Object.create(_e.prototype),er.prototype.constructor=er},W=function(er){return er*D},V=function(er){var _e=new ut,tr=At.internal.getHeight(er)||0,rr=At.internal.getWidth(er)||0;return _e.BBox=[0,0,Number(U(rr)),Number(U(tr))],_e},G=q.__acroform__.setBit=function(er,_e){if(er=er||0,_e=_e||0,isNaN(er)||isNaN(_e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return er|=1<<_e},Y=q.__acroform__.clearBit=function(er,_e){if(er=er||0,_e=_e||0,isNaN(er)||isNaN(_e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return er&=~(1<<_e)},J=q.__acroform__.getBit=function(er,_e){if(isNaN(er)||isNaN(_e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return er&1<<_e?1:0},X=q.__acroform__.getBitForPdf=function(er,_e){if(isNaN(er)||isNaN(_e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(er,_e-1)},K=q.__acroform__.setBitForPdf=function(er,_e){if(isNaN(er)||isNaN(_e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(er,_e-1)},Z=q.__acroform__.clearBitForPdf=function(er,_e){if(isNaN(er)||isNaN(_e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(er,_e-1)},$=q.__acroform__.calculateCoordinates=function(er,_e){var tr=_e.internal.getHorizontalCoordinate,rr=_e.internal.getVerticalCoordinate,nr=er[0],sr=er[1],ir=er[2],or=er[3],ar={};return ar.lowerLeft_X=tr(nr)||0,ar.lowerLeft_Y=rr(sr+or)||0,ar.upperRight_X=tr(nr+ir)||0,ar.upperRight_Y=rr(sr)||0,[Number(U(ar.lowerLeft_X)),Number(U(ar.lowerLeft_Y)),Number(U(ar.upperRight_X)),Number(U(ar.upperRight_Y))]},Q=function(er){if(er.appearanceStreamContent)return er.appearanceStreamContent;if(er.V||er.DV){var _e=[],tr=er._V||er.DV,rr=tt(er,tr),nr=er.scope.internal.getFont(er.fontName,er.fontStyle).id;_e.push("/Tx BMC"),_e.push("q"),_e.push("BT"),_e.push(er.scope.__private__.encodeColorString(er.color)),_e.push("/"+nr+" "+U(rr.fontSize)+" Tf"),_e.push("1 0 0 1 0 0 Tm"),_e.push(rr.text),_e.push("ET"),_e.push("Q"),_e.push("EMC");var sr=V(er);return sr.scope=er.scope,sr.stream=_e.join(`
`),sr}},tt=function(er,_e){var tr=er.fontSize===0?er.maxFontSize:er.fontSize,rr={text:"",fontSize:""},nr=(_e=(_e=_e.substr(0,1)=="("?_e.substr(1):_e).substr(_e.length-1)==")"?_e.substr(0,_e.length-1):_e).split(" ");nr=er.multiline?nr.map(function(Er){return Er.split(`
`)}):nr.map(function(Er){return[Er]});var sr=tr,ir=At.internal.getHeight(er)||0;ir=ir<0?-ir:ir;var or=At.internal.getWidth(er)||0;or=or<0?-or:or;var ar=function(Er,Rr,Ir){if(Er+1<nr.length){var Qr=Rr+" "+nr[Er+1][0];return et(Qr,er,Ir).width<=or-4}return!1};sr++;e:for(;sr>0;){_e="",sr--;var lr,cr,Ar=et("3",er,sr).height,ur=er.multiline?ir-sr:(ir-Ar)/2,dr=ur+=2,mr=0,pr=0,yr=0;if(sr<=0){_e=`(...) Tj
`,_e+="% Width of Text: "+et(_e,er,sr=12).width+", FieldWidth:"+or+`
`;break}for(var hr="",gr=0,Cr=0;Cr<nr.length;Cr++)if(nr.hasOwnProperty(Cr)){var Tr=!1;if(nr[Cr].length!==1&&yr!==nr[Cr].length-1){if((Ar+2)*(gr+2)+2>ir)continue e;hr+=nr[Cr][yr],Tr=!0,pr=Cr,Cr--}else{hr=(hr+=nr[Cr][yr]+" ").substr(hr.length-1)==" "?hr.substr(0,hr.length-1):hr;var Sr=parseInt(Cr),Nr=ar(Sr,hr,sr),_r=Cr>=nr.length-1;if(Nr&&!_r){hr+=" ",yr=0;continue}if(Nr||_r){if(_r)pr=Sr;else if(er.multiline&&(Ar+2)*(gr+2)+2>ir)continue e}else{if(!er.multiline||(Ar+2)*(gr+2)+2>ir)continue e;pr=Sr}}for(var vr="",br=mr;br<=pr;br++){var Pr=nr[br];if(er.multiline){if(br===pr){vr+=Pr[yr]+" ",yr=(yr+1)%Pr.length;continue}if(br===mr){vr+=Pr[Pr.length-1]+" ";continue}}vr+=Pr[0]+" "}switch(vr=vr.substr(vr.length-1)==" "?vr.substr(0,vr.length-1):vr,cr=et(vr,er,sr).width,er.textAlign){case"right":lr=or-cr-2;break;case"center":lr=(or-cr)/2;break;case"left":default:lr=2}_e+=U(lr)+" "+U(dr)+` Td
`,_e+="("+R(vr)+`) Tj
`,_e+=-U(lr)+` 0 Td
`,dr=-(sr+2),cr=0,mr=Tr?pr:pr+1,gr++,hr=""}break}return rr.text=_e,rr.fontSize=sr,rr},et=function(er,_e,tr){var rr=_e.scope.internal.getFont(_e.fontName,_e.fontStyle),nr=_e.scope.getStringUnitWidth(er,{font:rr,fontSize:parseFloat(tr),charSpace:0})*parseFloat(tr);return{height:_e.scope.getStringUnitWidth("3",{font:rr,fontSize:parseFloat(tr),charSpace:0})*parseFloat(tr)*1.5,width:nr}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(er,_e){var tr={type:"reference",object:er};_e.internal.getPageInfo(er.page).pageContext.annotations.find(function(rr){return rr.type===tr.type&&rr.object===tr.object})===void 0&&_e.internal.getPageInfo(er.page).pageContext.annotations.push(tr)},it=function(er,_e){for(var tr in er)if(er.hasOwnProperty(tr)){var rr=tr,nr=er[tr];_e.internal.newObjectDeferredBegin(nr.objId,!0),_typeof(nr)==="object"&&typeof nr.putStream=="function"&&nr.putStream(),delete er[rr]}},at=function(er,_e){if(_e.scope=er,er.internal!==void 0&&(er.internal.acroformPlugin===void 0||er.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,er.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),er.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=er.internal.scaleFactor,er.internal.acroformPlugin.acroFormDictionaryRoot=new ht,er.internal.acroformPlugin.acroFormDictionaryRoot.scope=er,er.internal.acroformPlugin.acroFormDictionaryRoot._eventID=er.internal.events.subscribe("postPutResources",function(){(function(tr){tr.internal.events.unsubscribe(tr.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete tr.internal.acroformPlugin.acroFormDictionaryRoot._eventID,tr.internal.acroformPlugin.printedOut=!0})(er)}),er.internal.events.subscribe("buildDocument",function(){(function(tr){tr.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var rr=tr.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var nr in rr)if(rr.hasOwnProperty(nr)){var sr=rr[nr];sr.objId=void 0,sr.hasAnnotation&&nt(sr,tr)}})(er)}),er.internal.events.subscribe("putCatalog",function(){(function(tr){if(tr.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");tr.internal.write("/AcroForm "+tr.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(er)}),er.internal.events.subscribe("postPutPages",function(tr){(function(rr,nr){var sr=!rr;for(var ir in rr||(nr.internal.newObjectDeferredBegin(nr.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),nr.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),rr=rr||nr.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(rr.hasOwnProperty(ir)){var or=rr[ir],ar=[],lr=or.Rect;if(or.Rect&&(or.Rect=$(or.Rect,nr)),nr.internal.newObjectDeferredBegin(or.objId,!0),or.DA=At.createDefaultAppearanceStream(or),_typeof(or)==="object"&&typeof or.getKeyValueListForStream=="function"&&(ar=or.getKeyValueListForStream()),or.Rect=lr,or.hasAppearanceStream&&!or.appearanceStreamContent){var cr=Q(or);ar.push({key:"AP",value:"<</N "+cr+">>"}),nr.internal.acroformPlugin.xForms.push(cr)}if(or.appearanceStreamContent){var Ar="";for(var ur in or.appearanceStreamContent)if(or.appearanceStreamContent.hasOwnProperty(ur)){var dr=or.appearanceStreamContent[ur];if(Ar+="/"+ur+" ",Ar+="<<",Object.keys(dr).length>=1||Array.isArray(dr)){for(var ir in dr)if(dr.hasOwnProperty(ir)){var mr=dr[ir];typeof mr=="function"&&(mr=mr.call(nr,or)),Ar+="/"+ir+" "+mr+" ",nr.internal.acroformPlugin.xForms.indexOf(mr)>=0||nr.internal.acroformPlugin.xForms.push(mr)}}else typeof(mr=dr)=="function"&&(mr=mr.call(nr,or)),Ar+="/"+ir+" "+mr,nr.internal.acroformPlugin.xForms.indexOf(mr)>=0||nr.internal.acroformPlugin.xForms.push(mr);Ar+=">>"}ar.push({key:"AP",value:`<<
`+Ar+">>"})}nr.internal.putStream({additionalKeyValues:ar,objectId:or.objId}),nr.internal.out("endobj")}sr&&it(nr.internal.acroformPlugin.xForms,nr)})(tr,er)}),er.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(er,_e,tr){var rr=function(ir){return ir};if(Array.isArray(er)){for(var nr="[",sr=0;sr<er.length;sr++)switch(sr!==0&&(nr+=" "),_typeof(er[sr])){case"boolean":case"number":case"object":nr+=er[sr].toString();break;case"string":er[sr].substr(0,1)!=="/"?(_e!==void 0&&tr&&(rr=tr.internal.getEncryptor(_e)),nr+="("+R(rr(er[sr].toString()))+")"):nr+=er[sr].toString()}return nr+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(er,_e,tr){var rr=function(nr){return nr};return _e!==void 0&&tr&&(rr=tr.internal.getEncryptor(_e)),(er=er||"").toString(),er="("+R(rr(er))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(er){this._objId=er}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var er=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:er,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var er=[],_e=Object.getOwnPropertyNames(this).filter(function(sr){return sr!="content"&&sr!="appearanceStreamContent"&&sr!="scope"&&sr!="objId"&&sr.substring(0,1)!="_"});for(var tr in _e)if(Object.getOwnPropertyDescriptor(this,_e[tr]).configurable===!1){var rr=_e[tr],nr=this[rr];nr&&(Array.isArray(nr)?er.push({key:rr,value:ot(nr,this.objId,this.scope)}):nr instanceof ct?(nr.scope=this.scope,er.push({key:rr,value:nr.objId+" 0 R"})):typeof nr!="function"&&er.push({key:rr,value:nr}))}return er};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var er,_e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return _e},set:function(tr){_e=tr}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(tr){er=tr.trim()},get:function(){return er||null}})};H(ut,ct);var ht=function(){ct.call(this);var er,_e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return _e.length>0?_e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return _e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(er){var tr=function(rr){return rr};return this.scope&&(tr=this.scope.internal.getEncryptor(this.objId)),"("+R(tr(er))+")"}},set:function(tr){er=tr}})};H(ht,ct);var lt=function er(){ct.call(this);var _e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return _e},set:function(hr){if(isNaN(hr))throw new Error('Invalid value "'+hr+'" for attribute F supplied.');_e=hr}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!X(_e,3)},set:function(hr){hr?this.F=K(_e,3):this.F=Z(_e,3)}});var tr=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return tr},set:function(hr){if(isNaN(hr))throw new Error('Invalid value "'+hr+'" for attribute Ff supplied.');tr=hr}});var rr=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(rr.length!==0)return rr},set:function(hr){rr=hr!==void 0?hr:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!rr||isNaN(rr[0])?0:rr[0]},set:function(hr){rr[0]=hr}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!rr||isNaN(rr[1])?0:rr[1]},set:function(hr){rr[1]=hr}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!rr||isNaN(rr[2])?0:rr[2]},set:function(hr){rr[2]=hr}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!rr||isNaN(rr[3])?0:rr[3]},set:function(hr){rr[3]=hr}});var nr="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return nr},set:function(hr){switch(hr){case"/Btn":case"/Tx":case"/Ch":case"/Sig":nr=hr;break;default:throw new Error('Invalid value "'+hr+'" for attribute FT supplied.')}}});var sr=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!sr||sr.length<1){if(this instanceof yt)return;sr="FieldObject"+er.FieldNum++}var hr=function(gr){return gr};return this.scope&&(hr=this.scope.internal.getEncryptor(this.objId)),"("+R(hr(sr))+")"},set:function(hr){sr=hr.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return sr},set:function(hr){sr=hr}});var ir="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return ir},set:function(hr){ir=hr}});var or="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return or},set:function(hr){or=hr}});var ar=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return ar},set:function(hr){ar=hr}});var lr=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return lr===void 0?50/D:lr},set:function(hr){lr=hr}});var cr="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return cr},set:function(hr){cr=hr}});var Ar="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!Ar||this instanceof yt||this instanceof Nt))return st(Ar,this.objId,this.scope)},set:function(hr){hr=hr.toString(),Ar=hr}});var ur=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(ur)return this instanceof mt?ur:st(ur,this.objId,this.scope)},set:function(hr){hr=hr.toString(),ur=this instanceof mt?hr:hr.substr(0,1)==="("?T(hr.substr(1,hr.length-2)):T(hr)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(ur.substr(1,ur.length-1)):ur},set:function(hr){hr=hr.toString(),ur=this instanceof mt?"/"+hr:hr}});var dr=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(dr)return dr},set:function(hr){this.V=hr}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(dr)return this instanceof mt?dr:st(dr,this.objId,this.scope)},set:function(hr){hr=hr.toString(),dr=this instanceof mt?hr:hr.substr(0,1)==="("?T(hr.substr(1,hr.length-2)):T(hr)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(dr.substr(1,dr.length-1)):dr},set:function(hr){hr=hr.toString(),dr=this instanceof mt?"/"+hr:hr}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var mr,pr=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return pr},set:function(hr){hr=!!hr,pr=hr}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(mr)return mr},set:function(hr){mr=hr}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,1)},set:function(hr){hr?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,2)},set:function(hr){hr?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,3)},set:function(hr){hr?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var yr=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(yr!==null)return yr},set:function(hr){if([0,1,2].indexOf(hr)===-1)throw new Error('Invalid value "'+hr+'" for attribute Q supplied.');yr=hr}}),Object.defineProperty(this,"textAlign",{get:function(){var hr;switch(yr){case 0:default:hr="left";break;case 1:hr="center";break;case 2:hr="right"}return hr},configurable:!0,enumerable:!0,set:function(hr){switch(hr){case"right":case 2:yr=2;break;case"center":case 1:yr=1;break;case"left":case 0:default:yr=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var er=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return er},set:function(tr){er=tr}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return er},set:function(tr){er=tr}});var _e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(_e,this.objId,this.scope)},set:function(tr){var rr,nr;nr=[],typeof(rr=tr)=="string"&&(nr=function(sr,ir,or){or||(or=1);for(var ar,lr=[];ar=ir.exec(sr);)lr.push(ar[or]);return lr}(rr,/\((.*?)\)/g)),_e=nr}}),this.getOptions=function(){return _e},this.setOptions=function(tr){_e=tr,this.sort&&_e.sort()},this.addOption=function(tr){tr=(tr=tr||"").toString(),_e.push(tr),this.sort&&_e.sort()},this.removeOption=function(tr,rr){for(rr=rr||!1,tr=(tr=tr||"").toString();_e.indexOf(tr)!==-1&&(_e.splice(_e.indexOf(tr),1),rr!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,18)},set:function(tr){tr?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,19)},set:function(tr){this.combo===!0&&(tr?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,20)},set:function(tr){tr?(this.Ff=K(this.Ff,20),_e.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,22)},set:function(tr){tr?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(tr){tr?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,27)},set:function(tr){tr?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,15)},set:function(tr){tr?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,16)},set:function(tr){tr?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,17)},set:function(tr){tr?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(tr){tr?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var er,_e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var tr=function(sr){return sr};if(this.scope&&(tr=this.scope.internal.getEncryptor(this.objId)),Object.keys(_e).length!==0){var rr,nr=[];for(rr in nr.push("<<"),_e)nr.push("/"+rr+" ("+R(tr(_e[rr]))+")");return nr.push(">>"),nr.join(`
`)}},set:function(tr){_typeof(tr)==="object"&&(_e=tr)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return _e.CA||""},set:function(tr){typeof tr=="string"&&(_e.CA=tr)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return er},set:function(tr){er=tr}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return er.substr(1,er.length-1)},set:function(tr){er="/"+tr}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var er=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return er},set:function(_e){er=_e!==void 0?_e:[]}})};H(bt,mt);var yt=function(){var er,_e;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return er},set:function(nr){er=nr}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return _e},set:function(nr){_e=nr}});var tr,rr={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var nr=function(or){return or};this.scope&&(nr=this.scope.internal.getEncryptor(this.objId));var sr,ir=[];for(sr in ir.push("<<"),rr)ir.push("/"+sr+" ("+R(nr(rr[sr]))+")");return ir.push(">>"),ir.join(`
`)},set:function(nr){_typeof(nr)==="object"&&(rr=nr)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return rr.CA||""},set:function(nr){typeof nr=="string"&&(rr.CA=nr)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return tr},set:function(nr){tr=nr}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return tr.substr(1,tr.length-1)},set:function(nr){tr="/"+nr}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(er){if(!("createAppearanceStream"in er)||!("getCA"in er))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var _e in this.Kids)if(this.Kids.hasOwnProperty(_e)){var tr=this.Kids[_e];tr.appearanceStreamContent=er.createAppearanceStream(tr.optionName),tr.caption=er.getCA()}},bt.prototype.createOption=function(er){var _e=new yt;return _e.Parent=this,_e.optionName=er,this.Kids.push(_e),xt.call(this.scope,_e),_e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,13)},set:function(_e){_e?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,21)},set:function(_e){_e?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(_e){_e?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,24)},set:function(_e){_e?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,25)},set:function(_e){_e?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(_e){_e?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var er=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return er},set:function(_e){er=_e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return er},set:function(_e){Number.isInteger(_e)&&(er=_e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,14)},set:function(er){er?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(er){var _e=V(er);_e.scope=er.scope;var tr=[],rr=er.scope.internal.getFont(er.fontName,er.fontStyle).id,nr=er.scope.__private__.encodeColorString(er.color),sr=tt(er,er.caption);return tr.push("0.749023 g"),tr.push("0 0 "+U(At.internal.getWidth(er))+" "+U(At.internal.getHeight(er))+" re"),tr.push("f"),tr.push("BMC"),tr.push("q"),tr.push("0 0 1 rg"),tr.push("/"+rr+" "+U(sr.fontSize)+" Tf "+nr),tr.push("BT"),tr.push(sr.text),tr.push("ET"),tr.push("Q"),tr.push("EMC"),_e.stream=tr.join(`
`),_e},YesNormal:function(er){var _e=V(er);_e.scope=er.scope;var tr=er.scope.internal.getFont(er.fontName,er.fontStyle).id,rr=er.scope.__private__.encodeColorString(er.color),nr=[],sr=At.internal.getHeight(er),ir=At.internal.getWidth(er),or=tt(er,er.caption);return nr.push("1 g"),nr.push("0 0 "+U(ir)+" "+U(sr)+" re"),nr.push("f"),nr.push("q"),nr.push("0 0 1 rg"),nr.push("0 0 "+U(ir-1)+" "+U(sr-1)+" re"),nr.push("W"),nr.push("n"),nr.push("0 g"),nr.push("BT"),nr.push("/"+tr+" "+U(or.fontSize)+" Tf "+rr),nr.push(or.text),nr.push("ET"),nr.push("Q"),_e.stream=nr.join(`
`),_e},OffPushDown:function(er){var _e=V(er);_e.scope=er.scope;var tr=[];return tr.push("0.749023 g"),tr.push("0 0 "+U(At.internal.getWidth(er))+" "+U(At.internal.getHeight(er))+" re"),tr.push("f"),_e.stream=tr.join(`
`),_e}},RadioButton:{Circle:{createAppearanceStream:function(er){var _e={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return _e.N[er]=At.RadioButton.Circle.YesNormal,_e.D[er]=At.RadioButton.Circle.YesPushDown,_e},getCA:function(){return"l"},YesNormal:function(er){var _e=V(er);_e.scope=er.scope;var tr=[],rr=At.internal.getWidth(er)<=At.internal.getHeight(er)?At.internal.getWidth(er)/4:At.internal.getHeight(er)/4;rr=Number((.9*rr).toFixed(5));var nr=At.internal.Bezier_C,sr=Number((rr*nr).toFixed(5));return tr.push("q"),tr.push("1 0 0 1 "+z(At.internal.getWidth(er)/2)+" "+z(At.internal.getHeight(er)/2)+" cm"),tr.push(rr+" 0 m"),tr.push(rr+" "+sr+" "+sr+" "+rr+" 0 "+rr+" c"),tr.push("-"+sr+" "+rr+" -"+rr+" "+sr+" -"+rr+" 0 c"),tr.push("-"+rr+" -"+sr+" -"+sr+" -"+rr+" 0 -"+rr+" c"),tr.push(sr+" -"+rr+" "+rr+" -"+sr+" "+rr+" 0 c"),tr.push("f"),tr.push("Q"),_e.stream=tr.join(`
`),_e},YesPushDown:function(er){var _e=V(er);_e.scope=er.scope;var tr=[],rr=At.internal.getWidth(er)<=At.internal.getHeight(er)?At.internal.getWidth(er)/4:At.internal.getHeight(er)/4;rr=Number((.9*rr).toFixed(5));var nr=Number((2*rr).toFixed(5)),sr=Number((nr*At.internal.Bezier_C).toFixed(5)),ir=Number((rr*At.internal.Bezier_C).toFixed(5));return tr.push("0.749023 g"),tr.push("q"),tr.push("1 0 0 1 "+z(At.internal.getWidth(er)/2)+" "+z(At.internal.getHeight(er)/2)+" cm"),tr.push(nr+" 0 m"),tr.push(nr+" "+sr+" "+sr+" "+nr+" 0 "+nr+" c"),tr.push("-"+sr+" "+nr+" -"+nr+" "+sr+" -"+nr+" 0 c"),tr.push("-"+nr+" -"+sr+" -"+sr+" -"+nr+" 0 -"+nr+" c"),tr.push(sr+" -"+nr+" "+nr+" -"+sr+" "+nr+" 0 c"),tr.push("f"),tr.push("Q"),tr.push("0 g"),tr.push("q"),tr.push("1 0 0 1 "+z(At.internal.getWidth(er)/2)+" "+z(At.internal.getHeight(er)/2)+" cm"),tr.push(rr+" 0 m"),tr.push(rr+" "+ir+" "+ir+" "+rr+" 0 "+rr+" c"),tr.push("-"+ir+" "+rr+" -"+rr+" "+ir+" -"+rr+" 0 c"),tr.push("-"+rr+" -"+ir+" -"+ir+" -"+rr+" 0 -"+rr+" c"),tr.push(ir+" -"+rr+" "+rr+" -"+ir+" "+rr+" 0 c"),tr.push("f"),tr.push("Q"),_e.stream=tr.join(`
`),_e},OffPushDown:function(er){var _e=V(er);_e.scope=er.scope;var tr=[],rr=At.internal.getWidth(er)<=At.internal.getHeight(er)?At.internal.getWidth(er)/4:At.internal.getHeight(er)/4;rr=Number((.9*rr).toFixed(5));var nr=Number((2*rr).toFixed(5)),sr=Number((nr*At.internal.Bezier_C).toFixed(5));return tr.push("0.749023 g"),tr.push("q"),tr.push("1 0 0 1 "+z(At.internal.getWidth(er)/2)+" "+z(At.internal.getHeight(er)/2)+" cm"),tr.push(nr+" 0 m"),tr.push(nr+" "+sr+" "+sr+" "+nr+" 0 "+nr+" c"),tr.push("-"+sr+" "+nr+" -"+nr+" "+sr+" -"+nr+" 0 c"),tr.push("-"+nr+" -"+sr+" -"+sr+" -"+nr+" 0 -"+nr+" c"),tr.push(sr+" -"+nr+" "+nr+" -"+sr+" "+nr+" 0 c"),tr.push("f"),tr.push("Q"),_e.stream=tr.join(`
`),_e}},Cross:{createAppearanceStream:function(er){var _e={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return _e.N[er]=At.RadioButton.Cross.YesNormal,_e.D[er]=At.RadioButton.Cross.YesPushDown,_e},getCA:function(){return"8"},YesNormal:function(er){var _e=V(er);_e.scope=er.scope;var tr=[],rr=At.internal.calculateCross(er);return tr.push("q"),tr.push("1 1 "+U(At.internal.getWidth(er)-2)+" "+U(At.internal.getHeight(er)-2)+" re"),tr.push("W"),tr.push("n"),tr.push(U(rr.x1.x)+" "+U(rr.x1.y)+" m"),tr.push(U(rr.x2.x)+" "+U(rr.x2.y)+" l"),tr.push(U(rr.x4.x)+" "+U(rr.x4.y)+" m"),tr.push(U(rr.x3.x)+" "+U(rr.x3.y)+" l"),tr.push("s"),tr.push("Q"),_e.stream=tr.join(`
`),_e},YesPushDown:function(er){var _e=V(er);_e.scope=er.scope;var tr=At.internal.calculateCross(er),rr=[];return rr.push("0.749023 g"),rr.push("0 0 "+U(At.internal.getWidth(er))+" "+U(At.internal.getHeight(er))+" re"),rr.push("f"),rr.push("q"),rr.push("1 1 "+U(At.internal.getWidth(er)-2)+" "+U(At.internal.getHeight(er)-2)+" re"),rr.push("W"),rr.push("n"),rr.push(U(tr.x1.x)+" "+U(tr.x1.y)+" m"),rr.push(U(tr.x2.x)+" "+U(tr.x2.y)+" l"),rr.push(U(tr.x4.x)+" "+U(tr.x4.y)+" m"),rr.push(U(tr.x3.x)+" "+U(tr.x3.y)+" l"),rr.push("s"),rr.push("Q"),_e.stream=rr.join(`
`),_e},OffPushDown:function(er){var _e=V(er);_e.scope=er.scope;var tr=[];return tr.push("0.749023 g"),tr.push("0 0 "+U(At.internal.getWidth(er))+" "+U(At.internal.getHeight(er))+" re"),tr.push("f"),_e.stream=tr.join(`
`),_e}}},createDefaultAppearanceStream:function(er){var _e=er.scope.internal.getFont(er.fontName,er.fontStyle).id,tr=er.scope.__private__.encodeColorString(er.color);return"/"+_e+" "+er.fontSize+" Tf "+tr}};At.internal={Bezier_C:.551915024494,calculateCross:function(er){var _e=At.internal.getWidth(er),tr=At.internal.getHeight(er),rr=Math.min(_e,tr);return{x1:{x:(_e-rr)/2,y:(tr-rr)/2+rr},x2:{x:(_e-rr)/2+rr,y:(tr-rr)/2},x3:{x:(_e-rr)/2,y:(tr-rr)/2},x4:{x:(_e-rr)/2+rr,y:(tr-rr)/2+rr}}}},At.internal.getWidth=function(er){var _e=0;return _typeof(er)==="object"&&(_e=W(er.Rect[2])),_e},At.internal.getHeight=function(er){var _e=0;return _typeof(er)==="object"&&(_e=W(er.Rect[3])),_e};var xt=q.addField=function(er){if(at(this,er),!(er instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var _e;return(_e=er).scope.internal.acroformPlugin.printedOut&&(_e.scope.internal.acroformPlugin.printedOut=!1,_e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),_e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(_e),er.page=er.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};function _t(er){return er.reduce(function(_e,tr,rr){return _e[tr]=rr,_e},{})}(function(er){er.__addimage__={};var _e="UNKNOWN",tr={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},rr=er.__addimage__.getImageFileTypeByImageData=function(Er,Rr){var Ir,Qr,Ur,Vr,Wr,Hr=_e;if((Rr=Rr||_e)==="RGBA"||Er.data!==void 0&&Er.data instanceof Uint8ClampedArray&&"height"in Er&&"width"in Er)return"RGBA";if(Nr(Er))for(Wr in tr)for(Ur=tr[Wr],Ir=0;Ir<Ur.length;Ir+=1){for(Vr=!0,Qr=0;Qr<Ur[Ir].length;Qr+=1)if(Ur[Ir][Qr]!==void 0&&Ur[Ir][Qr]!==Er[Qr]){Vr=!1;break}if(Vr===!0){Hr=Wr;break}}else for(Wr in tr)for(Ur=tr[Wr],Ir=0;Ir<Ur.length;Ir+=1){for(Vr=!0,Qr=0;Qr<Ur[Ir].length;Qr+=1)if(Ur[Ir][Qr]!==void 0&&Ur[Ir][Qr]!==Er.charCodeAt(Qr)){Vr=!1;break}if(Vr===!0){Hr=Wr;break}}return Hr===_e&&Rr!==_e&&(Hr=Rr),Hr},nr=function Er(Rr){for(var Ir=this.internal.write,Qr=this.internal.putStream,Ur=(0,this.internal.getFilters)();Ur.indexOf("FlateEncode")!==-1;)Ur.splice(Ur.indexOf("FlateEncode"),1);Rr.objectId=this.internal.newObject();var Vr=[];if(Vr.push({key:"Type",value:"/XObject"}),Vr.push({key:"Subtype",value:"/Image"}),Vr.push({key:"Width",value:Rr.width}),Vr.push({key:"Height",value:Rr.height}),Rr.colorSpace===yr.INDEXED?Vr.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Rr.palette.length/3-1)+" "+("sMask"in Rr&&Rr.sMask!==void 0?Rr.objectId+2:Rr.objectId+1)+" 0 R]"}):(Vr.push({key:"ColorSpace",value:"/"+Rr.colorSpace}),Rr.colorSpace===yr.DEVICE_CMYK&&Vr.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Vr.push({key:"BitsPerComponent",value:Rr.bitsPerComponent}),"decodeParameters"in Rr&&Rr.decodeParameters!==void 0&&Vr.push({key:"DecodeParms",value:"<<"+Rr.decodeParameters+">>"}),"transparency"in Rr&&Array.isArray(Rr.transparency)){for(var Wr="",Hr=0,$r=Rr.transparency.length;Hr<$r;Hr++)Wr+=Rr.transparency[Hr]+" "+Rr.transparency[Hr]+" ";Vr.push({key:"Mask",value:"["+Wr+"]"})}Rr.sMask!==void 0&&Vr.push({key:"SMask",value:Rr.objectId+1+" 0 R"});var Xr=Rr.filter!==void 0?["/"+Rr.filter]:void 0;if(Qr({data:Rr.data,additionalKeyValues:Vr,alreadyAppliedFilters:Xr,objectId:Rr.objectId}),Ir("endobj"),"sMask"in Rr&&Rr.sMask!==void 0){var pn="/Predictor "+Rr.predictor+" /Colors 1 /BitsPerComponent "+Rr.bitsPerComponent+" /Columns "+Rr.width,jr={width:Rr.width,height:Rr.height,colorSpace:"DeviceGray",bitsPerComponent:Rr.bitsPerComponent,decodeParameters:pn,data:Rr.sMask};"filter"in Rr&&(jr.filter=Rr.filter),Er.call(this,jr)}if(Rr.colorSpace===yr.INDEXED){var Br=this.internal.newObject();Qr({data:vr(new Uint8Array(Rr.palette)),objectId:Br}),Ir("endobj")}},sr=function(){var Er=this.internal.collections.addImage_images;for(var Rr in Er)nr.call(this,Er[Rr])},ir=function(){var Er,Rr=this.internal.collections.addImage_images,Ir=this.internal.write;for(var Qr in Rr)Ir("/I"+(Er=Rr[Qr]).index,Er.objectId,"0","R")},or=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",sr),this.internal.events.subscribe("putXobjectDict",ir))},ar=function(){var Er=this.internal.collections.addImage_images;return or.call(this),Er},lr=function(){return Object.keys(this.internal.collections.addImage_images).length},cr=function(Er){return typeof er["process"+Er.toUpperCase()]=="function"},Ar=function(Er){return _typeof(Er)==="object"&&Er.nodeType===1},ur=function(Er,Rr){if(Er.nodeName==="IMG"&&Er.hasAttribute("src")){var Ir=""+Er.getAttribute("src");if(Ir.indexOf("data:image/")===0)return u(unescape(Ir).split("base64,").pop());var Qr=er.loadFile(Ir,!0);if(Qr!==void 0)return Qr}if(Er.nodeName==="CANVAS"){if(Er.width===0||Er.height===0)throw new Error("Given canvas must have data. Canvas width: "+Er.width+", height: "+Er.height);var Ur;switch(Rr){case"PNG":Ur="image/png";break;case"WEBP":Ur="image/webp";break;case"JPEG":case"JPG":default:Ur="image/jpeg"}return u(Er.toDataURL(Ur,1).split("base64,").pop())}},dr=function(Er){var Rr=this.internal.collections.addImage_images;if(Rr){for(var Ir in Rr)if(Er===Rr[Ir].alias)return Rr[Ir]}},mr=function(Er,Rr,Ir){return Er||Rr||(Er=-96,Rr=-96),Er<0&&(Er=-1*Ir.width*72/Er/this.internal.scaleFactor),Rr<0&&(Rr=-1*Ir.height*72/Rr/this.internal.scaleFactor),Er===0&&(Er=Rr*Ir.width/Ir.height),Rr===0&&(Rr=Er*Ir.height/Ir.width),[Er,Rr]},pr=function(Er,Rr,Ir,Qr,Ur,Vr){var Wr=mr.call(this,Ir,Qr,Ur),Hr=this.internal.getCoordinateString,$r=this.internal.getVerticalCoordinateString,Xr=ar.call(this);if(Ir=Wr[0],Qr=Wr[1],Xr[Ur.index]=Ur,Vr){Vr*=Math.PI/180;var pn=Math.cos(Vr),jr=Math.sin(Vr),Br=function(Or){return Or.toFixed(4)},Lr=[Br(pn),Br(jr),Br(-1*jr),Br(pn),0,0,"cm"]}this.internal.write("q"),Vr?(this.internal.write([1,"0","0",1,Hr(Er),$r(Rr+Qr),"cm"].join(" ")),this.internal.write(Lr.join(" ")),this.internal.write([Hr(Ir),"0","0",Hr(Qr),"0","0","cm"].join(" "))):this.internal.write([Hr(Ir),"0","0",Hr(Qr),Hr(Er),$r(Rr+Qr),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ur.index+" Do"),this.internal.write("Q")},yr=er.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};er.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var hr=er.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},gr=er.__addimage__.sHashCode=function(Er){var Rr,Ir,Qr=0;if(typeof Er=="string")for(Ir=Er.length,Rr=0;Rr<Ir;Rr++)Qr=(Qr<<5)-Qr+Er.charCodeAt(Rr),Qr|=0;else if(Nr(Er))for(Ir=Er.byteLength/2,Rr=0;Rr<Ir;Rr++)Qr=(Qr<<5)-Qr+Er[Rr],Qr|=0;return Qr},Cr=er.__addimage__.validateStringAsBase64=function(Er){(Er=Er||"").toString().trim();var Rr=!0;return Er.length===0&&(Rr=!1),Er.length%4!=0&&(Rr=!1),/^[A-Za-z0-9+/]+$/.test(Er.substr(0,Er.length-2))===!1&&(Rr=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Er.substr(-2))===!1&&(Rr=!1),Rr},Tr=er.__addimage__.extractImageFromDataUrl=function(Er){if(Er==null||!(Er=Er.trim()).startsWith("data:"))return null;var Rr=Er.indexOf(",");return Rr<0?null:Er.substring(0,Rr).trim().endsWith("base64")?Er.substring(Rr+1):null},Sr=er.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};er.__addimage__.isArrayBuffer=function(Er){return Sr()&&Er instanceof ArrayBuffer};var Nr=er.__addimage__.isArrayBufferView=function(Er){return Sr()&&typeof Uint32Array<"u"&&(Er instanceof Int8Array||Er instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&Er instanceof Uint8ClampedArray||Er instanceof Int16Array||Er instanceof Uint16Array||Er instanceof Int32Array||Er instanceof Uint32Array||Er instanceof Float32Array||Er instanceof Float64Array)},_r=er.__addimage__.binaryStringToUint8Array=function(Er){for(var Rr=Er.length,Ir=new Uint8Array(Rr),Qr=0;Qr<Rr;Qr++)Ir[Qr]=Er.charCodeAt(Qr);return Ir},vr=er.__addimage__.arrayBufferToBinaryString=function(Er){for(var Rr="",Ir=Nr(Er)?Er:new Uint8Array(Er),Qr=0;Qr<Ir.length;Qr+=8192)Rr+=String.fromCharCode.apply(null,Ir.subarray(Qr,Qr+8192));return Rr};er.addImage=function(){var Er,Rr,Ir,Qr,Ur,Vr,Wr,Hr,$r;if(typeof arguments[1]=="number"?(Rr=_e,Ir=arguments[1],Qr=arguments[2],Ur=arguments[3],Vr=arguments[4],Wr=arguments[5],Hr=arguments[6],$r=arguments[7]):(Rr=arguments[1],Ir=arguments[2],Qr=arguments[3],Ur=arguments[4],Vr=arguments[5],Wr=arguments[6],Hr=arguments[7],$r=arguments[8]),_typeof(Er=arguments[0])==="object"&&!Ar(Er)&&"imageData"in Er){var Xr=Er;Er=Xr.imageData,Rr=Xr.format||Rr||_e,Ir=Xr.x||Ir||0,Qr=Xr.y||Qr||0,Ur=Xr.w||Xr.width||Ur,Vr=Xr.h||Xr.height||Vr,Wr=Xr.alias||Wr,Hr=Xr.compression||Hr,$r=Xr.rotation||Xr.angle||$r}var pn=this.internal.getFilters();if(Hr===void 0&&pn.indexOf("FlateEncode")!==-1&&(Hr="SLOW"),isNaN(Ir)||isNaN(Qr))throw new Error("Invalid coordinates passed to jsPDF.addImage");or.call(this);var jr=br.call(this,Er,Rr,Wr,Hr);return pr.call(this,Ir,Qr,Ur,Vr,jr,$r),this};var br=function(Er,Rr,Ir,Qr){var Ur,Vr,Wr;if(typeof Er=="string"&&rr(Er)===_e){Er=unescape(Er);var Hr=Pr(Er,!1);(Hr!==""||(Hr=er.loadFile(Er,!0))!==void 0)&&(Er=Hr)}if(Ar(Er)&&(Er=ur(Er,Rr)),Rr=rr(Er,Rr),!cr(Rr))throw new Error("addImage does not support files of type '"+Rr+"', please ensure that a plugin for '"+Rr+"' support is added.");if(((Wr=Ir)==null||Wr.length===0)&&(Ir=function($r){return typeof $r=="string"||Nr($r)?gr($r):Nr($r.data)?gr($r.data):null}(Er)),(Ur=dr.call(this,Ir))||(Sr()&&(Er instanceof Uint8Array||Rr==="RGBA"||(Vr=Er,Er=_r(Er))),Ur=this["process"+Rr.toUpperCase()](Er,lr.call(this),Ir,function($r){return $r&&typeof $r=="string"&&($r=$r.toUpperCase()),$r in er.image_compression?$r:hr.NONE}(Qr),Vr)),!Ur)throw new Error("An unknown error occurred whilst processing the image.");return Ur},Pr=er.__addimage__.convertBase64ToBinaryString=function(Er,Rr){Rr=typeof Rr!="boolean"||Rr;var Ir,Qr="";if(typeof Er=="string"){var Ur;Ir=(Ur=Tr(Er))!==null&&Ur!==void 0?Ur:Er;try{Qr=u(Ir)}catch(Vr){if(Rr)throw Cr(Ir)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Vr.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Qr};er.getImageProperties=function(Er){var Rr,Ir,Qr="";if(Ar(Er)&&(Er=ur(Er)),typeof Er=="string"&&rr(Er)===_e&&((Qr=Pr(Er,!1))===""&&(Qr=er.loadFile(Er)||""),Er=Qr),Ir=rr(Er),!cr(Ir))throw new Error("addImage does not support files of type '"+Ir+"', please ensure that a plugin for '"+Ir+"' support is added.");if(!Sr()||Er instanceof Uint8Array||(Er=_r(Er)),!(Rr=this["process"+Ir.toUpperCase()](Er)))throw new Error("An unknown error occurred whilst processing the image");return Rr.fileType=Ir,Rr}})(E.API),function(er){var _e=function(tr){if(tr!==void 0&&tr!="")return!0};E.API.events.push(["addPage",function(tr){this.internal.getPageInfo(tr.pageNumber).pageContext.annotations=[]}]),er.events.push(["putPage",function(tr){for(var rr,nr,sr,ir=this.internal.getCoordinateString,or=this.internal.getVerticalCoordinateString,ar=this.internal.getPageInfoByObjId(tr.objId),lr=tr.pageContext.annotations,cr=!1,Ar=0;Ar<lr.length&&!cr;Ar++)switch((rr=lr[Ar]).type){case"link":(_e(rr.options.url)||_e(rr.options.pageNumber))&&(cr=!0);break;case"reference":case"text":case"freetext":cr=!0}if(cr!=0){this.internal.write("/Annots [");for(var ur=0;ur<lr.length;ur++){rr=lr[ur];var dr=this.internal.pdfEscape,mr=this.internal.getEncryptor(tr.objId);switch(rr.type){case"reference":this.internal.write(" "+rr.object.objId+" 0 R ");break;case"text":var pr=this.internal.newAdditionalObject(),yr=this.internal.newAdditionalObject(),hr=this.internal.getEncryptor(pr.objId),gr=rr.title||"Note";sr="<</Type /Annot /Subtype /Text "+(nr="/Rect ["+ir(rr.bounds.x)+" "+or(rr.bounds.y+rr.bounds.h)+" "+ir(rr.bounds.x+rr.bounds.w)+" "+or(rr.bounds.y)+"] ")+"/Contents ("+dr(hr(rr.contents))+")",sr+=" /Popup "+yr.objId+" 0 R",sr+=" /P "+ar.objId+" 0 R",sr+=" /T ("+dr(hr(gr))+") >>",pr.content=sr;var Cr=pr.objId+" 0 R";sr="<</Type /Annot /Subtype /Popup "+(nr="/Rect ["+ir(rr.bounds.x+30)+" "+or(rr.bounds.y+rr.bounds.h)+" "+ir(rr.bounds.x+rr.bounds.w+30)+" "+or(rr.bounds.y)+"] ")+" /Parent "+Cr,rr.open&&(sr+=" /Open true"),sr+=" >>",yr.content=sr,this.internal.write(pr.objId,"0 R",yr.objId,"0 R");break;case"freetext":nr="/Rect ["+ir(rr.bounds.x)+" "+or(rr.bounds.y)+" "+ir(rr.bounds.x+rr.bounds.w)+" "+or(rr.bounds.y+rr.bounds.h)+"] ";var Tr=rr.color||"#000000";sr="<</Type /Annot /Subtype /FreeText "+nr+"/Contents ("+dr(mr(rr.contents))+")",sr+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Tr+")",sr+=" /Border [0 0 0]",sr+=" >>",this.internal.write(sr);break;case"link":if(rr.options.name){var Sr=this.annotations._nameMap[rr.options.name];rr.options.pageNumber=Sr.page,rr.options.top=Sr.y}else rr.options.top||(rr.options.top=0);if(nr="/Rect ["+rr.finalBounds.x+" "+rr.finalBounds.y+" "+rr.finalBounds.w+" "+rr.finalBounds.h+"] ",sr="",rr.options.url)sr="<</Type /Annot /Subtype /Link "+nr+"/Border [0 0 0] /A <</S /URI /URI ("+dr(mr(rr.options.url))+") >>";else if(rr.options.pageNumber)switch(sr="<</Type /Annot /Subtype /Link "+nr+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(rr.options.pageNumber).objId+" 0 R",rr.options.magFactor=rr.options.magFactor||"XYZ",rr.options.magFactor){case"Fit":sr+=" /Fit]";break;case"FitH":sr+=" /FitH "+rr.options.top+"]";break;case"FitV":rr.options.left=rr.options.left||0,sr+=" /FitV "+rr.options.left+"]";break;case"XYZ":default:var Nr=or(rr.options.top);rr.options.left=rr.options.left||0,rr.options.zoom===void 0&&(rr.options.zoom=0),sr+=" /XYZ "+rr.options.left+" "+Nr+" "+rr.options.zoom+"]"}sr!=""&&(sr+=" >>",this.internal.write(sr))}}this.internal.write("]")}}]),er.createAnnotation=function(tr){var rr=this.internal.getCurrentPageInfo();switch(tr.type){case"link":this.link(tr.bounds.x,tr.bounds.y,tr.bounds.w,tr.bounds.h,tr);break;case"text":case"freetext":rr.pageContext.annotations.push(tr)}},er.link=function(tr,rr,nr,sr,ir){var or=this.internal.getCurrentPageInfo(),ar=this.internal.getCoordinateString,lr=this.internal.getVerticalCoordinateString;or.pageContext.annotations.push({finalBounds:{x:ar(tr),y:lr(rr),w:ar(tr+nr),h:lr(rr+sr)},options:ir,type:"link"})},er.textWithLink=function(tr,rr,nr,sr){var ir,or,ar=this.getTextWidth(tr),lr=this.internal.getLineHeight()/this.internal.scaleFactor;if(sr.maxWidth!==void 0){or=sr.maxWidth;var cr=this.splitTextToSize(tr,or).length;ir=Math.ceil(lr*cr)}else or=ar,ir=lr;return this.text(tr,rr,nr,sr),nr+=.2*lr,sr.align==="center"&&(rr-=ar/2),sr.align==="right"&&(rr-=ar),this.link(rr,nr-lr,or,ir,sr),ar},er.getTextWidth=function(tr){var rr=this.internal.getFontSize();return this.getStringUnitWidth(tr)*rr/this.internal.scaleFactor}}(E.API),function(er){var _e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},tr={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},rr={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},nr=[1570,1571,1573,1575];er.__arabicParser__={};var sr=er.__arabicParser__.isInArabicSubstitutionA=function(pr){return _e[pr.charCodeAt(0)]!==void 0},ir=er.__arabicParser__.isArabicLetter=function(pr){return typeof pr=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(pr)},or=er.__arabicParser__.isArabicEndLetter=function(pr){return ir(pr)&&sr(pr)&&_e[pr.charCodeAt(0)].length<=2},ar=er.__arabicParser__.isArabicAlfLetter=function(pr){return ir(pr)&&nr.indexOf(pr.charCodeAt(0))>=0};er.__arabicParser__.arabicLetterHasIsolatedForm=function(pr){return ir(pr)&&sr(pr)&&_e[pr.charCodeAt(0)].length>=1};var lr=er.__arabicParser__.arabicLetterHasFinalForm=function(pr){return ir(pr)&&sr(pr)&&_e[pr.charCodeAt(0)].length>=2};er.__arabicParser__.arabicLetterHasInitialForm=function(pr){return ir(pr)&&sr(pr)&&_e[pr.charCodeAt(0)].length>=3};var cr=er.__arabicParser__.arabicLetterHasMedialForm=function(pr){return ir(pr)&&sr(pr)&&_e[pr.charCodeAt(0)].length==4},Ar=er.__arabicParser__.resolveLigatures=function(pr){var yr=0,hr=tr,gr="",Cr=0;for(yr=0;yr<pr.length;yr+=1)hr[pr.charCodeAt(yr)]!==void 0?(Cr++,typeof(hr=hr[pr.charCodeAt(yr)])=="number"&&(gr+=String.fromCharCode(hr),hr=tr,Cr=0),yr===pr.length-1&&(hr=tr,gr+=pr.charAt(yr-(Cr-1)),yr-=Cr-1,Cr=0)):(hr=tr,gr+=pr.charAt(yr-Cr),yr-=Cr,Cr=0);return gr};er.__arabicParser__.isArabicDiacritic=function(pr){return pr!==void 0&&rr[pr.charCodeAt(0)]!==void 0};var ur=er.__arabicParser__.getCorrectForm=function(pr,yr,hr){return ir(pr)?sr(pr)===!1?-1:!lr(pr)||!ir(yr)&&!ir(hr)||!ir(hr)&&or(yr)||or(pr)&&!ir(yr)||or(pr)&&ar(yr)||or(pr)&&or(yr)?0:cr(pr)&&ir(yr)&&!or(yr)&&ir(hr)&&lr(hr)?3:or(pr)||!ir(hr)?1:2:-1},dr=function(pr){var yr=0,hr=0,gr=0,Cr="",Tr="",Sr="",Nr=(pr=pr||"").split("\\s+"),_r=[];for(yr=0;yr<Nr.length;yr+=1){for(_r.push(""),hr=0;hr<Nr[yr].length;hr+=1)Cr=Nr[yr][hr],Tr=Nr[yr][hr-1],Sr=Nr[yr][hr+1],ir(Cr)?(gr=ur(Cr,Tr,Sr),_r[yr]+=gr!==-1?String.fromCharCode(_e[Cr.charCodeAt(0)][gr]):Cr):_r[yr]+=Cr;_r[yr]=Ar(_r[yr])}return _r.join(" ")},mr=er.__arabicParser__.processArabic=er.processArabic=function(){var pr,yr=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,hr=[];if(Array.isArray(yr)){var gr=0;for(hr=[],gr=0;gr<yr.length;gr+=1)Array.isArray(yr[gr])?hr.push([dr(yr[gr][0]),yr[gr][1],yr[gr][2]]):hr.push([dr(yr[gr])]);pr=hr}else pr=dr(yr);return typeof arguments[0]=="string"?pr:(arguments[0].text=pr,arguments[0])};er.events.push(["preProcessText",mr])}(E.API),E.API.autoPrint=function(er){var _e;switch((er=er||{}).variant=er.variant||"non-conform",er.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){_e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+_e+" 0 R")})}return this},function(er){var _e=function(){var tr=void 0;Object.defineProperty(this,"pdf",{get:function(){return tr},set:function(or){tr=or}});var rr=150;Object.defineProperty(this,"width",{get:function(){return rr},set:function(or){rr=isNaN(or)||Number.isInteger(or)===!1||or<0?150:or,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=rr+1)}});var nr=300;Object.defineProperty(this,"height",{get:function(){return nr},set:function(or){nr=isNaN(or)||Number.isInteger(or)===!1||or<0?300:or,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=nr+1)}});var sr=[];Object.defineProperty(this,"childNodes",{get:function(){return sr},set:function(or){sr=or}});var ir={};Object.defineProperty(this,"style",{get:function(){return ir},set:function(or){ir=or}}),Object.defineProperty(this,"parentNode",{})};_e.prototype.getContext=function(tr,rr){var nr;if((tr=tr||"2d")!=="2d")return null;for(nr in rr)this.pdf.context2d.hasOwnProperty(nr)&&(this.pdf.context2d[nr]=rr[nr]);return this.pdf.context2d._canvas=this,this.pdf.context2d},_e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},er.events.push(["initialized",function(){this.canvas=new _e,this.canvas.pdf=this}])}(E.API),function(er){var _e={left:0,top:0,bottom:0,right:0},tr=!1,rr=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},_e),this.internal.__cell__.margins.width=this.getPageWidth(),nr.call(this))},nr=function(){this.internal.__cell__.lastCell=new sr,this.internal.__cell__.pages=1},sr=function(){var ar=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ar},set:function(pr){ar=pr}});var lr=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return lr},set:function(pr){lr=pr}});var cr=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return cr},set:function(pr){cr=pr}});var Ar=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return Ar},set:function(pr){Ar=pr}});var ur=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return ur},set:function(pr){ur=pr}});var dr=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return dr},set:function(pr){dr=pr}});var mr=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return mr},set:function(pr){mr=pr}}),this};sr.prototype.clone=function(){return new sr(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},sr.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},er.setHeaderFunction=function(ar){return rr.call(this),this.internal.__cell__.headerFunction=typeof ar=="function"?ar:void 0,this},er.getTextDimensions=function(ar,lr){rr.call(this);var cr=(lr=lr||{}).fontSize||this.getFontSize(),Ar=lr.font||this.getFont(),ur=lr.scaleFactor||this.internal.scaleFactor,dr=0,mr=0,pr=0,yr=this;if(!Array.isArray(ar)&&typeof ar!="string"){if(typeof ar!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");ar=String(ar)}var hr=lr.maxWidth;hr>0?typeof ar=="string"?ar=this.splitTextToSize(ar,hr):Object.prototype.toString.call(ar)==="[object Array]"&&(ar=ar.reduce(function(Cr,Tr){return Cr.concat(yr.splitTextToSize(Tr,hr))},[])):ar=Array.isArray(ar)?ar:[ar];for(var gr=0;gr<ar.length;gr++)dr<(pr=this.getStringUnitWidth(ar[gr],{font:Ar})*cr)&&(dr=pr);return dr!==0&&(mr=ar.length),{w:dr/=ur,h:Math.max((mr*cr*this.getLineHeightFactor()-cr*(this.getLineHeightFactor()-1))/ur,0)}},er.cellAddPage=function(){rr.call(this),this.addPage();var ar=this.internal.__cell__.margins||_e;return this.internal.__cell__.lastCell=new sr(ar.left,ar.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var ir=er.cell=function(){var ar;ar=arguments[0]instanceof sr?arguments[0]:new sr(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),rr.call(this);var lr=this.internal.__cell__.lastCell,cr=this.internal.__cell__.padding,Ar=this.internal.__cell__.margins||_e,ur=this.internal.__cell__.tableHeaderRow,dr=this.internal.__cell__.printHeaders;return lr.lineNumber!==void 0&&(lr.lineNumber===ar.lineNumber?(ar.x=(lr.x||0)+(lr.width||0),ar.y=lr.y||0):lr.y+lr.height+ar.height+Ar.bottom>this.getPageHeight()?(this.cellAddPage(),ar.y=Ar.top,dr&&ur&&(this.printHeaderRow(ar.lineNumber,!0),ar.y+=ur[0].height)):ar.y=lr.y+lr.height||ar.y),ar.text[0]!==void 0&&(this.rect(ar.x,ar.y,ar.width,ar.height,tr===!0?"FD":void 0),ar.align==="right"?this.text(ar.text,ar.x+ar.width-cr,ar.y+cr,{align:"right",baseline:"top"}):ar.align==="center"?this.text(ar.text,ar.x+ar.width/2,ar.y+cr,{align:"center",baseline:"top",maxWidth:ar.width-cr-cr}):this.text(ar.text,ar.x+cr,ar.y+cr,{align:"left",baseline:"top",maxWidth:ar.width-cr-cr})),this.internal.__cell__.lastCell=ar,this};er.table=function(ar,lr,cr,Ar,ur){if(rr.call(this),!cr)throw new Error("No data for PDF table.");var dr,mr,pr,yr,hr=[],gr=[],Cr=[],Tr={},Sr={},Nr=[],_r=[],vr=(ur=ur||{}).autoSize||!1,br=ur.printHeaders!==!1,Pr=ur.css&&ur.css["font-size"]!==void 0?16*ur.css["font-size"]:ur.fontSize||12,Er=ur.margins||Object.assign({width:this.getPageWidth()},_e),Rr=typeof ur.padding=="number"?ur.padding:3,Ir=ur.headerBackgroundColor||"#c8c8c8",Qr=ur.headerTextColor||"#000";if(nr.call(this),this.internal.__cell__.printHeaders=br,this.internal.__cell__.margins=Er,this.internal.__cell__.table_font_size=Pr,this.internal.__cell__.padding=Rr,this.internal.__cell__.headerBackgroundColor=Ir,this.internal.__cell__.headerTextColor=Qr,this.setFontSize(Pr),Ar==null)gr=hr=Object.keys(cr[0]),Cr=hr.map(function(){return"left"});else if(Array.isArray(Ar)&&_typeof(Ar[0])==="object")for(hr=Ar.map(function(Xr){return Xr.name}),gr=Ar.map(function(Xr){return Xr.prompt||Xr.name||""}),Cr=Ar.map(function(Xr){return Xr.align||"left"}),dr=0;dr<Ar.length;dr+=1)Sr[Ar[dr].name]=Ar[dr].width*(19.049976/25.4);else Array.isArray(Ar)&&typeof Ar[0]=="string"&&(gr=hr=Ar,Cr=hr.map(function(){return"left"}));if(vr||Array.isArray(Ar)&&typeof Ar[0]=="string")for(dr=0;dr<hr.length;dr+=1){for(Tr[yr=hr[dr]]=cr.map(function(Xr){return Xr[yr]}),this.setFont(void 0,"bold"),Nr.push(this.getTextDimensions(gr[dr],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),mr=Tr[yr],this.setFont(void 0,"normal"),pr=0;pr<mr.length;pr+=1)Nr.push(this.getTextDimensions(mr[pr],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Sr[yr]=Math.max.apply(null,Nr)+Rr+Rr,Nr=[]}if(br){var Ur={};for(dr=0;dr<hr.length;dr+=1)Ur[hr[dr]]={},Ur[hr[dr]].text=gr[dr],Ur[hr[dr]].align=Cr[dr];var Vr=or.call(this,Ur,Sr);_r=hr.map(function(Xr){return new sr(ar,lr,Sr[Xr],Vr,Ur[Xr].text,void 0,Ur[Xr].align)}),this.setTableHeaderRow(_r),this.printHeaderRow(1,!1)}var Wr=Ar.reduce(function(Xr,pn){return Xr[pn.name]=pn.align,Xr},{});for(dr=0;dr<cr.length;dr+=1){"rowStart"in ur&&ur.rowStart instanceof Function&&ur.rowStart({row:dr,data:cr[dr]},this);var Hr=or.call(this,cr[dr],Sr);for(pr=0;pr<hr.length;pr+=1){var $r=cr[dr][hr[pr]];"cellStart"in ur&&ur.cellStart instanceof Function&&ur.cellStart({row:dr,col:pr,data:$r},this),ir.call(this,new sr(ar,lr,Sr[hr[pr]],Hr,$r,dr+2,Wr[hr[pr]]))}}return this.internal.__cell__.table_x=ar,this.internal.__cell__.table_y=lr,this};var or=function(ar,lr){var cr=this.internal.__cell__.padding,Ar=this.internal.__cell__.table_font_size,ur=this.internal.scaleFactor;return Object.keys(ar).map(function(dr){var mr=ar[dr];return this.splitTextToSize(mr.hasOwnProperty("text")?mr.text:mr,lr[dr]-cr-cr)},this).map(function(dr){return this.getLineHeightFactor()*dr.length*Ar/ur+cr+cr},this).reduce(function(dr,mr){return Math.max(dr,mr)},0)};er.setTableHeaderRow=function(ar){rr.call(this),this.internal.__cell__.tableHeaderRow=ar},er.printHeaderRow=function(ar,lr){if(rr.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var cr;if(tr=!0,typeof this.internal.__cell__.headerFunction=="function"){var Ar=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new sr(Ar[0],Ar[1],Ar[2],Ar[3],void 0,-1)}this.setFont(void 0,"bold");for(var ur=[],dr=0;dr<this.internal.__cell__.tableHeaderRow.length;dr+=1){cr=this.internal.__cell__.tableHeaderRow[dr].clone(),lr&&(cr.y=this.internal.__cell__.margins.top||0,ur.push(cr)),cr.lineNumber=ar;var mr=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),ir.call(this,cr),this.setTextColor(mr)}ur.length>0&&this.setTableHeaderRow(ur),this.setFont(void 0,"normal"),tr=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(er){var _e=er.family.replace(/"|'/g,"").toLowerCase(),tr=function(sr){return Pt[sr=sr||"normal"]?sr:"normal"}(er.style),rr=function(sr){if(!sr)return 400;if(typeof sr=="number")return sr>=100&&sr<=900&&sr%100==0?sr:400;if(/^\d00$/.test(sr))return parseInt(sr);switch(sr){case"bold":return 700;case"normal":default:return 400}}(er.weight),nr=function(sr){return typeof It[sr=sr||"normal"]=="number"?sr:"normal"}(er.stretch);return{family:_e,style:tr,weight:rr,stretch:nr,src:er.src||[],ref:er.ref||{name:_e,style:[nr,tr,rr].join(" ")}}}function Ot(er,_e,tr,rr){var nr;for(nr=tr;nr>=0&&nr<_e.length;nr+=rr)if(er[_e[nr]])return er[_e[nr]];for(nr=tr;nr>=0&&nr<_e.length;nr-=rr)if(er[_e[nr]])return er[_e[nr]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(er){return[er.stretch,er.style,er.weight,er.family].join(" ")}function qt(er,_e,tr){for(var rr=(tr=tr||{}).defaultFontFamily||"times",nr=Object.assign({},Bt,tr.genericFontFamilies||{}),sr=null,ir=null,or=0;or<_e.length;++or)if(nr[(sr=jt(_e[or])).family]&&(sr.family=nr[sr.family]),er.hasOwnProperty(sr.family)){ir=er[sr.family];break}if(!(ir=ir||er[rr]))throw new Error("Could not find a font-family for the rule '"+Et(sr)+"' and default family '"+rr+"'.");if(ir=function(ar,lr){if(lr[ar])return lr[ar];var cr=It[ar],Ar=cr<=It.normal?-1:1,ur=Ot(lr,kt,cr,Ar);if(!ur)throw new Error("Could not find a matching font-stretch value for "+ar);return ur}(sr.stretch,ir),ir=function(ar,lr){if(lr[ar])return lr[ar];for(var cr=Pt[ar],Ar=0;Ar<cr.length;++Ar)if(lr[cr[Ar]])return lr[cr[Ar]];throw new Error("Could not find a matching font-style for "+ar)}(sr.style,ir),!(ir=function(ar,lr){if(lr[ar])return lr[ar];if(ar===400&&lr[500])return lr[500];if(ar===500&&lr[400])return lr[400];var cr=Ct[ar],Ar=Ot(lr,Ft,cr,ar<400?-1:1);if(!Ar)throw new Error("Could not find a matching font-weight for value "+ar);return Ar}(sr.weight,ir)))throw new Error("Failed to resolve a font for the rule '"+Et(sr)+"'.");return ir}function Dt(er){return er.trimLeft()}function Rt(er,_e){for(var tr=0;tr<er.length;){if(er.charAt(tr)===_e)return[er.substring(0,tr),er.substring(tr+1)];tr+=1}return null}function Tt(er){var _e=er.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return _e===null?null:[_e[0],er.substring(_e[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(er){var _e,tr,rr,nr,sr,ir,or,ar,lr,cr=function(jr){return jr=jr||{},this.isStrokeTransparent=jr.isStrokeTransparent||!1,this.strokeOpacity=jr.strokeOpacity||1,this.strokeStyle=jr.strokeStyle||"#000000",this.fillStyle=jr.fillStyle||"#000000",this.isFillTransparent=jr.isFillTransparent||!1,this.fillOpacity=jr.fillOpacity||1,this.font=jr.font||"10px sans-serif",this.textBaseline=jr.textBaseline||"alphabetic",this.textAlign=jr.textAlign||"left",this.lineWidth=jr.lineWidth||1,this.lineJoin=jr.lineJoin||"miter",this.lineCap=jr.lineCap||"butt",this.path=jr.path||[],this.transform=jr.transform!==void 0?jr.transform.clone():new ar,this.globalCompositeOperation=jr.globalCompositeOperation||"normal",this.globalAlpha=jr.globalAlpha||1,this.clip_path=jr.clip_path||[],this.currentPoint=jr.currentPoint||new ir,this.miterLimit=jr.miterLimit||10,this.lastPoint=jr.lastPoint||new ir,this.lineDashOffset=jr.lineDashOffset||0,this.lineDash=jr.lineDash||[],this.margin=jr.margin||[0,0,0,0],this.prevPageLastElemOffset=jr.prevPageLastElemOffset||0,this.ignoreClearRect=typeof jr.ignoreClearRect!="boolean"||jr.ignoreClearRect,this};er.events.push(["initialized",function(){this.context2d=new Ar(this),_e=this.internal.f2,tr=this.internal.getCoordinateString,rr=this.internal.getVerticalCoordinateString,nr=this.internal.getHorizontalCoordinate,sr=this.internal.getVerticalCoordinate,ir=this.internal.Point,or=this.internal.Rectangle,ar=this.internal.Matrix,lr=new cr}]);var Ar=function(jr){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Br=jr;Object.defineProperty(this,"pdf",{get:function(){return Br}});var Lr=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Lr},set:function(Cn){Lr=!!Cn}});var Or=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Or},set:function(Cn){Or=!!Cn}});var zr=0;Object.defineProperty(this,"posX",{get:function(){return zr},set:function(Cn){isNaN(Cn)||(zr=Cn)}});var Gr=0;Object.defineProperty(this,"posY",{get:function(){return Gr},set:function(Cn){isNaN(Cn)||(Gr=Cn)}}),Object.defineProperty(this,"margin",{get:function(){return lr.margin},set:function(Cn){var Jr;typeof Cn=="number"?Jr=[Cn,Cn,Cn,Cn]:((Jr=new Array(4))[0]=Cn[0],Jr[1]=Cn.length>=2?Cn[1]:Jr[0],Jr[2]=Cn.length>=3?Cn[2]:Jr[0],Jr[3]=Cn.length>=4?Cn[3]:Jr[1]),lr.margin=Jr}});var Yr=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Yr},set:function(Cn){Yr=Cn}});var dn=0;Object.defineProperty(this,"lastBreak",{get:function(){return dn},set:function(Cn){dn=Cn}});var En=[];Object.defineProperty(this,"pageBreaks",{get:function(){return En},set:function(Cn){En=Cn}}),Object.defineProperty(this,"ctx",{get:function(){return lr},set:function(Cn){Cn instanceof cr&&(lr=Cn)}}),Object.defineProperty(this,"path",{get:function(){return lr.path},set:function(Cn){lr.path=Cn}});var Sn=[];Object.defineProperty(this,"ctxStack",{get:function(){return Sn},set:function(Cn){Sn=Cn}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Cn){var Jr;Jr=ur(Cn),this.ctx.fillStyle=Jr.style,this.ctx.isFillTransparent=Jr.a===0,this.ctx.fillOpacity=Jr.a,this.pdf.setFillColor(Jr.r,Jr.g,Jr.b,{a:Jr.a}),this.pdf.setTextColor(Jr.r,Jr.g,Jr.b,{a:Jr.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Cn){var Jr=ur(Cn);this.ctx.strokeStyle=Jr.style,this.ctx.isStrokeTransparent=Jr.a===0,this.ctx.strokeOpacity=Jr.a,Jr.a===0?this.pdf.setDrawColor(255,255,255):(Jr.a,this.pdf.setDrawColor(Jr.r,Jr.g,Jr.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Cn){["butt","round","square"].indexOf(Cn)!==-1&&(this.ctx.lineCap=Cn,this.pdf.setLineCap(Cn))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Cn){isNaN(Cn)||(this.ctx.lineWidth=Cn,this.pdf.setLineWidth(Cn))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Cn){["bevel","round","miter"].indexOf(Cn)!==-1&&(this.ctx.lineJoin=Cn,this.pdf.setLineJoin(Cn))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Cn){isNaN(Cn)||(this.ctx.miterLimit=Cn,this.pdf.setMiterLimit(Cn))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Cn){this.ctx.textBaseline=Cn}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Cn){["right","end","center","left","start"].indexOf(Cn)!==-1&&(this.ctx.textAlign=Cn)}});var Bn=null;function kn(Cn,Jr){if(Bn===null){var Fn=function(Zr){var hn=[];return Object.keys(Zr).forEach(function(bn){Zr[bn].forEach(function(In){var jn=null;switch(In){case"bold":jn={family:bn,weight:"bold"};break;case"italic":jn={family:bn,style:"italic"};break;case"bolditalic":jn={family:bn,weight:"bold",style:"italic"};break;case"":case"normal":jn={family:bn}}jn!==null&&(jn.ref={name:bn,style:In},hn.push(jn))})}),hn}(Cn.getFontList());Bn=function(Zr){for(var hn={},bn=0;bn<Zr.length;++bn){var In=jt(Zr[bn]),jn=In.family,zn=In.stretch,qn=In.style,Nn=In.weight;hn[jn]=hn[jn]||{},hn[jn][zn]=hn[jn][zn]||{},hn[jn][zn][qn]=hn[jn][zn][qn]||{},hn[jn][zn][qn][Nn]=In}return hn}(Fn.concat(Jr))}return Bn}var Kn=null;Object.defineProperty(this,"fontFaces",{get:function(){return Kn},set:function(Cn){Bn=null,Kn=Cn}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Cn){var Jr;if(this.ctx.font=Cn,(Jr=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Cn))!==null){var Fn=Jr[1];Jr[2];var Zr=Jr[3],hn=Jr[4];Jr[5];var bn=Jr[6],In=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(hn)[2];hn=Math.floor(In==="px"?parseFloat(hn)*this.pdf.internal.scaleFactor:In==="em"?parseFloat(hn)*this.pdf.getFontSize():parseFloat(hn)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(hn);var jn=function(ps){var Ps,ls,Ts=[],Fs=ps.trim();if(Fs==="")return Wt;if(Fs in Mt)return[Mt[Fs]];for(;Fs!=="";){switch(ls=null,Ps=(Fs=Dt(Fs)).charAt(0)){case'"':case"'":ls=Rt(Fs.substring(1),Ps);break;default:ls=Tt(Fs)}if(ls===null||(Ts.push(ls[0]),(Fs=Dt(ls[1]))!==""&&Fs.charAt(0)!==","))return Wt;Fs=Fs.replace(/^,/,"")}return Ts}(bn);if(this.fontFaces){var zn=qt(kn(this.pdf,this.fontFaces),jn.map(function(ps){return{family:ps,stretch:"normal",weight:Zr,style:Fn}}));this.pdf.setFont(zn.ref.name,zn.ref.style)}else{var qn="";(Zr==="bold"||parseInt(Zr,10)>=700||Fn==="bold")&&(qn="bold"),Fn==="italic"&&(qn+="italic"),qn.length===0&&(qn="normal");for(var Nn="",ns={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},rs=0;rs<jn.length;rs++){if(this.pdf.internal.getFont(jn[rs],qn,{noFallback:!0,disableWarning:!0})!==void 0){Nn=jn[rs];break}if(qn==="bolditalic"&&this.pdf.internal.getFont(jn[rs],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Nn=jn[rs],qn="bold";else if(this.pdf.internal.getFont(jn[rs],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Nn=jn[rs],qn="normal";break}}if(Nn===""){for(var Is=0;Is<jn.length;Is++)if(ns[jn[Is]]){Nn=ns[jn[Is]];break}}Nn=Nn===""?"Times":Nn,this.pdf.setFont(Nn,qn)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Cn){this.ctx.globalCompositeOperation=Cn}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Cn){this.ctx.globalAlpha=Cn}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Cn){this.ctx.lineDashOffset=Cn,pn.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Cn){this.ctx.lineDash=Cn,pn.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Cn){this.ctx.ignoreClearRect=!!Cn}})};Ar.prototype.setLineDash=function(jr){this.lineDash=jr},Ar.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},Ar.prototype.fill=function(){Tr.call(this,"fill",!1)},Ar.prototype.stroke=function(){Tr.call(this,"stroke",!1)},Ar.prototype.beginPath=function(){this.path=[{type:"begin"}]},Ar.prototype.moveTo=function(jr,Br){if(isNaN(jr)||isNaN(Br))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Lr=this.ctx.transform.applyToPoint(new ir(jr,Br));this.path.push({type:"mt",x:Lr.x,y:Lr.y}),this.ctx.lastPoint=new ir(jr,Br)},Ar.prototype.closePath=function(){var jr=new ir(0,0),Br=0;for(Br=this.path.length-1;Br!==-1;Br--)if(this.path[Br].type==="begin"&&_typeof(this.path[Br+1])==="object"&&typeof this.path[Br+1].x=="number"){jr=new ir(this.path[Br+1].x,this.path[Br+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new ir(jr.x,jr.y)},Ar.prototype.lineTo=function(jr,Br){if(isNaN(jr)||isNaN(Br))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Lr=this.ctx.transform.applyToPoint(new ir(jr,Br));this.path.push({type:"lt",x:Lr.x,y:Lr.y}),this.ctx.lastPoint=new ir(Lr.x,Lr.y)},Ar.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Tr.call(this,null,!0)},Ar.prototype.quadraticCurveTo=function(jr,Br,Lr,Or){if(isNaN(Lr)||isNaN(Or)||isNaN(jr)||isNaN(Br))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var zr=this.ctx.transform.applyToPoint(new ir(Lr,Or)),Gr=this.ctx.transform.applyToPoint(new ir(jr,Br));this.path.push({type:"qct",x1:Gr.x,y1:Gr.y,x:zr.x,y:zr.y}),this.ctx.lastPoint=new ir(zr.x,zr.y)},Ar.prototype.bezierCurveTo=function(jr,Br,Lr,Or,zr,Gr){if(isNaN(zr)||isNaN(Gr)||isNaN(jr)||isNaN(Br)||isNaN(Lr)||isNaN(Or))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Yr=this.ctx.transform.applyToPoint(new ir(zr,Gr)),dn=this.ctx.transform.applyToPoint(new ir(jr,Br)),En=this.ctx.transform.applyToPoint(new ir(Lr,Or));this.path.push({type:"bct",x1:dn.x,y1:dn.y,x2:En.x,y2:En.y,x:Yr.x,y:Yr.y}),this.ctx.lastPoint=new ir(Yr.x,Yr.y)},Ar.prototype.arc=function(jr,Br,Lr,Or,zr,Gr){if(isNaN(jr)||isNaN(Br)||isNaN(Lr)||isNaN(Or)||isNaN(zr))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Gr=!!Gr,!this.ctx.transform.isIdentity){var Yr=this.ctx.transform.applyToPoint(new ir(jr,Br));jr=Yr.x,Br=Yr.y;var dn=this.ctx.transform.applyToPoint(new ir(0,Lr)),En=this.ctx.transform.applyToPoint(new ir(0,0));Lr=Math.sqrt(Math.pow(dn.x-En.x,2)+Math.pow(dn.y-En.y,2))}Math.abs(zr-Or)>=2*Math.PI&&(Or=0,zr=2*Math.PI),this.path.push({type:"arc",x:jr,y:Br,radius:Lr,startAngle:Or,endAngle:zr,counterclockwise:Gr})},Ar.prototype.arcTo=function(jr,Br,Lr,Or,zr){throw new Error("arcTo not implemented.")},Ar.prototype.rect=function(jr,Br,Lr,Or){if(isNaN(jr)||isNaN(Br)||isNaN(Lr)||isNaN(Or))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(jr,Br),this.lineTo(jr+Lr,Br),this.lineTo(jr+Lr,Br+Or),this.lineTo(jr,Br+Or),this.lineTo(jr,Br),this.lineTo(jr+Lr,Br),this.lineTo(jr,Br)},Ar.prototype.fillRect=function(jr,Br,Lr,Or){if(isNaN(jr)||isNaN(Br)||isNaN(Lr)||isNaN(Or))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!dr.call(this)){var zr={};this.lineCap!=="butt"&&(zr.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(zr.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(jr,Br,Lr,Or),this.fill(),zr.hasOwnProperty("lineCap")&&(this.lineCap=zr.lineCap),zr.hasOwnProperty("lineJoin")&&(this.lineJoin=zr.lineJoin)}},Ar.prototype.strokeRect=function(jr,Br,Lr,Or){if(isNaN(jr)||isNaN(Br)||isNaN(Lr)||isNaN(Or))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");mr.call(this)||(this.beginPath(),this.rect(jr,Br,Lr,Or),this.stroke())},Ar.prototype.clearRect=function(jr,Br,Lr,Or){if(isNaN(jr)||isNaN(Br)||isNaN(Lr)||isNaN(Or))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(jr,Br,Lr,Or))},Ar.prototype.save=function(jr){jr=typeof jr!="boolean"||jr;for(var Br=this.pdf.internal.getCurrentPageInfo().pageNumber,Lr=0;Lr<this.pdf.internal.getNumberOfPages();Lr++)this.pdf.setPage(Lr+1),this.pdf.internal.out("q");if(this.pdf.setPage(Br),jr){this.ctx.fontSize=this.pdf.internal.getFontSize();var Or=new cr(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Or}},Ar.prototype.restore=function(jr){jr=typeof jr!="boolean"||jr;for(var Br=this.pdf.internal.getCurrentPageInfo().pageNumber,Lr=0;Lr<this.pdf.internal.getNumberOfPages();Lr++)this.pdf.setPage(Lr+1),this.pdf.internal.out("Q");this.pdf.setPage(Br),jr&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},Ar.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var ur=function(jr){var Br,Lr,Or,zr;if(jr.isCanvasGradient===!0&&(jr=jr.getColor()),!jr)return{r:0,g:0,b:0,a:0,style:jr};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(jr))Br=0,Lr=0,Or=0,zr=0;else{var Gr=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(jr);if(Gr!==null)Br=parseInt(Gr[1]),Lr=parseInt(Gr[2]),Or=parseInt(Gr[3]),zr=1;else if((Gr=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(jr))!==null)Br=parseInt(Gr[1]),Lr=parseInt(Gr[2]),Or=parseInt(Gr[3]),zr=parseFloat(Gr[4]);else{if(zr=1,typeof jr=="string"&&jr.charAt(0)!=="#"){var Yr=new f(jr);jr=Yr.ok?Yr.toHex():"#000000"}jr.length===4?(Br=jr.substring(1,2),Br+=Br,Lr=jr.substring(2,3),Lr+=Lr,Or=jr.substring(3,4),Or+=Or):(Br=jr.substring(1,3),Lr=jr.substring(3,5),Or=jr.substring(5,7)),Br=parseInt(Br,16),Lr=parseInt(Lr,16),Or=parseInt(Or,16)}}return{r:Br,g:Lr,b:Or,a:zr,style:jr}},dr=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},mr=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};Ar.prototype.fillText=function(jr,Br,Lr,Or){if(isNaN(Br)||isNaN(Lr)||typeof jr!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Or=isNaN(Or)?void 0:Or,!dr.call(this)){var zr=Hr(this.ctx.transform.rotation),Gr=this.ctx.transform.scaleX;Rr.call(this,{text:jr,x:Br,y:Lr,scale:Gr,angle:zr,align:this.textAlign,maxWidth:Or})}},Ar.prototype.strokeText=function(jr,Br,Lr,Or){if(isNaN(Br)||isNaN(Lr)||typeof jr!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!mr.call(this)){Or=isNaN(Or)?void 0:Or;var zr=Hr(this.ctx.transform.rotation),Gr=this.ctx.transform.scaleX;Rr.call(this,{text:jr,x:Br,y:Lr,scale:Gr,renderingMode:"stroke",angle:zr,align:this.textAlign,maxWidth:Or})}},Ar.prototype.measureText=function(jr){if(typeof jr!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Br=this.pdf,Lr=this.pdf.internal.scaleFactor,Or=Br.internal.getFontSize(),zr=Br.getStringUnitWidth(jr)*Or/Br.internal.scaleFactor,Gr=function(Yr){var dn=(Yr=Yr||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return dn}}),this};return new Gr({width:zr*=Math.round(96*Lr/72*1e4)/1e4})},Ar.prototype.scale=function(jr,Br){if(isNaN(jr)||isNaN(Br))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Lr=new ar(jr,0,0,Br,0,0);this.ctx.transform=this.ctx.transform.multiply(Lr)},Ar.prototype.rotate=function(jr){if(isNaN(jr))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Br=new ar(Math.cos(jr),Math.sin(jr),-Math.sin(jr),Math.cos(jr),0,0);this.ctx.transform=this.ctx.transform.multiply(Br)},Ar.prototype.translate=function(jr,Br){if(isNaN(jr)||isNaN(Br))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Lr=new ar(1,0,0,1,jr,Br);this.ctx.transform=this.ctx.transform.multiply(Lr)},Ar.prototype.transform=function(jr,Br,Lr,Or,zr,Gr){if(isNaN(jr)||isNaN(Br)||isNaN(Lr)||isNaN(Or)||isNaN(zr)||isNaN(Gr))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Yr=new ar(jr,Br,Lr,Or,zr,Gr);this.ctx.transform=this.ctx.transform.multiply(Yr)},Ar.prototype.setTransform=function(jr,Br,Lr,Or,zr,Gr){jr=isNaN(jr)?1:jr,Br=isNaN(Br)?0:Br,Lr=isNaN(Lr)?0:Lr,Or=isNaN(Or)?1:Or,zr=isNaN(zr)?0:zr,Gr=isNaN(Gr)?0:Gr,this.ctx.transform=new ar(jr,Br,Lr,Or,zr,Gr)};var pr=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};Ar.prototype.drawImage=function(jr,Br,Lr,Or,zr,Gr,Yr,dn,En){var Sn=this.pdf.getImageProperties(jr),Bn=1,kn=1,Kn=1,Cn=1;Or!==void 0&&dn!==void 0&&(Kn=dn/Or,Cn=En/zr,Bn=Sn.width/Or*dn/Or,kn=Sn.height/zr*En/zr),Gr===void 0&&(Gr=Br,Yr=Lr,Br=0,Lr=0),Or!==void 0&&dn===void 0&&(dn=Or,En=zr),Or===void 0&&dn===void 0&&(dn=Sn.width,En=Sn.height);for(var Jr,Fn=this.ctx.transform.decompose(),Zr=Hr(Fn.rotate.shx),hn=new ar,bn=(hn=(hn=(hn=hn.multiply(Fn.translate)).multiply(Fn.skew)).multiply(Fn.scale)).applyToRectangle(new or(Gr-Br*Kn,Yr-Lr*Cn,Or*Bn,zr*kn)),In=yr.call(this,bn),jn=[],zn=0;zn<In.length;zn+=1)jn.indexOf(In[zn])===-1&&jn.push(In[zn]);if(Cr(jn),this.autoPaging)for(var qn=jn[0],Nn=jn[jn.length-1],ns=qn;ns<Nn+1;ns++){this.pdf.setPage(ns);var rs=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Is=ns===1?this.posY+this.margin[0]:this.margin[0],ps=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ps=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ls=ns===1?0:ps+(ns-2)*Ps;if(this.ctx.clip_path.length!==0){var Ts=this.path;Jr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=gr(Jr,this.posX+this.margin[3],-ls+Is+this.ctx.prevPageLastElemOffset),Sr.call(this,"fill",!0),this.path=Ts}var Fs=JSON.parse(JSON.stringify(bn));Fs=gr([Fs],this.posX+this.margin[3],-ls+Is+this.ctx.prevPageLastElemOffset)[0];var Vs=(ns>qn||ns<Nn)&&pr.call(this);Vs&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rs,Ps,null).clip().discardPath()),this.pdf.addImage(jr,"JPEG",Fs.x,Fs.y,Fs.w,Fs.h,null,null,Zr),Vs&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(jr,"JPEG",bn.x,bn.y,bn.w,bn.h,null,null,Zr)};var yr=function(jr,Br,Lr){var Or=[];Br=Br||this.pdf.internal.pageSize.width,Lr=Lr||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var zr=this.posY+this.ctx.prevPageLastElemOffset;switch(jr.type){default:case"mt":case"lt":Or.push(Math.floor((jr.y+zr)/Lr)+1);break;case"arc":Or.push(Math.floor((jr.y+zr-jr.radius)/Lr)+1),Or.push(Math.floor((jr.y+zr+jr.radius)/Lr)+1);break;case"qct":var Gr=$r(this.ctx.lastPoint.x,this.ctx.lastPoint.y,jr.x1,jr.y1,jr.x,jr.y);Or.push(Math.floor((Gr.y+zr)/Lr)+1),Or.push(Math.floor((Gr.y+Gr.h+zr)/Lr)+1);break;case"bct":var Yr=Xr(this.ctx.lastPoint.x,this.ctx.lastPoint.y,jr.x1,jr.y1,jr.x2,jr.y2,jr.x,jr.y);Or.push(Math.floor((Yr.y+zr)/Lr)+1),Or.push(Math.floor((Yr.y+Yr.h+zr)/Lr)+1);break;case"rect":Or.push(Math.floor((jr.y+zr)/Lr)+1),Or.push(Math.floor((jr.y+jr.h+zr)/Lr)+1)}for(var dn=0;dn<Or.length;dn+=1)for(;this.pdf.internal.getNumberOfPages()<Or[dn];)hr.call(this);return Or},hr=function(){var jr=this.fillStyle,Br=this.strokeStyle,Lr=this.font,Or=this.lineCap,zr=this.lineWidth,Gr=this.lineJoin;this.pdf.addPage(),this.fillStyle=jr,this.strokeStyle=Br,this.font=Lr,this.lineCap=Or,this.lineWidth=zr,this.lineJoin=Gr},gr=function(jr,Br,Lr){for(var Or=0;Or<jr.length;Or++)switch(jr[Or].type){case"bct":jr[Or].x2+=Br,jr[Or].y2+=Lr;case"qct":jr[Or].x1+=Br,jr[Or].y1+=Lr;case"mt":case"lt":case"arc":default:jr[Or].x+=Br,jr[Or].y+=Lr}return jr},Cr=function(jr){return jr.sort(function(Br,Lr){return Br-Lr})},Tr=function(jr,Br){for(var Lr,Or,zr=this.fillStyle,Gr=this.strokeStyle,Yr=this.lineCap,dn=this.lineWidth,En=Math.abs(dn*this.ctx.transform.scaleX),Sn=this.lineJoin,Bn=JSON.parse(JSON.stringify(this.path)),kn=JSON.parse(JSON.stringify(this.path)),Kn=[],Cn=0;Cn<kn.length;Cn++)if(kn[Cn].x!==void 0)for(var Jr=yr.call(this,kn[Cn]),Fn=0;Fn<Jr.length;Fn+=1)Kn.indexOf(Jr[Fn])===-1&&Kn.push(Jr[Fn]);for(var Zr=0;Zr<Kn.length;Zr++)for(;this.pdf.internal.getNumberOfPages()<Kn[Zr];)hr.call(this);if(Cr(Kn),this.autoPaging)for(var hn=Kn[0],bn=Kn[Kn.length-1],In=hn;In<bn+1;In++){this.pdf.setPage(In),this.fillStyle=zr,this.strokeStyle=Gr,this.lineCap=Yr,this.lineWidth=En,this.lineJoin=Sn;var jn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],zn=In===1?this.posY+this.margin[0]:this.margin[0],qn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ns=In===1?0:qn+(In-2)*Nn;if(this.ctx.clip_path.length!==0){var rs=this.path;Lr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=gr(Lr,this.posX+this.margin[3],-ns+zn+this.ctx.prevPageLastElemOffset),Sr.call(this,jr,!0),this.path=rs}if(Or=JSON.parse(JSON.stringify(Bn)),this.path=gr(Or,this.posX+this.margin[3],-ns+zn+this.ctx.prevPageLastElemOffset),Br===!1||In===0){var Is=(In>hn||In<bn)&&pr.call(this);Is&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],jn,Nn,null).clip().discardPath()),Sr.call(this,jr,Br),Is&&this.pdf.restoreGraphicsState()}this.lineWidth=dn}else this.lineWidth=En,Sr.call(this,jr,Br),this.lineWidth=dn;this.path=Bn},Sr=function(jr,Br){if((jr!=="stroke"||Br||!mr.call(this))&&(jr==="stroke"||Br||!dr.call(this))){for(var Lr,Or,zr=[],Gr=this.path,Yr=0;Yr<Gr.length;Yr++){var dn=Gr[Yr];switch(dn.type){case"begin":zr.push({begin:!0});break;case"close":zr.push({close:!0});break;case"mt":zr.push({start:dn,deltas:[],abs:[]});break;case"lt":var En=zr.length;if(Gr[Yr-1]&&!isNaN(Gr[Yr-1].x)&&(Lr=[dn.x-Gr[Yr-1].x,dn.y-Gr[Yr-1].y],En>0)){for(;En>=0;En--)if(zr[En-1].close!==!0&&zr[En-1].begin!==!0){zr[En-1].deltas.push(Lr),zr[En-1].abs.push(dn);break}}break;case"bct":Lr=[dn.x1-Gr[Yr-1].x,dn.y1-Gr[Yr-1].y,dn.x2-Gr[Yr-1].x,dn.y2-Gr[Yr-1].y,dn.x-Gr[Yr-1].x,dn.y-Gr[Yr-1].y],zr[zr.length-1].deltas.push(Lr);break;case"qct":var Sn=Gr[Yr-1].x+2/3*(dn.x1-Gr[Yr-1].x),Bn=Gr[Yr-1].y+2/3*(dn.y1-Gr[Yr-1].y),kn=dn.x+2/3*(dn.x1-dn.x),Kn=dn.y+2/3*(dn.y1-dn.y),Cn=dn.x,Jr=dn.y;Lr=[Sn-Gr[Yr-1].x,Bn-Gr[Yr-1].y,kn-Gr[Yr-1].x,Kn-Gr[Yr-1].y,Cn-Gr[Yr-1].x,Jr-Gr[Yr-1].y],zr[zr.length-1].deltas.push(Lr);break;case"arc":zr.push({deltas:[],abs:[],arc:!0}),Array.isArray(zr[zr.length-1].abs)&&zr[zr.length-1].abs.push(dn)}}Or=Br?null:jr==="stroke"?"stroke":"fill";for(var Fn=!1,Zr=0;Zr<zr.length;Zr++)if(zr[Zr].arc)for(var hn=zr[Zr].abs,bn=0;bn<hn.length;bn++){var In=hn[bn];In.type==="arc"?vr.call(this,In.x,In.y,In.radius,In.startAngle,In.endAngle,In.counterclockwise,void 0,Br,!Fn):Ir.call(this,In.x,In.y),Fn=!0}else if(zr[Zr].close===!0)this.pdf.internal.out("h"),Fn=!1;else if(zr[Zr].begin!==!0){var jn=zr[Zr].start.x,zn=zr[Zr].start.y;Qr.call(this,zr[Zr].deltas,jn,zn),Fn=!0}Or&&br.call(this,Or),Br&&Pr.call(this)}},Nr=function(jr){var Br=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Lr=Br*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return jr-Lr;case"top":return jr+Br-Lr;case"hanging":return jr+Br-2*Lr;case"middle":return jr+Br/2-Lr;case"ideographic":return jr;case"alphabetic":default:return jr}},_r=function(jr){return jr+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};Ar.prototype.createLinearGradient=function(){var jr=function(){};return jr.colorStops=[],jr.addColorStop=function(Br,Lr){this.colorStops.push([Br,Lr])},jr.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},jr.isCanvasGradient=!0,jr},Ar.prototype.createPattern=function(){return this.createLinearGradient()},Ar.prototype.createRadialGradient=function(){return this.createLinearGradient()};var vr=function(jr,Br,Lr,Or,zr,Gr,Yr,dn,En){for(var Sn=Vr.call(this,Lr,Or,zr,Gr),Bn=0;Bn<Sn.length;Bn++){var kn=Sn[Bn];Bn===0&&(En?Er.call(this,kn.x1+jr,kn.y1+Br):Ir.call(this,kn.x1+jr,kn.y1+Br)),Ur.call(this,jr,Br,kn.x2,kn.y2,kn.x3,kn.y3,kn.x4,kn.y4)}dn?Pr.call(this):br.call(this,Yr)},br=function(jr){switch(jr){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Pr=function(){this.pdf.clip(),this.pdf.discardPath()},Er=function(jr,Br){this.pdf.internal.out(tr(jr)+" "+rr(Br)+" m")},Rr=function(jr){var Br;switch(jr.align){case"right":case"end":Br="right";break;case"center":Br="center";break;case"left":case"start":default:Br="left"}var Lr=this.pdf.getTextDimensions(jr.text),Or=Nr.call(this,jr.y),zr=_r.call(this,Or)-Lr.h,Gr=this.ctx.transform.applyToPoint(new ir(jr.x,Or)),Yr=this.ctx.transform.decompose(),dn=new ar;dn=(dn=(dn=dn.multiply(Yr.translate)).multiply(Yr.skew)).multiply(Yr.scale);for(var En,Sn,Bn,kn=this.ctx.transform.applyToRectangle(new or(jr.x,Or,Lr.w,Lr.h)),Kn=dn.applyToRectangle(new or(jr.x,zr,Lr.w,Lr.h)),Cn=yr.call(this,Kn),Jr=[],Fn=0;Fn<Cn.length;Fn+=1)Jr.indexOf(Cn[Fn])===-1&&Jr.push(Cn[Fn]);if(Cr(Jr),this.autoPaging)for(var Zr=Jr[0],hn=Jr[Jr.length-1],bn=Zr;bn<hn+1;bn++){this.pdf.setPage(bn);var In=bn===1?this.posY+this.margin[0]:this.margin[0],jn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zn=this.pdf.internal.pageSize.height-this.margin[2],qn=zn-this.margin[0],Nn=this.pdf.internal.pageSize.width-this.margin[1],ns=Nn-this.margin[3],rs=bn===1?0:jn+(bn-2)*qn;if(this.ctx.clip_path.length!==0){var Is=this.path;En=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=gr(En,this.posX+this.margin[3],-1*rs+In),Sr.call(this,"fill",!0),this.path=Is}var ps=gr([JSON.parse(JSON.stringify(Kn))],this.posX+this.margin[3],-rs+In+this.ctx.prevPageLastElemOffset)[0];jr.scale>=.01&&(Sn=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Sn*jr.scale),Bn=this.lineWidth,this.lineWidth=Bn*jr.scale);var Ps=this.autoPaging!=="text";if(Ps||ps.y+ps.h<=zn){if(Ps||ps.y>=In&&ps.x<=Nn){var ls=Ps?jr.text:this.pdf.splitTextToSize(jr.text,jr.maxWidth||Nn-ps.x)[0],Ts=gr([JSON.parse(JSON.stringify(kn))],this.posX+this.margin[3],-rs+In+this.ctx.prevPageLastElemOffset)[0],Fs=Ps&&(bn>Zr||bn<hn)&&pr.call(this);Fs&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ns,qn,null).clip().discardPath()),this.pdf.text(ls,Ts.x,Ts.y,{angle:jr.angle,align:Br,renderingMode:jr.renderingMode}),Fs&&this.pdf.restoreGraphicsState()}}else ps.y<zn&&(this.ctx.prevPageLastElemOffset+=zn-ps.y);jr.scale>=.01&&(this.pdf.setFontSize(Sn),this.lineWidth=Bn)}else jr.scale>=.01&&(Sn=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Sn*jr.scale),Bn=this.lineWidth,this.lineWidth=Bn*jr.scale),this.pdf.text(jr.text,Gr.x+this.posX,Gr.y+this.posY,{angle:jr.angle,align:Br,renderingMode:jr.renderingMode,maxWidth:jr.maxWidth}),jr.scale>=.01&&(this.pdf.setFontSize(Sn),this.lineWidth=Bn)},Ir=function(jr,Br,Lr,Or){Lr=Lr||0,Or=Or||0,this.pdf.internal.out(tr(jr+Lr)+" "+rr(Br+Or)+" l")},Qr=function(jr,Br,Lr){return this.pdf.lines(jr,Br,Lr,null,null)},Ur=function(jr,Br,Lr,Or,zr,Gr,Yr,dn){this.pdf.internal.out([_e(nr(Lr+jr)),_e(sr(Or+Br)),_e(nr(zr+jr)),_e(sr(Gr+Br)),_e(nr(Yr+jr)),_e(sr(dn+Br)),"c"].join(" "))},Vr=function(jr,Br,Lr,Or){for(var zr=2*Math.PI,Gr=Math.PI/2;Br>Lr;)Br-=zr;var Yr=Math.abs(Lr-Br);Yr<zr&&Or&&(Yr=zr-Yr);for(var dn=[],En=Or?-1:1,Sn=Br;Yr>1e-5;){var Bn=Sn+En*Math.min(Yr,Gr);dn.push(Wr.call(this,jr,Sn,Bn)),Yr-=Math.abs(Bn-Sn),Sn=Bn}return dn},Wr=function(jr,Br,Lr){var Or=(Lr-Br)/2,zr=jr*Math.cos(Or),Gr=jr*Math.sin(Or),Yr=zr,dn=-Gr,En=Yr*Yr+dn*dn,Sn=En+Yr*zr+dn*Gr,Bn=4/3*(Math.sqrt(2*En*Sn)-Sn)/(Yr*Gr-dn*zr),kn=Yr-Bn*dn,Kn=dn+Bn*Yr,Cn=kn,Jr=-Kn,Fn=Or+Br,Zr=Math.cos(Fn),hn=Math.sin(Fn);return{x1:jr*Math.cos(Br),y1:jr*Math.sin(Br),x2:kn*Zr-Kn*hn,y2:kn*hn+Kn*Zr,x3:Cn*Zr-Jr*hn,y3:Cn*hn+Jr*Zr,x4:jr*Math.cos(Lr),y4:jr*Math.sin(Lr)}},Hr=function(jr){return 180*jr/Math.PI},$r=function(jr,Br,Lr,Or,zr,Gr){var Yr=jr+.5*(Lr-jr),dn=Br+.5*(Or-Br),En=zr+.5*(Lr-zr),Sn=Gr+.5*(Or-Gr),Bn=Math.min(jr,zr,Yr,En),kn=Math.max(jr,zr,Yr,En),Kn=Math.min(Br,Gr,dn,Sn),Cn=Math.max(Br,Gr,dn,Sn);return new or(Bn,Kn,kn-Bn,Cn-Kn)},Xr=function(jr,Br,Lr,Or,zr,Gr,Yr,dn){var En,Sn,Bn,kn,Kn,Cn,Jr,Fn,Zr,hn,bn,In,jn,zn,qn=Lr-jr,Nn=Or-Br,ns=zr-Lr,rs=Gr-Or,Is=Yr-zr,ps=dn-Gr;for(Sn=0;Sn<41;Sn++)Zr=(Jr=(Bn=jr+(En=Sn/40)*qn)+En*((Kn=Lr+En*ns)-Bn))+En*(Kn+En*(zr+En*Is-Kn)-Jr),hn=(Fn=(kn=Br+En*Nn)+En*((Cn=Or+En*rs)-kn))+En*(Cn+En*(Gr+En*ps-Cn)-Fn),Sn==0?(bn=Zr,In=hn,jn=Zr,zn=hn):(bn=Math.min(bn,Zr),In=Math.min(In,hn),jn=Math.max(jn,Zr),zn=Math.max(zn,hn));return new or(Math.round(bn),Math.round(In),Math.round(jn-bn),Math.round(zn-In))},pn=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var jr,Br,Lr=(jr=this.ctx.lineDash,Br=this.ctx.lineDashOffset,JSON.stringify({lineDash:jr,lineDashOffset:Br}));this.prevLineDash!==Lr&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Lr)}}})(E.API),function(er){var _e=function(sr){var ir,or,ar,lr,cr,Ar,ur,dr,mr,pr;for(or=[],ar=0,lr=(sr+=ir="\0\0\0\0".slice(sr.length%4||4)).length;lr>ar;ar+=4)(cr=(sr.charCodeAt(ar)<<24)+(sr.charCodeAt(ar+1)<<16)+(sr.charCodeAt(ar+2)<<8)+sr.charCodeAt(ar+3))!==0?(Ar=(cr=((cr=((cr=((cr=(cr-(pr=cr%85))/85)-(mr=cr%85))/85)-(dr=cr%85))/85)-(ur=cr%85))/85)%85,or.push(Ar+33,ur+33,dr+33,mr+33,pr+33)):or.push(122);return function(yr,hr){for(var gr=hr;gr>0;gr--)yr.pop()}(or,ir.length),String.fromCharCode.apply(String,or)+"~>"},tr=function(sr){var ir,or,ar,lr,cr,Ar=String,ur="length",dr=255,mr="charCodeAt",pr="slice",yr="replace";for(sr[pr](-2),sr=sr[pr](0,-2)[yr](/\s/g,"")[yr]("z","!!!!!"),ar=[],lr=0,cr=(sr+=ir="uuuuu"[pr](sr[ur]%5||5))[ur];cr>lr;lr+=5)or=52200625*(sr[mr](lr)-33)+614125*(sr[mr](lr+1)-33)+7225*(sr[mr](lr+2)-33)+85*(sr[mr](lr+3)-33)+(sr[mr](lr+4)-33),ar.push(dr&or>>24,dr&or>>16,dr&or>>8,dr&or);return function(hr,gr){for(var Cr=gr;Cr>0;Cr--)hr.pop()}(ar,ir[ur]),Ar.fromCharCode.apply(Ar,ar)},rr=function(sr){var ir=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((sr=sr.replace(/\s/g,"")).indexOf(">")!==-1&&(sr=sr.substr(0,sr.indexOf(">"))),sr.length%2&&(sr+="0"),ir.test(sr)===!1)return"";for(var or="",ar=0;ar<sr.length;ar+=2)or+=String.fromCharCode("0x"+(sr[ar]+sr[ar+1]));return or},nr=function(sr){for(var ir=new Uint8Array(sr.length),or=sr.length;or--;)ir[or]=sr.charCodeAt(or);return sr=(ir=zlibSync(ir)).reduce(function(ar,lr){return ar+String.fromCharCode(lr)},"")};er.processDataByFilters=function(sr,ir){var or=0,ar=sr||"",lr=[];for(typeof(ir=ir||[])=="string"&&(ir=[ir]),or=0;or<ir.length;or+=1)switch(ir[or]){case"ASCII85Decode":case"/ASCII85Decode":ar=tr(ar),lr.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":ar=_e(ar),lr.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":ar=rr(ar),lr.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":ar=ar.split("").map(function(cr){return("0"+cr.charCodeAt().toString(16)).slice(-2)}).join("")+">",lr.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":ar=nr(ar),lr.push("/FlateDecode");break;default:throw new Error('The filter: "'+ir[or]+'" is not implemented')}return{data:ar,reverseChain:lr.reverse().join(" ")}}}(E.API),function(er){er.loadFile=function(_e,tr,rr){return function(nr,sr,ir){sr=sr!==!1,ir=typeof ir=="function"?ir:function(){};var or=void 0;try{or=function(ar,lr,cr){var Ar=new XMLHttpRequest,ur=0,dr=function(mr){var pr=mr.length,yr=[],hr=String.fromCharCode;for(ur=0;ur<pr;ur+=1)yr.push(hr(255&mr.charCodeAt(ur)));return yr.join("")};if(Ar.open("GET",ar,!lr),Ar.overrideMimeType("text/plain; charset=x-user-defined"),lr===!1&&(Ar.onload=function(){Ar.status===200?cr(dr(this.responseText)):cr(void 0)}),Ar.send(null),lr&&Ar.status===200)return dr(Ar.responseText)}(nr,sr,ir)}catch{}return or}(_e,tr,rr)},er.loadImageFile=er.loadFile}(E.API),function(er){function _e(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>Promise.resolve().then(()=>html2canvas_esm),[])).catch(function(ir){return Promise.reject(new Error("Could not load html2canvas: "+ir))}).then(function(ir){return ir.default?ir.default:ir})}function tr(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es-BFmuJLeH.js"),[])).catch(function(ir){return Promise.reject(new Error("Could not load dompurify: "+ir))}).then(function(ir){return ir.default?ir.default:ir})}var rr=function(ir){var or=_typeof(ir);return or==="undefined"?"undefined":or==="string"||ir instanceof String?"string":or==="number"||ir instanceof Number?"number":or==="function"||ir instanceof Function?"function":ir&&ir.constructor===Array?"array":ir&&ir.nodeType===1?"element":or==="object"?"object":"unknown"},nr=function(ir,or){var ar=document.createElement(ir);for(var lr in or.className&&(ar.className=or.className),or.innerHTML&&or.dompurify&&(ar.innerHTML=or.dompurify.sanitize(or.innerHTML)),or.style)ar.style[lr]=or.style[lr];return ar},sr=function ir(or){var ar=Object.assign(ir.convert(Promise.resolve()),JSON.parse(JSON.stringify(ir.template))),lr=ir.convert(Promise.resolve(),ar);return lr=(lr=lr.setProgress(1,ir,1,[ir])).set(or)};(sr.prototype=Object.create(Promise.prototype)).constructor=sr,sr.convert=function(ir,or){return ir.__proto__=or||sr.prototype,ir},sr.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},sr.prototype.from=function(ir,or){return this.then(function(){switch(or=or||function(ar){switch(rr(ar)){case"string":return"string";case"element":return ar.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(ir)){case"string":return this.then(tr).then(function(ar){return this.set({src:nr("div",{innerHTML:ir,dompurify:ar})})});case"element":return this.set({src:ir});case"canvas":return this.set({canvas:ir});case"img":return this.set({img:ir});default:return this.error("Unknown source type.")}})},sr.prototype.to=function(ir){switch(ir){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},sr.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var ir={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},or=function ar(lr,cr){for(var Ar=lr.nodeType===3?document.createTextNode(lr.nodeValue):lr.cloneNode(!1),ur=lr.firstChild;ur;ur=ur.nextSibling)cr!==!0&&ur.nodeType===1&&ur.nodeName==="SCRIPT"||Ar.appendChild(ar(ur,cr));return lr.nodeType===1&&(lr.nodeName==="CANVAS"?(Ar.width=lr.width,Ar.height=lr.height,Ar.getContext("2d").drawImage(lr,0,0)):lr.nodeName!=="TEXTAREA"&&lr.nodeName!=="SELECT"||(Ar.value=lr.value),Ar.addEventListener("load",function(){Ar.scrollTop=lr.scrollTop,Ar.scrollLeft=lr.scrollLeft},!0)),Ar}(this.prop.src,this.opt.html2canvas.javascriptEnabled);or.tagName==="BODY"&&(ir.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=nr("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=nr("div",{className:"html2pdf__container",style:ir}),this.prop.container.appendChild(or),this.prop.container.firstChild.appendChild(nr("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},sr.prototype.toCanvas=function(){var ir=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(ir).then(_e).then(function(or){var ar=Object.assign({},this.opt.html2canvas);return delete ar.onrendered,or(this.prop.container,ar)}).then(function(or){(this.opt.html2canvas.onrendered||function(){})(or),this.prop.canvas=or,document.body.removeChild(this.prop.overlay)})},sr.prototype.toContext2d=function(){var ir=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(ir).then(_e).then(function(or){var ar=this.opt.jsPDF,lr=this.opt.fontFaces,cr=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,Ar=Object.assign({async:!0,allowTaint:!0,scale:cr,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete Ar.onrendered,ar.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,ar.context2d.posX=this.opt.x,ar.context2d.posY=this.opt.y,ar.context2d.margin=this.opt.margin,ar.context2d.fontFaces=lr,lr)for(var ur=0;ur<lr.length;++ur){var dr=lr[ur],mr=dr.src.find(function(pr){return pr.format==="truetype"});mr&&ar.addFont(mr.url,dr.ref.name,dr.ref.style)}return Ar.windowHeight=Ar.windowHeight||0,Ar.windowHeight=Ar.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):Ar.windowHeight,ar.context2d.save(!0),or(this.prop.container,Ar)}).then(function(or){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(or),this.prop.canvas=or,document.body.removeChild(this.prop.overlay)})},sr.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var ir=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=ir})},sr.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},sr.prototype.output=function(ir,or,ar){return(ar=ar||"pdf").toLowerCase()==="img"||ar.toLowerCase()==="image"?this.outputImg(ir,or):this.outputPdf(ir,or)},sr.prototype.outputPdf=function(ir,or){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(ir,or)})},sr.prototype.outputImg=function(ir){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(ir){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+ir+'" is not supported.'}})},sr.prototype.save=function(ir){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(ir?{filename:ir}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},sr.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},sr.prototype.set=function(ir){if(rr(ir)!=="object")return this;var or=Object.keys(ir||{}).map(function(ar){if(ar in sr.template.prop)return function(){this.prop[ar]=ir[ar]};switch(ar){case"margin":return this.setMargin.bind(this,ir.margin);case"jsPDF":return function(){return this.opt.jsPDF=ir.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,ir.pageSize);default:return function(){this.opt[ar]=ir[ar]}}},this);return this.then(function(){return this.thenList(or)})},sr.prototype.get=function(ir,or){return this.then(function(){var ar=ir in sr.template.prop?this.prop[ir]:this.opt[ir];return or?or(ar):ar})},sr.prototype.setMargin=function(ir){return this.then(function(){switch(rr(ir)){case"number":ir=[ir,ir,ir,ir];case"array":if(ir.length===2&&(ir=[ir[0],ir[1],ir[0],ir[1]]),ir.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=ir}).then(this.setPageSize)},sr.prototype.setPageSize=function(ir){function or(ar,lr){return Math.floor(ar*lr/72*96)}return this.then(function(){(ir=ir||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(ir.inner={width:ir.width-this.opt.margin[1]-this.opt.margin[3],height:ir.height-this.opt.margin[0]-this.opt.margin[2]},ir.inner.px={width:or(ir.inner.width,ir.k),height:or(ir.inner.height,ir.k)},ir.inner.ratio=ir.inner.height/ir.inner.width),this.prop.pageSize=ir})},sr.prototype.setProgress=function(ir,or,ar,lr){return ir!=null&&(this.progress.val=ir),or!=null&&(this.progress.state=or),ar!=null&&(this.progress.n=ar),lr!=null&&(this.progress.stack=lr),this.progress.ratio=this.progress.val/this.progress.state,this},sr.prototype.updateProgress=function(ir,or,ar,lr){return this.setProgress(ir?this.progress.val+ir:null,or||null,ar?this.progress.n+ar:null,lr?this.progress.stack.concat(lr):null)},sr.prototype.then=function(ir,or){var ar=this;return this.thenCore(ir,or,function(lr,cr){return ar.updateProgress(null,null,1,[lr]),Promise.prototype.then.call(this,function(Ar){return ar.updateProgress(null,lr),Ar}).then(lr,cr).then(function(Ar){return ar.updateProgress(1),Ar})})},sr.prototype.thenCore=function(ir,or,ar){ar=ar||Promise.prototype.then,ir&&(ir=ir.bind(this)),or&&(or=or.bind(this));var lr=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:sr.convert(Object.assign({},this),Promise.prototype),cr=ar.call(lr,ir,or);return sr.convert(cr,this.__proto__)},sr.prototype.thenExternal=function(ir,or){return Promise.prototype.then.call(this,ir,or)},sr.prototype.thenList=function(ir){var or=this;return ir.forEach(function(ar){or=or.thenCore(ar)}),or},sr.prototype.catch=function(ir){ir&&(ir=ir.bind(this));var or=Promise.prototype.catch.call(this,ir);return sr.convert(or,this)},sr.prototype.catchExternal=function(ir){return Promise.prototype.catch.call(this,ir)},sr.prototype.error=function(ir){return this.then(function(){throw new Error(ir)})},sr.prototype.using=sr.prototype.set,sr.prototype.saveAs=sr.prototype.save,sr.prototype.export=sr.prototype.output,sr.prototype.run=sr.prototype.then,E.getPageSize=function(ir,or,ar){if(_typeof(ir)==="object"){var lr=ir;ir=lr.orientation,or=lr.unit||or,ar=lr.format||ar}or=or||"mm",ar=ar||"a4",ir=(""+(ir||"P")).toLowerCase();var cr,Ar=(""+ar).toLowerCase(),ur={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(or){case"pt":cr=1;break;case"mm":cr=72/25.4;break;case"cm":cr=72/2.54;break;case"in":cr=72;break;case"px":cr=.75;break;case"pc":case"em":cr=12;break;case"ex":cr=6;break;default:throw"Invalid unit: "+or}var dr,mr=0,pr=0;if(ur.hasOwnProperty(Ar))mr=ur[Ar][1]/cr,pr=ur[Ar][0]/cr;else try{mr=ar[1],pr=ar[0]}catch{throw new Error("Invalid format: "+ar)}if(ir==="p"||ir==="portrait")ir="p",pr>mr&&(dr=pr,pr=mr,mr=dr);else{if(ir!=="l"&&ir!=="landscape")throw"Invalid orientation: "+ir;ir="l",mr>pr&&(dr=pr,pr=mr,mr=dr)}return{width:pr,height:mr,unit:or,k:cr,orientation:ir}},er.html=function(ir,or){(or=or||{}).callback=or.callback||function(){},or.html2canvas=or.html2canvas||{},or.html2canvas.canvas=or.html2canvas.canvas||this.canvas,or.jsPDF=or.jsPDF||this,or.fontFaces=or.fontFaces?or.fontFaces.map(jt):null;var ar=new sr(or);return or.worker?ar:ar.from(ir).doCallback()}}(E.API),E.API.addJS=function(er){return Ht=er,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(er){var _e;er.events.push(["postPutResources",function(){var tr=this,rr=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var nr=tr.outline.render().split(/\r\n/),sr=0;sr<nr.length;sr++){var ir=nr[sr],or=rr.exec(ir);if(or!=null){var ar=or[1];tr.internal.newObjectDeferredBegin(ar,!1)}tr.internal.write(ir)}if(this.outline.createNamedDestinations){var lr=this.internal.pages.length,cr=[];for(sr=0;sr<lr;sr++){var Ar=tr.internal.newObject();cr.push(Ar);var ur=tr.internal.getPageInfo(sr+1);tr.internal.write("<< /D["+ur.objId+" 0 R /XYZ null null null]>> endobj")}var dr=tr.internal.newObject();for(tr.internal.write("<< /Names [ "),sr=0;sr<cr.length;sr++)tr.internal.write("(page_"+(sr+1)+")"+cr[sr]+" 0 R");tr.internal.write(" ] >>","endobj"),_e=tr.internal.newObject(),tr.internal.write("<< /Dests "+dr+" 0 R"),tr.internal.write(">>","endobj")}}]),er.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+_e+" 0 R"))}]),er.events.push(["initialized",function(){var tr=this;tr.outline={createNamedDestinations:!1,root:{children:[]}},tr.outline.add=function(rr,nr,sr){var ir={title:nr,options:sr,children:[]};return rr==null&&(rr=this.root),rr.children.push(ir),ir},tr.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=tr,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},tr.outline.genIds_r=function(rr){rr.id=tr.internal.newObjectDeferred();for(var nr=0;nr<rr.children.length;nr++)this.genIds_r(rr.children[nr])},tr.outline.renderRoot=function(rr){this.objStart(rr),this.line("/Type /Outlines"),rr.children.length>0&&(this.line("/First "+this.makeRef(rr.children[0])),this.line("/Last "+this.makeRef(rr.children[rr.children.length-1]))),this.line("/Count "+this.count_r({count:0},rr)),this.objEnd()},tr.outline.renderItems=function(rr){for(var nr=this.ctx.pdf.internal.getVerticalCoordinateString,sr=0;sr<rr.children.length;sr++){var ir=rr.children[sr];this.objStart(ir),this.line("/Title "+this.makeString(ir.title)),this.line("/Parent "+this.makeRef(rr)),sr>0&&this.line("/Prev "+this.makeRef(rr.children[sr-1])),sr<rr.children.length-1&&this.line("/Next "+this.makeRef(rr.children[sr+1])),ir.children.length>0&&(this.line("/First "+this.makeRef(ir.children[0])),this.line("/Last "+this.makeRef(ir.children[ir.children.length-1])));var or=this.count=this.count_r({count:0},ir);if(or>0&&this.line("/Count "+or),ir.options&&ir.options.pageNumber){var ar=tr.internal.getPageInfo(ir.options.pageNumber);this.line("/Dest ["+ar.objId+" 0 R /XYZ 0 "+nr(0)+" 0]")}this.objEnd()}for(var lr=0;lr<rr.children.length;lr++)this.renderItems(rr.children[lr])},tr.outline.line=function(rr){this.ctx.val+=rr+`\r
`},tr.outline.makeRef=function(rr){return rr.id+" 0 R"},tr.outline.makeString=function(rr){return"("+tr.internal.pdfEscape(rr)+")"},tr.outline.objStart=function(rr){this.ctx.val+=`\r
`+rr.id+` 0 obj\r
<<\r
`},tr.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},tr.outline.count_r=function(rr,nr){for(var sr=0;sr<nr.children.length;sr++)rr.count++,this.count_r(rr,nr.children[sr]);return rr.count}}])}(E.API),function(er){var _e=[192,193,194,195,196,197,198,199];er.processJPEG=function(tr,rr,nr,sr,ir,or){var ar,lr=this.decode.DCT_DECODE,cr=null;if(typeof tr=="string"||this.__addimage__.isArrayBuffer(tr)||this.__addimage__.isArrayBufferView(tr)){switch(tr=ir||tr,tr=this.__addimage__.isArrayBuffer(tr)?new Uint8Array(tr):tr,(ar=function(Ar){for(var ur,dr=256*Ar.charCodeAt(4)+Ar.charCodeAt(5),mr=Ar.length,pr={width:0,height:0,numcomponents:1},yr=4;yr<mr;yr+=2){if(yr+=dr,_e.indexOf(Ar.charCodeAt(yr+1))!==-1){ur=256*Ar.charCodeAt(yr+5)+Ar.charCodeAt(yr+6),pr={width:256*Ar.charCodeAt(yr+7)+Ar.charCodeAt(yr+8),height:ur,numcomponents:Ar.charCodeAt(yr+9)};break}dr=256*Ar.charCodeAt(yr+2)+Ar.charCodeAt(yr+3)}return pr}(tr=this.__addimage__.isArrayBufferView(tr)?this.__addimage__.arrayBufferToBinaryString(tr):tr)).numcomponents){case 1:or=this.color_spaces.DEVICE_GRAY;break;case 4:or=this.color_spaces.DEVICE_CMYK;break;case 3:or=this.color_spaces.DEVICE_RGB}cr={data:tr,width:ar.width,height:ar.height,colorSpace:or,bitsPerComponent:8,filter:lr,index:rr,alias:nr}}return cr}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var er,_e,tr;function rr(sr){var ir,or,ar,lr,cr,Ar,ur,dr,mr,pr,yr,hr,gr,Cr;for(this.data=sr,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},Ar=null;;){switch(ir=this.readUInt32(),mr=(function(){var Tr,Sr;for(Sr=[],Tr=0;Tr<4;++Tr)Sr.push(String.fromCharCode(this.data[this.pos++]));return Sr}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(ir);break;case"fcTL":Ar&&this.animation.frames.push(Ar),this.pos+=4,Ar={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},cr=this.readUInt16(),lr=this.readUInt16()||100,Ar.delay=1e3*cr/lr,Ar.disposeOp=this.data[this.pos++],Ar.blendOp=this.data[this.pos++],Ar.data=[];break;case"IDAT":case"fdAT":for(mr==="fdAT"&&(this.pos+=4,ir-=4),sr=(Ar!=null?Ar.data:void 0)||this.imgData,hr=0;0<=ir?hr<ir:hr>ir;0<=ir?++hr:--hr)sr.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(ar=this.palette.length/3,this.transparency.indexed=this.read(ir),this.transparency.indexed.length>ar)throw new Error("More transparent colors than palette size");if((pr=ar-this.transparency.indexed.length)>0)for(gr=0;0<=pr?gr<pr:gr>pr;0<=pr?++gr:--gr)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(ir)[0];break;case 2:this.transparency.rgb=this.read(ir)}break;case"tEXt":ur=(yr=this.read(ir)).indexOf(0),dr=String.fromCharCode.apply(String,yr.slice(0,ur)),this.text[dr]=String.fromCharCode.apply(String,yr.slice(ur+1));break;case"IEND":return Ar&&this.animation.frames.push(Ar),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(Cr=this.colorType)===4||Cr===6,or=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*or,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=ir}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}rr.prototype.read=function(sr){var ir,or;for(or=[],ir=0;0<=sr?ir<sr:ir>sr;0<=sr?++ir:--ir)or.push(this.data[this.pos++]);return or},rr.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},rr.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},rr.prototype.decodePixels=function(sr){var ir=this.pixelBitlength/8,or=new Uint8Array(this.width*this.height*ir),ar=0,lr=this;if(sr==null&&(sr=this.imgData),sr.length===0)return new Uint8Array(0);function cr(Ar,ur,dr,mr){var pr,yr,hr,gr,Cr,Tr,Sr,Nr,_r,vr,br,Pr,Er,Rr,Ir,Qr,Ur,Vr,Wr,Hr,$r,Xr=Math.ceil((lr.width-Ar)/dr),pn=Math.ceil((lr.height-ur)/mr),jr=lr.width==Xr&&lr.height==pn;for(Rr=ir*Xr,Pr=jr?or:new Uint8Array(Rr*pn),Tr=sr.length,Er=0,yr=0;Er<pn&&ar<Tr;){switch(sr[ar++]){case 0:for(gr=Ur=0;Ur<Rr;gr=Ur+=1)Pr[yr++]=sr[ar++];break;case 1:for(gr=Vr=0;Vr<Rr;gr=Vr+=1)pr=sr[ar++],Cr=gr<ir?0:Pr[yr-ir],Pr[yr++]=(pr+Cr)%256;break;case 2:for(gr=Wr=0;Wr<Rr;gr=Wr+=1)pr=sr[ar++],hr=(gr-gr%ir)/ir,Ir=Er&&Pr[(Er-1)*Rr+hr*ir+gr%ir],Pr[yr++]=(Ir+pr)%256;break;case 3:for(gr=Hr=0;Hr<Rr;gr=Hr+=1)pr=sr[ar++],hr=(gr-gr%ir)/ir,Cr=gr<ir?0:Pr[yr-ir],Ir=Er&&Pr[(Er-1)*Rr+hr*ir+gr%ir],Pr[yr++]=(pr+Math.floor((Cr+Ir)/2))%256;break;case 4:for(gr=$r=0;$r<Rr;gr=$r+=1)pr=sr[ar++],hr=(gr-gr%ir)/ir,Cr=gr<ir?0:Pr[yr-ir],Er===0?Ir=Qr=0:(Ir=Pr[(Er-1)*Rr+hr*ir+gr%ir],Qr=hr&&Pr[(Er-1)*Rr+(hr-1)*ir+gr%ir]),Sr=Cr+Ir-Qr,Nr=Math.abs(Sr-Cr),vr=Math.abs(Sr-Ir),br=Math.abs(Sr-Qr),_r=Nr<=vr&&Nr<=br?Cr:vr<=br?Ir:Qr,Pr[yr++]=(pr+_r)%256;break;default:throw new Error("Invalid filter algorithm: "+sr[ar-1])}if(!jr){var Br=((ur+Er*mr)*lr.width+Ar)*ir,Lr=Er*Rr;for(gr=0;gr<Xr;gr+=1){for(var Or=0;Or<ir;Or+=1)or[Br++]=Pr[Lr++];Br+=(dr-1)*ir}}Er++}}return sr=unzlibSync(sr),lr.interlaceMethod==1?(cr(0,0,8,8),cr(4,0,8,8),cr(0,4,4,8),cr(2,0,4,4),cr(0,2,2,4),cr(1,0,2,2),cr(0,1,1,2)):cr(0,0,1,1),or},rr.prototype.decodePalette=function(){var sr,ir,or,ar,lr,cr,Ar,ur,dr;for(or=this.palette,cr=this.transparency.indexed||[],lr=new Uint8Array((cr.length||0)+or.length),ar=0,sr=0,ir=Ar=0,ur=or.length;Ar<ur;ir=Ar+=3)lr[ar++]=or[ir],lr[ar++]=or[ir+1],lr[ar++]=or[ir+2],lr[ar++]=(dr=cr[sr++])!=null?dr:255;return lr},rr.prototype.copyToImageData=function(sr,ir){var or,ar,lr,cr,Ar,ur,dr,mr,pr,yr,hr;if(ar=this.colors,pr=null,or=this.hasAlphaChannel,this.palette.length&&(pr=(hr=this._decodedPalette)!=null?hr:this._decodedPalette=this.decodePalette(),ar=4,or=!0),mr=(lr=sr.data||sr).length,Ar=pr||ir,cr=ur=0,ar===1)for(;cr<mr;)dr=pr?4*ir[cr/4]:ur,yr=Ar[dr++],lr[cr++]=yr,lr[cr++]=yr,lr[cr++]=yr,lr[cr++]=or?Ar[dr++]:255,ur=dr;else for(;cr<mr;)dr=pr?4*ir[cr/4]:ur,lr[cr++]=Ar[dr++],lr[cr++]=Ar[dr++],lr[cr++]=Ar[dr++],lr[cr++]=or?Ar[dr++]:255,ur=dr},rr.prototype.decode=function(){var sr;return sr=new Uint8Array(this.width*this.height*4),this.copyToImageData(sr,this.decodePixels()),sr};var nr=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{_e=n.document.createElement("canvas"),tr=_e.getContext("2d")}catch{return!1}return!0}return!1};return nr(),er=function(sr){var ir;if(nr()===!0)return tr.width=sr.width,tr.height=sr.height,tr.clearRect(0,0,sr.width,sr.height),tr.putImageData(sr,0,0),(ir=new Image).src=_e.toDataURL(),ir;throw new Error("This method requires a Browser with Canvas-capability.")},rr.prototype.decodeFrames=function(sr){var ir,or,ar,lr,cr,Ar,ur,dr;if(this.animation){for(dr=[],or=cr=0,Ar=(ur=this.animation.frames).length;cr<Ar;or=++cr)ir=ur[or],ar=sr.createImageData(ir.width,ir.height),lr=this.decodePixels(new Uint8Array(ir.data)),this.copyToImageData(ar,lr),ir.imageData=ar,dr.push(ir.image=er(ar));return dr}},rr.prototype.renderFrame=function(sr,ir){var or,ar,lr;return or=(ar=this.animation.frames)[ir],lr=ar[ir-1],ir===0&&sr.clearRect(0,0,this.width,this.height),(lr!=null?lr.disposeOp:void 0)===1?sr.clearRect(lr.xOffset,lr.yOffset,lr.width,lr.height):(lr!=null?lr.disposeOp:void 0)===2&&sr.putImageData(lr.imageData,lr.xOffset,lr.yOffset),or.blendOp===0&&sr.clearRect(or.xOffset,or.yOffset,or.width,or.height),sr.drawImage(or.image,or.xOffset,or.yOffset)},rr.prototype.animate=function(sr){var ir,or,ar,lr,cr,Ar,ur=this;return or=0,Ar=this.animation,lr=Ar.numFrames,ar=Ar.frames,cr=Ar.numPlays,(ir=function(){var dr,mr;if(dr=or++%lr,mr=ar[dr],ur.renderFrame(sr,dr),lr>1&&or/lr<cr)return ur.animation._timeout=setTimeout(ir,mr.delay)})()},rr.prototype.stopAnimation=function(){var sr;return clearTimeout((sr=this.animation)!=null?sr._timeout:void 0)},rr.prototype.render=function(sr){var ir,or;return sr._png&&sr._png.stopAnimation(),sr._png=this,sr.width=this.width,sr.height=this.height,ir=sr.getContext("2d"),this.animation?(this.decodeFrames(ir),this.animate(ir)):(or=ir.createImageData(this.width,this.height),this.copyToImageData(or,this.decodePixels()),ir.putImageData(or,0,0))},rr}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(er){var _e=0;if(er[_e++]!==71||er[_e++]!==73||er[_e++]!==70||er[_e++]!==56||(er[_e++]+1&253)!=56||er[_e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var tr=er[_e++]|er[_e++]<<8,rr=er[_e++]|er[_e++]<<8,nr=er[_e++],sr=nr>>7,ir=1<<(7&nr)+1;er[_e++],er[_e++];var or=null,ar=null;sr&&(or=_e,ar=ir,_e+=3*ir);var lr=!0,cr=[],Ar=0,ur=null,dr=0,mr=null;for(this.width=tr,this.height=rr;lr&&_e<er.length;)switch(er[_e++]){case 33:switch(er[_e++]){case 255:if(er[_e]!==11||er[_e+1]==78&&er[_e+2]==69&&er[_e+3]==84&&er[_e+4]==83&&er[_e+5]==67&&er[_e+6]==65&&er[_e+7]==80&&er[_e+8]==69&&er[_e+9]==50&&er[_e+10]==46&&er[_e+11]==48&&er[_e+12]==3&&er[_e+13]==1&&er[_e+16]==0)_e+=14,mr=er[_e++]|er[_e++]<<8,_e++;else for(_e+=12;;){if(!((Er=er[_e++])>=0))throw Error("Invalid block size");if(Er===0)break;_e+=Er}break;case 249:if(er[_e++]!==4||er[_e+4]!==0)throw new Error("Invalid graphics extension block.");var pr=er[_e++];Ar=er[_e++]|er[_e++]<<8,ur=er[_e++],!(1&pr)&&(ur=null),dr=pr>>2&7,_e++;break;case 254:for(;;){if(!((Er=er[_e++])>=0))throw Error("Invalid block size");if(Er===0)break;_e+=Er}break;default:throw new Error("Unknown graphic control label: 0x"+er[_e-1].toString(16))}break;case 44:var yr=er[_e++]|er[_e++]<<8,hr=er[_e++]|er[_e++]<<8,gr=er[_e++]|er[_e++]<<8,Cr=er[_e++]|er[_e++]<<8,Tr=er[_e++],Sr=Tr>>6&1,Nr=1<<(7&Tr)+1,_r=or,vr=ar,br=!1;Tr>>7&&(br=!0,_r=_e,vr=Nr,_e+=3*Nr);var Pr=_e;for(_e++;;){var Er;if(!((Er=er[_e++])>=0))throw Error("Invalid block size");if(Er===0)break;_e+=Er}cr.push({x:yr,y:hr,width:gr,height:Cr,has_local_palette:br,palette_offset:_r,palette_size:vr,data_offset:Pr,data_length:_e-Pr,transparent_index:ur,interlaced:!!Sr,delay:Ar,disposal:dr});break;case 59:lr=!1;break;default:throw new Error("Unknown gif block: 0x"+er[_e-1].toString(16))}this.numFrames=function(){return cr.length},this.loopCount=function(){return mr},this.frameInfo=function(Rr){if(Rr<0||Rr>=cr.length)throw new Error("Frame index out of range.");return cr[Rr]},this.decodeAndBlitFrameBGRA=function(Rr,Ir){var Qr=this.frameInfo(Rr),Ur=Qr.width*Qr.height,Vr=new Uint8Array(Ur);$t(er,Qr.data_offset,Vr,Ur);var Wr=Qr.palette_offset,Hr=Qr.transparent_index;Hr===null&&(Hr=256);var $r=Qr.width,Xr=tr-$r,pn=$r,jr=4*(Qr.y*tr+Qr.x),Br=4*((Qr.y+Qr.height)*tr+Qr.x),Lr=jr,Or=4*Xr;Qr.interlaced===!0&&(Or+=4*tr*7);for(var zr=8,Gr=0,Yr=Vr.length;Gr<Yr;++Gr){var dn=Vr[Gr];if(pn===0&&(pn=$r,(Lr+=Or)>=Br&&(Or=4*Xr+4*tr*(zr-1),Lr=jr+($r+Xr)*(zr<<1),zr>>=1)),dn===Hr)Lr+=4;else{var En=er[Wr+3*dn],Sn=er[Wr+3*dn+1],Bn=er[Wr+3*dn+2];Ir[Lr++]=Bn,Ir[Lr++]=Sn,Ir[Lr++]=En,Ir[Lr++]=255}--pn}},this.decodeAndBlitFrameRGBA=function(Rr,Ir){var Qr=this.frameInfo(Rr),Ur=Qr.width*Qr.height,Vr=new Uint8Array(Ur);$t(er,Qr.data_offset,Vr,Ur);var Wr=Qr.palette_offset,Hr=Qr.transparent_index;Hr===null&&(Hr=256);var $r=Qr.width,Xr=tr-$r,pn=$r,jr=4*(Qr.y*tr+Qr.x),Br=4*((Qr.y+Qr.height)*tr+Qr.x),Lr=jr,Or=4*Xr;Qr.interlaced===!0&&(Or+=4*tr*7);for(var zr=8,Gr=0,Yr=Vr.length;Gr<Yr;++Gr){var dn=Vr[Gr];if(pn===0&&(pn=$r,(Lr+=Or)>=Br&&(Or=4*Xr+4*tr*(zr-1),Lr=jr+($r+Xr)*(zr<<1),zr>>=1)),dn===Hr)Lr+=4;else{var En=er[Wr+3*dn],Sn=er[Wr+3*dn+1],Bn=er[Wr+3*dn+2];Ir[Lr++]=En,Ir[Lr++]=Sn,Ir[Lr++]=Bn,Ir[Lr++]=255}--pn}}}function $t(er,_e,tr,rr){for(var nr=er[_e++],sr=1<<nr,ir=sr+1,or=ir+1,ar=nr+1,lr=(1<<ar)-1,cr=0,Ar=0,ur=0,dr=er[_e++],mr=new Int32Array(4096),pr=null;;){for(;cr<16&&dr!==0;)Ar|=er[_e++]<<cr,cr+=8,dr===1?dr=er[_e++]:--dr;if(cr<ar)break;var yr=Ar&lr;if(Ar>>=ar,cr-=ar,yr!==sr){if(yr===ir)break;for(var hr=yr<or?yr:pr,gr=0,Cr=hr;Cr>sr;)Cr=mr[Cr]>>8,++gr;var Tr=Cr;if(ur+gr+(hr!==yr?1:0)>rr)return void a.log("Warning, gif stream longer than expected.");tr[ur++]=Tr;var Sr=ur+=gr;for(hr!==yr&&(tr[ur++]=Tr),Cr=hr;gr--;)Cr=mr[Cr],tr[--Sr]=255&Cr,Cr>>=8;pr!==null&&or<4096&&(mr[or++]=pr<<8|Tr,or>=lr+1&&ar<12&&(++ar,lr=lr<<1|1)),pr=yr}else or=ir+1,lr=(1<<(ar=nr+1))-1,pr=null}return ur!==rr&&a.log("Warning, gif stream shorter than expected."),tr}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(er){var _e,tr,rr,nr,sr,ir=Math.floor,or=new Array(64),ar=new Array(64),lr=new Array(64),cr=new Array(64),Ar=new Array(65535),ur=new Array(65535),dr=new Array(64),mr=new Array(64),pr=[],yr=0,hr=7,gr=new Array(64),Cr=new Array(64),Tr=new Array(64),Sr=new Array(256),Nr=new Array(2048),_r=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],vr=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],br=[0,1,2,3,4,5,6,7,8,9,10,11],Pr=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Er=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Rr=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ir=[0,1,2,3,4,5,6,7,8,9,10,11],Qr=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ur=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Vr(jr,Br){for(var Lr=0,Or=0,zr=new Array,Gr=1;Gr<=16;Gr++){for(var Yr=1;Yr<=jr[Gr];Yr++)zr[Br[Or]]=[],zr[Br[Or]][0]=Lr,zr[Br[Or]][1]=Gr,Or++,Lr++;Lr*=2}return zr}function Wr(jr){for(var Br=jr[0],Lr=jr[1]-1;Lr>=0;)Br&1<<Lr&&(yr|=1<<hr),Lr--,--hr<0&&(yr==255?(Hr(255),Hr(0)):Hr(yr),hr=7,yr=0)}function Hr(jr){pr.push(jr)}function $r(jr){Hr(jr>>8&255),Hr(255&jr)}function Xr(jr,Br,Lr,Or,zr){for(var Gr,Yr=zr[0],dn=zr[240],En=function(hn,bn){var In,jn,zn,qn,Nn,ns,rs,Is,ps,Ps,ls=0;for(ps=0;ps<8;++ps){In=hn[ls],jn=hn[ls+1],zn=hn[ls+2],qn=hn[ls+3],Nn=hn[ls+4],ns=hn[ls+5],rs=hn[ls+6];var Ts=In+(Is=hn[ls+7]),Fs=In-Is,Vs=jn+rs,ts=jn-rs,Mn=zn+ns,Gn=zn-ns,os=qn+Nn,js=qn-Nn,bs=Ts+os,Rn=Ts-os,es=Vs+Mn,ds=Vs-Mn;hn[ls]=bs+es,hn[ls+4]=bs-es;var fs=.707106781*(ds+Rn);hn[ls+2]=Rn+fs,hn[ls+6]=Rn-fs;var vs=.382683433*((bs=js+Gn)-(ds=ts+Fs)),Ss=.5411961*bs+vs,wn=1.306562965*ds+vs,yn=.707106781*(es=Gn+ts),Ln=Fs+yn,Dn=Fs-yn;hn[ls+5]=Dn+Ss,hn[ls+3]=Dn-Ss,hn[ls+1]=Ln+wn,hn[ls+7]=Ln-wn,ls+=8}for(ls=0,ps=0;ps<8;++ps){In=hn[ls],jn=hn[ls+8],zn=hn[ls+16],qn=hn[ls+24],Nn=hn[ls+32],ns=hn[ls+40],rs=hn[ls+48];var Zn=In+(Is=hn[ls+56]),cs=In-Is,As=jn+rs,Rs=jn-rs,Cs=zn+ns,gs=zn-ns,Qs=qn+Nn,Ns=qn-Nn,Bs=Zn+Qs,Us=Zn-Qs,Ms=As+Cs,$s=As-Cs;hn[ls]=Bs+Ms,hn[ls+32]=Bs-Ms;var Hs=.707106781*($s+Us);hn[ls+16]=Us+Hs,hn[ls+48]=Us-Hs;var _i=.382683433*((Bs=Ns+gs)-($s=Rs+cs)),Js=.5411961*Bs+_i,vo=1.306562965*$s+_i,wo=.707106781*(Ms=gs+Rs),Ro=cs+wo,Jo=cs-wo;hn[ls+40]=Jo+Js,hn[ls+24]=Jo-Js,hn[ls+8]=Ro+vo,hn[ls+56]=Ro-vo,ls++}for(ps=0;ps<64;++ps)Ps=hn[ps]*bn[ps],dr[ps]=Ps>0?Ps+.5|0:Ps-.5|0;return dr}(jr,Br),Sn=0;Sn<64;++Sn)mr[_r[Sn]]=En[Sn];var Bn=mr[0]-Lr;Lr=mr[0],Bn==0?Wr(Or[0]):(Wr(Or[ur[Gr=32767+Bn]]),Wr(Ar[Gr]));for(var kn=63;kn>0&&mr[kn]==0;)kn--;if(kn==0)return Wr(Yr),Lr;for(var Kn,Cn=1;Cn<=kn;){for(var Jr=Cn;mr[Cn]==0&&Cn<=kn;)++Cn;var Fn=Cn-Jr;if(Fn>=16){Kn=Fn>>4;for(var Zr=1;Zr<=Kn;++Zr)Wr(dn);Fn&=15}Gr=32767+mr[Cn],Wr(zr[(Fn<<4)+ur[Gr]]),Wr(Ar[Gr]),Cn++}return kn!=63&&Wr(Yr),Lr}function pn(jr){jr=Math.min(Math.max(jr,1),100),sr!=jr&&(function(Br){for(var Lr=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Or=0;Or<64;Or++){var zr=ir((Lr[Or]*Br+50)/100);zr=Math.min(Math.max(zr,1),255),or[_r[Or]]=zr}for(var Gr=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Yr=0;Yr<64;Yr++){var dn=ir((Gr[Yr]*Br+50)/100);dn=Math.min(Math.max(dn,1),255),ar[_r[Yr]]=dn}for(var En=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Sn=0,Bn=0;Bn<8;Bn++)for(var kn=0;kn<8;kn++)lr[Sn]=1/(or[_r[Sn]]*En[Bn]*En[kn]*8),cr[Sn]=1/(ar[_r[Sn]]*En[Bn]*En[kn]*8),Sn++}(jr<50?Math.floor(5e3/jr):Math.floor(200-2*jr)),sr=jr)}this.encode=function(jr,Br){Br&&pn(Br),pr=new Array,yr=0,hr=7,$r(65496),$r(65504),$r(16),Hr(74),Hr(70),Hr(73),Hr(70),Hr(0),Hr(1),Hr(1),Hr(0),$r(1),$r(1),Hr(0),Hr(0),function(){$r(65499),$r(132),Hr(0);for(var jn=0;jn<64;jn++)Hr(or[jn]);Hr(1);for(var zn=0;zn<64;zn++)Hr(ar[zn])}(),function(jn,zn){$r(65472),$r(17),Hr(8),$r(zn),$r(jn),Hr(3),Hr(1),Hr(17),Hr(0),Hr(2),Hr(17),Hr(1),Hr(3),Hr(17),Hr(1)}(jr.width,jr.height),function(){$r(65476),$r(418),Hr(0);for(var jn=0;jn<16;jn++)Hr(vr[jn+1]);for(var zn=0;zn<=11;zn++)Hr(br[zn]);Hr(16);for(var qn=0;qn<16;qn++)Hr(Pr[qn+1]);for(var Nn=0;Nn<=161;Nn++)Hr(Er[Nn]);Hr(1);for(var ns=0;ns<16;ns++)Hr(Rr[ns+1]);for(var rs=0;rs<=11;rs++)Hr(Ir[rs]);Hr(17);for(var Is=0;Is<16;Is++)Hr(Qr[Is+1]);for(var ps=0;ps<=161;ps++)Hr(Ur[ps])}(),$r(65498),$r(12),Hr(3),Hr(1),Hr(0),Hr(2),Hr(17),Hr(3),Hr(17),Hr(0),Hr(63),Hr(0);var Lr=0,Or=0,zr=0;yr=0,hr=7,this.encode.displayName="_encode_";for(var Gr,Yr,dn,En,Sn,Bn,kn,Kn,Cn,Jr=jr.data,Fn=jr.width,Zr=jr.height,hn=4*Fn,bn=0;bn<Zr;){for(Gr=0;Gr<hn;){for(Sn=hn*bn+Gr,kn=-1,Kn=0,Cn=0;Cn<64;Cn++)Bn=Sn+(Kn=Cn>>3)*hn+(kn=4*(7&Cn)),bn+Kn>=Zr&&(Bn-=hn*(bn+1+Kn-Zr)),Gr+kn>=hn&&(Bn-=Gr+kn-hn+4),Yr=Jr[Bn++],dn=Jr[Bn++],En=Jr[Bn++],gr[Cn]=(Nr[Yr]+Nr[dn+256>>0]+Nr[En+512>>0]>>16)-128,Cr[Cn]=(Nr[Yr+768>>0]+Nr[dn+1024>>0]+Nr[En+1280>>0]>>16)-128,Tr[Cn]=(Nr[Yr+1280>>0]+Nr[dn+1536>>0]+Nr[En+1792>>0]>>16)-128;Lr=Xr(gr,lr,Lr,_e,rr),Or=Xr(Cr,cr,Or,tr,nr),zr=Xr(Tr,cr,zr,tr,nr),Gr+=32}bn+=8}if(hr>=0){var In=[];In[1]=hr+1,In[0]=(1<<hr+1)-1,Wr(In)}return $r(65497),new Uint8Array(pr)},er=er||50,function(){for(var jr=String.fromCharCode,Br=0;Br<256;Br++)Sr[Br]=jr(Br)}(),_e=Vr(vr,br),tr=Vr(Rr,Ir),rr=Vr(Pr,Er),nr=Vr(Qr,Ur),function(){for(var jr=1,Br=2,Lr=1;Lr<=15;Lr++){for(var Or=jr;Or<Br;Or++)ur[32767+Or]=Lr,Ar[32767+Or]=[],Ar[32767+Or][1]=Lr,Ar[32767+Or][0]=Or;for(var zr=-(Br-1);zr<=-jr;zr++)ur[32767+zr]=Lr,Ar[32767+zr]=[],Ar[32767+zr][1]=Lr,Ar[32767+zr][0]=Br-1+zr;jr<<=1,Br<<=1}}(),function(){for(var jr=0;jr<256;jr++)Nr[jr]=19595*jr,Nr[jr+256>>0]=38470*jr,Nr[jr+512>>0]=7471*jr+32768,Nr[jr+768>>0]=-11059*jr,Nr[jr+1024>>0]=-21709*jr,Nr[jr+1280>>0]=32768*jr+8421375,Nr[jr+1536>>0]=-27439*jr,Nr[jr+1792>>0]=-5329*jr}(),pn(er)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(er,_e){if(this.pos=0,this.buffer=er,this.datav=new DataView(er.buffer),this.is_with_alpha=!!_e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(er){function _e(vr){if(!vr)throw Error("assert :P")}function tr(vr,br,Pr){for(var Er=0;4>Er;Er++)if(vr[br+Er]!=Pr.charCodeAt(Er))return!0;return!1}function rr(vr,br,Pr,Er,Rr){for(var Ir=0;Ir<Rr;Ir++)vr[br+Ir]=Pr[Er+Ir]}function nr(vr,br,Pr,Er){for(var Rr=0;Rr<Er;Rr++)vr[br+Rr]=Pr}function sr(vr){return new Int32Array(vr)}function ir(vr,br){for(var Pr=[],Er=0;Er<vr;Er++)Pr.push(new br);return Pr}function or(vr,br){var Pr=[];return function Er(Rr,Ir,Qr){for(var Ur=Qr[Ir],Vr=0;Vr<Ur&&(Rr.push(Qr.length>Ir+1?[]:new br),!(Qr.length<Ir+1));Vr++)Er(Rr[Vr],Ir+1,Qr)}(Pr,0,vr),Pr}var ar=function(){var vr=this;function br(fr,wr){for(var Dr=1<<wr-1>>>0;fr&Dr;)Dr>>>=1;return Dr?(fr&Dr-1)+Dr:fr}function Pr(fr,wr,Dr,Kr,un){_e(!(Kr%Dr));do fr[wr+(Kr-=Dr)]=un;while(0<Kr)}function Er(fr,wr,Dr,Kr,un){if(_e(2328>=un),512>=un)var fn=sr(512);else if((fn=sr(un))==null)return 0;return function(mn,xn,vn,Tn,$n,ss){var is,Jn,ys=xn,us=1<<vn,Hn=sr(16),Wn=sr(16);for(_e($n!=0),_e(Tn!=null),_e(mn!=null),_e(0<vn),Jn=0;Jn<$n;++Jn){if(15<Tn[Jn])return 0;++Hn[Tn[Jn]]}if(Hn[0]==$n)return 0;for(Wn[1]=0,is=1;15>is;++is){if(Hn[is]>1<<is)return 0;Wn[is+1]=Wn[is]+Hn[is]}for(Jn=0;Jn<$n;++Jn)is=Tn[Jn],0<Tn[Jn]&&(ss[Wn[is]++]=Jn);if(Wn[15]==1)return(Tn=new Rr).g=0,Tn.value=ss[0],Pr(mn,ys,1,us,Tn),us;var ms,Es=-1,xs=us-1,Os=0,Ls=1,Ks=1,Ds=1<<vn;for(Jn=0,is=1,$n=2;is<=vn;++is,$n<<=1){if(Ls+=Ks<<=1,0>(Ks-=Hn[is]))return 0;for(;0<Hn[is];--Hn[is])(Tn=new Rr).g=is,Tn.value=ss[Jn++],Pr(mn,ys+Os,$n,Ds,Tn),Os=br(Os,is)}for(is=vn+1,$n=2;15>=is;++is,$n<<=1){if(Ls+=Ks<<=1,0>(Ks-=Hn[is]))return 0;for(;0<Hn[is];--Hn[is]){if(Tn=new Rr,(Os&xs)!=Es){for(ys+=Ds,ms=1<<(Es=is)-vn;15>Es&&!(0>=(ms-=Hn[Es]));)++Es,ms<<=1;us+=Ds=1<<(ms=Es-vn),mn[xn+(Es=Os&xs)].g=ms+vn,mn[xn+Es].value=ys-xn-Es}Tn.g=is-vn,Tn.value=ss[Jn++],Pr(mn,ys+(Os>>vn),$n,Ds,Tn),Os=br(Os,is)}}return Ls!=2*Wn[15]-1?0:us}(fr,wr,Dr,Kr,un,fn)}function Rr(){this.value=this.g=0}function Ir(){this.value=this.g=0}function Qr(){this.G=ir(5,Rr),this.H=sr(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=ir(Po,Ir)}function Ur(fr,wr,Dr,Kr){_e(fr!=null),_e(wr!=null),_e(2147483648>Kr),fr.Ca=254,fr.I=0,fr.b=-8,fr.Ka=0,fr.oa=wr,fr.pa=Dr,fr.Jd=wr,fr.Yc=Dr+Kr,fr.Zc=4<=Kr?Dr+Kr-4+1:Dr,Gr(fr)}function Vr(fr,wr){for(var Dr=0;0<wr--;)Dr|=dn(fr,128)<<wr;return Dr}function Wr(fr,wr){var Dr=Vr(fr,wr);return Yr(fr)?-Dr:Dr}function Hr(fr,wr,Dr,Kr){var un,fn=0;for(_e(fr!=null),_e(wr!=null),_e(4294967288>Kr),fr.Sb=Kr,fr.Ra=0,fr.u=0,fr.h=0,4<Kr&&(Kr=4),un=0;un<Kr;++un)fn+=wr[Dr+un]<<8*un;fr.Ra=fn,fr.bb=Kr,fr.oa=wr,fr.pa=Dr}function $r(fr){for(;8<=fr.u&&fr.bb<fr.Sb;)fr.Ra>>>=8,fr.Ra+=fr.oa[fr.pa+fr.bb]<<Lu-8>>>0,++fr.bb,fr.u-=8;Lr(fr)&&(fr.h=1,fr.u=0)}function Xr(fr,wr){if(_e(0<=wr),!fr.h&&wr<=ju){var Dr=Br(fr)&Fu[wr];return fr.u+=wr,$r(fr),Dr}return fr.h=1,fr.u=0}function pn(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function jr(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Br(fr){return fr.Ra>>>(fr.u&Lu-1)>>>0}function Lr(fr){return _e(fr.bb<=fr.Sb),fr.h||fr.bb==fr.Sb&&fr.u>Lu}function Or(fr,wr){fr.u=wr,fr.h=Lr(fr)}function zr(fr){fr.u>=lp&&(_e(fr.u>=lp),$r(fr))}function Gr(fr){_e(fr!=null&&fr.oa!=null),fr.pa<fr.Zc?(fr.I=(fr.oa[fr.pa++]|fr.I<<8)>>>0,fr.b+=8):(_e(fr!=null&&fr.oa!=null),fr.pa<fr.Yc?(fr.b+=8,fr.I=fr.oa[fr.pa++]|fr.I<<8):fr.Ka?fr.b=0:(fr.I<<=8,fr.b+=8,fr.Ka=1))}function Yr(fr){return Vr(fr,1)}function dn(fr,wr){var Dr=fr.Ca;0>fr.b&&Gr(fr);var Kr=fr.b,un=Dr*wr>>>8,fn=(fr.I>>>Kr>un)+0;for(fn?(Dr-=un,fr.I-=un+1<<Kr>>>0):Dr=un+1,Kr=Dr,un=0;256<=Kr;)un+=8,Kr>>=8;return Kr=7^un+Qo[Kr],fr.b-=Kr,fr.Ca=(Dr<<Kr)-1,fn}function En(fr,wr,Dr){fr[wr+0]=Dr>>24&255,fr[wr+1]=Dr>>16&255,fr[wr+2]=Dr>>8&255,fr[wr+3]=Dr>>0&255}function Sn(fr,wr){return fr[wr+0]<<0|fr[wr+1]<<8}function Bn(fr,wr){return Sn(fr,wr)|fr[wr+2]<<16}function kn(fr,wr){return Sn(fr,wr)|Sn(fr,wr+2)<<16}function Kn(fr,wr){var Dr=1<<wr;return _e(fr!=null),_e(0<wr),fr.X=sr(Dr),fr.X==null?0:(fr.Mb=32-wr,fr.Xa=wr,1)}function Cn(fr,wr){_e(fr!=null),_e(wr!=null),_e(fr.Xa==wr.Xa),rr(wr.X,0,fr.X,0,1<<wr.Xa)}function Jr(){this.X=[],this.Xa=this.Mb=0}function Fn(fr,wr,Dr,Kr){_e(Dr!=null),_e(Kr!=null);var un=Dr[0],fn=Kr[0];return un==0&&(un=(fr*fn+wr/2)/wr),fn==0&&(fn=(wr*un+fr/2)/fr),0>=un||0>=fn?0:(Dr[0]=un,Kr[0]=fn,1)}function Zr(fr,wr){return fr+(1<<wr)-1>>>wr}function hn(fr,wr){return((4278255360&fr)+(4278255360&wr)>>>0&4278255360)+((16711935&fr)+(16711935&wr)>>>0&16711935)>>>0}function bn(fr,wr){vr[wr]=function(Dr,Kr,un,fn,mn,xn,vn){var Tn;for(Tn=0;Tn<mn;++Tn){var $n=vr[fr](xn[vn+Tn-1],un,fn+Tn);xn[vn+Tn]=hn(Dr[Kr+Tn],$n)}}}function In(){this.ud=this.hd=this.jd=0}function jn(fr,wr){return((4278124286&(fr^wr))>>>1)+(fr&wr)>>>0}function zn(fr){return 0<=fr&&256>fr?fr:0>fr?0:255<fr?255:void 0}function qn(fr,wr){return zn(fr+(fr-wr+.5>>1))}function Nn(fr,wr,Dr){return Math.abs(wr-Dr)-Math.abs(fr-Dr)}function ns(fr,wr,Dr,Kr,un,fn,mn){for(Kr=fn[mn-1],Dr=0;Dr<un;++Dr)fn[mn+Dr]=Kr=hn(fr[wr+Dr],Kr)}function rs(fr,wr,Dr,Kr,un){var fn;for(fn=0;fn<Dr;++fn){var mn=fr[wr+fn],xn=mn>>8&255,vn=16711935&(vn=(vn=16711935&mn)+((xn<<16)+xn));Kr[un+fn]=(4278255360&mn)+vn>>>0}}function Is(fr,wr){wr.jd=fr>>0&255,wr.hd=fr>>8&255,wr.ud=fr>>16&255}function ps(fr,wr,Dr,Kr,un,fn){var mn;for(mn=0;mn<Kr;++mn){var xn=wr[Dr+mn],vn=xn>>>8,Tn=xn,$n=255&($n=($n=xn>>>16)+((fr.jd<<24>>24)*(vn<<24>>24)>>>5));Tn=255&(Tn=(Tn=Tn+((fr.hd<<24>>24)*(vn<<24>>24)>>>5))+((fr.ud<<24>>24)*($n<<24>>24)>>>5)),un[fn+mn]=(4278255360&xn)+($n<<16)+Tn}}function Ps(fr,wr,Dr,Kr,un){vr[wr]=function(fn,mn,xn,vn,Tn,$n,ss,is,Jn){for(vn=ss;vn<is;++vn)for(ss=0;ss<Jn;++ss)Tn[$n++]=un(xn[Kr(fn[mn++])])},vr[fr]=function(fn,mn,xn,vn,Tn,$n,ss){var is=8>>fn.b,Jn=fn.Ea,ys=fn.K[0],us=fn.w;if(8>is)for(fn=(1<<fn.b)-1,us=(1<<is)-1;mn<xn;++mn){var Hn,Wn=0;for(Hn=0;Hn<Jn;++Hn)Hn&fn||(Wn=Kr(vn[Tn++])),$n[ss++]=un(ys[Wn&us]),Wn>>=is}else vr["VP8LMapColor"+Dr](vn,Tn,ys,us,$n,ss,mn,xn,Jn)}}function ls(fr,wr,Dr,Kr,un){for(Dr=wr+Dr;wr<Dr;){var fn=fr[wr++];Kr[un++]=fn>>16&255,Kr[un++]=fn>>8&255,Kr[un++]=fn>>0&255}}function Ts(fr,wr,Dr,Kr,un){for(Dr=wr+Dr;wr<Dr;){var fn=fr[wr++];Kr[un++]=fn>>16&255,Kr[un++]=fn>>8&255,Kr[un++]=fn>>0&255,Kr[un++]=fn>>24&255}}function Fs(fr,wr,Dr,Kr,un){for(Dr=wr+Dr;wr<Dr;){var fn=(mn=fr[wr++])>>16&240|mn>>12&15,mn=mn>>0&240|mn>>28&15;Kr[un++]=fn,Kr[un++]=mn}}function Vs(fr,wr,Dr,Kr,un){for(Dr=wr+Dr;wr<Dr;){var fn=(mn=fr[wr++])>>16&248|mn>>13&7,mn=mn>>5&224|mn>>3&31;Kr[un++]=fn,Kr[un++]=mn}}function ts(fr,wr,Dr,Kr,un){for(Dr=wr+Dr;wr<Dr;){var fn=fr[wr++];Kr[un++]=fn>>0&255,Kr[un++]=fn>>8&255,Kr[un++]=fn>>16&255}}function Mn(fr,wr,Dr,Kr,un,fn){if(fn==0)for(Dr=wr+Dr;wr<Dr;)En(Kr,((fn=fr[wr++])[0]>>24|fn[1]>>8&65280|fn[2]<<8&16711680|fn[3]<<24)>>>0),un+=32;else rr(Kr,un,fr,wr,Dr)}function Gn(fr,wr){vr[wr][0]=vr[fr+"0"],vr[wr][1]=vr[fr+"1"],vr[wr][2]=vr[fr+"2"],vr[wr][3]=vr[fr+"3"],vr[wr][4]=vr[fr+"4"],vr[wr][5]=vr[fr+"5"],vr[wr][6]=vr[fr+"6"],vr[wr][7]=vr[fr+"7"],vr[wr][8]=vr[fr+"8"],vr[wr][9]=vr[fr+"9"],vr[wr][10]=vr[fr+"10"],vr[wr][11]=vr[fr+"11"],vr[wr][12]=vr[fr+"12"],vr[wr][13]=vr[fr+"13"],vr[wr][14]=vr[fr+"0"],vr[wr][15]=vr[fr+"0"]}function os(fr){return fr==mm||fr==gm||fr==Op||fr==xm}function js(){this.eb=[],this.size=this.A=this.fb=0}function bs(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Rn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new js,this.f.kb=new bs,this.sd=null}function es(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ds(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function fs(fr){return alert("todo:WebPSamplerProcessPlane"),fr.T}function vs(fr,wr){var Dr=fr.T,Kr=wr.ba.f.RGBA,un=Kr.eb,fn=Kr.fb+fr.ka*Kr.A,mn=Al[wr.ba.S],xn=fr.y,vn=fr.O,Tn=fr.f,$n=fr.N,ss=fr.ea,is=fr.W,Jn=wr.cc,ys=wr.dc,us=wr.Mc,Hn=wr.Nc,Wn=fr.ka,ms=fr.ka+fr.T,Es=fr.U,xs=Es+1>>1;for(Wn==0?mn(xn,vn,null,null,Tn,$n,ss,is,Tn,$n,ss,is,un,fn,null,null,Es):(mn(wr.ec,wr.fc,xn,vn,Jn,ys,us,Hn,Tn,$n,ss,is,un,fn-Kr.A,un,fn,Es),++Dr);Wn+2<ms;Wn+=2)Jn=Tn,ys=$n,us=ss,Hn=is,$n+=fr.Rc,is+=fr.Rc,fn+=2*Kr.A,mn(xn,(vn+=2*fr.fa)-fr.fa,xn,vn,Jn,ys,us,Hn,Tn,$n,ss,is,un,fn-Kr.A,un,fn,Es);return vn+=fr.fa,fr.j+ms<fr.o?(rr(wr.ec,wr.fc,xn,vn,Es),rr(wr.cc,wr.dc,Tn,$n,xs),rr(wr.Mc,wr.Nc,ss,is,xs),Dr--):1&ms||mn(xn,vn,null,null,Tn,$n,ss,is,Tn,$n,ss,is,un,fn+Kr.A,null,null,Es),Dr}function Ss(fr,wr,Dr){var Kr=fr.F,un=[fr.J];if(Kr!=null){var fn=fr.U,mn=wr.ba.S,xn=mn==Up||mn==Op;wr=wr.ba.f.RGBA;var vn=[0],Tn=fr.ka;vn[0]=fr.T,fr.Kb&&(Tn==0?--vn[0]:(--Tn,un[0]-=fr.width),fr.j+fr.ka+fr.T==fr.o&&(vn[0]=fr.o-fr.j-Tn));var $n=wr.eb;Tn=wr.fb+Tn*wr.A,fr=uo(Kr,un[0],fr.width,fn,vn,$n,Tn+(xn?0:3),wr.A),_e(Dr==vn),fr&&os(mn)&&ba($n,Tn,xn,fn,vn,wr.A)}return 0}function wn(fr){var wr=fr.ma,Dr=wr.ba.S,Kr=11>Dr,un=Dr==kp||Dr==Dp||Dr==Up||Dr==pm||Dr==12||os(Dr);if(wr.memory=null,wr.Ib=null,wr.Jb=null,wr.Nd=null,!op(wr.Oa,fr,un?11:12))return 0;if(un&&os(Dr)&&_s(),fr.da)alert("todo:use_scaling");else{if(Kr){if(wr.Ib=fs,fr.Kb){if(Dr=fr.U+1>>1,wr.memory=sr(fr.U+2*Dr),wr.memory==null)return 0;wr.ec=wr.memory,wr.fc=0,wr.cc=wr.ec,wr.dc=wr.fc+fr.U,wr.Mc=wr.cc,wr.Nc=wr.dc+Dr,wr.Ib=vs,_s()}}else alert("todo:EmitYUV");un&&(wr.Jb=Ss,Kr&&Yn())}if(Kr&&!E0){for(fr=0;256>fr;++fr)Gx[fr]=89858*(fr-128)+Qp>>Mp,Xx[fr]=-22014*(fr-128)+Qp,qx[fr]=-45773*(fr-128),Wx[fr]=113618*(fr-128)+Qp>>Mp;for(fr=pp;fr<Em;++fr)wr=76283*(fr-16)+Qp>>Mp,Yx[fr-pp]=ro(wr,255),Jx[fr-pp]=ro(wr+8>>4,15);E0=1}return 1}function yn(fr){var wr=fr.ma,Dr=fr.U,Kr=fr.T;return _e(!(1&fr.ka)),0>=Dr||0>=Kr?0:(Dr=wr.Ib(fr,wr),wr.Jb!=null&&wr.Jb(fr,wr,Dr),wr.Dc+=Dr,1)}function Ln(fr){fr.ma.memory=null}function Dn(fr,wr,Dr,Kr){return Xr(fr,8)!=47?0:(wr[0]=Xr(fr,14)+1,Dr[0]=Xr(fr,14)+1,Kr[0]=Xr(fr,1),Xr(fr,3)!=0?0:!fr.h)}function Zn(fr,wr){if(4>fr)return fr+1;var Dr=fr-2>>1;return(2+(1&fr)<<Dr)+Xr(wr,Dr)+1}function cs(fr,wr){return 120<wr?wr-120:1<=(Dr=((Dr=Fx[wr-1])>>4)*fr+(8-(15&Dr)))?Dr:1;var Dr}function As(fr,wr,Dr){var Kr=Br(Dr),un=fr[wr+=255&Kr].g-8;return 0<un&&(Or(Dr,Dr.u+8),Kr=Br(Dr),wr+=fr[wr].value,wr+=Kr&(1<<un)-1),Or(Dr,Dr.u+fr[wr].g),fr[wr].value}function Rs(fr,wr,Dr){return Dr.g+=fr.g,Dr.value+=fr.value<<wr>>>0,_e(8>=Dr.g),fr.g}function Cs(fr,wr,Dr){var Kr=fr.xc;return _e((wr=Kr==0?0:fr.vc[fr.md*(Dr>>Kr)+(wr>>Kr)])<fr.Wb),fr.Ya[wr]}function gs(fr,wr,Dr,Kr){var un=fr.ab,fn=fr.c*wr,mn=fr.C;wr=mn+wr;var xn=Dr,vn=Kr;for(Kr=fr.Ta,Dr=fr.Ua;0<un--;){var Tn=fr.gc[un],$n=mn,ss=wr,is=xn,Jn=vn,ys=(vn=Kr,xn=Dr,Tn.Ea);switch(_e($n<ss),_e(ss<=Tn.nc),Tn.hc){case 2:Ip(is,Jn,(ss-$n)*ys,vn,xn);break;case 0:var us=$n,Hn=ss,Wn=vn,ms=xn,Es=(Ds=Tn).Ea;us==0&&(hm(is,Jn,null,null,1,Wn,ms),ns(is,Jn+1,0,0,Es-1,Wn,ms+1),Jn+=Es,ms+=Es,++us);for(var xs=1<<Ds.b,Os=xs-1,Ls=Zr(Es,Ds.b),Ks=Ds.K,Ds=Ds.w+(us>>Ds.b)*Ls;us<Hn;){var eo=Ks,so=Ds,Zs=1;for(cp(is,Jn,Wn,ms-Es,1,Wn,ms);Zs<Es;){var Ys=(Zs&~Os)+xs;Ys>Es&&(Ys=Es),(0,NA[eo[so++]>>8&15])(is,Jn+ +Zs,Wn,ms+Zs-Es,Ys-Zs,Wn,ms+Zs),Zs=Ys}Jn+=Es,ms+=Es,++us&Os||(Ds+=Ls)}ss!=Tn.nc&&rr(vn,xn-ys,vn,xn+(ss-$n-1)*ys,ys);break;case 1:for(ys=is,Hn=Jn,Es=(is=Tn.Ea)-(ms=is&~(Wn=(Jn=1<<Tn.b)-1)),us=Zr(is,Tn.b),xs=Tn.K,Tn=Tn.w+($n>>Tn.b)*us;$n<ss;){for(Os=xs,Ls=Tn,Ks=new In,Ds=Hn+ms,eo=Hn+is;Hn<Ds;)Is(Os[Ls++],Ks),Au(Ks,ys,Hn,Jn,vn,xn),Hn+=Jn,xn+=Jn;Hn<eo&&(Is(Os[Ls++],Ks),Au(Ks,ys,Hn,Es,vn,xn),Hn+=Es,xn+=Es),++$n&Wn||(Tn+=us)}break;case 3:if(is==vn&&Jn==xn&&0<Tn.b){for(Hn=vn,is=ys=xn+(ss-$n)*ys-(ms=(ss-$n)*Zr(Tn.Ea,Tn.b)),Jn=vn,Wn=xn,us=[],ms=(Es=ms)-1;0<=ms;--ms)us[ms]=Jn[Wn+ms];for(ms=Es-1;0<=ms;--ms)Hn[is+ms]=us[ms];na(Tn,$n,ss,vn,ys,vn,xn)}else na(Tn,$n,ss,is,Jn,vn,xn)}xn=Kr,vn=Dr}vn!=Dr&&rr(Kr,Dr,xn,vn,fn)}function Qs(fr,wr){var Dr=fr.V,Kr=fr.Ba+fr.c*fr.C,un=wr-fr.C;if(_e(wr<=fr.l.o),_e(16>=un),0<un){var fn=fr.l,mn=fr.Ta,xn=fr.Ua,vn=fn.width;if(gs(fr,un,Dr,Kr),un=xn=[xn],_e((Dr=fr.C)<(Kr=wr)),_e(fn.v<fn.va),Kr>fn.o&&(Kr=fn.o),Dr<fn.j){var Tn=fn.j-Dr;Dr=fn.j,un[0]+=Tn*vn}if(Dr>=Kr?Dr=0:(un[0]+=4*fn.v,fn.ka=Dr-fn.j,fn.U=fn.va-fn.v,fn.T=Kr-Dr,Dr=1),Dr){if(xn=xn[0],11>(Dr=fr.ca).S){var $n=Dr.f.RGBA,ss=(Kr=Dr.S,un=fn.U,fn=fn.T,Tn=$n.eb,$n.A),is=fn;for($n=$n.fb+fr.Ma*$n.A;0<is--;){var Jn=mn,ys=xn,us=un,Hn=Tn,Wn=$n;switch(Kr){case Lp:Vo(Jn,ys,us,Hn,Wn);break;case kp:ko(Jn,ys,us,Hn,Wn);break;case mm:ko(Jn,ys,us,Hn,Wn),ba(Hn,Wn,0,us,1,0);break;case u0:iA(Jn,ys,us,Hn,Wn);break;case Dp:Mn(Jn,ys,us,Hn,Wn,1);break;case gm:Mn(Jn,ys,us,Hn,Wn,1),ba(Hn,Wn,0,us,1,0);break;case Up:Mn(Jn,ys,us,Hn,Wn,0);break;case Op:Mn(Jn,ys,us,Hn,Wn,0),ba(Hn,Wn,1,us,1,0);break;case pm:FA(Jn,ys,us,Hn,Wn);break;case xm:FA(Jn,ys,us,Hn,Wn),Ao(Hn,Wn,us,1,0);break;case d0:sA(Jn,ys,us,Hn,Wn);break;default:_e(0)}xn+=vn,$n+=ss}fr.Ma+=fn}else alert("todo:EmitRescaledRowsYUVA");_e(fr.Ma<=Dr.height)}}fr.C=wr,_e(fr.C<=fr.i)}function Ns(fr){var wr;if(0<fr.ua)return 0;for(wr=0;wr<fr.Wb;++wr){var Dr=fr.Ya[wr].G,Kr=fr.Ya[wr].H;if(0<Dr[1][Kr[1]+0].g||0<Dr[2][Kr[2]+0].g||0<Dr[3][Kr[3]+0].g)return 0}return 1}function Bs(fr,wr,Dr,Kr,un,fn){if(fr.Z!=0){var mn=fr.qd,xn=fr.rd;for(_e(DA[fr.Z]!=null);wr<Dr;++wr)DA[fr.Z](mn,xn,Kr,un,Kr,un,fn),mn=Kr,xn=un,un+=fn;fr.qd=mn,fr.rd=xn}}function Us(fr,wr){var Dr=fr.l.ma,Kr=Dr.Z==0||Dr.Z==1?fr.l.j:fr.C;if(Kr=fr.C<Kr?Kr:fr.C,_e(wr<=fr.l.o),wr>Kr){var un=fr.l.width,fn=Dr.ca,mn=Dr.tb+un*Kr,xn=fr.V,vn=fr.Ba+fr.c*Kr,Tn=fr.gc;_e(fr.ab==1),_e(Tn[0].hc==3),Bp(Tn[0],Kr,wr,xn,vn,fn,mn),Bs(Dr,Kr,wr,fn,mn,un)}fr.C=fr.Ma=wr}function Ms(fr,wr,Dr,Kr,un,fn,mn){var xn=fr.$/Kr,vn=fr.$%Kr,Tn=fr.m,$n=fr.s,ss=Dr+fr.$,is=ss;un=Dr+Kr*un;var Jn=Dr+Kr*fn,ys=280+$n.ua,us=fr.Pb?xn:16777216,Hn=0<$n.ua?$n.Wa:null,Wn=$n.wc,ms=ss<Jn?Cs($n,vn,xn):null;_e(fr.C<fn),_e(Jn<=un);var Es=!1;e:for(;;){for(;Es||ss<Jn;){var xs=0;if(xn>=us){var Os=ss-Dr;_e((us=fr).Pb),us.wd=us.m,us.xd=Os,0<us.s.ua&&Cn(us.s.Wa,us.s.vb),us=xn+Lx}if(vn&Wn||(ms=Cs($n,vn,xn)),_e(ms!=null),ms.Qb&&(wr[ss]=ms.qb,Es=!0),!Es)if(zr(Tn),ms.jc){xs=Tn,Os=wr;var Ls=ss,Ks=ms.pd[Br(xs)&Po-1];_e(ms.jc),256>Ks.g?(Or(xs,xs.u+Ks.g),Os[Ls]=Ks.value,xs=0):(Or(xs,xs.u+Ks.g-256),_e(256<=Ks.value),xs=Ks.value),xs==0&&(Es=!0)}else xs=As(ms.G[0],ms.H[0],Tn);if(Tn.h)break;if(Es||256>xs){if(!Es)if(ms.nd)wr[ss]=(ms.qb|xs<<8)>>>0;else{if(zr(Tn),Es=As(ms.G[1],ms.H[1],Tn),zr(Tn),Os=As(ms.G[2],ms.H[2],Tn),Ls=As(ms.G[3],ms.H[3],Tn),Tn.h)break;wr[ss]=(Ls<<24|Es<<16|xs<<8|Os)>>>0}if(Es=!1,++ss,++vn>=Kr&&(vn=0,++xn,mn!=null&&xn<=fn&&!(xn%16)&&mn(fr,xn),Hn!=null))for(;is<ss;)xs=wr[is++],Hn.X[(506832829*xs&4294967295)>>>Hn.Mb]=xs}else if(280>xs){if(xs=Zn(xs-256,Tn),Os=As(ms.G[4],ms.H[4],Tn),zr(Tn),Os=cs(Kr,Os=Zn(Os,Tn)),Tn.h)break;if(ss-Dr<Os||un-ss<xs)break e;for(Ls=0;Ls<xs;++Ls)wr[ss+Ls]=wr[ss+Ls-Os];for(ss+=xs,vn+=xs;vn>=Kr;)vn-=Kr,++xn,mn!=null&&xn<=fn&&!(xn%16)&&mn(fr,xn);if(_e(ss<=un),vn&Wn&&(ms=Cs($n,vn,xn)),Hn!=null)for(;is<ss;)xs=wr[is++],Hn.X[(506832829*xs&4294967295)>>>Hn.Mb]=xs}else{if(!(xs<ys))break e;for(Es=xs-280,_e(Hn!=null);is<ss;)xs=wr[is++],Hn.X[(506832829*xs&4294967295)>>>Hn.Mb]=xs;xs=ss,_e(!(Es>>>(Os=Hn).Xa)),wr[xs]=Os.X[Es],Es=!0}Es||_e(Tn.h==Lr(Tn))}if(fr.Pb&&Tn.h&&ss<un)_e(fr.m.h),fr.a=5,fr.m=fr.wd,fr.$=fr.xd,0<fr.s.ua&&Cn(fr.s.vb,fr.s.Wa);else{if(Tn.h)break e;mn!=null&&mn(fr,xn>fn?fn:xn),fr.a=0,fr.$=ss-Dr}return 1}return fr.a=3,0}function $s(fr){_e(fr!=null),fr.vc=null,fr.yc=null,fr.Ya=null;var wr=fr.Wa;wr!=null&&(wr.X=null),fr.vb=null,_e(fr!=null)}function Hs(){var fr=new Pu;return fr==null?null:(fr.a=0,fr.xb=p0,Gn("Predictor","VP8LPredictors"),Gn("Predictor","VP8LPredictors_C"),Gn("PredictorAdd","VP8LPredictorsAdd"),Gn("PredictorAdd","VP8LPredictorsAdd_C"),Ip=rs,Au=ps,Vo=ls,ko=Ts,FA=Fs,sA=Vs,iA=ts,vr.VP8LMapColor32b=ku,vr.VP8LMapColor8b=Pp,fr)}function _i(fr,wr,Dr,Kr,un){var fn=1,mn=[fr],xn=[wr],vn=Kr.m,Tn=Kr.s,$n=null,ss=0;e:for(;;){if(Dr)for(;fn&&Xr(vn,1);){var is=mn,Jn=xn,ys=Kr,us=1,Hn=ys.m,Wn=ys.gc[ys.ab],ms=Xr(Hn,2);if(ys.Oc&1<<ms)fn=0;else{switch(ys.Oc|=1<<ms,Wn.hc=ms,Wn.Ea=is[0],Wn.nc=Jn[0],Wn.K=[null],++ys.ab,_e(4>=ys.ab),ms){case 0:case 1:Wn.b=Xr(Hn,3)+2,us=_i(Zr(Wn.Ea,Wn.b),Zr(Wn.nc,Wn.b),0,ys,Wn.K),Wn.K=Wn.K[0];break;case 3:var Es,xs=Xr(Hn,8)+1,Os=16<xs?0:4<xs?1:2<xs?2:3;if(is[0]=Zr(Wn.Ea,Os),Wn.b=Os,Es=us=_i(xs,1,0,ys,Wn.K)){var Ls,Ks=xs,Ds=Wn,eo=1<<(8>>Ds.b),so=sr(eo);if(so==null)Es=0;else{var Zs=Ds.K[0],Ys=Ds.w;for(so[0]=Ds.K[0][0],Ls=1;Ls<1*Ks;++Ls)so[Ls]=hn(Zs[Ys+Ls],so[Ls-1]);for(;Ls<4*eo;++Ls)so[Ls]=0;Ds.K[0]=null,Ds.K[0]=so,Es=1}}us=Es;break;case 2:break;default:_e(0)}fn=us}}if(mn=mn[0],xn=xn[0],fn&&Xr(vn,1)&&!(fn=1<=(ss=Xr(vn,4))&&11>=ss)){Kr.a=3;break e}var co;if(co=fn)t:{var ao,qs,Eo,$o=Kr,_o=mn,Ho=xn,io=ss,qo=Dr,Xo=$o.m,So=$o.s,No=[null],Uo=1,xl=0,Kl=jx[io];r:for(;;){if(qo&&Xr(Xo,1)){var To=Xr(Xo,3)+2,cA=Zr(_o,To),pu=Zr(Ho,To),Qu=cA*pu;if(!_i(cA,pu,0,$o,No))break r;for(No=No[0],So.xc=To,ao=0;ao<Qu;++ao){var UA=No[ao]>>8&65535;No[ao]=UA,UA>=Uo&&(Uo=UA+1)}}if(Xo.h)break r;for(qs=0;5>qs;++qs){var mo=h0[qs];!qs&&0<io&&(mo+=1<<io),xl<mo&&(xl=mo)}var _m=ir(Uo*Kl,Rr),b0=Uo,C0=ir(b0,Qr);if(C0==null)var $p=null;else _e(65536>=b0),$p=C0;var mp=sr(xl);if($p==null||mp==null||_m==null){$o.a=1;break r}var Hp=_m;for(ao=Eo=0;ao<Uo;++ao){var Nl=$p[ao],Vu=Nl.G,$u=Nl.H,R0=0,Kp=1,S0=0;for(qs=0;5>qs;++qs){mo=h0[qs],Vu[qs]=Hp,$u[qs]=Eo,!qs&&0<io&&(mo+=1<<io);s:{var zp,wm=mo,Gp=$o,gp=mp,ty=Hp,ry=Eo,bm=0,OA=Gp.m,ny=Xr(OA,1);if(nr(gp,0,0,wm),ny){var sy=Xr(OA,1)+1,iy=Xr(OA,1),T0=Xr(OA,iy==0?1:8);gp[T0]=1,sy==2&&(gp[T0=Xr(OA,8)]=1);var Wp=1}else{var I0=sr(19),B0=Xr(OA,4)+4;if(19<B0){Gp.a=3;var qp=0;break s}for(zp=0;zp<B0;++zp)I0[Nx[zp]]=Xr(OA,3);var Cm=void 0,xp=void 0,P0=Gp,oy=I0,Xp=wm,N0=gp,Rm=0,MA=P0.m,F0=8,j0=ir(128,Rr);n:for(;Er(j0,0,7,oy,19);){if(Xr(MA,1)){var ay=2+2*Xr(MA,3);if((Cm=2+Xr(MA,ay))>Xp)break n}else Cm=Xp;for(xp=0;xp<Xp&&Cm--;){zr(MA);var L0=j0[0+(127&Br(MA))];Or(MA,MA.u+L0.g);var Hu=L0.value;if(16>Hu)N0[xp++]=Hu,Hu!=0&&(F0=Hu);else{var ly=Hu==16,k0=Hu-16,cy=Bx[k0],D0=Xr(MA,Ix[k0])+cy;if(xp+D0>Xp)break n;for(var Ay=ly?F0:0;0<D0--;)N0[xp++]=Ay}}Rm=1;break n}Rm||(P0.a=3),Wp=Rm}(Wp=Wp&&!OA.h)&&(bm=Er(ty,ry,8,gp,wm)),Wp&&bm!=0?qp=bm:(Gp.a=3,qp=0)}if(qp==0)break r;if(Kp&&Px[qs]==1&&(Kp=Hp[Eo].g==0),R0+=Hp[Eo].g,Eo+=qp,3>=qs){var yp,Sm=mp[0];for(yp=1;yp<mo;++yp)mp[yp]>Sm&&(Sm=mp[yp]);S0+=Sm}}if(Nl.nd=Kp,Nl.Qb=0,Kp&&(Nl.qb=(Vu[3][$u[3]+0].value<<24|Vu[1][$u[1]+0].value<<16|Vu[2][$u[2]+0].value)>>>0,R0==0&&256>Vu[0][$u[0]+0].value&&(Nl.Qb=1,Nl.qb+=Vu[0][$u[0]+0].value<<8)),Nl.jc=!Nl.Qb&&6>S0,Nl.jc){var Yp,AA=Nl;for(Yp=0;Yp<Po;++Yp){var QA=Yp,VA=AA.pd[QA],Jp=AA.G[0][AA.H[0]+QA];256<=Jp.value?(VA.g=Jp.g+256,VA.value=Jp.value):(VA.g=0,VA.value=0,QA>>=Rs(Jp,8,VA),QA>>=Rs(AA.G[1][AA.H[1]+QA],16,VA),QA>>=Rs(AA.G[2][AA.H[2]+QA],0,VA),Rs(AA.G[3][AA.H[3]+QA],24,VA))}}}So.vc=No,So.Wb=Uo,So.Ya=$p,So.yc=_m,co=1;break t}co=0}if(!(fn=co)){Kr.a=3;break e}if(0<ss){if(Tn.ua=1<<ss,!Kn(Tn.Wa,ss)){Kr.a=1,fn=0;break e}}else Tn.ua=0;var Tm=Kr,U0=mn,uy=xn,Im=Tm.s,Bm=Im.xc;if(Tm.c=U0,Tm.i=uy,Im.md=Zr(U0,Bm),Im.wc=Bm==0?-1:(1<<Bm)-1,Dr){Kr.xb=Vx;break e}if(($n=sr(mn*xn))==null){Kr.a=1,fn=0;break e}fn=(fn=Ms(Kr,$n,0,mn,xn,xn,null))&&!vn.h;break e}return fn?(un!=null?un[0]=$n:(_e($n==null),_e(Dr)),Kr.$=0,Dr||$s(Tn)):$s(Tn),fn}function Js(fr,wr){var Dr=fr.c*fr.i,Kr=Dr+wr+16*wr;return _e(fr.c<=wr),fr.V=sr(Kr),fr.V==null?(fr.Ta=null,fr.Ua=0,fr.a=1,0):(fr.Ta=fr.V,fr.Ua=fr.Ba+Dr+wr,1)}function vo(fr,wr){var Dr=fr.C,Kr=wr-Dr,un=fr.V,fn=fr.Ba+fr.c*Dr;for(_e(wr<=fr.l.o);0<Kr;){var mn=16<Kr?16:Kr,xn=fr.l.ma,vn=fr.l.width,Tn=vn*mn,$n=xn.ca,ss=xn.tb+vn*Dr,is=fr.Ta,Jn=fr.Ua;gs(fr,mn,un,fn),yo(is,Jn,$n,ss,Tn),Bs(xn,Dr,Dr+mn,$n,ss,vn),Kr-=mn,un+=mn*fr.c,Dr+=mn}_e(Dr==wr),fr.C=fr.Ma=wr}function wo(){this.ub=this.yd=this.td=this.Rb=0}function Ro(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Jo(){this.Fb=this.Bb=this.Cb=0,this.Zb=sr(4),this.Lb=sr(4)}function Eu(){this.Yb=function(){var fr=[];return function wr(Dr,Kr,un){for(var fn=un[Kr],mn=0;mn<fn&&(Dr.push(un.length>Kr+1?[]:0),!(un.length<Kr+1));mn++)wr(Dr[mn],Kr+1,un)}(fr,0,[3,11]),fr}()}function hA(){this.jb=sr(3),this.Wc=or([4,8],Eu),this.Xc=or([4,17],Eu)}function _u(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new sr(4),this.od=new sr(4)}function Ll(){this.ld=this.La=this.dd=this.tc=0}function Dl(){this.Na=this.la=0}function _l(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Xl(){this.ad=sr(384),this.Za=0,this.Ob=sr(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function rp(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ll),this.Y=0,this.ya=Array(new Xl),this.aa=0,this.l=new Yl}function XA(){this.y=sr(16),this.f=sr(8),this.ea=sr(8)}function wu(){this.cb=this.a=0,this.sc="",this.m=new pn,this.Od=new wo,this.Kc=new Ro,this.ed=new _u,this.Qa=new Jo,this.Ic=this.$c=this.Aa=0,this.D=new rp,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=ir(8,pn),this.ia=0,this.pb=ir(4,_l),this.Pa=new hA,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new XA),this.Hd=0,this.rb=Array(new Dl),this.sb=0,this.wa=Array(new Ll),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Xl),this.L=this.aa=0,this.gd=or([4,2],Ll),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Yl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function YA(){var fr=new wu;return fr!=null&&(fr.a=0,fr.sc="OK",fr.cb=0,fr.Xb=0,fp||(fp=bu)),fr}function ho(fr,wr,Dr){return fr.a==0&&(fr.a=wr,fr.sc=Dr,fr.cb=0),0}function JA(fr,wr,Dr){return 3<=Dr&&fr[wr+0]==157&&fr[wr+1]==1&&fr[wr+2]==42}function ZA(fr,wr){if(fr==null)return 0;if(fr.a=0,fr.sc="OK",wr==null)return ho(fr,2,"null VP8Io passed to VP8GetHeaders()");var Dr=wr.data,Kr=wr.w,un=wr.ha;if(4>un)return ho(fr,7,"Truncated header.");var fn=Dr[Kr+0]|Dr[Kr+1]<<8|Dr[Kr+2]<<16,mn=fr.Od;if(mn.Rb=!(1&fn),mn.td=fn>>1&7,mn.yd=fn>>4&1,mn.ub=fn>>5,3<mn.td)return ho(fr,3,"Incorrect keyframe parameters.");if(!mn.yd)return ho(fr,4,"Frame not displayable.");Kr+=3,un-=3;var xn=fr.Kc;if(mn.Rb){if(7>un)return ho(fr,7,"cannot parse picture header");if(!JA(Dr,Kr,un))return ho(fr,3,"Bad code word");xn.c=16383&(Dr[Kr+4]<<8|Dr[Kr+3]),xn.Td=Dr[Kr+4]>>6,xn.i=16383&(Dr[Kr+6]<<8|Dr[Kr+5]),xn.Ud=Dr[Kr+6]>>6,Kr+=7,un-=7,fr.za=xn.c+15>>4,fr.Ub=xn.i+15>>4,wr.width=xn.c,wr.height=xn.i,wr.Da=0,wr.j=0,wr.v=0,wr.va=wr.width,wr.o=wr.height,wr.da=0,wr.ib=wr.width,wr.hb=wr.height,wr.U=wr.width,wr.T=wr.height,nr((fn=fr.Pa).jb,0,255,fn.jb.length),_e((fn=fr.Qa)!=null),fn.Cb=0,fn.Bb=0,fn.Fb=1,nr(fn.Zb,0,0,fn.Zb.length),nr(fn.Lb,0,0,fn.Lb)}if(mn.ub>un)return ho(fr,7,"bad partition length");Ur(fn=fr.m,Dr,Kr,mn.ub),Kr+=mn.ub,un-=mn.ub,mn.Rb&&(xn.Ld=Yr(fn),xn.Kd=Yr(fn)),xn=fr.Qa;var vn,Tn=fr.Pa;if(_e(fn!=null),_e(xn!=null),xn.Cb=Yr(fn),xn.Cb){if(xn.Bb=Yr(fn),Yr(fn)){for(xn.Fb=Yr(fn),vn=0;4>vn;++vn)xn.Zb[vn]=Yr(fn)?Wr(fn,7):0;for(vn=0;4>vn;++vn)xn.Lb[vn]=Yr(fn)?Wr(fn,6):0}if(xn.Bb)for(vn=0;3>vn;++vn)Tn.jb[vn]=Yr(fn)?Vr(fn,8):255}else xn.Bb=0;if(fn.Ka)return ho(fr,3,"cannot parse segment header");if((xn=fr.ed).zd=Yr(fn),xn.Tb=Vr(fn,6),xn.wb=Vr(fn,3),xn.Pc=Yr(fn),xn.Pc&&Yr(fn)){for(Tn=0;4>Tn;++Tn)Yr(fn)&&(xn.vd[Tn]=Wr(fn,6));for(Tn=0;4>Tn;++Tn)Yr(fn)&&(xn.od[Tn]=Wr(fn,6))}if(fr.L=xn.Tb==0?0:xn.zd?1:2,fn.Ka)return ho(fr,3,"cannot parse filter header");var $n=un;if(un=vn=Kr,Kr=vn+$n,xn=$n,fr.Xb=(1<<Vr(fr.m,2))-1,$n<3*(Tn=fr.Xb))Dr=7;else{for(vn+=3*Tn,xn-=3*Tn,$n=0;$n<Tn;++$n){var ss=Dr[un+0]|Dr[un+1]<<8|Dr[un+2]<<16;ss>xn&&(ss=xn),Ur(fr.Jc[+$n],Dr,vn,ss),vn+=ss,xn-=ss,un+=3}Ur(fr.Jc[+Tn],Dr,vn,xn),Dr=vn<Kr?0:5}if(Dr!=0)return ho(fr,Dr,"cannot parse partitions");for(Dr=Vr(vn=fr.m,7),un=Yr(vn)?Wr(vn,4):0,Kr=Yr(vn)?Wr(vn,4):0,xn=Yr(vn)?Wr(vn,4):0,Tn=Yr(vn)?Wr(vn,4):0,vn=Yr(vn)?Wr(vn,4):0,$n=fr.Qa,ss=0;4>ss;++ss){if($n.Cb){var is=$n.Zb[ss];$n.Fb||(is+=Dr)}else{if(0<ss){fr.pb[ss]=fr.pb[0];continue}is=Dr}var Jn=fr.pb[ss];Jn.Sc[0]=ym[ro(is+un,127)],Jn.Sc[1]=vm[ro(is+0,127)],Jn.Eb[0]=2*ym[ro(is+Kr,127)],Jn.Eb[1]=101581*vm[ro(is+xn,127)]>>16,8>Jn.Eb[1]&&(Jn.Eb[1]=8),Jn.Qc[0]=ym[ro(is+Tn,117)],Jn.Qc[1]=vm[ro(is+vn,127)],Jn.lc=is+vn}if(!mn.Rb)return ho(fr,4,"Not a key frame.");for(Yr(fn),mn=fr.Pa,Dr=0;4>Dr;++Dr){for(un=0;8>un;++un)for(Kr=0;3>Kr;++Kr)for(xn=0;11>xn;++xn)Tn=dn(fn,Mx[Dr][un][Kr][xn])?Vr(fn,8):Ux[Dr][un][Kr][xn],mn.Wc[Dr][un].Yb[Kr][xn]=Tn;for(un=0;17>un;++un)mn.Xc[Dr][un]=mn.Wc[Dr][Qx[un]]}return fr.kc=Yr(fn),fr.kc&&(fr.Bd=Vr(fn,8)),fr.cb=1}function bu(fr,wr,Dr,Kr,un,fn,mn){var xn=wr[un].Yb[Dr];for(Dr=0;16>un;++un){if(!dn(fr,xn[Dr+0]))return un;for(;!dn(fr,xn[Dr+1]);)if(xn=wr[++un].Yb[0],Dr=0,un==16)return 16;var vn=wr[un+1].Yb;if(dn(fr,xn[Dr+2])){var Tn=fr,$n=0;if(dn(Tn,(is=xn)[(ss=Dr)+3]))if(dn(Tn,is[ss+6])){for(xn=0,ss=2*($n=dn(Tn,is[ss+8]))+(is=dn(Tn,is[ss+9+$n])),$n=0,is=kx[ss];is[xn];++xn)$n+=$n+dn(Tn,is[xn]);$n+=3+(8<<ss)}else dn(Tn,is[ss+7])?($n=7+2*dn(Tn,165),$n+=dn(Tn,145)):$n=5+dn(Tn,159);else $n=dn(Tn,is[ss+4])?3+dn(Tn,is[ss+5]):2;xn=vn[2]}else $n=1,xn=vn[1];vn=mn+Dx[un],0>(Tn=fr).b&&Gr(Tn);var ss,is=Tn.b,Jn=(ss=Tn.Ca>>1)-(Tn.I>>is)>>31;--Tn.b,Tn.Ca+=Jn,Tn.Ca|=1,Tn.I-=(ss+1&Jn)<<is,fn[vn]=(($n^Jn)-Jn)*Kr[(0<un)+0]}return 16}function eu(fr){var wr=fr.rb[fr.sb-1];wr.la=0,wr.Na=0,nr(fr.zc,0,0,fr.zc.length),fr.ja=0}function Cu(fr,wr){if(fr==null)return 0;if(wr==null)return ho(fr,2,"NULL VP8Io parameter in VP8Decode().");if(!fr.cb&&!ZA(fr,wr))return 0;if(_e(fr.cb),wr.ac==null||wr.ac(wr)){wr.ob&&(fr.L=0);var Dr=Vp[fr.L];if(fr.L==2?(fr.yb=0,fr.zb=0):(fr.yb=wr.v-Dr>>4,fr.zb=wr.j-Dr>>4,0>fr.yb&&(fr.yb=0),0>fr.zb&&(fr.zb=0)),fr.Va=wr.o+15+Dr>>4,fr.Hb=wr.va+15+Dr>>4,fr.Hb>fr.za&&(fr.Hb=fr.za),fr.Va>fr.Ub&&(fr.Va=fr.Ub),0<fr.L){var Kr=fr.ed;for(Dr=0;4>Dr;++Dr){var un;if(fr.Qa.Cb){var fn=fr.Qa.Lb[Dr];fr.Qa.Fb||(fn+=Kr.Tb)}else fn=Kr.Tb;for(un=0;1>=un;++un){var mn=fr.gd[Dr][un],xn=fn;if(Kr.Pc&&(xn+=Kr.vd[0],un&&(xn+=Kr.od[0])),0<(xn=0>xn?0:63<xn?63:xn)){var vn=xn;0<Kr.wb&&(vn=4<Kr.wb?vn>>2:vn>>1)>9-Kr.wb&&(vn=9-Kr.wb),1>vn&&(vn=1),mn.dd=vn,mn.tc=2*xn+vn,mn.ld=40<=xn?2:15<=xn?1:0}else mn.tc=0;mn.La=un}}}Dr=0}else ho(fr,6,"Frame setup failed"),Dr=fr.a;if(Dr=Dr==0){if(Dr){fr.$c=0,0<fr.Aa||(fr.Ic=ey);e:{Dr=fr.Ic,Kr=4*(vn=fr.za);var Tn=32*vn,$n=vn+1,ss=0<fr.L?vn*(0<fr.Aa?2:1):0,is=(fr.Aa==2?2:1)*vn;if((mn=Kr+832+(un=3*(16*Dr+Vp[fr.L])/2*Tn)+(fn=fr.Fa!=null&&0<fr.Fa.length?fr.Kc.c*fr.Kc.i:0))!=mn)Dr=0;else{if(mn>fr.Vb){if(fr.Vb=0,fr.Ec=sr(mn),fr.Fc=0,fr.Ec==null){Dr=ho(fr,1,"no memory during frame initialization.");break e}fr.Vb=mn}mn=fr.Ec,xn=fr.Fc,fr.Ac=mn,fr.Bc=xn,xn+=Kr,fr.Gd=ir(Tn,XA),fr.Hd=0,fr.rb=ir($n+1,Dl),fr.sb=1,fr.wa=ss?ir(ss,Ll):null,fr.Y=0,fr.D.Nb=0,fr.D.wa=fr.wa,fr.D.Y=fr.Y,0<fr.Aa&&(fr.D.Y+=vn),_e(!0),fr.oc=mn,fr.pc=xn,xn+=832,fr.ya=ir(is,Xl),fr.aa=0,fr.D.ya=fr.ya,fr.D.aa=fr.aa,fr.Aa==2&&(fr.D.aa+=vn),fr.R=16*vn,fr.B=8*vn,vn=(Tn=Vp[fr.L])*fr.R,Tn=Tn/2*fr.B,fr.sa=mn,fr.ta=xn+vn,fr.qa=fr.sa,fr.ra=fr.ta+16*Dr*fr.R+Tn,fr.Ha=fr.qa,fr.Ia=fr.ra+8*Dr*fr.B+Tn,fr.$c=0,xn+=un,fr.mb=fn?mn:null,fr.nb=fn?xn:null,_e(xn+fn<=fr.Fc+fr.Vb),eu(fr),nr(fr.Ac,fr.Bc,0,Kr),Dr=1}}if(Dr){if(wr.ka=0,wr.y=fr.sa,wr.O=fr.ta,wr.f=fr.qa,wr.N=fr.ra,wr.ea=fr.Ha,wr.Vd=fr.Ia,wr.fa=fr.R,wr.Rc=fr.B,wr.F=null,wr.J=0,!Fp){for(Dr=-255;255>=Dr;++Dr)Co[255+Dr]=0>Dr?-Dr:Dr;for(Dr=-1020;1020>=Dr;++Dr)aA[1020+Dr]=-128>Dr?-128:127<Dr?127:Dr;for(Dr=-112;112>=Dr;++Dr)hp[112+Dr]=-16>Dr?-16:15<Dr?15:Dr;for(Dr=-255;510>=Dr;++Dr)Mu[255+Dr]=0>Dr?0:255<Dr?255:Dr;Fp=1}Du=_c,oA=pA,Ap=tu,Do=no,ga=Zl,xo=Jl,Uu=_A,Np=Tl,up=bA,uu=cu,du=wA,jA=tA,hu=CA,Ou=Ql,fu=eA,LA=Go,dp=bo,xa=Bu,Pl[0]=Zo,Pl[1]=np,Pl[2]=Ol,Pl[3]=ip,Pl[4]=Tu,Pl[5]=xA,Pl[6]=Ko,Pl[7]=nu,Pl[8]=vA,Pl[9]=yA,kA[0]=Ul,kA[1]=sp,kA[2]=Cl,kA[3]=mA,kA[4]=fo,kA[5]=Su,kA[6]=ru,lA[0]=Sl,lA[1]=Ru,lA[2]=Iu,lA[3]=Rl,lA[4]=to,lA[5]=su,lA[6]=iu,Dr=1}else Dr=0}Dr&&(Dr=function(Jn,ys){for(Jn.M=0;Jn.M<Jn.Va;++Jn.M){var us,Hn=Jn.Jc[Jn.M&Jn.Xb],Wn=Jn.m,ms=Jn;for(us=0;us<ms.za;++us){var Es=Wn,xs=ms,Os=xs.Ac,Ls=xs.Bc+4*us,Ks=xs.zc,Ds=xs.ya[xs.aa+us];if(xs.Qa.Bb?Ds.$b=dn(Es,xs.Pa.jb[0])?2+dn(Es,xs.Pa.jb[2]):dn(Es,xs.Pa.jb[1]):Ds.$b=0,xs.kc&&(Ds.Ad=dn(Es,xs.Bd)),Ds.Za=!dn(Es,145)+0,Ds.Za){var eo=Ds.Ob,so=0;for(xs=0;4>xs;++xs){var Zs,Ys=Ks[0+xs];for(Zs=0;4>Zs;++Zs){Ys=Ox[Os[Ls+Zs]][Ys];for(var co=f0[dn(Es,Ys[0])];0<co;)co=f0[2*co+dn(Es,Ys[co])];Ys=-co,Os[Ls+Zs]=Ys}rr(eo,so,Os,Ls,4),so+=4,Ks[0+xs]=Ys}}else Ys=dn(Es,156)?dn(Es,128)?1:3:dn(Es,163)?2:0,Ds.Ob[0]=Ys,nr(Os,Ls,Ys,4),nr(Ks,0,Ys,4);Ds.Dd=dn(Es,142)?dn(Es,114)?dn(Es,183)?1:3:2:0}if(ms.m.Ka)return ho(Jn,7,"Premature end-of-partition0 encountered.");for(;Jn.ja<Jn.za;++Jn.ja){if(ms=Hn,Es=(Wn=Jn).rb[Wn.sb-1],Os=Wn.rb[Wn.sb+Wn.ja],us=Wn.ya[Wn.aa+Wn.ja],Ls=Wn.kc?us.Ad:0)Es.la=Os.la=0,us.Za||(Es.Na=Os.Na=0),us.Hc=0,us.Gc=0,us.ia=0;else{var ao,qs;if(Es=Os,Os=ms,Ls=Wn.Pa.Xc,Ks=Wn.ya[Wn.aa+Wn.ja],Ds=Wn.pb[Ks.$b],xs=Ks.ad,eo=0,so=Wn.rb[Wn.sb-1],Ys=Zs=0,nr(xs,eo,0,384),Ks.Za)var Eo=0,$o=Ls[3];else{co=sr(16);var _o=Es.Na+so.Na;if(_o=fp(Os,Ls[1],_o,Ds.Eb,0,co,0),Es.Na=so.Na=(0<_o)+0,1<_o)Du(co,0,xs,eo);else{var Ho=co[0]+3>>3;for(co=0;256>co;co+=16)xs[eo+co]=Ho}Eo=1,$o=Ls[0]}var io=15&Es.la,qo=15&so.la;for(co=0;4>co;++co){var Xo=1&qo;for(Ho=qs=0;4>Ho;++Ho)io=io>>1|(Xo=(_o=fp(Os,$o,_o=Xo+(1&io),Ds.Sc,Eo,xs,eo))>Eo)<<7,qs=qs<<2|(3<_o?3:1<_o?2:xs[eo+0]!=0),eo+=16;io>>=4,qo=qo>>1|Xo<<7,Zs=(Zs<<8|qs)>>>0}for($o=io,Eo=qo>>4,ao=0;4>ao;ao+=2){for(qs=0,io=Es.la>>4+ao,qo=so.la>>4+ao,co=0;2>co;++co){for(Xo=1&qo,Ho=0;2>Ho;++Ho)_o=Xo+(1&io),io=io>>1|(Xo=0<(_o=fp(Os,Ls[2],_o,Ds.Qc,0,xs,eo)))<<3,qs=qs<<2|(3<_o?3:1<_o?2:xs[eo+0]!=0),eo+=16;io>>=2,qo=qo>>1|Xo<<5}Ys|=qs<<4*ao,$o|=io<<4<<ao,Eo|=(240&qo)<<ao}Es.la=$o,so.la=Eo,Ks.Hc=Zs,Ks.Gc=Ys,Ks.ia=43690&Ys?0:Ds.ia,Ls=!(Zs|Ys)}if(0<Wn.L&&(Wn.wa[Wn.Y+Wn.ja]=Wn.gd[us.$b][us.Za],Wn.wa[Wn.Y+Wn.ja].La|=!Ls),ms.Ka)return ho(Jn,7,"Premature end-of-file encountered.")}if(eu(Jn),Wn=ys,ms=1,us=(Hn=Jn).D,Es=0<Hn.L&&Hn.M>=Hn.zb&&Hn.M<=Hn.Va,Hn.Aa==0)e:{if(us.M=Hn.M,us.uc=Es,$l(Hn,us),ms=1,us=(qs=Hn.D).Nb,Es=(Ys=Vp[Hn.L])*Hn.R,Os=Ys/2*Hn.B,co=16*us*Hn.R,Ho=8*us*Hn.B,Ls=Hn.sa,Ks=Hn.ta-Es+co,Ds=Hn.qa,xs=Hn.ra-Os+Ho,eo=Hn.Ha,so=Hn.Ia-Os+Ho,qo=(io=qs.M)==0,Zs=io>=Hn.Va-1,Hn.Aa==2&&$l(Hn,qs),qs.uc)for(Xo=(_o=Hn).D.M,_e(_o.D.uc),qs=_o.yb;qs<_o.Hb;++qs){Eo=qs,$o=Xo;var So=(No=(mo=_o).D).Nb;ao=mo.R;var No=No.wa[No.Y+Eo],Uo=mo.sa,xl=mo.ta+16*So*ao+16*Eo,Kl=No.dd,To=No.tc;if(To!=0)if(_e(3<=To),mo.L==1)0<Eo&&LA(Uo,xl,ao,To+4),No.La&&xa(Uo,xl,ao,To),0<$o&&fu(Uo,xl,ao,To+4),No.La&&dp(Uo,xl,ao,To);else{var cA=mo.B,pu=mo.qa,Qu=mo.ra+8*So*cA+8*Eo,UA=mo.Ha,mo=mo.Ia+8*So*cA+8*Eo;So=No.ld,0<Eo&&(Np(Uo,xl,ao,To+4,Kl,So),uu(pu,Qu,UA,mo,cA,To+4,Kl,So)),No.La&&(jA(Uo,xl,ao,To,Kl,So),Ou(pu,Qu,UA,mo,cA,To,Kl,So)),0<$o&&(Uu(Uo,xl,ao,To+4,Kl,So),up(pu,Qu,UA,mo,cA,To+4,Kl,So)),No.La&&(du(Uo,xl,ao,To,Kl,So),hu(pu,Qu,UA,mo,cA,To,Kl,So))}}if(Hn.ia&&alert("todo:DitherRow"),Wn.put!=null){if(qs=16*io,io=16*(io+1),qo?(Wn.y=Hn.sa,Wn.O=Hn.ta+co,Wn.f=Hn.qa,Wn.N=Hn.ra+Ho,Wn.ea=Hn.Ha,Wn.W=Hn.Ia+Ho):(qs-=Ys,Wn.y=Ls,Wn.O=Ks,Wn.f=Ds,Wn.N=xs,Wn.ea=eo,Wn.W=so),Zs||(io-=Ys),io>Wn.o&&(io=Wn.o),Wn.F=null,Wn.J=null,Hn.Fa!=null&&0<Hn.Fa.length&&qs<io&&(Wn.J=PA(Hn,Wn,qs,io-qs),Wn.F=Hn.mb,Wn.F==null&&Wn.F.length==0)){ms=ho(Hn,3,"Could not decode alpha data.");break e}qs<Wn.j&&(Ys=Wn.j-qs,qs=Wn.j,_e(!(1&Ys)),Wn.O+=Hn.R*Ys,Wn.N+=Hn.B*(Ys>>1),Wn.W+=Hn.B*(Ys>>1),Wn.F!=null&&(Wn.J+=Wn.width*Ys)),qs<io&&(Wn.O+=Wn.v,Wn.N+=Wn.v>>1,Wn.W+=Wn.v>>1,Wn.F!=null&&(Wn.J+=Wn.v),Wn.ka=qs-Wn.j,Wn.U=Wn.va-Wn.v,Wn.T=io-qs,ms=Wn.put(Wn))}us+1!=Hn.Ic||Zs||(rr(Hn.sa,Hn.ta-Es,Ls,Ks+16*Hn.R,Es),rr(Hn.qa,Hn.ra-Os,Ds,xs+8*Hn.B,Os),rr(Hn.Ha,Hn.Ia-Os,eo,so+8*Hn.B,Os))}if(!ms)return ho(Jn,6,"Output aborted.")}return 1}(fr,wr)),wr.bc!=null&&wr.bc(wr),Dr&=1}return Dr?(fr.cb=0,Dr):0}function Mo(fr,wr,Dr,Kr,un){un=fr[wr+Dr+32*Kr]+(un>>3),fr[wr+Dr+32*Kr]=-256&un?0>un?0:255:un}function fA(fr,wr,Dr,Kr,un,fn){Mo(fr,wr,0,Dr,Kr+un),Mo(fr,wr,1,Dr,Kr+fn),Mo(fr,wr,2,Dr,Kr-fn),Mo(fr,wr,3,Dr,Kr-un)}function po(fr){return(20091*fr>>16)+fr}function Lo(fr,wr,Dr,Kr){var un,fn=0,mn=sr(16);for(un=0;4>un;++un){var xn=fr[wr+0]+fr[wr+8],vn=fr[wr+0]-fr[wr+8],Tn=(35468*fr[wr+4]>>16)-po(fr[wr+12]),$n=po(fr[wr+4])+(35468*fr[wr+12]>>16);mn[fn+0]=xn+$n,mn[fn+1]=vn+Tn,mn[fn+2]=vn-Tn,mn[fn+3]=xn-$n,fn+=4,wr++}for(un=fn=0;4>un;++un)xn=(fr=mn[fn+0]+4)+mn[fn+8],vn=fr-mn[fn+8],Tn=(35468*mn[fn+4]>>16)-po(mn[fn+12]),Mo(Dr,Kr,0,0,xn+($n=po(mn[fn+4])+(35468*mn[fn+12]>>16))),Mo(Dr,Kr,1,0,vn+Tn),Mo(Dr,Kr,2,0,vn-Tn),Mo(Dr,Kr,3,0,xn-$n),fn++,Kr+=32}function Jl(fr,wr,Dr,Kr){var un=fr[wr+0]+4,fn=35468*fr[wr+4]>>16,mn=po(fr[wr+4]),xn=35468*fr[wr+1]>>16;fA(Dr,Kr,0,un+mn,fr=po(fr[wr+1]),xn),fA(Dr,Kr,1,un+fn,fr,xn),fA(Dr,Kr,2,un-fn,fr,xn),fA(Dr,Kr,3,un-mn,fr,xn)}function pA(fr,wr,Dr,Kr,un){Lo(fr,wr,Dr,Kr),un&&Lo(fr,wr+16,Dr,Kr+4)}function tu(fr,wr,Dr,Kr){oA(fr,wr+0,Dr,Kr,1),oA(fr,wr+32,Dr,Kr+128,1)}function no(fr,wr,Dr,Kr){var un;for(fr=fr[wr+0]+4,un=0;4>un;++un)for(wr=0;4>wr;++wr)Mo(Dr,Kr,wr,un,fr)}function Zl(fr,wr,Dr,Kr){fr[wr+0]&&Do(fr,wr+0,Dr,Kr),fr[wr+16]&&Do(fr,wr+16,Dr,Kr+4),fr[wr+32]&&Do(fr,wr+32,Dr,Kr+128),fr[wr+48]&&Do(fr,wr+48,Dr,Kr+128+4)}function _c(fr,wr,Dr,Kr){var un,fn=sr(16);for(un=0;4>un;++un){var mn=fr[wr+0+un]+fr[wr+12+un],xn=fr[wr+4+un]+fr[wr+8+un],vn=fr[wr+4+un]-fr[wr+8+un],Tn=fr[wr+0+un]-fr[wr+12+un];fn[0+un]=mn+xn,fn[8+un]=mn-xn,fn[4+un]=Tn+vn,fn[12+un]=Tn-vn}for(un=0;4>un;++un)mn=(fr=fn[0+4*un]+3)+fn[3+4*un],xn=fn[1+4*un]+fn[2+4*un],vn=fn[1+4*un]-fn[2+4*un],Tn=fr-fn[3+4*un],Dr[Kr+0]=mn+xn>>3,Dr[Kr+16]=Tn+vn>>3,Dr[Kr+32]=mn-xn>>3,Dr[Kr+48]=Tn-vn>>3,Kr+=64}function wl(fr,wr,Dr){var Kr,un=wr-32,fn=Wo,mn=255-fr[un-1];for(Kr=0;Kr<Dr;++Kr){var xn,vn=fn,Tn=mn+fr[wr-1];for(xn=0;xn<Dr;++xn)fr[wr+xn]=vn[Tn+fr[un+xn]];wr+=32}}function np(fr,wr){wl(fr,wr,4)}function Ru(fr,wr){wl(fr,wr,8)}function sp(fr,wr){wl(fr,wr,16)}function Cl(fr,wr){var Dr;for(Dr=0;16>Dr;++Dr)rr(fr,wr+32*Dr,fr,wr-32,16)}function mA(fr,wr){var Dr;for(Dr=16;0<Dr;--Dr)nr(fr,wr,fr[wr-1],16),wr+=32}function gA(fr,wr,Dr){var Kr;for(Kr=0;16>Kr;++Kr)nr(wr,Dr+32*Kr,fr,16)}function Ul(fr,wr){var Dr,Kr=16;for(Dr=0;16>Dr;++Dr)Kr+=fr[wr-1+32*Dr]+fr[wr+Dr-32];gA(Kr>>5,fr,wr)}function fo(fr,wr){var Dr,Kr=8;for(Dr=0;16>Dr;++Dr)Kr+=fr[wr-1+32*Dr];gA(Kr>>4,fr,wr)}function Su(fr,wr){var Dr,Kr=8;for(Dr=0;16>Dr;++Dr)Kr+=fr[wr+Dr-32];gA(Kr>>4,fr,wr)}function ru(fr,wr){gA(128,fr,wr)}function zs(fr,wr,Dr){return fr+2*wr+Dr+2>>2}function Ol(fr,wr){var Dr,Kr=wr-32;for(Kr=new Uint8Array([zs(fr[Kr-1],fr[Kr+0],fr[Kr+1]),zs(fr[Kr+0],fr[Kr+1],fr[Kr+2]),zs(fr[Kr+1],fr[Kr+2],fr[Kr+3]),zs(fr[Kr+2],fr[Kr+3],fr[Kr+4])]),Dr=0;4>Dr;++Dr)rr(fr,wr+32*Dr,Kr,0,Kr.length)}function ip(fr,wr){var Dr=fr[wr-1],Kr=fr[wr-1+32],un=fr[wr-1+64],fn=fr[wr-1+96];En(fr,wr+0,16843009*zs(fr[wr-1-32],Dr,Kr)),En(fr,wr+32,16843009*zs(Dr,Kr,un)),En(fr,wr+64,16843009*zs(Kr,un,fn)),En(fr,wr+96,16843009*zs(un,fn,fn))}function Zo(fr,wr){var Dr,Kr=4;for(Dr=0;4>Dr;++Dr)Kr+=fr[wr+Dr-32]+fr[wr-1+32*Dr];for(Kr>>=3,Dr=0;4>Dr;++Dr)nr(fr,wr+32*Dr,Kr,4)}function Tu(fr,wr){var Dr=fr[wr-1+0],Kr=fr[wr-1+32],un=fr[wr-1+64],fn=fr[wr-1-32],mn=fr[wr+0-32],xn=fr[wr+1-32],vn=fr[wr+2-32],Tn=fr[wr+3-32];fr[wr+0+96]=zs(Kr,un,fr[wr-1+96]),fr[wr+1+96]=fr[wr+0+64]=zs(Dr,Kr,un),fr[wr+2+96]=fr[wr+1+64]=fr[wr+0+32]=zs(fn,Dr,Kr),fr[wr+3+96]=fr[wr+2+64]=fr[wr+1+32]=fr[wr+0+0]=zs(mn,fn,Dr),fr[wr+3+64]=fr[wr+2+32]=fr[wr+1+0]=zs(xn,mn,fn),fr[wr+3+32]=fr[wr+2+0]=zs(vn,xn,mn),fr[wr+3+0]=zs(Tn,vn,xn)}function Ko(fr,wr){var Dr=fr[wr+1-32],Kr=fr[wr+2-32],un=fr[wr+3-32],fn=fr[wr+4-32],mn=fr[wr+5-32],xn=fr[wr+6-32],vn=fr[wr+7-32];fr[wr+0+0]=zs(fr[wr+0-32],Dr,Kr),fr[wr+1+0]=fr[wr+0+32]=zs(Dr,Kr,un),fr[wr+2+0]=fr[wr+1+32]=fr[wr+0+64]=zs(Kr,un,fn),fr[wr+3+0]=fr[wr+2+32]=fr[wr+1+64]=fr[wr+0+96]=zs(un,fn,mn),fr[wr+3+32]=fr[wr+2+64]=fr[wr+1+96]=zs(fn,mn,xn),fr[wr+3+64]=fr[wr+2+96]=zs(mn,xn,vn),fr[wr+3+96]=zs(xn,vn,vn)}function xA(fr,wr){var Dr=fr[wr-1+0],Kr=fr[wr-1+32],un=fr[wr-1+64],fn=fr[wr-1-32],mn=fr[wr+0-32],xn=fr[wr+1-32],vn=fr[wr+2-32],Tn=fr[wr+3-32];fr[wr+0+0]=fr[wr+1+64]=fn+mn+1>>1,fr[wr+1+0]=fr[wr+2+64]=mn+xn+1>>1,fr[wr+2+0]=fr[wr+3+64]=xn+vn+1>>1,fr[wr+3+0]=vn+Tn+1>>1,fr[wr+0+96]=zs(un,Kr,Dr),fr[wr+0+64]=zs(Kr,Dr,fn),fr[wr+0+32]=fr[wr+1+96]=zs(Dr,fn,mn),fr[wr+1+32]=fr[wr+2+96]=zs(fn,mn,xn),fr[wr+2+32]=fr[wr+3+96]=zs(mn,xn,vn),fr[wr+3+32]=zs(xn,vn,Tn)}function nu(fr,wr){var Dr=fr[wr+0-32],Kr=fr[wr+1-32],un=fr[wr+2-32],fn=fr[wr+3-32],mn=fr[wr+4-32],xn=fr[wr+5-32],vn=fr[wr+6-32],Tn=fr[wr+7-32];fr[wr+0+0]=Dr+Kr+1>>1,fr[wr+1+0]=fr[wr+0+64]=Kr+un+1>>1,fr[wr+2+0]=fr[wr+1+64]=un+fn+1>>1,fr[wr+3+0]=fr[wr+2+64]=fn+mn+1>>1,fr[wr+0+32]=zs(Dr,Kr,un),fr[wr+1+32]=fr[wr+0+96]=zs(Kr,un,fn),fr[wr+2+32]=fr[wr+1+96]=zs(un,fn,mn),fr[wr+3+32]=fr[wr+2+96]=zs(fn,mn,xn),fr[wr+3+64]=zs(mn,xn,vn),fr[wr+3+96]=zs(xn,vn,Tn)}function yA(fr,wr){var Dr=fr[wr-1+0],Kr=fr[wr-1+32],un=fr[wr-1+64],fn=fr[wr-1+96];fr[wr+0+0]=Dr+Kr+1>>1,fr[wr+2+0]=fr[wr+0+32]=Kr+un+1>>1,fr[wr+2+32]=fr[wr+0+64]=un+fn+1>>1,fr[wr+1+0]=zs(Dr,Kr,un),fr[wr+3+0]=fr[wr+1+32]=zs(Kr,un,fn),fr[wr+3+32]=fr[wr+1+64]=zs(un,fn,fn),fr[wr+3+64]=fr[wr+2+64]=fr[wr+0+96]=fr[wr+1+96]=fr[wr+2+96]=fr[wr+3+96]=fn}function vA(fr,wr){var Dr=fr[wr-1+0],Kr=fr[wr-1+32],un=fr[wr-1+64],fn=fr[wr-1+96],mn=fr[wr-1-32],xn=fr[wr+0-32],vn=fr[wr+1-32],Tn=fr[wr+2-32];fr[wr+0+0]=fr[wr+2+32]=Dr+mn+1>>1,fr[wr+0+32]=fr[wr+2+64]=Kr+Dr+1>>1,fr[wr+0+64]=fr[wr+2+96]=un+Kr+1>>1,fr[wr+0+96]=fn+un+1>>1,fr[wr+3+0]=zs(xn,vn,Tn),fr[wr+2+0]=zs(mn,xn,vn),fr[wr+1+0]=fr[wr+3+32]=zs(Dr,mn,xn),fr[wr+1+32]=fr[wr+3+64]=zs(Kr,Dr,mn),fr[wr+1+64]=fr[wr+3+96]=zs(un,Kr,Dr),fr[wr+1+96]=zs(fn,un,Kr)}function Iu(fr,wr){var Dr;for(Dr=0;8>Dr;++Dr)rr(fr,wr+32*Dr,fr,wr-32,8)}function Rl(fr,wr){var Dr;for(Dr=0;8>Dr;++Dr)nr(fr,wr,fr[wr-1],8),wr+=32}function zo(fr,wr,Dr){var Kr;for(Kr=0;8>Kr;++Kr)nr(wr,Dr+32*Kr,fr,8)}function Sl(fr,wr){var Dr,Kr=8;for(Dr=0;8>Dr;++Dr)Kr+=fr[wr+Dr-32]+fr[wr-1+32*Dr];zo(Kr>>4,fr,wr)}function su(fr,wr){var Dr,Kr=4;for(Dr=0;8>Dr;++Dr)Kr+=fr[wr+Dr-32];zo(Kr>>3,fr,wr)}function to(fr,wr){var Dr,Kr=4;for(Dr=0;8>Dr;++Dr)Kr+=fr[wr-1+32*Dr];zo(Kr>>3,fr,wr)}function iu(fr,wr){zo(128,fr,wr)}function EA(fr,wr,Dr){var Kr=fr[wr-Dr],un=fr[wr+0],fn=3*(un-Kr)+fm[1020+fr[wr-2*Dr]-fr[wr+Dr]],mn=jp[112+(fn+4>>3)];fr[wr-Dr]=Wo[255+Kr+jp[112+(fn+3>>3)]],fr[wr+0]=Wo[255+un-mn]}function ou(fr,wr,Dr,Kr){var un=fr[wr+0],fn=fr[wr+Dr];return $a[255+fr[wr-2*Dr]-fr[wr-Dr]]>Kr||$a[255+fn-un]>Kr}function au(fr,wr,Dr,Kr){return 4*$a[255+fr[wr-Dr]-fr[wr+0]]+$a[255+fr[wr-2*Dr]-fr[wr+Dr]]<=Kr}function lu(fr,wr,Dr,Kr,un){var fn=fr[wr-3*Dr],mn=fr[wr-2*Dr],xn=fr[wr-Dr],vn=fr[wr+0],Tn=fr[wr+Dr],$n=fr[wr+2*Dr],ss=fr[wr+3*Dr];return 4*$a[255+xn-vn]+$a[255+mn-Tn]>Kr?0:$a[255+fr[wr-4*Dr]-fn]<=un&&$a[255+fn-mn]<=un&&$a[255+mn-xn]<=un&&$a[255+ss-$n]<=un&&$a[255+$n-Tn]<=un&&$a[255+Tn-vn]<=un}function eA(fr,wr,Dr,Kr){var un=2*Kr+1;for(Kr=0;16>Kr;++Kr)au(fr,wr+Kr,Dr,un)&&EA(fr,wr+Kr,Dr)}function Go(fr,wr,Dr,Kr){var un=2*Kr+1;for(Kr=0;16>Kr;++Kr)au(fr,wr+Kr*Dr,1,un)&&EA(fr,wr+Kr*Dr,1)}function bo(fr,wr,Dr,Kr){var un;for(un=3;0<un;--un)eA(fr,wr+=4*Dr,Dr,Kr)}function Bu(fr,wr,Dr,Kr){var un;for(un=3;0<un;--un)Go(fr,wr+=4,Dr,Kr)}function Ml(fr,wr,Dr,Kr,un,fn,mn,xn){for(fn=2*fn+1;0<un--;){if(lu(fr,wr,Dr,fn,mn))if(ou(fr,wr,Dr,xn))EA(fr,wr,Dr);else{var vn=fr,Tn=wr,$n=Dr,ss=vn[Tn-2*$n],is=vn[Tn-$n],Jn=vn[Tn+0],ys=vn[Tn+$n],us=vn[Tn+2*$n],Hn=27*(ms=fm[1020+3*(Jn-is)+fm[1020+ss-ys]])+63>>7,Wn=18*ms+63>>7,ms=9*ms+63>>7;vn[Tn-3*$n]=Wo[255+vn[Tn-3*$n]+ms],vn[Tn-2*$n]=Wo[255+ss+Wn],vn[Tn-$n]=Wo[255+is+Hn],vn[Tn+0]=Wo[255+Jn-Hn],vn[Tn+$n]=Wo[255+ys-Wn],vn[Tn+2*$n]=Wo[255+us-ms]}wr+=Kr}}function Io(fr,wr,Dr,Kr,un,fn,mn,xn){for(fn=2*fn+1;0<un--;){if(lu(fr,wr,Dr,fn,mn))if(ou(fr,wr,Dr,xn))EA(fr,wr,Dr);else{var vn=fr,Tn=wr,$n=Dr,ss=vn[Tn-$n],is=vn[Tn+0],Jn=vn[Tn+$n],ys=jp[112+((us=3*(is-ss))+4>>3)],us=jp[112+(us+3>>3)],Hn=ys+1>>1;vn[Tn-2*$n]=Wo[255+vn[Tn-2*$n]+Hn],vn[Tn-$n]=Wo[255+ss+us],vn[Tn+0]=Wo[255+is-ys],vn[Tn+$n]=Wo[255+Jn-Hn]}wr+=Kr}}function _A(fr,wr,Dr,Kr,un,fn){Ml(fr,wr,Dr,1,16,Kr,un,fn)}function Tl(fr,wr,Dr,Kr,un,fn){Ml(fr,wr,1,Dr,16,Kr,un,fn)}function wA(fr,wr,Dr,Kr,un,fn){var mn;for(mn=3;0<mn;--mn)Io(fr,wr+=4*Dr,Dr,1,16,Kr,un,fn)}function tA(fr,wr,Dr,Kr,un,fn){var mn;for(mn=3;0<mn;--mn)Io(fr,wr+=4,1,Dr,16,Kr,un,fn)}function bA(fr,wr,Dr,Kr,un,fn,mn,xn){Ml(fr,wr,un,1,8,fn,mn,xn),Ml(Dr,Kr,un,1,8,fn,mn,xn)}function cu(fr,wr,Dr,Kr,un,fn,mn,xn){Ml(fr,wr,1,un,8,fn,mn,xn),Ml(Dr,Kr,1,un,8,fn,mn,xn)}function CA(fr,wr,Dr,Kr,un,fn,mn,xn){Io(fr,wr+4*un,un,1,8,fn,mn,xn),Io(Dr,Kr+4*un,un,1,8,fn,mn,xn)}function Ql(fr,wr,Dr,Kr,un,fn,mn,xn){Io(fr,wr+4,1,un,8,fn,mn,xn),Io(Dr,Kr+4,1,un,8,fn,mn,xn)}function rA(){this.ba=new Rn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ds,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function RA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function nA(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function TA(){this.ua=0,this.Wa=new Jr,this.vb=new Jr,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Qr,this.yc=new Rr}function Pu(){this.xb=this.a=0,this.l=new Yl,this.ca=new Rn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new jr,this.Pb=0,this.wd=new jr,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new TA,this.ab=0,this.gc=ir(4,nA),this.Oc=0}function Il(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Yl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Vl(fr,wr,Dr,Kr,un,fn,mn){for(fr=fr==null?0:fr[wr+0],wr=0;wr<mn;++wr)un[fn+wr]=fr+Dr[Kr+wr]&255,fr=un[fn+wr]}function IA(fr,wr,Dr,Kr,un,fn,mn){var xn;if(fr==null)Vl(null,null,Dr,Kr,un,fn,mn);else for(xn=0;xn<mn;++xn)un[fn+xn]=fr[wr+xn]+Dr[Kr+xn]&255}function Fo(fr,wr,Dr,Kr,un,fn,mn){if(fr==null)Vl(null,null,Dr,Kr,un,fn,mn);else{var xn,vn=fr[wr+0],Tn=vn,$n=vn;for(xn=0;xn<mn;++xn)Tn=$n+(vn=fr[wr+xn])-Tn,$n=Dr[Kr+xn]+(-256&Tn?0>Tn?0:255:Tn)&255,Tn=vn,un[fn+xn]=$n}}function PA(fr,wr,Dr,Kr){var un=wr.width,fn=wr.o;if(_e(fr!=null&&wr!=null),0>Dr||0>=Kr||Dr+Kr>fn)return null;if(!fr.Cc){if(fr.ga==null){var mn;if(fr.ga=new Il,(mn=fr.ga==null)||(mn=wr.width*wr.o,_e(fr.Gb.length==0),fr.Gb=sr(mn),fr.Uc=0,fr.Gb==null?mn=0:(fr.mb=fr.Gb,fr.nb=fr.Uc,fr.rc=null,mn=1),mn=!mn),!mn){mn=fr.ga;var xn=fr.Fa,vn=fr.P,Tn=fr.qc,$n=fr.mb,ss=fr.nb,is=vn+1,Jn=Tn-1,ys=mn.l;if(_e(xn!=null&&$n!=null&&wr!=null),DA[0]=null,DA[1]=Vl,DA[2]=IA,DA[3]=Fo,mn.ca=$n,mn.tb=ss,mn.c=wr.width,mn.i=wr.height,_e(0<mn.c&&0<mn.i),1>=Tn)wr=0;else if(mn.$a=xn[vn+0]>>0&3,mn.Z=xn[vn+0]>>2&3,mn.Lc=xn[vn+0]>>4&3,vn=xn[vn+0]>>6&3,0>mn.$a||1<mn.$a||4<=mn.Z||1<mn.Lc||vn)wr=0;else if(ys.put=yn,ys.ac=wn,ys.bc=Ln,ys.ma=mn,ys.width=wr.width,ys.height=wr.height,ys.Da=wr.Da,ys.v=wr.v,ys.va=wr.va,ys.j=wr.j,ys.o=wr.o,mn.$a)e:{_e(mn.$a==1),wr=Hs();t:for(;;){if(wr==null){wr=0;break e}if(_e(mn!=null),mn.mc=wr,wr.c=mn.c,wr.i=mn.i,wr.l=mn.l,wr.l.ma=mn,wr.l.width=mn.c,wr.l.height=mn.i,wr.a=0,Hr(wr.m,xn,is,Jn),!_i(mn.c,mn.i,1,wr,null)||(wr.ab==1&&wr.gc[0].hc==3&&Ns(wr.s)?(mn.ic=1,xn=wr.c*wr.i,wr.Ta=null,wr.Ua=0,wr.V=sr(xn),wr.Ba=0,wr.V==null?(wr.a=1,wr=0):wr=1):(mn.ic=0,wr=Js(wr,mn.c)),!wr))break t;wr=1;break e}mn.mc=null,wr=0}else wr=Jn>=mn.c*mn.i;mn=!wr}if(mn)return null;fr.ga.Lc!=1?fr.Ga=0:Kr=fn-Dr}_e(fr.ga!=null),_e(Dr+Kr<=fn);e:{if(wr=(xn=fr.ga).c,fn=xn.l.o,xn.$a==0){if(is=fr.rc,Jn=fr.Vc,ys=fr.Fa,vn=fr.P+1+Dr*wr,Tn=fr.mb,$n=fr.nb+Dr*wr,_e(vn<=fr.P+fr.qc),xn.Z!=0)for(_e(DA[xn.Z]!=null),mn=0;mn<Kr;++mn)DA[xn.Z](is,Jn,ys,vn,Tn,$n,wr),is=Tn,Jn=$n,$n+=wr,vn+=wr;else for(mn=0;mn<Kr;++mn)rr(Tn,$n,ys,vn,wr),is=Tn,Jn=$n,$n+=wr,vn+=wr;fr.rc=is,fr.Vc=Jn}else{if(_e(xn.mc!=null),wr=Dr+Kr,_e((mn=xn.mc)!=null),_e(wr<=mn.i),mn.C>=wr)wr=1;else if(xn.ic||Yn(),xn.ic){xn=mn.V,is=mn.Ba,Jn=mn.c;var us=mn.i,Hn=(ys=1,vn=mn.$/Jn,Tn=mn.$%Jn,$n=mn.m,ss=mn.s,mn.$),Wn=Jn*us,ms=Jn*wr,Es=ss.wc,xs=Hn<ms?Cs(ss,Tn,vn):null;_e(Hn<=Wn),_e(wr<=us),_e(Ns(ss));t:for(;;){for(;!$n.h&&Hn<ms;){if(Tn&Es||(xs=Cs(ss,Tn,vn)),_e(xs!=null),zr($n),256>(us=As(xs.G[0],xs.H[0],$n)))xn[is+Hn]=us,++Hn,++Tn>=Jn&&(Tn=0,++vn<=wr&&!(vn%16)&&Us(mn,vn));else{if(!(280>us)){ys=0;break t}us=Zn(us-256,$n);var Os,Ls=As(xs.G[4],xs.H[4],$n);if(zr($n),!(Hn>=(Ls=cs(Jn,Ls=Zn(Ls,$n)))&&Wn-Hn>=us)){ys=0;break t}for(Os=0;Os<us;++Os)xn[is+Hn+Os]=xn[is+Hn+Os-Ls];for(Hn+=us,Tn+=us;Tn>=Jn;)Tn-=Jn,++vn<=wr&&!(vn%16)&&Us(mn,vn);Hn<ms&&Tn&Es&&(xs=Cs(ss,Tn,vn))}_e($n.h==Lr($n))}Us(mn,vn>wr?wr:vn);break t}!ys||$n.h&&Hn<Wn?(ys=0,mn.a=$n.h?5:3):mn.$=Hn,wr=ys}else wr=Ms(mn,mn.V,mn.Ba,mn.c,mn.i,wr,vo);if(!wr){Kr=0;break e}}Dr+Kr>=fn&&(fr.Cc=1),Kr=1}if(!Kr)return null;if(fr.Cc&&((Kr=fr.ga)!=null&&(Kr.mc=null),fr.ga=null,0<fr.Ga))return alert("todo:WebPDequantizeLevels"),null}return fr.nb+Dr*un}function Fr(fr,wr,Dr,Kr,un,fn){for(;0<un--;){var mn,xn=fr,vn=wr+(Dr?1:0),Tn=fr,$n=wr+(Dr?0:3);for(mn=0;mn<Kr;++mn){var ss=Tn[$n+4*mn];ss!=255&&(ss*=32897,xn[vn+4*mn+0]=xn[vn+4*mn+0]*ss>>23,xn[vn+4*mn+1]=xn[vn+4*mn+1]*ss>>23,xn[vn+4*mn+2]=xn[vn+4*mn+2]*ss>>23)}wr+=fn}}function An(fr,wr,Dr,Kr,un){for(;0<Kr--;){var fn;for(fn=0;fn<Dr;++fn){var mn=fr[wr+2*fn+0],xn=15&(Tn=fr[wr+2*fn+1]),vn=4369*xn,Tn=(240&Tn|Tn>>4)*vn>>16;fr[wr+2*fn+0]=(240&mn|mn>>4)*vn>>16&240|(15&mn|mn<<4)*vn>>16>>4&15,fr[wr+2*fn+1]=240&Tn|xn}wr+=un}}function Pn(fr,wr,Dr,Kr,un,fn,mn,xn){var vn,Tn,$n=255;for(Tn=0;Tn<un;++Tn){for(vn=0;vn<Kr;++vn){var ss=fr[wr+vn];fn[mn+4*vn]=ss,$n&=ss}wr+=Dr,mn+=xn}return $n!=255}function Qn(fr,wr,Dr,Kr,un){var fn;for(fn=0;fn<un;++fn)Dr[Kr+fn]=fr[wr+fn]>>8}function Yn(){ba=Fr,Ao=An,uo=Pn,yo=Qn}function hs(fr,wr,Dr){vr[fr]=function(Kr,un,fn,mn,xn,vn,Tn,$n,ss,is,Jn,ys,us,Hn,Wn,ms,Es){var xs,Os=Es-1>>1,Ls=xn[vn+0]|Tn[$n+0]<<16,Ks=ss[is+0]|Jn[ys+0]<<16;_e(Kr!=null);var Ds=3*Ls+Ks+131074>>2;for(wr(Kr[un+0],255&Ds,Ds>>16,us,Hn),fn!=null&&(Ds=3*Ks+Ls+131074>>2,wr(fn[mn+0],255&Ds,Ds>>16,Wn,ms)),xs=1;xs<=Os;++xs){var eo=xn[vn+xs]|Tn[$n+xs]<<16,so=ss[is+xs]|Jn[ys+xs]<<16,Zs=Ls+eo+Ks+so+524296,Ys=Zs+2*(eo+Ks)>>3;Ds=Ys+Ls>>1,Ls=(Zs=Zs+2*(Ls+so)>>3)+eo>>1,wr(Kr[un+2*xs-1],255&Ds,Ds>>16,us,Hn+(2*xs-1)*Dr),wr(Kr[un+2*xs-0],255&Ls,Ls>>16,us,Hn+(2*xs-0)*Dr),fn!=null&&(Ds=Zs+Ks>>1,Ls=Ys+so>>1,wr(fn[mn+2*xs-1],255&Ds,Ds>>16,Wn,ms+(2*xs-1)*Dr),wr(fn[mn+2*xs+0],255&Ls,Ls>>16,Wn,ms+(2*xs+0)*Dr)),Ls=eo,Ks=so}1&Es||(Ds=3*Ls+Ks+131074>>2,wr(Kr[un+Es-1],255&Ds,Ds>>16,us,Hn+(Es-1)*Dr),fn!=null&&(Ds=3*Ks+Ls+131074>>2,wr(fn[mn+Es-1],255&Ds,Ds>>16,Wn,ms+(Es-1)*Dr)))}}function _s(){Al[Lp]=$x,Al[kp]=m0,Al[u0]=Hx,Al[Dp]=g0,Al[Up]=x0,Al[pm]=y0,Al[d0]=Kx,Al[mm]=m0,Al[gm]=g0,Al[Op]=x0,Al[xm]=y0}function ks(fr){return fr&~zx?0>fr?0:255:fr>>v0}function xr(fr,wr){return ks((19077*fr>>8)+(26149*wr>>8)-14234)}function Mr(fr,wr,Dr){return ks((19077*fr>>8)-(6419*wr>>8)-(13320*Dr>>8)+8708)}function qr(fr,wr){return ks((19077*fr>>8)+(33050*wr>>8)-17685)}function gn(fr,wr,Dr,Kr,un){Kr[un+0]=xr(fr,Dr),Kr[un+1]=Mr(fr,wr,Dr),Kr[un+2]=qr(fr,wr)}function Xn(fr,wr,Dr,Kr,un){Kr[un+0]=qr(fr,wr),Kr[un+1]=Mr(fr,wr,Dr),Kr[un+2]=xr(fr,Dr)}function as(fr,wr,Dr,Kr,un){var fn=Mr(fr,wr,Dr);wr=fn<<3&224|qr(fr,wr)>>3,Kr[un+0]=248&xr(fr,Dr)|fn>>5,Kr[un+1]=wr}function ws(fr,wr,Dr,Kr,un){var fn=240&qr(fr,wr)|15;Kr[un+0]=240&xr(fr,Dr)|Mr(fr,wr,Dr)>>4,Kr[un+1]=fn}function Gs(fr,wr,Dr,Kr,un){Kr[un+0]=255,gn(fr,wr,Dr,Kr,un+1)}function Xs(fr,wr,Dr,Kr,un){Xn(fr,wr,Dr,Kr,un),Kr[un+3]=255}function Ws(fr,wr,Dr,Kr,un){gn(fr,wr,Dr,Kr,un),Kr[un+3]=255}function ro(fr,wr){return 0>fr?0:fr>wr?wr:fr}function lo(fr,wr,Dr){vr[fr]=function(Kr,un,fn,mn,xn,vn,Tn,$n,ss){for(var is=$n+(-2&ss)*Dr;$n!=is;)wr(Kr[un+0],fn[mn+0],xn[vn+0],Tn,$n),wr(Kr[un+1],fn[mn+0],xn[vn+0],Tn,$n+Dr),un+=2,++mn,++vn,$n+=2*Dr;1&ss&&wr(Kr[un+0],fn[mn+0],xn[vn+0],Tn,$n)}}function Bl(fr,wr,Dr){return Dr==0?fr==0?wr==0?6:5:wr==0?4:0:Dr}function Bo(fr,wr,Dr,Kr,un){switch(fr>>>30){case 3:oA(wr,Dr,Kr,un,0);break;case 2:xo(wr,Dr,Kr,un);break;case 1:Do(wr,Dr,Kr,un)}}function $l(fr,wr){var Dr,Kr,un=wr.M,fn=wr.Nb,mn=fr.oc,xn=fr.pc+40,vn=fr.oc,Tn=fr.pc+584,$n=fr.oc,ss=fr.pc+600;for(Dr=0;16>Dr;++Dr)mn[xn+32*Dr-1]=129;for(Dr=0;8>Dr;++Dr)vn[Tn+32*Dr-1]=129,$n[ss+32*Dr-1]=129;for(0<un?mn[xn-1-32]=vn[Tn-1-32]=$n[ss-1-32]=129:(nr(mn,xn-32-1,127,21),nr(vn,Tn-32-1,127,9),nr($n,ss-32-1,127,9)),Kr=0;Kr<fr.za;++Kr){var is=wr.ya[wr.aa+Kr];if(0<Kr){for(Dr=-1;16>Dr;++Dr)rr(mn,xn+32*Dr-4,mn,xn+32*Dr+12,4);for(Dr=-1;8>Dr;++Dr)rr(vn,Tn+32*Dr-4,vn,Tn+32*Dr+4,4),rr($n,ss+32*Dr-4,$n,ss+32*Dr+4,4)}var Jn=fr.Gd,ys=fr.Hd+Kr,us=is.ad,Hn=is.Hc;if(0<un&&(rr(mn,xn-32,Jn[ys].y,0,16),rr(vn,Tn-32,Jn[ys].f,0,8),rr($n,ss-32,Jn[ys].ea,0,8)),is.Za){var Wn=mn,ms=xn-32+16;for(0<un&&(Kr>=fr.za-1?nr(Wn,ms,Jn[ys].y[15],4):rr(Wn,ms,Jn[ys+1].y,0,4)),Dr=0;4>Dr;Dr++)Wn[ms+128+Dr]=Wn[ms+256+Dr]=Wn[ms+384+Dr]=Wn[ms+0+Dr];for(Dr=0;16>Dr;++Dr,Hn<<=2)Wn=mn,ms=xn+_0[Dr],Pl[is.Ob[Dr]](Wn,ms),Bo(Hn,us,16*+Dr,Wn,ms)}else if(Wn=Bl(Kr,un,is.Ob[0]),kA[Wn](mn,xn),Hn!=0)for(Dr=0;16>Dr;++Dr,Hn<<=2)Bo(Hn,us,16*+Dr,mn,xn+_0[Dr]);for(Dr=is.Gc,Wn=Bl(Kr,un,is.Dd),lA[Wn](vn,Tn),lA[Wn]($n,ss),Hn=us,Wn=vn,ms=Tn,255&(is=Dr>>0)&&(170&is?Ap(Hn,256,Wn,ms):ga(Hn,256,Wn,ms)),is=$n,Hn=ss,255&(Dr>>=8)&&(170&Dr?Ap(us,320,is,Hn):ga(us,320,is,Hn)),un<fr.Ub-1&&(rr(Jn[ys].y,0,mn,xn+480,16),rr(Jn[ys].f,0,vn,Tn+224,8),rr(Jn[ys].ea,0,$n,ss+224,8)),Dr=8*fn*fr.B,Jn=fr.sa,ys=fr.ta+16*Kr+16*fn*fr.R,us=fr.qa,is=fr.ra+8*Kr+Dr,Hn=fr.Ha,Wn=fr.Ia+8*Kr+Dr,Dr=0;16>Dr;++Dr)rr(Jn,ys+Dr*fr.R,mn,xn+32*Dr,16);for(Dr=0;8>Dr;++Dr)rr(us,is+Dr*fr.B,vn,Tn+32*Dr,8),rr(Hn,Wn+Dr*fr.B,$n,ss+32*Dr,8)}}function Hl(fr,wr,Dr,Kr,un,fn,mn,xn,vn){var Tn=[0],$n=[0],ss=0,is=vn!=null?vn.kd:0,Jn=vn??new RA;if(fr==null||12>Dr)return 7;Jn.data=fr,Jn.w=wr,Jn.ha=Dr,wr=[wr],Dr=[Dr],Jn.gb=[Jn.gb];e:{var ys=wr,us=Dr,Hn=Jn.gb;if(_e(fr!=null),_e(us!=null),_e(Hn!=null),Hn[0]=0,12<=us[0]&&!tr(fr,ys[0],"RIFF")){if(tr(fr,ys[0]+8,"WEBP")){Hn=3;break e}var Wn=kn(fr,ys[0]+4);if(12>Wn||4294967286<Wn){Hn=3;break e}if(is&&Wn>us[0]-8){Hn=7;break e}Hn[0]=Wn,ys[0]+=12,us[0]-=12}Hn=0}if(Hn!=0)return Hn;for(Wn=0<Jn.gb[0],Dr=Dr[0];;){e:{var ms=fr;us=wr,Hn=Dr;var Es=Tn,xs=$n,Os=ys=[0];if((Ds=ss=[ss])[0]=0,8>Hn[0])Hn=7;else{if(!tr(ms,us[0],"VP8X")){if(kn(ms,us[0]+4)!=10){Hn=3;break e}if(18>Hn[0]){Hn=7;break e}var Ls=kn(ms,us[0]+8),Ks=1+Bn(ms,us[0]+12);if(2147483648<=Ks*(ms=1+Bn(ms,us[0]+15))){Hn=3;break e}Os!=null&&(Os[0]=Ls),Es!=null&&(Es[0]=Ks),xs!=null&&(xs[0]=ms),us[0]+=18,Hn[0]-=18,Ds[0]=1}Hn=0}}if(ss=ss[0],ys=ys[0],Hn!=0)return Hn;if(us=!!(2&ys),!Wn&&ss)return 3;if(fn!=null&&(fn[0]=!!(16&ys)),mn!=null&&(mn[0]=us),xn!=null&&(xn[0]=0),mn=Tn[0],ys=$n[0],ss&&us&&vn==null){Hn=0;break}if(4>Dr){Hn=7;break}if(Wn&&ss||!Wn&&!ss&&!tr(fr,wr[0],"ALPH")){Dr=[Dr],Jn.na=[Jn.na],Jn.P=[Jn.P],Jn.Sa=[Jn.Sa];e:{Ls=fr,Hn=wr,Wn=Dr;var Ds=Jn.gb;Es=Jn.na,xs=Jn.P,Os=Jn.Sa,Ks=22,_e(Ls!=null),_e(Wn!=null),ms=Hn[0];var eo=Wn[0];for(_e(Es!=null),_e(Os!=null),Es[0]=null,xs[0]=null,Os[0]=0;;){if(Hn[0]=ms,Wn[0]=eo,8>eo){Hn=7;break e}var so=kn(Ls,ms+4);if(4294967286<so){Hn=3;break e}var Zs=8+so+1&-2;if(Ks+=Zs,0<Ds&&Ks>Ds){Hn=3;break e}if(!tr(Ls,ms,"VP8 ")||!tr(Ls,ms,"VP8L")){Hn=0;break e}if(eo[0]<Zs){Hn=7;break e}tr(Ls,ms,"ALPH")||(Es[0]=Ls,xs[0]=ms+8,Os[0]=so),ms+=Zs,eo-=Zs}}if(Dr=Dr[0],Jn.na=Jn.na[0],Jn.P=Jn.P[0],Jn.Sa=Jn.Sa[0],Hn!=0)break}Dr=[Dr],Jn.Ja=[Jn.Ja],Jn.xa=[Jn.xa];e:if(Ds=fr,Hn=wr,Wn=Dr,Es=Jn.gb[0],xs=Jn.Ja,Os=Jn.xa,Ls=Hn[0],ms=!tr(Ds,Ls,"VP8 "),Ks=!tr(Ds,Ls,"VP8L"),_e(Ds!=null),_e(Wn!=null),_e(xs!=null),_e(Os!=null),8>Wn[0])Hn=7;else{if(ms||Ks){if(Ds=kn(Ds,Ls+4),12<=Es&&Ds>Es-12){Hn=3;break e}if(is&&Ds>Wn[0]-8){Hn=7;break e}xs[0]=Ds,Hn[0]+=8,Wn[0]-=8,Os[0]=Ks}else Os[0]=5<=Wn[0]&&Ds[Ls+0]==47&&!(Ds[Ls+4]>>5),xs[0]=Wn[0];Hn=0}if(Dr=Dr[0],Jn.Ja=Jn.Ja[0],Jn.xa=Jn.xa[0],wr=wr[0],Hn!=0)break;if(4294967286<Jn.Ja)return 3;if(xn==null||us||(xn[0]=Jn.xa?2:1),mn=[mn],ys=[ys],Jn.xa){if(5>Dr){Hn=7;break}xn=mn,is=ys,us=fn,fr==null||5>Dr?fr=0:5<=Dr&&fr[wr+0]==47&&!(fr[wr+4]>>5)?(Wn=[0],Ds=[0],Es=[0],Hr(xs=new jr,fr,wr,Dr),Dn(xs,Wn,Ds,Es)?(xn!=null&&(xn[0]=Wn[0]),is!=null&&(is[0]=Ds[0]),us!=null&&(us[0]=Es[0]),fr=1):fr=0):fr=0}else{if(10>Dr){Hn=7;break}xn=ys,fr==null||10>Dr||!JA(fr,wr+3,Dr-3)?fr=0:(is=fr[wr+0]|fr[wr+1]<<8|fr[wr+2]<<16,us=16383&(fr[wr+7]<<8|fr[wr+6]),fr=16383&(fr[wr+9]<<8|fr[wr+8]),1&is||3<(is>>1&7)||!(is>>4&1)||is>>5>=Jn.Ja||!us||!fr?fr=0:(mn&&(mn[0]=us),xn&&(xn[0]=fr),fr=1))}if(!fr||(mn=mn[0],ys=ys[0],ss&&(Tn[0]!=mn||$n[0]!=ys)))return 3;vn!=null&&(vn[0]=Jn,vn.offset=wr-vn.w,_e(4294967286>wr-vn.w),_e(vn.offset==vn.ha-Dr));break}return Hn==0||Hn==7&&ss&&vn==null?(fn!=null&&(fn[0]|=Jn.na!=null&&0<Jn.na.length),Kr!=null&&(Kr[0]=mn),un!=null&&(un[0]=ys),0):Hn}function op(fr,wr,Dr){var Kr=wr.width,un=wr.height,fn=0,mn=0,xn=Kr,vn=un;if(wr.Da=fr!=null&&0<fr.Da,wr.Da&&(xn=fr.cd,vn=fr.bd,fn=fr.v,mn=fr.j,11>Dr||(fn&=-2,mn&=-2),0>fn||0>mn||0>=xn||0>=vn||fn+xn>Kr||mn+vn>un))return 0;if(wr.v=fn,wr.j=mn,wr.va=fn+xn,wr.o=mn+vn,wr.U=xn,wr.T=vn,wr.da=fr!=null&&0<fr.da,wr.da){if(!Fn(xn,vn,Dr=[fr.ib],fn=[fr.hb]))return 0;wr.ib=Dr[0],wr.hb=fn[0]}return wr.ob=fr!=null&&fr.ob,wr.Kb=fr==null||!fr.Sd,wr.da&&(wr.ob=wr.ib<3*Kr/4&&wr.hb<3*un/4,wr.Kb=0),1}function ap(fr){if(fr==null)return 2;if(11>fr.S){var wr=fr.f.RGBA;wr.fb+=(fr.height-1)*wr.A,wr.A=-wr.A}else wr=fr.f.kb,fr=fr.height,wr.O+=(fr-1)*wr.fa,wr.fa=-wr.fa,wr.N+=(fr-1>>1)*wr.Ab,wr.Ab=-wr.Ab,wr.W+=(fr-1>>1)*wr.Db,wr.Db=-wr.Db,wr.F!=null&&(wr.J+=(fr-1)*wr.lb,wr.lb=-wr.lb);return 0}function Nu(fr,wr,Dr,Kr){if(Kr==null||0>=fr||0>=wr)return 2;if(Dr!=null){if(Dr.Da){var un=Dr.cd,fn=Dr.bd,mn=-2&Dr.v,xn=-2&Dr.j;if(0>mn||0>xn||0>=un||0>=fn||mn+un>fr||xn+fn>wr)return 2;fr=un,wr=fn}if(Dr.da){if(!Fn(fr,wr,un=[Dr.ib],fn=[Dr.hb]))return 2;fr=un[0],wr=fn[0]}}Kr.width=fr,Kr.height=wr;e:{var vn=Kr.width,Tn=Kr.height;if(fr=Kr.S,0>=vn||0>=Tn||!(fr>=Lp&&13>fr))fr=2;else{if(0>=Kr.Rd&&Kr.sd==null){mn=fn=un=wr=0;var $n=(xn=vn*w0[fr])*Tn;if(11>fr||(fn=(Tn+1)/2*(wr=(vn+1)/2),fr==12&&(mn=(un=vn)*Tn)),(Tn=sr($n+2*fn+mn))==null){fr=1;break e}Kr.sd=Tn,11>fr?((vn=Kr.f.RGBA).eb=Tn,vn.fb=0,vn.A=xn,vn.size=$n):((vn=Kr.f.kb).y=Tn,vn.O=0,vn.fa=xn,vn.Fd=$n,vn.f=Tn,vn.N=0+$n,vn.Ab=wr,vn.Cd=fn,vn.ea=Tn,vn.W=0+$n+fn,vn.Db=wr,vn.Ed=fn,fr==12&&(vn.F=Tn,vn.J=0+$n+2*fn),vn.Tc=mn,vn.lb=un)}if(wr=1,un=Kr.S,fn=Kr.width,mn=Kr.height,un>=Lp&&13>un)if(11>un)fr=Kr.f.RGBA,wr&=(xn=Math.abs(fr.A))*(mn-1)+fn<=fr.size,wr&=xn>=fn*w0[un],wr&=fr.eb!=null;else{fr=Kr.f.kb,xn=(fn+1)/2,$n=(mn+1)/2,vn=Math.abs(fr.fa),Tn=Math.abs(fr.Ab);var ss=Math.abs(fr.Db),is=Math.abs(fr.lb),Jn=is*(mn-1)+fn;wr&=vn*(mn-1)+fn<=fr.Fd,wr&=Tn*($n-1)+xn<=fr.Cd,wr=(wr&=ss*($n-1)+xn<=fr.Ed)&vn>=fn&Tn>=xn&ss>=xn,wr&=fr.y!=null,wr&=fr.f!=null,wr&=fr.ea!=null,un==12&&(wr&=is>=fn,wr&=Jn<=fr.Tc,wr&=fr.F!=null)}else wr=0;fr=wr?0:2}}return fr!=0||Dr!=null&&Dr.fd&&(fr=ap(Kr)),fr}var Po=64,Fu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ju=24,Lu=32,lp=8,Qo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];bn("Predictor0","PredictorAdd0"),vr.Predictor0=function(){return 4278190080},vr.Predictor1=function(fr){return fr},vr.Predictor2=function(fr,wr,Dr){return wr[Dr+0]},vr.Predictor3=function(fr,wr,Dr){return wr[Dr+1]},vr.Predictor4=function(fr,wr,Dr){return wr[Dr-1]},vr.Predictor5=function(fr,wr,Dr){return jn(jn(fr,wr[Dr+1]),wr[Dr+0])},vr.Predictor6=function(fr,wr,Dr){return jn(fr,wr[Dr-1])},vr.Predictor7=function(fr,wr,Dr){return jn(fr,wr[Dr+0])},vr.Predictor8=function(fr,wr,Dr){return jn(wr[Dr-1],wr[Dr+0])},vr.Predictor9=function(fr,wr,Dr){return jn(wr[Dr+0],wr[Dr+1])},vr.Predictor10=function(fr,wr,Dr){return jn(jn(fr,wr[Dr-1]),jn(wr[Dr+0],wr[Dr+1]))},vr.Predictor11=function(fr,wr,Dr){var Kr=wr[Dr+0];return 0>=Nn(Kr>>24&255,fr>>24&255,(wr=wr[Dr-1])>>24&255)+Nn(Kr>>16&255,fr>>16&255,wr>>16&255)+Nn(Kr>>8&255,fr>>8&255,wr>>8&255)+Nn(255&Kr,255&fr,255&wr)?Kr:fr},vr.Predictor12=function(fr,wr,Dr){var Kr=wr[Dr+0];return(zn((fr>>24&255)+(Kr>>24&255)-((wr=wr[Dr-1])>>24&255))<<24|zn((fr>>16&255)+(Kr>>16&255)-(wr>>16&255))<<16|zn((fr>>8&255)+(Kr>>8&255)-(wr>>8&255))<<8|zn((255&fr)+(255&Kr)-(255&wr)))>>>0},vr.Predictor13=function(fr,wr,Dr){var Kr=wr[Dr-1];return(qn((fr=jn(fr,wr[Dr+0]))>>24&255,Kr>>24&255)<<24|qn(fr>>16&255,Kr>>16&255)<<16|qn(fr>>8&255,Kr>>8&255)<<8|qn(fr>>0&255,Kr>>0&255))>>>0};var hm=vr.PredictorAdd0;vr.PredictorAdd1=ns,bn("Predictor2","PredictorAdd2"),bn("Predictor3","PredictorAdd3"),bn("Predictor4","PredictorAdd4"),bn("Predictor5","PredictorAdd5"),bn("Predictor6","PredictorAdd6"),bn("Predictor7","PredictorAdd7"),bn("Predictor8","PredictorAdd8"),bn("Predictor9","PredictorAdd9"),bn("Predictor10","PredictorAdd10"),bn("Predictor11","PredictorAdd11"),bn("Predictor12","PredictorAdd12"),bn("Predictor13","PredictorAdd13");var cp=vr.PredictorAdd2;Ps("ColorIndexInverseTransform","MapARGB","32b",function(fr){return fr>>8&255},function(fr){return fr}),Ps("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(fr){return fr},function(fr){return fr>>8&255});var Ip,na=vr.ColorIndexInverseTransform,ku=vr.MapARGB,Bp=vr.VP8LColorIndexInverseTransformAlpha,Pp=vr.MapAlpha,NA=vr.VP8LPredictorsAdd=[];NA.length=16,(vr.VP8LPredictors=[]).length=16,(vr.VP8LPredictorsAdd_C=[]).length=16,(vr.VP8LPredictors_C=[]).length=16;var Au,Vo,ko,FA,sA,iA,Du,oA,xo,Ap,Do,ga,Uu,Np,up,uu,du,jA,hu,Ou,fu,LA,dp,xa,ba,Ao,uo,yo,Co=sr(511),aA=sr(2041),hp=sr(225),Mu=sr(767),Fp=0,fm=aA,jp=hp,Wo=Mu,$a=Co,Lp=0,kp=1,u0=2,Dp=3,Up=4,pm=5,d0=6,mm=7,gm=8,Op=9,xm=10,Ix=[2,3,7],Bx=[3,3,11],h0=[280,256,256,256,40],Px=[0,1,1,1,0],Nx=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Fx=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],jx=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Lx=8,ym=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],vm=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],fp=null,kx=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Dx=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],f0=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ux=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ox=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Mx=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Qx=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],kA=[],Pl=[],lA=[],Vx=1,p0=2,DA=[],Al=[];hs("UpsampleRgbLinePair",gn,3),hs("UpsampleBgrLinePair",Xn,3),hs("UpsampleRgbaLinePair",Ws,4),hs("UpsampleBgraLinePair",Xs,4),hs("UpsampleArgbLinePair",Gs,4),hs("UpsampleRgba4444LinePair",ws,2),hs("UpsampleRgb565LinePair",as,2);var $x=vr.UpsampleRgbLinePair,Hx=vr.UpsampleBgrLinePair,m0=vr.UpsampleRgbaLinePair,g0=vr.UpsampleBgraLinePair,x0=vr.UpsampleArgbLinePair,y0=vr.UpsampleRgba4444LinePair,Kx=vr.UpsampleRgb565LinePair,Mp=16,Qp=1<<Mp-1,pp=-227,Em=482,v0=6,zx=(256<<v0)-1,E0=0,Gx=sr(256),Wx=sr(256),qx=sr(256),Xx=sr(256),Yx=sr(Em-pp),Jx=sr(Em-pp);lo("YuvToRgbRow",gn,3),lo("YuvToBgrRow",Xn,3),lo("YuvToRgbaRow",Ws,4),lo("YuvToBgraRow",Xs,4),lo("YuvToArgbRow",Gs,4),lo("YuvToRgba4444Row",ws,2),lo("YuvToRgb565Row",as,2);var _0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Vp=[0,2,8],Zx=[8,7,6,4,4,2,2,2,1,1,1,1],ey=1;this.WebPDecodeRGBA=function(fr,wr,Dr,Kr,un){var fn=kp,mn=new rA,xn=new Rn;mn.ba=xn,xn.S=fn,xn.width=[xn.width],xn.height=[xn.height];var vn=xn.width,Tn=xn.height,$n=new es;if($n==null||fr==null)var ss=2;else _e($n!=null),ss=Hl(fr,wr,Dr,$n.width,$n.height,$n.Pd,$n.Qd,$n.format,null);if(ss!=0?vn=0:(vn!=null&&(vn[0]=$n.width[0]),Tn!=null&&(Tn[0]=$n.height[0]),vn=1),vn){xn.width=xn.width[0],xn.height=xn.height[0],Kr!=null&&(Kr[0]=xn.width),un!=null&&(un[0]=xn.height);e:{if(Kr=new Yl,(un=new RA).data=fr,un.w=wr,un.ha=Dr,un.kd=1,wr=[0],_e(un!=null),((fr=Hl(un.data,un.w,un.ha,null,null,null,wr,null,un))==0||fr==7)&&wr[0]&&(fr=4),(wr=fr)==0){if(_e(mn!=null),Kr.data=un.data,Kr.w=un.w+un.offset,Kr.ha=un.ha-un.offset,Kr.put=yn,Kr.ac=wn,Kr.bc=Ln,Kr.ma=mn,un.xa){if((fr=Hs())==null){mn=1;break e}if(function(is,Jn){var ys=[0],us=[0],Hn=[0];t:for(;;){if(is==null)return 0;if(Jn==null)return is.a=2,0;if(is.l=Jn,is.a=0,Hr(is.m,Jn.data,Jn.w,Jn.ha),!Dn(is.m,ys,us,Hn)){is.a=3;break t}if(is.xb=p0,Jn.width=ys[0],Jn.height=us[0],!_i(ys[0],us[0],1,is,null))break t;return 1}return _e(is.a!=0),0}(fr,Kr)){if(Kr=(wr=Nu(Kr.width,Kr.height,mn.Oa,mn.ba))==0){t:{Kr=fr;r:for(;;){if(Kr==null){Kr=0;break t}if(_e(Kr.s.yc!=null),_e(Kr.s.Ya!=null),_e(0<Kr.s.Wb),_e((Dr=Kr.l)!=null),_e((un=Dr.ma)!=null),Kr.xb!=0){if(Kr.ca=un.ba,Kr.tb=un.tb,_e(Kr.ca!=null),!op(un.Oa,Dr,Dp)){Kr.a=2;break r}if(!Js(Kr,Dr.width)||Dr.da)break r;if((Dr.da||os(Kr.ca.S))&&Yn(),11>Kr.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Kr.ca.f.kb.F!=null&&Yn()),Kr.Pb&&0<Kr.s.ua&&Kr.s.vb.X==null&&!Kn(Kr.s.vb,Kr.s.Wa.Xa)){Kr.a=1;break r}Kr.xb=0}if(!Ms(Kr,Kr.V,Kr.Ba,Kr.c,Kr.i,Dr.o,Qs))break r;un.Dc=Kr.Ma,Kr=1;break t}_e(Kr.a!=0),Kr=0}Kr=!Kr}Kr&&(wr=fr.a)}else wr=fr.a}else{if((fr=new YA)==null){mn=1;break e}if(fr.Fa=un.na,fr.P=un.P,fr.qc=un.Sa,ZA(fr,Kr)){if((wr=Nu(Kr.width,Kr.height,mn.Oa,mn.ba))==0){if(fr.Aa=0,Dr=mn.Oa,_e((un=fr)!=null),Dr!=null){if(0<(vn=0>(vn=Dr.Md)?0:100<vn?255:255*vn/100)){for(Tn=$n=0;4>Tn;++Tn)12>(ss=un.pb[Tn]).lc&&(ss.ia=vn*Zx[0>ss.lc?0:ss.lc]>>3),$n|=ss.ia;$n&&(alert("todo:VP8InitRandom"),un.ia=1)}un.Ga=Dr.Id,100<un.Ga?un.Ga=100:0>un.Ga&&(un.Ga=0)}Cu(fr,Kr)||(wr=fr.a)}}else wr=fr.a}wr==0&&mn.Oa!=null&&mn.Oa.fd&&(wr=ap(mn.ba))}mn=wr}fn=mn!=0?null:11>fn?xn.f.RGBA.eb:xn.f.kb.y}else fn=null;return fn};var w0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function lr(vr,br){for(var Pr="",Er=0;Er<4;Er++)Pr+=String.fromCharCode(vr[br++]);return Pr}function cr(vr,br){return(vr[br+0]<<0|vr[br+1]<<8|vr[br+2]<<16)>>>0}function Ar(vr,br){return(vr[br+0]<<0|vr[br+1]<<8|vr[br+2]<<16|vr[br+3]<<24)>>>0}new ar;var ur=[0],dr=[0],mr=[],pr=new ar,yr=er,hr=function(vr,br){var Pr={},Er=0,Rr=!1,Ir=0,Qr=0;if(Pr.frames=[],!function(Br,Lr,Or,zr){for(var Gr=0;Gr<zr;Gr++)if(Br[Lr+Gr]!=Or.charCodeAt(Gr))return!0;return!1}(vr,br,"RIFF",4)){for(Ar(vr,br+=4),br+=8;br<vr.length;){var Ur=lr(vr,br),Vr=Ar(vr,br+=4);br+=4;var Wr=Vr+(1&Vr);switch(Ur){case"VP8 ":case"VP8L":Pr.frames[Er]===void 0&&(Pr.frames[Er]={}),(Xr=Pr.frames[Er]).src_off=Rr?Qr:br-8,Xr.src_size=Ir+Vr+8,Er++,Rr&&(Rr=!1,Ir=0,Qr=0);break;case"VP8X":(Xr=Pr.header={}).feature_flags=vr[br];var Hr=br+4;Xr.canvas_width=1+cr(vr,Hr),Hr+=3,Xr.canvas_height=1+cr(vr,Hr),Hr+=3;break;case"ALPH":Rr=!0,Ir=Wr+8,Qr=br-8;break;case"ANIM":(Xr=Pr.header).bgcolor=Ar(vr,br),Hr=br+4,Xr.loop_count=(pn=vr)[(jr=Hr)+0]<<0|pn[jr+1]<<8,Hr+=2;break;case"ANMF":var $r,Xr;(Xr=Pr.frames[Er]={}).offset_x=2*cr(vr,br),br+=3,Xr.offset_y=2*cr(vr,br),br+=3,Xr.width=1+cr(vr,br),br+=3,Xr.height=1+cr(vr,br),br+=3,Xr.duration=cr(vr,br),br+=3,$r=vr[br++],Xr.dispose=1&$r,Xr.blend=$r>>1&1}Ur!="ANMF"&&(br+=Wr)}var pn,jr;return Pr}}(yr,0);hr.response=yr,hr.rgbaoutput=!0,hr.dataurl=!1;var gr=hr.header?hr.header:null,Cr=hr.frames?hr.frames:null;if(gr){gr.loop_counter=gr.loop_count,ur=[gr.canvas_height],dr=[gr.canvas_width];for(var Tr=0;Tr<Cr.length&&Cr[Tr].blend!=0;Tr++);}var Sr=Cr[0],Nr=pr.WebPDecodeRGBA(yr,Sr.src_off,Sr.src_size,dr,ur);Sr.rgba=Nr,Sr.imgwidth=dr[0],Sr.imgheight=ur[0];for(var _r=0;_r<dr[0]*ur[0]*4;_r++)mr[_r]=Nr[_r];return this.width=dr,this.height=ur,this.data=mr,this}(function(er){var _e=function(){return typeof zlibSync=="function"},tr=function(ur,dr,mr,pr){var yr=4,hr=ir;switch(pr){case er.image_compression.FAST:yr=1,hr=sr;break;case er.image_compression.MEDIUM:yr=6,hr=or;break;case er.image_compression.SLOW:yr=9,hr=ar}ur=rr(ur,dr,mr,hr);var gr=zlibSync(ur,{level:yr});return er.__addimage__.arrayBufferToBinaryString(gr)},rr=function(ur,dr,mr,pr){for(var yr,hr,gr,Cr=ur.length/dr,Tr=new Uint8Array(ur.length+Cr),Sr=cr(),Nr=0;Nr<Cr;Nr+=1){if(gr=Nr*dr,yr=ur.subarray(gr,gr+dr),pr)Tr.set(pr(yr,mr,hr),gr+Nr);else{for(var _r,vr=Sr.length,br=[];_r<vr;_r+=1)br[_r]=Sr[_r](yr,mr,hr);var Pr=Ar(br.concat());Tr.set(br[Pr],gr+Nr)}hr=yr}return Tr},nr=function(ur){var dr=Array.apply([],ur);return dr.unshift(0),dr},sr=function(ur,dr){var mr,pr=[],yr=ur.length;pr[0]=1;for(var hr=0;hr<yr;hr+=1)mr=ur[hr-dr]||0,pr[hr+1]=ur[hr]-mr+256&255;return pr},ir=function(ur,dr,mr){var pr,yr=[],hr=ur.length;yr[0]=2;for(var gr=0;gr<hr;gr+=1)pr=mr&&mr[gr]||0,yr[gr+1]=ur[gr]-pr+256&255;return yr},or=function(ur,dr,mr){var pr,yr,hr=[],gr=ur.length;hr[0]=3;for(var Cr=0;Cr<gr;Cr+=1)pr=ur[Cr-dr]||0,yr=mr&&mr[Cr]||0,hr[Cr+1]=ur[Cr]+256-(pr+yr>>>1)&255;return hr},ar=function(ur,dr,mr){var pr,yr,hr,gr,Cr=[],Tr=ur.length;Cr[0]=4;for(var Sr=0;Sr<Tr;Sr+=1)pr=ur[Sr-dr]||0,yr=mr&&mr[Sr]||0,hr=mr&&mr[Sr-dr]||0,gr=lr(pr,yr,hr),Cr[Sr+1]=ur[Sr]-gr+256&255;return Cr},lr=function(ur,dr,mr){if(ur===dr&&dr===mr)return ur;var pr=Math.abs(dr-mr),yr=Math.abs(ur-mr),hr=Math.abs(ur+dr-mr-mr);return pr<=yr&&pr<=hr?ur:yr<=hr?dr:mr},cr=function(){return[nr,sr,ir,or,ar]},Ar=function(ur){var dr=ur.map(function(mr){return mr.reduce(function(pr,yr){return pr+Math.abs(yr)},0)});return dr.indexOf(Math.min.apply(null,dr))};er.processPNG=function(ur,dr,mr,pr){var yr,hr,gr,Cr,Tr,Sr,Nr,_r,vr,br,Pr,Er,Rr,Ir,Qr,Ur=this.decode.FLATE_DECODE,Vr="";if(this.__addimage__.isArrayBuffer(ur)&&(ur=new Uint8Array(ur)),this.__addimage__.isArrayBufferView(ur)){if(ur=(gr=new Kt(ur)).imgData,hr=gr.bits,yr=gr.colorSpace,Tr=gr.colors,[4,6].indexOf(gr.colorType)!==-1){if(gr.bits===8){vr=(_r=gr.pixelBitlength==32?new Uint32Array(gr.decodePixels().buffer):gr.pixelBitlength==16?new Uint16Array(gr.decodePixels().buffer):new Uint8Array(gr.decodePixels().buffer)).length,Pr=new Uint8Array(vr*gr.colors),br=new Uint8Array(vr);var Wr,Hr=gr.pixelBitlength-gr.bits;for(Ir=0,Qr=0;Ir<vr;Ir++){for(Rr=_r[Ir],Wr=0;Wr<Hr;)Pr[Qr++]=Rr>>>Wr&255,Wr+=gr.bits;br[Ir]=Rr>>>Wr&255}}if(gr.bits===16){vr=(_r=new Uint32Array(gr.decodePixels().buffer)).length,Pr=new Uint8Array(vr*(32/gr.pixelBitlength)*gr.colors),br=new Uint8Array(vr*(32/gr.pixelBitlength)),Er=gr.colors>1,Ir=0,Qr=0;for(var $r=0;Ir<vr;)Rr=_r[Ir++],Pr[Qr++]=Rr>>>0&255,Er&&(Pr[Qr++]=Rr>>>16&255,Rr=_r[Ir++],Pr[Qr++]=Rr>>>0&255),br[$r++]=Rr>>>16&255;hr=8}pr!==er.image_compression.NONE&&_e()?(ur=tr(Pr,gr.width*gr.colors,gr.colors,pr),Nr=tr(br,gr.width,1,pr)):(ur=Pr,Nr=br,Ur=void 0)}if(gr.colorType===3&&(yr=this.color_spaces.INDEXED,Sr=gr.palette,gr.transparency.indexed)){var Xr=gr.transparency.indexed,pn=0;for(Ir=0,vr=Xr.length;Ir<vr;++Ir)pn+=Xr[Ir];if((pn/=255)===vr-1&&Xr.indexOf(0)!==-1)Cr=[Xr.indexOf(0)];else if(pn!==vr){for(_r=gr.decodePixels(),br=new Uint8Array(_r.length),Ir=0,vr=_r.length;Ir<vr;Ir++)br[Ir]=Xr[_r[Ir]];Nr=tr(br,gr.width,1)}}var jr=function(Br){var Lr;switch(Br){case er.image_compression.FAST:Lr=11;break;case er.image_compression.MEDIUM:Lr=13;break;case er.image_compression.SLOW:Lr=14;break;default:Lr=12}return Lr}(pr);return Ur===this.decode.FLATE_DECODE&&(Vr="/Predictor "+jr+" "),Vr+="/Colors "+Tr+" /BitsPerComponent "+hr+" /Columns "+gr.width,(this.__addimage__.isArrayBuffer(ur)||this.__addimage__.isArrayBufferView(ur))&&(ur=this.__addimage__.arrayBufferToBinaryString(ur)),(Nr&&this.__addimage__.isArrayBuffer(Nr)||this.__addimage__.isArrayBufferView(Nr))&&(Nr=this.__addimage__.arrayBufferToBinaryString(Nr)),{alias:mr,data:ur,index:dr,filter:Ur,decodeParameters:Vr,transparency:Cr,palette:Sr,sMask:Nr,predictor:jr,width:gr.width,height:gr.height,bitsPerComponent:hr,colorSpace:yr}}}})(E.API),function(er){er.processGIF89A=function(_e,tr,rr,nr){var sr=new Zt(_e),ir=sr.width,or=sr.height,ar=[];sr.decodeAndBlitFrameRGBA(0,ar);var lr={data:ar,width:ir,height:or},cr=new Qt(100).encode(lr,100);return er.processJPEG.call(this,cr,tr,rr,nr)},er.processGIF87A=er.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var er=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(er);for(var _e=0;_e<er;_e++){var tr=this.datav.getUint8(this.pos++,!0),rr=this.datav.getUint8(this.pos++,!0),nr=this.datav.getUint8(this.pos++,!0),sr=this.datav.getUint8(this.pos++,!0);this.palette[_e]={red:nr,green:rr,blue:tr,quad:sr}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var er="bit"+this.bitPP,_e=this.width*this.height*4;this.data=new Uint8Array(_e),this[er]()}catch(tr){a.log("bit decode error:"+tr)}},te.prototype.bit1=function(){var er,_e=Math.ceil(this.width/8),tr=_e%4;for(er=this.height-1;er>=0;er--){for(var rr=this.bottom_up?er:this.height-1-er,nr=0;nr<_e;nr++)for(var sr=this.datav.getUint8(this.pos++,!0),ir=rr*this.width*4+8*nr*4,or=0;or<8&&8*nr+or<this.width;or++){var ar=this.palette[sr>>7-or&1];this.data[ir+4*or]=ar.blue,this.data[ir+4*or+1]=ar.green,this.data[ir+4*or+2]=ar.red,this.data[ir+4*or+3]=255}tr!==0&&(this.pos+=4-tr)}},te.prototype.bit4=function(){for(var er=Math.ceil(this.width/2),_e=er%4,tr=this.height-1;tr>=0;tr--){for(var rr=this.bottom_up?tr:this.height-1-tr,nr=0;nr<er;nr++){var sr=this.datav.getUint8(this.pos++,!0),ir=rr*this.width*4+2*nr*4,or=sr>>4,ar=15&sr,lr=this.palette[or];if(this.data[ir]=lr.blue,this.data[ir+1]=lr.green,this.data[ir+2]=lr.red,this.data[ir+3]=255,2*nr+1>=this.width)break;lr=this.palette[ar],this.data[ir+4]=lr.blue,this.data[ir+4+1]=lr.green,this.data[ir+4+2]=lr.red,this.data[ir+4+3]=255}_e!==0&&(this.pos+=4-_e)}},te.prototype.bit8=function(){for(var er=this.width%4,_e=this.height-1;_e>=0;_e--){for(var tr=this.bottom_up?_e:this.height-1-_e,rr=0;rr<this.width;rr++){var nr=this.datav.getUint8(this.pos++,!0),sr=tr*this.width*4+4*rr;if(nr<this.palette.length){var ir=this.palette[nr];this.data[sr]=ir.red,this.data[sr+1]=ir.green,this.data[sr+2]=ir.blue,this.data[sr+3]=255}else this.data[sr]=255,this.data[sr+1]=255,this.data[sr+2]=255,this.data[sr+3]=255}er!==0&&(this.pos+=4-er)}},te.prototype.bit15=function(){for(var er=this.width%3,_e=parseInt("11111",2),tr=this.height-1;tr>=0;tr--){for(var rr=this.bottom_up?tr:this.height-1-tr,nr=0;nr<this.width;nr++){var sr=this.datav.getUint16(this.pos,!0);this.pos+=2;var ir=(sr&_e)/_e*255|0,or=(sr>>5&_e)/_e*255|0,ar=(sr>>10&_e)/_e*255|0,lr=sr>>15?255:0,cr=rr*this.width*4+4*nr;this.data[cr]=ar,this.data[cr+1]=or,this.data[cr+2]=ir,this.data[cr+3]=lr}this.pos+=er}},te.prototype.bit16=function(){for(var er=this.width%3,_e=parseInt("11111",2),tr=parseInt("111111",2),rr=this.height-1;rr>=0;rr--){for(var nr=this.bottom_up?rr:this.height-1-rr,sr=0;sr<this.width;sr++){var ir=this.datav.getUint16(this.pos,!0);this.pos+=2;var or=(ir&_e)/_e*255|0,ar=(ir>>5&tr)/tr*255|0,lr=(ir>>11)/_e*255|0,cr=nr*this.width*4+4*sr;this.data[cr]=lr,this.data[cr+1]=ar,this.data[cr+2]=or,this.data[cr+3]=255}this.pos+=er}},te.prototype.bit24=function(){for(var er=this.height-1;er>=0;er--){for(var _e=this.bottom_up?er:this.height-1-er,tr=0;tr<this.width;tr++){var rr=this.datav.getUint8(this.pos++,!0),nr=this.datav.getUint8(this.pos++,!0),sr=this.datav.getUint8(this.pos++,!0),ir=_e*this.width*4+4*tr;this.data[ir]=sr,this.data[ir+1]=nr,this.data[ir+2]=rr,this.data[ir+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var er=this.height-1;er>=0;er--)for(var _e=this.bottom_up?er:this.height-1-er,tr=0;tr<this.width;tr++){var rr=this.datav.getUint8(this.pos++,!0),nr=this.datav.getUint8(this.pos++,!0),sr=this.datav.getUint8(this.pos++,!0),ir=this.datav.getUint8(this.pos++,!0),or=_e*this.width*4+4*tr;this.data[or]=sr,this.data[or+1]=nr,this.data[or+2]=rr,this.data[or+3]=ir}},te.prototype.getData=function(){return this.data},function(er){er.processBMP=function(_e,tr,rr,nr){var sr=new te(_e,!1),ir=sr.width,or=sr.height,ar={data:sr.getData(),width:ir,height:or},lr=new Qt(100).encode(ar,100);return er.processJPEG.call(this,lr,tr,rr,nr)}}(E.API),ee.prototype.getData=function(){return this.data},function(er){er.processWEBP=function(_e,tr,rr,nr){var sr=new ee(_e),ir=sr.width,or=sr.height,ar={data:sr.getData(),width:ir,height:or},lr=new Qt(100).encode(ar,100);return er.processJPEG.call(this,lr,tr,rr,nr)}}(E.API),E.API.processRGBA=function(er,_e,tr){for(var rr=er.data,nr=rr.length,sr=new Uint8Array(nr/4*3),ir=new Uint8Array(nr/4),or=0,ar=0,lr=0;lr<nr;lr+=4){var cr=rr[lr],Ar=rr[lr+1],ur=rr[lr+2],dr=rr[lr+3];sr[or++]=cr,sr[or++]=Ar,sr[or++]=ur,ir[ar++]=dr}var mr=this.__addimage__.arrayBufferToBinaryString(sr);return{alpha:this.__addimage__.arrayBufferToBinaryString(ir),data:mr,index:_e,alias:tr,colorSpace:"DeviceRGB",bitsPerComponent:8,width:er.width,height:er.height}},E.API.setLanguage=function(er){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[er]!==void 0&&(this.internal.languageSettings.languageCode=er,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(er,_e){var tr,rr,nr=(_e=_e||{}).font||this.internal.getFont(),sr=_e.fontSize||this.internal.getFontSize(),ir=_e.charSpace||this.internal.getCharSpace(),or=_e.widths?_e.widths:nr.metadata.Unicode.widths,ar=or.fof?or.fof:1,lr=_e.kerning?_e.kerning:nr.metadata.Unicode.kerning,cr=lr.fof?lr.fof:1,Ar=_e.doKerning!==!1,ur=0,dr=er.length,mr=0,pr=or[0]||ar,yr=[];for(tr=0;tr<dr;tr++)rr=er.charCodeAt(tr),typeof nr.metadata.widthOfString=="function"?yr.push((nr.metadata.widthOfGlyph(nr.metadata.characterToGlyph(rr))+ir*(1e3/sr)||0)/1e3):(ur=Ar&&_typeof(lr[rr])==="object"&&!isNaN(parseInt(lr[rr][mr],10))?lr[rr][mr]/cr:0,yr.push((or[rr]||pr)/ar+ur)),mr=rr;return yr},Yt=Vt.getStringUnitWidth=function(er,_e){var tr=(_e=_e||{}).fontSize||this.internal.getFontSize(),rr=_e.font||this.internal.getFont(),nr=_e.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(er=Vt.processArabic(er)),typeof rr.metadata.widthOfString=="function"?rr.metadata.widthOfString(er,tr,nr)/tr:Gt.apply(this,arguments).reduce(function(sr,ir){return sr+ir},0)},Jt=function(er,_e,tr,rr){for(var nr=[],sr=0,ir=er.length,or=0;sr!==ir&&or+_e[sr]<tr;)or+=_e[sr],sr++;nr.push(er.slice(0,sr));var ar=sr;for(or=0;sr!==ir;)or+_e[sr]>rr&&(nr.push(er.slice(ar,sr)),or=0,ar=sr),or+=_e[sr],sr++;return ar!==sr&&nr.push(er.slice(ar,sr)),nr},Xt=function(er,_e,tr){tr||(tr={});var rr,nr,sr,ir,or,ar,lr,cr=[],Ar=[cr],ur=tr.textIndent||0,dr=0,mr=0,pr=er.split(" "),yr=Gt.apply(this,[" ",tr])[0];if(ar=tr.lineIndent===-1?pr[0].length+2:tr.lineIndent||0){var hr=Array(ar).join(" "),gr=[];pr.map(function(Tr){(Tr=Tr.split(/\s*\n/)).length>1?gr=gr.concat(Tr.map(function(Sr,Nr){return(Nr&&Sr.length?`
`:"")+Sr})):gr.push(Tr[0])}),pr=gr,ar=Yt.apply(this,[hr,tr])}for(sr=0,ir=pr.length;sr<ir;sr++){var Cr=0;if(rr=pr[sr],ar&&rr[0]==`
`&&(rr=rr.substr(1),Cr=1),ur+dr+(mr=(nr=Gt.apply(this,[rr,tr])).reduce(function(Tr,Sr){return Tr+Sr},0))>_e||Cr){if(mr>_e){for(or=Jt.apply(this,[rr,nr,_e-(ur+dr),_e]),cr.push(or.shift()),cr=[or.pop()];or.length;)Ar.push([or.shift()]);mr=nr.slice(rr.length-(cr[0]?cr[0].length:0)).reduce(function(Tr,Sr){return Tr+Sr},0)}else cr=[rr];Ar.push(cr),ur=mr+ar,dr=yr}else cr.push(rr),ur+=dr+mr,dr=yr}return lr=ar?function(Tr,Sr){return(Sr?hr:"")+Tr.join(" ")}:function(Tr){return Tr.join(" ")},Ar.map(lr)},Vt.splitTextToSize=function(er,_e,tr){var rr,nr=(tr=tr||{}).fontSize||this.internal.getFontSize(),sr=(function(cr){if(cr.widths&&cr.kerning)return{widths:cr.widths,kerning:cr.kerning};var Ar=this.internal.getFont(cr.fontName,cr.fontStyle);return Ar.metadata.Unicode?{widths:Ar.metadata.Unicode.widths||{0:1},kerning:Ar.metadata.Unicode.kerning||{}}:{font:Ar.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,tr);rr=Array.isArray(er)?er:String(er).split(/\r?\n/);var ir=1*this.internal.scaleFactor*_e/nr;sr.textIndent=tr.textIndent?1*tr.textIndent*this.internal.scaleFactor/nr:0,sr.lineIndent=tr.lineIndent;var or,ar,lr=[];for(or=0,ar=rr.length;or<ar;or++)lr=lr.concat(Xt.apply(this,[rr[or],ir,sr]));return lr},function(er){er.__fontmetrics__=er.__fontmetrics__||{};for(var _e="klmnopqrstuvwxyz",tr={},rr={},nr=0;nr<_e.length;nr++)tr[_e[nr]]="0123456789abcdef"[nr],rr["0123456789abcdef"[nr]]=_e[nr];var sr=function(Ar){return"0x"+parseInt(Ar,10).toString(16)},ir=er.__fontmetrics__.compress=function(Ar){var ur,dr,mr,pr,yr=["{"];for(var hr in Ar){if(ur=Ar[hr],isNaN(parseInt(hr,10))?dr="'"+hr+"'":(hr=parseInt(hr,10),dr=(dr=sr(hr).slice(2)).slice(0,-1)+rr[dr.slice(-1)]),typeof ur=="number")ur<0?(mr=sr(ur).slice(3),pr="-"):(mr=sr(ur).slice(2),pr=""),mr=pr+mr.slice(0,-1)+rr[mr.slice(-1)];else{if(_typeof(ur)!=="object")throw new Error("Don't know what to do with value type "+_typeof(ur)+".");mr=ir(ur)}yr.push(dr+mr)}return yr.push("}"),yr.join("")},or=er.__fontmetrics__.uncompress=function(Ar){if(typeof Ar!="string")throw new Error("Invalid argument passed to uncompress.");for(var ur,dr,mr,pr,yr={},hr=1,gr=yr,Cr=[],Tr="",Sr="",Nr=Ar.length-1,_r=1;_r<Nr;_r+=1)(pr=Ar[_r])=="'"?ur?(mr=ur.join(""),ur=void 0):ur=[]:ur?ur.push(pr):pr=="{"?(Cr.push([gr,mr]),gr={},mr=void 0):pr=="}"?((dr=Cr.pop())[0][dr[1]]=gr,mr=void 0,gr=dr[0]):pr=="-"?hr=-1:mr===void 0?tr.hasOwnProperty(pr)?(Tr+=tr[pr],mr=parseInt(Tr,16)*hr,hr=1,Tr=""):Tr+=pr:tr.hasOwnProperty(pr)?(Sr+=tr[pr],gr[mr]=parseInt(Sr,16)*hr,hr=1,mr=void 0,Sr=""):Sr+=pr;return yr},ar={codePages:["WinAnsiEncoding"],WinAnsiEncoding:or("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},lr={Unicode:{Courier:ar,"Courier-Bold":ar,"Courier-BoldOblique":ar,"Courier-Oblique":ar,Helvetica:ar,"Helvetica-Bold":ar,"Helvetica-BoldOblique":ar,"Helvetica-Oblique":ar,"Times-Roman":ar,"Times-Bold":ar,"Times-BoldItalic":ar,"Times-Italic":ar}},cr={Unicode:{"Courier-Oblique":or("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":or("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":or("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:or("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":or("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":or("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:or("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:or("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":or("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:or("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":or("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":or("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":or("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":or("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};er.events.push(["addFont",function(Ar){var ur=Ar.font,dr=cr.Unicode[ur.postScriptName];dr&&(ur.metadata.Unicode={},ur.metadata.Unicode.widths=dr.widths,ur.metadata.Unicode.kerning=dr.kerning);var mr=lr.Unicode[ur.postScriptName];mr&&(ur.metadata.Unicode.encoding=mr,ur.encoding=mr.codePages[0])}])}(E.API),function(er){var _e=function(tr){for(var rr=tr.length,nr=new Uint8Array(rr),sr=0;sr<rr;sr++)nr[sr]=tr.charCodeAt(sr);return nr};er.API.events.push(["addFont",function(tr){var rr=void 0,nr=tr.font,sr=tr.instance;if(!nr.isStandardFont){if(sr===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+nr.postScriptName+"').");if(typeof(rr=sr.existsFileInVFS(nr.postScriptName)===!1?sr.loadFile(nr.postScriptName):sr.getFileFromVFS(nr.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+nr.postScriptName+"').");(function(ir,or){or=/^\x00\x01\x00\x00/.test(or)?_e(or):_e(u(or)),ir.metadata=er.API.TTFFont.open(or),ir.metadata.Unicode=ir.metadata.Unicode||{encoding:{},kerning:{},widths:[]},ir.metadata.glyIdsUsed=[0]})(nr,rr)}}])}(E),function(er){function _e(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es-B43FOd4Q.js"),[])).catch(function(tr){return Promise.reject(new Error("Could not load canvg: "+tr))}).then(function(tr){return tr.default?tr.default:tr})}E.API.addSvgAsImage=function(tr,rr,nr,sr,ir,or,ar,lr){if(isNaN(rr)||isNaN(nr))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(sr)||isNaN(ir))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var cr=document.createElement("canvas");cr.width=sr,cr.height=ir;var Ar=cr.getContext("2d");Ar.fillStyle="#fff",Ar.fillRect(0,0,cr.width,cr.height);var ur={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},dr=this;return _e().then(function(mr){return mr.fromString(Ar,tr,ur)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(mr){return mr.render(ur)}).then(function(){dr.addImage(cr.toDataURL("image/jpeg",1),rr,nr,sr,ir,ar,lr)})}}(),E.API.putTotalPages=function(er){var _e,tr=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(_e=new RegExp(er,"g"),tr=this.internal.getNumberOfPages()):(_e=new RegExp(this.pdfEscape16(er,this.internal.getFont()),"g"),tr=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var rr=1;rr<=this.internal.getNumberOfPages();rr++)for(var nr=0;nr<this.internal.pages[rr].length;nr++)this.internal.pages[rr][nr]=this.internal.pages[rr][nr].replace(_e,tr);return this},E.API.viewerPreferences=function(er,_e){var tr;er=er||{},_e=_e||!1;var rr,nr,sr,ir={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},or=Object.keys(ir),ar=[],lr=0,cr=0,Ar=0;function ur(mr,pr){var yr,hr=!1;for(yr=0;yr<mr.length;yr+=1)mr[yr]===pr&&(hr=!0);return hr}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(ir)),this.internal.viewerpreferences.isSubscribed=!1),tr=this.internal.viewerpreferences.configuration,er==="reset"||_e===!0){var dr=or.length;for(Ar=0;Ar<dr;Ar+=1)tr[or[Ar]].value=tr[or[Ar]].defaultValue,tr[or[Ar]].explicitSet=!1}if(_typeof(er)==="object"){for(nr in er)if(sr=er[nr],ur(or,nr)&&sr!==void 0){if(tr[nr].type==="boolean"&&typeof sr=="boolean")tr[nr].value=sr;else if(tr[nr].type==="name"&&ur(tr[nr].valueSet,sr))tr[nr].value=sr;else if(tr[nr].type==="integer"&&Number.isInteger(sr))tr[nr].value=sr;else if(tr[nr].type==="array"){for(lr=0;lr<sr.length;lr+=1)if(rr=!0,sr[lr].length===1&&typeof sr[lr][0]=="number")ar.push(String(sr[lr]-1));else if(sr[lr].length>1){for(cr=0;cr<sr[lr].length;cr+=1)typeof sr[lr][cr]!="number"&&(rr=!1);rr===!0&&ar.push([sr[lr][0]-1,sr[lr][1]-1].join(" "))}tr[nr].value="["+ar.join(" ")+"]"}else tr[nr].value=tr[nr].defaultValue;tr[nr].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var mr,pr=[];for(mr in tr)tr[mr].explicitSet===!0&&(tr[mr].type==="name"?pr.push("/"+mr+" /"+tr[mr].value):pr.push("/"+mr+" "+tr[mr].value));pr.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+pr.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=tr,this},function(er){var _e=function(){var rr='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',nr=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),sr=unescape(encodeURIComponent(rr)),ir=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),or=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),ar=unescape(encodeURIComponent("</x:xmpmeta>")),lr=sr.length+ir.length+or.length+nr.length+ar.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+lr+" >>"),this.internal.write("stream"),this.internal.write(nr+sr+ir+or+ar),this.internal.write("endstream"),this.internal.write("endobj")},tr=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};er.addMetadata=function(rr,nr){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:rr,namespaceuri:nr||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",tr),this.internal.events.subscribe("postPutResources",_e)),this}}(E.API),function(er){var _e=er.API,tr=_e.pdfEscape16=function(sr,ir){for(var or,ar=ir.metadata.Unicode.widths,lr=["","0","00","000","0000"],cr=[""],Ar=0,ur=sr.length;Ar<ur;++Ar){if(or=ir.metadata.characterToGlyph(sr.charCodeAt(Ar)),ir.metadata.glyIdsUsed.push(or),ir.metadata.toUnicode[or]=sr.charCodeAt(Ar),ar.indexOf(or)==-1&&(ar.push(or),ar.push([parseInt(ir.metadata.widthOfGlyph(or),10)])),or=="0")return cr.join("");or=or.toString(16),cr.push(lr[4-or.length],or)}return cr.join("")},rr=function(sr){var ir,or,ar,lr,cr,Ar,ur;for(cr=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,ar=[],Ar=0,ur=(or=Object.keys(sr).sort(function(dr,mr){return dr-mr})).length;Ar<ur;Ar++)ir=or[Ar],ar.length>=100&&(cr+=`
`+ar.length+` beginbfchar
`+ar.join(`
`)+`
endbfchar`,ar=[]),sr[ir]!==void 0&&sr[ir]!==null&&typeof sr[ir].toString=="function"&&(lr=("0000"+sr[ir].toString(16)).slice(-4),ir=("0000"+(+ir).toString(16)).slice(-4),ar.push("<"+ir+"><"+lr+">"));return ar.length&&(cr+=`
`+ar.length+` beginbfchar
`+ar.join(`
`)+`
endbfchar
`),cr+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};_e.events.push(["putFont",function(sr){(function(ir){var or=ir.font,ar=ir.out,lr=ir.newObject,cr=ir.putStream;if(or.metadata instanceof er.API.TTFFont&&or.encoding==="Identity-H"){for(var Ar=or.metadata.Unicode.widths,ur=or.metadata.subset.encode(or.metadata.glyIdsUsed,1),dr="",mr=0;mr<ur.length;mr++)dr+=String.fromCharCode(ur[mr]);var pr=lr();cr({data:dr,addLength1:!0,objectId:pr}),ar("endobj");var yr=lr();cr({data:rr(or.metadata.toUnicode),addLength1:!0,objectId:yr}),ar("endobj");var hr=lr();ar("<<"),ar("/Type /FontDescriptor"),ar("/FontName /"+F(or.fontName)),ar("/FontFile2 "+pr+" 0 R"),ar("/FontBBox "+er.API.PDFObject.convert(or.metadata.bbox)),ar("/Flags "+or.metadata.flags),ar("/StemV "+or.metadata.stemV),ar("/ItalicAngle "+or.metadata.italicAngle),ar("/Ascent "+or.metadata.ascender),ar("/Descent "+or.metadata.decender),ar("/CapHeight "+or.metadata.capHeight),ar(">>"),ar("endobj");var gr=lr();ar("<<"),ar("/Type /Font"),ar("/BaseFont /"+F(or.fontName)),ar("/FontDescriptor "+hr+" 0 R"),ar("/W "+er.API.PDFObject.convert(Ar)),ar("/CIDToGIDMap /Identity"),ar("/DW 1000"),ar("/Subtype /CIDFontType2"),ar("/CIDSystemInfo"),ar("<<"),ar("/Supplement 0"),ar("/Registry (Adobe)"),ar("/Ordering ("+or.encoding+")"),ar(">>"),ar(">>"),ar("endobj"),or.objectNumber=lr(),ar("<<"),ar("/Type /Font"),ar("/Subtype /Type0"),ar("/ToUnicode "+yr+" 0 R"),ar("/BaseFont /"+F(or.fontName)),ar("/Encoding /"+or.encoding),ar("/DescendantFonts ["+gr+" 0 R]"),ar(">>"),ar("endobj"),or.isAlreadyPutted=!0}})(sr)}]),_e.events.push(["putFont",function(sr){(function(ir){var or=ir.font,ar=ir.out,lr=ir.newObject,cr=ir.putStream;if(or.metadata instanceof er.API.TTFFont&&or.encoding==="WinAnsiEncoding"){for(var Ar=or.metadata.rawData,ur="",dr=0;dr<Ar.length;dr++)ur+=String.fromCharCode(Ar[dr]);var mr=lr();cr({data:ur,addLength1:!0,objectId:mr}),ar("endobj");var pr=lr();cr({data:rr(or.metadata.toUnicode),addLength1:!0,objectId:pr}),ar("endobj");var yr=lr();ar("<<"),ar("/Descent "+or.metadata.decender),ar("/CapHeight "+or.metadata.capHeight),ar("/StemV "+or.metadata.stemV),ar("/Type /FontDescriptor"),ar("/FontFile2 "+mr+" 0 R"),ar("/Flags 96"),ar("/FontBBox "+er.API.PDFObject.convert(or.metadata.bbox)),ar("/FontName /"+F(or.fontName)),ar("/ItalicAngle "+or.metadata.italicAngle),ar("/Ascent "+or.metadata.ascender),ar(">>"),ar("endobj"),or.objectNumber=lr();for(var hr=0;hr<or.metadata.hmtx.widths.length;hr++)or.metadata.hmtx.widths[hr]=parseInt(or.metadata.hmtx.widths[hr]*(1e3/or.metadata.head.unitsPerEm));ar("<</Subtype/TrueType/Type/Font/ToUnicode "+pr+" 0 R/BaseFont/"+F(or.fontName)+"/FontDescriptor "+yr+" 0 R/Encoding/"+or.encoding+" /FirstChar 29 /LastChar 255 /Widths "+er.API.PDFObject.convert(or.metadata.hmtx.widths)+">>"),ar("endobj"),or.isAlreadyPutted=!0}})(sr)}]);var nr=function(sr){var ir,or=sr.text||"",ar=sr.x,lr=sr.y,cr=sr.options||{},Ar=sr.mutex||{},ur=Ar.pdfEscape,dr=Ar.activeFontKey,mr=Ar.fonts,pr=dr,yr="",hr=0,gr="",Cr=mr[pr].encoding;if(mr[pr].encoding!=="Identity-H")return{text:or,x:ar,y:lr,options:cr,mutex:Ar};for(gr=or,pr=dr,Array.isArray(or)&&(gr=or[0]),hr=0;hr<gr.length;hr+=1)mr[pr].metadata.hasOwnProperty("cmap")&&(ir=mr[pr].metadata.cmap.unicode.codeMap[gr[hr].charCodeAt(0)]),ir||gr[hr].charCodeAt(0)<256&&mr[pr].metadata.hasOwnProperty("Unicode")?yr+=gr[hr]:yr+="";var Tr="";return parseInt(pr.slice(1))<14||Cr==="WinAnsiEncoding"?Tr=ur(yr,pr).split("").map(function(Sr){return Sr.charCodeAt(0).toString(16)}).join(""):Cr==="Identity-H"&&(Tr=tr(yr,mr[pr])),Ar.isHex=!0,{text:Tr,x:ar,y:lr,options:cr,mutex:Ar}};_e.events.push(["postProcessText",function(sr){var ir=sr.text||"",or=[],ar={text:ir,x:sr.x,y:sr.y,options:sr.options,mutex:sr.mutex};if(Array.isArray(ir)){var lr=0;for(lr=0;lr<ir.length;lr+=1)Array.isArray(ir[lr])&&ir[lr].length===3?or.push([nr(Object.assign({},ar,{text:ir[lr][0]})).text,ir[lr][1],ir[lr][2]]):or.push(nr(Object.assign({},ar,{text:ir[lr]})).text);sr.text=or}else sr.text=nr(Object.assign({},ar,{text:ir})).text}])}(E),function(er){var _e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};er.existsFileInVFS=function(tr){return _e.call(this),this.internal.vFS[tr]!==void 0},er.addFileToVFS=function(tr,rr){return _e.call(this),this.internal.vFS[tr]=rr,this},er.getFileFromVFS=function(tr){return _e.call(this),this.internal.vFS[tr]!==void 0?this.internal.vFS[tr]:null}}(E.API),function(er){er.__bidiEngine__=er.prototype.__bidiEngine__=function(rr){var nr,sr,ir,or,ar,lr,cr,Ar=_e,ur=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],dr=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],mr={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},pr={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},yr=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],hr=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),gr=!1,Cr=0;this.__bidiEngine__={};var Tr=function(Er){var Rr=Er.charCodeAt(),Ir=Rr>>8,Qr=pr[Ir];return Qr!==void 0?Ar[256*Qr+(255&Rr)]:Ir===252||Ir===253?"AL":hr.test(Ir)?"L":Ir===8?"R":"N"},Sr=function(Er){for(var Rr,Ir=0;Ir<Er.length;Ir++){if((Rr=Tr(Er.charAt(Ir)))==="L")return!1;if(Rr==="R")return!0}return!1},Nr=function(Er,Rr,Ir,Qr){var Ur,Vr,Wr,Hr,$r=Rr[Qr];switch($r){case"L":case"R":gr=!1;break;case"N":case"AN":break;case"EN":gr&&($r="AN");break;case"AL":gr=!0,$r="R";break;case"WS":$r="N";break;case"CS":Qr<1||Qr+1>=Rr.length||(Ur=Ir[Qr-1])!=="EN"&&Ur!=="AN"||(Vr=Rr[Qr+1])!=="EN"&&Vr!=="AN"?$r="N":gr&&(Vr="AN"),$r=Vr===Ur?Vr:"N";break;case"ES":$r=(Ur=Qr>0?Ir[Qr-1]:"B")==="EN"&&Qr+1<Rr.length&&Rr[Qr+1]==="EN"?"EN":"N";break;case"ET":if(Qr>0&&Ir[Qr-1]==="EN"){$r="EN";break}if(gr){$r="N";break}for(Wr=Qr+1,Hr=Rr.length;Wr<Hr&&Rr[Wr]==="ET";)Wr++;$r=Wr<Hr&&Rr[Wr]==="EN"?"EN":"N";break;case"NSM":if(ir&&!or){for(Hr=Rr.length,Wr=Qr+1;Wr<Hr&&Rr[Wr]==="NSM";)Wr++;if(Wr<Hr){var Xr=Er[Qr],pn=Xr>=1425&&Xr<=2303||Xr===64286;if(Ur=Rr[Wr],pn&&(Ur==="R"||Ur==="AL")){$r="R";break}}}$r=Qr<1||(Ur=Rr[Qr-1])==="B"?"N":Ir[Qr-1];break;case"B":gr=!1,nr=!0,$r=Cr;break;case"S":sr=!0,$r="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":gr=!1;break;case"BN":$r="N"}return $r},_r=function(Er,Rr,Ir){var Qr=Er.split("");return Ir&&vr(Qr,Ir,{hiLevel:Cr}),Qr.reverse(),Rr&&Rr.reverse(),Qr.join("")},vr=function(Er,Rr,Ir){var Qr,Ur,Vr,Wr,Hr,$r=-1,Xr=Er.length,pn=0,jr=[],Br=Cr?dr:ur,Lr=[];for(gr=!1,nr=!1,sr=!1,Ur=0;Ur<Xr;Ur++)Lr[Ur]=Tr(Er[Ur]);for(Vr=0;Vr<Xr;Vr++){if(Hr=pn,jr[Vr]=Nr(Er,Lr,jr,Vr),Qr=240&(pn=Br[Hr][mr[jr[Vr]]]),pn&=15,Rr[Vr]=Wr=Br[pn][5],Qr>0)if(Qr===16){for(Ur=$r;Ur<Vr;Ur++)Rr[Ur]=1;$r=-1}else $r=-1;if(Br[pn][6])$r===-1&&($r=Vr);else if($r>-1){for(Ur=$r;Ur<Vr;Ur++)Rr[Ur]=Wr;$r=-1}Lr[Vr]==="B"&&(Rr[Vr]=0),Ir.hiLevel|=Wr}sr&&function(Or,zr,Gr){for(var Yr=0;Yr<Gr;Yr++)if(Or[Yr]==="S"){zr[Yr]=Cr;for(var dn=Yr-1;dn>=0&&Or[dn]==="WS";dn--)zr[dn]=Cr}}(Lr,Rr,Xr)},br=function(Er,Rr,Ir,Qr,Ur){if(!(Ur.hiLevel<Er)){if(Er===1&&Cr===1&&!nr)return Rr.reverse(),void(Ir&&Ir.reverse());for(var Vr,Wr,Hr,$r,Xr=Rr.length,pn=0;pn<Xr;){if(Qr[pn]>=Er){for(Hr=pn+1;Hr<Xr&&Qr[Hr]>=Er;)Hr++;for($r=pn,Wr=Hr-1;$r<Wr;$r++,Wr--)Vr=Rr[$r],Rr[$r]=Rr[Wr],Rr[Wr]=Vr,Ir&&(Vr=Ir[$r],Ir[$r]=Ir[Wr],Ir[Wr]=Vr);pn=Hr}pn++}}},Pr=function(Er,Rr,Ir){var Qr=Er.split(""),Ur={hiLevel:Cr};return Ir||(Ir=[]),vr(Qr,Ir,Ur),function(Vr,Wr,Hr){if(Hr.hiLevel!==0&&cr)for(var $r,Xr=0;Xr<Vr.length;Xr++)Wr[Xr]===1&&($r=yr.indexOf(Vr[Xr]))>=0&&(Vr[Xr]=yr[$r+1])}(Qr,Ir,Ur),br(2,Qr,Rr,Ir,Ur),br(1,Qr,Rr,Ir,Ur),Qr.join("")};return this.__bidiEngine__.doBidiReorder=function(Er,Rr,Ir){if(function(Ur,Vr){if(Vr)for(var Wr=0;Wr<Ur.length;Wr++)Vr[Wr]=Wr;or===void 0&&(or=Sr(Ur)),lr===void 0&&(lr=Sr(Ur))}(Er,Rr),ir||!ar||lr)if(ir&&ar&&or^lr)Cr=or?1:0,Er=_r(Er,Rr,Ir);else if(!ir&&ar&&lr)Cr=or?1:0,Er=Pr(Er,Rr,Ir),Er=_r(Er,Rr);else if(!ir||or||ar||lr){if(ir&&!ar&&or^lr)Er=_r(Er,Rr),or?(Cr=0,Er=Pr(Er,Rr,Ir)):(Cr=1,Er=Pr(Er,Rr,Ir),Er=_r(Er,Rr));else if(ir&&or&&!ar&&lr)Cr=1,Er=Pr(Er,Rr,Ir),Er=_r(Er,Rr);else if(!ir&&!ar&&or^lr){var Qr=cr;or?(Cr=1,Er=Pr(Er,Rr,Ir),Cr=0,cr=!1,Er=Pr(Er,Rr,Ir),cr=Qr):(Cr=0,Er=Pr(Er,Rr,Ir),Er=_r(Er,Rr),Cr=1,cr=!1,Er=Pr(Er,Rr,Ir),cr=Qr,Er=_r(Er,Rr))}}else Cr=0,Er=Pr(Er,Rr,Ir);else Cr=or?1:0,Er=Pr(Er,Rr,Ir);return Er},this.__bidiEngine__.setOptions=function(Er){Er&&(ir=Er.isInputVisual,ar=Er.isOutputVisual,or=Er.isInputRtl,lr=Er.isOutputRtl,cr=Er.isSymmetricSwapping)},this.__bidiEngine__.setOptions(rr),this.__bidiEngine__};var _e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],tr=new er.__bidiEngine__({isInputVisual:!0});er.API.events.push(["postProcessText",function(rr){var nr=rr.text;rr.x,rr.y;var sr=rr.options||{};rr.mutex,sr.lang;var ir=[];if(sr.isInputVisual=typeof sr.isInputVisual!="boolean"||sr.isInputVisual,tr.setOptions(sr),Object.prototype.toString.call(nr)==="[object Array]"){var or=0;for(ir=[],or=0;or<nr.length;or+=1)Object.prototype.toString.call(nr[or])==="[object Array]"?ir.push([tr.doBidiReorder(nr[or][0]),nr[or][1],nr[or][2]]):ir.push([tr.doBidiReorder(nr[or])]);rr.text=ir}else rr.text=tr.doBidiReorder(nr);tr.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function er(_e){var tr;if(this.rawData=_e,tr=this.contents=new ne(_e),this.contents.pos=4,tr.readString(4)==="ttcf")throw new Error("TTCF not supported.");tr.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return er.open=function(_e){return new er(_e)},er.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},er.prototype.registerTTF=function(){var _e,tr,rr,nr,sr;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var ir,or,ar,lr;for(lr=[],ir=0,or=(ar=this.bbox).length;ir<or;ir++)_e=ar[ir],lr.push(Math.round(_e*this.scaleFactor));return lr}).call(this),this.stemV=0,this.post.exists?(rr=255&(nr=this.post.italic_angle),32768&(tr=nr>>16)&&(tr=-(1+(65535^tr))),this.italicAngle=+(tr+"."+rr)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(sr=this.familyClass)===1||sr===2||sr===3||sr===4||sr===5||sr===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},er.prototype.characterToGlyph=function(_e){var tr;return((tr=this.cmap.unicode)!=null?tr.codeMap[_e]:void 0)||0},er.prototype.widthOfGlyph=function(_e){var tr;return tr=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(_e).advance*tr},er.prototype.widthOfString=function(_e,tr,rr){var nr,sr,ir,or;for(ir=0,sr=0,or=(_e=""+_e).length;0<=or?sr<or:sr>or;sr=0<=or?++sr:--sr)nr=_e.charCodeAt(sr),ir+=this.widthOfGlyph(this.characterToGlyph(nr))+rr*(1e3/tr)||0;return ir*(tr/1e3)},er.prototype.lineHeight=function(_e,tr){var rr;return tr==null&&(tr=!1),rr=tr?this.lineGap:0,(this.ascender+rr-this.decender)/1e3*_e},er}();var re,ne=function(){function er(_e){this.data=_e??[],this.pos=0,this.length=this.data.length}return er.prototype.readByte=function(){return this.data[this.pos++]},er.prototype.writeByte=function(_e){return this.data[this.pos++]=_e},er.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},er.prototype.writeUInt32=function(_e){return this.writeByte(_e>>>24&255),this.writeByte(_e>>16&255),this.writeByte(_e>>8&255),this.writeByte(255&_e)},er.prototype.readInt32=function(){var _e;return(_e=this.readUInt32())>=2147483648?_e-4294967296:_e},er.prototype.writeInt32=function(_e){return _e<0&&(_e+=4294967296),this.writeUInt32(_e)},er.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},er.prototype.writeUInt16=function(_e){return this.writeByte(_e>>8&255),this.writeByte(255&_e)},er.prototype.readInt16=function(){var _e;return(_e=this.readUInt16())>=32768?_e-65536:_e},er.prototype.writeInt16=function(_e){return _e<0&&(_e+=65536),this.writeUInt16(_e)},er.prototype.readString=function(_e){var tr,rr;for(rr=[],tr=0;0<=_e?tr<_e:tr>_e;tr=0<=_e?++tr:--tr)rr[tr]=String.fromCharCode(this.readByte());return rr.join("")},er.prototype.writeString=function(_e){var tr,rr,nr;for(nr=[],tr=0,rr=_e.length;0<=rr?tr<rr:tr>rr;tr=0<=rr?++tr:--tr)nr.push(this.writeByte(_e.charCodeAt(tr)));return nr},er.prototype.readShort=function(){return this.readInt16()},er.prototype.writeShort=function(_e){return this.writeInt16(_e)},er.prototype.readLongLong=function(){var _e,tr,rr,nr,sr,ir,or,ar;return _e=this.readByte(),tr=this.readByte(),rr=this.readByte(),nr=this.readByte(),sr=this.readByte(),ir=this.readByte(),or=this.readByte(),ar=this.readByte(),128&_e?-1*(72057594037927940*(255^_e)+281474976710656*(255^tr)+1099511627776*(255^rr)+4294967296*(255^nr)+16777216*(255^sr)+65536*(255^ir)+256*(255^or)+(255^ar)+1):72057594037927940*_e+281474976710656*tr+1099511627776*rr+4294967296*nr+16777216*sr+65536*ir+256*or+ar},er.prototype.writeLongLong=function(_e){var tr,rr;return tr=Math.floor(_e/4294967296),rr=4294967295&_e,this.writeByte(tr>>24&255),this.writeByte(tr>>16&255),this.writeByte(tr>>8&255),this.writeByte(255&tr),this.writeByte(rr>>24&255),this.writeByte(rr>>16&255),this.writeByte(rr>>8&255),this.writeByte(255&rr)},er.prototype.readInt=function(){return this.readInt32()},er.prototype.writeInt=function(_e){return this.writeInt32(_e)},er.prototype.read=function(_e){var tr,rr;for(tr=[],rr=0;0<=_e?rr<_e:rr>_e;rr=0<=_e?++rr:--rr)tr.push(this.readByte());return tr},er.prototype.write=function(_e){var tr,rr,nr,sr;for(sr=[],rr=0,nr=_e.length;rr<nr;rr++)tr=_e[rr],sr.push(this.writeByte(tr));return sr},er}(),ie=function(){var er;function _e(tr){var rr,nr,sr;for(this.scalarType=tr.readInt(),this.tableCount=tr.readShort(),this.searchRange=tr.readShort(),this.entrySelector=tr.readShort(),this.rangeShift=tr.readShort(),this.tables={},nr=0,sr=this.tableCount;0<=sr?nr<sr:nr>sr;nr=0<=sr?++nr:--nr)rr={tag:tr.readString(4),checksum:tr.readInt(),offset:tr.readInt(),length:tr.readInt()},this.tables[rr.tag]=rr}return _e.prototype.encode=function(tr){var rr,nr,sr,ir,or,ar,lr,cr,Ar,ur,dr,mr,pr;for(pr in dr=Object.keys(tr).length,ar=Math.log(2),Ar=16*Math.floor(Math.log(dr)/ar),ir=Math.floor(Ar/ar),cr=16*dr-Ar,(nr=new ne).writeInt(this.scalarType),nr.writeShort(dr),nr.writeShort(Ar),nr.writeShort(ir),nr.writeShort(cr),sr=16*dr,lr=nr.pos+sr,or=null,mr=[],tr)for(ur=tr[pr],nr.writeString(pr),nr.writeInt(er(ur)),nr.writeInt(lr),nr.writeInt(ur.length),mr=mr.concat(ur),pr==="head"&&(or=lr),lr+=ur.length;lr%4;)mr.push(0),lr++;return nr.write(mr),rr=2981146554-er(nr.data),nr.pos=or+8,nr.writeUInt32(rr),nr.data},er=function(tr){var rr,nr,sr,ir;for(tr=ve.call(tr);tr.length%4;)tr.push(0);for(sr=new ne(tr),nr=0,rr=0,ir=tr.length;rr<ir;rr=rr+=4)nr+=sr.readUInt32();return 4294967295&nr},_e}(),ae={}.hasOwnProperty,oe=function(er,_e){for(var tr in _e)ae.call(_e,tr)&&(er[tr]=_e[tr]);function rr(){this.constructor=er}return rr.prototype=_e.prototype,er.prototype=new rr,er.__super__=_e.prototype,er};re=function(){function er(_e){var tr;this.file=_e,tr=this.file.directory.tables[this.tag],this.exists=!!tr,tr&&(this.offset=tr.offset,this.length=tr.length,this.parse(this.file.contents))}return er.prototype.parse=function(){},er.prototype.encode=function(){},er.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},er}();var se=function(er){function _e(){return _e.__super__.constructor.apply(this,arguments)}return oe(_e,re),_e.prototype.tag="head",_e.prototype.parse=function(tr){return tr.pos=this.offset,this.version=tr.readInt(),this.revision=tr.readInt(),this.checkSumAdjustment=tr.readInt(),this.magicNumber=tr.readInt(),this.flags=tr.readShort(),this.unitsPerEm=tr.readShort(),this.created=tr.readLongLong(),this.modified=tr.readLongLong(),this.xMin=tr.readShort(),this.yMin=tr.readShort(),this.xMax=tr.readShort(),this.yMax=tr.readShort(),this.macStyle=tr.readShort(),this.lowestRecPPEM=tr.readShort(),this.fontDirectionHint=tr.readShort(),this.indexToLocFormat=tr.readShort(),this.glyphDataFormat=tr.readShort()},_e.prototype.encode=function(tr){var rr;return(rr=new ne).writeInt(this.version),rr.writeInt(this.revision),rr.writeInt(this.checkSumAdjustment),rr.writeInt(this.magicNumber),rr.writeShort(this.flags),rr.writeShort(this.unitsPerEm),rr.writeLongLong(this.created),rr.writeLongLong(this.modified),rr.writeShort(this.xMin),rr.writeShort(this.yMin),rr.writeShort(this.xMax),rr.writeShort(this.yMax),rr.writeShort(this.macStyle),rr.writeShort(this.lowestRecPPEM),rr.writeShort(this.fontDirectionHint),rr.writeShort(tr),rr.writeShort(this.glyphDataFormat),rr.data},_e}(),ce=function(){function er(_e,tr){var rr,nr,sr,ir,or,ar,lr,cr,Ar,ur,dr,mr,pr,yr,hr,gr,Cr;switch(this.platformID=_e.readUInt16(),this.encodingID=_e.readShort(),this.offset=tr+_e.readInt(),Ar=_e.pos,_e.pos=this.offset,this.format=_e.readUInt16(),this.length=_e.readUInt16(),this.language=_e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(ar=0;ar<256;++ar)this.codeMap[ar]=_e.readByte();break;case 4:for(dr=_e.readUInt16(),ur=dr/2,_e.pos+=6,sr=function(){var Tr,Sr;for(Sr=[],ar=Tr=0;0<=ur?Tr<ur:Tr>ur;ar=0<=ur?++Tr:--Tr)Sr.push(_e.readUInt16());return Sr}(),_e.pos+=2,pr=function(){var Tr,Sr;for(Sr=[],ar=Tr=0;0<=ur?Tr<ur:Tr>ur;ar=0<=ur?++Tr:--Tr)Sr.push(_e.readUInt16());return Sr}(),lr=function(){var Tr,Sr;for(Sr=[],ar=Tr=0;0<=ur?Tr<ur:Tr>ur;ar=0<=ur?++Tr:--Tr)Sr.push(_e.readUInt16());return Sr}(),cr=function(){var Tr,Sr;for(Sr=[],ar=Tr=0;0<=ur?Tr<ur:Tr>ur;ar=0<=ur?++Tr:--Tr)Sr.push(_e.readUInt16());return Sr}(),nr=(this.length-_e.pos+this.offset)/2,or=function(){var Tr,Sr;for(Sr=[],ar=Tr=0;0<=nr?Tr<nr:Tr>nr;ar=0<=nr?++Tr:--Tr)Sr.push(_e.readUInt16());return Sr}(),ar=hr=0,Cr=sr.length;hr<Cr;ar=++hr)for(yr=sr[ar],rr=gr=mr=pr[ar];mr<=yr?gr<=yr:gr>=yr;rr=mr<=yr?++gr:--gr)cr[ar]===0?ir=rr+lr[ar]:(ir=or[cr[ar]/2+(rr-mr)-(ur-ar)]||0)!==0&&(ir+=lr[ar]),this.codeMap[rr]=65535&ir}_e.pos=Ar}return er.encode=function(_e,tr){var rr,nr,sr,ir,or,ar,lr,cr,Ar,ur,dr,mr,pr,yr,hr,gr,Cr,Tr,Sr,Nr,_r,vr,br,Pr,Er,Rr,Ir,Qr,Ur,Vr,Wr,Hr,$r,Xr,pn,jr,Br,Lr,Or,zr,Gr,Yr,dn,En,Sn,Bn;switch(Qr=new ne,ir=Object.keys(_e).sort(function(kn,Kn){return kn-Kn}),tr){case"macroman":for(pr=0,yr=function(){var kn=[];for(mr=0;mr<256;++mr)kn.push(0);return kn}(),gr={0:0},sr={},Ur=0,$r=ir.length;Ur<$r;Ur++)gr[dn=_e[nr=ir[Ur]]]==null&&(gr[dn]=++pr),sr[nr]={old:_e[nr],new:gr[_e[nr]]},yr[nr]=gr[_e[nr]];return Qr.writeUInt16(1),Qr.writeUInt16(0),Qr.writeUInt32(12),Qr.writeUInt16(0),Qr.writeUInt16(262),Qr.writeUInt16(0),Qr.write(yr),{charMap:sr,subtable:Qr.data,maxGlyphID:pr+1};case"unicode":for(Rr=[],Ar=[],Cr=0,gr={},rr={},hr=lr=null,Vr=0,Xr=ir.length;Vr<Xr;Vr++)gr[Sr=_e[nr=ir[Vr]]]==null&&(gr[Sr]=++Cr),rr[nr]={old:Sr,new:gr[Sr]},or=gr[Sr]-nr,hr!=null&&or===lr||(hr&&Ar.push(hr),Rr.push(nr),lr=or),hr=nr;for(hr&&Ar.push(hr),Ar.push(65535),Rr.push(65535),Pr=2*(br=Rr.length),vr=2*Math.pow(Math.log(br)/Math.LN2,2),ur=Math.log(vr/2)/Math.LN2,_r=2*br-vr,ar=[],Nr=[],dr=[],mr=Wr=0,pn=Rr.length;Wr<pn;mr=++Wr){if(Er=Rr[mr],cr=Ar[mr],Er===65535){ar.push(0),Nr.push(0);break}if(Er-(Ir=rr[Er].new)>=32768)for(ar.push(0),Nr.push(2*(dr.length+br-mr)),nr=Hr=Er;Er<=cr?Hr<=cr:Hr>=cr;nr=Er<=cr?++Hr:--Hr)dr.push(rr[nr].new);else ar.push(Ir-Er),Nr.push(0)}for(Qr.writeUInt16(3),Qr.writeUInt16(1),Qr.writeUInt32(12),Qr.writeUInt16(4),Qr.writeUInt16(16+8*br+2*dr.length),Qr.writeUInt16(0),Qr.writeUInt16(Pr),Qr.writeUInt16(vr),Qr.writeUInt16(ur),Qr.writeUInt16(_r),Gr=0,jr=Ar.length;Gr<jr;Gr++)nr=Ar[Gr],Qr.writeUInt16(nr);for(Qr.writeUInt16(0),Yr=0,Br=Rr.length;Yr<Br;Yr++)nr=Rr[Yr],Qr.writeUInt16(nr);for(En=0,Lr=ar.length;En<Lr;En++)or=ar[En],Qr.writeUInt16(or);for(Sn=0,Or=Nr.length;Sn<Or;Sn++)Tr=Nr[Sn],Qr.writeUInt16(Tr);for(Bn=0,zr=dr.length;Bn<zr;Bn++)pr=dr[Bn],Qr.writeUInt16(pr);return{charMap:rr,subtable:Qr.data,maxGlyphID:Cr+1}}},er}(),ue=function(er){function _e(){return _e.__super__.constructor.apply(this,arguments)}return oe(_e,re),_e.prototype.tag="cmap",_e.prototype.parse=function(tr){var rr,nr,sr;for(tr.pos=this.offset,this.version=tr.readUInt16(),sr=tr.readUInt16(),this.tables=[],this.unicode=null,nr=0;0<=sr?nr<sr:nr>sr;nr=0<=sr?++nr:--nr)rr=new ce(tr,this.offset),this.tables.push(rr),rr.isUnicode&&this.unicode==null&&(this.unicode=rr);return!0},_e.encode=function(tr,rr){var nr,sr;return rr==null&&(rr="macroman"),nr=ce.encode(tr,rr),(sr=new ne).writeUInt16(0),sr.writeUInt16(1),nr.table=sr.data.concat(nr.subtable),nr},_e}(),he=function(er){function _e(){return _e.__super__.constructor.apply(this,arguments)}return oe(_e,re),_e.prototype.tag="hhea",_e.prototype.parse=function(tr){return tr.pos=this.offset,this.version=tr.readInt(),this.ascender=tr.readShort(),this.decender=tr.readShort(),this.lineGap=tr.readShort(),this.advanceWidthMax=tr.readShort(),this.minLeftSideBearing=tr.readShort(),this.minRightSideBearing=tr.readShort(),this.xMaxExtent=tr.readShort(),this.caretSlopeRise=tr.readShort(),this.caretSlopeRun=tr.readShort(),this.caretOffset=tr.readShort(),tr.pos+=8,this.metricDataFormat=tr.readShort(),this.numberOfMetrics=tr.readUInt16()},_e}(),le=function(er){function _e(){return _e.__super__.constructor.apply(this,arguments)}return oe(_e,re),_e.prototype.tag="OS/2",_e.prototype.parse=function(tr){if(tr.pos=this.offset,this.version=tr.readUInt16(),this.averageCharWidth=tr.readShort(),this.weightClass=tr.readUInt16(),this.widthClass=tr.readUInt16(),this.type=tr.readShort(),this.ySubscriptXSize=tr.readShort(),this.ySubscriptYSize=tr.readShort(),this.ySubscriptXOffset=tr.readShort(),this.ySubscriptYOffset=tr.readShort(),this.ySuperscriptXSize=tr.readShort(),this.ySuperscriptYSize=tr.readShort(),this.ySuperscriptXOffset=tr.readShort(),this.ySuperscriptYOffset=tr.readShort(),this.yStrikeoutSize=tr.readShort(),this.yStrikeoutPosition=tr.readShort(),this.familyClass=tr.readShort(),this.panose=function(){var rr,nr;for(nr=[],rr=0;rr<10;++rr)nr.push(tr.readByte());return nr}(),this.charRange=function(){var rr,nr;for(nr=[],rr=0;rr<4;++rr)nr.push(tr.readInt());return nr}(),this.vendorID=tr.readString(4),this.selection=tr.readShort(),this.firstCharIndex=tr.readShort(),this.lastCharIndex=tr.readShort(),this.version>0&&(this.ascent=tr.readShort(),this.descent=tr.readShort(),this.lineGap=tr.readShort(),this.winAscent=tr.readShort(),this.winDescent=tr.readShort(),this.codePageRange=function(){var rr,nr;for(nr=[],rr=0;rr<2;rr=++rr)nr.push(tr.readInt());return nr}(),this.version>1))return this.xHeight=tr.readShort(),this.capHeight=tr.readShort(),this.defaultChar=tr.readShort(),this.breakChar=tr.readShort(),this.maxContext=tr.readShort()},_e}(),fe=function(er){function _e(){return _e.__super__.constructor.apply(this,arguments)}return oe(_e,re),_e.prototype.tag="post",_e.prototype.parse=function(tr){var rr,nr,sr;switch(tr.pos=this.offset,this.format=tr.readInt(),this.italicAngle=tr.readInt(),this.underlinePosition=tr.readShort(),this.underlineThickness=tr.readShort(),this.isFixedPitch=tr.readInt(),this.minMemType42=tr.readInt(),this.maxMemType42=tr.readInt(),this.minMemType1=tr.readInt(),this.maxMemType1=tr.readInt(),this.format){case 65536:break;case 131072:var ir;for(nr=tr.readUInt16(),this.glyphNameIndex=[],ir=0;0<=nr?ir<nr:ir>nr;ir=0<=nr?++ir:--ir)this.glyphNameIndex.push(tr.readUInt16());for(this.names=[],sr=[];tr.pos<this.offset+this.length;)rr=tr.readByte(),sr.push(this.names.push(tr.readString(rr)));return sr;case 151552:return nr=tr.readUInt16(),this.offsets=tr.read(nr);case 196608:break;case 262144:return this.map=(function(){var or,ar,lr;for(lr=[],ir=or=0,ar=this.file.maxp.numGlyphs;0<=ar?or<ar:or>ar;ir=0<=ar?++or:--or)lr.push(tr.readUInt32());return lr}).call(this)}},_e}(),de=function(er,_e){this.raw=er,this.length=er.length,this.platformID=_e.platformID,this.encodingID=_e.encodingID,this.languageID=_e.languageID},pe=function(er){function _e(){return _e.__super__.constructor.apply(this,arguments)}return oe(_e,re),_e.prototype.tag="name",_e.prototype.parse=function(tr){var rr,nr,sr,ir,or,ar,lr,cr,Ar,ur,dr;for(tr.pos=this.offset,tr.readShort(),rr=tr.readShort(),ar=tr.readShort(),nr=[],ir=0;0<=rr?ir<rr:ir>rr;ir=0<=rr?++ir:--ir)nr.push({platformID:tr.readShort(),encodingID:tr.readShort(),languageID:tr.readShort(),nameID:tr.readShort(),length:tr.readShort(),offset:this.offset+ar+tr.readShort()});for(lr={},ir=Ar=0,ur=nr.length;Ar<ur;ir=++Ar)sr=nr[ir],tr.pos=sr.offset,cr=tr.readString(sr.length),or=new de(cr,sr),lr[dr=sr.nameID]==null&&(lr[dr]=[]),lr[sr.nameID].push(or);this.strings=lr,this.copyright=lr[0],this.fontFamily=lr[1],this.fontSubfamily=lr[2],this.uniqueSubfamily=lr[3],this.fontName=lr[4],this.version=lr[5];try{this.postscriptName=lr[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=lr[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=lr[7],this.manufacturer=lr[8],this.designer=lr[9],this.description=lr[10],this.vendorUrl=lr[11],this.designerUrl=lr[12],this.license=lr[13],this.licenseUrl=lr[14],this.preferredFamily=lr[15],this.preferredSubfamily=lr[17],this.compatibleFull=lr[18],this.sampleText=lr[19]},_e}(),ge=function(er){function _e(){return _e.__super__.constructor.apply(this,arguments)}return oe(_e,re),_e.prototype.tag="maxp",_e.prototype.parse=function(tr){return tr.pos=this.offset,this.version=tr.readInt(),this.numGlyphs=tr.readUInt16(),this.maxPoints=tr.readUInt16(),this.maxContours=tr.readUInt16(),this.maxCompositePoints=tr.readUInt16(),this.maxComponentContours=tr.readUInt16(),this.maxZones=tr.readUInt16(),this.maxTwilightPoints=tr.readUInt16(),this.maxStorage=tr.readUInt16(),this.maxFunctionDefs=tr.readUInt16(),this.maxInstructionDefs=tr.readUInt16(),this.maxStackElements=tr.readUInt16(),this.maxSizeOfInstructions=tr.readUInt16(),this.maxComponentElements=tr.readUInt16(),this.maxComponentDepth=tr.readUInt16()},_e}(),me=function(er){function _e(){return _e.__super__.constructor.apply(this,arguments)}return oe(_e,re),_e.prototype.tag="hmtx",_e.prototype.parse=function(tr){var rr,nr,sr,ir,or,ar,lr;for(tr.pos=this.offset,this.metrics=[],rr=0,ar=this.file.hhea.numberOfMetrics;0<=ar?rr<ar:rr>ar;rr=0<=ar?++rr:--rr)this.metrics.push({advance:tr.readUInt16(),lsb:tr.readInt16()});for(sr=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var cr,Ar;for(Ar=[],rr=cr=0;0<=sr?cr<sr:cr>sr;rr=0<=sr?++cr:--cr)Ar.push(tr.readInt16());return Ar}(),this.widths=(function(){var cr,Ar,ur,dr;for(dr=[],cr=0,Ar=(ur=this.metrics).length;cr<Ar;cr++)ir=ur[cr],dr.push(ir.advance);return dr}).call(this),nr=this.widths[this.widths.length-1],lr=[],rr=or=0;0<=sr?or<sr:or>sr;rr=0<=sr?++or:--or)lr.push(this.widths.push(nr));return lr},_e.prototype.forGlyph=function(tr){return tr in this.metrics?this.metrics[tr]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[tr-this.metrics.length]}},_e}(),ve=[].slice,be=function(er){function _e(){return _e.__super__.constructor.apply(this,arguments)}return oe(_e,re),_e.prototype.tag="glyf",_e.prototype.parse=function(){return this.cache={}},_e.prototype.glyphFor=function(tr){var rr,nr,sr,ir,or,ar,lr,cr,Ar,ur;return tr in this.cache?this.cache[tr]:(ir=this.file.loca,rr=this.file.contents,nr=ir.indexOf(tr),(sr=ir.lengthOf(tr))===0?this.cache[tr]=null:(rr.pos=this.offset+nr,or=(ar=new ne(rr.read(sr))).readShort(),cr=ar.readShort(),ur=ar.readShort(),lr=ar.readShort(),Ar=ar.readShort(),this.cache[tr]=or===-1?new we(ar,cr,ur,lr,Ar):new ye(ar,or,cr,ur,lr,Ar),this.cache[tr]))},_e.prototype.encode=function(tr,rr,nr){var sr,ir,or,ar,lr;for(or=[],ir=[],ar=0,lr=rr.length;ar<lr;ar++)sr=tr[rr[ar]],ir.push(or.length),sr&&(or=or.concat(sr.encode(nr)));return ir.push(or.length),{table:or,offsets:ir}},_e}(),ye=function(){function er(_e,tr,rr,nr,sr,ir){this.raw=_e,this.numberOfContours=tr,this.xMin=rr,this.yMin=nr,this.xMax=sr,this.yMax=ir,this.compound=!1}return er.prototype.encode=function(){return this.raw.data},er}(),we=function(){function er(_e,tr,rr,nr,sr){var ir,or;for(this.raw=_e,this.xMin=tr,this.yMin=rr,this.xMax=nr,this.yMax=sr,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],ir=this.raw;or=ir.readShort(),this.glyphOffsets.push(ir.pos),this.glyphIDs.push(ir.readUInt16()),32&or;)ir.pos+=1&or?4:2,128&or?ir.pos+=8:64&or?ir.pos+=4:8&or&&(ir.pos+=2)}return er.prototype.encode=function(){var _e,tr,rr;for(tr=new ne(ve.call(this.raw.data)),_e=0,rr=this.glyphIDs.length;_e<rr;++_e)tr.pos=this.glyphOffsets[_e];return tr.data},er}(),Ne=function(er){function _e(){return _e.__super__.constructor.apply(this,arguments)}return oe(_e,re),_e.prototype.tag="loca",_e.prototype.parse=function(tr){var rr,nr;return tr.pos=this.offset,rr=this.file.head.indexToLocFormat,this.offsets=rr===0?(function(){var sr,ir;for(ir=[],nr=0,sr=this.length;nr<sr;nr+=2)ir.push(2*tr.readUInt16());return ir}).call(this):(function(){var sr,ir;for(ir=[],nr=0,sr=this.length;nr<sr;nr+=4)ir.push(tr.readUInt32());return ir}).call(this)},_e.prototype.indexOf=function(tr){return this.offsets[tr]},_e.prototype.lengthOf=function(tr){return this.offsets[tr+1]-this.offsets[tr]},_e.prototype.encode=function(tr,rr){for(var nr=new Uint32Array(this.offsets.length),sr=0,ir=0,or=0;or<nr.length;++or)if(nr[or]=sr,ir<rr.length&&rr[ir]==or){++ir,nr[or]=sr;var ar=this.offsets[or],lr=this.offsets[or+1]-ar;lr>0&&(sr+=lr)}for(var cr=new Array(4*nr.length),Ar=0;Ar<nr.length;++Ar)cr[4*Ar+3]=255&nr[Ar],cr[4*Ar+2]=(65280&nr[Ar])>>8,cr[4*Ar+1]=(16711680&nr[Ar])>>16,cr[4*Ar]=(4278190080&nr[Ar])>>24;return cr},_e}(),Le=function(){function er(_e){this.font=_e,this.subset={},this.unicodes={},this.next=33}return er.prototype.generateCmap=function(){var _e,tr,rr,nr,sr;for(tr in nr=this.font.cmap.tables[0].codeMap,_e={},sr=this.subset)rr=sr[tr],_e[tr]=nr[rr];return _e},er.prototype.glyphsFor=function(_e){var tr,rr,nr,sr,ir,or,ar;for(nr={},ir=0,or=_e.length;ir<or;ir++)nr[sr=_e[ir]]=this.font.glyf.glyphFor(sr);for(sr in tr=[],nr)(rr=nr[sr])!=null&&rr.compound&&tr.push.apply(tr,rr.glyphIDs);if(tr.length>0)for(sr in ar=this.glyphsFor(tr))rr=ar[sr],nr[sr]=rr;return nr},er.prototype.encode=function(_e,tr){var rr,nr,sr,ir,or,ar,lr,cr,Ar,ur,dr,mr,pr,yr,hr;for(nr in rr=ue.encode(this.generateCmap(),"unicode"),ir=this.glyphsFor(_e),dr={0:0},hr=rr.charMap)dr[(ar=hr[nr]).old]=ar.new;for(mr in ur=rr.maxGlyphID,ir)mr in dr||(dr[mr]=ur++);return cr=function(gr){var Cr,Tr;for(Cr in Tr={},gr)Tr[gr[Cr]]=Cr;return Tr}(dr),Ar=Object.keys(cr).sort(function(gr,Cr){return gr-Cr}),pr=function(){var gr,Cr,Tr;for(Tr=[],gr=0,Cr=Ar.length;gr<Cr;gr++)or=Ar[gr],Tr.push(cr[or]);return Tr}(),sr=this.font.glyf.encode(ir,pr,dr),lr=this.font.loca.encode(sr.offsets,pr),yr={cmap:this.font.cmap.raw(),glyf:sr.table,loca:lr,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(tr)},this.font.os2.exists&&(yr["OS/2"]=this.font.os2.raw()),this.font.directory.encode(yr)},er}();E.API.PDFObject=function(){var er;function _e(){}return er=function(tr,rr){return(Array(rr+1).join("0")+tr).slice(-rr)},_e.convert=function(tr){var rr,nr,sr,ir;if(Array.isArray(tr))return"["+function(){var or,ar,lr;for(lr=[],or=0,ar=tr.length;or<ar;or++)rr=tr[or],lr.push(_e.convert(rr));return lr}().join(" ")+"]";if(typeof tr=="string")return"/"+tr;if(tr!=null&&tr.isString)return"("+tr+")";if(tr instanceof Date)return"(D:"+er(tr.getUTCFullYear(),4)+er(tr.getUTCMonth(),2)+er(tr.getUTCDate(),2)+er(tr.getUTCHours(),2)+er(tr.getUTCMinutes(),2)+er(tr.getUTCSeconds(),2)+"Z)";if({}.toString.call(tr)==="[object Object]"){for(nr in sr=["<<"],tr)ir=tr[nr],sr.push("/"+nr+" "+_e.convert(ir));return sr.push(">>"),sr.join(`
`)}return""+tr},_e}();const downloadImageAsPDF=async({title:er,base64Image:_e})=>{const tr=new E("p","mm","a4"),rr=210,nr=297,sr=new Image;sr.src=_e,await new Promise(mr=>sr.onload=mr);const ir=sr.naturalWidth,or=sr.naturalHeight,ar=rr/ir,lr=or*ar;let cr=lr,Ar=0,ur=1;for(;cr>0;)ur>1&&tr.addPage(),tr.addImage(_e,"JPEG",0,-Ar,rr,lr),cr-=nr,Ar+=nr,ur++;const dr=`${er.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_image.pdf`;tr.save(dr)},downloadPDF=async er=>{throw console.error("The old downloadPDF function is a stub. The component calling it MUST be fixed to use downloadImageAsPDF."),new Error("Old PDF download method is deprecated. The component is misconfigured.")},AnalysisContentRenderer=({result:er,selectedFiles:_e})=>{var rr;const tr=((rr=_e[0])==null?void 0:rr.name)||"Study Material";return jsxRuntimeExports.jsxs("div",{id:"analysis-content-to-capture",className:"p-8 bg-white text-black max-w-4xl mx-auto",style:{fontFamily:"Noto Sans Tamil, Arial, sans-serif",fontSize:"12pt",lineHeight:"1.6",width:"800px",minHeight:"1100px",padding:"30px"},children:[jsxRuntimeExports.jsx("h1",{style:{fontSize:"24pt",fontWeight:"bold",marginBottom:"1rem",borderBottom:"2px solid #ccc",paddingBottom:"0.5rem"},children:"TNPSC Study Analysis"}),jsxRuntimeExports.jsxs("p",{style:{marginBottom:"1rem",fontSize:"14pt"},children:["**Topic:** ",er.mainTopic||"N/A"]}),jsxRuntimeExports.jsxs("p",{style:{marginBottom:"1.5rem"},children:["**Source File:** ",tr]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"2rem"},children:[jsxRuntimeExports.jsx("h3",{style:{fontSize:"18pt",fontWeight:"bold",marginBottom:"0.5rem",color:"#333"},children:"Summary"}),jsxRuntimeExports.jsx("p",{children:er.summary})]}),er.studyPoints&&er.studyPoints.length>0&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"2rem"},children:[jsxRuntimeExports.jsx("h3",{style:{fontSize:"18pt",fontWeight:"bold",marginBottom:"1rem",color:"#333"},children:"Detailed Study Points"}),jsxRuntimeExports.jsx("div",{style:{border:"1px solid #eee",padding:"1rem",borderRadius:"8px"},children:er.studyPoints.map((nr,sr)=>jsxRuntimeExports.jsxs("div",{style:{marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px dotted #ccc"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[jsxRuntimeExports.jsxs("h4",{style:{fontSize:"14pt",fontWeight:"bold",color:"#007bff"},children:[sr+1,". ",nr.title]}),jsxRuntimeExports.jsx("span",{style:{fontSize:"10pt",padding:"4px 8px",borderRadius:"4px",backgroundColor:nr.importance==="high"?"#fdebeb":nr.importance==="medium"?"#fffbeb":"#e6f7e8",color:nr.importance==="high"?"#c53030":nr.importance==="medium"?"#d69e2e":"#2f855a"},children:nr.importance.toUpperCase()})]}),jsxRuntimeExports.jsx("p",{style:{fontSize:"11pt",color:"#555",marginBottom:"10px"},children:nr.description}),nr.memoryTip&&jsxRuntimeExports.jsxs("p",{style:{fontSize:"10pt",fontStyle:"italic",color:"#007bff",backgroundColor:"#e6f0ff",padding:"8px",borderRadius:"4px"},children:[" **Memory Tip:** ",nr.memoryTip]})]},sr))})]}),er.keyPoints&&er.keyPoints.length>0&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"2rem"},children:[jsxRuntimeExports.jsx("h3",{style:{fontSize:"18pt",fontWeight:"bold",marginBottom:"1rem",color:"#333"},children:"Quick Review Key Facts"}),jsxRuntimeExports.jsx("ul",{style:{listStyleType:"disc",paddingLeft:"20px"},children:er.keyPoints.slice(0,10).map((nr,sr)=>jsxRuntimeExports.jsx("li",{style:{marginBottom:"5px",fontSize:"11pt"},children:nr},sr))})]}),er.tnpscCategories&&er.tnpscCategories.length>0&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"2rem"},children:[jsxRuntimeExports.jsx("h3",{style:{fontSize:"14pt",fontWeight:"bold",marginBottom:"0.5rem",color:"#333"},children:"TNPSC Categories"}),jsxRuntimeExports.jsx("p",{children:er.tnpscCategories.join(", ")})]})]})},AnalysisResults=({result:er,onReset:_e,selectedFiles:tr,onGenerateQuestions:rr,onStartQuiz:nr,isGeneratingQuestions:sr})=>{const[ir]=useAuthState(auth);React.useEffect(()=>{(async()=>{var lr;if(ir&&er)try{await saveStudyHistory(ir.uid,"analysis",[er],{fileName:((lr=tr[0])==null?void 0:lr.name)||"Study Material",difficulty:"medium",language:er.language||"english",files:tr}),console.log("Analysis saved to study history")}catch(cr){console.error("Failed to save to study history:",cr)}})()},[ir,er,tr]);const or=async()=>{const ar=document.getElementById("analysis-content-to-capture");if(!ar){Jt$2.error("Error: Could not find the analysis content element for download.");return}try{Jt$2.info("Capturing analysis content for PDF generation...");const cr=(await html2canvas(ar,{scale:2,useCORS:!0,windowWidth:ar.scrollWidth,windowHeight:ar.scrollHeight})).toDataURL("image/jpeg",1),Ar=`Study-Analysis-${er.mainTopic||"Data"}-${new Date().toLocaleDateString()}`;await downloadImageAsPDF({title:Ar,base64Image:cr}),Jt$2.success("Downloaded successfully!")}catch(lr){console.error("Download error:",lr),Jt$2.error("Failed to download PDF. Please ensure 'html2canvas' is installed.")}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,zIndex:-100,opacity:0,pointerEvents:"none",height:"auto",width:"100%"},children:jsxRuntimeExports.jsx(AnalysisContentRenderer,{result:er,selectedFiles:tr})}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-indigo-400/20 to-pink-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 relative z-10",children:[jsxRuntimeExports.jsx(Card,{className:"glass-card p-4 md:p-6 animate-fadeInUp hover-lift",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 mb-4",children:jsxRuntimeExports.jsxs(Button,{onClick:_e,variant:"ghost",className:"text-gray-600 hover:text-gray-800 p-2",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Upload New Files"]})}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Brain,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("h2",{className:"text-xl md:text-2xl font-bold gradient-text",children:er.mainTopic||"TNPSC Study Analysis"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[jsxRuntimeExports.jsxs(Badge,{className:"badge-elegant badge-success",children:["Source Files: ",tr.length]}),jsxRuntimeExports.jsx(Badge,{className:"badge-elegant badge-success",children:"Analysis Complete"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[jsxRuntimeExports.jsx(Button,{onClick:rr,disabled:sr,className:"btn-primary flex-1",children:sr?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating Questions..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Zap,{className:"h-4 w-4 mr-2"}),"Start Interactive Quiz"]})}),jsxRuntimeExports.jsxs(Button,{onClick:or,className:"btn-secondary",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-2"}),"Download Analysis"]})]})]}),tr.length>0&&jsxRuntimeExports.jsxs("div",{className:"w-full sm:w-48 flex-shrink-0",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Source Files"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[tr.slice(0,3).map((ar,lr)=>jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 truncate",children:ar.name},lr)),tr.length>3&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:["+",tr.length-3," more files"]})]})]})]})}),er.keyPoints&&er.keyPoints.length>0&&jsxRuntimeExports.jsxs(Card,{className:"glass-card p-4 md:p-6 animate-fadeInUp hover-lift",style:{animationDelay:"0.1s"},children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{className:"h-5 w-5 text-green-600"}),jsxRuntimeExports.jsx("span",{className:"gradient-text",children:"Key Points"})]}),jsxRuntimeExports.jsx("div",{className:"grid gap-3 stagger-animation",children:er.keyPoints.map((ar,lr)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full flex items-center justify-center text-sm font-medium flex-shrink-0 shadow-md",children:lr+1}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 leading-relaxed",children:ar})]},lr))})]}),er.summary&&jsxRuntimeExports.jsxs(Card,{className:"glass-card p-4 md:p-6 animate-fadeInUp hover-lift",style:{animationDelay:"0.2s"},children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold gradient-text mb-4",children:"Summary"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 leading-relaxed",children:er.summary})]}),er.studyPoints&&er.studyPoints.length>0&&jsxRuntimeExports.jsxs(Card,{className:"glass-card p-4 md:p-6 animate-fadeInUp hover-lift",style:{animationDelay:"0.3s"},children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold gradient-text mb-4",children:"Study Points"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:er.studyPoints.map((ar,lr)=>jsxRuntimeExports.jsxs("div",{className:"border-l-4 border-gradient-to-b from-blue-500 to-purple-600 pl-4 hover-lift",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-800",children:ar.title}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 flex-wrap",children:jsxRuntimeExports.jsxs(Badge,{className:ar.importance==="high"?"badge-elegant badge-error":ar.importance==="medium"?"badge-elegant badge-warning":"badge-elegant badge-success",children:[ar.importance," priority"]})})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 mb-2",children:ar.description}),ar.memoryTip&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-700 bg-gradient-to-r from-blue-50 to-cyan-50 p-3 rounded-lg mt-2 border-l-4 border-blue-400",children:[jsxRuntimeExports.jsx("strong",{children:" Memory Tip:"})," ",ar.memoryTip]})]},lr))})]}),er.tnpscCategories&&er.tnpscCategories.length>0&&jsxRuntimeExports.jsxs(Card,{className:"glass-card p-4 md:p-6 animate-fadeInUp hover-lift",style:{animationDelay:"0.4s"},children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold gradient-text mb-4",children:"TNPSC Categories"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:er.tnpscCategories.map((ar,lr)=>jsxRuntimeExports.jsx(Badge,{className:"badge-elegant bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-800 border-indigo-200 text-sm",children:ar},lr))})]})]})})]})},QuestionResults=({result:er,onReset:_e,selectedFiles:tr,onStartQuiz:rr})=>{var or,ar,lr,cr;const nr=async()=>{try{await downloadPDF({title:`TNPSC Practice Questions - ${er.difficulty.toUpperCase()}`,content:er.questions,type:"questions"}),Jt$2.success("Questions downloaded successfully!")}catch{Jt$2.error("Failed to download questions. Please try again.")}},sr=Ar=>({easy:"from-green-500 to-emerald-600",medium:"from-yellow-500 to-orange-600",hard:"from-red-500 to-pink-600","very-hard":"from-purple-500 to-indigo-600"})[Ar]||"from-gray-500 to-gray-600",ir=Ar=>{switch(Ar){case"mcq":return"";case"assertion_reason":return"";default:return""}};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsx(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-blue-600 rounded-full",children:jsxRuntimeExports.jsx(Target,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"TNPSC Practice Questions"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600",children:["Generated ",((or=er.questions)==null?void 0:or.length)||0," questions for practice"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsxs(Button,{onClick:_e,variant:"outline",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4"}),"Back to Upload"]}),jsxRuntimeExports.jsxs(Button,{onClick:nr,variant:"outline",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"}),"Download"]}),jsxRuntimeExports.jsxs(Button,{onClick:rr,className:"bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Play,{className:"h-4 w-4"}),"Start Interactive Quiz"]})]})]})}),jsxRuntimeExports.jsx(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-lg border-0",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:((ar=er.questions)==null?void 0:ar.length)||0}),jsxRuntimeExports.jsx("div",{className:"text-blue-700 font-medium",children:"Total Questions"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:er.difficulty.replace("-"," ").toUpperCase()}),jsxRuntimeExports.jsx("div",{className:"text-purple-700 font-medium",children:"Difficulty Level"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:((lr=er.questions)==null?void 0:lr.filter(Ar=>Ar.type==="mcq").length)||0}),jsxRuntimeExports.jsx("div",{className:"text-green-700 font-medium",children:"MCQ Questions"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-6 w-6 text-blue-600"}),"Generated Questions"]}),(cr=er.questions)==null?void 0:cr.map((Ar,ur)=>jsxRuntimeExports.jsx(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-lg border-0",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:jsxRuntimeExports.jsx("span",{className:"text-lg",children:ir(Ar.type)})}),jsxRuntimeExports.jsxs("span",{className:"text-lg font-semibold text-gray-800",children:["Question ",ur+1]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-wrap",children:[jsxRuntimeExports.jsx(Badge,{className:`bg-gradient-to-r ${sr(Ar.difficulty)} text-white`,children:Ar.difficulty.toUpperCase()}),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:Ar.tnpscGroup}),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:Ar.type.toUpperCase()})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-gray-50 p-4 rounded-xl",children:jsxRuntimeExports.jsx("p",{className:"text-gray-800 text-lg leading-relaxed",children:Ar.question})}),Ar.options&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-700",children:"Options:"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Ar.options.map((dr,mr)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-gray-200 rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"font-bold text-blue-600 bg-blue-100 px-2 py-1 rounded",children:String.fromCharCode(65+mr)}),jsxRuntimeExports.jsx("span",{className:"text-gray-800",children:dr})]},mr))})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 p-4 bg-green-50 border border-green-200 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mb-2",children:jsxRuntimeExports.jsx("span",{className:"font-semibold text-green-700",children:"Correct Answer:"})}),jsxRuntimeExports.jsx("span",{className:"text-green-800 font-medium",children:Ar.answer})]}),Ar.explanation&&jsxRuntimeExports.jsxs("div",{className:"flex-1 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mb-2",children:jsxRuntimeExports.jsx("span",{className:"font-semibold text-blue-700",children:"Explanation:"})}),jsxRuntimeExports.jsx("span",{className:"text-blue-800",children:Ar.explanation})]})]})]})},ur))]})]})})})};function usePrevious(er){const _e=reactExports.useRef({value:er,previous:er});return reactExports.useMemo(()=>(_e.current.value!==er&&(_e.current.previous=_e.current.value,_e.current.value=er),_e.current.previous),[er])}var RADIO_NAME="Radio",[createRadioContext,createRadioScope]=createContextScope$3(RADIO_NAME),[RadioProvider,useRadioContext]=createRadioContext(RADIO_NAME),Radio=reactExports.forwardRef((er,_e)=>{const{__scopeRadio:tr,name:rr,checked:nr=!1,required:sr,disabled:ir,value:or="on",onCheck:ar,form:lr,...cr}=er,[Ar,ur]=reactExports.useState(null),dr=useComposedRefs(_e,yr=>ur(yr)),mr=reactExports.useRef(!1),pr=Ar?lr||!!Ar.closest("form"):!0;return jsxRuntimeExports.jsxs(RadioProvider,{scope:tr,checked:nr,disabled:ir,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"radio","aria-checked":nr,"data-state":getState(nr),"data-disabled":ir?"":void 0,disabled:ir,value:or,...cr,ref:dr,onClick:composeEventHandlers$1(er.onClick,yr=>{nr||ar==null||ar(),pr&&(mr.current=yr.isPropagationStopped(),mr.current||yr.stopPropagation())})}),pr&&jsxRuntimeExports.jsx(BubbleInput,{control:Ar,bubbles:!mr.current,name:rr,value:or,checked:nr,required:sr,disabled:ir,form:lr,style:{transform:"translateX(-100%)"}})]})});Radio.displayName=RADIO_NAME;var INDICATOR_NAME$1="RadioIndicator",RadioIndicator=reactExports.forwardRef((er,_e)=>{const{__scopeRadio:tr,forceMount:rr,...nr}=er,sr=useRadioContext(INDICATOR_NAME$1,tr);return jsxRuntimeExports.jsx(Presence,{present:rr||sr.checked,children:jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState(sr.checked),"data-disabled":sr.disabled?"":void 0,...nr,ref:_e})})});RadioIndicator.displayName=INDICATOR_NAME$1;var BubbleInput=er=>{const{control:_e,checked:tr,bubbles:rr=!0,...nr}=er,sr=reactExports.useRef(null),ir=usePrevious(tr),or=useSize(_e);return reactExports.useEffect(()=>{const ar=sr.current,lr=window.HTMLInputElement.prototype,Ar=Object.getOwnPropertyDescriptor(lr,"checked").set;if(ir!==tr&&Ar){const ur=new Event("click",{bubbles:rr});Ar.call(ar,tr),ar.dispatchEvent(ur)}},[ir,tr,rr]),jsxRuntimeExports.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:tr,...nr,tabIndex:-1,ref:sr,style:{...er.style,...or,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function getState(er){return er?"checked":"unchecked"}var ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],RADIO_GROUP_NAME="RadioGroup",[createRadioGroupContext,createRadioGroupScope]=createContextScope$3(RADIO_GROUP_NAME,[createRovingFocusGroupScope,createRadioScope]),useRovingFocusGroupScope=createRovingFocusGroupScope(),useRadioScope=createRadioScope(),[RadioGroupProvider,useRadioGroupContext]=createRadioGroupContext(RADIO_GROUP_NAME),RadioGroup$1=reactExports.forwardRef((er,_e)=>{const{__scopeRadioGroup:tr,name:rr,defaultValue:nr,value:sr,required:ir=!1,disabled:or=!1,orientation:ar,dir:lr,loop:cr=!0,onValueChange:Ar,...ur}=er,dr=useRovingFocusGroupScope(tr),mr=useDirection(lr),[pr,yr]=useControllableState({prop:sr,defaultProp:nr,onChange:Ar});return jsxRuntimeExports.jsx(RadioGroupProvider,{scope:tr,name:rr,required:ir,disabled:or,value:pr,onValueChange:yr,children:jsxRuntimeExports.jsx(Root$2,{asChild:!0,...dr,orientation:ar,dir:mr,loop:cr,children:jsxRuntimeExports.jsx(Primitive.div,{role:"radiogroup","aria-required":ir,"aria-orientation":ar,"data-disabled":or?"":void 0,dir:mr,...ur,ref:_e})})})});RadioGroup$1.displayName=RADIO_GROUP_NAME;var ITEM_NAME$1="RadioGroupItem",RadioGroupItem$1=reactExports.forwardRef((er,_e)=>{const{__scopeRadioGroup:tr,disabled:rr,...nr}=er,sr=useRadioGroupContext(ITEM_NAME$1,tr),ir=sr.disabled||rr,or=useRovingFocusGroupScope(tr),ar=useRadioScope(tr),lr=reactExports.useRef(null),cr=useComposedRefs(_e,lr),Ar=sr.value===nr.value,ur=reactExports.useRef(!1);return reactExports.useEffect(()=>{const dr=pr=>{ARROW_KEYS.includes(pr.key)&&(ur.current=!0)},mr=()=>ur.current=!1;return document.addEventListener("keydown",dr),document.addEventListener("keyup",mr),()=>{document.removeEventListener("keydown",dr),document.removeEventListener("keyup",mr)}},[]),jsxRuntimeExports.jsx(Item$1,{asChild:!0,...or,focusable:!ir,active:Ar,children:jsxRuntimeExports.jsx(Radio,{disabled:ir,required:sr.required,checked:Ar,...ar,...nr,name:sr.name,ref:cr,onCheck:()=>sr.onValueChange(nr.value),onKeyDown:composeEventHandlers$1(dr=>{dr.key==="Enter"&&dr.preventDefault()}),onFocus:composeEventHandlers$1(nr.onFocus,()=>{var dr;ur.current&&((dr=lr.current)==null||dr.click())})})})});RadioGroupItem$1.displayName=ITEM_NAME$1;var INDICATOR_NAME2="RadioGroupIndicator",RadioGroupIndicator=reactExports.forwardRef((er,_e)=>{const{__scopeRadioGroup:tr,...rr}=er,nr=useRadioScope(tr);return jsxRuntimeExports.jsx(RadioIndicator,{...nr,...rr,ref:_e})});RadioGroupIndicator.displayName=INDICATOR_NAME2;var Root2$2=RadioGroup$1,Item2=RadioGroupItem$1,Indicator$1=RadioGroupIndicator;const RadioGroup=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Root2$2,{className:cn$1("grid gap-2",er),..._e,ref:tr}));RadioGroup.displayName=Root2$2.displayName;const RadioGroupItem=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Item2,{ref:tr,className:cn$1("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",er),..._e,children:jsxRuntimeExports.jsx(Indicator$1,{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx(Circle,{className:"h-2.5 w-2.5 fill-current text-current"})})}));RadioGroupItem.displayName=Item2.displayName;function createContextScope(er,_e=[]){let tr=[];function rr(sr,ir){const or=reactExports.createContext(ir),ar=tr.length;tr=[...tr,ir];function lr(Ar){const{scope:ur,children:dr,...mr}=Ar,pr=(ur==null?void 0:ur[er][ar])||or,yr=reactExports.useMemo(()=>mr,Object.values(mr));return jsxRuntimeExports.jsx(pr.Provider,{value:yr,children:dr})}function cr(Ar,ur){const dr=(ur==null?void 0:ur[er][ar])||or,mr=reactExports.useContext(dr);if(mr)return mr;if(ir!==void 0)return ir;throw new Error(`\`${Ar}\` must be used within \`${sr}\``)}return lr.displayName=sr+"Provider",[lr,cr]}const nr=()=>{const sr=tr.map(ir=>reactExports.createContext(ir));return function(or){const ar=(or==null?void 0:or[er])||sr;return reactExports.useMemo(()=>({[`__scope${er}`]:{...or,[er]:ar}}),[or,ar])}};return nr.scopeName=er,[rr,composeContextScopes(nr,..._e)]}function composeContextScopes(...er){const _e=er[0];if(er.length===1)return _e;const tr=()=>{const rr=er.map(nr=>({useScope:nr(),scopeName:nr.scopeName}));return function(sr){const ir=rr.reduce((or,{useScope:ar,scopeName:lr})=>{const Ar=ar(sr)[`__scope${lr}`];return{...or,...Ar}},{});return reactExports.useMemo(()=>({[`__scope${_e.scopeName}`]:ir}),[ir])}};return tr.scopeName=_e.scopeName,tr}var PROGRESS_NAME="Progress",DEFAULT_MAX=100,[createProgressContext,createProgressScope]=createContextScope(PROGRESS_NAME),[ProgressProvider,useProgressContext]=createProgressContext(PROGRESS_NAME),Progress$1=reactExports.forwardRef((er,_e)=>{const{__scopeProgress:tr,value:rr=null,max:nr,getValueLabel:sr=defaultGetValueLabel,...ir}=er;(nr||nr===0)&&!isValidMaxNumber(nr)&&console.error(getInvalidMaxError(`${nr}`,"Progress"));const or=isValidMaxNumber(nr)?nr:DEFAULT_MAX;rr!==null&&!isValidValueNumber(rr,or)&&console.error(getInvalidValueError(`${rr}`,"Progress"));const ar=isValidValueNumber(rr,or)?rr:null,lr=isNumber(ar)?sr(ar,or):void 0;return jsxRuntimeExports.jsx(ProgressProvider,{scope:tr,value:ar,max:or,children:jsxRuntimeExports.jsx(Primitive.div,{"aria-valuemax":or,"aria-valuemin":0,"aria-valuenow":isNumber(ar)?ar:void 0,"aria-valuetext":lr,role:"progressbar","data-state":getProgressState(ar,or),"data-value":ar??void 0,"data-max":or,...ir,ref:_e})})});Progress$1.displayName=PROGRESS_NAME;var INDICATOR_NAME="ProgressIndicator",ProgressIndicator=reactExports.forwardRef((er,_e)=>{const{__scopeProgress:tr,...rr}=er,nr=useProgressContext(INDICATOR_NAME,tr);return jsxRuntimeExports.jsx(Primitive.div,{"data-state":getProgressState(nr.value,nr.max),"data-value":nr.value??void 0,"data-max":nr.max,...rr,ref:_e})});ProgressIndicator.displayName=INDICATOR_NAME;function defaultGetValueLabel(er,_e){return`${Math.round(er/_e*100)}%`}function getProgressState(er,_e){return er==null?"indeterminate":er===_e?"complete":"loading"}function isNumber(er){return typeof er=="number"}function isValidMaxNumber(er){return isNumber(er)&&!isNaN(er)&&er>0}function isValidValueNumber(er,_e){return isNumber(er)&&!isNaN(er)&&er<=_e&&er>=0}function getInvalidMaxError(er,_e){return`Invalid prop \`max\` of value \`${er}\` supplied to \`${_e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${DEFAULT_MAX}\`.`}function getInvalidValueError(er,_e){return`Invalid prop \`value\` of value \`${er}\` supplied to \`${_e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${DEFAULT_MAX} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Root$1=Progress$1,Indicator=ProgressIndicator;const Progress=reactExports.forwardRef(({className:er,value:_e,...tr},rr)=>jsxRuntimeExports.jsx(Root$1,{ref:rr,className:cn$1("relative h-3 w-full overflow-hidden rounded-full bg-gray-200",er),style:{background:"linear-gradient(90deg, #f3f4f6 0%, #e5e7eb 100%)"},...tr,children:jsxRuntimeExports.jsx(Indicator,{className:"h-full w-full flex-1 rounded-full transition-all duration-700 ease-out",style:{transform:`translateX(-${100-(_e||0)}%)`,background:"linear-gradient(90deg, #3b82f6 0%, #8b5cf6 50%, #06b6d4 100%)",boxShadow:"0 0 10px rgba(59, 130, 246, 0.4)"}})}));Progress.displayName=Root$1.displayName;const ModernQuizMode=({result:er,onReset:_e,onBackToAnalysis:tr,difficulty:rr,outputLanguage:nr})=>{var Qr;const[sr]=useAuthState(auth),[ir,or]=reactExports.useState(0),[ar,lr]=reactExports.useState([]),[cr,Ar]=reactExports.useState(""),[ur,dr]=reactExports.useState(!1),[mr,pr]=reactExports.useState(null),[yr]=reactExports.useState(new Date),hr=er.questions||[],gr=hr[ir],Cr=hr.length>0?(ir+1)/hr.length*100:0,Tr=Ur=>({easy:"from-green-500 to-emerald-600",medium:"from-yellow-500 to-orange-600",hard:"from-red-500 to-pink-600","very-hard":"from-purple-500 to-indigo-600"})[Ur]||"from-gray-500 to-gray-600",Sr=Ur=>{switch(Ur){case"mcq":return"";case"assertion_reason":return"";default:return""}},Nr=Ur=>{Ar(Ur)},_r=()=>{if(!cr.trim()){Jt$2.error("Please select an answer before proceeding");return}const Ur={questionIndex:ir,selectedOption:cr},Vr=[...ar.filter(Wr=>Wr.questionIndex!==ir),Ur];if(lr(Vr),ir<hr.length-1){or(ir+1);const Wr=Vr.find(Hr=>Hr.questionIndex===ir+1);Ar((Wr==null?void 0:Wr.selectedOption)||"")}else br(Vr)},vr=()=>{if(ir>0){or(ir-1);const Ur=ar.find(Vr=>Vr.questionIndex===ir-1);Ar((Ur==null?void 0:Ur.selectedOption)||"")}},br=Ur=>{const Vr=Ur.map(Xr=>{var Or,zr;const pn=hr[Xr.questionIndex];let jr=!1;const Br=Xr.selectedOption.trim(),Lr=((Or=pn.answer)==null?void 0:Or.trim())||"";if(Br.length===1&&/^[A-D]$/i.test(Br))jr=Br.toLowerCase()===Lr.toLowerCase();else{const Gr=(zr=pn.options)==null?void 0:zr.findIndex(Yr=>Yr.trim().toLowerCase()===Br.toLowerCase());Gr!==void 0&&Gr!==-1?jr=String.fromCharCode(65+Gr).toLowerCase()===Lr.toLowerCase():jr=Br.toLowerCase()===Lr.toLowerCase()}return{question:pn,userAnswer:Xr.selectedOption,correctAnswer:pn.answer||"",isCorrect:jr,questionIndex:Xr.questionIndex}}),Wr=Vr.filter(Xr=>Xr.isCorrect).length,Hr=Math.round(Wr/hr.length*100),$r={score:Wr,totalQuestions:hr.length,percentage:Hr,answers:Vr};pr($r),sr&&saveStudyHistory(sr.uid,"quiz",$r,{fileName:`Quiz - ${rr.toUpperCase()} - ${new Date().toLocaleDateString()}`,difficulty:rr,language:nr,score:Wr,totalQuestions:hr.length,percentage:Hr,quizAnswers:Vr,quizData:$r}).then(()=>{console.log("Quiz results saved to study history successfully"),Jt$2.success("Quiz results saved to your study history!")}).catch(Xr=>{console.error("Failed to save quiz results:",Xr),Jt$2.error("Failed to save quiz results to history")}),dr(!0),Jt$2.success(" Quiz completed successfully!")},Pr=Ur=>Ur>=90?"Outstanding! You're mastering TNPSC concepts! ":Ur>=80?"Excellent work! You're well prepared! ":Ur>=70?"Great job! Keep up the good work! ":Ur>=60?"Good effort! Review and improve! ":Ur>=40?"Fair performance. More practice needed! ":"Keep studying! You'll improve with practice! ",Er=Ur=>Ur>=80?"text-green-600":Ur>=60?"text-blue-600":Ur>=40?"text-orange-600":"text-red-600",Rr=async()=>{try{if(!mr){Jt$2.error("No quiz results available to download");return}await downloadPDF({title:`TNPSC Quiz Results - ${rr.toUpperCase()}`,content:[mr],type:"quiz-results"}),Jt$2.success("Quiz results downloaded successfully!")}catch(Ur){console.error("Download error:",Ur),Jt$2.error("Failed to download results. Please try again.")}},Ir=()=>{const Vr=new Date().getTime()-yr.getTime(),Wr=Math.floor(Vr/6e4),Hr=Math.floor(Vr%6e4/1e3);return`${Wr}m ${Hr}s`};return hr.length===0?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs(Card,{className:"glass-card p-8 max-w-md mx-auto text-center",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"h-12 w-12 text-orange-500 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"No Questions Available"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Unable to generate quiz questions from the uploaded content. Please try uploading different files."}),jsxRuntimeExports.jsxs(Button,{onClick:_e,className:"btn-primary",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Upload New Files"]})]})}):ur&&mr?jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-yellow-400/20 to-orange-400/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-green-400/20 to-blue-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),jsxRuntimeExports.jsx("div",{className:"p-4 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-4xl space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-8 text-center animate-fadeInScale hover-lift",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"p-4 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 shadow-elegant pulse-glow",children:jsxRuntimeExports.jsx(Trophy,{className:"h-10 w-10 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold gradient-text",children:"Quiz Complete!"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mt-2",children:"TNPSC Practice Results"})]})]}),jsxRuntimeExports.jsxs("div",{className:"glass-card p-8 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:`text-7xl font-bold mb-4 ${Er(mr.percentage)}`,children:[mr.percentage,"%"]}),jsxRuntimeExports.jsxs("div",{className:"text-xl text-gray-700 mb-3",children:[mr.score," out of ",mr.totalQuestions," questions correct"]}),jsxRuntimeExports.jsx("div",{className:"text-lg font-medium text-gray-600 glass-card p-4 mb-4",children:Pr(mr.percentage)}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-6 text-sm text-gray-600 stagger-animation",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Clock,{className:"h-4 w-4"}),jsxRuntimeExports.jsxs("span",{children:["Time: ",Ir()]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"h-4 w-4"}),jsxRuntimeExports.jsxs("span",{children:["Difficulty: ",rr.toUpperCase()]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[jsxRuntimeExports.jsxs(Button,{onClick:Rr,className:"btn-secondary",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-2"}),"Download Results"]}),jsxRuntimeExports.jsxs(Button,{onClick:tr,className:"btn-secondary",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Analysis"]}),jsxRuntimeExports.jsxs(Button,{onClick:_e,className:"btn-primary",children:[jsxRuntimeExports.jsx(Sparkles,{className:"h-4 w-4 mr-2"}),"New Quiz"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold gradient-text flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"h-6 w-6 text-blue-600"}),"Answer Review"]}),mr.answers.map((Ur,Vr)=>jsxRuntimeExports.jsx(Card,{className:`glass-card p-6 hover-lift animate-fadeInUp ${Ur.isCorrect?"border-l-4 border-l-green-500":"border-l-4 border-l-red-500"}`,style:{animationDelay:`${Vr*.1}s`},children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-full ${Ur.isCorrect?"bg-green-100":"bg-red-100"}`,children:Ur.isCorrect?jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-5 w-5 text-green-600"}):jsxRuntimeExports.jsx(TriangleAlert,{className:"h-5 w-5 text-red-600"})}),jsxRuntimeExports.jsxs("span",{className:"text-lg font-semibold text-gray-800",children:["Question ",Vr+1," ",Sr(Ur.question.type)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-wrap",children:[jsxRuntimeExports.jsx(Badge,{className:`bg-gradient-to-r ${Tr(Ur.question.difficulty)} text-white`,children:Ur.question.difficulty.toUpperCase()}),jsxRuntimeExports.jsx(Badge,{className:"badge-elegant bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 border-blue-200",children:Ur.question.tnpscGroup}),jsxRuntimeExports.jsx(Badge,{className:"badge-elegant bg-gradient-to-r from-purple-100 to-pink-100 text-purple-800 border-purple-200",children:Ur.question.type.toUpperCase()})]})]}),jsxRuntimeExports.jsx("div",{className:"glass-card p-4",children:jsxRuntimeExports.jsx("p",{className:"text-gray-800 text-lg leading-relaxed",children:Ur.question.question})}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("div",{className:`p-4 rounded-xl ${Ur.isCorrect?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-700",children:"Your Answer:"}),jsxRuntimeExports.jsx("span",{className:`font-medium ${Ur.isCorrect?"text-green-700":"text-red-700"}`,children:Ur.userAnswer})]})}),!Ur.isCorrect&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-xl",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-700",children:"Correct Answer:"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-green-700",children:Ur.correctAnswer})]})}),Ur.question.explanation&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(Brain,{className:"h-5 w-5 text-blue-600 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-blue-800",children:"Explanation:"}),jsxRuntimeExports.jsx("p",{className:"text-blue-700 mt-1",children:Ur.question.explanation})]})]})})]})]})},Vr))]})]})})]}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-green-400/20 to-blue-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),jsxRuntimeExports.jsx("div",{className:"p-4 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-4xl space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 animate-fadeInScale",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 shadow-elegant",children:jsxRuntimeExports.jsx(Brain,{className:"h-8 w-8 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"TNPSC Quiz Mode"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Test your knowledge with practice questions"})]})]}),jsxRuntimeExports.jsxs(Button,{onClick:tr,className:"btn-secondary",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Analysis"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Question ",ir+1," of ",hr.length]}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[Math.round(Cr),"% Complete"]})]}),jsxRuntimeExports.jsx(Progress,{value:Cr,className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500 ease-out rounded-full",style:{width:`${Cr}%`}})})]})]}),jsxRuntimeExports.jsx(Card,{className:"glass-card p-8 animate-fadeInUp hover-lift",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 rounded-full bg-gradient-to-r from-indigo-100 to-purple-100",children:jsxRuntimeExports.jsx("span",{className:"text-2xl",children:Sr(gr.type)})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Question ",ir+1]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Choose the correct answer"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-wrap",children:[jsxRuntimeExports.jsx(Badge,{className:`bg-gradient-to-r ${Tr(gr.difficulty)} text-white`,children:gr.difficulty.toUpperCase()}),jsxRuntimeExports.jsx(Badge,{className:"badge-elegant bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 border-blue-200",children:gr.tnpscGroup}),jsxRuntimeExports.jsx(Badge,{className:"badge-elegant bg-gradient-to-r from-purple-100 to-pink-100 text-purple-800 border-purple-200",children:gr.type.toUpperCase()})]})]}),jsxRuntimeExports.jsx("div",{className:"glass-card p-6",children:jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-800 leading-relaxed",children:gr.question})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Select your answer:"}),jsxRuntimeExports.jsx(RadioGroup,{value:cr,onValueChange:Nr,children:jsxRuntimeExports.jsx("div",{className:"space-y-3",children:(Qr=gr.options)==null?void 0:Qr.map((Ur,Vr)=>{const Wr=String.fromCharCode(65+Vr);return jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 p-4 rounded-xl border border-gray-200 hover:border-blue-300 hover:bg-blue-50/50 transition-all duration-200 cursor-pointer",children:[jsxRuntimeExports.jsx(RadioGroupItem,{value:Wr,id:`option-${Vr}`}),jsxRuntimeExports.jsxs(Label$1,{htmlFor:`option-${Vr}`,className:"flex-1 cursor-pointer text-gray-700 leading-relaxed",children:[jsxRuntimeExports.jsxs("span",{className:"font-semibold text-blue-600 mr-2",children:[Wr,"."]}),Ur]})]},Vr)})})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between pt-6",children:[jsxRuntimeExports.jsxs(Button,{onClick:vr,disabled:ir===0,className:"btn-secondary",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Previous"]}),jsxRuntimeExports.jsx(Button,{onClick:_r,disabled:!cr.trim(),className:"btn-primary",children:ir===hr.length-1?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Trophy,{className:"h-4 w-4 mr-2"}),"Finish Quiz"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Next",jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 ml-2 rotate-180"})]})})]})]})}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Question Navigation"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-10 gap-2",children:hr.map((Ur,Vr)=>{const Wr=ar.some($r=>$r.questionIndex===Vr),Hr=Vr===ir;return jsxRuntimeExports.jsx("button",{onClick:()=>{or(Vr);const $r=ar.find(Xr=>Xr.questionIndex===Vr);Ar(($r==null?void 0:$r.selectedOption)||"")},className:`
                      w-10 h-10 rounded-lg font-semibold text-sm transition-all duration-200
                      ${Hr?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-elegant":Wr?"bg-green-100 text-green-700 border border-green-300 hover:bg-green-200":"bg-gray-100 text-gray-600 border border-gray-300 hover:bg-gray-200"}
                    `,children:Vr+1},Vr)})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6 mt-4 text-sm text-gray-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded"}),jsxRuntimeExports.jsx("span",{children:"Current"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-green-100 border border-green-300 rounded"}),jsxRuntimeExports.jsx("span",{children:"Answered"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-gray-100 border border-gray-300 rounded"}),jsxRuntimeExports.jsx("span",{children:"Not Answered"})]})]})]})]})})]})},QuickAnalysisMode=({files:er,difficulty:_e,outputLanguage:tr,onStartQuiz:rr,onReset:nr})=>{const[sr]=useAuthState(auth),[ir,or]=reactExports.useState([]),[ar,lr]=reactExports.useState(-1),[cr,Ar]=reactExports.useState(0),[ur,dr]=reactExports.useState(!1),[mr,pr]=reactExports.useState(!1),yr="AIzaSyDQcwO_13vP_dXB3OXBuTDvYfMcLXQIfkM";reactExports.useEffect(()=>{hr()},[er]);const hr=()=>{const Pr=er.map(Er=>({fileName:Er.name,fileType:Er.type==="application/pdf"?"pdf":"image",status:"pending",keyPoints:[],summary:"",tnpscCategories:[]}));or(Pr)},gr=async(Pr,Er)=>{var Rr;lr(Er),or(Ir=>Ir.map((Qr,Ur)=>Ur===Er?{...Qr,status:"analyzing"}:Qr));try{let Ir;if(Pr.type==="application/pdf"){const Qr=await extractTextFromPdfPage(Pr,1);Ir=await Cr(Qr,Pr.name)}else Ir=await analyzeImage(Pr,tr);if(or(Qr=>Qr.map((Ur,Vr)=>{var Wr;return Vr===Er?{...Ur,status:"completed",keyPoints:((Wr=Ir.studyPoints)==null?void 0:Wr.map(Hr=>`${Hr.title}: ${Hr.description}`))||[],summary:Ir.summary||"",tnpscCategories:Ir.tnpscCategories||[]}:Ur})),sr)try{const Qr={keyPoints:((Rr=Ir.studyPoints)==null?void 0:Rr.map(Ur=>`${Ur.title}: ${Ur.description}`))||[],summary:Ir.summary||"",tnpscRelevance:Ir.tnpscRelevance||"",studyPoints:Ir.studyPoints||[],tnpscCategories:Ir.tnpscCategories||[],mainTopic:Pr.name};await saveStudyHistory(sr.uid,"analysis",[Qr],{fileName:Pr.name,difficulty:_e,language:tr,files:[Pr]})}catch(Qr){console.error("Failed to save file analysis to study history:",Qr)}Jt$2.success(` ${Pr.name} analyzed successfully!`)}catch(Ir){console.error(`Analysis failed for ${Pr.name}:`,Ir),or(Qr=>Qr.map((Ur,Vr)=>Vr===Er?{...Ur,status:"error"}:Ur)),Jt$2.error(` Failed to analyze ${Pr.name}`)}lr(-1)},Cr=async(Pr,Er)=>{var Hr,$r,Xr,pn,jr;const Rr=tr==="tamil"?"Please provide all responses in Tamil language. Use Tamil script for all content.":"Please provide all responses in English language.",Ir=`
Analyze this text content for TNPSC preparation:

Content: ${Pr.substring(0,3e3)}

${Rr}

Provide analysis in this JSON format:
{
  "mainTopic": "Main topic of the content",
  "studyPoints": [
    {
      "title": "Key point title",
      "description": "Detailed description",
      "importance": "high/medium/low",
      "tnpscRelevance": "TNPSC relevance explanation"
    }
  ],
  "summary": "Overall summary of the content",
  "tnpscCategories": ["Category1", "Category2"]
}

Focus on TNPSC Group 1, 2, 4 exam relevance.
`,Wr=((jr=(pn=(Xr=($r=(Hr=(await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${yr}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:Ir}]}],generationConfig:{temperature:.7,maxOutputTokens:2048}})})).json()).candidates)==null?void 0:Hr[0])==null?void 0:$r.content)==null?void 0:Xr.parts)==null?void 0:pn[0])==null?void 0:jr.text).replace(/```json\n?|\n?```/g,"").trim();return JSON.parse(Wr)},Tr=async()=>{for(let Pr=0;Pr<er.length;Pr++)await gr(er[Pr],Pr),Ar((Pr+1)/er.length*100);pr(!0),Jt$2.success(" All files analyzed successfully!")},Sr=async()=>{dr(!0);try{const Pr=ir.filter(Vr=>Vr.status==="completed");if(Pr.length===0)throw new Error("No completed analyses available");const Er=Pr.flatMap(Vr=>Vr.keyPoints),Rr=Pr.map(Vr=>`${Vr.fileName}: ${Vr.summary}`).join(`

`),Ir=Array.from(new Set(Pr.flatMap(Vr=>Vr.tnpscCategories))),Ur={questions:await Nr(Er.join(`
`),Rr),summary:Rr,keyPoints:Er,difficulty:_e};rr(Ur)}catch(Pr){console.error("Quiz generation failed:",Pr),Jt$2.error("Failed to generate quiz. Please try again.")}finally{dr(!1)}},Nr=async(Pr,Er)=>{var Hr,$r,Xr,pn,jr;const Rr=tr==="tamil"?"Please provide all questions and answers in Tamil language.":"Please provide all questions and answers in English language.",Ir=`
Based on this TNPSC study content, generate 15-20 questions:

Key Points: ${Pr.substring(0,2e3)}
Summary: ${Er.substring(0,1e3)}

Difficulty: ${_e}
${Rr}

Generate a mix of:
- Multiple choice questions (4 options each)
- True/False questions
- Short answer questions

Return as JSON array:
[
  {
    "question": "Question text",
    "options": ["A", "B", "C", "D"], // for MCQ only
    "answer": "Correct answer",
    "type": "mcq" | "true_false" | "short_answer",
    "difficulty": "${_e}",
    "tnpscGroup": "Group 1",
    "explanation": "Brief explanation"
  }
]
`,Wr=((jr=(pn=(Xr=($r=(Hr=(await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${yr}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:Ir}]}],generationConfig:{temperature:.7,maxOutputTokens:3e3}})})).json()).candidates)==null?void 0:Hr[0])==null?void 0:$r.content)==null?void 0:Xr.parts)==null?void 0:pn[0])==null?void 0:jr.text).replace(/```json\n?|\n?```/g,"").trim();return JSON.parse(Wr)},_r=async()=>{try{const Pr=ir.filter(Er=>Er.status==="completed");await downloadPDF({title:"TNPSC Study Analysis Report",content:Pr,type:"analysis"}),Jt$2.success("Analysis report downloaded successfully!")}catch{Jt$2.error("Failed to download report. Please try again.")}},vr=Pr=>{switch(Pr){case"completed":return jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-4 w-4 text-green-600"});case"analyzing":return jsxRuntimeExports.jsx(LoaderCircle,{className:"h-4 w-4 text-blue-600 animate-spin"});case"error":return jsxRuntimeExports.jsx(CircleAlert,{className:"h-4 w-4 text-red-600"});default:return jsxRuntimeExports.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"})}},br=Pr=>({easy:"from-green-500 to-emerald-600",medium:"from-yellow-500 to-orange-600",hard:"from-red-500 to-pink-600","very-hard":"from-purple-500 to-indigo-600"})[Pr]||"from-gray-500 to-gray-600";return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:nr,variant:"ghost",className:"text-gray-600 hover:text-gray-800",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Upload"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Brain,{className:"h-6 w-6 text-blue-600"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Smart Analysis"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:er.length}),jsxRuntimeExports.jsx("div",{className:"text-sm text-blue-700",children:"Files"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-green-600",children:ir.filter(Pr=>Pr.status==="completed").length}),jsxRuntimeExports.jsx("div",{className:"text-sm text-green-700",children:"Analyzed"})]}),jsxRuntimeExports.jsx("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:jsxRuntimeExports.jsx(Badge,{className:`bg-gradient-to-r ${br(_e)} text-white`,children:_e.toUpperCase()})}),jsxRuntimeExports.jsx("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:jsxRuntimeExports.jsx(Badge,{className:"bg-orange-100 text-orange-700",children:tr==="tamil"?"":"English"})})]})]}),cr>0&&cr<100&&jsxRuntimeExports.jsx(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Analysis Progress"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(cr),"%"]})]}),jsxRuntimeExports.jsx(Progress,{value:cr,className:"h-2"})]})}),jsxRuntimeExports.jsxs(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"h-5 w-5 text-blue-600"}),"File Analysis Status"]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:ir.map((Pr,Er)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[Pr.fileType==="pdf"?jsxRuntimeExports.jsx(FileText,{className:"h-5 w-5 text-red-600"}):jsxRuntimeExports.jsx(Image$1,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700 truncate",children:Pr.fileName})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[vr(Pr.status),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 capitalize",children:Pr.status})]})]},Er))})]}),jsxRuntimeExports.jsx(Card,{className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 shadow-xl border-0",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:mr?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{onClick:Sr,disabled:ur,className:`bg-gradient-to-r ${br(_e)} hover:shadow-lg px-8 py-6 text-lg font-semibold`,children:ur?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"h-5 w-5 mr-3 animate-spin"}),"Generating Quiz..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Play,{className:"h-5 w-5 mr-3"}),"Start Smart Quiz"]})}),jsxRuntimeExports.jsxs(Button,{onClick:_r,variant:"outline",className:"px-8 py-6 text-lg font-semibold border-2",children:[jsxRuntimeExports.jsx(Download,{className:"h-5 w-5 mr-3"}),"Download Report"]})]}):jsxRuntimeExports.jsx(Button,{onClick:Tr,disabled:ar!==-1,className:`bg-gradient-to-r ${br(_e)} hover:shadow-lg px-8 py-6 text-lg font-semibold`,children:ar!==-1?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"h-5 w-5 mr-3 animate-spin"}),"Analyzing Files..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sparkles,{className:"h-5 w-5 mr-3"}),"Start Analysis"]})})})}),mr&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Analysis Summary"}),ir.filter(Pr=>Pr.status==="completed").map((Pr,Er)=>jsxRuntimeExports.jsx(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-lg border-0",children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[Pr.fileType==="pdf"?jsxRuntimeExports.jsx(FileText,{className:"h-5 w-5 text-red-600"}):jsxRuntimeExports.jsx(Image$1,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-800",children:Pr.fileName})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm",children:Pr.summary}),Pr.tnpscCategories.length>0&&jsxRuntimeExports.jsx("div",{className:"flex gap-2 flex-wrap",children:Pr.tnpscCategories.map((Rr,Ir)=>jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs",children:Rr},Ir))})]})},Er))]})]})})})},PageRangeSelector=({totalPages:er,onConfirm:_e,onBack:tr,title:rr,description:nr,isProcessing:sr=!1})=>{const[ir,or]=reactExports.useState(1),[ar,lr]=reactExports.useState(Math.min(5,er)),cr=()=>{const pr=typeof ir=="string"?1:ir,yr=typeof ar=="string"?er:ar;if(pr<1||yr>er){Jt$2.error(`Page range must be between 1 and ${er}`);return}if(pr>yr){Jt$2.error("Start page cannot be greater than end page");return}if(yr-pr+1>20){Jt$2.error("Please select a maximum of 20 pages at a time for optimal performance");return}_e(pr,yr)},Ar=typeof ir=="string"?1:ir,ur=typeof ar=="string"?er:ar,dr=ur-Ar+1,mr=Ar>=1&&ur<=er&&Ar<=ur;return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-2xl space-y-6",children:[jsxRuntimeExports.jsx(Card,{className:"glass-card p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[jsxRuntimeExports.jsx(Button,{onClick:tr,variant:"ghost",className:"p-2 hover:bg-blue-50",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"h-5 w-5"})}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-md",children:jsxRuntimeExports.jsx(Target,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold gradient-text",children:rr}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:nr})]})]})}),jsxRuntimeExports.jsx(Card,{className:"glass-card p-8",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Select Page Range"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Choose which pages to include in your session"})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:er}),jsxRuntimeExports.jsx("div",{className:"text-sm text-blue-700",children:"Total Pages"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-purple-600",children:dr}),jsxRuntimeExports.jsx("div",{className:"text-sm text-purple-700",children:"Selected Pages"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Start Page"}),jsxRuntimeExports.jsx(Input,{type:"number",min:"1",max:er,value:ir,onChange:pr=>{const yr=pr.target.value;or(yr===""?"":Math.max(1,parseInt(yr)||1))},className:"input-elegant h-12 text-center text-lg font-semibold"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"End Page"}),jsxRuntimeExports.jsx(Input,{type:"number",min:"1",max:er,value:ar,onChange:pr=>{const yr=pr.target.value;lr(yr===""?"":Math.min(er,parseInt(yr)||1))},className:"input-elegant h-12 text-center text-lg font-semibold"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Quick Select:"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{or(1),lr(Math.min(5,er))},className:"btn-secondary",children:"First 5 Pages"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{or(1),lr(Math.min(10,er))},className:"btn-secondary",children:"First 10 Pages"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{or(Math.max(1,er-9)),lr(er)},className:"btn-secondary",children:"Last 10 Pages"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{or(1),lr(er)},className:"btn-secondary",children:"All Pages"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center gap-2 p-3 rounded-lg bg-gray-50",children:mr?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-5 w-5 text-green-600"}),jsxRuntimeExports.jsxs("span",{className:"text-green-700 font-medium",children:["Valid range: ",dr," page",dr!==1?"s":""," selected"]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"h-5 w-5 text-orange-600"}),jsxRuntimeExports.jsx("span",{className:"text-orange-700 font-medium",children:"Please check your page range"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:tr,variant:"outline",className:"flex-1 btn-secondary",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),jsxRuntimeExports.jsx(Button,{onClick:cr,disabled:!mr||sr,className:"flex-1 btn-primary",children:sr?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Starting Analysis..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Brain,{className:"h-4 w-4 mr-2"}),"Continue"]})})]})]})})]})})},Pagination=({className:er,..._e})=>jsxRuntimeExports.jsx("nav",{role:"navigation","aria-label":"pagination",className:cn$1("mx-auto flex w-full justify-center",er),..._e});Pagination.displayName="Pagination";const PaginationContent=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx("ul",{ref:tr,className:cn$1("flex flex-row items-center gap-1",er),..._e}));PaginationContent.displayName="PaginationContent";const PaginationItem=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx("li",{ref:tr,className:cn$1("",er),..._e}));PaginationItem.displayName="PaginationItem";const PaginationLink=({className:er,isActive:_e,size:tr="icon",...rr})=>jsxRuntimeExports.jsx("a",{"aria-current":_e?"page":void 0,className:cn$1(buttonVariants({variant:_e?"outline":"ghost",size:tr}),er),...rr});PaginationLink.displayName="PaginationLink";const PaginationPrevious=({className:er,..._e})=>jsxRuntimeExports.jsxs(PaginationLink,{"aria-label":"Go to previous page",size:"default",className:cn$1("gap-1 pl-2.5",er),..._e,children:[jsxRuntimeExports.jsx(ChevronLeft,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Previous"})]});PaginationPrevious.displayName="PaginationPrevious";const PaginationNext=({className:er,..._e})=>jsxRuntimeExports.jsxs(PaginationLink,{"aria-label":"Go to next page",size:"default",className:cn$1("gap-1 pr-2.5",er),..._e,children:[jsxRuntimeExports.jsx("span",{children:"Next"}),jsxRuntimeExports.jsx(ChevronRight,{className:"h-4 w-4"})]});PaginationNext.displayName="PaginationNext";const PaginationEllipsis=({className:er,..._e})=>jsxRuntimeExports.jsxs("span",{"aria-hidden":!0,className:cn$1("flex h-9 w-9 items-center justify-center",er),..._e,children:[jsxRuntimeExports.jsx(Ellipsis,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"More pages"})]});PaginationEllipsis.displayName="PaginationEllipsis";const ComprehensivePdfResults=({pageAnalyses:er,overallSummary:_e,totalKeyPoints:tr,onReset:rr,onGenerateQuestions:nr,isGeneratingQuestions:sr})=>{const[ir]=useAuthState(auth),[or,ar]=reactExports.useState(1),[lr,cr]=reactExports.useState({start:1,end:Math.min(10,er.length)});reactExports.useState(!1);const Ar=er.length,ur=er[or-1];React.useEffect(()=>{(async()=>{if(ir&&er.length>0)try{const yr={keyPoints:tr,summary:_e,tnpscRelevance:`Comprehensive analysis of ${er.length} pages with detailed study points.`,studyPoints:er.flatMap(hr=>hr.studyPoints||[]),tnpscCategories:["Comprehensive PDF Analysis"],mainTopic:`PDF Analysis - ${er.length} Pages`};await saveStudyHistory(ir.uid,"analysis",[yr],{fileName:`Comprehensive PDF Analysis - ${er.length} Pages`,difficulty:"medium",language:"english"}),console.log("Comprehensive analysis saved to study history")}catch(yr){console.error("Failed to save comprehensive analysis to study history:",yr)}})()},[ir,er,tr,_e]);const dr=pr=>{switch(pr){case"high":return"bg-red-100 text-red-700 border-red-200";case"medium":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"low":return"bg-green-100 text-green-700 border-green-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},mr=()=>{nr(lr.start,lr.end)};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-8",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full",children:jsxRuntimeExports.jsx(FileText,{className:"h-8 w-8 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Comprehensive PDF Analysis"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600",children:[Ar," pages analyzed  ",tr.length," key points identified"]})]})]}),jsxRuntimeExports.jsxs(Button,{onClick:rr,variant:"outline",className:"border-2",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Upload"]})]}),jsxRuntimeExports.jsxs(Card,{className:"p-6 mb-8 bg-gradient-to-r from-blue-50 to-purple-50 border-0 shadow-lg",children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-5 w-5 text-blue-600"}),"Overall Summary"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-700",children:_e})]}),jsxRuntimeExports.jsxs(Card,{className:"p-6 mb-8 bg-white/80 backdrop-blur-sm shadow-lg border-0",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"h-5 w-5 text-green-600"}),"Generate Practice Questions"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Page"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:Ar,value:lr.start,onChange:pr=>cr(yr=>({...yr,start:Math.max(1,Math.min(parseInt(pr.target.value)||1,Ar))})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Page"}),jsxRuntimeExports.jsx("input",{type:"number",min:lr.start,max:Ar,value:lr.end,onChange:pr=>cr(yr=>({...yr,end:Math.max(yr.start,Math.min(parseInt(pr.target.value)||yr.start,Ar))})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),jsxRuntimeExports.jsx(Button,{onClick:mr,disabled:sr,className:"bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white",children:sr?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Zap,{className:"h-4 w-4 mr-2"}),"Generate Quiz"]})})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Selected: ",lr.end-lr.start+1," pages (Page ",lr.start," to ",lr.end,")"]})]}),ur&&jsxRuntimeExports.jsxs(Card,{className:"p-8 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Page ",ur.pageNumber," Analysis"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>ar(Math.max(1,or-1)),disabled:or===1,variant:"outline",size:"sm",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"h-4 w-4"})}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600 px-3",children:[or," of ",Ar]}),jsxRuntimeExports.jsx(Button,{onClick:()=>ar(Math.min(Ar,or+1)),disabled:or===Ar,variant:"outline",size:"sm",children:jsxRuntimeExports.jsx(ChevronRight,{className:"h-4 w-4"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Page Summary"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 bg-gray-50 p-4 rounded-lg",children:ur.summary})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"TNPSC Relevance"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500",children:ur.tnpscRelevance})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Key Points (",ur.keyPoints.length,")"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:ur.keyPoints.map((pr,yr)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-medium flex-shrink-0 mt-0.5",children:yr+1}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 text-sm",children:pr})]},yr))})]}),ur.studyPoints.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Detailed Study Points (",ur.studyPoints.length,")"]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:ur.studyPoints.map((pr,yr)=>jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-800",children:pr.title}),jsxRuntimeExports.jsx(Badge,{className:`${dr(pr.importance)} border`,children:pr.importance})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm mb-2",children:pr.description}),pr.memoryTip&&jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 p-3 rounded-lg border-l-4 border-blue-400",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-blue-700 font-medium mb-1",children:" Memory Tip:"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-blue-600",children:pr.memoryTip})]})]},yr))})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-8 flex justify-center",children:jsxRuntimeExports.jsx(Pagination,{children:jsxRuntimeExports.jsxs(PaginationContent,{children:[jsxRuntimeExports.jsx(PaginationItem,{children:jsxRuntimeExports.jsx(PaginationPrevious,{onClick:()=>ar(Math.max(1,or-1)),className:or===1?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:Math.min(5,Ar)},(pr,yr)=>{let hr;return Ar<=5||or<=3?hr=yr+1:or>=Ar-2?hr=Ar-4+yr:hr=or-2+yr,jsxRuntimeExports.jsx(PaginationItem,{children:jsxRuntimeExports.jsx(PaginationLink,{onClick:()=>ar(hr),isActive:or===hr,className:"cursor-pointer",children:hr})},hr)}),Ar>5&&or<Ar-2&&jsxRuntimeExports.jsx(PaginationItem,{children:jsxRuntimeExports.jsx(PaginationEllipsis,{})}),jsxRuntimeExports.jsx(PaginationItem,{children:jsxRuntimeExports.jsx(PaginationNext,{onClick:()=>ar(Math.min(Ar,or+1)),className:or===Ar?"pointer-events-none opacity-50":"cursor-pointer"})})]})})})]})]})})})},PdfPageNavigator=({file:er,totalPages:_e,fullText:tr,outputLanguage:rr,onReset:nr,onStartQuiz:sr,initialPageAnalyses:ir,initialStudyHistoryId:or,currentPage:ar,onPageChange:lr,initialShowPageRangeSelector:cr=!1,isContinueAnalysis:Ar=!1})=>{const[ur]=useAuthState(auth),[dr,mr]=reactExports.useState(new Map),[pr,yr]=reactExports.useState(!1),[hr,gr]=reactExports.useState(0),[Cr,Tr]=reactExports.useState(or||null),[Sr,Nr]=reactExports.useState(1),[_r,vr]=reactExports.useState(Math.min(10,_e)),[br,Pr]=reactExports.useState("medium"),[Er,Rr]=reactExports.useState(cr&&!Ar),[Ir,Qr]=reactExports.useState(1),[Ur,Vr]=reactExports.useState(Math.min(10,_e));reactExports.useEffect(()=>{console.log("=== PdfPageNavigator useEffect ==="),console.log("initialPageAnalyses:",ir),console.log("isContinueAnalysis:",Ar),console.log("showPageRangeSelector:",Er),ir?(console.log("Setting pageAnalyses from initialPageAnalyses"),mr(new Map(ir))):console.log("No initialPageAnalyses provided")},[ir]);const Wr=()=>dr.get(ar),Hr=async()=>{if(dr.has(ar)){Jt$2.info(`Page ${ar} is already analyzed`);return}yr(!0),gr(0);try{const Or=extractPageRangeFromOcr(tr,ar,ar);if(!Or.trim()){Jt$2.error(`No content found on page ${ar}`);return}gr(30);const zr=await analyzeIndividualPage(Or,ar,rr);gr(80);const Gr=new Map(dr);if(Gr.set(ar,zr),mr(Gr),ur){const Yr={keyPoints:Array.from(Gr.values()).flatMap(En=>En.keyPoints),studyPoints:Array.from(Gr.values()).flatMap(En=>En.studyPoints),summary:`Analysis of ${Gr.size} pages from ${er.name}`,tnpscRelevance:`Comprehensive analysis covering pages: ${Array.from(Gr.keys()).sort().join(", ")}`,tnpscCategories:["PDF Analysis"],mainTopic:er.name},dn=Object.fromEntries(Gr);if(Cr)await updateStudyHistory(Cr,Yr,dn);else{const En=await saveStudyHistory(ur.uid,"analysis",[Yr],{fileName:er.name,difficulty:"medium",language:rr,pageAnalysesMap:dn});Tr(En)}}gr(100),Jt$2.success(`Page ${ar} analyzed successfully!`)}catch(Or){console.error(`Error analyzing page ${ar}:`,Or),Jt$2.error(`Failed to analyze page ${ar}. Please try again.`)}finally{yr(!1),gr(0)}},$r=async(Or,zr)=>{yr(!0),gr(0);try{const Gr=zr-Or+1;let Yr=0;for(let dn=Or;dn<=zr;dn++){if(dr.has(dn)){Yr++,gr(Yr/Gr*100);continue}const En=extractPageRangeFromOcr(tr,dn,dn);if(!En.trim()){console.warn(`No content found on page ${dn}, skipping`),Yr++,gr(Yr/Gr*100);continue}try{const Sn=await analyzeIndividualPage(En,dn,rr);mr(Bn=>{const kn=new Map(Bn);return kn.set(dn,Sn),kn}),Yr++,gr(Yr/Gr*100),Jt$2.success(`Page ${dn} analyzed successfully!`),await new Promise(Bn=>setTimeout(Bn,1e3))}catch(Sn){console.error(`Error analyzing page ${dn}:`,Sn),Jt$2.error(`Failed to analyze page ${dn}`),Yr++,gr(Yr/Gr*100)}}if(ur){const dn={keyPoints:Array.from(dr.values()).flatMap(Sn=>Sn.keyPoints),studyPoints:Array.from(dr.values()).flatMap(Sn=>Sn.studyPoints),summary:`Analysis of ${dr.size} pages from ${er.name}`,tnpscRelevance:`Comprehensive analysis covering pages: ${Array.from(dr.keys()).sort().join(", ")}`,tnpscCategories:["PDF Analysis"],mainTopic:er.name},En=Object.fromEntries(dr);if(Cr)await updateStudyHistory(Cr,dn,En);else{const Sn=await saveStudyHistory(ur.uid,"analysis",[dn],{fileName:er.name,difficulty:"medium",language:rr,pageAnalysesMap:En});Tr(Sn)}}Jt$2.success(`Successfully analyzed pages ${Or} to ${zr}!`)}catch(Gr){console.error("Error in range analysis:",Gr),Jt$2.error("Failed to complete range analysis")}finally{yr(!1),gr(0),Rr(!1)}},Xr=async()=>{try{const Or=Array.from(dr.values()).map(zr=>({fileName:`Page ${zr.pageNumber}`,keyPoints:zr.keyPoints,studyPoints:zr.studyPoints,summary:zr.summary,tnpscRelevance:zr.tnpscRelevance,tnpscCategories:[]}));if(Or.length===0){Jt$2.error("No analyses available to download");return}await downloadPDF({title:`PDF Analysis - ${er.name}`,content:Or,type:"analysis"}),Jt$2.success("Analysis downloaded successfully!")}catch(Or){console.error("Download error:",Or),Jt$2.error("Failed to download analysis")}},pn=()=>{if(Sr>_r){Jt$2.error("Start page cannot be greater than end page");return}if(Sr<1||_r>_e){Jt$2.error(`Page range must be between 1 and ${_e}`);return}sr({start:Sr,end:_r},br)},jr=Wr(),Br=Array.from(dr.keys()).sort((Or,zr)=>Or-zr),Lr=Br.length/_e*100;return Er?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-2xl space-y-6",children:[jsxRuntimeExports.jsx(Card,{className:"glass-card p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>Rr(!1),variant:"ghost",className:"p-2 hover:bg-blue-50",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"h-5 w-5"})}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-md",children:jsxRuntimeExports.jsx(Target,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold gradient-text",children:"Select Page Range"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Choose which pages to analyze"})]})]})}),jsxRuntimeExports.jsx(Card,{className:"glass-card p-8",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Analyze Page Range"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Select the pages you want to analyze for study points"})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:_e}),jsxRuntimeExports.jsx("div",{className:"text-sm text-blue-700",children:"Total Pages"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Ur-Ir+1}),jsxRuntimeExports.jsx("div",{className:"text-sm text-purple-700",children:"Selected Pages"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-green-600",children:Br.length}),jsxRuntimeExports.jsx("div",{className:"text-sm text-green-700",children:"Already Analyzed"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Start Page"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:_e,value:Ir,onChange:Or=>Qr(Math.max(1,parseInt(Or.target.value)||1)),className:"input-elegant h-12 text-center text-lg font-semibold"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"End Page"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:_e,value:Ur,onChange:Or=>Vr(Math.min(_e,parseInt(Or.target.value)||1)),className:"input-elegant h-12 text-center text-lg font-semibold"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:()=>Rr(!1),variant:"outline",className:"flex-1 btn-secondary",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),jsxRuntimeExports.jsx(Button,{onClick:()=>$r(Ir,Ur),disabled:pr||Ir>Ur,className:"flex-1 btn-primary",children:pr?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Analyzing..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Brain,{className:"h-4 w-4 mr-2"}),"Analyze Pages"]})})]})]})})]})}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:nr,variant:"ghost",className:"text-gray-600 hover:text-gray-800",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Upload"]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsxs(Button,{onClick:Xr,variant:"outline",size:"sm",disabled:dr.size===0,children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-2"}),"Download Analysis"]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx(FileText,{className:"h-6 w-6 text-blue-600"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"PDF Page Analysis"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:er.name})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-200",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:_e}),jsxRuntimeExports.jsx("div",{className:"text-sm text-blue-700",children:"Total Pages"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-green-600",children:Br.length}),jsxRuntimeExports.jsx("div",{className:"text-sm text-green-700",children:"Analyzed"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(Lr),"%"]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-purple-700",children:"Progress"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"TNPSC"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-orange-700",children:"Ready"})]})]}),Br.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm text-gray-700 mb-2",children:[jsxRuntimeExports.jsx("span",{children:"Analysis Progress"}),jsxRuntimeExports.jsxs("span",{children:[Br.length,"/",_e," pages"]})]}),jsxRuntimeExports.jsx(Progress,{value:Lr,className:"h-2"})]})]})]}),pr&&jsxRuntimeExports.jsx(Card,{className:"glass-card p-6",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Analyzing Pages..."})]}),jsxRuntimeExports.jsx(Progress,{value:hr,className:"h-3"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Please wait while we analyze the selected pages for TNPSC study points."})]})}),jsxRuntimeExports.jsx(Card,{className:"glass-card p-6",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Navigate Pages"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>lr(Math.max(1,ar-1)),variant:"outline",disabled:ar===1,size:"sm",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"h-4 w-4"})}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-gray-600 px-3",children:[ar," / ",_e]}),jsxRuntimeExports.jsx(Button,{onClick:()=>lr(Math.min(_e,ar+1)),variant:"outline",disabled:ar===_e,size:"sm",children:jsxRuntimeExports.jsx(ChevronRight,{className:"h-4 w-4"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Go to:"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:_e,value:ar,onChange:Or=>lr(parseInt(Or.target.value)||1),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm",placeholder:"Page"})]}),jsxRuntimeExports.jsx(Button,{onClick:Hr,disabled:pr||dr.has(ar),className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:pr?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Analyzing..."]}):dr.has(ar)?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-4 w-4 mr-2"}),"Analyzed"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Brain,{className:"h-4 w-4 mr-2"}),"Analyze Page ",ar]})})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-4",children:jsxRuntimeExports.jsxs(Button,{onClick:()=>Rr(!0),variant:"outline",className:"flex-1",disabled:pr,children:[jsxRuntimeExports.jsx(Target,{className:"h-4 w-4 mr-2"}),"Analyze Page Range"]})})]})}),jr&&jsxRuntimeExports.jsx(Card,{className:"glass-card p-6",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:["Page ",ar," Analysis"]}),jsxRuntimeExports.jsxs(Badge,{className:"bg-green-100 text-green-700",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-3 w-3 mr-1"}),"Analyzed"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-400",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-yellow-800 mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"h-4 w-4"}),"TNPSC Relevance"]}),jsxRuntimeExports.jsx("p",{className:"text-yellow-700",children:jr.tnpscRelevance})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Zap,{className:"h-4 w-4 text-blue-500"}),"Key Study Points (",jr.keyPoints.length,")"]}),jsxRuntimeExports.jsx("div",{className:"grid gap-3",children:jr.keyPoints.map((Or,zr)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full flex items-center justify-center text-sm font-medium flex-shrink-0",children:zr+1}),jsxRuntimeExports.jsx("p",{className:"text-gray-700",children:Or})]},zr))})]}),jr.studyPoints.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-gray-800 mb-3",children:["Detailed Study Points (",jr.studyPoints.length,")"]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:jr.studyPoints.map((Or,zr)=>jsxRuntimeExports.jsxs("div",{className:"border-l-4 border-gradient-to-b from-blue-500 to-purple-600 pl-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h5",{className:"font-semibold text-gray-800",children:Or.title}),jsxRuntimeExports.jsxs(Badge,{className:Or.importance==="high"?"bg-red-100 text-red-700":Or.importance==="medium"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700",children:[Or.importance," priority"]})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 mb-2",children:Or.description}),Or.memoryTip&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-700 bg-gradient-to-r from-blue-50 to-cyan-50 p-3 rounded-lg border-l-4 border-blue-400",children:[jsxRuntimeExports.jsx("strong",{children:" Memory Tip:"})," ",Or.memoryTip]})]},zr))})]}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Summary"}),jsxRuntimeExports.jsx("p",{className:"text-blue-700",children:jr.summary})]})]})}),Br.length>0&&jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Analyzed Pages (",Br.length,")"]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:Br.map(Or=>jsxRuntimeExports.jsx(Button,{onClick:()=>lr(Or),variant:ar===Or?"default":"outline",size:"sm",className:ar===Or?"bg-blue-600 text-white":"",children:Or},Or))})]}),Br.length>0&&jsxRuntimeExports.jsx(Card,{className:"glass-card p-6 bg-gradient-to-r from-green-50 to-blue-50",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Zap,{className:"h-5 w-5 text-green-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Generate Practice Quiz"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Page"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:_e,value:Sr,onChange:Or=>Nr(Math.max(1,Math.min(_e,parseInt(Or.target.value)||1))),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Page"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:_e,value:_r,onChange:Or=>vr(Math.max(1,Math.min(_e,parseInt(Or.target.value)||1))),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty"}),jsxRuntimeExports.jsxs("select",{value:br,onChange:Or=>Pr(Or.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[jsxRuntimeExports.jsx("option",{value:"easy",children:" Easy"}),jsxRuntimeExports.jsx("option",{value:"medium",children:" Medium"}),jsxRuntimeExports.jsx("option",{value:"hard",children:" Hard"}),jsxRuntimeExports.jsx("option",{value:"very-hard",children:" Very Hard"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/50 p-4 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xl font-bold text-blue-600",children:_r-Sr+1}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Pages"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xl font-bold text-green-600",children:br.toUpperCase()}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Difficulty"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xl font-bold text-purple-600",children:"TNPSC"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Focused"})]})]}),jsxRuntimeExports.jsxs(Button,{onClick:pn,className:"w-full bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 py-4",disabled:Sr>_r,children:[jsxRuntimeExports.jsx(Zap,{className:"h-4 w-4 mr-2"}),"Generate Quiz (Pages ",Sr,"-",_r,")"]})]})]})})]})})})},PdfResumeOptions=({fileName:er,totalPages:_e,analyzedPages:tr,lastAnalyzed:rr,onResumeAnalysis:nr,onStartNewAnalysis:sr,onBack:ir})=>{const or=tr.length/_e*100;return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-indigo-400/20 to-pink-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-purple-400/10 to-blue-400/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"4s"}})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"max-w-2xl w-full space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center animate-fadeInUp",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full shadow-elegant pulse-glow animate-bounceIn",children:jsxRuntimeExports.jsx(FileText,{className:"h-8 w-8 text-white"})}),jsxRuntimeExports.jsx("h1",{className:"text-4xl md:text-5xl font-bold gradient-text animate-slideInRight",children:"Resume PDF Analysis"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-xl leading-relaxed animate-fadeInUp",style:{animationDelay:"0.2s"},children:"We found previous analysis for this PDF file"})]}),jsxRuntimeExports.jsx(Card,{className:"glass-card p-8 md:p-10 hover-lift animate-fadeInScale",style:{animationDelay:"0.4s"},children:jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4 animate-fadeInUp",style:{animationDelay:"0.6s"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{className:"h-6 w-6 text-blue-600 animate-float"}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:er.length>40?er.substring(0,40)+"...":er})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-base text-gray-600",children:[jsxRuntimeExports.jsx(Clock,{className:"h-5 w-5 text-blue-500"}),jsxRuntimeExports.jsxs("span",{children:["Last analyzed: ",rr.toLocaleDateString()," at ",rr.toLocaleTimeString()]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-8 rounded-2xl border border-green-200/50 shadow-elegant animate-fadeInUp",style:{animationDelay:"0.8s"},children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center stagger-animation",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:_e}),jsxRuntimeExports.jsx("div",{className:"text-base font-medium text-blue-700",children:"Total Pages"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:tr.length}),jsxRuntimeExports.jsx("div",{className:"text-base font-medium text-green-700",children:"Analyzed Pages"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:[Math.round(or),"%"]}),jsxRuntimeExports.jsx("div",{className:"text-base font-medium text-purple-700",children:"Progress"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-base text-gray-700 mb-3 font-medium",children:[jsxRuntimeExports.jsx("span",{children:"Analysis Progress"}),jsxRuntimeExports.jsxs("span",{children:[tr.length,"/",_e," pages"]})]}),jsxRuntimeExports.jsx("div",{className:"progress-elegant",children:jsxRuntimeExports.jsx("div",{className:"progress-fill",style:{width:`${or}%`}})})]})]}),jsxRuntimeExports.jsxs("div",{className:"animate-fadeInUp",style:{animationDelay:"1s"},children:[jsxRuntimeExports.jsxs("h4",{className:"font-bold text-gray-800 mb-4 flex items-center gap-3 text-lg",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-6 w-6 text-green-600 animate-pulse"}),"Previously Analyzed Pages"]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-3 stagger-animation",children:tr.sort((ar,lr)=>ar-lr).map(ar=>jsxRuntimeExports.jsxs(Badge,{className:"badge-elegant status-success hover-lift px-4 py-2 text-sm font-semibold",children:["Page ",ar]},ar))})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6 animate-fadeInUp",style:{animationDelay:"1.2s"},children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsx(Button,{onClick:nr,className:"btn-primary py-8 text-lg font-bold relative group overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Play,{className:"h-6 w-6 group-hover:scale-110 transition-transform"}),jsxRuntimeExports.jsx("span",{children:"Resume Analysis"})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm opacity-90",children:["Continue from page ",Math.max(...tr)+1]})]})}),jsxRuntimeExports.jsx(Button,{onClick:sr,className:"btn-secondary py-8 text-lg font-bold relative group overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"h-6 w-6 group-hover:rotate-180 transition-transform duration-500"}),jsxRuntimeExports.jsx("span",{children:"Start New Analysis"})]}),jsxRuntimeExports.jsx("div",{className:"text-sm opacity-70",children:"Analyze from beginning"})]})})]}),jsxRuntimeExports.jsx(Button,{onClick:ir,variant:"ghost",className:"w-full text-gray-600 hover:text-gray-800 py-4 text-base font-medium hover:bg-gray-100/50 rounded-xl transition-all duration-300",children:"Back to Upload"})]})]})})]})})]})},FileRecognitionModal=({fileName:er,totalPages:_e,analyzedPages:tr,lastAnalyzed:rr,onContinue:nr,onStartNew:sr,onCancel:ir})=>{const[or,ar]=reactExports.useState(!1),lr=tr/_e*100,cr=async()=>{ar(!0),await nr()},Ar=ur=>ur.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4 flex items-center justify-center",children:jsxRuntimeExports.jsx(Card,{className:"max-w-2xl mx-auto p-8 bg-white/95 backdrop-blur-sm shadow-2xl border-0 animate-fadeInScale",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full w-fit mx-auto",children:jsxRuntimeExports.jsx(FileText,{className:"h-8 w-8 text-white"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"File Already Analyzed"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"We found previous analysis for this document"})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-xl border border-blue-200",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(FileText,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:er}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-4 w-4"}),Ar(rr)]}),jsxRuntimeExports.jsxs("span",{children:[_e," pages total"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Analysis Progress"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600",children:[tr,"/",_e," pages"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-300",style:{width:`${lr}%`}})}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx(Badge,{className:`${lr===100?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:lr===100?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-3 w-3 mr-1"}),"Complete"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Clock,{className:"h-3 w-3 mr-1"}),Math.round(lr),"% completed"]})})})]})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 text-center",children:"What would you like to do?"}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4",children:[jsxRuntimeExports.jsx("div",{className:"border border-blue-200 rounded-lg p-4 hover:bg-blue-50 transition-colors",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:jsxRuntimeExports.jsx(ArrowRight,{className:"h-5 w-5 text-blue-600"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-800",children:"Continue from where you left off"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Resume analysis from page ",tr+1," and save tokens"]}),jsxRuntimeExports.jsx("div",{className:"mt-3",children:jsxRuntimeExports.jsx(Button,{onClick:cr,disabled:or,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:or?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Loading..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ArrowRight,{className:"h-4 w-4 mr-2"}),"Continue Analysis"]})})})]})]})}),jsxRuntimeExports.jsx("div",{className:"border border-orange-200 rounded-lg p-4 hover:bg-orange-50 transition-colors",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:jsxRuntimeExports.jsx(RotateCcw,{className:"h-5 w-5 text-orange-600"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-800",children:"Start fresh analysis"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Completely re-analyze the entire document from the beginning"}),jsxRuntimeExports.jsx("div",{className:"mt-3",children:jsxRuntimeExports.jsxs(Button,{onClick:sr,variant:"outline",className:"border-orange-300 text-orange-700 hover:bg-orange-50",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"h-4 w-4 mr-2"}),"Start New Analysis"]})})]})]})})]})]}),lr>25&&jsxRuntimeExports.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"h-4 w-4 text-yellow-600"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-yellow-700",children:[jsxRuntimeExports.jsx("strong",{children:"Note:"})," Starting a fresh analysis will use additional tokens and replace your existing progress."]})]})}),jsxRuntimeExports.jsx("div",{className:"text-center pt-4",children:jsxRuntimeExports.jsx(Button,{onClick:ir,variant:"ghost",className:"text-gray-500 hover:text-gray-700",children:"Cancel & Choose Different File"})})]})})})},AdvancedAnalyzingState=({progress:er,step:_e,analysisType:tr,fileName:rr,currentPage:nr,totalPages:sr})=>{const or=(()=>{switch(tr){case"next-page":return{title:`Analyzing Page ${nr}`,subtitle:"Generating insights for the next page",icon:ArrowRight,gradient:"from-green-500 to-emerald-600",bgGradient:"from-green-50 to-emerald-50"};case"comprehensive":return{title:"Comprehensive Analysis",subtitle:"Processing entire document for detailed insights",icon:Brain,gradient:"from-purple-500 to-indigo-600",bgGradient:"from-purple-50 to-indigo-50"};default:return{title:"Detailed Analysis",subtitle:"AI is analyzing your study material",icon:FileText,gradient:"from-blue-500 to-purple-600",bgGradient:"from-blue-50 to-purple-50"}}})(),ar=or.icon,lr=[{id:1,label:"Processing Content",completed:er>20},{id:2,label:"Extracting Key Points",completed:er>40},{id:3,label:"TNPSC Analysis",completed:er>60},{id:4,label:"Generating Study Points",completed:er>80},{id:5,label:"Finalizing Results",completed:er>95}];return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-gradient-to-br from-blue-400/30 to-purple-400/30 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-gradient-to-br from-indigo-400/30 to-pink-400/30 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-gradient-to-br from-green-400/20 to-blue-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"4s"}})]}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-8 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs(Card,{className:`glass-card p-8 md:p-12 text-center mb-8 bg-gradient-to-r ${or.bgGradient} border-0 shadow-2xl animate-fade-in`,children:[jsxRuntimeExports.jsxs("div",{className:`relative mx-auto mb-8 w-24 h-24 bg-gradient-to-r ${or.gradient} rounded-full flex items-center justify-center shadow-2xl animate-pulse`,children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-white/20 to-transparent animate-spin"}),jsxRuntimeExports.jsx(ar,{className:"h-12 w-12 text-white animate-bounce"})]}),jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold gradient-text mb-4 animate-fade-in",style:{animationDelay:"0.2s"},children:or.title}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-600 mb-2 animate-fade-in",style:{animationDelay:"0.4s"},children:or.subtitle}),rr&&jsxRuntimeExports.jsxs("p",{className:"text-lg text-gray-500 mb-8 animate-fade-in",style:{animationDelay:"0.6s"},children:[" ",rr,nr&&sr&&jsxRuntimeExports.jsxs("span",{className:"ml-2 text-blue-600 font-semibold",children:["(Page ",nr," of ",sr,")"]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8 animate-fade-in",style:{animationDelay:"0.8s"},children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Progress"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[Math.round(er),"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Progress,{value:er,className:"h-3 bg-gradient-to-r from-gray-200 to-gray-300 rounded-full overflow-hidden"}),jsxRuntimeExports.jsx("div",{className:`absolute top-0 left-0 h-full bg-gradient-to-r ${or.gradient} rounded-full transition-all duration-500 ease-out`,style:{width:`${er}%`},children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-white/30 to-transparent animate-pulse"})})]})]}),jsxRuntimeExports.jsxs("div",{className:`inline-flex items-center gap-3 px-6 py-3 bg-gradient-to-r ${or.gradient} text-white rounded-full shadow-lg animate-fade-in`,style:{animationDelay:"1s"},children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:_e})]})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 md:p-8 animate-fade-in",style:{animationDelay:"1.2s"},children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-6 text-center",children:"Analysis Pipeline"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:lr.map((cr,Ar)=>jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:`flex flex-col items-center p-4 rounded-lg transition-all duration-500 ${cr.completed?"bg-gradient-to-b from-green-100 to-emerald-100 text-green-800 shadow-md transform scale-105":er>(cr.id-1)*20?"bg-gradient-to-b from-blue-100 to-indigo-100 text-blue-800 shadow-md animate-pulse":"bg-gray-50 text-gray-500"}`,children:[jsxRuntimeExports.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mb-2 ${cr.completed?"bg-green-500 text-white":er>(cr.id-1)*20?"bg-blue-500 text-white animate-pulse":"bg-gray-300 text-gray-600"}`,children:cr.completed?jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-4 w-4"}):jsxRuntimeExports.jsx("span",{className:"text-xs font-bold",children:cr.id})}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-center leading-tight",children:cr.label})]}),Ar<lr.length-1&&jsxRuntimeExports.jsx("div",{className:"hidden md:block absolute top-1/2 -right-2 w-4 h-0.5 bg-gray-300 transform -translate-y-1/2",children:jsxRuntimeExports.jsx("div",{className:`h-full bg-gradient-to-r ${or.gradient} transition-all duration-500 ${cr.completed?"w-full":"w-0"}`})})]},cr.id))})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 text-center animate-fade-in",style:{animationDelay:"1.4s"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[jsxRuntimeExports.jsx(Zap,{className:"h-5 w-5 text-yellow-500 animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-800",children:"Did you know?"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:tr==="next-page"?"Our AI analyzes each page for TNPSC-specific content and creates targeted study materials.":tr==="comprehensive"?"Comprehensive analysis processes every page to create a complete study guide tailored for TNPSC preparation.":"Our AI processes text, identifies key concepts, and generates TNPSC-focused study materials in seconds!"})]})]})})]})},StudyAssistant=()=>{var Kn;const[er]=useAuthState(auth),{selectedFiles:_e,setSelectedFiles:tr,analysisResults:rr,setAnalysisResults:nr,questionResult:sr,setQuestionResult:ir,difficulty:or,setDifficulty:ar,outputLanguage:lr,setOutputLanguage:cr,clearAppState:Ar}=useAppContext(),[ur,dr]=reactExports.useState("upload"),[mr,pr]=reactExports.useState(!1),[yr,hr]=reactExports.useState(!1),[gr,Cr]=reactExports.useState(0),[Tr,Sr]=reactExports.useState(""),[Nr,_r]=reactExports.useState(null),[vr,br]=reactExports.useState(""),[Pr,Er]=reactExports.useState(null),[Rr,Ir]=reactExports.useState(!1);reactExports.useState(1);const[Qr,Ur]=reactExports.useState(!1),[Vr,Wr]=reactExports.useState(null),[Hr,$r]=reactExports.useState(1),Xr=Cn=>{if(!Cn)return;const Jr=Array.from(Cn),Fn=Jr.filter(Zr=>Zr.type.startsWith("image/")||Zr.type==="application/pdf");Fn.length!==Jr.length&&Jt$2.error("Only image files (PNG, JPG, etc.) and PDF files are supported"),tr(Fn)},pn=async()=>{var Jr,Fn;if(_e.length===0){Jt$2.error("Please select files to analyze");return}const Cn=_e.find(Zr=>Zr.type==="application/pdf");if(Cn){try{const Zr=await extractAllPdfText(Cn),hn=findTotalPagesFromOcr(Zr);if(hn>0){_r({file:Cn,totalPages:hn}),br(Zr);const bn=await Cn.arrayBuffer(),In=await crypto.subtle.digest("SHA-256",bn),zn=Array.from(new Uint8Array(In)).map(Nn=>Nn.toString(16).padStart(2,"0")).join(""),qn=await getStudyHistoryForFile((er==null?void 0:er.uid)||"",Cn.name,zn,Cn.size);if(qn&&qn.pageAnalysesMap&&Object.keys(qn.pageAnalysesMap).length>0){const Nn=new Map,ns=[];Object.entries(qn.pageAnalysesMap).forEach(([rs,Is])=>{const ps=parseInt(rs);Nn.set(ps,Is),ns.push(ps)}),Er({id:qn.id,pageAnalysesMap:Nn,analyzedPages:ns,lastAnalyzed:qn.timestamp.toDate()}),dr("file-recognition")}else dr("pdf-navigator");return}else{Jt$2.error("Unable to process PDF. Please try a different file.");return}}catch(Zr){console.error("PDF analysis error:",Zr),Jt$2.error("Failed to analyze PDF. Please try again.")}return}pr(!0),Cr(0),Sr("Initializing analysis...");try{const Zr=[],hn=_e.filter(bn=>bn.type.startsWith("image/")).length;for(let bn=0;bn<_e.length;bn++){const In=_e[bn];if(In.type.startsWith("image/")){Sr(`Analyzing image ${bn+1} of ${hn}...`),Cr(bn/hn*80);const jn=await analyzeImage(In,lr);Zr.push({...jn,language:lr,mainTopic:((Fn=(Jr=jn.studyPoints)==null?void 0:Jr[0])==null?void 0:Fn.title)||"Study Material"})}}Sr("Finalizing results..."),Cr(100),setTimeout(()=>{nr(Zr),dr("analysis"),Jt$2.success("Analysis completed successfully!"),pr(!1)},1e3)}catch(Zr){console.error("Analysis error:",Zr),Jt$2.error("Failed to analyze files. Please try again."),pr(!1)}},jr=async()=>{var Cn;if(rr.length!==0){hr(!0);try{const Jr=await generateQuestions(rr,or,lr);ir({...Jr,totalQuestions:((Cn=Jr.questions)==null?void 0:Cn.length)||0}),dr("questions"),Jt$2.success("Questions generated successfully!")}catch(Jr){console.error("Question generation error:",Jr),Jt$2.error("Failed to generate questions. Please try again.")}finally{hr(!1)}}},Br=()=>{if(_e.length===0){Jt$2.error("Please select files first");return}dr("quick-analysis")},Lr=Cn=>{var Jr;ir({...Cn,totalQuestions:((Jr=Cn.questions)==null?void 0:Jr.length)||0}),dr("quiz")};React.useEffect(()=>{sr&&ur==="upload"&&dr("quiz")},[sr]);const Or=async(Cn,Jr)=>{var Fn,Zr;if(Nr){hr(!0);try{const hn=[];for(let jn=Cn.start;jn<=Cn.end;jn++)(Fn=Pr==null?void 0:Pr.pageAnalysesMap)!=null&&Fn.has(jn)&&hn.push(Pr.pageAnalysesMap.get(jn));let bn;if(hn.length>0){const jn=hn.flatMap(Nn=>Nn.keyPoints||[]),zn=hn.map(Nn=>Nn.summary||"").join(" "),qn=hn.flatMap(Nn=>Nn.studyPoints||[]);bn={keyPoints:jn,summary:zn,tnpscRelevance:`Quiz based on analyzed pages ${Cn.start} to ${Cn.end}`,studyPoints:qn,tnpscCategories:["PDF Quiz"]}}else{const jn=extractPageRangeFromOcr(vr,Cn.start,Cn.end);bn=await analyzePdfContent(jn,lr)}const In=await generateQuestions([bn],Jr,lr);ir({...In,totalQuestions:((Zr=In.questions)==null?void 0:Zr.length)||0}),dr("questions"),Jt$2.success(`Quiz generated for pages ${Cn.start} to ${Cn.end}!`)}catch(hn){console.error("Question generation error:",hn),Jt$2.error("Failed to generate questions. Please try again.")}finally{hr(!1)}}},zr=(Cn,Jr)=>{dr("pdf-navigator")},Gr=()=>{Ar(),Er(null),dr("upload")},Yr=()=>{sr&&dr("quiz")},dn=()=>{Nr&&Pr&&dr("pdf-navigator")},En=()=>{Er(null),Nr&&dr("pdf-page-select")},Sn=()=>{console.log("=== Continue from recognition ==="),console.log("pdfInfo:",Nr),console.log("existingStudyHistory:",Pr),console.log("pageAnalysesMap:",Pr==null?void 0:Pr.pageAnalysesMap),Nr&&Pr&&dr("pdf-navigator")},Bn=()=>{Er(null),Nr&&dr("pdf-page-select")},kn=()=>{tr([]),_r(null),Er(null),dr("upload")};return ur==="quick-analysis"?jsxRuntimeExports.jsx(QuickAnalysisMode,{files:_e,difficulty:or,outputLanguage:lr,onStartQuiz:Lr,onReset:Gr}):ur==="quiz"&&sr?jsxRuntimeExports.jsx(ModernQuizMode,{result:sr,onReset:Gr,onBackToAnalysis:()=>dr("analysis"),difficulty:or,outputLanguage:lr}):ur==="questions"&&sr?jsxRuntimeExports.jsx(QuestionResults,{result:sr,onReset:Gr,selectedFiles:_e,onStartQuiz:Yr}):ur==="analysis"&&rr.length>0?jsxRuntimeExports.jsx(AnalysisResults,{result:rr[0],onReset:Gr,selectedFiles:_e,onGenerateQuestions:jr,onStartQuiz:Yr,isGeneratingQuestions:yr}):ur==="comprehensive-pdf"&&Vr?jsxRuntimeExports.jsx(ComprehensivePdfResults,{pageAnalyses:Vr.pageAnalyses,overallSummary:Vr.overallSummary,totalKeyPoints:Vr.totalKeyPoints,onReset:Gr,onGenerateQuestions:()=>{},isGeneratingQuestions:yr}):ur==="pdf-navigator"&&Nr?(console.log("=== Rendering PdfPageNavigator ==="),console.log("existingStudyHistory:",Pr),console.log("pageAnalysesMap:",Pr==null?void 0:Pr.pageAnalysesMap),console.log("isContinueAnalysis:",!!Pr),jsxRuntimeExports.jsx(PdfPageNavigator,{file:Nr.file,totalPages:Nr.totalPages,fullText:vr,outputLanguage:lr,onReset:Gr,onStartQuiz:Or,initialPageAnalyses:Pr==null?void 0:Pr.pageAnalysesMap,initialStudyHistoryId:Pr==null?void 0:Pr.id,currentPage:Hr,onPageChange:$r,initialShowPageRangeSelector:!Pr,isContinueAnalysis:!!Pr})):ur==="pdf-resume-options"&&Nr&&Pr?jsxRuntimeExports.jsx(PdfResumeOptions,{fileName:Nr.file.name,totalPages:Nr.totalPages,analyzedPages:Pr.analyzedPages,lastAnalyzed:Pr.lastAnalyzed,onResumeAnalysis:dn,onStartNewAnalysis:En,onBack:Gr}):ur==="pdf-page-select"&&Nr?jsxRuntimeExports.jsx(PageRangeSelector,{totalPages:Nr.totalPages,onConfirm:zr,onBack:Gr,title:"Select PDF Pages",description:"Choose which pages to analyze for TNPSC preparation",isProcessing:Qr}):ur==="file-recognition"&&Nr&&Pr?jsxRuntimeExports.jsx(FileRecognitionModal,{fileName:Nr.file.name,totalPages:Nr.totalPages,analyzedPages:Pr.analyzedPages.length,lastAnalyzed:Pr.lastAnalyzed,onContinue:Sn,onStartNew:Bn,onCancel:kn}):ur==="quiz-page-select"&&Nr?jsxRuntimeExports.jsx(PageRangeSelector,{totalPages:Nr.totalPages,onConfirm:(Cn,Jr)=>{dr("pdf-navigator")},onBack:()=>dr("upload"),title:"Select Quiz Pages",description:"Choose which pages to generate quiz questions from"}):mr||Rr?jsxRuntimeExports.jsx(AdvancedAnalyzingState,{progress:gr,step:Tr,analysisType:"detailed",fileName:(Kn=_e[0])==null?void 0:Kn.name}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-primary/5 to-secondary/10 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-primary/20 to-accent/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-secondary/20 to-primary/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-accent/10 to-primary/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"4s"}})]}),jsxRuntimeExports.jsx("div",{className:"p-4 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-4xl px-2 sm:px-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8 animate-fadeInUp",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"p-3 md:p-4 bg-gradient-to-r from-primary to-primary-glow rounded-full shadow-2xl pulse-glow",children:jsxRuntimeExports.jsx(Brain,{className:"h-8 w-8 md:h-10 md:w-10 text-white"})}),jsxRuntimeExports.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold gradient-text",children:"Ram's AI"})]}),jsxRuntimeExports.jsx("p",{className:"text-base sm:text-lg md:text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed px-4",children:"Transform your TNPSC preparation with AI-powered analysis. Upload your study materials and get instant insights, key points, and practice questions."})]}),jsxRuntimeExports.jsx(Card,{className:"glass-card p-4 sm:p-6 md:p-8 mb-6 md:mb-8 animate-fadeInScale hover-lift mx-2 sm:mx-0",children:jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm md:text-base font-semibold text-foreground",children:[jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4 inline mr-2"}),"Difficulty Level"]}),jsxRuntimeExports.jsxs("select",{value:or,onChange:Cn=>ar(Cn.target.value),className:"w-full appearance-none bg-white/95 backdrop-blur-sm border-2 border-gray-200 rounded-xl px-3 sm:px-4 py-3 text-sm md:text-base text-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 focus:outline-none transition-all duration-300 cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 12px center",backgroundRepeat:"no-repeat",backgroundSize:"16px",paddingRight:"40px"},children:[jsxRuntimeExports.jsx("option",{value:"easy",children:" Easy - Basic concepts"}),jsxRuntimeExports.jsx("option",{value:"medium",children:" Medium - Standard level"}),jsxRuntimeExports.jsx("option",{value:"hard",children:" Hard - Advanced level"}),jsxRuntimeExports.jsx("option",{value:"very-hard",children:" Very Hard - Expert level"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm md:text-base font-semibold text-foreground",children:[jsxRuntimeExports.jsx(Languages,{className:"h-4 w-4 inline mr-2"}),"Output Language"]}),jsxRuntimeExports.jsxs("select",{value:lr,onChange:Cn=>cr(Cn.target.value),className:"w-full appearance-none bg-white/95 backdrop-blur-sm border-2 border-gray-200 rounded-xl px-3 sm:px-4 py-3 text-sm md:text-base text-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 focus:outline-none transition-all duration-300 cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 12px center",backgroundRepeat:"no-repeat",backgroundSize:"16px",paddingRight:"40px"},children:[jsxRuntimeExports.jsx("option",{value:"english",children:" English"}),jsxRuntimeExports.jsx("option",{value:"tamil",children:"  (Tamil)"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"interactive-card p-4 sm:p-6 md:p-10 border-2 border-dashed border-border hover:border-primary transition-all duration-500 hover:bg-primary/5 group",children:[jsxRuntimeExports.jsx("input",{type:"file",multiple:!0,accept:"image/*,application/pdf",onChange:Cn=>Xr(Cn.target.files),className:"hidden",id:"file-upload"}),jsxRuntimeExports.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer block text-center",children:[jsxRuntimeExports.jsx(Upload,{className:"h-12 sm:h-16 md:h-20 w-12 sm:w-16 md:w-20 text-muted-foreground mx-auto mb-3 sm:mb-4 md:mb-6 animate-float group-hover:text-primary transition-colors duration-300"}),jsxRuntimeExports.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-foreground mb-2 md:mb-3 group-hover:text-primary transition-colors",children:"Upload Your Study Materials"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground text-sm sm:text-base md:text-lg lg:text-xl mb-2 px-2",children:"Drag & drop or click to select images and PDF files"}),jsxRuntimeExports.jsx("p",{className:"text-xs sm:text-sm md:text-base text-muted-foreground/60 px-2",children:"Supports: JPG, PNG, GIF, PDF (up to 10MB each)"})]})]}),_e.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-8 animate-fadeInUp",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-800 text-base sm:text-lg",children:jsxRuntimeExports.jsxs("span",{className:"gradient-text",children:["Selected Files (",_e.length,")"]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 stagger-animation",children:[_e.slice(0,6).map((Cn,Jr)=>jsxRuntimeExports.jsxs("div",{className:"glass-card p-6 hover-lift",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Cn.type.startsWith("image/")?jsxRuntimeExports.jsx(Image$1,{className:"h-7 w-7 text-blue-600 animate-pulse"}):jsxRuntimeExports.jsx(FileText,{className:"h-7 w-7 text-red-600 animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-700",children:Cn.type.startsWith("image/")?"Image":"PDF"})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[jsxRuntimeExports.jsx("div",{className:"font-medium truncate mb-1",children:Cn.name}),jsxRuntimeExports.jsxs("div",{className:"text-xs",children:["(",(Cn.size/1024/1024).toFixed(2)," MB)"]})]})]},Jr)),_e.length>6&&jsxRuntimeExports.jsx("div",{className:"glass-card p-6 flex items-center justify-center text-gray-500",children:jsxRuntimeExports.jsxs("span",{className:"text-sm",children:["+",_e.length-6," more files"]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 md:gap-6 pt-6 md:pt-8",children:[jsxRuntimeExports.jsx(Button,{onClick:pn,disabled:mr,className:"flex-1 btn-primary py-4 sm:py-6 md:py-8 text-base sm:text-lg md:text-xl font-bold",children:mr?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-5 w-5 md:h-6 md:w-6 border-b-2 border-white mr-2 md:mr-3"}),"Analyzing..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Settings,{className:"h-5 w-5 md:h-6 md:w-6 mr-2 md:mr-3"}),"Detailed Analysis"]})}),jsxRuntimeExports.jsxs(Button,{onClick:Br,className:"flex-1 bg-gradient-to-r from-accent-success to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white py-4 sm:py-6 md:py-8 text-base sm:text-lg md:text-xl font-bold shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all duration-300 border-0 rounded-2xl relative overflow-hidden group",children:[jsxRuntimeExports.jsx(Zap,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 mr-2 md:mr-3 group-hover:rotate-12 transition-transform"}),"Quick Quiz"]})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 stagger-animation mx-2 sm:mx-0",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-8 text-center hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-3 sm:p-4 bg-blue-100 rounded-full w-fit mx-auto mb-4 sm:mb-6 animate-bounceIn",children:jsxRuntimeExports.jsx(FileText,{className:"h-8 w-8 text-blue-600"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2 sm:mb-3",children:"Smart Analysis"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm sm:text-base leading-relaxed",children:"AI-powered analysis extracts key points and creates crisp, memorable study notes"})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-8 text-center hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-3 sm:p-4 bg-purple-100 rounded-full w-fit mx-auto mb-4 sm:mb-6 animate-bounceIn",style:{animationDelay:"0.2s"},children:jsxRuntimeExports.jsx(Brain,{className:"h-8 w-8 text-purple-600"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2 sm:mb-3",children:"MCQ & Assertion Questions"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm sm:text-base leading-relaxed",children:"Generate TNPSC-style multiple choice and assertion-reason questions for practice"})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-8 text-center hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-3 sm:p-4 bg-green-100 rounded-full w-fit mx-auto mb-4 sm:mb-6 animate-bounceIn",style:{animationDelay:"0.4s"},children:jsxRuntimeExports.jsx(Zap,{className:"h-8 w-8 text-green-600"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2 sm:mb-3",children:"Instant Results"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm sm:text-base leading-relaxed",children:"Get immediate feedback with detailed explanations and performance tracking"})]})]})]})})]})};function clamp(er,[_e,tr]){return Math.min(tr,Math.max(_e,er))}var OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection,useCollection,createCollectionScope]=createCollection(SELECT_NAME),[createSelectContext,createSelectScope]=createContextScope$3(SELECT_NAME,[createCollectionScope,createPopperScope]),usePopperScope=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$1=er=>{const{__scopeSelect:_e,children:tr,open:rr,defaultOpen:nr,onOpenChange:sr,value:ir,defaultValue:or,onValueChange:ar,dir:lr,name:cr,autoComplete:Ar,disabled:ur,required:dr,form:mr}=er,pr=usePopperScope(_e),[yr,hr]=reactExports.useState(null),[gr,Cr]=reactExports.useState(null),[Tr,Sr]=reactExports.useState(!1),Nr=useDirection(lr),[_r=!1,vr]=useControllableState({prop:rr,defaultProp:nr,onChange:sr}),[br,Pr]=useControllableState({prop:ir,defaultProp:or,onChange:ar}),Er=reactExports.useRef(null),Rr=yr?mr||!!yr.closest("form"):!0,[Ir,Qr]=reactExports.useState(new Set),Ur=Array.from(Ir).map(Vr=>Vr.props.value).join(";");return jsxRuntimeExports.jsx(Root2$4,{...pr,children:jsxRuntimeExports.jsxs(SelectProvider,{required:dr,scope:_e,trigger:yr,onTriggerChange:hr,valueNode:gr,onValueNodeChange:Cr,valueNodeHasChildren:Tr,onValueNodeHasChildrenChange:Sr,contentId:useId(),value:br,onValueChange:Pr,open:_r,onOpenChange:vr,dir:Nr,triggerPointerDownPosRef:Er,disabled:ur,children:[jsxRuntimeExports.jsx(Collection.Provider,{scope:_e,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:er.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(Vr=>{Qr(Wr=>new Set(Wr).add(Vr))},[]),onNativeOptionRemove:reactExports.useCallback(Vr=>{Qr(Wr=>{const Hr=new Set(Wr);return Hr.delete(Vr),Hr})},[]),children:tr})}),Rr?jsxRuntimeExports.jsxs(BubbleSelect,{"aria-hidden":!0,required:dr,tabIndex:-1,name:cr,autoComplete:Ar,value:br,onChange:Vr=>Pr(Vr.target.value),disabled:ur,form:mr,children:[br===void 0?jsxRuntimeExports.jsx("option",{value:""}):null,Array.from(Ir)]},Ur):null]})})};Select$1.displayName=SELECT_NAME;var TRIGGER_NAME$1="SelectTrigger",SelectTrigger$1=reactExports.forwardRef((er,_e)=>{const{__scopeSelect:tr,disabled:rr=!1,...nr}=er,sr=usePopperScope(tr),ir=useSelectContext(TRIGGER_NAME$1,tr),or=ir.disabled||rr,ar=useComposedRefs(_e,ir.onTriggerChange),lr=useCollection(tr),cr=reactExports.useRef("touch"),[Ar,ur,dr]=useTypeaheadSearch(pr=>{const yr=lr().filter(Cr=>!Cr.disabled),hr=yr.find(Cr=>Cr.value===ir.value),gr=findNextItem(yr,pr,hr);gr!==void 0&&ir.onValueChange(gr.value)}),mr=pr=>{or||(ir.onOpenChange(!0),dr()),pr&&(ir.triggerPointerDownPosRef.current={x:Math.round(pr.pageX),y:Math.round(pr.pageY)})};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,...sr,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"combobox","aria-controls":ir.contentId,"aria-expanded":ir.open,"aria-required":ir.required,"aria-autocomplete":"none",dir:ir.dir,"data-state":ir.open?"open":"closed",disabled:or,"data-disabled":or?"":void 0,"data-placeholder":shouldShowPlaceholder(ir.value)?"":void 0,...nr,ref:ar,onClick:composeEventHandlers$1(nr.onClick,pr=>{pr.currentTarget.focus(),cr.current!=="mouse"&&mr(pr)}),onPointerDown:composeEventHandlers$1(nr.onPointerDown,pr=>{cr.current=pr.pointerType;const yr=pr.target;yr.hasPointerCapture(pr.pointerId)&&yr.releasePointerCapture(pr.pointerId),pr.button===0&&pr.ctrlKey===!1&&pr.pointerType==="mouse"&&(mr(pr),pr.preventDefault())}),onKeyDown:composeEventHandlers$1(nr.onKeyDown,pr=>{const yr=Ar.current!=="";!(pr.ctrlKey||pr.altKey||pr.metaKey)&&pr.key.length===1&&ur(pr.key),!(yr&&pr.key===" ")&&OPEN_KEYS.includes(pr.key)&&(mr(),pr.preventDefault())})})})});SelectTrigger$1.displayName=TRIGGER_NAME$1;var VALUE_NAME="SelectValue",SelectValue$1=reactExports.forwardRef((er,_e)=>{const{__scopeSelect:tr,className:rr,style:nr,children:sr,placeholder:ir="",...or}=er,ar=useSelectContext(VALUE_NAME,tr),{onValueNodeHasChildrenChange:lr}=ar,cr=sr!==void 0,Ar=useComposedRefs(_e,ar.onValueNodeChange);return useLayoutEffect2(()=>{lr(cr)},[lr,cr]),jsxRuntimeExports.jsx(Primitive.span,{...or,ref:Ar,style:{pointerEvents:"none"},children:shouldShowPlaceholder(ar.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ir}):sr})});SelectValue$1.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((er,_e)=>{const{__scopeSelect:tr,children:rr,...nr}=er;return jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...nr,ref:_e,children:rr||""})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME$1="SelectPortal",SelectPortal=er=>jsxRuntimeExports.jsx(Portal$2,{asChild:!0,...er});SelectPortal.displayName=PORTAL_NAME$1;var CONTENT_NAME$1="SelectContent",SelectContent$1=reactExports.forwardRef((er,_e)=>{const tr=useSelectContext(CONTENT_NAME$1,er.__scopeSelect),[rr,nr]=reactExports.useState();if(useLayoutEffect2(()=>{nr(new DocumentFragment)},[]),!tr.open){const sr=rr;return sr?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:er.__scopeSelect,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:er.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:er.children})})}),sr):null}return jsxRuntimeExports.jsx(SelectContentImpl,{...er,ref:_e})});SelectContent$1.displayName=CONTENT_NAME$1;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME$1),CONTENT_IMPL_NAME="SelectContentImpl",SelectContentImpl=reactExports.forwardRef((er,_e)=>{const{__scopeSelect:tr,position:rr="item-aligned",onCloseAutoFocus:nr,onEscapeKeyDown:sr,onPointerDownOutside:ir,side:or,sideOffset:ar,align:lr,alignOffset:cr,arrowPadding:Ar,collisionBoundary:ur,collisionPadding:dr,sticky:mr,hideWhenDetached:pr,avoidCollisions:yr,...hr}=er,gr=useSelectContext(CONTENT_NAME$1,tr),[Cr,Tr]=reactExports.useState(null),[Sr,Nr]=reactExports.useState(null),_r=useComposedRefs(_e,Gr=>Tr(Gr)),[vr,br]=reactExports.useState(null),[Pr,Er]=reactExports.useState(null),Rr=useCollection(tr),[Ir,Qr]=reactExports.useState(!1),Ur=reactExports.useRef(!1);reactExports.useEffect(()=>{if(Cr)return hideOthers(Cr)},[Cr]),useFocusGuards();const Vr=reactExports.useCallback(Gr=>{const[Yr,...dn]=Rr().map(Bn=>Bn.ref.current),[En]=dn.slice(-1),Sn=document.activeElement;for(const Bn of Gr)if(Bn===Sn||(Bn==null||Bn.scrollIntoView({block:"nearest"}),Bn===Yr&&Sr&&(Sr.scrollTop=0),Bn===En&&Sr&&(Sr.scrollTop=Sr.scrollHeight),Bn==null||Bn.focus(),document.activeElement!==Sn))return},[Rr,Sr]),Wr=reactExports.useCallback(()=>Vr([vr,Cr]),[Vr,vr,Cr]);reactExports.useEffect(()=>{Ir&&Wr()},[Ir,Wr]);const{onOpenChange:Hr,triggerPointerDownPosRef:$r}=gr;reactExports.useEffect(()=>{if(Cr){let Gr={x:0,y:0};const Yr=En=>{var Sn,Bn;Gr={x:Math.abs(Math.round(En.pageX)-(((Sn=$r.current)==null?void 0:Sn.x)??0)),y:Math.abs(Math.round(En.pageY)-(((Bn=$r.current)==null?void 0:Bn.y)??0))}},dn=En=>{Gr.x<=10&&Gr.y<=10?En.preventDefault():Cr.contains(En.target)||Hr(!1),document.removeEventListener("pointermove",Yr),$r.current=null};return $r.current!==null&&(document.addEventListener("pointermove",Yr),document.addEventListener("pointerup",dn,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Yr),document.removeEventListener("pointerup",dn,{capture:!0})}}},[Cr,Hr,$r]),reactExports.useEffect(()=>{const Gr=()=>Hr(!1);return window.addEventListener("blur",Gr),window.addEventListener("resize",Gr),()=>{window.removeEventListener("blur",Gr),window.removeEventListener("resize",Gr)}},[Hr]);const[Xr,pn]=useTypeaheadSearch(Gr=>{const Yr=Rr().filter(Sn=>!Sn.disabled),dn=Yr.find(Sn=>Sn.ref.current===document.activeElement),En=findNextItem(Yr,Gr,dn);En&&setTimeout(()=>En.ref.current.focus())}),jr=reactExports.useCallback((Gr,Yr,dn)=>{const En=!Ur.current&&!dn;(gr.value!==void 0&&gr.value===Yr||En)&&(br(Gr),En&&(Ur.current=!0))},[gr.value]),Br=reactExports.useCallback(()=>Cr==null?void 0:Cr.focus(),[Cr]),Lr=reactExports.useCallback((Gr,Yr,dn)=>{const En=!Ur.current&&!dn;(gr.value!==void 0&&gr.value===Yr||En)&&Er(Gr)},[gr.value]),Or=rr==="popper"?SelectPopperPosition:SelectItemAlignedPosition,zr=Or===SelectPopperPosition?{side:or,sideOffset:ar,align:lr,alignOffset:cr,arrowPadding:Ar,collisionBoundary:ur,collisionPadding:dr,sticky:mr,hideWhenDetached:pr,avoidCollisions:yr}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:tr,content:Cr,viewport:Sr,onViewportChange:Nr,itemRefCallback:jr,selectedItem:vr,onItemLeave:Br,itemTextRefCallback:Lr,focusSelectedItem:Wr,selectedItemText:Pr,position:rr,isPositioned:Ir,searchRef:Xr,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:gr.open,onMountAutoFocus:Gr=>{Gr.preventDefault()},onUnmountAutoFocus:composeEventHandlers$1(nr,Gr=>{var Yr;(Yr=gr.trigger)==null||Yr.focus({preventScroll:!0}),Gr.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:sr,onPointerDownOutside:ir,onFocusOutside:Gr=>Gr.preventDefault(),onDismiss:()=>gr.onOpenChange(!1),children:jsxRuntimeExports.jsx(Or,{role:"listbox",id:gr.contentId,"data-state":gr.open?"open":"closed",dir:gr.dir,onContextMenu:Gr=>Gr.preventDefault(),...hr,...zr,onPlaced:()=>Qr(!0),ref:_r,style:{display:"flex",flexDirection:"column",outline:"none",...hr.style},onKeyDown:composeEventHandlers$1(hr.onKeyDown,Gr=>{const Yr=Gr.ctrlKey||Gr.altKey||Gr.metaKey;if(Gr.key==="Tab"&&Gr.preventDefault(),!Yr&&Gr.key.length===1&&pn(Gr.key),["ArrowUp","ArrowDown","Home","End"].includes(Gr.key)){let En=Rr().filter(Sn=>!Sn.disabled).map(Sn=>Sn.ref.current);if(["ArrowUp","End"].includes(Gr.key)&&(En=En.slice().reverse()),["ArrowUp","ArrowDown"].includes(Gr.key)){const Sn=Gr.target,Bn=En.indexOf(Sn);En=En.slice(Bn+1)}setTimeout(()=>Vr(En)),Gr.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((er,_e)=>{const{__scopeSelect:tr,onPlaced:rr,...nr}=er,sr=useSelectContext(CONTENT_NAME$1,tr),ir=useSelectContentContext(CONTENT_NAME$1,tr),[or,ar]=reactExports.useState(null),[lr,cr]=reactExports.useState(null),Ar=useComposedRefs(_e,_r=>cr(_r)),ur=useCollection(tr),dr=reactExports.useRef(!1),mr=reactExports.useRef(!0),{viewport:pr,selectedItem:yr,selectedItemText:hr,focusSelectedItem:gr}=ir,Cr=reactExports.useCallback(()=>{if(sr.trigger&&sr.valueNode&&or&&lr&&pr&&yr&&hr){const _r=sr.trigger.getBoundingClientRect(),vr=lr.getBoundingClientRect(),br=sr.valueNode.getBoundingClientRect(),Pr=hr.getBoundingClientRect();if(sr.dir!=="rtl"){const Sn=Pr.left-vr.left,Bn=br.left-Sn,kn=_r.left-Bn,Kn=_r.width+kn,Cn=Math.max(Kn,vr.width),Jr=window.innerWidth-CONTENT_MARGIN,Fn=clamp(Bn,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,Jr-Cn)]);or.style.minWidth=Kn+"px",or.style.left=Fn+"px"}else{const Sn=vr.right-Pr.right,Bn=window.innerWidth-br.right-Sn,kn=window.innerWidth-_r.right-Bn,Kn=_r.width+kn,Cn=Math.max(Kn,vr.width),Jr=window.innerWidth-CONTENT_MARGIN,Fn=clamp(Bn,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,Jr-Cn)]);or.style.minWidth=Kn+"px",or.style.right=Fn+"px"}const Er=ur(),Rr=window.innerHeight-CONTENT_MARGIN*2,Ir=pr.scrollHeight,Qr=window.getComputedStyle(lr),Ur=parseInt(Qr.borderTopWidth,10),Vr=parseInt(Qr.paddingTop,10),Wr=parseInt(Qr.borderBottomWidth,10),Hr=parseInt(Qr.paddingBottom,10),$r=Ur+Vr+Ir+Hr+Wr,Xr=Math.min(yr.offsetHeight*5,$r),pn=window.getComputedStyle(pr),jr=parseInt(pn.paddingTop,10),Br=parseInt(pn.paddingBottom,10),Lr=_r.top+_r.height/2-CONTENT_MARGIN,Or=Rr-Lr,zr=yr.offsetHeight/2,Gr=yr.offsetTop+zr,Yr=Ur+Vr+Gr,dn=$r-Yr;if(Yr<=Lr){const Sn=Er.length>0&&yr===Er[Er.length-1].ref.current;or.style.bottom="0px";const Bn=lr.clientHeight-pr.offsetTop-pr.offsetHeight,kn=Math.max(Or,zr+(Sn?Br:0)+Bn+Wr),Kn=Yr+kn;or.style.height=Kn+"px"}else{const Sn=Er.length>0&&yr===Er[0].ref.current;or.style.top="0px";const kn=Math.max(Lr,Ur+pr.offsetTop+(Sn?jr:0)+zr)+dn;or.style.height=kn+"px",pr.scrollTop=Yr-Lr+pr.offsetTop}or.style.margin=`${CONTENT_MARGIN}px 0`,or.style.minHeight=Xr+"px",or.style.maxHeight=Rr+"px",rr==null||rr(),requestAnimationFrame(()=>dr.current=!0)}},[ur,sr.trigger,sr.valueNode,or,lr,pr,yr,hr,sr.dir,rr]);useLayoutEffect2(()=>Cr(),[Cr]);const[Tr,Sr]=reactExports.useState();useLayoutEffect2(()=>{lr&&Sr(window.getComputedStyle(lr).zIndex)},[lr]);const Nr=reactExports.useCallback(_r=>{_r&&mr.current===!0&&(Cr(),gr==null||gr(),mr.current=!1)},[Cr,gr]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:tr,contentWrapper:or,shouldExpandOnScrollRef:dr,onScrollButtonChange:Nr,children:jsxRuntimeExports.jsx("div",{ref:ar,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Tr},children:jsxRuntimeExports.jsx(Primitive.div,{...nr,ref:Ar,style:{boxSizing:"border-box",maxHeight:"100%",...nr.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((er,_e)=>{const{__scopeSelect:tr,align:rr="start",collisionPadding:nr=CONTENT_MARGIN,...sr}=er,ir=usePopperScope(tr);return jsxRuntimeExports.jsx(Content$2,{...ir,...sr,ref:_e,align:rr,collisionPadding:nr,style:{boxSizing:"border-box",...sr.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME$1,{}),VIEWPORT_NAME$1="SelectViewport",SelectViewport=reactExports.forwardRef((er,_e)=>{const{__scopeSelect:tr,nonce:rr,...nr}=er,sr=useSelectContentContext(VIEWPORT_NAME$1,tr),ir=useSelectViewportContext(VIEWPORT_NAME$1,tr),or=useComposedRefs(_e,sr.onViewportChange),ar=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:rr}),jsxRuntimeExports.jsx(Collection.Slot,{scope:tr,children:jsxRuntimeExports.jsx(Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...nr,ref:or,style:{position:"relative",flex:1,overflow:"hidden auto",...nr.style},onScroll:composeEventHandlers$1(nr.onScroll,lr=>{const cr=lr.currentTarget,{contentWrapper:Ar,shouldExpandOnScrollRef:ur}=ir;if(ur!=null&&ur.current&&Ar){const dr=Math.abs(ar.current-cr.scrollTop);if(dr>0){const mr=window.innerHeight-CONTENT_MARGIN*2,pr=parseFloat(Ar.style.minHeight),yr=parseFloat(Ar.style.height),hr=Math.max(pr,yr);if(hr<mr){const gr=hr+dr,Cr=Math.min(mr,gr),Tr=gr-Cr;Ar.style.height=Cr+"px",Ar.style.bottom==="0px"&&(cr.scrollTop=Tr>0?Tr:0,Ar.style.justifyContent="flex-end")}}}ar.current=cr.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME$1;var GROUP_NAME="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME),SelectGroup=reactExports.forwardRef((er,_e)=>{const{__scopeSelect:tr,...rr}=er,nr=useId();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:tr,id:nr,children:jsxRuntimeExports.jsx(Primitive.div,{role:"group","aria-labelledby":nr,...rr,ref:_e})})});SelectGroup.displayName=GROUP_NAME;var LABEL_NAME="SelectLabel",SelectLabel$1=reactExports.forwardRef((er,_e)=>{const{__scopeSelect:tr,...rr}=er,nr=useSelectGroupContext(LABEL_NAME,tr);return jsxRuntimeExports.jsx(Primitive.div,{id:nr.id,...rr,ref:_e})});SelectLabel$1.displayName=LABEL_NAME;var ITEM_NAME="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME),SelectItem$1=reactExports.forwardRef((er,_e)=>{const{__scopeSelect:tr,value:rr,disabled:nr=!1,textValue:sr,...ir}=er,or=useSelectContext(ITEM_NAME,tr),ar=useSelectContentContext(ITEM_NAME,tr),lr=or.value===rr,[cr,Ar]=reactExports.useState(sr??""),[ur,dr]=reactExports.useState(!1),mr=useComposedRefs(_e,gr=>{var Cr;return(Cr=ar.itemRefCallback)==null?void 0:Cr.call(ar,gr,rr,nr)}),pr=useId(),yr=reactExports.useRef("touch"),hr=()=>{nr||(or.onValueChange(rr),or.onOpenChange(!1))};if(rr==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:tr,value:rr,disabled:nr,textId:pr,isSelected:lr,onItemTextChange:reactExports.useCallback(gr=>{Ar(Cr=>Cr||((gr==null?void 0:gr.textContent)??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:tr,value:rr,disabled:nr,textValue:cr,children:jsxRuntimeExports.jsx(Primitive.div,{role:"option","aria-labelledby":pr,"data-highlighted":ur?"":void 0,"aria-selected":lr&&ur,"data-state":lr?"checked":"unchecked","aria-disabled":nr||void 0,"data-disabled":nr?"":void 0,tabIndex:nr?void 0:-1,...ir,ref:mr,onFocus:composeEventHandlers$1(ir.onFocus,()=>dr(!0)),onBlur:composeEventHandlers$1(ir.onBlur,()=>dr(!1)),onClick:composeEventHandlers$1(ir.onClick,()=>{yr.current!=="mouse"&&hr()}),onPointerUp:composeEventHandlers$1(ir.onPointerUp,()=>{yr.current==="mouse"&&hr()}),onPointerDown:composeEventHandlers$1(ir.onPointerDown,gr=>{yr.current=gr.pointerType}),onPointerMove:composeEventHandlers$1(ir.onPointerMove,gr=>{var Cr;yr.current=gr.pointerType,nr?(Cr=ar.onItemLeave)==null||Cr.call(ar):yr.current==="mouse"&&gr.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers$1(ir.onPointerLeave,gr=>{var Cr;gr.currentTarget===document.activeElement&&((Cr=ar.onItemLeave)==null||Cr.call(ar))}),onKeyDown:composeEventHandlers$1(ir.onKeyDown,gr=>{var Tr;((Tr=ar.searchRef)==null?void 0:Tr.current)!==""&&gr.key===" "||(SELECTION_KEYS.includes(gr.key)&&hr(),gr.key===" "&&gr.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((er,_e)=>{const{__scopeSelect:tr,className:rr,style:nr,...sr}=er,ir=useSelectContext(ITEM_TEXT_NAME,tr),or=useSelectContentContext(ITEM_TEXT_NAME,tr),ar=useSelectItemContext(ITEM_TEXT_NAME,tr),lr=useSelectNativeOptionsContext(ITEM_TEXT_NAME,tr),[cr,Ar]=reactExports.useState(null),ur=useComposedRefs(_e,hr=>Ar(hr),ar.onItemTextChange,hr=>{var gr;return(gr=or.itemTextRefCallback)==null?void 0:gr.call(or,hr,ar.value,ar.disabled)}),dr=cr==null?void 0:cr.textContent,mr=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:ar.value,disabled:ar.disabled,children:dr},ar.value),[ar.disabled,ar.value,dr]),{onNativeOptionAdd:pr,onNativeOptionRemove:yr}=lr;return useLayoutEffect2(()=>(pr(mr),()=>yr(mr)),[pr,yr,mr]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive.span,{id:ar.textId,...sr,ref:ur}),ar.isSelected&&ir.valueNode&&!ir.valueNodeHasChildren?reactDomExports.createPortal(sr.children,ir.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((er,_e)=>{const{__scopeSelect:tr,...rr}=er;return useSelectItemContext(ITEM_INDICATOR_NAME,tr).isSelected?jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...rr,ref:_e}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton$1=reactExports.forwardRef((er,_e)=>{const tr=useSelectContentContext(SCROLL_UP_BUTTON_NAME,er.__scopeSelect),rr=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,er.__scopeSelect),[nr,sr]=reactExports.useState(!1),ir=useComposedRefs(_e,rr.onScrollButtonChange);return useLayoutEffect2(()=>{if(tr.viewport&&tr.isPositioned){let or=function(){const lr=ar.scrollTop>0;sr(lr)};const ar=tr.viewport;return or(),ar.addEventListener("scroll",or),()=>ar.removeEventListener("scroll",or)}},[tr.viewport,tr.isPositioned]),nr?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...er,ref:ir,onAutoScroll:()=>{const{viewport:or,selectedItem:ar}=tr;or&&ar&&(or.scrollTop=or.scrollTop-ar.offsetHeight)}}):null});SelectScrollUpButton$1.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton$1=reactExports.forwardRef((er,_e)=>{const tr=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,er.__scopeSelect),rr=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,er.__scopeSelect),[nr,sr]=reactExports.useState(!1),ir=useComposedRefs(_e,rr.onScrollButtonChange);return useLayoutEffect2(()=>{if(tr.viewport&&tr.isPositioned){let or=function(){const lr=ar.scrollHeight-ar.clientHeight,cr=Math.ceil(ar.scrollTop)<lr;sr(cr)};const ar=tr.viewport;return or(),ar.addEventListener("scroll",or),()=>ar.removeEventListener("scroll",or)}},[tr.viewport,tr.isPositioned]),nr?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...er,ref:ir,onAutoScroll:()=>{const{viewport:or,selectedItem:ar}=tr;or&&ar&&(or.scrollTop=or.scrollTop+ar.offsetHeight)}}):null});SelectScrollDownButton$1.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef((er,_e)=>{const{__scopeSelect:tr,onAutoScroll:rr,...nr}=er,sr=useSelectContentContext("SelectScrollButton",tr),ir=reactExports.useRef(null),or=useCollection(tr),ar=reactExports.useCallback(()=>{ir.current!==null&&(window.clearInterval(ir.current),ir.current=null)},[]);return reactExports.useEffect(()=>()=>ar(),[ar]),useLayoutEffect2(()=>{var cr;const lr=or().find(Ar=>Ar.ref.current===document.activeElement);(cr=lr==null?void 0:lr.ref.current)==null||cr.scrollIntoView({block:"nearest"})},[or]),jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...nr,ref:_e,style:{flexShrink:0,...nr.style},onPointerDown:composeEventHandlers$1(nr.onPointerDown,()=>{ir.current===null&&(ir.current=window.setInterval(rr,50))}),onPointerMove:composeEventHandlers$1(nr.onPointerMove,()=>{var lr;(lr=sr.onItemLeave)==null||lr.call(sr),ir.current===null&&(ir.current=window.setInterval(rr,50))}),onPointerLeave:composeEventHandlers$1(nr.onPointerLeave,()=>{ar()})})}),SEPARATOR_NAME="SelectSeparator",SelectSeparator$1=reactExports.forwardRef((er,_e)=>{const{__scopeSelect:tr,...rr}=er;return jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...rr,ref:_e})});SelectSeparator$1.displayName=SEPARATOR_NAME;var ARROW_NAME="SelectArrow",SelectArrow=reactExports.forwardRef((er,_e)=>{const{__scopeSelect:tr,...rr}=er,nr=usePopperScope(tr),sr=useSelectContext(ARROW_NAME,tr),ir=useSelectContentContext(ARROW_NAME,tr);return sr.open&&ir.position==="popper"?jsxRuntimeExports.jsx(Arrow,{...nr,...rr,ref:_e}):null});SelectArrow.displayName=ARROW_NAME;function shouldShowPlaceholder(er){return er===""||er===void 0}var BubbleSelect=reactExports.forwardRef((er,_e)=>{const{value:tr,...rr}=er,nr=reactExports.useRef(null),sr=useComposedRefs(_e,nr),ir=usePrevious(tr);return reactExports.useEffect(()=>{const or=nr.current,ar=window.HTMLSelectElement.prototype,cr=Object.getOwnPropertyDescriptor(ar,"value").set;if(ir!==tr&&cr){const Ar=new Event("change",{bubbles:!0});cr.call(or,tr),or.dispatchEvent(Ar)}},[ir,tr]),jsxRuntimeExports.jsx(VisuallyHidden,{asChild:!0,children:jsxRuntimeExports.jsx("select",{...rr,ref:sr,defaultValue:tr})})});BubbleSelect.displayName="BubbleSelect";function useTypeaheadSearch(er){const _e=useCallbackRef$1(er),tr=reactExports.useRef(""),rr=reactExports.useRef(0),nr=reactExports.useCallback(ir=>{const or=tr.current+ir;_e(or),function ar(lr){tr.current=lr,window.clearTimeout(rr.current),lr!==""&&(rr.current=window.setTimeout(()=>ar(""),1e3))}(or)},[_e]),sr=reactExports.useCallback(()=>{tr.current="",window.clearTimeout(rr.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(rr.current),[]),[tr,nr,sr]}function findNextItem(er,_e,tr){const nr=_e.length>1&&Array.from(_e).every(lr=>lr===_e[0])?_e[0]:_e,sr=tr?er.indexOf(tr):-1;let ir=wrapArray(er,Math.max(sr,0));nr.length===1&&(ir=ir.filter(lr=>lr!==tr));const ar=ir.find(lr=>lr.textValue.toLowerCase().startsWith(nr.toLowerCase()));return ar!==tr?ar:void 0}function wrapArray(er,_e){return er.map((tr,rr)=>er[(_e+rr)%er.length])}var Root2$1=Select$1,Trigger=SelectTrigger$1,Value=SelectValue$1,Icon=SelectIcon,Portal=SelectPortal,Content2$1=SelectContent$1,Viewport$1=SelectViewport,Label=SelectLabel$1,Item=SelectItem$1,ItemText=SelectItemText,ItemIndicator=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton$1,ScrollDownButton=SelectScrollDownButton$1,Separator=SelectSeparator$1;const Select=Root2$1,SelectValue=Value,SelectTrigger=reactExports.forwardRef(({className:er,children:_e,...tr},rr)=>jsxRuntimeExports.jsxs(Trigger,{ref:rr,className:cn$1("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",er),...tr,children:[_e,jsxRuntimeExports.jsx(Icon,{asChild:!0,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 opacity-50"})})]}));SelectTrigger.displayName=Trigger.displayName;const SelectScrollUpButton=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(ScrollUpButton,{ref:tr,className:cn$1("flex cursor-default items-center justify-center py-1",er),..._e,children:jsxRuntimeExports.jsx(ChevronUp,{className:"h-4 w-4"})}));SelectScrollUpButton.displayName=ScrollUpButton.displayName;const SelectScrollDownButton=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(ScrollDownButton,{ref:tr,className:cn$1("flex cursor-default items-center justify-center py-1",er),..._e,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"})}));SelectScrollDownButton.displayName=ScrollDownButton.displayName;const SelectContent=reactExports.forwardRef(({className:er,children:_e,position:tr="popper",...rr},nr)=>jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsxs(Content2$1,{ref:nr,className:cn$1("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",tr==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1 min-w-[var(--radix-select-trigger-width)]",er),position:tr,side:"bottom",align:"start",sideOffset:4,...rr,children:[jsxRuntimeExports.jsx(SelectScrollUpButton,{}),jsxRuntimeExports.jsx(Viewport$1,{className:cn$1("p-1",tr==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:_e}),jsxRuntimeExports.jsx(SelectScrollDownButton,{})]})}));SelectContent.displayName=Content2$1.displayName;const SelectLabel=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Label,{ref:tr,className:cn$1("py-1.5 pl-8 pr-2 text-sm font-semibold",er),..._e}));SelectLabel.displayName=Label.displayName;const SelectItem=reactExports.forwardRef(({className:er,children:_e,...tr},rr)=>jsxRuntimeExports.jsxs(Item,{ref:rr,className:cn$1("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",er),...tr,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(ItemText,{children:_e})]}));SelectItem.displayName=Item.displayName;const SelectSeparator=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Separator,{ref:tr,className:cn$1("-mx-1 my-1 h-px bg-muted",er),..._e}));SelectSeparator.displayName=Separator.displayName;const RecordContentRenderer=({record:er})=>{var nr;const _e=er.type==="quiz"?er.quizData:Array.isArray(er.analysisData)?er.analysisData[0]:er.analysisData,tr=er.type==="quiz"?`Quiz Results - ${er.fileName}`:`Study Analysis - ${er.fileName}`;if(!_e)return null;const rr=er.timestamp.toDate().toLocaleDateString();return jsxRuntimeExports.jsxs("div",{id:`record-content-${er.id}`,className:"p-8 bg-white text-black max-w-4xl mx-auto",style:{fontFamily:"Noto Sans Tamil, Arial, sans-serif",fontSize:"12pt",lineHeight:"1.5",width:"800px",minHeight:"1100px"},children:[jsxRuntimeExports.jsx("h1",{style:{fontSize:"24pt",fontWeight:"bold",marginBottom:"1rem"},children:tr}),jsxRuntimeExports.jsxs("p",{style:{marginBottom:"0.5rem"},children:["**Date:** ",rr]}),jsxRuntimeExports.jsxs("p",{style:{marginBottom:"1rem"},children:["**Difficulty:** ",(nr=er.difficulty)==null?void 0:nr.toUpperCase()," | **Language:** ",er.language==="tamil"?"":"English"]}),er.type==="analysis"&&_e&&_e&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"2rem",borderTop:"1px solid #ccc",paddingTop:"1rem"},children:[jsxRuntimeExports.jsx("h2",{style:{fontSize:"18pt",fontWeight:"bold",marginBottom:"0.5rem"},children:_e.mainTopic||"Analysis Summary"}),jsxRuntimeExports.jsx("h3",{style:{fontSize:"14pt",fontWeight:"bold",marginTop:"1rem"},children:"Summary:"}),jsxRuntimeExports.jsx("p",{children:_e.summary}),jsxRuntimeExports.jsx("h3",{style:{fontSize:"14pt",fontWeight:"bold",marginTop:"1rem"},children:"Study Points:"}),jsxRuntimeExports.jsx("ul",{style:{paddingLeft:"20px"},children:_e.studyPoints&&_e.studyPoints.map((sr,ir)=>jsxRuntimeExports.jsxs("li",{style:{marginBottom:"1rem",borderBottom:"1px dotted #eee",paddingBottom:"0.5rem"},children:[jsxRuntimeExports.jsx("p",{style:{fontWeight:"bold",color:"#333"},children:sr.title}),jsxRuntimeExports.jsx("p",{style:{marginLeft:"10px",fontSize:"11pt"},children:sr.description}),jsxRuntimeExports.jsxs("p",{style:{marginLeft:"10px",fontStyle:"italic",color:"#007bff"},children:[" Tip: ",sr.memoryTip]})]},ir))})]}),er.type==="quiz"&&_e&&_e.answers&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"2rem",borderTop:"1px solid #ccc",paddingTop:"1rem"},children:[jsxRuntimeExports.jsxs("h2",{style:{fontSize:"18pt",fontWeight:"bold",marginBottom:"0.5rem"},children:["Score: ",_e.score,"/",_e.totalQuestions," (",_e.percentage,"%)"]}),_e.answers.map((sr,ir)=>jsxRuntimeExports.jsxs("div",{style:{marginBottom:"1rem",padding:"0.5rem",border:`1px solid ${sr.isCorrect?"green":"red"}`},children:[jsxRuntimeExports.jsxs("p",{style:{fontWeight:"bold",color:sr.isCorrect?"green":"red"},children:[ir+1,". ",sr.question.question]}),jsxRuntimeExports.jsxs("p",{style:{marginLeft:"10px",fontSize:"11pt"},children:["Your Answer: **",sr.userAnswer,"** | Correct: **",sr.correctAnswer,"**"]}),jsxRuntimeExports.jsxs("p",{style:{marginLeft:"10px",fontStyle:"italic"},children:["Explanation: ",sr.question.explanation]})]},ir))]})]})},StudyHistory=()=>{const[er]=useAuthState(auth),[_e,tr]=reactExports.useState([]),[rr,nr]=reactExports.useState([]),[sr,ir]=reactExports.useState(!0),[or,ar]=reactExports.useState("all"),[lr,cr]=reactExports.useState("all"),[Ar,ur]=reactExports.useState("all"),[dr,mr]=reactExports.useState(""),[pr,yr]=reactExports.useState(null),{setQuestionResult:hr,setDifficulty:gr,setOutputLanguage:Cr}=useAppContext();reactExports.useEffect(()=>{er?Sr():ir(!1)},[er]),reactExports.useEffect(()=>{Tr()},[_e,or,lr,Ar,dr]);const Tr=()=>{let Qr=[..._e];or!=="all"&&(Qr=Qr.filter(Ur=>Ur.type===or)),lr!=="all"&&(Qr=Qr.filter(Ur=>Ur.difficulty===lr)),Ar!=="all"&&(Qr=Qr.filter(Ur=>Ur.language===Ar)),dr.trim()&&(Qr=Qr.filter(Ur=>{var Vr;return((Vr=Ur.fileName)==null?void 0:Vr.toLowerCase().includes(dr.toLowerCase()))||Ur.type.toLowerCase().includes(dr.toLowerCase())})),nr(Qr)},Sr=async()=>{if(er)try{ir(!0);const Ur=(await getStudyHistory(er.uid)).map(Vr=>({...Vr,timestamp:Vr.timestamp}));tr(Ur)}catch(Qr){console.error("Error fetching study history:",Qr),Jt$2.error("Failed to load study history")}finally{ir(!1)}},Nr=async Qr=>{const Ur=document.querySelector(`#record-content-${Qr.id}`);if(!Ur){Jt$2.error("Error: Content rendering failed for download. Element not found.");return}try{Jt$2.info("Capturing content for PDF generation...");const Wr=(await html2canvas(Ur,{scale:2,useCORS:!0,windowWidth:Ur.scrollWidth,windowHeight:Ur.scrollHeight})).toDataURL("image/jpeg",1),Hr=`${Qr.type==="quiz"?"Quiz-Results":"Analysis"}-${Qr.fileName||"Data"}-${Qr.timestamp.toDate().toLocaleDateString()}`;await downloadImageAsPDF({title:Hr,base64Image:Wr}),Jt$2.success("Downloaded successfully!")}catch(Vr){console.error("Download error:",Vr),Jt$2.error("Failed to download PDF. Please ensure 'html2canvas' is installed and check console for errors.")}},_r=async Qr=>{try{const Ur=_e.find(Vr=>Vr.id===Qr);await deleteStudyHistory(Qr,Ur==null?void 0:Ur.fileUrls),tr(Vr=>Vr.filter(Wr=>Wr.id!==Qr)),Jt$2.success("Record deleted successfully")}catch{Jt$2.error("Failed to delete record")}},vr=async Qr=>{var Ur;if(!Qr.analysisData){Jt$2.error("Cannot retake quiz: Original analysis data not found");return}yr(Qr.id);try{const Vr=await generateQuestions([{keyPoints:Qr.analysisData.keyPoints||[],studyPoints:Qr.analysisData.studyPoints||[],summary:Qr.analysisData.summary||"",tnpscRelevance:"TNPSC relevant content",tnpscCategories:Qr.analysisData.tnpscCategories||[],mainTopic:Qr.analysisData.mainTopic||"Study Material"}],Qr.difficulty,Qr.language);hr({...Vr,totalQuestions:((Ur=Vr.questions)==null?void 0:Ur.length)||0}),gr(Qr.difficulty),Cr(Qr.language),Jt$2.success("New quiz generated! Starting quiz...")}catch(Vr){console.error("Error generating retake quiz:",Vr),Jt$2.error("Failed to generate new quiz. Please try again.")}finally{yr(null)}},br=()=>{ar("all"),cr("all"),ur("all"),mr("")},Pr=(Qr,Ur)=>{const Vr=Qr/Ur*100;return Vr>=80?"text-green-600 bg-green-50":Vr>=60?"text-blue-600 bg-blue-50":Vr>=40?"text-orange-600 bg-orange-50":"text-red-600 bg-red-50"},Er=Qr=>{const Ur=_e.map(Vr=>Vr[Qr]).filter(Boolean);return[...new Set(Ur)]},Rr=rr.filter(Qr=>Qr.type==="analysis"),Ir=rr.filter(Qr=>Qr.type==="quiz");return!er&&!sr?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs(Card,{className:"p-8 max-w-md mx-auto text-center",children:[jsxRuntimeExports.jsx(History,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Login Required"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Please login to view your study history."})]})}):sr?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Loading your study history..."})]})}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-purple-400/20 to-pink-400/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-cyan-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/3 left-1/3 w-64 h-64 bg-gradient-to-br from-green-400/15 to-emerald-400/15 rounded-full blur-3xl animate-pulse",style:{animationDelay:"4s"}}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-64 h-64 bg-gradient-to-br from-orange-400/15 to-yellow-400/15 rounded-full blur-3xl animate-pulse",style:{animationDelay:"6s"}})]}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,zIndex:-100,opacity:0,pointerEvents:"none",height:"auto",width:"100%"},children:_e.map(Qr=>jsxRuntimeExports.jsx(RecordContentRenderer,{record:Qr},`renderer-${Qr.id}`))}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-6 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 animate-fadeInUp",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg shadow-lg",children:jsxRuntimeExports.jsx(History,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold gradient-text",children:"Study History"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Track your learning progress and access previous study sessions"}),jsxRuntimeExports.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 stagger-animation",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl text-white shadow-lg hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:_e.length}),jsxRuntimeExports.jsx("div",{className:"text-sm opacity-90",children:"Total Sessions"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-400 to-green-600 rounded-xl text-white shadow-lg hover-lift",style:{animationDelay:"0.1s"},children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:Rr.length}),jsxRuntimeExports.jsx("div",{className:"text-sm opacity-90",children:"Analyses"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-400 to-purple-600 rounded-xl text-white shadow-lg hover-lift",style:{animationDelay:"0.2s"},children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:Ir.length}),jsxRuntimeExports.jsx("div",{className:"text-sm opacity-90",children:"Quizzes"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-400 to-orange-600 rounded-xl text-white shadow-lg hover-lift",style:{animationDelay:"0.3s"},children:[jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(Ir.reduce((Qr,Ur)=>Qr+(Ur.score||0)/(Ur.totalQuestions||1),0)/Math.max(Ir.length,1)*100)||0,"%"]}),jsxRuntimeExports.jsx("div",{className:"text-sm opacity-90",children:"Avg Score"})]})]})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-md",children:jsxRuntimeExports.jsx(Filter$1,{className:"h-5 w-5 text-white"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold gradient-text",children:"Filter & Search"}),jsxRuntimeExports.jsxs(Button,{onClick:br,variant:"outline",size:"sm",className:"ml-auto btn-secondary",children:[jsxRuntimeExports.jsx(RefreshCw,{className:"h-4 w-4 mr-2"}),"Clear All"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-800",children:"Session Type"}),jsxRuntimeExports.jsxs(Select,{value:or,onValueChange:Qr=>ar(Qr),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"input-elegant h-12 bg-white/95 backdrop-blur-sm border-2 hover:border-blue-400 transition-all relative",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"All Types"})}),jsxRuntimeExports.jsxs(SelectContent,{className:"bg-white/98 backdrop-blur-sm shadow-2xl border-2 z-[100]",position:"popper",side:"bottom",align:"start",sideOffset:4,children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",className:"hover:bg-blue-50",children:" All Types"}),jsxRuntimeExports.jsx(SelectItem,{value:"analysis",className:"hover:bg-green-50",children:" Document Analysis"}),jsxRuntimeExports.jsx(SelectItem,{value:"quiz",className:"hover:bg-purple-50",children:" Quiz Sessions"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-800",children:"Difficulty Level"}),jsxRuntimeExports.jsxs(Select,{value:lr,onValueChange:cr,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"input-elegant h-12 bg-white/95 backdrop-blur-sm border-2 hover:border-green-400 transition-all relative",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"All Difficulties"})}),jsxRuntimeExports.jsxs(SelectContent,{className:"bg-white/98 backdrop-blur-sm shadow-2xl border-2 z-[100]",position:"popper",side:"bottom",align:"start",sideOffset:4,children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",className:"hover:bg-gray-50",children:" All Levels"}),Er("difficulty").map(Qr=>jsxRuntimeExports.jsxs(SelectItem,{value:Qr,className:"hover:bg-orange-50",children:[Qr==="easy"&&"",Qr==="medium"&&"",Qr==="hard"&&"",Qr==="very-hard"&&""," ",Qr.toUpperCase()]},Qr))]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-800",children:"Language"}),jsxRuntimeExports.jsxs(Select,{value:Ar,onValueChange:ur,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"input-elegant h-12 bg-white/95 backdrop-blur-sm border-2 hover:border-purple-400 transition-all relative",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"All Languages"})}),jsxRuntimeExports.jsxs(SelectContent,{className:"bg-white/98 backdrop-blur-sm shadow-2xl border-2 z-[100]",position:"popper",side:"bottom",align:"start",sideOffset:4,children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",className:"hover:bg-gray-50",children:" All Languages"}),Er("language").map(Qr=>jsxRuntimeExports.jsx(SelectItem,{value:Qr,className:"hover:bg-indigo-50",children:Qr==="tamil"?" ":" English"},Qr))]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-800",children:"Search Files"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),jsxRuntimeExports.jsx(Input,{placeholder:"Search by filename...",value:dr,onChange:Qr=>mr(Qr.target.value),className:"input-elegant h-12 pl-12 bg-white/80 backdrop-blur-sm"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-200",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[" Showing ",jsxRuntimeExports.jsx("span",{className:"text-blue-600 font-bold",children:rr.length})," of ",jsxRuntimeExports.jsx("span",{className:"text-purple-600 font-bold",children:_e.length})," records"]}),rr.length!==_e.length&&jsxRuntimeExports.jsx(Badge,{className:"bg-gradient-to-r from-orange-400 to-red-500 text-white shadow-md",children:"Filtered"})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:rr.length===0?_e.length===0?jsxRuntimeExports.jsxs(Card,{className:"p-8 text-center bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsx(FileText,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Study History"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Start analyzing documents and taking quizzes to build your study history."})]}):jsxRuntimeExports.jsxs(Card,{className:"p-8 text-center bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsx(Filter$1,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Records Found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"No records match your current filters. Try adjusting your search criteria."}),jsxRuntimeExports.jsx(Button,{onClick:br,className:"mt-4",children:"Clear All Filters"})]}):rr.map((Qr,Ur)=>jsxRuntimeExports.jsx(Card,{className:"glass-card p-6 hover-lift animate-fadeInUp",style:{animationDelay:`${Ur*.1}s`},children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Qr.type==="quiz"?jsxRuntimeExports.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg shadow-md",children:jsxRuntimeExports.jsx(Trophy,{className:"h-4 w-4 text-white"})}):jsxRuntimeExports.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-lg shadow-md",children:jsxRuntimeExports.jsx(FileText,{className:"h-4 w-4 text-white"})}),jsxRuntimeExports.jsx("h3",{className:"font-semibold gradient-text",children:Qr.type==="quiz"?"Quiz Session":"Document Analysis"}),Qr.fileName&&jsxRuntimeExports.jsx(Badge,{className:"bg-gradient-to-r from-gray-400 to-gray-600 text-white text-xs shadow-md",children:Qr.fileName})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 glass-card px-3 py-1",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-4 w-4"}),Qr.timestamp.toDate().toLocaleDateString()," at ",Qr.timestamp.toDate().toLocaleTimeString()]}),jsxRuntimeExports.jsx(Badge,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-md",children:Qr.difficulty.toUpperCase()}),jsxRuntimeExports.jsx(Badge,{className:"bg-gradient-to-r from-green-400 to-emerald-500 text-white shadow-md",children:Qr.language==="tamil"?" ":" English"})]}),Qr.type==="quiz"&&Qr.score!==void 0&&jsxRuntimeExports.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium shadow-md ${Pr(Qr.score,Qr.totalQuestions||1)}`,children:[jsxRuntimeExports.jsx(Trophy,{className:"h-4 w-4"}),"Score: ",Qr.score,"/",Qr.totalQuestions," (",Math.round(Qr.score/(Qr.totalQuestions||1)*100),"%)"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-wrap",children:[Qr.type==="analysis"&&Qr.analysisData&&jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>vr(Qr),disabled:pr===Qr.id,className:"flex items-center gap-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white border-0 transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl",children:pr===Qr.id?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Generating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Play,{className:"h-4 w-4"}),"Retake Quiz"]})}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>Nr(Qr),className:"flex items-center gap-2 btn-secondary",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"}),"Download"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>_r(Qr.id),className:"flex items-center gap-2 text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200 hover:border-red-300 transform hover:scale-105 transition-all duration-300",children:[jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"}),"Delete"]})]})]})},Qr.id))})]})})]})},UserProfile=()=>{const[er]=useAuthState(auth),[_e,tr]=reactExports.useState(!1),[rr,nr]=reactExports.useState((er==null?void 0:er.displayName)||""),[sr,ir]=reactExports.useState({documentsAnalyzed:0,quizzesCompleted:0,averageScore:0,studyStreak:0});reactExports.useEffect(()=>{(async()=>{if(er)try{const lr=await getStudyHistory(er.uid),cr=lr.filter(mr=>mr.type==="analysis").length,Ar=lr.filter(mr=>mr.type==="quiz").length,ur=lr.filter(mr=>mr.type==="quiz"&&mr.score!==void 0),dr=ur.length>0?Math.round(ur.reduce((mr,pr)=>mr+(pr.score||0)/(pr.totalQuestions||1),0)/ur.length*100):0;ir({documentsAnalyzed:cr,quizzesCompleted:Ar,averageScore:dr,studyStreak:Math.min(7,lr.length)})}catch(lr){console.error("Error fetching user stats:",lr)}})()},[er]);const or=()=>{Jt$2.success("Profile updated successfully!"),tr(!1)};return er?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full",children:jsxRuntimeExports.jsx(User$1,{className:"h-8 w-8 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"User Profile"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"phone",children:"Phone Number"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx(Phone,{className:"h-4 w-4 text-gray-500"}),jsxRuntimeExports.jsx(Input,{id:"phone",value:er.phoneNumber||"",disabled:!0,className:"bg-gray-50"}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-green-600 border-green-200",children:"Verified"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"displayName",children:"Display Name"}),jsxRuntimeExports.jsx(Input,{id:"displayName",value:rr,onChange:ar=>nr(ar.target.value),placeholder:"Enter your name",disabled:!_e,className:_e?"":"bg-gray-50"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{children:"Account Created"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-4 w-4 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-700",children:er.metadata.creationTime?new Date(er.metadata.creationTime).toLocaleDateString():"N/A"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{children:"Last Sign In"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-700",children:er.metadata.lastSignInTime?new Date(er.metadata.lastSignInTime).toLocaleDateString():"N/A"})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-4 pt-4 border-t border-gray-200",children:_e?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{onClick:or,className:"bg-gradient-to-r from-green-600 to-blue-600",children:"Save Changes"}),jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>tr(!1),children:"Cancel"})]}):jsxRuntimeExports.jsx(Button,{onClick:()=>tr(!0),variant:"outline",children:"Edit Profile"})})]})]}),jsxRuntimeExports.jsxs(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Trophy,{className:"h-5 w-5 text-yellow-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Study Statistics"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:sr.documentsAnalyzed}),jsxRuntimeExports.jsx("div",{className:"text-sm text-blue-700",children:"Documents Analyzed"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-green-600",children:sr.quizzesCompleted}),jsxRuntimeExports.jsx("div",{className:"text-sm text-green-700",children:"Quizzes Completed"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[sr.averageScore,"%"]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-purple-700",children:"Average Score"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-orange-600",children:sr.studyStreak}),jsxRuntimeExports.jsx("div",{className:"text-sm text-orange-700",children:"Study Streak"})]})]})]}),jsxRuntimeExports.jsxs(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Target,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Study Preferences"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{children:"Preferred Difficulty"}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx(Badge,{className:"bg-gradient-to-r from-yellow-500 to-orange-600 text-white",children:"MEDIUM"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{children:"Preferred Language"}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx(Badge,{variant:"outline",children:" English"})})]})]})]})]})})}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs(Card,{className:"p-8 max-w-md mx-auto text-center",children:[jsxRuntimeExports.jsx(User$1,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Login Required"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Please login to view your profile."})]})})};function useStateMachine(er,_e){return reactExports.useReducer((tr,rr)=>_e[tr][rr]??tr,er)}var SCROLL_AREA_NAME="ScrollArea",[createScrollAreaContext,createScrollAreaScope]=createContextScope$3(SCROLL_AREA_NAME),[ScrollAreaProvider,useScrollAreaContext]=createScrollAreaContext(SCROLL_AREA_NAME),ScrollArea$1=reactExports.forwardRef((er,_e)=>{const{__scopeScrollArea:tr,type:rr="hover",dir:nr,scrollHideDelay:sr=600,...ir}=er,[or,ar]=reactExports.useState(null),[lr,cr]=reactExports.useState(null),[Ar,ur]=reactExports.useState(null),[dr,mr]=reactExports.useState(null),[pr,yr]=reactExports.useState(null),[hr,gr]=reactExports.useState(0),[Cr,Tr]=reactExports.useState(0),[Sr,Nr]=reactExports.useState(!1),[_r,vr]=reactExports.useState(!1),br=useComposedRefs(_e,Er=>ar(Er)),Pr=useDirection(nr);return jsxRuntimeExports.jsx(ScrollAreaProvider,{scope:tr,type:rr,dir:Pr,scrollHideDelay:sr,scrollArea:or,viewport:lr,onViewportChange:cr,content:Ar,onContentChange:ur,scrollbarX:dr,onScrollbarXChange:mr,scrollbarXEnabled:Sr,onScrollbarXEnabledChange:Nr,scrollbarY:pr,onScrollbarYChange:yr,scrollbarYEnabled:_r,onScrollbarYEnabledChange:vr,onCornerWidthChange:gr,onCornerHeightChange:Tr,children:jsxRuntimeExports.jsx(Primitive.div,{dir:Pr,...ir,ref:br,style:{position:"relative","--radix-scroll-area-corner-width":hr+"px","--radix-scroll-area-corner-height":Cr+"px",...er.style}})})});ScrollArea$1.displayName=SCROLL_AREA_NAME;var VIEWPORT_NAME="ScrollAreaViewport",ScrollAreaViewport=reactExports.forwardRef((er,_e)=>{const{__scopeScrollArea:tr,children:rr,asChild:nr,nonce:sr,...ir}=er,or=useScrollAreaContext(VIEWPORT_NAME,tr),ar=reactExports.useRef(null),lr=useComposedRefs(_e,ar,or.onViewportChange);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:sr}),jsxRuntimeExports.jsx(Primitive.div,{"data-radix-scroll-area-viewport":"",...ir,asChild:nr,ref:lr,style:{overflowX:or.scrollbarXEnabled?"scroll":"hidden",overflowY:or.scrollbarYEnabled?"scroll":"hidden",...er.style},children:getSubtree({asChild:nr,children:rr},cr=>jsxRuntimeExports.jsx("div",{"data-radix-scroll-area-content":"",ref:or.onContentChange,style:{minWidth:or.scrollbarXEnabled?"fit-content":void 0},children:cr}))})]})});ScrollAreaViewport.displayName=VIEWPORT_NAME;var SCROLLBAR_NAME="ScrollAreaScrollbar",ScrollAreaScrollbar=reactExports.forwardRef((er,_e)=>{const{forceMount:tr,...rr}=er,nr=useScrollAreaContext(SCROLLBAR_NAME,er.__scopeScrollArea),{onScrollbarXEnabledChange:sr,onScrollbarYEnabledChange:ir}=nr,or=er.orientation==="horizontal";return reactExports.useEffect(()=>(or?sr(!0):ir(!0),()=>{or?sr(!1):ir(!1)}),[or,sr,ir]),nr.type==="hover"?jsxRuntimeExports.jsx(ScrollAreaScrollbarHover,{...rr,ref:_e,forceMount:tr}):nr.type==="scroll"?jsxRuntimeExports.jsx(ScrollAreaScrollbarScroll,{...rr,ref:_e,forceMount:tr}):nr.type==="auto"?jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{...rr,ref:_e,forceMount:tr}):nr.type==="always"?jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{...rr,ref:_e}):null});ScrollAreaScrollbar.displayName=SCROLLBAR_NAME;var ScrollAreaScrollbarHover=reactExports.forwardRef((er,_e)=>{const{forceMount:tr,...rr}=er,nr=useScrollAreaContext(SCROLLBAR_NAME,er.__scopeScrollArea),[sr,ir]=reactExports.useState(!1);return reactExports.useEffect(()=>{const or=nr.scrollArea;let ar=0;if(or){const lr=()=>{window.clearTimeout(ar),ir(!0)},cr=()=>{ar=window.setTimeout(()=>ir(!1),nr.scrollHideDelay)};return or.addEventListener("pointerenter",lr),or.addEventListener("pointerleave",cr),()=>{window.clearTimeout(ar),or.removeEventListener("pointerenter",lr),or.removeEventListener("pointerleave",cr)}}},[nr.scrollArea,nr.scrollHideDelay]),jsxRuntimeExports.jsx(Presence,{present:tr||sr,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{"data-state":sr?"visible":"hidden",...rr,ref:_e})})}),ScrollAreaScrollbarScroll=reactExports.forwardRef((er,_e)=>{const{forceMount:tr,...rr}=er,nr=useScrollAreaContext(SCROLLBAR_NAME,er.__scopeScrollArea),sr=er.orientation==="horizontal",ir=useDebounceCallback(()=>ar("SCROLL_END"),100),[or,ar]=useStateMachine("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return reactExports.useEffect(()=>{if(or==="idle"){const lr=window.setTimeout(()=>ar("HIDE"),nr.scrollHideDelay);return()=>window.clearTimeout(lr)}},[or,nr.scrollHideDelay,ar]),reactExports.useEffect(()=>{const lr=nr.viewport,cr=sr?"scrollLeft":"scrollTop";if(lr){let Ar=lr[cr];const ur=()=>{const dr=lr[cr];Ar!==dr&&(ar("SCROLL"),ir()),Ar=dr};return lr.addEventListener("scroll",ur),()=>lr.removeEventListener("scroll",ur)}},[nr.viewport,sr,ar,ir]),jsxRuntimeExports.jsx(Presence,{present:tr||or!=="hidden",children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":or==="hidden"?"hidden":"visible",...rr,ref:_e,onPointerEnter:composeEventHandlers$1(er.onPointerEnter,()=>ar("POINTER_ENTER")),onPointerLeave:composeEventHandlers$1(er.onPointerLeave,()=>ar("POINTER_LEAVE"))})})}),ScrollAreaScrollbarAuto=reactExports.forwardRef((er,_e)=>{const tr=useScrollAreaContext(SCROLLBAR_NAME,er.__scopeScrollArea),{forceMount:rr,...nr}=er,[sr,ir]=reactExports.useState(!1),or=er.orientation==="horizontal",ar=useDebounceCallback(()=>{if(tr.viewport){const lr=tr.viewport.offsetWidth<tr.viewport.scrollWidth,cr=tr.viewport.offsetHeight<tr.viewport.scrollHeight;ir(or?lr:cr)}},10);return useResizeObserver(tr.viewport,ar),useResizeObserver(tr.content,ar),jsxRuntimeExports.jsx(Presence,{present:rr||sr,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":sr?"visible":"hidden",...nr,ref:_e})})}),ScrollAreaScrollbarVisible=reactExports.forwardRef((er,_e)=>{const{orientation:tr="vertical",...rr}=er,nr=useScrollAreaContext(SCROLLBAR_NAME,er.__scopeScrollArea),sr=reactExports.useRef(null),ir=reactExports.useRef(0),[or,ar]=reactExports.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),lr=getThumbRatio(or.viewport,or.content),cr={...rr,sizes:or,onSizesChange:ar,hasThumb:lr>0&&lr<1,onThumbChange:ur=>sr.current=ur,onThumbPointerUp:()=>ir.current=0,onThumbPointerDown:ur=>ir.current=ur};function Ar(ur,dr){return getScrollPositionFromPointer(ur,ir.current,or,dr)}return tr==="horizontal"?jsxRuntimeExports.jsx(ScrollAreaScrollbarX,{...cr,ref:_e,onThumbPositionChange:()=>{if(nr.viewport&&sr.current){const ur=nr.viewport.scrollLeft,dr=getThumbOffsetFromScroll(ur,or,nr.dir);sr.current.style.transform=`translate3d(${dr}px, 0, 0)`}},onWheelScroll:ur=>{nr.viewport&&(nr.viewport.scrollLeft=ur)},onDragScroll:ur=>{nr.viewport&&(nr.viewport.scrollLeft=Ar(ur,nr.dir))}}):tr==="vertical"?jsxRuntimeExports.jsx(ScrollAreaScrollbarY,{...cr,ref:_e,onThumbPositionChange:()=>{if(nr.viewport&&sr.current){const ur=nr.viewport.scrollTop,dr=getThumbOffsetFromScroll(ur,or);sr.current.style.transform=`translate3d(0, ${dr}px, 0)`}},onWheelScroll:ur=>{nr.viewport&&(nr.viewport.scrollTop=ur)},onDragScroll:ur=>{nr.viewport&&(nr.viewport.scrollTop=Ar(ur))}}):null}),ScrollAreaScrollbarX=reactExports.forwardRef((er,_e)=>{const{sizes:tr,onSizesChange:rr,...nr}=er,sr=useScrollAreaContext(SCROLLBAR_NAME,er.__scopeScrollArea),[ir,or]=reactExports.useState(),ar=reactExports.useRef(null),lr=useComposedRefs(_e,ar,sr.onScrollbarXChange);return reactExports.useEffect(()=>{ar.current&&or(getComputedStyle(ar.current))},[ar]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"horizontal",...nr,ref:lr,sizes:tr,style:{bottom:0,left:sr.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:sr.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":getThumbSize(tr)+"px",...er.style},onThumbPointerDown:cr=>er.onThumbPointerDown(cr.x),onDragScroll:cr=>er.onDragScroll(cr.x),onWheelScroll:(cr,Ar)=>{if(sr.viewport){const ur=sr.viewport.scrollLeft+cr.deltaX;er.onWheelScroll(ur),isScrollingWithinScrollbarBounds(ur,Ar)&&cr.preventDefault()}},onResize:()=>{ar.current&&sr.viewport&&ir&&rr({content:sr.viewport.scrollWidth,viewport:sr.viewport.offsetWidth,scrollbar:{size:ar.current.clientWidth,paddingStart:toInt(ir.paddingLeft),paddingEnd:toInt(ir.paddingRight)}})}})}),ScrollAreaScrollbarY=reactExports.forwardRef((er,_e)=>{const{sizes:tr,onSizesChange:rr,...nr}=er,sr=useScrollAreaContext(SCROLLBAR_NAME,er.__scopeScrollArea),[ir,or]=reactExports.useState(),ar=reactExports.useRef(null),lr=useComposedRefs(_e,ar,sr.onScrollbarYChange);return reactExports.useEffect(()=>{ar.current&&or(getComputedStyle(ar.current))},[ar]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"vertical",...nr,ref:lr,sizes:tr,style:{top:0,right:sr.dir==="ltr"?0:void 0,left:sr.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":getThumbSize(tr)+"px",...er.style},onThumbPointerDown:cr=>er.onThumbPointerDown(cr.y),onDragScroll:cr=>er.onDragScroll(cr.y),onWheelScroll:(cr,Ar)=>{if(sr.viewport){const ur=sr.viewport.scrollTop+cr.deltaY;er.onWheelScroll(ur),isScrollingWithinScrollbarBounds(ur,Ar)&&cr.preventDefault()}},onResize:()=>{ar.current&&sr.viewport&&ir&&rr({content:sr.viewport.scrollHeight,viewport:sr.viewport.offsetHeight,scrollbar:{size:ar.current.clientHeight,paddingStart:toInt(ir.paddingTop),paddingEnd:toInt(ir.paddingBottom)}})}})}),[ScrollbarProvider,useScrollbarContext]=createScrollAreaContext(SCROLLBAR_NAME),ScrollAreaScrollbarImpl=reactExports.forwardRef((er,_e)=>{const{__scopeScrollArea:tr,sizes:rr,hasThumb:nr,onThumbChange:sr,onThumbPointerUp:ir,onThumbPointerDown:or,onThumbPositionChange:ar,onDragScroll:lr,onWheelScroll:cr,onResize:Ar,...ur}=er,dr=useScrollAreaContext(SCROLLBAR_NAME,tr),[mr,pr]=reactExports.useState(null),yr=useComposedRefs(_e,br=>pr(br)),hr=reactExports.useRef(null),gr=reactExports.useRef(""),Cr=dr.viewport,Tr=rr.content-rr.viewport,Sr=useCallbackRef$1(cr),Nr=useCallbackRef$1(ar),_r=useDebounceCallback(Ar,10);function vr(br){if(hr.current){const Pr=br.clientX-hr.current.left,Er=br.clientY-hr.current.top;lr({x:Pr,y:Er})}}return reactExports.useEffect(()=>{const br=Pr=>{const Er=Pr.target;(mr==null?void 0:mr.contains(Er))&&Sr(Pr,Tr)};return document.addEventListener("wheel",br,{passive:!1}),()=>document.removeEventListener("wheel",br,{passive:!1})},[Cr,mr,Tr,Sr]),reactExports.useEffect(Nr,[rr,Nr]),useResizeObserver(mr,_r),useResizeObserver(dr.content,_r),jsxRuntimeExports.jsx(ScrollbarProvider,{scope:tr,scrollbar:mr,hasThumb:nr,onThumbChange:useCallbackRef$1(sr),onThumbPointerUp:useCallbackRef$1(ir),onThumbPositionChange:Nr,onThumbPointerDown:useCallbackRef$1(or),children:jsxRuntimeExports.jsx(Primitive.div,{...ur,ref:yr,style:{position:"absolute",...ur.style},onPointerDown:composeEventHandlers$1(er.onPointerDown,br=>{br.button===0&&(br.target.setPointerCapture(br.pointerId),hr.current=mr.getBoundingClientRect(),gr.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",dr.viewport&&(dr.viewport.style.scrollBehavior="auto"),vr(br))}),onPointerMove:composeEventHandlers$1(er.onPointerMove,vr),onPointerUp:composeEventHandlers$1(er.onPointerUp,br=>{const Pr=br.target;Pr.hasPointerCapture(br.pointerId)&&Pr.releasePointerCapture(br.pointerId),document.body.style.webkitUserSelect=gr.current,dr.viewport&&(dr.viewport.style.scrollBehavior=""),hr.current=null})})})}),THUMB_NAME="ScrollAreaThumb",ScrollAreaThumb=reactExports.forwardRef((er,_e)=>{const{forceMount:tr,...rr}=er,nr=useScrollbarContext(THUMB_NAME,er.__scopeScrollArea);return jsxRuntimeExports.jsx(Presence,{present:tr||nr.hasThumb,children:jsxRuntimeExports.jsx(ScrollAreaThumbImpl,{ref:_e,...rr})})}),ScrollAreaThumbImpl=reactExports.forwardRef((er,_e)=>{const{__scopeScrollArea:tr,style:rr,...nr}=er,sr=useScrollAreaContext(THUMB_NAME,tr),ir=useScrollbarContext(THUMB_NAME,tr),{onThumbPositionChange:or}=ir,ar=useComposedRefs(_e,Ar=>ir.onThumbChange(Ar)),lr=reactExports.useRef(),cr=useDebounceCallback(()=>{lr.current&&(lr.current(),lr.current=void 0)},100);return reactExports.useEffect(()=>{const Ar=sr.viewport;if(Ar){const ur=()=>{if(cr(),!lr.current){const dr=addUnlinkedScrollListener(Ar,or);lr.current=dr,or()}};return or(),Ar.addEventListener("scroll",ur),()=>Ar.removeEventListener("scroll",ur)}},[sr.viewport,cr,or]),jsxRuntimeExports.jsx(Primitive.div,{"data-state":ir.hasThumb?"visible":"hidden",...nr,ref:ar,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...rr},onPointerDownCapture:composeEventHandlers$1(er.onPointerDownCapture,Ar=>{const dr=Ar.target.getBoundingClientRect(),mr=Ar.clientX-dr.left,pr=Ar.clientY-dr.top;ir.onThumbPointerDown({x:mr,y:pr})}),onPointerUp:composeEventHandlers$1(er.onPointerUp,ir.onThumbPointerUp)})});ScrollAreaThumb.displayName=THUMB_NAME;var CORNER_NAME="ScrollAreaCorner",ScrollAreaCorner=reactExports.forwardRef((er,_e)=>{const tr=useScrollAreaContext(CORNER_NAME,er.__scopeScrollArea),rr=!!(tr.scrollbarX&&tr.scrollbarY);return tr.type!=="scroll"&&rr?jsxRuntimeExports.jsx(ScrollAreaCornerImpl,{...er,ref:_e}):null});ScrollAreaCorner.displayName=CORNER_NAME;var ScrollAreaCornerImpl=reactExports.forwardRef((er,_e)=>{const{__scopeScrollArea:tr,...rr}=er,nr=useScrollAreaContext(CORNER_NAME,tr),[sr,ir]=reactExports.useState(0),[or,ar]=reactExports.useState(0),lr=!!(sr&&or);return useResizeObserver(nr.scrollbarX,()=>{var Ar;const cr=((Ar=nr.scrollbarX)==null?void 0:Ar.offsetHeight)||0;nr.onCornerHeightChange(cr),ar(cr)}),useResizeObserver(nr.scrollbarY,()=>{var Ar;const cr=((Ar=nr.scrollbarY)==null?void 0:Ar.offsetWidth)||0;nr.onCornerWidthChange(cr),ir(cr)}),lr?jsxRuntimeExports.jsx(Primitive.div,{...rr,ref:_e,style:{width:sr,height:or,position:"absolute",right:nr.dir==="ltr"?0:void 0,left:nr.dir==="rtl"?0:void 0,bottom:0,...er.style}}):null});function toInt(er){return er?parseInt(er,10):0}function getThumbRatio(er,_e){const tr=er/_e;return isNaN(tr)?0:tr}function getThumbSize(er){const _e=getThumbRatio(er.viewport,er.content),tr=er.scrollbar.paddingStart+er.scrollbar.paddingEnd,rr=(er.scrollbar.size-tr)*_e;return Math.max(rr,18)}function getScrollPositionFromPointer(er,_e,tr,rr="ltr"){const nr=getThumbSize(tr),sr=nr/2,ir=_e||sr,or=nr-ir,ar=tr.scrollbar.paddingStart+ir,lr=tr.scrollbar.size-tr.scrollbar.paddingEnd-or,cr=tr.content-tr.viewport,Ar=rr==="ltr"?[0,cr]:[cr*-1,0];return linearScale([ar,lr],Ar)(er)}function getThumbOffsetFromScroll(er,_e,tr="ltr"){const rr=getThumbSize(_e),nr=_e.scrollbar.paddingStart+_e.scrollbar.paddingEnd,sr=_e.scrollbar.size-nr,ir=_e.content-_e.viewport,or=sr-rr,ar=tr==="ltr"?[0,ir]:[ir*-1,0],lr=clamp(er,ar);return linearScale([0,ir],[0,or])(lr)}function linearScale(er,_e){return tr=>{if(er[0]===er[1]||_e[0]===_e[1])return _e[0];const rr=(_e[1]-_e[0])/(er[1]-er[0]);return _e[0]+rr*(tr-er[0])}}function isScrollingWithinScrollbarBounds(er,_e){return er>0&&er<_e}var addUnlinkedScrollListener=(er,_e=()=>{})=>{let tr={left:er.scrollLeft,top:er.scrollTop},rr=0;return function nr(){const sr={left:er.scrollLeft,top:er.scrollTop},ir=tr.left!==sr.left,or=tr.top!==sr.top;(ir||or)&&_e(),tr=sr,rr=window.requestAnimationFrame(nr)}(),()=>window.cancelAnimationFrame(rr)};function useDebounceCallback(er,_e){const tr=useCallbackRef$1(er),rr=reactExports.useRef(0);return reactExports.useEffect(()=>()=>window.clearTimeout(rr.current),[]),reactExports.useCallback(()=>{window.clearTimeout(rr.current),rr.current=window.setTimeout(tr,_e)},[tr,_e])}function useResizeObserver(er,_e){const tr=useCallbackRef$1(_e);useLayoutEffect2(()=>{let rr=0;if(er){const nr=new ResizeObserver(()=>{cancelAnimationFrame(rr),rr=window.requestAnimationFrame(tr)});return nr.observe(er),()=>{window.cancelAnimationFrame(rr),nr.unobserve(er)}}},[er,tr])}function getSubtree(er,_e){const{asChild:tr,children:rr}=er;if(!tr)return typeof _e=="function"?_e(rr):_e;const nr=reactExports.Children.only(rr);return reactExports.cloneElement(nr,{children:typeof _e=="function"?_e(nr.props.children):_e})}var Root=ScrollArea$1,Viewport=ScrollAreaViewport,Corner=ScrollAreaCorner;const ScrollArea=reactExports.forwardRef(({className:er,children:_e,...tr},rr)=>jsxRuntimeExports.jsxs(Root,{ref:rr,className:cn$1("relative overflow-hidden",er),...tr,children:[jsxRuntimeExports.jsx(Viewport,{className:"h-full w-full rounded-[inherit]",children:_e}),jsxRuntimeExports.jsx(ScrollBar,{}),jsxRuntimeExports.jsx(Corner,{})]}));ScrollArea.displayName=Root.displayName;const ScrollBar=reactExports.forwardRef(({className:er,orientation:_e="vertical",...tr},rr)=>jsxRuntimeExports.jsx(ScrollAreaScrollbar,{ref:rr,orientation:_e,className:cn$1("flex touch-none select-none transition-colors",_e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",_e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",er),...tr,children:jsxRuntimeExports.jsx(ScrollAreaThumb,{className:"relative flex-1 rounded-full bg-border"})}));ScrollBar.displayName=ScrollAreaScrollbar.displayName;const ArivuChatbot=()=>{const[er]=useAuthState(auth),[_e,tr]=reactExports.useState([{id:"1",content:"Hello! I'm Arivu, your intelligent study companion. I have access to your complete study history and can provide personalized guidance. I can help with TNPSC preparation, connect your current questions to previously studied materials, suggest study strategies based on your performance, and much more. What would you like to explore today?",sender:"arivu",timestamp:new Date}]),[rr,nr]=reactExports.useState(""),[sr,ir]=reactExports.useState(!1),[or,ar]=reactExports.useState([]),[lr,cr]=reactExports.useState("english"),Ar=reactExports.useRef(null),ur=reactExports.useRef(null),dr="AIzaSyDQcwO_13vP_dXB3OXBuTDvYfMcLXQIfkM";reactExports.useEffect(()=>{tr(lr==="tamil"?Tr=>Tr.length===1?[{id:"1",content:"!  ,    .      ,    .     ,      ,           .     ?",sender:"arivu",timestamp:new Date}]:Tr:Tr=>Tr.length===1?[{id:"1",content:"Hello! I'm Arivu, your intelligent study companion. I have access to your complete study history and can provide personalized guidance. I can help with TNPSC preparation, connect your current questions to previously studied materials, suggest study strategies based on your performance, and much more. What would you like to explore today?",sender:"arivu",timestamp:new Date}]:Tr)},[lr]);const mr=async()=>{if(!er)return"";try{const Sr=(await getStudyHistory(er.uid)).slice(0,10),Nr=Sr.filter(br=>br.type==="analysis"),_r=Sr.filter(br=>br.type==="quiz");let vr="";if(Nr.length>0&&(vr+=`RECENT STUDY MATERIALS:
`,Nr.slice(0,5).forEach((br,Pr)=>{var Er,Rr,Ir;br.analysisData&&(vr+=`${Pr+1}. ${br.fileName||"Study Material"}
`,vr+=`   Key Topics: ${((Er=br.analysisData.keyPoints)==null?void 0:Er.slice(0,3).join(", "))||"N/A"}
`,vr+=`   Summary: ${((Rr=br.analysisData.summary)==null?void 0:Rr.substring(0,100))||"N/A"}...
`,((Ir=br.analysisData.studyPoints)==null?void 0:Ir.length)>0&&(vr+=`   Study Points: ${br.analysisData.studyPoints.slice(0,2).map(Qr=>Qr.title).join(", ")}
`))}),vr+=`
`),_r.length>0){vr+=`RECENT QUIZ PERFORMANCE:
`,_r.slice(0,3).forEach((Pr,Er)=>{vr+=`${Er+1}. ${Pr.fileName||"Quiz"} - Score: ${Pr.score}/${Pr.totalQuestions} (${Pr.percentage}%)
`,vr+=`   Difficulty: ${Pr.difficulty}, Language: ${Pr.language}
`});const br=Math.round(_r.reduce((Pr,Er)=>Pr+(Er.percentage||0),0)/_r.length);vr+=`   Average Performance: ${br}%

`}if(Sr.length>0){const br=Nr.map(Pr=>{var Er;return((Er=Pr.analysisData)==null?void 0:Er.mainTopic)||Pr.fileName}).filter(Boolean).slice(0,5);if(br.length>0&&(vr+=`RECENT STUDY FOCUS: ${br.join(", ")}
`),_r.length>=2){const Pr=_r.slice(0,3).map(Rr=>Rr.percentage||0),Er=Pr[0]>Pr[1]?"improving":"needs attention";vr+=`PERFORMANCE TREND: ${Er}
`}}return vr}catch(Tr){return console.error("Error fetching study history:",Tr),""}},pr=Tr=>{if(!Tr)return;const Sr=Array.from(Tr),Nr=Sr.filter(_r=>_r.type.startsWith("image/")||_r.type==="application/pdf");Nr.length!==Sr.length&&Jt$2.error("Only image files and PDF files are supported"),ar(_r=>[..._r,...Nr])},yr=Tr=>{ar(Sr=>Sr.filter((Nr,_r)=>_r!==Tr))},hr=Tr=>new Promise((Sr,Nr)=>{const _r=new FileReader;_r.readAsDataURL(Tr),_r.onload=()=>Sr(_r.result),_r.onerror=vr=>Nr(vr)}),gr=async()=>{var Sr,Nr,_r,vr,br;if(!rr.trim()&&or.length===0)return;const Tr={id:Date.now().toString(),content:rr,sender:"user",timestamp:new Date,attachments:or};tr(Pr=>[...Pr,Tr]),nr(""),ir(!0);try{const Pr=_e.slice(-5).map(Hr=>`${Hr.sender==="user"?"User":"Arivu"}: ${Hr.content}`).join(`
`),Er=await mr(),Qr={contents:[{parts:[{text:`You are 'Arivu', an intelligent AI study companion with deep knowledge of the user's learning journey. You can help with:

1. TNPSC (Tamil Nadu Public Service Commission) exam preparation - your primary expertise
2. General knowledge and current affairs
3. Math problems and calculations
4. Science and technology questions
5. History, geography, and social studies
6. Analysis of uploaded documents and images
7. Any other questions users might have

INTELLIGENT FEATURES:
- You have access to the user's complete study history and can reference previous materials
- You can suggest connections between current questions and previously studied topics
- You can provide personalized study recommendations based on past performance
- You can identify knowledge gaps and suggest focused study areas
- You proactively offer relevant suggestions from the user's study database

RESPONSE APPROACH:
- Be helpful, accurate, and conversational
- ALWAYS check if the question relates to previously studied materials and mention connections
- Proactively suggest related topics from the user's study history when relevant
- For TNPSC topics, provide exam-focused content with memory tips
- When users ask general questions, check if they've studied related topics before
- Always be encouraging and supportive
- ${lr==="tamil"?"Please respond in Tamil language using Tamil script.":"Please respond in English language."}
- Provide excellent memory tips and study strategies
- If you notice patterns in their study history, mention them helpfully

${Er?`USER'S STUDY CONTEXT:
${Er}
`:`No previous study history available.
`}

PROACTIVE SUGGESTIONS:
- If the user asks about any topic, immediately check if they've studied related materials before
- Suggest connections: "I see you previously studied [topic], which connects to this because..."
- Offer study tips: "Based on your quiz performance in [subject], I recommend focusing on..."
- Provide memory aids: "Here's a great memory tip for this concept..."
- Reference past materials: "This relates to the [document] you analyzed earlier..."

Conversation history:
${Pr}

User's new message: ${rr}

Remember: Be proactive in connecting current questions to the user's study history and offer relevant suggestions!`}]}],generationConfig:{temperature:.7,maxOutputTokens:2e3}};if(or.length>0){for(const Hr of or)if(Hr.type.startsWith("image/")){const $r=await hr(Hr);Qr.contents[0].parts.push({inline_data:{mime_type:Hr.type,data:$r.split(",")[1]}})}}const Ur=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${dr}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Qr)});if(!Ur.ok)throw new Error(`HTTP error! status: ${Ur.status}`);const Wr=(br=(vr=(_r=(Nr=(Sr=(await Ur.json()).candidates)==null?void 0:Sr[0])==null?void 0:Nr.content)==null?void 0:_r.parts)==null?void 0:vr[0])==null?void 0:br.text;if(Wr){const Hr={id:(Date.now()+1).toString(),content:Wr,sender:"arivu",timestamp:new Date};tr($r=>[...$r,Hr])}else throw new Error("No response from Arivu")}catch(Pr){console.error("Error sending message:",Pr),Jt$2.error("Failed to get response from Arivu. Please try again.");const Er={id:(Date.now()+1).toString(),content:lr==="tamil"?",    .     .":"I'm sorry, I'm having trouble responding right now. Please try again in a moment.",sender:"arivu",timestamp:new Date};tr(Rr=>[...Rr,Er])}finally{ir(!1),ar([])}},Cr=Tr=>{Tr.key==="Enter"&&!Tr.shiftKey&&(Tr.preventDefault(),gr())};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-green-400/20 to-blue-400/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-purple-400/20 to-pink-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-br from-cyan-400/15 to-indigo-400/15 rounded-full blur-3xl animate-pulse",style:{animationDelay:"4s"}}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-1/4 left-1/4 w-64 h-64 bg-gradient-to-br from-yellow-400/15 to-orange-400/15 rounded-full blur-3xl animate-pulse",style:{animationDelay:"6s"}})]}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-6 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsx(Card,{className:"glass-card p-4 md:p-6 mb-6 animate-fadeInUp",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-gradient-to-r from-green-500 to-blue-600 rounded-full shadow-lg",children:jsxRuntimeExports.jsx(MessageCircle,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold gradient-text",children:"Arivu - AI Assistant"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Your intelligent study companion"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-gradient-to-r from-orange-400 to-red-500 rounded-lg shadow-md",children:jsxRuntimeExports.jsx(Languages,{className:"h-4 w-4 text-white"})}),jsxRuntimeExports.jsxs("select",{value:lr,onChange:Tr=>cr(Tr.target.value),className:"input-elegant text-sm py-2 px-3 relative z-10",children:[jsxRuntimeExports.jsx("option",{value:"english",children:"English"}),jsxRuntimeExports.jsx("option",{value:"tamil",children:""})]})]})]})}),jsxRuntimeExports.jsxs(Card,{className:"glass-card animate-fadeInUp",style:{animationDelay:"0.2s"},children:[jsxRuntimeExports.jsx(ScrollArea,{className:"h-[500px] p-4",ref:ur,children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[_e.map((Tr,Sr)=>jsxRuntimeExports.jsxs("div",{className:`flex gap-3 ${Tr.sender==="user"?"justify-end":"justify-start"} animate-fadeInUp`,style:{animationDelay:`${Sr*.1}s`},children:[Tr.sender==="arivu"&&jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-600 rounded-full flex items-center justify-center flex-shrink-0 shadow-lg",children:jsxRuntimeExports.jsx(Brain,{className:"h-4 w-4 text-white"})}),jsxRuntimeExports.jsxs("div",{className:`max-w-[80%] ${Tr.sender==="user"?"order-1":"order-2"}`,children:[jsxRuntimeExports.jsxs("div",{className:`p-3 rounded-2xl backdrop-blur-sm shadow-lg ${Tr.sender==="user"?"bg-gradient-to-r from-blue-600 to-purple-600 text-white ml-auto hover:shadow-xl transition-all duration-300":"bg-white/95 text-gray-800 border border-gray-200/50 hover:shadow-xl transition-all duration-300"}`,children:[jsxRuntimeExports.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:Tr.content}),Tr.attachments&&Tr.attachments.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-2 space-y-1",children:Tr.attachments.map((Nr,_r)=>jsxRuntimeExports.jsxs("div",{className:"text-xs opacity-75 bg-white/20 rounded-lg px-2 py-1",children:[" ",Nr.name]},_r))})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 mt-1 px-1",children:Tr.timestamp.toLocaleTimeString()})]}),Tr.sender==="user"&&jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full flex items-center justify-center flex-shrink-0 order-2 shadow-lg",children:jsxRuntimeExports.jsx(User$1,{className:"h-4 w-4 text-white"})})]},Tr.id)),sr&&jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-600 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(Brain,{className:"h-4 w-4 text-white"})}),jsxRuntimeExports.jsx("div",{className:"bg-gray-100 p-3 rounded-2xl",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}),or.length>0&&jsxRuntimeExports.jsx("div",{className:"border-t border-gray-200/50 p-4 bg-gradient-to-r from-purple-50/50 to-blue-50/50",children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:or.map((Tr,Sr)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 glass-card px-3 py-2 animate-fadeInUp",style:{animationDelay:`${Sr*.1}s`},children:[Tr.type.startsWith("image/")?jsxRuntimeExports.jsx("div",{className:"p-1 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-lg",children:jsxRuntimeExports.jsx(Image$1,{className:"h-3 w-3 text-white"})}):jsxRuntimeExports.jsx("div",{className:"p-1 bg-gradient-to-r from-red-400 to-pink-500 rounded-lg",children:jsxRuntimeExports.jsx(Paperclip,{className:"h-3 w-3 text-white"})}),jsxRuntimeExports.jsx("span",{className:"text-sm text-blue-800 font-medium truncate max-w-[100px]",children:Tr.name}),jsxRuntimeExports.jsx("button",{onClick:()=>yr(Sr),className:"text-red-500 hover:text-red-700 hover:bg-red-100 rounded-full w-5 h-5 flex items-center justify-center transition-all duration-200 text-sm leading-none",children:""})]},Sr))})}),jsxRuntimeExports.jsx("div",{className:"border-t border-gray-200/50 p-4 bg-gradient-to-r from-blue-50/50 to-purple-50/50 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("input",{type:"file",ref:Ar,onChange:Tr=>pr(Tr.target.files),accept:"image/*,application/pdf",multiple:!0,className:"hidden"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{var Tr;return(Tr=Ar.current)==null?void 0:Tr.click()},variant:"outline",size:"sm",className:"flex-shrink-0 btn-secondary",children:jsxRuntimeExports.jsx(Paperclip,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Input,{value:rr,onChange:Tr=>nr(Tr.target.value),onKeyPress:Cr,placeholder:lr==="tamil"?"   ?":"Ask me anything...",className:"flex-1 input-elegant",disabled:sr}),jsxRuntimeExports.jsx(Button,{onClick:gr,disabled:sr||!rr.trim()&&or.length===0,className:"bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 flex-shrink-0 transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl",children:jsxRuntimeExports.jsx(Send,{className:"h-4 w-4"})})]})})]})]})})]})},Textarea=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx("textarea",{className:cn$1("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",er),ref:tr,..._e}));Textarea.displayName="Textarea";const generateFileHash=async er=>{const _e=await er.arrayBuffer(),tr=await crypto.subtle.digest("SHA-256",_e);return Array.from(new Uint8Array(tr)).map(nr=>nr.toString(16).padStart(2,"0")).join("")},createQuestionBankWithOcr=async(er,_e,tr)=>{try{console.log("Step 1: Uploading file...");const rr=await generateFileHash(er),sr=`${Date.now()}_${er.name}`,ir=ref(storage,`question-banks/${_e}/${sr}`);await uploadBytes(ir,er);const or=await getDownloadURL(ir);console.log("File uploaded successfully:",or);let ar="";try{if(console.log("Step 2: Performing OCR/Text Extraction..."),er.type==="application/pdf")ar=await extractAllPdfText(er),(!ar||ar.trim().length<50)&&(console.warn("Local PDF text extraction failed or was too short. Falling back to Gemini OCR."),ar=await extractRawTextFromImage(er));else if(er.type.startsWith("image/"))ar=await extractRawTextFromImage(er);else throw new Error("Unsupported file type for OCR processing.");if(!ar||ar.trim().length<50)throw new Error("OCR failed to extract sufficient text from the file.");console.log("OCR text received, length:",ar.length)}catch(Ar){throw console.error("OCR/Extraction Failed:",Ar),new Error(`OCR/Extraction failed: ${Ar.message}`)}const lr={...tr,fileUrl:or,fileName:sr,fileHash:rr,fileSize:er.size,fileType:er.type.startsWith("image")?"image":"pdf",uploadedBy:_e,uploadDate:Timestamp.now(),isActive:!0,fullOcrText:ar||"",totalQuestions:0};console.log("Step 4: Saving Question Bank to Firestore...");const cr=await addDoc(collection(db,"questionBanks"),lr);return console.log("Question Bank saved successfully with ID:",cr.id),cr.id}catch(rr){throw console.error("Error in createQuestionBankWithOcr process:",rr),rr}},createQuestionBankFromJson=async(er,_e,tr)=>{try{console.log("Step 1: Reading JSON file...");const rr=await er.text(),nr=JSON.parse(rr),sr=nr.fullText||nr.ocrText||nr.text||"";if(!sr)throw new Error("No OCR text found in JSON file. Expected 'fullText', 'ocrText', or 'text' field.");console.log("OCR text extracted from JSON, length:",sr.length);const ir=await generateFileHash(er),or={...tr,fileUrl:"",fileName:er.name,fileHash:ir,fileSize:er.size,fileType:"json",uploadedBy:_e,uploadDate:Timestamp.now(),isActive:!0,fullOcrText:sr,totalQuestions:0};console.log("Step 4: Saving Question Bank to Firestore...");const ar=await addDoc(collection(db,"questionBanks"),or);return console.log("Question Bank saved successfully with ID:",ar.id),ar.id}catch(rr){throw console.error("Error in createQuestionBankFromJson process:",rr),rr}},addCategory=async er=>(await addDoc(collection(db,"categories"),{...er,creationDate:Timestamp.now()})).id,getCategories=async()=>{const er=query(collection(db,"categories"),where("isActive","==",!0),orderBy("name","asc"));return(await getDocs(er)).docs.map(tr=>({id:tr.id,...tr.data()}))},updateCategory=async(er,_e)=>{await updateDoc(doc(db,"categories",er),_e)},deleteCategory=async er=>{await updateDoc(doc(db,"categories",er),{isActive:!1})},getQuestionBanks=async er=>{let _e;return _e=query(collection(db,"questionBanks"),where("isActive","==",!0),orderBy("year","desc")),(await getDocs(_e)).docs.map(rr=>({id:rr.id,...rr.data()}))},updateQuestionBank=async(er,_e)=>{await updateDoc(doc(db,"questionBanks",er),_e)},deleteQuestionBank=async(er,_e)=>{await updateDoc(doc(db,"questionBanks",er),{isActive:!1});try{_e&&await deleteObject(ref(storage,_e))}catch(tr){console.warn("Error deleting file from storage:",tr)}},getQuestionBankById=async er=>{const _e=await getDoc(doc(db,"questionBanks",er));return _e.exists()?{id:_e.id,..._e.data()}:null},addQuiz=async er=>(await addDoc(collection(db,"quizzes"),{...er,creationDate:Timestamp.now(),lastUpdated:Timestamp.now()})).id,getQuizzes=async(er,_e)=>{let tr;return tr=query(collection(db,"quizzes"),where("isActive","==",!0),orderBy("creationDate","desc")),(await getDocs(tr)).docs.map(nr=>({id:nr.id,...nr.data()}))},updateQuiz=async(er,_e)=>{await updateDoc(doc(db,"quizzes",er),{..._e,lastUpdated:Timestamp.now()})},deleteQuiz=async er=>{await updateDoc(doc(db,"quizzes",er),{isActive:!1})},CategoryManagement=()=>{const[er]=useAuthState(auth),[_e,tr]=reactExports.useState([]),[rr,nr]=reactExports.useState(!0),[sr,ir]=reactExports.useState(!1),[or,ar]=reactExports.useState(null),[lr,cr]=reactExports.useState({name:"",description:""});reactExports.useEffect(()=>{Ar()},[]);const Ar=async()=>{try{nr(!0);const yr=await getCategories();tr(yr)}catch{Jt$2.error("Failed to fetch categories")}finally{nr(!1)}},ur=async yr=>{if(yr.preventDefault(),!(!er||!lr.name.trim()))try{or?(await updateCategory(or,{name:lr.name.trim(),description:lr.description.trim()}),Jt$2.success("Category updated successfully!")):(await addCategory({name:lr.name.trim(),description:lr.description.trim(),createdBy:er.uid,isActive:!0}),Jt$2.success("Category added successfully!")),pr(),Ar()}catch{Jt$2.error("Failed to save category")}},dr=yr=>{ar(yr.id),cr({name:yr.name,description:yr.description}),ir(!0)},mr=async yr=>{if(confirm("Are you sure you want to delete this category?"))try{await deleteCategory(yr),Jt$2.success("Category deleted successfully!"),Ar()}catch{Jt$2.error("Failed to delete category")}},pr=()=>{cr({name:"",description:""}),ir(!1),ar(null)};return rr?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Loading categories..."})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold gradient-text",children:"Category Management"}),!sr&&jsxRuntimeExports.jsxs(Button,{onClick:()=>ir(!0),className:"btn-primary",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),sr&&jsxRuntimeExports.jsxs("form",{onSubmit:ur,className:"space-y-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-200",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"name",children:"Category Name *"}),jsxRuntimeExports.jsx(Input,{id:"name",value:lr.name,onChange:yr=>cr(hr=>({...hr,name:yr.target.value})),placeholder:"e.g., Tamil Nadu History",className:"input-elegant",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"description",children:"Description"}),jsxRuntimeExports.jsx(Textarea,{id:"description",value:lr.description,onChange:yr=>cr(hr=>({...hr,description:yr.target.value})),placeholder:"Brief description of this category",className:"input-elegant min-h-[80px]"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsxs(Button,{type:"submit",className:"btn-primary",children:[jsxRuntimeExports.jsx(Save,{className:"h-4 w-4 mr-2"}),or?"Update Category":"Add Category"]}),jsxRuntimeExports.jsxs(Button,{type:"button",onClick:pr,variant:"outline",children:[jsxRuntimeExports.jsx(X$1,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold gradient-text mb-4",children:["Existing Categories (",_e.length,")"]}),_e.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(FolderPlus,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"No categories found. Add your first category to get started."})]}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_e.map((yr,hr)=>jsxRuntimeExports.jsx(Card,{className:"p-4 hover-lift animate-fadeInUp",style:{animationDelay:`${hr*.1}s`},children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-800",children:yr.name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-1",children:yr.description})]}),jsxRuntimeExports.jsx(Badge,{className:"bg-green-100 text-green-700 ml-2",children:"Active"})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:["Created: ",yr.creationDate.toDate().toLocaleDateString()]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:()=>dr(yr),variant:"outline",size:"sm",className:"flex-1",children:[jsxRuntimeExports.jsx(SquarePen,{className:"h-3 w-3 mr-1"}),"Edit"]}),jsxRuntimeExports.jsx(Button,{onClick:()=>mr(yr.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:jsxRuntimeExports.jsx(Trash2,{className:"h-3 w-3"})})]})]})},yr.id))})]})]})},QuestionBankManagement=()=>{const[er]=useAuthState(auth),[_e,tr]=reactExports.useState([]),[rr,nr]=reactExports.useState([]),[sr,ir]=reactExports.useState(!0),[or,ar]=reactExports.useState(!1);reactExports.useState(0);const[lr,cr]=reactExports.useState(!1),[Ar,ur]=reactExports.useState(null),[dr,mr]=reactExports.useState(null),[pr,yr]=reactExports.useState(null),[hr,gr]=reactExports.useState("file"),[Cr,Tr]=reactExports.useState({title:"",description:"",categoryId:"",year:new Date().getFullYear()});reactExports.useEffect(()=>{Sr()},[]);const Sr=async()=>{try{ir(!0);const[Rr,Ir]=await Promise.all([getCategories(),getQuestionBanks()]);tr(Rr),nr(Ir)}catch{Jt$2.error("Failed to fetch data")}finally{ir(!1)}},Nr=Rr=>{var Qr;const Ir=(Qr=Rr.target.files)==null?void 0:Qr[0];if(Ir){if(Ir.type==="application/json")yr(Ir),mr(null),gr("json");else if(Ir.type.startsWith("image/")||Ir.type==="application/pdf")mr(Ir),yr(null),gr("file");else{Jt$2.error("Only image files, PDF files, and JSON files are supported");return}if(Ir.size>10*1024*1024){Jt$2.error("File size must be less than 10MB");return}Cr.title||Tr(Ur=>({...Ur,title:Ir.name.replace(/\.[^/.]+$/,"")}))}},_r=async Rr=>{if(Rr.preventDefault(),!er){Jt$2.error("You must be logged in to upload.");return}if(!Cr.title.trim()||!Cr.categoryId||!Cr.year){Jt$2.error("Please fill in all required fields (Title, Year, Category).");return}if(!Ar&&!dr&&!pr){Jt$2.error("Please select a file to upload for the new question bank.");return}ar(!0);try{if(Ar){const Ir={title:Cr.title.trim(),description:Cr.description.trim(),categoryId:Cr.categoryId,year:Cr.year};await updateQuestionBank(Ar,Ir),Jt$2.success("Question bank updated successfully!")}else{const Ir={title:Cr.title.trim(),description:Cr.description.trim(),categoryId:Cr.categoryId,year:Cr.year};pr?(await createQuestionBankFromJson(pr,er.uid,Ir),Jt$2.success("Question bank created from JSON successfully!")):dr&&(await createQuestionBankWithOcr(dr,er.uid,Ir),Jt$2.success("Question bank uploaded and processed successfully!"))}Pr(),Sr()}catch(Ir){console.error("Error saving question bank:",Ir),Jt$2.error(`Failed to save question bank: ${Ir.message}`)}finally{ar(!1)}},vr=Rr=>{ur(Rr.id),Tr({title:Rr.title,description:Rr.description||"",categoryId:Rr.categoryId,year:Rr.year}),mr(null),yr(null),gr("file"),cr(!0)},br=async Rr=>{if(confirm(`Are you sure you want to delete "${Rr.title}"?`))try{await deleteQuestionBank(Rr.id,Rr.fileUrl),Jt$2.success("Question bank deleted successfully!"),Sr()}catch{Jt$2.error("Failed to delete question bank")}},Pr=()=>{Tr({title:"",description:"",categoryId:"",year:new Date().getFullYear()}),mr(null),yr(null),gr("file"),cr(!1),ur(null)},Er=Rr=>{var Ir;return((Ir=_e.find(Qr=>Qr.id===Rr))==null?void 0:Ir.name)||"Unknown"};return sr?jsxRuntimeExports.jsx("div",{className:"text-center py-8",children:"Loading question banks..."}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold gradient-text",children:"Question Bank Management"}),!lr&&jsxRuntimeExports.jsxs(Button,{onClick:()=>cr(!0),className:"btn-primary",children:[jsxRuntimeExports.jsx(Upload,{className:"h-4 w-4 mr-2"}),"Upload New"]})]}),lr&&jsxRuntimeExports.jsxs("form",{onSubmit:_r,className:"space-y-6 p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border",children:[!Ar&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(Label$1,{children:"Upload Type"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 mb-4",children:[jsxRuntimeExports.jsxs(Button,{type:"button",variant:hr==="file"?"default":"outline",onClick:()=>gr("file"),className:"flex-1",children:[jsxRuntimeExports.jsx(FileText,{className:"h-4 w-4 mr-2"}),"Image/PDF File"]}),jsxRuntimeExports.jsxs(Button,{type:"button",variant:hr==="json"?"default":"outline",onClick:()=>gr("json"),className:"flex-1",children:[jsxRuntimeExports.jsx(Brain,{className:"h-4 w-4 mr-2"}),"JSON File"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{children:hr==="json"?"Upload JSON File *":"Upload File *"}),jsxRuntimeExports.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:hr==="json"?".json":"image/*,application/pdf",onChange:Nr,className:"hidden",id:"file-upload"}),jsxRuntimeExports.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[jsxRuntimeExports.jsx(Upload,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),jsxRuntimeExports.jsx("p",{children:dr||pr?(dr==null?void 0:dr.name)||(pr==null?void 0:pr.name):"Click to upload or drag and drop"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:hr==="json"?"JSON files with OCR text":"PDF, PNG, JPG up to 10MB"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"title",children:"Title *"}),jsxRuntimeExports.jsx(Input,{id:"title",value:Cr.title,onChange:Rr=>Tr(Ir=>({...Ir,title:Rr.target.value})),required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"year",children:"Year *"}),jsxRuntimeExports.jsx(Input,{id:"year",type:"number",value:Cr.year,onChange:Rr=>Tr(Ir=>({...Ir,year:parseInt(Rr.target.value)})),required:!0})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"category",children:"Category *"}),jsxRuntimeExports.jsxs(Select,{value:Cr.categoryId,onValueChange:Rr=>Tr(Ir=>({...Ir,categoryId:Rr})),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select a category"})}),jsxRuntimeExports.jsx(SelectContent,{children:_e.map(Rr=>jsxRuntimeExports.jsx(SelectItem,{value:Rr.id,children:Rr.name},Rr.id))})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"description",children:"Description"}),jsxRuntimeExports.jsx(Textarea,{id:"description",value:Cr.description,onChange:Rr=>Tr(Ir=>({...Ir,description:Rr.target.value}))})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{type:"submit",disabled:or,className:"btn-primary",children:or?"Processing...":jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Save,{className:"h-4 w-4 mr-2"}),Ar?"Update":"Upload & Process"]})}),jsxRuntimeExports.jsxs(Button,{type:"button",onClick:Pr,variant:"outline",disabled:or,children:[jsxRuntimeExports.jsx(X$1,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold gradient-text mb-4",children:["Uploaded Question Banks (",rr.length,")"]}),rr.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(FileText,{className:"h-12 w-12 text-gray-400 mx-auto"}),jsxRuntimeExports.jsx("p",{children:"No question banks found."})]}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:rr.map(Rr=>jsxRuntimeExports.jsx(Card,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold",children:Rr.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:Rr.description}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:[jsxRuntimeExports.jsxs("span",{children:["Category: ",Er(Rr.categoryId)]}),"  ",jsxRuntimeExports.jsxs("span",{children:["Uploaded: ",Rr.uploadDate.toDate().toLocaleDateString()]})]}),Rr.fullOcrText?jsxRuntimeExports.jsx(Badge,{className:"mt-2 bg-green-100 text-green-800",children:"OCR Processed"}):jsxRuntimeExports.jsx(Badge,{className:"mt-2 bg-yellow-100 text-yellow-800",variant:"outline",children:"OCR Pending"}),Rr.fileType==="json"&&jsxRuntimeExports.jsx(Badge,{className:"mt-2 ml-2 bg-purple-100 text-purple-800",children:"JSON Upload"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:()=>vr(Rr),variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(SquarePen,{className:"h-3 w-3"})," Edit"]}),jsxRuntimeExports.jsx(Button,{onClick:()=>br(Rr),variant:"outline",size:"sm",className:"text-red-600",children:jsxRuntimeExports.jsx(Trash2,{className:"h-3 w-3"})})]})]})},Rr.id))})]})]})},QuizManagement=()=>{const[er]=useAuthState(auth),[_e,tr]=reactExports.useState([]),[rr,nr]=reactExports.useState([]),[sr,ir]=reactExports.useState([]),[or,ar]=reactExports.useState(!0),[lr,cr]=reactExports.useState(!1),[Ar,ur]=reactExports.useState(!1),[dr,mr]=reactExports.useState(null),[pr,yr]=reactExports.useState([]),[hr,gr]=reactExports.useState(""),[Cr,Tr]=reactExports.useState({title:"",description:"",questionBankId:"",difficulty:"medium"});reactExports.useEffect(()=>{Sr()},[]);const Sr=async()=>{try{ar(!0);const[Ur,Vr,Wr]=await Promise.all([getCategories(),getQuestionBanks(),getQuizzes()]);tr(Ur),nr(Vr),ir(Wr)}catch{Jt$2.error("Failed to fetch data")}finally{ar(!1)}},Nr=async Ur=>{var Wr,Hr;if(!er||!Ur){Jt$2.error("Please select a Question Bank first.");return}cr(!0);let Vr="";try{let $r=await getQuestionBankById(Ur);if(!$r){Jt$2.error("Selected Question Bank could not be found.");return}if($r.fullOcrText)console.log("Using existing OCR text, length:",$r.fullOcrText.length),Vr=$r.fullOcrText;else{Jt$2.info("OCR text is missing. Running OCR process now, this may take a moment...");const pn=$r.fileUrl;if(console.log("File URL for OCR:",pn),!pn)throw new Error("File URL is missing from this Question Bank. Cannot process OCR.");const jr="https://ocr-image-processor-747684597937.us-central1.run.app";console.log("Calling OCR service:",jr),console.log("Request payload:",{fileUrl:pn});const Br=await fetch(jr,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileUrl:pn})});if(console.log("OCR Response status:",Br.status),console.log("OCR Response ok:",Br.ok),!Br.ok){const zr=await Br.text();throw console.error("OCR service error response:",zr),new Error(`The OCR service failed with status: ${Br.status}`)}const Lr=await Br.json();console.log("OCR Result received:",Lr),console.log("OCR fullText:",Lr.fullText),console.log("OCR fullText length:",((Wr=Lr.fullText)==null?void 0:Wr.length)||0);const Or=Lr.fullText;await updateQuestionBank(Ur,{fullOcrText:Or}),Vr=Or,Jt$2.success("OCR process complete and text saved!")}console.log("OCR Text to be set:",Vr),gr(Vr);const Xr=await generateQuestions([],"medium","english",Vr);if(Xr.error)throw new Error(Xr.error);yr(Xr.questions||[]),Jt$2.success(`Successfully generated ${((Hr=Xr.questions)==null?void 0:Hr.length)||0} questions!`),Tr(pn=>({...pn,questionBankId:Ur,title:`${$r.title} - Quiz`}))}catch($r){console.error("Error generating quiz:",$r),Jt$2.error(`Failed to generate quiz: ${$r.message}`),gr("")}finally{cr(!1)}},_r=async()=>{if(!er||!Cr.title.trim()||!Cr.questionBankId||pr.length===0){Jt$2.error("Please fill in all required fields and generate questions");return}try{const Ur=rr.find(Wr=>Wr.id===Cr.questionBankId);if(!Ur){Jt$2.error("Question bank not found");return}const Vr={title:Cr.title.trim(),description:Cr.description.trim(),questionBankId:Cr.questionBankId,categoryId:Ur.categoryId,difficulty:Cr.difficulty,language:"english",questions:pr,totalQuestions:pr.length,createdBy:er.uid,isActive:!0};dr?(await updateQuiz(dr.id,{title:Vr.title,description:Vr.description,questions:pr,totalQuestions:pr.length}),Jt$2.success("Quiz updated successfully!")):(await addQuiz(Vr),Jt$2.success("Quiz saved successfully!")),Pr(),Sr()}catch(Ur){console.error("Error saving quiz:",Ur),Jt$2.error("Failed to save quiz")}},vr=Ur=>{mr(Ur),Tr({title:Ur.title,description:Ur.description||"",questionBankId:Ur.questionBankId,difficulty:Ur.difficulty}),yr(Ur.questions||[]),ur(!0),window.scrollTo({top:0,behavior:"smooth"})},br=async(Ur,Vr)=>{if(confirm(`Are you sure you want to delete "${Vr}"?`))try{await deleteQuiz(Ur),Jt$2.success("Quiz deleted successfully!"),Sr()}catch{Jt$2.error("Failed to delete quiz")}},Pr=()=>{Tr({title:"",description:"",questionBankId:"",difficulty:"medium"}),yr([]),gr(""),ur(!1),mr(null)},Er=(Ur,Vr,Wr)=>{yr(Hr=>Hr.map(($r,Xr)=>Xr===Ur?{...$r,[Vr]:Wr}:$r))},Rr=(Ur,Vr,Wr)=>{yr(Hr=>Hr.map(($r,Xr)=>{var pn;return Xr===Ur?{...$r,options:((pn=$r.options)==null?void 0:pn.map((jr,Br)=>Br===Vr?Wr:jr))||[]}:$r}))},Ir=Ur=>{var Vr;return((Vr=rr.find(Wr=>Wr.id===Ur))==null?void 0:Vr.title)||"Unknown"},Qr=()=>{if(!hr){Jt$2.error("No OCR text available to download");return}try{const Ur={timestamp:new Date().toISOString(),questionBankId:Cr.questionBankId,questionBankTitle:Ir(Cr.questionBankId),ocrTextLength:hr.length,fullOcrText:hr},Vr=new Blob([JSON.stringify(Ur,null,2)],{type:"application/json"}),Wr=URL.createObjectURL(Vr),Hr=document.createElement("a");Hr.href=Wr,Hr.download=`ocr-debug-${Ir(Cr.questionBankId)}-${Date.now()}.json`,document.body.appendChild(Hr),Hr.click(),document.body.removeChild(Hr),URL.revokeObjectURL(Wr),Jt$2.success("OCR text downloaded successfully!")}catch(Ur){console.error("Error downloading OCR text:",Ur),Jt$2.error("Failed to download OCR text")}};return or?jsxRuntimeExports.jsx("div",{className:"text-center py-8",children:"Loading..."}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold gradient-text mb-4",children:Ar?"Edit Quiz":"Generate New Quiz"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{children:"Question Bank"}),jsxRuntimeExports.jsxs(Select,{value:Cr.questionBankId,onValueChange:Ur=>Tr(Vr=>({...Vr,questionBankId:Ur})),disabled:Ar,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"input-elegant",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select question bank"})}),jsxRuntimeExports.jsx(SelectContent,{children:rr.map(Ur=>jsxRuntimeExports.jsxs(SelectItem,{value:Ur.id,children:[Ur.title," (",Ur.year,")"]},Ur.id))})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-end",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>Nr(Cr.questionBankId),disabled:!Cr.questionBankId||lr||Ar,className:"btn-primary w-full",children:lr?"Generating...":jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Zap,{className:"h-4 w-4 mr-2"}),"Generate Quiz"]})}),hr&&jsxRuntimeExports.jsxs(Button,{onClick:Qr,variant:"outline",className:"ml-2 whitespace-nowrap",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-2"}),"Download OCR"]})]})]}),pr.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-6 mt-6 p-6 bg-gradient-to-r from-green-50 to-blue-50 rounded-xl border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Generated Questions (",pr.length,")"]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsxs(Button,{onClick:_r,className:"btn-primary",children:[jsxRuntimeExports.jsx(Save,{className:"h-4 w-4 mr-2"}),"Save Quiz"]}),jsxRuntimeExports.jsxs(Button,{onClick:Pr,variant:"outline",children:[jsxRuntimeExports.jsx(X$1,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-white rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"quiz-title",children:"Quiz Title *"}),jsxRuntimeExports.jsx(Input,{id:"quiz-title",value:Cr.title,onChange:Ur=>Tr(Vr=>({...Vr,title:Ur.target.value}))})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"quiz-description",children:"Description"}),jsxRuntimeExports.jsx(Textarea,{id:"quiz-description",value:Cr.description,onChange:Ur=>Tr(Vr=>({...Vr,description:Ur.target.value}))})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto p-2",children:pr.filter(Ur=>Ur!=null).map((Ur,Vr)=>jsxRuntimeExports.jsx(Card,{className:"p-4 bg-white",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsxs(Badge,{className:"bg-blue-100 text-blue-700",children:["Q",Vr+1]}),jsxRuntimeExports.jsx(Badge,{children:Ur.difficulty.toUpperCase()})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{children:"Question"}),jsxRuntimeExports.jsx(Textarea,{value:Ur.question||"",onChange:Wr=>Er(Vr,"question",Wr.target.value)})]}),Ur.tamilQuestion&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{children:"Tamil Question"}),jsxRuntimeExports.jsx(Textarea,{value:Ur.tamilQuestion||"",onChange:Wr=>Er(Vr,"tamilQuestion",Wr.target.value)})]}),Ur.options&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{children:"Options"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:Ur.options.map((Wr,Hr)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Badge,{children:String.fromCharCode(65+Hr)}),jsxRuntimeExports.jsx(Input,{value:Wr||"",onChange:$r=>Rr(Vr,Hr,$r.target.value)})]},Hr))})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{children:"Correct Answer"}),jsxRuntimeExports.jsx(Input,{value:Ur.answer||"",onChange:Wr=>Er(Vr,"answer",Wr.target.value)})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{children:"TNPSC Group"}),jsxRuntimeExports.jsx(Input,{value:Ur.tnpscGroup||"",onChange:Wr=>Er(Vr,"tnpscGroup",Wr.target.value)})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{children:"Explanation"}),jsxRuntimeExports.jsx(Textarea,{value:Ur.explanation||"",onChange:Wr=>Er(Vr,"explanation",Wr.target.value)})]})]})},Vr))})]})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold gradient-text mb-4",children:["Existing Quizzes (",(sr==null?void 0:sr.length)||0,")"]}),((sr==null?void 0:sr.length)||0)===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(Brain,{className:"h-12 w-12 text-gray-400 mx-auto"}),jsxRuntimeExports.jsx("p",{children:"No quizzes found."})]}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:sr==null?void 0:sr.filter(Ur=>Ur!=null).map((Ur,Vr)=>jsxRuntimeExports.jsx(Card,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold",children:Ur.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:Ur.description||"No description."}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:[jsxRuntimeExports.jsxs("span",{children:["Questions: ",Ur.totalQuestions||0]}),"  ",jsxRuntimeExports.jsxs("span",{children:["Source: ",Ir(Ur.questionBankId)]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:()=>vr(Ur),variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(SquarePen,{className:"h-3 w-3"})," Edit"]}),jsxRuntimeExports.jsx(Button,{onClick:()=>br(Ur.id,Ur.title),variant:"outline",size:"sm",className:"text-red-600",children:jsxRuntimeExports.jsx(Trash2,{className:"h-3 w-3"})})]})]})},Ur.id))})]})]})},AdminPanel=()=>{const[er,_e]=useAuthState(auth),[tr,rr]=reactExports.useState("categories");return _e?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Loading admin panel..."})]})}):er?jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-purple-400/20 to-pink-400/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-cyan-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-6 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 animate-fadeInUp",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full shadow-lg",children:jsxRuntimeExports.jsx(Shield,{className:"h-8 w-8 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Admin Panel"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Manage question banks, categories, and quizzes"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl text-white shadow-lg",children:[jsxRuntimeExports.jsx(Users,{className:"h-6 w-6 mx-auto mb-2"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:"Admin User"}),jsxRuntimeExports.jsx("div",{className:"text-xs opacity-90",children:er.phoneNumber||er.email})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-500 to-green-600 rounded-xl text-white shadow-lg",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-6 w-6 mx-auto mb-2"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:"Question Banks"}),jsxRuntimeExports.jsx("div",{className:"text-xs opacity-90",children:"Manage Content"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl text-white shadow-lg",children:[jsxRuntimeExports.jsx(Brain,{className:"h-6 w-6 mx-auto mb-2"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:"AI Quizzes"}),jsxRuntimeExports.jsx("div",{className:"text-xs opacity-90",children:"Generate & Edit"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl text-white shadow-lg",children:[jsxRuntimeExports.jsx(Settings,{className:"h-6 w-6 mx-auto mb-2"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:"Categories"}),jsxRuntimeExports.jsx("div",{className:"text-xs opacity-90",children:"Organize Content"})]})]})]}),jsxRuntimeExports.jsx(Card,{className:"glass-card p-6 animate-fadeInUp",style:{animationDelay:"0.2s"},children:jsxRuntimeExports.jsxs(Tabs,{value:tr,onValueChange:rr,className:"w-full",children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-3 mb-6",children:[jsxRuntimeExports.jsxs(TabsTrigger,{value:"categories",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4"}),"Categories"]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"question-banks",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-4 w-4"}),"Question Banks"]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"quizzes",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Brain,{className:"h-4 w-4"}),"Quizzes"]})]}),jsxRuntimeExports.jsx(TabsContent,{value:"categories",className:"space-y-6",children:jsxRuntimeExports.jsx(CategoryManagement,{})}),jsxRuntimeExports.jsx(TabsContent,{value:"question-banks",className:"space-y-6",children:jsxRuntimeExports.jsx(QuestionBankManagement,{})}),jsxRuntimeExports.jsx(TabsContent,{value:"quizzes",className:"space-y-6",children:jsxRuntimeExports.jsx(QuizManagement,{})})]})})]})})]}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs(Card,{className:"glass-card p-8 max-w-md mx-auto text-center",children:[jsxRuntimeExports.jsx(Shield,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Access Denied"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Please login to access the admin panel."})]})})},Library=()=>{const[er]=useAuthState(auth),{setQuestionResult:_e,setDifficulty:tr,setOutputLanguage:rr}=useAppContext(),[nr,sr]=reactExports.useState([]),[ir,or]=reactExports.useState([]),[ar,lr]=reactExports.useState([]),[cr,Ar]=reactExports.useState([]),[ur,dr]=reactExports.useState(!0),[mr,pr]=reactExports.useState(""),[yr,hr]=reactExports.useState("all"),[gr,Cr]=reactExports.useState("all"),[Tr,Sr]=reactExports.useState("all"),[Nr,_r]=reactExports.useState("all");reactExports.useEffect(()=>{vr()},[]),reactExports.useEffect(()=>{br()},[ar,mr,yr,gr,Tr,Nr]);const vr=async()=>{try{dr(!0);const[Ur,Vr,Wr]=await Promise.all([getCategories(),getQuestionBanks(),getQuizzes()]);sr(Ur),or(Vr),lr(Wr)}catch{Jt$2.error("Failed to fetch library data")}finally{dr(!1)}},br=()=>{let Ur=[...ar];if(mr.trim()&&(Ur=Ur.filter(Vr=>{var Wr;return Vr.title.toLowerCase().includes(mr.toLowerCase())||((Wr=Vr.description)==null?void 0:Wr.toLowerCase().includes(mr.toLowerCase()))})),yr!=="all"&&(Ur=Ur.filter(Vr=>Vr.categoryId===yr)),gr!=="all"&&(Ur=Ur.filter(Vr=>Vr.difficulty===gr)),Tr!=="all"&&(Ur=Ur.filter(Vr=>Vr.language===Tr)),Nr!=="all"){const Wr=ir.filter(Hr=>Hr.year.toString()===Nr).map(Hr=>Hr.id);Ur=Ur.filter(Hr=>Wr.includes(Hr.questionBankId))}Ar(Ur)},Pr=Ur=>{if(!er){Jt$2.error("Please login to start quiz");return}_e({questions:Ur.questions,summary:Ur.description||"",keyPoints:[],difficulty:Ur.difficulty,totalQuestions:Ur.totalQuestions}),tr(Ur.difficulty),rr(Ur.language),Jt$2.success(`Starting ${Ur.title}...`)},Er=Ur=>{const Vr=nr.find(Wr=>Wr.id===Ur);return(Vr==null?void 0:Vr.name)||"Unknown Category"},Rr=Ur=>{const Vr=ir.find(Wr=>Wr.id===Ur);return Vr?{title:Vr.title,year:Vr.year}:{title:"Unknown",year:0}},Ir=()=>{const Ur=ir.map(Vr=>Vr.year);return[...new Set(Ur)].sort((Vr,Wr)=>Wr-Vr)},Qr=()=>{pr(""),hr("all"),Cr("all"),Sr("all"),_r("all")};return er?ur?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Loading quiz library..."})]})}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-green-400/20 to-blue-400/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-purple-400/20 to-pink-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-6 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 animate-fadeInUp",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-gradient-to-r from-green-600 to-blue-600 rounded-full shadow-lg",children:jsxRuntimeExports.jsx(BookOpen,{className:"h-8 w-8 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Quiz Library"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Access curated TNPSC question banks and practice quizzes"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl text-white shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:nr.length}),jsxRuntimeExports.jsx("div",{className:"text-sm opacity-90",children:"Categories"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-500 to-green-600 rounded-xl text-white shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:ir.length}),jsxRuntimeExports.jsx("div",{className:"text-sm opacity-90",children:"Question Banks"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl text-white shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:ar.length}),jsxRuntimeExports.jsx("div",{className:"text-sm opacity-90",children:"Available Quizzes"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl text-white shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:Ir().length}),jsxRuntimeExports.jsx("div",{className:"text-sm opacity-90",children:"Years Covered"})]})]})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[jsxRuntimeExports.jsx(Filter$1,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold gradient-text",children:"Filter & Search"}),jsxRuntimeExports.jsx(Button,{onClick:Qr,variant:"outline",size:"sm",className:"ml-auto",children:"Clear Filters"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{children:"Search"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),jsxRuntimeExports.jsx(Input,{placeholder:"Search quizzes...",value:mr,onChange:Ur=>pr(Ur.target.value),className:"input-elegant pl-10"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{children:"Category"}),jsxRuntimeExports.jsxs(Select,{value:yr,onValueChange:hr,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"input-elegant",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",children:"All Categories"}),nr.map(Ur=>jsxRuntimeExports.jsx(SelectItem,{value:Ur.id,children:Ur.name},Ur.id))]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{children:"Difficulty"}),jsxRuntimeExports.jsxs(Select,{value:gr,onValueChange:Cr,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"input-elegant",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",children:"All Levels"}),jsxRuntimeExports.jsx(SelectItem,{value:"easy",children:" Easy"}),jsxRuntimeExports.jsx(SelectItem,{value:"medium",children:" Medium"}),jsxRuntimeExports.jsx(SelectItem,{value:"hard",children:" Hard"}),jsxRuntimeExports.jsx(SelectItem,{value:"very-hard",children:" Very Hard"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{children:"Language"}),jsxRuntimeExports.jsxs(Select,{value:Tr,onValueChange:Sr,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"input-elegant",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",children:"All Languages"}),jsxRuntimeExports.jsx(SelectItem,{value:"english",children:" English"}),jsxRuntimeExports.jsx(SelectItem,{value:"tamil",children:" "})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{children:"Year"}),jsxRuntimeExports.jsxs(Select,{value:Nr,onValueChange:_r,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"input-elegant",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",children:"All Years"}),Ir().map(Ur=>jsxRuntimeExports.jsx(SelectItem,{value:Ur.toString(),children:Ur},Ur))]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-end",children:jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 p-3 bg-blue-50 rounded-lg w-full text-center",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-blue-700",children:cr.length})," quizzes found"]})})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:cr.length===0?jsxRuntimeExports.jsx("div",{className:"col-span-full",children:jsxRuntimeExports.jsxs(Card,{className:"glass-card p-8 text-center",children:[jsxRuntimeExports.jsx(Target,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Quizzes Found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:ar.length===0?"No quizzes are available yet. Check back later!":"No quizzes match your current filters. Try adjusting your search criteria."}),ar.length>0&&jsxRuntimeExports.jsx(Button,{onClick:Qr,className:"mt-4",children:"Clear All Filters"})]})}):cr.map((Ur,Vr)=>{const Wr=Rr(Ur.questionBankId);return jsxRuntimeExports.jsx(Card,{className:"glass-card p-6 hover-lift animate-fadeInUp",style:{animationDelay:`${Vr*.1}s`},children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Brain,{className:"h-5 w-5 text-purple-600"}),jsxRuntimeExports.jsx(Badge,{className:"bg-purple-100 text-purple-700",children:"Quiz"}),jsxRuntimeExports.jsx(Badge,{className:`${Ur.difficulty==="easy"?"bg-green-100 text-green-700":Ur.difficulty==="medium"?"bg-yellow-100 text-yellow-700":Ur.difficulty==="hard"?"bg-red-100 text-red-700":"bg-purple-100 text-purple-700"}`,children:Ur.difficulty.toUpperCase()})]}),jsxRuntimeExports.jsx("h3",{className:"font-bold text-gray-800 text-lg leading-tight",children:Ur.title}),Ur.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:Ur.description})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[jsxRuntimeExports.jsx(FileText,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:Er(Ur.categoryId)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-4 w-4"}),jsxRuntimeExports.jsxs("span",{children:[Wr.title," (",Wr.year,")"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"h-4 w-4 text-blue-600"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-blue-700",children:[Ur.totalQuestions," Questions"]})]}),jsxRuntimeExports.jsx(Badge,{className:"bg-blue-100 text-blue-700",children:Ur.language==="tamil"?"":"English"})]})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>Pr(Ur),className:"w-full btn-primary",children:[jsxRuntimeExports.jsx(Play,{className:"h-4 w-4 mr-2"}),"Start Quiz"]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t border-gray-200",children:["Created: ",Ur.creationDate.toDate().toLocaleDateString()]})]})},Ur.id)})}),nr.length>0&&jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 animate-fadeInUp",style:{animationDelay:"0.4s"},children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold gradient-text mb-4",children:"Browse by Category"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:nr.map((Ur,Vr)=>{const Wr=ar.filter(Hr=>Hr.categoryId===Ur.id);return jsxRuntimeExports.jsx(Card,{className:"p-4 hover-lift cursor-pointer",onClick:()=>hr(Ur.id),children:jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-800",children:Ur.name}),jsxRuntimeExports.jsxs(Badge,{className:"bg-blue-100 text-blue-700",children:[Wr.length," quizzes"]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:Ur.description})]})},Ur.id)})})]})]})})]}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs(Card,{className:"glass-card p-8 max-w-md mx-auto text-center",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-12 w-12 text-blue-500 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Login Required"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Please login to access the quiz library."})]})})},LandingPage=()=>{const[er,_e]=reactExports.useState(!1),tr=()=>{_e(!0)},rr=()=>{};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-indigo-400/20 to-pink-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-purple-400/10 to-blue-400/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"4s"}})]}),jsxRuntimeExports.jsx("header",{className:"bg-white/90 backdrop-blur-elegant shadow-elegant border-b relative z-10",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg shadow-md pulse-glow",children:jsxRuntimeExports.jsx(BookOpen,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold gradient-text",children:"TNPSC Study Assistant"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:tr,className:"hidden md:flex",children:"Login"}),jsxRuntimeExports.jsx(Button,{onClick:tr,className:"btn-primary",children:"Get Started"})]})]})})}),jsxRuntimeExports.jsx("section",{className:"py-20 px-4 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl md:text-6xl font-bold mb-6 gradient-text animate-fadeInUp",children:"Master TNPSC Exams with AI"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed animate-fadeInUp",style:{animationDelay:"0.2s"},children:"Transform your TNPSC preparation with our intelligent study assistant. Analyze documents, generate questions, and get personalized guidance from Arivu - your AI study companion."}),jsxRuntimeExports.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center animate-fadeInUp",style:{animationDelay:"0.4s"},children:jsxRuntimeExports.jsx(Button,{size:"lg",onClick:tr,className:"btn-primary text-lg px-8 py-3",children:"Start Learning Now"})})]})}),jsxRuntimeExports.jsx("section",{className:"py-16 px-4 bg-white/50 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-center mb-12 gradient-text animate-fadeInUp",children:"Everything You Need to Ace TNPSC"}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 stagger-animation",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-100 rounded-lg w-fit mb-4",children:jsxRuntimeExports.jsx(FileText,{className:"h-6 w-6 text-blue-600"})}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-gray-800",children:"Smart Document Analysis"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Upload images or PDFs and get instant analysis with key points, summaries, and TNPSC relevance scores."})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-purple-100 rounded-lg w-fit mb-4",children:jsxRuntimeExports.jsx(Brain,{className:"h-6 w-6 text-purple-600"})}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-gray-800",children:"AI Question Generator"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Generate practice questions based on your study materials with customizable difficulty levels."})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-green-100 rounded-lg w-fit mb-4",children:jsxRuntimeExports.jsx(MessageCircle,{className:"h-6 w-6 text-green-600"})}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-gray-800",children:"Arivu - AI Chatbot"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Get instant answers to your questions, clarify doubts, and receive personalized study guidance."})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg w-fit mb-4",children:jsxRuntimeExports.jsx(Target,{className:"h-6 w-6 text-indigo-600"})}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-gray-800",children:"Interactive Quizzes"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Test your knowledge with interactive quizzes and track your progress over time."})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg w-fit mb-4",children:jsxRuntimeExports.jsx(Award,{className:"h-6 w-6 text-yellow-600"})}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-gray-800",children:"Study History"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Keep track of your learning journey with detailed study history and performance analytics."})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-red-100 rounded-lg w-fit mb-4",children:jsxRuntimeExports.jsx(TrendingUp,{className:"h-6 w-6 text-red-600"})}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-gray-800",children:"Progress Tracking"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Monitor your improvement with detailed analytics and personalized recommendations."})]})]})]})}),jsxRuntimeExports.jsx("section",{className:"py-20 px-4 relative z-10",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto text-center",children:jsxRuntimeExports.jsxs(Card,{className:"p-8 md:p-12 bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-elegant-lg animate-fadeInScale",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Ready to Transform Your TNPSC Preparation?"}),jsxRuntimeExports.jsx("p",{className:"text-xl mb-8 opacity-90",children:"Join thousands of successful candidates who've achieved their dreams with our AI-powered study assistant."}),jsxRuntimeExports.jsx(Button,{size:"lg",onClick:tr,className:"bg-white text-blue-600 hover:bg-gray-100 text-lg px-8 py-3 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 rounded-xl",children:"Start Your Journey Today"})]})})}),jsxRuntimeExports.jsx("footer",{className:"bg-gray-900 text-white py-12 px-4 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto text-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg shadow-md",children:jsxRuntimeExports.jsx(BookOpen,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsx("h4",{className:"text-2xl font-bold",children:"TNPSC Study Assistant"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-6",children:"Empowering TNPSC aspirants with AI-driven learning solutions"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-6 text-sm text-gray-400",children:[jsxRuntimeExports.jsx("span",{children:" 2024 TNPSC Study Assistant"}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:"Powered by AI"})]})]})}),er&&jsxRuntimeExports.jsx(AuthModal,{isOpen:er,onClose:()=>_e(!1),onSuccess:rr})]})},StudySessionSelector=({onStartSession:er,onBack:_e})=>{const[tr,rr]=reactExports.useState(""),nr=[{id:"quick-review",title:"Quick Review",description:"Perfect for reviewing notes or flashcards",duration:15,type:"review",icon:Zap,color:"from-yellow-400 to-orange-500",tips:["Review key concepts","Use flashcards","Quick recall practice"]},{id:"pomodoro-focus",title:"Pomodoro Focus",description:"Classic 25-minute focused study session",duration:25,type:"focus",icon:Clock,color:"from-red-400 to-pink-500",tips:["Single subject focus","No distractions","5-minute break after"],phases:[{name:"Focus Time",duration:25,type:"focus"},{name:"Short Break",duration:5,type:"shortBreak"}]},{id:"deep-study",title:"Deep Study",description:"Extended session for complex topics",duration:90,type:"deep",icon:Brain,color:"from-purple-400 to-indigo-500",tips:["Complex problem solving","Take breaks every 30 min","Stay hydrated"]},{id:"practice-session",title:"Practice Session",description:"Hands-on practice and problem solving",duration:45,type:"practice",icon:Target,color:"from-blue-400 to-cyan-500",tips:["Work through problems","Apply concepts","Check your work"]},{id:"reading-session",title:"Reading Session",description:"Focused reading with note-taking",duration:60,type:"focus",icon:BookOpen,color:"from-green-400 to-emerald-500",tips:["Active reading","Take notes","Summarize chapters"]},{id:"study-break",title:"Study & Break",description:"Alternating study and break periods",duration:50,type:"break",icon:Coffee,color:"from-amber-400 to-yellow-500",tips:["25 min study + 5 min break","Repeat twice","Longer break at end"],phases:[{name:"Study",duration:25,type:"focus"},{name:"Break",duration:5,type:"shortBreak"},{name:"Study",duration:25,type:"focus"},{name:"Long Break",duration:15,type:"longBreak"}]}],sr=or=>({review:"bg-yellow-100 text-yellow-700 border-yellow-200",focus:"bg-red-100 text-red-700 border-red-200",deep:"bg-purple-100 text-purple-700 border-purple-200",practice:"bg-blue-100 text-blue-700 border-blue-200",break:"bg-amber-100 text-amber-700 border-amber-200"})[or]||"bg-gray-100 text-gray-700 border-gray-200",ir=or=>{er(or,tr||void 0)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-indigo-400/20 to-pink-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-8 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-3 sm:p-6 mb-4 sm:mb-8 animate-fadeInUp",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[jsxRuntimeExports.jsxs(Button,{onClick:_e,variant:"ghost",className:"text-gray-600 hover:text-gray-800 p-1 sm:p-3",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-1"}),"Back"]}),jsxRuntimeExports.jsxs("div",{className:"text-center flex-1",children:[jsxRuntimeExports.jsx("h1",{className:"text-lg sm:text-2xl md:text-3xl font-bold gradient-text mb-1 sm:mb-2",children:"Choose Your Study Session"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-xs sm:text-base px-2",children:"Select a template that matches your learning goals"})]})]}),jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto px-2 sm:px-0",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"study-topic",className:"text-xs sm:text-sm font-semibold text-gray-700 mb-2 block",children:"What are you studying today? (Optional)"}),jsxRuntimeExports.jsx(Input,{id:"study-topic",placeholder:"e.g., TNPSC History, Mathematics, Science...",value:tr,onChange:or=>rr(or.target.value),className:"input-elegant text-center w-full text-sm"})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-6 stagger-animation px-2 sm:px-0",children:nr.map((or,ar)=>{const lr=or.icon;return jsxRuntimeExports.jsxs(Card,{className:"glass-card p-3 sm:p-6 hover-lift relative overflow-hidden group",style:{animationDelay:`${ar*.1}s`},children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${or.color} opacity-5 group-hover:opacity-10 transition-opacity duration-300`}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-full bg-gradient-to-r ${or.color} shadow-lg`,children:jsxRuntimeExports.jsx(lr,{className:"h-4 w-4 sm:h-6 sm:w-6 text-white"})}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx(Badge,{className:`${sr(or.type)} border font-semibold text-xs`,children:or.type}),jsxRuntimeExports.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-gray-800 mt-1",children:[or.duration," min"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-3 sm:mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-base sm:text-xl font-bold text-gray-800 mb-1 sm:mb-2",children:or.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-xs leading-relaxed",children:or.description})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4 sm:mb-6",children:[jsxRuntimeExports.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Study Tips:"}),jsxRuntimeExports.jsx("ul",{className:"space-y-1 sm:space-y-2",children:or.tips.map((cr,Ar)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2 text-xs text-gray-600",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:cr})]},Ar))})]}),or.phases&&jsxRuntimeExports.jsxs("div",{className:"mb-4 sm:mb-6",children:[jsxRuntimeExports.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Session Phases:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:or.phases.map((cr,Ar)=>jsxRuntimeExports.jsxs(Badge,{variant:"outline",className:"text-xs bg-white/50",children:[cr.name," (",cr.duration,"m)"]},Ar))})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>ir(or),className:`w-full bg-gradient-to-r ${or.color} hover:shadow-lg text-white font-semibold py-2 sm:py-3 text-sm sm:text-base transform hover:scale-105 transition-all duration-300`,children:[jsxRuntimeExports.jsx(Play,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),"Start Session"]})]})]},or.id)})}),jsxRuntimeExports.jsx(Card,{className:"glass-card p-3 sm:p-6 mt-4 sm:mt-8 animate-fadeInUp mx-2 sm:mx-0",style:{animationDelay:"0.8s"},children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-base sm:text-xl font-bold text-gray-800 mb-3 sm:mb-4",children:" Focus Enhancement Features"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-full w-fit mx-auto mb-2 sm:mb-3",children:jsxRuntimeExports.jsx(Clock,{className:"h-6 w-6 text-blue-600"})}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-800 mb-1 sm:mb-2 text-sm sm:text-base",children:"Background Timer"}),jsxRuntimeExports.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Timer continues running even when you switch to other sections"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"p-2 sm:p-3 bg-green-100 rounded-full w-fit mx-auto mb-2 sm:mb-3",children:jsxRuntimeExports.jsx(Target,{className:"h-6 w-6 text-green-600"})}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-800 mb-1 sm:mb-2 text-sm sm:text-base",children:"Progress Tracking"}),jsxRuntimeExports.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Track your daily study sessions and build consistency"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-full w-fit mx-auto mb-2 sm:mb-3",children:jsxRuntimeExports.jsx(Brain,{className:"h-6 w-6 text-purple-600"})}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-800 mb-1 sm:mb-2 text-sm sm:text-base",children:"Smart Notifications"}),jsxRuntimeExports.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Gentle audio cues for breaks and session transitions"})]})]})]})})]})})]})};var ROOT_NAME="AlertDialog",[createAlertDialogContext,createAlertDialogScope]=createContextScope$3(ROOT_NAME,[createDialogScope]),useDialogScope=createDialogScope(),AlertDialog$1=er=>{const{__scopeAlertDialog:_e,...tr}=er,rr=useDialogScope(_e);return jsxRuntimeExports.jsx(Root$4,{...rr,...tr,modal:!0})};AlertDialog$1.displayName=ROOT_NAME;var TRIGGER_NAME="AlertDialogTrigger",AlertDialogTrigger$1=reactExports.forwardRef((er,_e)=>{const{__scopeAlertDialog:tr,...rr}=er,nr=useDialogScope(tr);return jsxRuntimeExports.jsx(Trigger$2,{...nr,...rr,ref:_e})});AlertDialogTrigger$1.displayName=TRIGGER_NAME;var PORTAL_NAME="AlertDialogPortal",AlertDialogPortal$1=er=>{const{__scopeAlertDialog:_e,...tr}=er,rr=useDialogScope(_e);return jsxRuntimeExports.jsx(Portal$1,{...rr,...tr})};AlertDialogPortal$1.displayName=PORTAL_NAME;var OVERLAY_NAME="AlertDialogOverlay",AlertDialogOverlay$1=reactExports.forwardRef((er,_e)=>{const{__scopeAlertDialog:tr,...rr}=er,nr=useDialogScope(tr);return jsxRuntimeExports.jsx(Overlay,{...nr,...rr,ref:_e})});AlertDialogOverlay$1.displayName=OVERLAY_NAME;var CONTENT_NAME="AlertDialogContent",[AlertDialogContentProvider,useAlertDialogContentContext]=createAlertDialogContext(CONTENT_NAME),AlertDialogContent$1=reactExports.forwardRef((er,_e)=>{const{__scopeAlertDialog:tr,children:rr,...nr}=er,sr=useDialogScope(tr),ir=reactExports.useRef(null),or=useComposedRefs(_e,ir),ar=reactExports.useRef(null);return jsxRuntimeExports.jsx(WarningProvider,{contentName:CONTENT_NAME,titleName:TITLE_NAME,docsSlug:"alert-dialog",children:jsxRuntimeExports.jsx(AlertDialogContentProvider,{scope:tr,cancelRef:ar,children:jsxRuntimeExports.jsxs(Content$1,{role:"alertdialog",...sr,...nr,ref:or,onOpenAutoFocus:composeEventHandlers$1(nr.onOpenAutoFocus,lr=>{var cr;lr.preventDefault(),(cr=ar.current)==null||cr.focus({preventScroll:!0})}),onPointerDownOutside:lr=>lr.preventDefault(),onInteractOutside:lr=>lr.preventDefault(),children:[jsxRuntimeExports.jsx(Slottable,{children:rr}),jsxRuntimeExports.jsx(DescriptionWarning,{contentRef:ir})]})})})});AlertDialogContent$1.displayName=CONTENT_NAME;var TITLE_NAME="AlertDialogTitle",AlertDialogTitle$1=reactExports.forwardRef((er,_e)=>{const{__scopeAlertDialog:tr,...rr}=er,nr=useDialogScope(tr);return jsxRuntimeExports.jsx(Title,{...nr,...rr,ref:_e})});AlertDialogTitle$1.displayName=TITLE_NAME;var DESCRIPTION_NAME="AlertDialogDescription",AlertDialogDescription$1=reactExports.forwardRef((er,_e)=>{const{__scopeAlertDialog:tr,...rr}=er,nr=useDialogScope(tr);return jsxRuntimeExports.jsx(Description,{...nr,...rr,ref:_e})});AlertDialogDescription$1.displayName=DESCRIPTION_NAME;var ACTION_NAME="AlertDialogAction",AlertDialogAction$1=reactExports.forwardRef((er,_e)=>{const{__scopeAlertDialog:tr,...rr}=er,nr=useDialogScope(tr);return jsxRuntimeExports.jsx(Close,{...nr,...rr,ref:_e})});AlertDialogAction$1.displayName=ACTION_NAME;var CANCEL_NAME="AlertDialogCancel",AlertDialogCancel$1=reactExports.forwardRef((er,_e)=>{const{__scopeAlertDialog:tr,...rr}=er,{cancelRef:nr}=useAlertDialogContentContext(CANCEL_NAME,tr),sr=useDialogScope(tr),ir=useComposedRefs(_e,nr);return jsxRuntimeExports.jsx(Close,{...sr,...rr,ref:ir})});AlertDialogCancel$1.displayName=CANCEL_NAME;var DescriptionWarning=({contentRef:er})=>{const _e=`\`${CONTENT_NAME}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${CONTENT_NAME}\` by passing a \`${DESCRIPTION_NAME}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${CONTENT_NAME}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return reactExports.useEffect(()=>{var rr;document.getElementById((rr=er.current)==null?void 0:rr.getAttribute("aria-describedby"))||console.warn(_e)},[_e,er]),null},Root2=AlertDialog$1,Trigger2=AlertDialogTrigger$1,Portal2=AlertDialogPortal$1,Overlay2=AlertDialogOverlay$1,Content2=AlertDialogContent$1,Action=AlertDialogAction$1,Cancel=AlertDialogCancel$1,Title2=AlertDialogTitle$1,Description2=AlertDialogDescription$1;const AlertDialog=Root2,AlertDialogTrigger=Trigger2,AlertDialogPortal=Portal2,AlertDialogOverlay=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Overlay2,{className:cn$1("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",er),..._e,ref:tr}));AlertDialogOverlay.displayName=Overlay2.displayName;const AlertDialogContent=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsxs(AlertDialogPortal,{children:[jsxRuntimeExports.jsx(AlertDialogOverlay,{}),jsxRuntimeExports.jsx(Content2,{ref:tr,className:cn$1("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",er),..._e})]}));AlertDialogContent.displayName=Content2.displayName;const AlertDialogHeader=({className:er,..._e})=>jsxRuntimeExports.jsx("div",{className:cn$1("flex flex-col space-y-2 text-center sm:text-left",er),..._e});AlertDialogHeader.displayName="AlertDialogHeader";const AlertDialogFooter=({className:er,..._e})=>jsxRuntimeExports.jsx("div",{className:cn$1("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",er),..._e});AlertDialogFooter.displayName="AlertDialogFooter";const AlertDialogTitle=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Title2,{ref:tr,className:cn$1("text-lg font-semibold",er),..._e}));AlertDialogTitle.displayName=Title2.displayName;const AlertDialogDescription=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Description2,{ref:tr,className:cn$1("text-sm text-muted-foreground",er),..._e}));AlertDialogDescription.displayName=Description2.displayName;const AlertDialogAction=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Action,{ref:tr,className:cn$1(buttonVariants(),er),..._e}));AlertDialogAction.displayName=Action.displayName;const AlertDialogCancel=reactExports.forwardRef(({className:er,..._e},tr)=>jsxRuntimeExports.jsx(Cancel,{ref:tr,className:cn$1(buttonVariants({variant:"outline"}),"mt-2 sm:mt-0",er),..._e}));AlertDialogCancel.displayName=Cancel.displayName;const ActiveStudySession=({template:er,studyTopic:_e,onBack:tr,onComplete:rr})=>{const{activeSessionType:nr,timeRemaining:sr,isSessionActive:ir,sessionPhase:or,sessionsCompletedToday:ar,startStudySession:lr,pauseStudySession:cr,resumeStudySession:Ar,resetStudySession:ur,completeStudySession:dr,stopStudySession:mr}=useAppContext(),[pr,yr]=reactExports.useState(0),[hr,gr]=reactExports.useState(!0),[Cr,Tr]=reactExports.useState(!1),[Sr,Nr]=reactExports.useState("");reactExports.useEffect(()=>{nr||lr(er,_e)},[]),reactExports.useEffect(()=>{sr===0&&ir&&_r()},[sr,ir]);const _r=()=>{if(hr&&br(),er.phases&&pr<er.phases.length-1){const Vr=pr+1,Wr=er.phases[Vr];yr(Vr),Jt$2.success(`${er.phases[pr].name} complete! Starting ${Wr.name}`),setTimeout(()=>{lr({...er,duration:Wr.duration},_e)},2e3)}else dr(),Jt$2.success(" Study session completed! Great work!"),rr()},vr=()=>{mr(Sr.trim()||void 0),Tr(!1),Nr(""),Jt$2.success("Study session stopped and saved!"),rr()},br=()=>{try{const Vr=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT");Vr.volume=.3,Vr.play().catch(()=>{})}catch{}},Pr=Vr=>{const Wr=Math.floor(Vr/60),Hr=Vr%60;return`${Wr.toString().padStart(2,"0")}:${Hr.toString().padStart(2,"0")}`},Er=()=>{if(!er.phases){const Hr=er.duration*60;return(Hr-(sr||0))/Hr*100}const Wr=er.phases[pr].duration*60;return(Wr-(sr||0))/Wr*100},Rr=()=>er.phases?er.phases[pr]:null,Ir=Vr=>{switch(Vr){case"focus":return"from-blue-500 to-purple-600";case"shortBreak":return"from-green-500 to-emerald-600";case"longBreak":return"from-orange-500 to-red-600";default:return"from-gray-500 to-gray-600"}},Qr=Rr(),Ur=er.icon;return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:`absolute -top-20 sm:-top-40 -right-20 sm:-right-40 w-48 sm:w-96 h-48 sm:h-96 bg-gradient-to-br ${Qr?Ir(Qr.type):er.color}/20 rounded-full blur-3xl animate-pulse`}),jsxRuntimeExports.jsx("div",{className:`absolute -bottom-20 sm:-bottom-40 -left-20 sm:-left-40 w-48 sm:w-96 h-48 sm:h-96 bg-gradient-to-br ${Qr?Ir(Qr.type):er.color}/20 rounded-full blur-3xl animate-pulse`,style:{animationDelay:"2s"}})]}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-4 sm:space-y-6",children:[jsxRuntimeExports.jsx(Card,{className:"glass-card p-3 sm:p-6 animate-fadeInUp",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs(Button,{onClick:tr,variant:"ghost",className:"text-gray-600 hover:text-gray-800 p-1 sm:p-3",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-1 sm:mr-2"}),"Back"]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1",children:jsxRuntimeExports.jsxs(Button,{onClick:()=>gr(!hr),variant:"outline",size:"sm",className:"flex items-center gap-1 px-2 text-xs sm:text-sm",children:[hr?jsxRuntimeExports.jsx(Volume2,{className:"h-3 w-3"}):jsxRuntimeExports.jsx(VolumeX,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Sound"})]})})]})}),jsxRuntimeExports.jsx(Card,{className:"glass-card p-4 sm:p-6 md:p-8 text-center animate-fadeInScale",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4 sm:space-y-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 mb-3 sm:mb-4",children:[jsxRuntimeExports.jsx("div",{className:`relative w-12 sm:w-20 md:w-24 h-12 sm:h-20 md:h-24 bg-gradient-to-r ${Qr?Ir(Qr.type):er.color} rounded-full flex items-center justify-center shadow-2xl animate-pulse`,children:jsxRuntimeExports.jsx(Ur,{className:"h-6 sm:h-10 md:h-12 w-6 sm:w-10 md:w-12 text-white animate-bounce"})}),jsxRuntimeExports.jsx("h1",{className:"text-lg sm:text-2xl md:text-3xl font-bold gradient-text text-center animate-fade-in",style:{animationDelay:"0.2s"},children:Qr?`${er.title} - ${Qr.name}`:er.title})]}),jsxRuntimeExports.jsx("p",{className:"text-xs sm:text-base text-gray-600 mb-2 px-2 animate-fade-in",style:{animationDelay:"0.4s"},children:Qr?`${Qr.type==="focus"?"Stay focused with":"Take a break with"} the proven ${er.title.toLowerCase()} technique`:`Stay focused with the proven ${er.title.toLowerCase()} technique`}),_e&&jsxRuntimeExports.jsxs(Badge,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xs sm:text-base px-2 sm:px-4 py-1",children:["Studying: ",_e]})]}),er.phases&&jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-1 flex-wrap px-2",children:er.phases.map((Vr,Wr)=>jsxRuntimeExports.jsx(Button,{variant:Wr===pr?"default":"outline",size:"sm",className:Wr===pr?`bg-gradient-to-r ${Ir(Vr.type)} text-white`:"",disabled:!0,style:{fontSize:"0.65rem"},children:Vr.name},Wr))}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 sm:space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"text-3xl sm:text-6xl md:text-7xl lg:text-8xl font-bold text-gray-800 font-mono tracking-wider",children:Pr(sr||0)}),jsxRuntimeExports.jsx("div",{className:"text-xs sm:text-base text-gray-600",children:Qr?Qr.name:"Focus Time"}),jsxRuntimeExports.jsxs("div",{className:"max-w-xs sm:max-w-md mx-auto px-2 sm:px-0",children:[jsxRuntimeExports.jsx(Progress,{value:Er(),className:"h-2 sm:h-4 bg-gray-200 rounded-full overflow-hidden"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-1 sm:mt-2",children:[jsxRuntimeExports.jsx("span",{children:"Progress"}),jsxRuntimeExports.jsxs("span",{children:[Math.round(Er()),"%"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 sm:gap-3 px-2 sm:px-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-2 sm:gap-3",children:[jsxRuntimeExports.jsx(Button,{onClick:ir?cr:Ar,className:`bg-gradient-to-r ${Qr?Ir(Qr.type):er.color} hover:shadow-lg text-white px-3 sm:px-6 py-2 sm:py-4 text-sm sm:text-lg font-semibold w-full sm:w-auto`,children:ir?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Pause,{className:"h-4 w-4 mr-1 sm:mr-2"}),"Pause"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Play,{className:"h-4 w-4 mr-1 sm:mr-2"}),sr===er.duration*60?"Start":"Resume"]})}),jsxRuntimeExports.jsxs(Button,{onClick:ur,variant:"outline",className:"px-3 sm:px-6 py-2 sm:py-4 text-sm sm:text-lg font-semibold border-2 w-full sm:w-auto",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"h-4 w-4 mr-1 sm:mr-2"}),"Reset"]})]}),((Qr==null?void 0:Qr.type)==="focus"||!Qr)&&ir&&jsxRuntimeExports.jsxs(Button,{onClick:()=>{cr(),Jt$2.success("Break time! Take a few minutes to rest.")},variant:"outline",className:"px-3 sm:px-6 py-2 sm:py-4 text-sm sm:text-lg font-semibold border-2 w-full bg-gradient-to-r from-green-50 to-blue-50 border-green-300 text-green-700 hover:bg-gradient-to-r hover:from-green-100 hover:to-blue-100",children:[jsxRuntimeExports.jsx(Coffee,{className:"h-4 w-4 mr-1 sm:mr-2"}),"Take Break"]}),jsxRuntimeExports.jsxs(AlertDialog,{open:Cr,onOpenChange:Tr,children:[jsxRuntimeExports.jsx(AlertDialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"destructive",className:"px-3 sm:px-6 py-2 sm:py-4 text-sm sm:text-lg font-semibold w-full",children:[jsxRuntimeExports.jsx(Square,{className:"h-4 w-4 mr-1 sm:mr-2"}),"Stop"]})}),jsxRuntimeExports.jsxs(AlertDialogContent,{className:"max-w-sm sm:max-w-md mx-4",children:[jsxRuntimeExports.jsxs(AlertDialogHeader,{children:[jsxRuntimeExports.jsx(AlertDialogTitle,{children:"End Study Session?"}),jsxRuntimeExports.jsx(AlertDialogDescription,{children:"Are you sure you want to end this study session? Your progress will be saved."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 py-3",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"session-notes",children:"Session Notes (Optional)"}),jsxRuntimeExports.jsx(Textarea,{id:"session-notes",placeholder:"What did you accomplish in this session? Any key insights or topics covered...",value:Sr,onChange:Vr=>Nr(Vr.target.value),className:"min-h-[60px] sm:min-h-[100px] resize-none text-sm"})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 px-1",children:" Adding notes helps you track your learning progress and review what you've studied."})]}),jsxRuntimeExports.jsxs(AlertDialogFooter,{children:[jsxRuntimeExports.jsx(AlertDialogCancel,{children:"Continue Session"}),jsxRuntimeExports.jsx(AlertDialogAction,{onClick:vr,className:"bg-red-600 hover:bg-red-700",children:"End Session"})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"text-center mt-3 sm:mt-0",children:jsxRuntimeExports.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:["Sessions completed today: ",jsxRuntimeExports.jsx("span",{className:"font-bold text-blue-600",children:ar})]})})]})}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-3 sm:p-6 animate-fadeInUp",style:{animationDelay:"0.4s"},children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-3 sm:mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Brain,{className:"h-5 w-5 text-blue-600"}),"Study Tips for Maximum Focus"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 gap-2 sm:gap-4",children:er.tips.map((Vr,Wr)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 p-2 sm:p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full flex items-center justify-center text-xs font-medium flex-shrink-0",children:Wr+1}),jsxRuntimeExports.jsx("p",{className:"text-xs sm:text-base text-gray-700",children:Vr})]},Wr))}),jsxRuntimeExports.jsxs("div",{className:"mt-3 sm:mt-6 p-3 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl border border-yellow-200",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-yellow-800 mb-2 flex items-center gap-2 text-xs sm:text-base",children:[jsxRuntimeExports.jsx(Target,{className:"h-4 w-4"}),"Pro Focus Tips"]}),jsxRuntimeExports.jsxs("ul",{className:"text-xs text-yellow-700 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" Put your phone in another room or use airplane mode"}),jsxRuntimeExports.jsx("li",{children:" Close all unnecessary browser tabs and applications"}),jsxRuntimeExports.jsx("li",{children:" Have water and healthy snacks nearby"}),jsxRuntimeExports.jsx("li",{children:" Use noise-canceling headphones or white noise"}),jsxRuntimeExports.jsx("li",{children:" Set a specific goal for this study session"})]})]})]})]})})]})},queryClient=new QueryClient,AppContent=()=>{const[er,_e]=useAuthState(auth),{questionResult:tr,activeSessionType:rr}=useAppContext(),[nr,sr]=reactExports.useState(null),[ir,or]=reactExports.useState("");return React.useEffect(()=>{tr&&(window.location.hash="#/quiz")},[tr]),_e?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):er?jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[jsxRuntimeExports.jsx(NavigationHeader,{}),jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(StudyAssistant,{})}),jsxRuntimeExports.jsx(Route,{path:"/study",element:jsxRuntimeExports.jsx(StudyAssistant,{})}),jsxRuntimeExports.jsx(Route,{path:"/study-sessions",element:nr?jsxRuntimeExports.jsx(ActiveStudySession,{template:nr,studyTopic:ir,onBack:()=>{sr(null),or("")},onComplete:()=>{sr(null),or(""),window.location.hash="#/study"}}):jsxRuntimeExports.jsx(StudySessionSelector,{onStartSession:(ar,lr)=>{sr(ar),or(lr||"")},onBack:()=>window.location.hash="#/study"})}),jsxRuntimeExports.jsx(Route,{path:"/history",element:jsxRuntimeExports.jsx(StudyHistory,{})}),jsxRuntimeExports.jsx(Route,{path:"/profile",element:jsxRuntimeExports.jsx(UserProfile,{})}),jsxRuntimeExports.jsx(Route,{path:"/arivu",element:jsxRuntimeExports.jsx(ArivuChatbot,{})}),jsxRuntimeExports.jsx(Route,{path:"/admin",element:jsxRuntimeExports.jsx(AdminPanel,{})}),jsxRuntimeExports.jsx(Route,{path:"/library",element:jsxRuntimeExports.jsx(Library,{})}),jsxRuntimeExports.jsx(Route,{path:"/quiz",element:jsxRuntimeExports.jsx(StudyAssistant,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})})]})]})}):jsxRuntimeExports.jsx(LandingPage,{})},App=()=>jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsx(TooltipProvider,{children:jsxRuntimeExports.jsxs(AppProvider,{children:[jsxRuntimeExports.jsx(Toaster$1,{}),jsxRuntimeExports.jsx(Toaster,{}),jsxRuntimeExports.jsx(AppContent,{})]})})});createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{_typeof as _,commonjsGlobal$2 as c,getDefaultExportFromCjs as g};
